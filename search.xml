<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>0-1èƒŒåŒ…é—®é¢˜ï¼ˆè½¬è½½ï¼‰</title>
    <url>/article/6bd3a468.html</url>
    <content><![CDATA[<p>æ¯«ä¸å¤¸å¼ åœ°è¯´è¿™ç¯‡æ–‡ç« æˆ‘å¿…é¡»è½¬è½½ï¼Œå®åœ¨æ˜¯è®²çš„å¤ªå¥½äº†ï¼Œæ¸…æ™°æ˜“æ‡‚ï¼Œç”±æµ…å…¥æ·±ï¼Œæ”¶è·å¾ˆå¤§ã€‚</p>
<p><a href="https://www.jianshu.com/p/a66d5ce49df5">åŸåšæ–‡</a></p>
<p><a href="https://www.jianshu.com/u/a40d61a49221">ä½œè€…</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>2020æ€»ç»“</title>
    <url>/article/b724f9cd.html</url>
    <content><![CDATA[<p>å¥½å¿«ï¼Œ2020ç»ˆäºè¿‡å»äº†</p>
<p>2020å‘ç”Ÿäº†å¤ªå¤šå¤ªå¤šäº‹äº†ï¼Œæˆ‘ä¸€ä¸‹å­ä¹Ÿä¸å¯èƒ½è¯´å®Œï¼Œè¿˜æœ‰æˆ‘çš„æ–‡ç¬”å®åœ¨ç³Ÿç³•ï¼Œå†™è¿™ä¸ªçœŸä¸å¤ªè¡Œï¼Œä½†è¿˜æ˜¯è¦å†™ï¼Œè¿™æ ·å¾€åæ—¶å›å¿†éƒ½ä¼šæœ‰ä¸åŒæ„Ÿå—å’Œæƒ³æ³•ï¼Œä¼šå¾ˆæœ‰è¶£ï¼</p>
<span id="more"></span>
<h1 id="å›æƒ³æ•´ä¸ª2020">å›æƒ³æ•´ä¸ª2020</h1>
<p>é¦–å…ˆæ”¾äº†ä¸¤ä¸ªé“¾æ¥ï¼Œç¬¬ä¸€ä¸ªæ˜¯Bç«™2020è·¨å¹´å…ˆå¯¼ç‰‡ï¼Œæˆ‘è§‰å¾—æ‹çš„æŒºä¸é”™çš„ï¼›ç¬¬äºŒä¸ªæ˜¯å½“æ—¶çœ‹åˆ°çš„2020æ··å‰ªï¼Œæ¶µç›–äº†2020è®¸å¤šå¤§äº‹ä»¶ã€‚</p>
<p><a
href="https://www.bilibili.com/bangumi/play/ep363555?from=search&amp;seid=8637342301562092068">2020æœ€ç¾çš„å¤œå…ˆå¯¼ç‰‡</a></p>
<p><a
href="https://www.bilibili.com/video/BV1si4y1w7UN">ã€å¹´åº¦æ··å‰ªã€‘2020ï¼Œåƒä¸€åœºç”µå½±</a></p>
<h2 id="å¤§åŒå°å¼‚">å¤§åŒå°å¼‚</h2>
<p>æˆ‘è¿˜æ˜¯æŒ‰æ—¶é—´çº¿æ¥å§</p>
<p>ä¸ä¸€æ ·çš„æ˜¥èŠ‚</p>
<blockquote>
<p>æˆ‘è®°çš„ä¸é”™çš„è¯ï¼Œå°±æ˜¯1.9åˆ°å®¶çš„ï¼ŒåŒä¹‹å‰ä¸€æ ·ï¼Œæ²¡è¿‡ä¸¤å¤©å°±å»äº²æˆšç†å‘åº—å¸®å¿™ï¼Œå¹´æœ«æ–°å† çš„æ¶ˆæ¯å·²ç»å¼€å§‹æŠ¥é“äº†ï¼Œè¿™æ—¶æˆ‘æ­£å·§æ„Ÿå†’å’³å—½ï¼Œåƒäº†ä¸€å‘¨çš„è¯éƒ½æ²¡å¥½ï¼Œåˆ°äº†å¤§å¹´åˆäºŒå…¨å›½ä¸Šä¸‹è¿›å…¥æˆ˜â€œç–«â€çŠ¶æ€ï¼Œå…¨å›½ä¸Šä¸‹ä¸€å¿ƒï¼Œæ°‘ä¼—å®‰åˆ†å®ˆåœ¨å®¶ä¸­ï¼Œâ€œæˆ˜å£«ä»¬â€åœ¨å‰çº¿åšå®ˆå²—ä½ï¼Œä¸­å›½çš„å‡èšåŠ›å¤ªå¼ºäº†ã€‚è€Œæˆ‘è¿™æ—¶çªç„¶å‘çƒ§ç›´æ¥åˆ°39Â°ï¼ŒåŒ»é™¢è¾“äº†5å¤©æ¶²ï¼Œæˆ‘å‘çƒ§æ„Ÿå†’ä»æ¥æ²¡æœ‰è¿™ä¹ˆä¸¥é‡è¿‡ï¼ŒæœŸé—´åœ¨åŒ»é™¢ç¿»æ‰‹æœºç¿»åˆ°ç§‘æ¯”æ„å¤–çš„æ¶ˆæ¯ï¼Œæ•´ä¸ªäººæŒºéœ‡æƒŠçš„ï¼Œç§‘æ¯”ä¸€ä¸ªä»åˆä¸­å¬åˆ°ç°åœ¨çš„äººç‰©ï¼Œçªç„¶å°±è¿™ä¹ˆæ¶ˆé€äº†ï¼Œæ„Ÿå¹è¿™ä¸ªçƒåœºä¸Šçš„â€œå°é£ä¾ â€ï¼Œçœ‹è¿‡è®¸å¤šç§‘æ¯”çš„è§†é¢‘ï¼Œä»°æ…•ä¼¤å¿ƒã€‚çƒ§é€€äº†ä½†å´è¿˜æ²¡å¥½ï¼Œå› ä¸ºçƒ§çš„å¤ªä¸¥é‡ï¼Œæ•´ä¸ªå˜´éƒ½åºŸäº†ï¼Œç‰™é¾ˆè‚¿èƒ€ï¼Œå˜´çš®éƒ½æ˜¯çƒ‚çš„ï¼Œåƒä¸œè¥¿å–ä¸œè¥¿éƒ½è¦ç–¼æ­»ï¼Œé‚£æ˜¯çœŸæ˜¯éš¾å—å¾—è¦æ­»ï¼Œæœ€æ¸´æœ›çš„äº‹æƒ…å°±æ˜¯ç®€å•çš„åƒä¸œè¥¿ã€åƒå¥½å¤šå¥½åƒçš„ã€‚è™½ç„¶æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ç»å†ä¸¥é‡çš„ç–«æƒ…ï¼Œä½†æˆ‘äº²çœ¼è§åˆ°çš„ï¼Œä¸¥æ ¼æŠŠå…³å‡ºå…¥ï¼Œæ¯ä¸ªäººç™»è®°ï¼Œå°¤å…¶æ˜¯æœ€è¿‘è¿”ä¹¡çš„è¡Œç¨‹ï¼Œè¿™åªæ˜¯åœ¨æˆ‘ä»¬è¿™ç§ä½é£é™©åŒºåŸŸï¼Œé€šè¿‡è§†é¢‘å’Œæƒ³è±¡å°±å¯ä»¥çŸ¥é“é‚£äº›åœ¨ä¸€çº¿å·¥ä½œè€…çš„è¾›è‹¦ï¼Œè‡´æ•¬ã€‚</p>
</blockquote>
<p>ç½‘è¯¾</p>
<blockquote>
<p>å¼€å­¦äº†ï¼Œä¸è¿‡è¿™æ¬¡æ˜¯ç½‘è¯¾ï¼Œæƒ³éƒ½ä¸æ•¢æƒ³çš„äº‹å‘ç”Ÿäº†ï¼Œè¿™æ ·çš„ä½“éªŒçœŸçš„éš¾å¿˜ï¼Œé’‰é’‰ã€è…¾è®¯è¯¾å ‚ã€è…¾è®¯ä¼šè®®ç­‰å„ç§æ‰‹æ®µï¼Œæ¯ä¸ªè€å¸ˆè¿˜ä¼šæœ‰äº›ä¸åŒï¼Œæœ‰äº›åªéœ€è¦æŒ‰æ—¶çœ‹å®Œå“ªå‡ ä¸ªè§†é¢‘ã€å®Œæˆå“ªäº›å†…å®¹ï¼Œæœ‰çš„æ˜¯æ¯æ¬¡å‡†æ—¶å¼€è¯¾è®²è¯¾è¿˜æœ‰äº’åŠ¨ã€‚è¿œéš”åƒé‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å—å±å¹•äº¤æµã€‚å¾€å‰æ¨å‡ å¹´è¿™ç§äº‹æƒ…æ€ä¹ˆæ•¢æƒ³ï¼Œä½†ç°åœ¨çœŸçš„å®ç°äº†ã€‚è¿™ä¸ªé˜¶æ®µï¼Œä¸€ç›´åœ¨å®¶ä¸­å¸®å¿™å®¶é‡Œçš„è£…ä¿®ï¼Œæ—§æˆ¿æ”¹é€ ï¼Œæ‰€ä»¥è¿™ä¸ªå­¦æœŸå¯¹æˆ‘æ¥è¯´æˆæ•ˆå¹¶ä¸å¥½ï¼Œä½†ç»ä¸æ˜¯çæ··çš„ï¼Œå­¦åˆ°çš„ä¸œè¥¿è¿˜æŒºå¤šçš„ã€‚æ˜¥æš–èŠ±å¼€ï¼Œæˆ‘ä»¬å´è¿˜æœªèƒ½ç›¸è§ï¼Œæ˜¯æ‰€æœ‰æœŸç›¼ç›¸èšäººä»¬çš„æ„Ÿæ…¨ã€‚ç›´åˆ°4ã€5æœˆä»½ï¼Œç–«æƒ…æ…¢æ…¢ç¨³å®šä¸‹æ¥ï¼Œå¤å·¥å¤äº§å¤å­¦ï¼Œäººä»¬æ¢å¤åˆ°æ­£å¸¸çš„ç”Ÿæ´»çŠ¶æ€ã€‚è®°å¾—é‚£æ—¶ç”Ÿæ´»ä¹ æƒ¯æ˜¯æœ€å¥½çš„ï¼Œæ¯å¤©10ç‚¹å¤šæœ€å¤š11ç‚¹ç¡è§‰ï¼Œæ—©ä¸Š6ç‚¹å¤šèµ·åºŠï¼Œç›´æ¥å¸¦ä¸Šè“ç‰™è€³æœºï¼Œå‡ºæ‘èµ°åœ¨ä¸¤è¾¹éƒ½æ˜¯éº¦ç”°çš„è·¯ä¸Šï¼Œå°è·‘èµ·æ¥ï¼Œè¿ç€å¤ªé˜³ï¼Œå¥”è·‘ã€‚</p>
</blockquote>
<p>æš‘å‡</p>
<blockquote>
<p>æœç„¶è¿˜æ˜¯æ²¡ç­‰åˆ°å¼€å­¦çš„é‚£å¤©ï¼ŒæœŸæœ«è€ƒè¯•éƒ½æ˜¯åœ¨ç½‘ä¸Šè¿›è¡Œçš„ï¼Œå°±è¿™ä¹ˆå¼€å§‹äº†æš‘å‡ï¼Œæˆ‘æ˜¯ä¸æƒ³é—²ä¸‹æ¥çš„é‚£ç§äººï¼Œå°±æ˜¯åœ¨è¿™æ—¶ä¹°äº†ä¸‰æœ¬ä¹¦ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ã€ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹å’Œã€ŠJavaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ï¼Œåˆ¶å®šè®¡åˆ’æ¯å¤©è¦çœ‹å¤šå°‘é¡µï¼Œè¦åšå“ªäº›äº‹ï¼Œè¿™æ—¶çš„çŠ¶æ€æ˜¯ï¼Œä¹ æƒ¯æ¯”å‰ä¸€é˜¶æ®µå·®ä¸€ç‚¹ï¼Œä½†è¿˜æ˜¯ä¸é”™çš„ï¼Œæ—©ä¸Šçœ‹ä¹¦ï¼Œä¸‹åˆå†™åšå®¢ï¼ˆåšå®¢å°±æ˜¯åœ¨è¿™æ˜¯æ­å»ºçš„ï¼‰ï¼Œæ™šé¥­åå‡ºå»ä¸æœ‹å‹æ•£æ­¥ã€äº¤è°ˆã€‚å°±ç®—ç°åœ¨æƒ³èµ·è¿™æ ·çš„çŠ¶æ€è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæ¯å¤©è¿‡çš„å¾ˆèˆ’æœè‡ªåœ¨ã€‚å°±è¿™æ ·è¿‡äº†ä¸¤ä¸ªæœˆçš„æš‘å‡ï¼ŒæœŸç›¼ç€9æœˆèƒ½å¤Ÿå¼€å­¦ï¼Œè¿™æœŸé—´çœ‹åˆ°<a
href="https://www.bilibili.com/video/BV1x54y1e7zf">ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹</a>ï¼Œè¿˜æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼Œå¾ˆæœŸå¾…è¿™ä¸ªå•æœºæ¸¸æˆï¼Œå› ä¸ºã€Šè¥¿æ¸¸è®°ã€‹åœ¨æˆ‘å¿ƒçš„åœ°ä½ç‰¹åˆ«é«˜ï¼Œæœ¬æ¥æˆ‘æƒ³ä¸ºè¿™ä¸ªå†™ä¸€ç¯‡æ–‡ç« çš„ï¼Œä½†çœ‹äº†<a
href="https://www.bilibili.com/video/BV11D4y127tj/?spm_id_from=333.788.recommend_more_video.0">ã€æ¸¸æˆä¾¦æŸ¥å†°ã€‘å¯¹è¯ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹åˆ›ä½œå›¢é˜Ÿâ€”â€”å½“ä¸€ç¾¤å–ç»äººé‡æ–°ä¸Šè·¯</a>è§‰å¾—è‡ªå·±åšä¸äº†è¿™ä¹ˆå¥½ä¹Ÿå°±æ²¡å†™ã€‚ç‰¹åˆ«æœ‰å…±é¸£ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µï¼Œè‡ªå·±-å¤©åœ°-ä¼—ç”Ÿã€‚</p>
</blockquote>
<p>å¼€å­¦äº†</p>
<blockquote>
<p>ç»ˆäºç»ˆäºå¼€å­¦äº†ï¼Œä»æ”¾å¯’å‡åˆ°æ”¾æš‘å‡ç»å†äº†å¤§åŠå¹´ï¼Œç»ˆäºå¼€å­¦äº†ï¼Œä¸è¿‡è¦æ”¶æ‹¾çš„ä¸œè¥¿ä¹Ÿå¤ªå¤šäº†ï¼Œä»å¤§æ£‰è¢„åˆ°å¤§è£¤è¡©ï¼Œæ¸©åº¦ä»é›¶ä¸‹å·²ç»å›åˆ°30å¤šäº†ã€‚å“ï¼Œä¸çŸ¥é“å­¦æ ¡é‚£è¾¹æœ‰ä»€ä¹ˆå˜åŒ–ï¼ŒåŒå­¦è€å¸ˆæœ‰ä»€ä¹ˆå˜åŒ–ï¼Œä¼¼ä¹éƒ½æœŸç›¼ç€å›åˆ°æ ¡å›­ã€‚çƒ­ï¼Œå¸¦ç€å£ç½©å›åˆ°æ ¡å›­ï¼Œæ–°å­¦æœŸå¼€å§‹äº†ã€‚è¯´å®è¯è¿™å­¦æœŸè¿‡å¾—ä¹Ÿå¤ªå¿«äº†ï¼Œå¾ˆå¤šäººè¿˜æ²¡ä»å®¶é‡Œé‚£ä¸ªçŠ¶æ€è½¬å˜å›æ¥ï¼Œè¿™å­¦æœŸéƒ½è¿‡äº†å¤§åŠäº†ï¼Œè¿™å­¦æœŸä»»åŠ¡å®åœ¨æ˜¯é‡ï¼Œå°¤å…¶å› ä¸ºå¤§ä½œä¸šæåˆ°12ç‚¹ä¸ŠåºŠéƒ½æ˜¯å¸¸æœ‰çš„äº‹ï¼Œæ„Ÿè§‰å¤´å‘æ‰çš„éƒ½å¤šäº†ã€‚è¿™å­¦æœŸè¿˜ç‰¹æ¯ç‡¥ï¼Œå‡ ä¹æ²¡æœ‰ä»€ä»¬èŠ‚æ—¥ï¼Œä¹Ÿä¸æ”¾å‡ï¼Œä¹Ÿæ²¡æœ‰å»å“ªé‡Œç©ï¼Œä¹Ÿå°±åˆšå¼€å­¦æ—¶å»äº†æ¬¡ä¸Šæ²³å›­ï¼ˆç™½å«–ä¸é¦™å—ï¼Ÿï¼‰ï¼Œå†è¯´è°é™ªæˆ‘å»å•Šï¼Ÿæ‰€ä»¥è¯´è¿™å­¦æœŸè¶…æ— èŠï¼Œä¹Ÿä¸æ˜¯é‚£ç§æ²¡äº‹åšçš„æ— èŠï¼Œè€Œæ˜¯åšçš„äº‹éƒ½å¾ˆæ— èŠï¼Œä¹Ÿå°±å› æ­¤å§ç›¸å½“å……å®ï¼Œå­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ã€‚</p>
</blockquote>
<p>æœŸæœ«</p>
<blockquote>
<p>è¿™ä¸ªåˆ°åº•ç®—ä¸ç®—2020å‘¢ï¼Ÿç®—ï¼Œä½†æœŸæœ«å·²ç»åˆ°1æœˆäº†å‘€ï¼Œä¸ç®—ï¼Œä½†è¿™åº”è¯¥ç®—è¿™ä¸€å¹´çš„ä¸€éƒ¨åˆ†å•Šï¼Œæ¯•ç«Ÿå†œå†æ–°å¹´è¿˜æ²¡åˆ°å•Šï¼é¢ï¼ŒæœŸæœ«æŒºè¾›è‹¦çš„ï¼Œæ•´å¤©å°±æ˜¯å¤ä¹ å¤ä¹ å¤ä¹ ã€‚ã€‚ã€‚</p>
</blockquote>
<h1 id="å±•æœ›">å±•æœ›</h1>
<p>2021æ²¡è¿‡å‡ å¤©ï¼Œçœ‹åˆ°è¿™æ¡è§†é¢‘</p>
<p><a
href="https://www.bilibili.com/video/BV1rX4y1u7Tp">ä¸­å›½çš„2021ï¼Œç‰›è½¬ä¹¾å¤ï¼</a></p>
<p>ä¸çŸ¥é“ä½ ä»¬ä»€ä¹ˆæ„Ÿå—ï¼Œåæ­£æˆ‘æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼Œå› ä¸ºæˆ‘ä¹Ÿç›¸ä¿¡ä¸­å›½æ˜å¤©ä¼šæ›´å¥½ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>2022æ€»ç»“</title>
    <url>/article/20bbe8e4.html</url>
    <content><![CDATA[<p>2022æ€»ç»“æ¥çš„æœ‰ç‚¹æ™šï¼Œä½†ä¹Ÿå°±åœ¨è¿™ä¸ªæ—¶å€™æ‰èƒ½æ€»ç»“å‡ºç‚¹ä»€ä¹ˆï¼</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p>
<p>å› ä¸ºè¿™ä¸€å¹´æˆ‘éƒ½åœ¨å¤–ï¼Œå¥½ä¹…æ²¡æœ‰å›è¿‡å®¶äº†ã€‚</p>
<p>ï¼Ÿï¼Ÿï¼Ÿä»€ä¹ˆè¯ï¼Œéš¾é“åªæœ‰å›è¿‡å®¶æ‰èƒ½ç®—æ˜¯å®Œæ•´çš„ä¸€å¹´å—ï¼Ÿå®¢è§‚ç†æ€§åœ°æ¥è®²è‚¯å®šä¸æ˜¯çš„ï¼Œä½†å¯¹äºæˆ‘â€”â€”æ˜¯çš„ã€‚</p>
<span id="more"></span>
<p>2022çœŸçš„æ˜¯ä¸€æ•´å¹´æ²¡æœ‰åœ¨å®¶ï¼Œå¹´åˆç•™åœ¨äº†ä¸Šæµ·ï¼Œè¿‡äº†ç¬¬ä¸€ä¸ªå¼‚åœ°å¹´ï¼Œç„¶ååœ¨ä¸Šæµ·åº¦è¿‡äº†ä¸ŠåŠå¹´ï¼Œç›´åˆ°7æœˆç¦»å¼€äº†ä¸Šæµ·ï¼Œæ¥åˆ°äº†æ­å·ï¼Œåˆåœ¨æ­å·è¿‡äº†ä¸‹åŠå¹´ã€‚è¿™äº›æ˜¯å®Œæˆçš„2022ï¼Œä½†è¿™éƒ½æ˜¯åœ¨å¤–çš„2022ï¼Œåœ¨å®¶çš„2022åªèƒ½å‹‰å¼ºç®—ä¸Šé˜´å†è…Šæœˆçš„æœ€åä¸¤å¤©äº†ã€‚ä½†ä¹Ÿåªæœ‰æˆ‘å›å»ä¹‹åæ‰èƒ½å®Œæˆ2022çš„æ€»ç»“ã€‚åœ¨å¤–çš„çš„æˆé•¿ã€è§è¯†åªæ˜¯åœ¨å¤–çš„éƒ¨åˆ†ï¼Œå½“æˆ‘å›å»ï¼Œè¸ä¸Šæ•…åœŸï¼Œæ‰ä¼šæ„Ÿå—åˆ°è¿™å¹´å®Œç»“äº†ï¼Œæ–°å¹´å¼€å§‹äº†ã€‚</p>
<p>ä»Šå¹´çš„æ•…äº‹æ˜¯è®²ä¸å®Œçš„ï¼Œå¦‚æœçœŸçš„è¦è®²å®Œä¹Ÿæ°æ°æ˜¯ä¸€å¹´çš„æ—¶é—´ã€‚</p>
<h1 id="å¯¹äºæˆ‘åˆ†ä¸º4ä¸ªéƒ¨åˆ†">2022å¯¹äºæˆ‘åˆ†ä¸º4ä¸ªéƒ¨åˆ†</h1>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†">ç¬¬ä¸€éƒ¨åˆ†</h2>
<p>æ˜¯åœ¨å¹´åˆåˆ°ä¸Šæµ·ç–«æƒ…å®Œå…¨çˆ†å‘</p>
<p>è¿™æ®µæ—¶é—´æˆ‘åœ¨äº’è”ç½‘å…¬å¸å®ä¹ ï¼Œç°å®ç‰ˆçš„èŒåœºä½“éªŒï¼Œåªèƒ½æ„Ÿæ…¨â€œå­¦ç”Ÿæ—¶ä»£å®åœ¨æ˜¯å¤ªç¾å¥½äº†ï¼â€ã€‚èŒåœºæ˜¯æ®‹é…·çš„ï¼Œè¿™ä¸ç”¨å¤šè¯´ï¼Œä½†å¯¹äºæˆ‘è¿™ä¸ªèŒåœºæ–°äººæ¥è¯´è¿˜æ˜¯æŒºéš¾æ¥å—çš„ã€‚å¯¹äºå®ä¹ ç”Ÿçš„æˆ‘ï¼Œå·¥ä½œé‡è™½è¯´ä¸ç®—å¾ˆå¤§ï¼Œä½†æ˜¯è¿˜æ˜¯èƒ½æ„Ÿå—åˆ°æ»¡æ»¡çš„å‹åŠ›ã€‚è¿˜è®°å¾—å¤§å­¦æœŸé—´ä¸ºäº†å®Œæˆâ€œJava
Webâ€è¯¾ç¨‹ä½œä¸šï¼Œé€šå®µè¾¾æ—¦ï¼Œä¹æ­¤ä¸ç–²ï¼Œæ¢ç´¢æœªçŸ¥ï¼Œæ¯«æ— ç•æƒ§çš„æ ·å­æ˜¯å¤šä¹ˆè®©äººæ€€å¿µï¼Œå¯ç°åœ¨çš„æˆ‘ä¸å†æœ‰é‚£æ ·çš„æ¿€æƒ…äº†ã€‚è¿™æ®µæ—¶é—´ï¼Œè¿˜æ˜¯å¸¦ç€å­¦ç”Ÿçš„é‚£ä»½æ— çŸ¥ä¸å–„è‰¯ï¼Œå¥½å¥‡å¿ƒè¿˜æ˜¯å¾ˆå¼ºã€‚åŒæ—¶ï¼Œæœªæ¥çš„é‚£ä¸ªæ–¹å‘ï¼Œå¼ºå…‰è¿˜æ˜¯é‚£ä¹ˆäº®ï¼Œå°½ç®¡åªèƒ½é€šè¿‡çœ¼å‰çš„æ‰‹æŒç¼éš™å»çœ‹ï¼Œè€€çœ¼çš„å…‰èŠ’æ˜¯åˆºçœ¼çš„ï¼Œä¾æ—§çœ‹çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½†ä¹Ÿæ˜¯å°½é‡ççœ¼çœ‹ç€ã€‚</p>
<p>æˆ‘æ¸æ¸å¼€å§‹ç†è§£ä¸€ä¸ªå…¬å¸å®ƒæ˜¯æ€ä¹ˆå­˜åœ¨çš„ï¼Œå®ƒå¦‚ä½•è¿è½¬ï¼Œæœ‰å“ªäº›éƒ¨é—¨ï¼Œä»–ä»¬çš„èŒè´£åˆæ˜¯ä»€ä¹ˆå—ï¼Ÿåœ¨æˆ‘è¿™é‡Œæ˜¯æœ‰äº†ä¸€äº›ç­”æ¡ˆçš„ã€‚</p>
<p>è¿™æ®µæ—¶é—´çš„æˆ</p>
<h2 id="ç¬¬äºŒéƒ¨åˆ†">ç¬¬äºŒéƒ¨åˆ†</h2>
<p>æ˜¯ä¸Šæµ·ç–«æƒ…çˆ†å‘åˆ°ç¦»å¼€ä¸Šæµ·</p>
<p>è¿™æ®µæ—¶é—´æ˜¯å¿…é¡»è¦åœ¨æˆ‘è¿‘å‡ å¹´ç”šè‡³æ˜¯ä¸€ç”Ÿä¸­ç•™ä¸‹å°è®°çš„ã€‚</p>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†">ç¬¬ä¸‰éƒ¨åˆ†</h2>
<p>æ˜¯æ­å·å·¥ä½œçš„è¿™ä¸‹åŠå¹´</p>
<p>æœ‰äº†å‰åŠå¹´çš„æˆé•¿ï¼Œå¯¹äºå·¥ä½œå’Œç”Ÿæ´»æœ‰äº†æ›´æ¸…æ™°çš„è®¤çŸ¥</p>
<h2 id="ç¬¬å››éƒ¨åˆ†">ç¬¬å››éƒ¨åˆ†</h2>
<p>æ˜¯å›å®¶ä¸ç¦»å®¶</p>
<p>å®¶ä¹¡æ˜¯è´«ç˜ çš„ã€æ— åŠ©çš„ã€å–„è‰¯çš„ï¼ˆæœ´è´¨çš„å–„è‰¯ï¼‰ã€å¯æ€œçš„</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>AOPè®°å½•è®¿é—®é‡</title>
    <url>/article/5b66ad6f.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ªçŸ­é“¾æ¥çš„é¡¹ç›®ï¼Œå…¶å®åº”è¯¥æ˜¯ç®—æ”¹é€ ï¼Œå°†åŸæ¥çš„åŠŸèƒ½å®Œå–„ä¸€ä¸‹ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ä¸€ä¸ªè®°å½•è®¿é—®é‡çš„éœ€æ±‚ï¼Œéœ€æ±‚å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<p>æ ¹æ®æ¯ä¸ªé“¾æ¥è®°å½•å…¶ä¸€å®šæ—¶é—´å†…çš„è®¿é—®é‡ï¼Œè¿™ä¸ªè®¿é—®é‡åº”è¯¥æ˜¯éšæ—¶é—´åŠ¨æ€å˜åŒ–ï¼Œå³ä½¿æˆ‘ä¸åšä»€ä¹ˆæ“ä½œã€‚</p>
<p>æœ€å®¹æ˜“å°±æƒ³åˆ°åˆ©ç”¨<code>Redis</code>çš„ä¸¤ç§æ•°æ®ç»“æ„<code>string</code>å’Œ<code>hash</code></p>
<ul>
<li>stringï¼Œ<code>link:visit:$id:$date</code></li>
</ul>
<p>éœ€è¦é€šè¿‡æ—¶é—´æ¥è®¾ç½®å’ŒæŸ¥è¯¢ï¼Œå¯å•ç‹¬è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ é™¤ä¸èƒ½ç›´æ¥é€šè¿‡linkæ¥åˆ é™¤ï¼Œåªèƒ½è‡ªç„¶è¿‡æœŸï¼Ÿ</p>
<ul>
<li>hashï¼Œ<code>link:visit:$id</code></li>
</ul>
<p>è®¾ç½®å’ŒæŸ¥è¯¢ç®€å•ï¼Œä¸å¯å•ç‹¬è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ é™¤å¯ä¸€æ¬¡æ€§åˆ é™¤</p>
<p>å½“ç„¶æˆ‘è¿˜çœ‹åˆ°æœ‰åˆ©ç”¨<code>hyperloglog</code>è®°å½•è®¿é—®é›†åˆçš„ï¼Œè¿™ä¸æˆ‘éœ€æ±‚ä¸ç¬¦å°±ä¸æäº†</p>
<span id="more"></span>
<h1 id="å¼€å§‹å§">å¼€å§‹å§</h1>
<p>å¦‚æ ‡é¢˜æ‰€è¨€ï¼Œåˆ©ç”¨çš„å°±æ˜¯AOPå®ç°çš„</p>
<h2 id="æ³¨è§£ç±»">æ³¨è§£ç±»</h2>
<p>è¿™ç§åšæ³•æ˜¯æœ‰é™åˆ¶äº†ï¼Œæˆ‘ä¹Ÿåœ¨ä¸‹é¢å†™æ˜äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¿é—®é‡è®°å½•ï¼Œé€‚åˆgetæ¥å£ï¼Œä¸”åªæœ‰ä¸€ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/11</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Visit &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æè¿°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼“å­˜å‰ç¼€</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">prefix</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼“å­˜è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> long</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">long</span> <span class="title function_">timeout</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">7L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼“å­˜è¿‡æœŸæ—¶é—´å•ä½</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> TimeUnit</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TimeUnit <span class="title function_">unit</span><span class="params">()</span> <span class="keyword">default</span> TimeUnit.DAYS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ‡é¢">åˆ‡é¢</h2>
<p>å‰é¢ä¹Ÿæåˆ°äº†ï¼Œè¿™ä¸ªåªé€‚ç”¨äºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦è®°å½•è®¿é—®é‡çš„å”¯ä¸€<code>id</code>ï¼Œ<code>Redis</code>æ“ä½œä¹Ÿæ˜¯ç›¸å½“ç®€å•ï¼Œâ€å‰ç¼€+<code>id</code>+æ—¶é—´â€œä¸º<code>key</code>ï¼Œ<code>value</code>ä¸ºæ•°é‡å°±å®Œäº‹äº†</p>
<p>è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ï¼Œè¿™é‡Œè®¾ç½®çš„è¿‡æœŸæ—¶é—´ä¸€ç›´è¦å’Œä¹‹åéœ€è¦æŸ¥è¯¢æ—¶é—´å¯¹åº”ï¼Œä¹Ÿå°±æ˜¯è¯´è®¾ç½®äº†7å¤©ï¼Œä¹‹åæŸ¥çš„ä¹Ÿåªèƒ½æ˜¯7å¤©ï¼Œä¸ç„¶å°±ä¸å¯¹äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/11</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VisitAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ValueOperations&lt;String, String&gt; valueOperations;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;@annotation(visit)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">(JoinPoint point, Visit visit)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;value &#123;&#125;,prefix &#123;&#125;,timeout &#123;&#125;,unit &#123;&#125;&quot;</span>, visit.value(), visit.prefix(), visit.timeout(), visit.unit());</span><br><span class="line">        Object[] args = point.getArgs();</span><br><span class="line">        <span class="type">String</span> <span class="variable">now</span> <span class="operator">=</span> LocalDate.now().toString();</span><br><span class="line">        <span class="comment">// argsè¿™ä¹ˆæ”¾ï¼Œé‚£ä¹ˆå°±ä¸å…·å¤‡æ™®é€‚æ€§äº†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> RedisUtils.getKey(visit.prefix(), args[<span class="number">0</span>], now);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> valueOperations.get(key);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != value) &#123;</span><br><span class="line">            valueOperations.increment(key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            valueOperations.set(key, <span class="string">&quot;1&quot;</span>, visit.timeout(), visit.unit());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ”¾å¼ƒ">æ”¾å¼ƒ</h2>
<p>ä¹Ÿæ˜¯å› ä¸ºä¸Šé¢è¯´çš„é‚£äº›ç¼ºç‚¹ï¼Œæœ€ç»ˆè¿˜æ˜¯æ”¾å¼ƒäº†è¿™ä¸ªæ–¹æ³•</p>
<p>æ”¹å›äº†æ¯æ¬¡è®¿é—®ä¸»åŠ¨åœ°å»æ“ä½œ<code>redis</code>äº†ğŸ˜‚</p>
<h2 id="æŸ¥è¯¢è®¿é—®é‡">æŸ¥è¯¢è®¿é—®é‡</h2>
<p>æ²¡ä»€ä¹ˆè¯´çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Visits <span class="title function_">getVisits</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> getVisits(id, RedisUtils.TIME_OUT_30);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Visits <span class="title function_">getVisits</span><span class="params">(Long id, <span class="type">long</span> days)</span> &#123;</span><br><span class="line">  <span class="type">LinkMap</span> <span class="variable">linkMap</span> <span class="operator">=</span> baseMapper.selectById(id);</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">null</span> == linkMap) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">LocalDate</span> <span class="variable">now</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">  <span class="type">Visits</span> <span class="variable">visits</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Visits</span>();</span><br><span class="line">  <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  List&lt;VisitsVO&gt; visitsVOList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; days; i++) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">date</span> <span class="operator">=</span> now.minusDays(i).toString();</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> RedisUtils.getKey(CacheConstants.LINK_VISITS, id, date);</span><br><span class="line">    <span class="type">String</span> <span class="variable">count</span> <span class="operator">=</span> valueOperations.get(key);</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> == count || <span class="string">&quot;0&quot;</span>.equals(count)) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    total += Integer.parseInt(count);</span><br><span class="line">    <span class="type">VisitsVO</span> <span class="variable">visitsVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VisitsVO</span>();</span><br><span class="line">    visitsVO.setDate(date);</span><br><span class="line">    visitsVO.setCount(count);</span><br><span class="line">    visitsVOList.add(visitsVO);</span><br><span class="line">  &#125;</span><br><span class="line">  visits.setTotal(total);</span><br><span class="line">  visits.setVisitsVOList(visitsVOList);</span><br><span class="line">  <span class="keyword">return</span> visits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¯´åˆ°åº•ï¼ŒAOPå®ç°çš„å¾ˆä¸æˆç†Ÿï¼Œå®æˆ˜æ„ä¹‰ä¸å¤§ã€‚</p>
<p>å“ˆå“ˆå“ˆå“ˆå“ˆã€‚ã€‚ã€‚ã€‚ã€‚</p>
]]></content>
      <tags>
        <tag>AOP</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>AJAXä¸JSONåˆæ¬¡ä½¿ç”¨</title>
    <url>/article/933adcc2.html</url>
    <content><![CDATA[<h1 id="ç®€å•ä»‹ç»">ç®€å•ä»‹ç»</h1>
<p>åœ¨è¿™æ¬¡<a href="https://wnhyang.github.io/article/54805cfd.html">Java
Web</a>å¤§ä½œä¸šä¸­ï¼Œç”¨åˆ°äº†å¥½å¤šæ¬¡AJAXï¼Œå®ç°å¼‚æ­¥åˆ·æ–°ç½‘é¡µï¼Œå…¶ä¸­ä¸»è¦åŠŸèƒ½éƒ¨åˆ†æœ‰è¯„è®ºã€å†™æ–‡ç« ã€ä¿®æ”¹ä¿¡æ¯ç­‰ã€‚</p>
<p>ä¸‹é¢ç®€å•è¯´ä¸€è¯´æˆ‘æ˜¯æ€ä¹ˆä½¿ç”¨çš„å§ï¼</p>
<span id="more"></span>
<h1 id="ä¸»è¦å·¥å…·æˆ–æ˜¯è¯´ç¯å¢ƒ">ä¸»è¦å·¥å…·æˆ–æ˜¯è¯´ç¯å¢ƒ</h1>
<ul>
<li>SSM</li>
<li>jQuery</li>
<li>fastjson</li>
</ul>
<h2 id="æ³¨æ„">æ³¨æ„ï¼š</h2>
<p>JSONè¿”å›æ—¶å¯èƒ½ä¼šå‡ºç°ä¹±ç ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;xxx&quot;, produces = &quot;text/json;charset=UTF-8&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br></pre></td></tr></table></figure>
<p>å…¨å±€è®¾ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/plain;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json;charset=utf-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/x-www-form-urlencoded;charset=utf-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jacksonMessageConverter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/x-www-form-urlencoded;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="éœ€æ±‚ä¸å®ç°">éœ€æ±‚ä¸å®ç°</h1>
<p>æ¥ç€æŒ‰ç…§éœ€æ±‚-å®ç°è¿™æ ·çš„è¿‡ç¨‹ï¼Œå±•ç¤ºæˆ‘åšäº†äº›ä»€ä¹ˆå§ï¼</p>
<h2 id="æŸ¥çœ‹æŸä¸€ç±»æ–°é—»">æŸ¥çœ‹æŸä¸€ç±»æ–°é—»</h2>
<p>è¦æ±‚æŸ¥çœ‹æŸä¸€ç±»æ–°é—»ï¼ˆå›½å†…ã€å†›äº‹ã€ç§‘æŠ€ã€‚ã€‚ã€‚ï¼‰ï¼Œç‚¹å‡»ç±»å‹åå±•ç¤ºéƒ¨åˆ†æ–°é—»ï¼Œç‚¹å‡»åº•éƒ¨â€œæŸ¥çœ‹æ›´å¤šâ€æŒ‰é’®ï¼Œæ˜¾ç¤ºæ›´å¤šçš„è¿™ç±»æ–°é—»ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹é•¿æˆªå›¾ï¼Œæˆ‘è®¾ç½®çš„æ˜¯æ¯é¡µ10æ¡æ–°é—»ï¼Œè‹¥è¿˜æœ‰æ›´å¤šåº•éƒ¨æ˜¾ç¤ºæŸ¥çœ‹æ›´å¤šï¼Œè‹¥æ²¡æœ‰åˆ™æ˜¾ç¤ºæ²¡æœ‰æ›´å¤šå†…å®¹ã€‚</p>
<figure>
<img data-src="https://img.imgdb.cn/item/60011af93ffa7d37b326cf3a.jpg"
alt="æŸç±»æ–°é—»" />
<figcaption aria-hidden="true">æŸç±»æ–°é—»</figcaption>
</figure>
<p>å‰ç«¯å®Œæ•´ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; prefix=&quot;fmt&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>news<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/layUi/css/layui.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> css = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">marginLeft</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">marginRight</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">width</span>: <span class="string">&#x27;70%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">height</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#newsArea&quot;</span>).<span class="title function_">css</span>(css);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">more</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsByCIdMore&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;<span class="attr">cid</span>: $&#123;cid&#125;, <span class="attr">cPage</span>: $(<span class="string">&quot;#cp&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">each</span>(data.<span class="property">moreNews</span>, <span class="keyword">function</span> (<span class="params">index, value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> s = <span class="string">&#x27;&lt;div class=&quot;layui-card&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;div class=&quot;layui-card-header&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsById?nid=&#x27;</span> + value.<span class="property">newsId</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&quot; target=&quot;_blank&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;H2&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            value.<span class="property">title</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/H2&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;div class=&quot;layui-card-body&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            value.<span class="property">createTime</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#newsbody&quot;</span>).<span class="title function_">append</span>(s);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(data.<span class="property">cPage</span>+<span class="number">1</span>&lt;$&#123;totalPage&#125;)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> x=<span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;more()&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æ›´å¤š&amp;gt;&amp;gt;&lt;/a&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#more&quot;</span>).<span class="title function_">html</span>(x)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> y=<span class="string">&#x27;&lt;p&gt;æ²¡æœ‰æ›´å¤šå†…å®¹äº†&lt;/p&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#more&quot;</span>).<span class="title function_">html</span>(y)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&quot;#cp&quot;</span>).<span class="title function_">val</span>(data.<span class="property">cPage</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;newsArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;newsbody&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;newsL&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-header&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsById?nid=$&#123;news.newsId&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">H2</span>&gt;</span>$&#123;news.title&#125;<span class="tag">&lt;/<span class="name">H2</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fmt:formatDate</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;news.createTime&#125;&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;more&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;cPage+1&lt;totalPage&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;more()&quot;</span>&gt;</span>ç‚¹å‡»æŸ¥çœ‹æ›´å¤š<span class="symbol">&amp;gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ²¡æœ‰æ›´å¤šå†…å®¹äº†<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;cp&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;cPage&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯¹åº”Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;queryNewsByCId&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">queryNewsByCid</span><span class="params">(<span class="meta">@RequestParam(&quot;cid&quot;)</span> <span class="type">long</span> cid, <span class="meta">@RequestParam(value = &quot;cPage&quot;, required = false, defaultValue = &quot;0&quot;)</span> <span class="type">int</span> cPage)</span> &#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;front/news&quot;</span>);</span><br><span class="line">    List&lt;News&gt; newsL = frontService.QueryNewsByCId(cid, cPage);</span><br><span class="line">    <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> frontService.QueryNewsTotalByCId(cid);</span><br><span class="line">    <span class="type">int</span> <span class="variable">totalPage</span> <span class="operator">=</span> (<span class="type">int</span>) Math.ceil(total * <span class="number">1.0</span> / <span class="number">10</span>);</span><br><span class="line">    mv.addObject(<span class="string">&quot;cid&quot;</span>, cid);</span><br><span class="line">    mv.addObject(<span class="string">&quot;cPage&quot;</span>, cPage);</span><br><span class="line">    mv.addObject(<span class="string">&quot;totalPage&quot;</span>, totalPage);</span><br><span class="line">    mv.addObject(<span class="string">&quot;newsL&quot;</span>, newsL);</span><br><span class="line">    <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;queryNewsByCIdMore&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">queryNewsByCIdMore</span><span class="params">(Model model, <span class="meta">@RequestParam(&quot;cid&quot;)</span> <span class="type">long</span> cid, <span class="meta">@RequestParam(value = &quot;cPage&quot;, required = false, defaultValue = &quot;0&quot;)</span> <span class="type">int</span> cPage)</span> &#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    List&lt;News&gt; newsL = frontService.QueryNewsByCId(cid, (cPage + <span class="number">1</span>) * <span class="number">10</span>);</span><br><span class="line">    map.put(<span class="string">&quot;moreNews&quot;</span>, newsL);</span><br><span class="line">    map.put(<span class="string">&quot;cPage&quot;</span>, cPage + <span class="number">1</span>);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;cPage&quot;</span>, cPage + <span class="number">1</span>);</span><br><span class="line">    JSON.DEFFAULT_DATE_FORMAT = <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map, SerializerFeature.WriteDateUseDateFormat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•´ä¸ªé¡¹ç›®ç°åœ¨ä»‹ç»ä¸äº†ï¼Œå·®å¾ˆå¤šä¸œè¥¿ï¼Œä¸è¿‡åªçœ‹è¿™éƒ¨åˆ†AJAXä¸åå°äº¤äº’ï¼Œè¿˜æ˜¯å¯ä»¥çš„ã€‚</p>
<h2 id="æŸ¥çœ‹å…³é”®è¯æ–°é—»">æŸ¥çœ‹å…³é”®è¯æ–°é—»</h2>
<p>è¿™ä¸ªä¸ä¸Šé¢çš„æŸ¥çœ‹æŸä¸€ç±»æ–°é—»å‡ ä¹ç›¸åŒï¼Œä¸åšè¿‡å¤šä»‹ç»äº†ï¼Œä»…ä»…æ˜¯æŠŠbyCidçš„éƒ¨åˆ†æ¢æˆbyKeyã€‚</p>
<p>Controlleréƒ¨åˆ†ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;queryNewsByKey&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">queryNewsByKey</span><span class="params">(<span class="meta">@RequestParam(&quot;key&quot;)</span> String key, <span class="meta">@RequestParam(value = &quot;cPage&quot;, required = false, defaultValue = &quot;0&quot;)</span> <span class="type">int</span> cPage)</span> &#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;front/searchNews&quot;</span>);</span><br><span class="line">    List&lt;News&gt; newsL = frontService.QueryNewsByKey(key, cPage);</span><br><span class="line">    <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> frontService.QueryNewsTotalByKey(key);</span><br><span class="line">    <span class="type">int</span> <span class="variable">totalPage</span> <span class="operator">=</span> (<span class="type">int</span>) Math.ceil(total * <span class="number">1.0</span> / <span class="number">10</span>);</span><br><span class="line">    mv.addObject(<span class="string">&quot;key&quot;</span>, key);</span><br><span class="line">    mv.addObject(<span class="string">&quot;cPage&quot;</span>, cPage);</span><br><span class="line">    mv.addObject(<span class="string">&quot;totalPage&quot;</span>, totalPage);</span><br><span class="line">    mv.addObject(<span class="string">&quot;newsL&quot;</span>, newsL);</span><br><span class="line">    <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;queryNewsByKeyMore&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">queryNewsByKeyMore</span><span class="params">(Model model, <span class="meta">@RequestParam(&quot;key&quot;)</span> String key, <span class="meta">@RequestParam(value = &quot;cPage&quot;, required = false, defaultValue = &quot;0&quot;)</span> <span class="type">int</span> cPage)</span> &#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    List&lt;News&gt; newsL = frontService.QueryNewsByKey(key, (cPage + <span class="number">1</span>) * <span class="number">10</span>);</span><br><span class="line">    map.put(<span class="string">&quot;moreNews&quot;</span>, newsL);</span><br><span class="line">    map.put(<span class="string">&quot;cPage&quot;</span>, cPage + <span class="number">1</span>);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;cPage&quot;</span>, cPage + <span class="number">1</span>);</span><br><span class="line">    JSON.DEFFAULT_DATE_FORMAT = <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map, SerializerFeature.WriteDateUseDateFormat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ–°é—»å¢åˆ æ”¹">æ–°é—»å¢åˆ æ”¹</h2>
<p>ç™»å½•è´¦æˆ·åï¼Œç‚¹å‡»å†™æ–‡ç« ï¼Œå¯ä»¥è¿›åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œå…¶å®æ˜¯æ¨¡ä»¿<strong>ç®€ä¹¦</strong>çš„ï¼Œå·¦ä¾§æ˜¯å·²ç»å†™è¿‡çš„æ–‡ç« ï¼Œç‚¹å‡»æ ‡é¢˜è½¬åˆ°æ–‡ç« è¯¦æƒ…ï¼Œä¸‹æ–¹å›¾æ ‡è¡¨ç¤ºæ–‡ç« çŠ¶æ€ï¼Œè‹¥å®¡æ ¸é€šè¿‡å°±æ˜¯ä¸‹å›¾ä¸­ç»¿è‰²å›¾æ ‡ï¼Œè‹¥å®¡æ ¸ä¸­åˆ™æ˜¯é»„è‰²å›¾æ ‡ï¼Œè‹¥å®¡æ ¸æœªé€šè¿‡åˆ™æ˜¯çº¢è‰²å›¾æ ‡ã€‚å³ä¸‹è§’æœ‰â€œä¿®æ”¹â€ã€â€œåˆ é™¤â€æŒ‰é’®ï¼Œä¿®æ”¹éœ€è¦é€šè¿‡AJAXï¼Œåç«¯å¤„ç†åè¿”å›JSONåˆ°å‰ç«¯ï¼Œæ˜¾ç¤ºåˆ°å·¦ä¾§ç¼–è¾‘åŒºï¼Œæäº¤ä¿®æ”¹ï¼Œæ–°é—»é‡æ–°å˜ä¸ºå®¡æ ¸ä¸­çŠ¶æ€ï¼Œåˆ é™¤åˆ™æç¤ºâ€œç¡®è®¤åˆ é™¤ï¼Ÿâ€ï¼Œåˆ é™¤åä»å·¦ä¾§ç§»é™¤è¯¥æ–°é—»ï¼Œæ–°å»ºæ–°é—»åˆ™æ˜¯æç¤ºæˆåŠŸæ–°åŠ æ–°é—»ï¼Œå¹¶åœ¨å·¦ä¾§åˆ—è¡¨æ·»åŠ æ–°å†…å®¹ã€‚</p>
<figure>
<img data-src="https://img.imgdb.cn/item/600120d83ffa7d37b32962ff.jpg"
alt="edit" />
<figcaption aria-hidden="true">edit</figcaption>
</figure>
<p>ä¸ºé˜²æ­¢æœªç™»å½•ç”¨æˆ·ï¼Œæˆ–ç™»å½•ç”¨æˆ·ç¼–è¾‘ä»–äººçš„æ–°é—»ï¼Œè¿™é‡Œè®¾ç½®äº†ä¸€ä¸ªç‰¹æ®Šçš„aæ ‡ç­¾ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">toEdit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myForm = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;form&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="property">method</span> = <span class="string">&quot;post&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="property">target</span> = <span class="string">&quot;_blank&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="property">action</span> = <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/toEdit&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myInput = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        myInput.<span class="title function_">setAttribute</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;uid&quot;</span>); <span class="comment">// ä¸ºinputå¯¹è±¡è®¾ç½®name</span></span></span><br><span class="line"><span class="language-javascript">        myInput.<span class="title function_">setAttribute</span>(<span class="string">&quot;value&quot;</span>, uid); <span class="comment">// ä¸ºinputå¯¹è±¡è®¾ç½®value</span></span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="title function_">appendChild</span>(myInput);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(myForm);</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(myForm); <span class="comment">// æäº¤åç§»é™¤åˆ›å»ºçš„form</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„aæ ‡ç­¾å°†getè¯·æ±‚å˜ä¸ºpostè¯·æ±‚ï¼Œæ›´åŠ å®‰å…¨ä¸€äº›ã€‚</p>
<p>å‰ç«¯å®Œæ•´ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>edit<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/layUi/css/layui.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/ckEditor/ckeditor.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable constant_">CKEDITOR</span>.<span class="title function_">replace</span>(<span class="string">&#x27;content&#x27;</span>, &#123;<span class="attr">height</span>: <span class="string">&quot;400px&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#submit&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> ops = $(<span class="string">&quot;#ops&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (ops !== <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">opNews</span>(<span class="string">&quot;updateNews&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">opNews</span>(<span class="string">&quot;addNews&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">delNews</span>(<span class="params">nid</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="title function_">confirm</span>(<span class="string">&quot;ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&quot;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/deleteNews&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: &#123;<span class="attr">nid</span>: nid&#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;æ–°é—»åˆ é™¤æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#div_&quot;</span> + nid).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;æ–°é—»åˆ é™¤å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">upNews</span>(<span class="params">nid</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/toUpdate&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;<span class="attr">nid</span>: nid&#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#ops&quot;</span>).<span class="title function_">val</span>(data.<span class="property">newsId</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> select = <span class="string">&#x27;dd[lay-value=&#x27;</span> + data.<span class="property">categoryId</span> + <span class="string">&#x27;]&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œå®ç°è‡ªåŠ¨é€‰æ‹©</span></span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#categoryId&quot;</span>).<span class="title function_">siblings</span>(<span class="string">&quot;div.layui-form-select&quot;</span>).<span class="title function_">find</span>(<span class="string">&#x27;dl&#x27;</span>).<span class="title function_">find</span>(select).<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#title&quot;</span>).<span class="title function_">val</span>(data.<span class="property">title</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable constant_">CKEDITOR</span>.<span class="property">instances</span>.<span class="property">content</span>.<span class="title function_">setData</span>(data.<span class="property">content</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&quot;å‡ºé”™ï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">opNews</span>(<span class="params">op</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ops = $(<span class="string">&quot;#ops&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> uid = <span class="string">&#x27;$&#123;sessionScope.userS.userId&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> cid = $(<span class="string">&quot;#categoryId&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> title = $(<span class="string">&quot;#title&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> content = <span class="variable constant_">CKEDITOR</span>.<span class="property">instances</span>.<span class="property">content</span>.<span class="title function_">getData</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (title !== <span class="string">&quot;&quot;</span> &amp;&amp; content !== <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (ops !== <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> dataparam = &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">newsId</span>: ops,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">userId</span>: uid,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">categoryId</span>: cid,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">title</span>: title,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">content</span>: content,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">state</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> dataparam = &#123;<span class="attr">userId</span>: uid, <span class="attr">categoryId</span>: cid, <span class="attr">title</span>: title, <span class="attr">content</span>: content, <span class="attr">state</span>: <span class="number">0</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/&quot;</span> + op,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: dataparam,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;å‘å¸ƒæˆåŠŸ,å®¡æ ¸é€šè¿‡åç‚¹å‡»å·¦ä¾§æ ‡é¢˜æŸ¥çœ‹æ•ˆæœï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> s = <span class="string">&#x27;&lt;div class=&quot;layui-card&quot; id=&quot;div_&#x27;</span> + data.<span class="property">newsId</span> + <span class="string">&#x27;&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;div class=&quot;layui-card-header&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;h3 style=&quot;max-width: 95%;overflow:hidden;white-space:nowrap; text-overflow:ellipsis&quot; title=&quot;&#x27;</span> + title + <span class="string">&#x27;&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;a target=&quot;_blank&quot; href=&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsById?nid=&#x27;</span> + data.<span class="property">newsId</span> + <span class="string">&#x27;&quot;&gt;&#x27;</span> + title + <span class="string">&#x27;&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;/h3&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;div class=&quot;layui-card-body&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;img src=&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/inreview.png&quot; class=&quot;layui-nav-img&quot;/&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;upNews(&#x27;</span> + data.<span class="property">newsId</span> + <span class="string">&#x27;)&quot;&gt;&lt;span style=&quot;color: blue&quot;&gt;ä¿®æ”¹&lt;/span&gt;&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;delNews(&#x27;</span> + data.<span class="property">newsId</span> + <span class="string">&#x27;)&quot;&gt;&lt;span style=&quot;color: red&quot;&gt;åˆ é™¤&lt;/span&gt;&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (ops !== <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#div_&quot;</span> + nid).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#newNews&quot;</span>).<span class="title function_">prepend</span>(s);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;å‘å¸ƒå¤±è´¥ï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;æ ‡é¢˜æˆ–å†…å®¹ä¸èƒ½ä¸ºç©ºï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#ops&quot;</span>).<span class="title function_">val</span>(<span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> select = <span class="string">&#x27;dd[lay-value=&#x27;</span> + <span class="number">1</span> + <span class="string">&#x27;]&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œå®ç°è‡ªåŠ¨é€‰æ‹©</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#categoryId&quot;</span>).<span class="title function_">siblings</span>(<span class="string">&quot;div.layui-form-select&quot;</span>).<span class="title function_">find</span>(<span class="string">&#x27;dl&#x27;</span>).<span class="title function_">find</span>(select).<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#title&quot;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable constant_">CKEDITOR</span>.<span class="property">instances</span>.<span class="property">content</span>.<span class="title function_">setData</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs3 layui-bg-gray&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%;padding: 5px;overflow-y:auto;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-demo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #00FFFF; text-align: center;height: 50px&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/User/toLogin&quot;</span> <span class="attr">style</span>=<span class="string">&quot;line-height: 50px&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/main.png&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color:bisque; text-align: center;height: 50px&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;add()&quot;</span> <span class="attr">style</span>=<span class="string">&quot;line-height: 50px&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/addn.png&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span>æ–°å»º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;newNews&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;ownNews&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card&quot;</span> <span class="attr">id</span>=<span class="string">&quot;div_$&#123;news.newsId&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-header&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 95%;overflow:hidden;white-space:nowrap; text-overflow:ellipsis&quot;</span></span></span><br><span class="line"><span class="tag">                                    <span class="attr">title</span>=<span class="string">&quot;$&#123;news.title&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span></span></span><br><span class="line"><span class="tag">                                       <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsById?nid=$&#123;news.newsId&#125;&quot;</span>&gt;</span>$&#123;news.title&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;news.state==0&#125;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/inreview.png&quot;</span></span></span><br><span class="line"><span class="tag">                                             <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;news.state==1&#125;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/accept.png&quot;</span></span></span><br><span class="line"><span class="tag">                                             <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/reject.png&quot;</span></span></span><br><span class="line"><span class="tag">                                             <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;upNews($&#123;news.newsId&#125;)&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">                                            <span class="attr">style</span>=<span class="string">&quot;color: blue&quot;</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;delNews($&#123;news.newsId&#125;)&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">                                            <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs9&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-body&quot;</span> <span class="attr">pad15</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span></span></span><br><span class="line"><span class="tag">                                       <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥æ ‡é¢˜&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px&quot;</span></span></span><br><span class="line"><span class="tag">                                       <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-mid layui-word-aux&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>é€‰æ‹©æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;categoryId&quot;</span> <span class="attr">name</span>=<span class="string">&quot;categoryId&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;categorys&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;category&quot;</span>&gt;</span>--%&gt;</span><br><span class="line">                                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;category.category_id&#125;&quot;</span>&gt;</span>$&#123;category.category_name&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-unselect layui-form-select&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-select-title&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·é€‰æ‹©&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">readonly</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                                               <span class="attr">class</span>=<span class="string">&quot;layui-input layui-unselect&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-edge&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;layui-anim layui-anim-upbit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;categorys&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;category&quot;</span>&gt;</span>--%&gt;</span><br><span class="line">                                            <span class="tag">&lt;<span class="name">dd</span> <span class="attr">lay-value</span>=<span class="string">&quot;$&#123;category.category_id&#125;&quot;</span>&gt;</span>$&#123;category.category_name&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item layui-form-text&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-primary&quot;</span>&gt;</span>é‡æ–°å¡«å†™<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ops&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/layUi/layui.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;form&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> form = layui.<span class="property">form</span>; <span class="comment">//åªæœ‰æ‰§è¡Œäº†è¿™ä¸€æ­¥ï¼Œéƒ¨åˆ†è¡¨å•å…ƒç´ æ‰ä¼šè‡ªåŠ¨ä¿®é¥°æˆåŠŸ</span></span></span><br><span class="line"><span class="language-javascript">        form.<span class="title function_">render</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Controllerä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;toEdit&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">toEdit</span><span class="params">(<span class="meta">@RequestParam(&quot;uid&quot;)</span> <span class="type">long</span> uid)</span> &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;front/edit&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;categorys&quot;</span>, frontService.QueryAllCategorys());</span><br><span class="line">        mv.addObject(<span class="string">&quot;ownNews&quot;</span>, frontService.QueryNewsByUId(uid));</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;addNews&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addNews</span><span class="params">(News news)</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> frontService.AddNews(news);</span><br><span class="line">        <span class="comment">//æ·»åŠ æ–°é—»æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">if</span> (result &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//è·å–æ–°é—»ID</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">LastId</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            LastId = Integer.parseInt(news.getNewsId().toString());</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">            PicNews picNews;</span><br><span class="line">            <span class="keyword">for</span> (String pic_url : ImageUploadUtils.GetHtmlImageSrcList(news.getContent())) &#123;</span><br><span class="line">                <span class="type">Pics</span> <span class="variable">pic</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Pics</span>();</span><br><span class="line">                pic.setNewsId((<span class="type">long</span>) LastId);</span><br><span class="line">                pic.setPicUrl(pic_url);</span><br><span class="line">                <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                    picNews = <span class="keyword">new</span> <span class="title class_">PicNews</span>();</span><br><span class="line">                    picNews.setNewsId((<span class="type">long</span>) LastId);</span><br><span class="line">                    picNews.setCategoryId(news.getCategoryId());</span><br><span class="line">                    picNews.setTitle(news.getTitle());</span><br><span class="line">                    picNews.setPicUrl(pic_url);</span><br><span class="line">                    picNewsMapper.insertSelective(picNews);</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                frontService.AddPic(pic);</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;newsId&quot;</span>, news.getNewsId());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–°é—»å¢åŠ å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        JSON.DEFFAULT_DATE_FORMAT = <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map, SerializerFeature.WriteDateUseDateFormat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;toUpdate&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toUpdate</span><span class="params">(<span class="meta">@RequestParam(&quot;nid&quot;)</span> <span class="type">long</span> nid)</span> &#123;</span><br><span class="line">        <span class="type">News</span> <span class="variable">news</span> <span class="operator">=</span> frontService.QueryNewsById(nid);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (news != <span class="literal">null</span>) &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;newsId&quot;</span>, nid);</span><br><span class="line">            map.put(<span class="string">&quot;categoryId&quot;</span>, news.getCategoryId());</span><br><span class="line">            map.put(<span class="string">&quot;title&quot;</span>, news.getTitle());</span><br><span class="line">            map.put(<span class="string">&quot;content&quot;</span>, news.getContent());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;updateNews&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateNews</span><span class="params">(News news)</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> frontService.UpdateNews(news);</span><br><span class="line">        <span class="keyword">if</span> (result &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;newsId&quot;</span>, news.getNewsId());</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–°é—»ä¿®æ”¹æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–°é—»ä¿®æ”¹å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;deleteNews&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteNews</span><span class="params">(<span class="meta">@RequestParam(&quot;nid&quot;)</span> <span class="type">long</span> nid)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> frontService.DeleteNews(nid);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        <span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–°é—»åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–°é—»åˆ é™¤å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä¸ªäººè§‰å¾—è¿™éƒ¨åˆ†è¿˜æ˜¯æŒºæœ‰è¶£çš„ã€‚</p>
<h2 id="è¯„è®º">è¯„è®º</h2>
<p>è¿™éƒ¨åˆ†æ˜¯æœ€å¼€å§‹é‡åˆ°çš„éº»çƒ¦ï¼Œæ­£æ˜¯å› ä¸ºè¿™ä¸ªæ‰åšå®šäº†æˆ‘è¦ä½¿ç”¨AJAXçš„å†³å¿ƒã€‚</p>
<p>éœ€æ±‚å°±æ˜¯ç®€å•çš„è¯„è®ºã€‚</p>
<figure>
<img data-src="https://img.imgdb.cn/item/600128333ffa7d37b32c6454.jpg"
alt="è¯„è®º" />
<figcaption aria-hidden="true">è¯„è®º</figcaption>
</figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; prefix=&quot;fmt&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>show<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/layUi/css/layui.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> css = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">marginLeft</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">marginRight</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">width</span>: <span class="string">&#x27;70%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">height</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#show&quot;</span>).<span class="title function_">css</span>(css);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#sendTo&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//è·å–å€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> uid = <span class="string">&#x27;$&#123;sessionScope.userS.userId&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> uname = <span class="string">&#x27;$&#123;sessionScope.userS.userName&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> nid = <span class="string">&#x27;$&#123;news.newsId&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> content = $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> uIcon = <span class="string">&#x27;$&#123;sessionScope.userS.userIcon&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (content !== <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/addComment&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: &#123;<span class="attr">user_id</span>: uid, <span class="attr">news_id</span>: nid, <span class="attr">content</span>: content&#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºæˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> iconSrc=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/userIcon.png&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">if</span>(<span class="string">&quot;&quot;</span> !== uIcon)&#123;</span></span><br><span class="line"><span class="language-javascript">                                    iconSrc=uIcon;</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> s = <span class="string">&#x27;&lt;div class=&quot;layui-card&quot; id=&quot;div_&#x27;</span> + data.<span class="property">cid</span> + <span class="string">&#x27;&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;div class=&quot;layui-card-body&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;div align=&quot;left&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/queryUserById?uid=&#x27;</span>+uid+<span class="string">&#x27;&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;img class=&quot;layui-nav-img&quot; src=&quot;&#x27;</span> + iconSrc + <span class="string">&#x27;&quot;/&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    uname + <span class="string">&#x27;&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27; &lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    content +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;delComment(&#x27;</span> + data.<span class="property">cid</span> + <span class="string">&#x27;)&quot;&gt;åˆ é™¤&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">getCurrentDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()) +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&quot;#newComment&quot;</span>).<span class="title function_">prepend</span>(s);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºå¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºä¸èƒ½ä¸ºç©ºï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">delComment</span>(<span class="params">cid</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="title function_">confirm</span>(<span class="string">&quot;ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&quot;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/deleteComment&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: &#123;<span class="attr">cid</span>: cid&#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#div_&quot;</span> + cid).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºåˆ é™¤å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">getCurrentDate</span>(<span class="params">date</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> y = date.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> m = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> d = date.<span class="title function_">getDate</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> h = date.<span class="title function_">getHours</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> min = date.<span class="title function_">getMinutes</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> s = date.<span class="title function_">getSeconds</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> str = y + <span class="string">&#x27;-&#x27;</span> + (m &lt; <span class="number">10</span> ? (<span class="string">&#x27;0&#x27;</span> + m) : m) + <span class="string">&#x27;-&#x27;</span> + (d &lt; <span class="number">10</span> ? (<span class="string">&#x27;0&#x27;</span> + d) : d) + <span class="string">&#x27;-&#x27;</span> + (h &lt; <span class="number">10</span> ? (<span class="string">&#x27;0&#x27;</span> + h) : h) + <span class="string">&#x27;:&#x27;</span> + (min &lt; <span class="number">10</span> ? (<span class="string">&#x27;0&#x27;</span> + min) : min) + <span class="string">&#x27;:&#x27;</span> + (s &lt; <span class="number">10</span> ? (<span class="string">&#x27;0&#x27;</span> + s) : s);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> str;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">more</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryCommentByNIdMore&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;<span class="attr">nid</span>: <span class="string">&#x27;$&#123;nid&#125;&#x27;</span>, <span class="attr">cPage</span>: $(<span class="string">&quot;#cp&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">each</span>(data.<span class="property">moreComments</span>, <span class="keyword">function</span> (<span class="params">index, value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (value.<span class="property">user_id</span> ===$&#123;sessionScope.<span class="property">userS</span>.<span class="property">userId</span>&#125;) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> z = <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;delComment(&#x27;</span> + value.<span class="property">comment_id</span> + <span class="string">&#x27;)&quot;&gt;åˆ é™¤&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> z = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> iconSrc=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/userIcon.png&quot;</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(<span class="string">&quot;user_icon&quot;</span> <span class="keyword">in</span> value)&#123;</span></span><br><span class="line"><span class="language-javascript">                            iconSrc=value.<span class="property">user_icon</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> s = <span class="string">&#x27;&lt;div class=&quot;layui-card&quot; id=&quot;div_&#x27;</span> + value.<span class="property">comment_id</span> + <span class="string">&#x27;&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;div class=&quot;layui-card-body&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;div align=&quot;left&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/queryUserById?uid=&#x27;</span> + value.<span class="property">user_id</span> + <span class="string">&#x27;&quot;&gt; &#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;img src=&quot;&#x27;</span>+iconSrc+<span class="string">&#x27;&quot; class=&quot;layui-nav-img&quot;/&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            value.<span class="property">user_name</span> + <span class="string">&#x27;&lt;/a&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27; &lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            value.<span class="property">content</span> +</span></span><br><span class="line"><span class="language-javascript">                            z +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            value.<span class="property">createTime</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#comments&quot;</span>).<span class="title function_">append</span>(s);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data.<span class="property">cPage</span> + <span class="number">1</span> &lt;$&#123;totalPage&#125;) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> x = <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;more()&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æ›´å¤š&amp;gt;&amp;gt;&lt;/a&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#more&quot;</span>).<span class="title function_">html</span>(x)</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> y = <span class="string">&#x27;&lt;p&gt;æ²¡æœ‰æ›´å¤šå†…å®¹äº†&lt;/p&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#more&quot;</span>).<span class="title function_">html</span>(y)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&quot;#cp&quot;</span>).<span class="title function_">val</span>(data.<span class="property">cPage</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">&quot;F2F2F2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 10px;margin-left: 15px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/User/toLogin&quot;</span> <span class="attr">style</span>=<span class="string">&quot;line-height: 50px&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/main.png&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;news==null||news.state!=1&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>è¯¥æ–‡ç« å®¡æ ¸å°šæœªé€šè¿‡ï¼<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;newsbody&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-header&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>$&#123;requestScope.news.title&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsByCId?cid=$&#123;news.categoryId&#125;&quot;</span>&gt;</span>å…¶ä»–æ–°é—»<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">fmt:formatDate</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;news.createTime&#125;&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span></span><br><span class="line">                            $&#123;requestScope.news.content&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">br</span>/&gt;</span>ä½œè€…ï¼š<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryUserById?uid=$&#123;news.userId&#125;&quot;</span>&gt;</span>ç‚¹è¿™<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                è¯„è®ºåŒºï¼š<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;sessionScope.userS!=null&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å†…å®¹&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-textarea&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-primary&quot;</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sendTo&quot;</span>&gt;</span>è¯„è®º<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/User/login&quot;</span>&gt;</span>ç™»é™†åå¯è¯„è®º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;newComment&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;comments&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;comments&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;comment&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card&quot;</span> <span class="attr">id</span>=<span class="string">&quot;div_$&#123;comment.comment_id&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-card-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryUserById?uid=$&#123;comment.user_id&#125;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;comment.user_icon==null&#125;&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/userIcon.png&quot;</span></span></span><br><span class="line"><span class="tag">                                                     <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;comment.user_icon&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-img&quot;</span>/&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                                            $&#123;comment.user_name&#125;</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    $&#123;comment.content&#125;</span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;sessionScope.userS.userId==comment.user_id&#125;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;delComment($&#123;comment.comment_id&#125;)&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                                        $&#123;comment.createTime&#125;</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;more&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;cPage+1&lt;totalPage&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;more()&quot;</span>&gt;</span>ç‚¹å‡»æŸ¥çœ‹æ›´å¤š<span class="symbol">&amp;gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ²¡æœ‰æ›´å¤šå†…å®¹äº†<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;cp&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;cPage&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Contrllerä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;queryCommentByNIdMore&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">queryCommentByNIdMore</span><span class="params">(<span class="meta">@RequestParam(&quot;nid&quot;)</span> <span class="type">long</span> nid, <span class="meta">@RequestParam(value = &quot;cPage&quot;, required = false, defaultValue = &quot;0&quot;)</span> <span class="type">int</span> cPage)</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        List&lt;Comment&gt; comments = frontService.QueryCommentsByNewsId(nid, (cPage + <span class="number">1</span>) * <span class="number">3</span>);</span><br><span class="line">        map.put(<span class="string">&quot;moreComments&quot;</span>, comments);</span><br><span class="line">        map.put(<span class="string">&quot;cPage&quot;</span>, cPage + <span class="number">1</span>);</span><br><span class="line">        JSON.DEFFAULT_DATE_FORMAT = <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map, SerializerFeature.WriteDateUseDateFormat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;addComment&quot;, produces = &quot;text/json;charset=UTF-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addComment</span><span class="params">(Comment comment)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> frontService.AddComment(comment);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        <span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">LastId</span> <span class="operator">=</span> comment.getComment_id();</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;cid&quot;</span>, LastId);</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯„è®ºæˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯„è®ºå¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;deleteComment&quot;, produces = &quot;text/json;charset=UTF-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteComment</span><span class="params">(<span class="meta">@RequestParam(&quot;cid&quot;)</span> <span class="type">long</span> cid)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> frontService.DeleteComment(cid);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        <span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯„è®ºåˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯„è®ºåˆ é™¤å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(map);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä¸»è¦æ˜¯ä¸‰éƒ¨åˆ†çš„AJAXçš„ä½¿ç”¨ï¼Œå…¶å®è¿˜æœ‰ä¸€äº›ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·ä¿¡æ¯ä¿®æ”¹ã€å¯†ç ä¿®æ”¹ã€åé¦ˆã€ç”¨æˆ·å¤´åƒä¸Šä¼ ï¼Œå¦‚æœåŒ…æ‹¬æ•´ä¸ªé¡¹ç›®çš„è¯æ›´å¤šäº†ã€‚ä¸Šé¢ä¸‰ä¸ªå·²ç»æ¯”è¾ƒæœ‰ä»£è¡¨æ€§äº†ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>AJAXçš„ä½¿ç”¨èƒ½è®©ç”¨æˆ·å¾—åˆ°ä¸é”™çš„ä½“éªŒï¼Œä¸ç”¨åŠ¨ä¸åŠ¨å°±åˆ·æ–°æ•´ä¸ªç•Œé¢ï¼Œæå¾—äººå¾ˆçƒ¦äº†ã€‚JSONåªæ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œç®€å•è¯´å°±æ˜¯é”®å€¼å¯¹ï¼ˆkey-valueï¼‰çš„é›†åˆï¼Œå¯åµŒå¥—ã€‚åœ¨ä½¿ç”¨AJAXæ—¶ï¼Œåç«¯æ•°æ®é€šå¸¸éƒ½æ˜¯ä»¥JSONè¿”å›åˆ°å‰ç«¯çš„ã€‚è¿™æ—¶åªéœ€è¦å¤„ç†JSONæ•°æ®å³å¯ï¼Œå³å®Œæˆäº†AJAXçš„ä½¿ç”¨ã€‚</p>
]]></content>
      <tags>
        <tag>JavaWeb</tag>
      </tags>
  </entry>
  <entry>
    <title>Apifoxç®€å•ä½¿ç”¨</title>
    <url>/article/d54257c1.html</url>
    <content><![CDATA[<h1 id="apifox">Apifox</h1>
<p>æœ€è¿‘ä¸€ç›´åœ¨ä»¥<a href="https://gitee.com/log4j/pig">pig</a>ã€<a
href="https://gitee.com/y_project/RuoYi-Cloud">RuiYi-Cloud</a>åšä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®ï¼Œéå¸¸éœ€è¦ä¸€ä»½æ¥å£æ–‡æ¡£å·¥å…·ï¼Œ<code>Swagger</code>è¿™ç§ä¾µå…¥ä»£ç å¼çš„æˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œä¹‹å‰ä¹Ÿæ˜¯æœ‰ç”¨è¿‡<code>YApi</code>ï¼Œä¸ç”¨æ”¹ä»£ç ï¼Œåˆ©ç”¨ä¸<code>IDEA</code>çš„æ’ä»¶ç»“åˆï¼Œå¾ˆè½»æ¾å°±ç”Ÿæˆç›¸å…³çš„æ¥å£æ–‡æ¡£ï¼Œéå¸¸å¥½ç”¨ï¼</p>
<p>ç›´åˆ°å‘ç°<a
href="https://www.apifox.com/">apifox</a>ï¼Œå‘ç°è¿™ä¸ªå…¨èƒ½é€‰æ‰‹ï¼Œå¦‚å®˜æ–¹æ‰€è¯´ï¼š</p>
<blockquote>
<p>æ›´å…ˆè¿›çš„ API è®¾è®¡/å¼€å‘/æµ‹è¯•å·¥å…·</p>
<p>Apifox = Postman + Swagger + Mock + JMeter</p>
</blockquote>
<p>å¦‚æœèƒ½ç†Ÿç»ƒä½¿ç”¨å®ƒé‚£ç”Ÿäº§åŠ›å¿…ç„¶æå¤§æå‡ï¼Œæƒ³ç³»ç»Ÿå­¦ä¹ çš„çœ‹å®˜æ–¹æ–‡æ¡£<a
href="https://www.apifox.com/help/">https://www.apifox.com/help/</a>ã€‚</p>
<p>å¦å¤–ä¸€æï¼Œæˆ‘èƒ½å‘ç°å®ƒä¹Ÿæ˜¯å› ä¸ºè¿™ç¯‡æ–‡ç« ï¼š<a
href="https://mp.weixin.qq.com/s/fT84AkFPZSINL9VUvAmNJw">https://mp.weixin.qq.com/s/fT84AkFPZSINL9VUvAmNJw</a></p>
<p>ä¸‹é¢å°±å¼€å§‹æˆ‘çš„ä½¿ç”¨å§ï¼</p>
<span id="more"></span>
<h1 id="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡</h1>
<p>ä¸‹è½½ã€æ³¨å†Œã€å»ºé¡¹ç›®ç­‰ç­‰è¿™äº›ï¼Œæˆ‘ä¸å¤šæäº†ï¼Œå¯ä»¥çœ‹å®˜ç½‘ä¹Ÿå¯ä»¥çœ‹ä¸Šé¢çš„é‚£ç¯‡æ–‡ç« ã€‚</p>
<h2 id="é…ç½®å®Œæˆ">é…ç½®å®Œæˆ</h2>
<p>éƒ½é…ç½®å®Œæˆåï¼Œå°±å¯é€šè¿‡<code>IDEA</code>æ’ä»¶ç›´æ¥ç”Ÿæˆæ–‡æ¡£åˆ°<code>Apifox</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4i1f1qhhmo80.webp"
alt="Apifoxæ’ä»¶" />
<figcaption aria-hidden="true">Apifoxæ’ä»¶</figcaption>
</figure>
<p>åœ¨ä½ çš„<code>Controller</code>ç±»ä¸­å³é”®ï¼Œç‚¹å‡»<code>Upload to Apifox</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.10bwwfc0cxcw.webp"
alt="æ›´æ–°åˆ°Apifox" />
<figcaption aria-hidden="true">æ›´æ–°åˆ°Apifox</figcaption>
</figure>
<h1 id="æ¥å£ç®¡ç†">æ¥å£ç®¡ç†</h1>
<p>åœ¨é¡¹ç›®ä¸­å³ä¸Šè§’æ›´æ–°æ¥å£æ–‡æ¡£ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1uqcacf4kn6o.webp"
alt="æ›´æ–°æ–‡æ¡£" />
<figcaption aria-hidden="true">æ›´æ–°æ–‡æ¡£</figcaption>
</figure>
<p>è¦çŸ¥é“åˆå§‹ç”Ÿæˆçš„åªæœ‰æ¥å£æ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„<code>GET</code>ã€<code>POST</code>è¿™äº›ï¼Œä¸‹ä¸€çº§æ˜¯æˆ‘ç¼–å†™çš„ç”¨ä¾‹ã€‚</p>
<h2 id="ç¯å¢ƒä¸å‚æ•°ç®¡ç†">ç¯å¢ƒä¸å‚æ•°ç®¡ç†</h2>
<p>å¦å¤–æ³¨æ„å³ä¸Šè¾¹æœ‰ç¯å¢ƒè®¾ç½®è¿™é‡Œå¯ä»¥è®¾ç½®å„ç§ç¯å¢ƒä¿¡æ¯å’Œç›¸å…³å‚æ•°ï¼Œåé¢æˆ‘ä¼šç”¨åˆ°ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6ciomkzyz980.webp"
alt="ç¯å¢ƒä¸å‚æ•°ç®¡ç†" />
<figcaption aria-hidden="true">ç¯å¢ƒä¸å‚æ•°ç®¡ç†</figcaption>
</figure>
<h2 id="æ¥å£æ–‡æ¡£">æ¥å£æ–‡æ¡£</h2>
<h3 id="æ–‡æ¡£">æ–‡æ¡£</h3>
<p>ç‚¹å¼€æ¥å£ï¼Œé¦–å…ˆæ˜¯æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå»ç¼–å†™æ¥å£æ–‡æ¡£</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.79y0gfxy8kg0.webp"
alt="æ¥å£æ–‡æ¡£" />
<figcaption aria-hidden="true">æ¥å£æ–‡æ¡£</figcaption>
</figure>
<h3 id="è¿è¡Œ">è¿è¡Œ</h3>
<p>å°±æ˜¯<code>postman</code>ï¼Œæˆ‘ä»¬åœ¨æ­¤å‘é€è¯·æ±‚ï¼Œæ‰€æœ‰çš„è¯·æ±‚å‚æ•°æˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡<code>Mock</code>æ¥ç”Ÿæˆï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.5gy0k94bqgw0.webp"
alt="è¿è¡Œ" />
<figcaption aria-hidden="true">è¿è¡Œ</figcaption>
</figure>
<p>åŠ¨æ€å€¼éå¸¸ä¸°å¯Œï¼Œå¾ˆå¤šåœºæ™¯éƒ½é€‚ç”¨ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.5ujhabuxn680.webp"
alt="åŠ¨æ€å€¼" />
<figcaption aria-hidden="true">åŠ¨æ€å€¼</figcaption>
</figure>
<h3 id="é«˜çº§mock">é«˜çº§Mock</h3>
<p>è¿™ä¸ªè¿˜æœªä½¿ç”¨è¿‡</p>
<h2 id="ç”¨ä¾‹">ç”¨ä¾‹</h2>
<p>ç”¨ä¾‹æ˜¯ç”±æ¥å£æ–‡æ¡£ç”Ÿæˆçš„ï¼Œä¹Ÿå°±æ˜¯å…·ä½“çš„è¯·æ±‚äº†ã€‚ç‚¹å¼€æ–‡æ¡£è¿è¡Œå°±å¯ä»¥ç‚¹å‡»ä¿å­˜ä¸ºç”¨ä¾‹äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸‰ä¸ªåŸºäºåˆ†é¡µæŸ¥è¯¢çš„ä¸‰ä¸ªç”¨ä¾‹ã€‚</p>
<h3 id="åˆ†é¡µæŸ¥è¯¢å…¨éƒ¨æ•°æ®">åˆ†é¡µæŸ¥è¯¢å…¨éƒ¨æ•°æ®</h3>
<p>è¿™é‡Œåˆ†é¡µè¯·æ±‚å…¥å‚éƒ½ä¸ºç©ºï¼Œå“åº”ä¼šæ˜¯å…¨éƒ¨æ•°æ®ï¼Œè¿™é‡Œé…ç½®äº†åç½®æ“ä½œï¼Œå–å‡º<code>$.data.total</code>èµ‹ç»™ç¯å¢ƒå˜é‡çš„<code>total</code>ï¼Œé‚£ä¹ˆåœ¨æ­¤ç¯å¢ƒï¼ˆå¼€å‘ï¼‰è¿™ä¸ª<code>total</code>å°±å¯ä»¥å¤ç”¨äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.64juwjqptrk0.webp"
alt="åˆ†é¡µæŸ¥è¯¢å…¨éƒ¨æ•°æ®" />
<figcaption aria-hidden="true">åˆ†é¡µæŸ¥è¯¢å…¨éƒ¨æ•°æ®</figcaption>
</figure>
<h3 id="åˆ†é¡µæŸ¥è¯¢æˆåŠŸ">åˆ†é¡µæŸ¥è¯¢æˆåŠŸ</h3>
<p>è¿™é‡Œè®¾ç½®äº†å‰ç½®æ“ä½œå¦‚ä¸‹ï¼Œå°±æ˜¯é€šè¿‡å‰é¢è®¾ç½®çš„<code>total</code>æ¥è®¡ç®—<code>size</code>å’Œ<code>current</code>ï¼Œå¹¶æŠŠå®ƒä»¬èµ‹ç»™å¯¹åº”çš„å˜é‡ä¸­ï¼Œæœ€åå…¥å‚æ—¶ä½¿ç”¨è¿™äº›å˜é‡ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> total = pm.<span class="property">variables</span>.<span class="title function_">get</span>(<span class="string">&quot;total&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> size = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (total) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">pm.<span class="property">variables</span>.<span class="title function_">set</span>(<span class="string">&quot;size&quot;</span>, size);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pages = total % size == <span class="number">0</span> ? total / size : <span class="title class_">Math</span>.<span class="title function_">ceil</span>(total / size);</span><br><span class="line"></span><br><span class="line">pm.<span class="property">variables</span>.<span class="title function_">set</span>(<span class="string">&quot;pages&quot;</span>, pages);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> current = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (pages) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">pm.<span class="property">variables</span>.<span class="title function_">set</span>(<span class="string">&quot;current&quot;</span>, current);</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4pn1s48qc3s0.webp"
alt="åˆ†é¡µæŸ¥è¯¢æˆåŠŸ" />
<figcaption aria-hidden="true">åˆ†é¡µæŸ¥è¯¢æˆåŠŸ</figcaption>
</figure>
<h3 id="æŸ¥è¯¢ä¸€æ¡è®°å½•">æŸ¥è¯¢ä¸€æ¡è®°å½•</h3>
<p>è¿˜æ˜¯åˆ†é¡µæŸ¥è¯¢ï¼ŒæŠŠ<code>size</code>è®¾ç½®ä¸º1ï¼Œ<code>current</code>è®¡ç®—ä¸€ä¸‹å°±å¥½ï¼Œå°±å¯ä»¥éšæœºæŸ¥è¯¢å‡ºä¸€æ¡è®°å½•äº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> total = pm.<span class="property">variables</span>.<span class="title function_">get</span>(<span class="string">&quot;total&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> current = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (total) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">pm.<span class="property">variables</span>.<span class="title function_">set</span>(<span class="string">&quot;current&quot;</span>, current);</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶è®¾ç½®åç½®æ“ä½œï¼Œé€šè¿‡è¿™ä¸€æ¡è®°å½•ï¼Œæ·»åŠ <code>id</code>ã€<code>name</code>æˆ–è€…å…¶ä»–å•æ¡è®°å½•çš„å±æ€§å€¼ï¼Œè¿™äº›å˜é‡åˆå¯ä»¥åœ¨æ¥ä¸‹æ¥çš„æ ¹æ®<code>id</code>ç”¨ä¾‹ä¸­ä½¿ç”¨ã€‚</p>
<p><code>$.data.records[0].id</code></p>
<p>ä¸Šé¢è¿™äº›ä¹Ÿå°±æ˜¯æŠ›ç –å¼•ç‰äº†ï¼Œå‘æŒ¥ä½ çš„æƒ³è±¡åŠ›å§ï¼</p>
<h2 id="æ•°æ®æ¨¡å‹">æ•°æ®æ¨¡å‹</h2>
<p>å°±å…ˆä¸è¯´äº†ï¼Œçœ‹å®˜ç½‘å§ã€‚</p>
<h1 id="è‡ªåŠ¨åŒ–æµ‹è¯•">è‡ªåŠ¨åŒ–æµ‹è¯•</h1>
<p>è¿™ä¸ªè¿˜æŒºæœ‰æ„æ€çš„ï¼Œèƒ½çœå»å¥½å¤šæ—¶é—´ã€‚</p>
<h2 id="æµ‹è¯•ç”¨ä¾‹">æµ‹è¯•ç”¨ä¾‹</h2>
<p>è¿™é‡Œçš„â€œæ ¹æ®idæŸ¥è¯¢â€æµ‹è¯•ç”¨ä¾‹ï¼Œå°±æ˜¯å‰é¢çš„ç”¨ä¾‹ç»„åˆï¼Œé€šè¿‡å˜é‡çš„ä¼ é€’ï¼Œè¿™ä¸ªç”¨ä¾‹è¿˜æ˜¯æœ‰ä»·å€¼çš„ã€‚åŒæ—¶å³è¾¹æœ‰çº¿ç¨‹å’Œå¾ªç¯å¯è®¾ç½®ï¼Œ<code>JMeter</code>å˜›ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4peaavvxzew0.webp"
alt="æµ‹è¯•ç”¨ä¾‹" />
<figcaption aria-hidden="true">æµ‹è¯•ç”¨ä¾‹</figcaption>
</figure>
<h2 id="æµ‹è¯•å¥—ä»¶">æµ‹è¯•å¥—ä»¶</h2>
<p>æµ‹è¯•å¥—ä»¶å‘¢åˆæ˜¯æµ‹è¯•ç”¨ä¾‹çš„é›†åˆï¼Œä¸å¤šè®²äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6a995nhl2rw0.webp"
alt="è¿è¡Œå¥—ä»¶" />
<figcaption aria-hidden="true">è¿è¡Œå¥—ä»¶</figcaption>
</figure>
<h2 id="æµ‹è¯•æŠ¥å‘Š">æµ‹è¯•æŠ¥å‘Š</h2>
<p>å°±æ˜¯æ‰€æœ‰è¿è¡Œè¿‡ç¨‹çš„æŠ¥å‘Šã€‚</p>
<h1 id="å°ç»“">å°ç»“</h1>
<p>ä»è‡ªåŠ¨åŒ–æµ‹è¯•æ¥è®²ï¼Œè¿™ç§å¥—å¨ƒå¼çš„ï¼Œä»æ¥å£æ–‡æ¡£åˆ°ç”¨ä¾‹åˆ°æµ‹è¯•ç”¨ä¾‹åˆ°æµ‹è¯•å¥—ä»¶ï¼Œéƒ½è¯´æ˜äº†æ¥å£çš„é‡è¦ï¼Œç¼–å†™æ¥å£å¤Ÿè§„èŒƒå°±èƒ½å‰©ä¸‹å¾ˆå¤šäº‹æƒ…ï¼Œåˆ©ç”¨ç”¨ä¾‹å†è®¾è®¡çš„å¥½ä¸€äº›ï¼Œé‚£ä¹ˆæ•ˆç‡å°±ç›´çº¿æå‡äº†ã€‚</p>
<p>ä»<code>Apifox</code>æ•´ä½“ä¸Šæ¥è®²çœŸçš„å¾ˆå¼ºå¾ˆå¼ºï¼Œç”¨ç€å¤ªèˆ’æœäº†ã€‚çœ‹æ¥æœªæ¥<code>postman</code>ä¸å¥½è¿‡å‘€ï¼</p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
        <tag>é¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title>ChatGPTå¯¹è¯01</title>
    <url>/article/1fc8f2ea.html</url>
    <content><![CDATA[<p>å¦‚é¢˜ï¼Œè®°å½•ä¸€ä¸‹æˆ‘ä¸ChatGPTçš„å¯¹è¯ã€‚</p>
<h1 id="qa1">Q&amp;A1</h1>
<blockquote>
<p>Q1:springboot å‘é€htmlé‚®ä»¶åŠ¨æ€ç”Ÿæˆtable</p>
</blockquote>
<span id="more"></span>
<blockquote>
<p>A1:</p>
<p>è¦å‘é€åŒ…å«åŠ¨æ€ç”Ÿæˆtableçš„HTMLé‚®ä»¶ï¼Œå¯ä»¥ä½¿ç”¨Spring
Bootæä¾›çš„JavaMailSenderå’ŒThymeleafæ¨¡æ¿å¼•æ“ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<ol type="1">
<li>æ·»åŠ ä¾èµ– åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlCopy code</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol type="1">
<li>åˆ›å»ºé‚®ä»¶æœåŠ¡ç±»
åˆ›å»ºä¸€ä¸ªé‚®ä»¶æœåŠ¡ç±»<code>MailService</code>ï¼Œæ³¨å…¥<code>JavaMailSender</code>å’Œ<code>TemplateEngine</code>ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MailService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JavaMailSender javaMailSender;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TemplateEngine templateEngine;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MailService</span><span class="params">(JavaMailSender javaMailSender, TemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.javaMailSender = javaMailSender;</span><br><span class="line">        <span class="built_in">this</span>.templateEngine = templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‘é€é‚®ä»¶æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEmail</span><span class="params">(String to, String subject, Map&lt;String, Object&gt; model)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">        <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> javaMailSender.createMimeMessage();</span><br><span class="line">        <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(message, MimeMessageHelper.MULTIPART_MODE_MIXED_RELATED, StandardCharsets.UTF_8.name());</span><br><span class="line">        <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">        context.setVariables(model);</span><br><span class="line">        <span class="type">String</span> <span class="variable">html</span> <span class="operator">=</span> templateEngine.process(<span class="string">&quot;email_template&quot;</span>, context);</span><br><span class="line">        helper.setTo(to);</span><br><span class="line">        helper.setText(html, <span class="literal">true</span>);</span><br><span class="line">        helper.setSubject(subject);</span><br><span class="line">        helper.setFrom(<span class="string">&quot;your-email-address&quot;</span>);</span><br><span class="line">        javaMailSender.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>templateEngine.process()</code>æ–¹æ³•å°†æ¨¡æ¿å’Œæ¨¡å‹æ•°æ®åˆå¹¶ç”ŸæˆHTMLé‚®ä»¶å†…å®¹ã€‚
3. åˆ›å»ºHTMLæ¨¡æ¿
åœ¨<code>resources/templates</code>ç›®å½•ä¸‹åˆ›å»ºåä¸º<code>email_template.html</code>çš„HTMLæ¨¡æ¿æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">htmlCopy code</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTMLé‚®ä»¶ç¤ºä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;title&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>åˆ—1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>åˆ—2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>åˆ—3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;item : $&#123;items&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.field1&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.field2&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.field3&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Thymeleafçš„è¡¨è¾¾å¼è¯­è¨€<code>$&#123;&#125;</code>ç»‘å®šæ¨¡å‹æ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>th:each</code>æŒ‡ä»¤éå†é›†åˆç”ŸæˆåŠ¨æ€è¡¨æ ¼ã€‚
4. è°ƒç”¨é‚®ä»¶æœåŠ¡å‘é€é‚®ä»¶
åœ¨éœ€è¦å‘é€é‚®ä»¶çš„åœ°æ–¹è°ƒç”¨é‚®ä»¶æœåŠ¡çš„<code>sendEmail()</code>æ–¹æ³•ï¼Œä¼ å…¥æ”¶ä»¶äººåœ°å€ã€é‚®ä»¶ä¸»é¢˜å’Œæ¨¡å‹æ•°æ®ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SomeService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MailService mailService;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SomeService</span><span class="params">(MailService mailService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mailService = mailService;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">        List&lt;Item&gt; items = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        items.add(<span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;value1-1&quot;</span>, <span class="string">&quot;value1-2&quot;</span>, <span class="string">&quot;value1-3&quot;</span>));</span><br><span class="line">        items.add(<span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;value2-1&quot;</span>, <span class="string">&quot;value2-2&quot;</span>, <span class="string">&quot;value2-3&quot;</span>));</span><br><span class="line">        Map&lt;String, Object&gt; model = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        model.put(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;åŠ¨æ€ç”Ÿæˆè¡¨æ ¼ç¤ºä¾‹&quot;</span>);</span><br><span class="line">        model.put(<span class="string">&quot;items&quot;</span>, items);</span><br><span class="line">        mailService.sendEmail(<span class="string">&quot;recipient@example.com&quot;</span>, <span class="string">&quot;HTMLé‚®ä»¶ç¤ºä¾‹&quot;</span>, model);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>Item</code>çš„ç®€å•Javaç±»ï¼Œç”¨äºå­˜å‚¨è¡¨æ ¼æ•°æ®ã€‚ç„¶åå°†è¡¨æ ¼æ•°æ®å°è£…åœ¨ä¸€ä¸ªåä¸º<code>model</code>çš„Mapå¯¹è±¡ä¸­ï¼Œä¼ é€’ç»™é‚®ä»¶æœåŠ¡çš„<code>sendEmail()</code>æ–¹æ³•ã€‚</p>
</blockquote>
<p>ç»™çš„æ­¥éª¤éå¸¸è¯¦ç»†ï¼Œå¾ˆæ£’çš„ã€‚</p>
<h1 id="qa2">Q&amp;A2</h1>
<blockquote>
<p>Q2:Javaä¸­æ ¹æ®å±æ€§åˆ†ç±»é›†åˆ</p>
</blockquote>
<blockquote>
<p>A2:</p>
<p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Stream
APIå¯¹é›†åˆè¿›è¡Œåˆ†ç±»ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„æ–¹å¼ï¼š</p>
<ol type="1">
<li>æ ¹æ®æŸä¸ªå±æ€§åˆ†ç±» å¦‚æœè¦æ ¹æ®æŸä¸ªå±æ€§æŠŠå¯¹è±¡é›†åˆåˆ†ç±»ï¼Œå¯ä»¥ä½¿ç”¨
<code>groupingBy()</code>
æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ä¸€ä¸ªå­—ç¬¦ä¸²é›†åˆä¸­æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œåˆ†ç±»ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;pear&quot;</span>);</span><br><span class="line">Map&lt;Integer, List&lt;String&gt;&gt; map = list.stream()</span><br><span class="line">    .collect(Collectors.groupingBy(String::length));</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>groupingBy()</code>
æ–¹æ³•æ ¹æ®æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œåˆ†ç±»ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª
<code>Map&lt;Integer, List&lt;String&gt;&gt;</code>
ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­keyä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œvalueä¸ºé•¿åº¦ç­‰äºkeyçš„å­—ç¬¦ä¸²é›†åˆã€‚ 2.
æ ¹æ®å¤šä¸ªå±æ€§åˆ†ç±» å¦‚æœè¦æ ¹æ®å¤šä¸ªå±æ€§æŠŠå¯¹è±¡é›†åˆåˆ†ç±»ï¼Œå¯ä»¥ä½¿ç”¨
<code>groupingBy()</code>
æ–¹æ³•çš„é‡è½½å½¢å¼ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ä¸€ä¸ªå¯¹è±¡é›†åˆä¸­æ¯ä¸ªå¯¹è±¡çš„ä¸¤ä¸ªå±æ€§è¿›è¡Œåˆ†ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line">List&lt;Item&gt; itemList = Arrays.asList(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;apple&quot;</span>, <span class="number">10</span>), <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;banana&quot;</span>, <span class="number">20</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;orange&quot;</span>, <span class="number">30</span>), <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;pear&quot;</span>, <span class="number">40</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;apple&quot;</span>, <span class="number">15</span>), <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;banana&quot;</span>, <span class="number">25</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;orange&quot;</span>, <span class="number">35</span>), <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;pear&quot;</span>, <span class="number">45</span>)</span><br><span class="line">);</span><br><span class="line">Map&lt;String, Map&lt;Integer, List&lt;Item&gt;&gt;&gt; map = itemList.stream()</span><br><span class="line">    .collect(Collectors.groupingBy(Item::getName, Collectors.groupingBy(Item::getPrice)));</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>groupingBy()</code>
æ–¹æ³•çš„é‡è½½å½¢å¼ï¼Œå…ˆæ ¹æ® <code>name</code>
å±æ€§è¿›è¡Œåˆ†ç±»ï¼Œå†åœ¨æ¯ä¸ªåˆ†ç±»ä¸­æ ¹æ® <code>price</code>
å±æ€§è¿›è¡Œåˆ†ç±»ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª
<code>Map&lt;String, Map&lt;Integer, List&lt;Item&gt;&gt;&gt;</code>
ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­ç¬¬ä¸€çº§keyä¸º <code>name</code> å±æ€§ï¼Œç¬¬äºŒçº§keyä¸º
<code>price</code> å±æ€§ï¼Œvalueä¸ºåˆ†ç±»ç»“æœã€‚ 3. æ ¹æ®å±æ€§åˆ†ç±»å¹¶ç»Ÿè®¡æ•°é‡
å¦‚æœè¦æ ¹æ®æŸä¸ªå±æ€§æŠŠå¯¹è±¡é›†åˆåˆ†ç±»ï¼Œå¹¶ç»Ÿè®¡æ¯ä¸ªåˆ†ç±»ä¸­å…ƒç´ çš„æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨
<code>groupingBy()</code>
æ–¹æ³•çš„é‡è½½å½¢å¼ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ä¸€ä¸ªå­—ç¬¦ä¸²é›†åˆä¸­æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œåˆ†ç±»ï¼Œå¹¶ç»Ÿè®¡æ¯ä¸ªé•¿åº¦å‡ºç°çš„æ¬¡æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;pear&quot;</span>);</span><br><span class="line">Map&lt;Integer, Long&gt; map = list.stream()</span><br><span class="line">    .collect(Collectors.groupingBy(String::length, Collectors.counting()));</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>groupingBy()</code>
æ–¹æ³•çš„é‡è½½å½¢å¼ï¼Œå…ˆæ ¹æ®æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œåˆ†ç±»ï¼Œå†ä½¿ç”¨
<code>counting()</code> æ–¹æ³•ç»Ÿè®¡æ¯ä¸ªé•¿åº¦å‡ºç°çš„æ¬¡æ•°ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª
<code>Map&lt;Integer, Long&gt;</code>
ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­keyä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œvalueä¸ºé•¿åº¦å‡ºç°çš„æ¬¡æ•°ã€‚
ä»¥ä¸Šæ˜¯å‡ ç§å¸¸è§çš„æ ¹æ®å±æ€§åˆ†ç±»é›†åˆçš„æ–¹å¼ï¼Œé€šè¿‡çµæ´»çš„ä½¿ç”¨Stream
APIï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å¯¹é›†åˆè¿›è¡Œå„ç§æ“ä½œã€‚</p>
</blockquote>
<p>é—®è¿™ä¸ªé—®é¢˜æˆ‘æœ€æƒ³è¦çš„ç­”æ¡ˆå°±æ˜¯ç”¨<code>stream</code>çš„è§£ç­”ï¼Œå¾ˆæ»¡æ„ã€‚å­¦åˆ°äº†ï¼</p>
<h1 id="qa3">Q&amp;A3</h1>
<blockquote>
<p>Q3:åˆ¤æ–­æ˜¯å¦æ˜¯é‚®ç®±æ ¼å¼</p>
</blockquote>
<blockquote>
<p>A3:</p>
<p>åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯åˆæ³•çš„é‚®ç®±æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ¤æ–­é‚®ç®±æ ¼å¼çš„Javaä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isEmail</span><span class="params">(String str)</span> &#123;</span><br><span class="line"> <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\w+@\\w+\\.[a-z]+(\\.[a-z]+)?&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span> str.matches(regex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Javaä¸­çš„matchesæ–¹æ³•å’Œæ­£åˆ™è¡¨è¾¾å¼æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆé‚®ç®±æ ¼å¼ã€‚å…¶ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>+ï¼šè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼›</li>
<li>@ï¼šè¡¨ç¤ºåŒ¹é…ä¸€ä¸ª at ç¬¦å·ï¼›</li>
<li>+ï¼šè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼›</li>
<li>.ï¼šè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªç‚¹å·ï¼Œéœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦å·ï¼›</li>
<li>[a-z]+ï¼šè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå°å†™å­—æ¯ï¼›</li>
<li>(.[a-z]+)?ï¼šè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªç‚¹å·å’Œä¸€ä¸ªæˆ–å¤šä¸ªå°å†™å­—æ¯ï¼Œè¿™ä¸ªéƒ¨åˆ†æ˜¯å¯é€‰çš„ã€‚
è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼èƒ½å¤ŸåŒ¹é…å¦‚ä¸‹çš„é‚®ç®±æ ¼å¼ï¼š</li>
<li><a href="mailto:test@example.com">test@example.com</a></li>
<li><a href="mailto:test123@example.com">test123@example.com</a></li>
<li><a href="mailto:test.123@example.com">test.123@example.com</a></li>
<li><a href="mailto:test_123@example.com">test_123@example.com</a></li>
<li><a href="mailto:test@example.co.uk">test@example.co.uk</a>
å¦‚æœè¦åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶ååˆ¤æ–­è¿”å›çš„å¸ƒå°”å€¼å³å¯ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javaCopy code</span><br><span class="line"><span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">&quot;test@example.com&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(isEmail(email))&#123;</span><br><span class="line">    System.out.println(email + <span class="string">&quot;æ˜¯ä¸€ä¸ªåˆæ³•çš„é‚®ç®±åœ°å€&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(email + <span class="string">&quot;ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„é‚®ç®±åœ°å€&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸² <code>test@example.com</code>
ï¼Œç„¶ååˆ¤æ–­å®ƒæ˜¯å¦æ˜¯åˆæ³•çš„é‚®ç®±åœ°å€ï¼Œæœ€ç»ˆè¾“å‡ºç»“æœä¸º
<code>test@example.comæ˜¯ä¸€ä¸ªåˆæ³•çš„é‚®ç®±åœ°å€</code>ã€‚</p>
</blockquote>
<p>éšä¾¿è€ƒéªŒä¸€ä¸‹ï¼Œå¦‚æœèƒ½åŠ ä¸Šå…¶ä»–æ¡ä»¶å¦‚ï¼šç”¨ä»€ä¹ˆå·¥å…·ï¼Œå›ç­”è‚¯å®šä¼šæ›´ç²¾å½©ã€‚</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>ChatGPTå¯¹è¯02</title>
    <url>/article/86c1a350.html</url>
    <content><![CDATA[<h1 id="qa1">Q&amp;A1</h1>
<blockquote>
<p>Q1:æ¸…ç†2023å¹´ï¼Œé™¤äº†20230109ç›®å½•å¤–ï¼Œä¿ç•™è¿‘ä¸€ä¸ªæœˆçš„ç›®å½•shellè„šæœ¬</p>
</blockquote>
<blockquote>
<p>A1:ä»¥ä¸‹æ˜¯æ¸…ç†é™¤20230109ç›®å½•å¤–ï¼Œä¿ç•™è¿‘ä¸€ä¸ªæœˆçš„ç›®å½•çš„shellè„šæœ¬ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å¤åˆ¶ä»£ç #!/bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æ—©äº30å¤©çš„ç›®å½•</span></span><br><span class="line">find /path/to/directory/* -type d ! -name &quot;20230109&quot; -ctime +30 -exec rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>å°†<code>/path/to/directory/</code>æ›¿æ¢ä¸ºè¦æ¸…ç†çš„ç›®å½•çš„è·¯å¾„ã€‚è¿™ä¸ªè„šæœ¬ä½¿ç”¨<code>find</code>å‘½ä»¤æ¥æŸ¥æ‰¾é™¤äº†åä¸º<code>20230109</code>çš„ç›®å½•ä»¥å¤–çš„æ‰€æœ‰ç›®å½•ï¼Œå¹¶åˆ é™¤å®ƒä»¬ï¼ŒåŒæ—¶ä¿ç•™è¿‘30å¤©å†…è¢«ä¿®æ”¹è¿‡çš„ç›®å½•ã€‚</p>
</blockquote>
<p>å­¦åˆ°äº†å­¦åˆ°äº†ï¼Œè¿ç»´æ—¶å°±å¯ä»¥é€šè¿‡æ‰‹åŠ¨æˆ–å®šæ—¶ä»»åŠ¡æ¸…ç†ä¸€äº›ä¸éœ€è¦çš„æ–‡ä»¶äº†ã€‚</p>
<span id="more"></span>
<h1 id="qa2">Q&amp;A2</h1>
<blockquote>
<p>Q2:SpringBootç»Ÿä¸€æ¥å£æ‰“å°å…¥å‚å‡ºå‚æ—¥å¿—</p>
</blockquote>
<blockquote>
<p>A2:</p>
<p>åœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ AOP
å®ç°ç»Ÿä¸€æ‰“å°æ¥å£çš„å…¥å‚å’Œå‡ºå‚æ—¥å¿—ã€‚å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>åˆ›å»ºä¸€ä¸ªåˆ‡é¢ç±» LogAspectï¼Œç”¨æ¥å®šä¹‰åˆ‡ç‚¹ä»¥åŠéœ€è¦è®°å½•æ—¥å¿—çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(LogAspect.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰åˆ‡ç‚¹ï¼ŒåŒ¹é…æ‰€æœ‰controlleråŒ…ä¸‹é¢æ‰€æœ‰å…¬å…±æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(public * com.example.controller..*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">executionLog</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç¯ç»•é€šçŸ¥æ‹¦æˆªè¯·æ±‚å‚æ•°ä¸è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp åˆ‡ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;executionLog()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å½“å‰è¯·æ±‚å¯¹è±¡å¹¶è®°å½•è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">ServletRequestAttributes</span> <span class="variable">attributes</span> <span class="operator">=</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> attributes.getRequest();</span><br><span class="line">        logRequestParams(request, pjp.getSignature().getName(), pjp.getArgs());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œè¯·æ±‚å†…å®¹ï¼Œå¹¶å¤„ç†å“åº”ç»“æœ</span></span><br><span class="line">        Object result;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result = pjp.proceed();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;error occurred while processing the request: &#123;&#125;&quot;</span>, throwable.getMessage());</span><br><span class="line">            <span class="keyword">return</span> Response.fail(ResponseCode.ERROR.getCode(), <span class="string">&quot;ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨å€™å†è¯•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®°å½•å“åº”ç»“æœ</span></span><br><span class="line">        logResponseResult(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®°å½•è¯·æ±‚ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºè€—æ—¶ä¿¡æ¯</span></span><br><span class="line">        logger.info(<span class="string">&quot;\n&#123;&#125; è¯·æ±‚å¤„ç†ç»“æŸï¼Œè€—æ—¶ï¼š&#123;&#125;ms&quot;</span>, pjp.getSignature(), (endTime - startTime));</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®°å½•è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">logRequestParams</span><span class="params">(HttpServletRequest request, String methodName, Object[] args)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        sb.append(<span class="string">&quot;\nâ•”------------------------------------------&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;\nâ•‘ Method Name : &quot;</span>).append(methodName);</span><br><span class="line">        sb.append(<span class="string">&quot;\nâ•‘ URL         : &quot;</span>).append(request.getRequestURI());</span><br><span class="line">        sb.append(<span class="string">&quot;\nâ•‘ HTTP Method : &quot;</span>).append(request.getMethod());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Object arg : args) &#123;</span><br><span class="line">                <span class="comment">// å‚æ•°ä¸ºå¯¹è±¡æˆ–Mapç±»å‹æ—¶ï¼Œè½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²è®°å½•æ—¥å¿—</span></span><br><span class="line">                <span class="keyword">if</span> (arg != <span class="literal">null</span> &amp;&amp; (arg <span class="keyword">instanceof</span> JSONObject || arg.getClass().isAssignableFrom(Map.class))) &#123;</span><br><span class="line">                    sb.append(<span class="string">&quot;\nâ•‘ Request Parameters:&quot;</span>);</span><br><span class="line">                    sb.append(JSONObject.toJSONString(arg));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    sb.append(<span class="string">&quot;\nâ•‘ Request Parameters:&quot;</span>);</span><br><span class="line">                    sb.append(arg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sb.append(<span class="string">&quot;\nâ•š==========================================&quot;</span>);</span><br><span class="line">        logger.info(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®°å½•å“åº”ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">logResponseResult</span><span class="params">(Object result)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (result == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†å“åº”ç»“æœè½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ï¼Œå¹¶æ‰“å°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resultJsonString</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> JSONObject) &#123;</span><br><span class="line">            resultJsonString = JSONObject.toJSONString(result);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resultJsonString = JSONObject.toJSONString(Response.success(result));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">&quot;\nâ•”------------------------------------------&quot;</span> +</span><br><span class="line">                <span class="string">&quot;\nâ•‘ Response :&quot;</span> + resultJsonString +</span><br><span class="line">                <span class="string">&quot;\nâ•š==========================================&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ AOP è‡ªåŠ¨ä»£ç†ã€‚</li>
</ol>
<p>åœ¨ application.yml æˆ– application.properties æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">aop:</span></span><br><span class="line">    <span class="attr">auto:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>å¯åŠ¨é¡¹ç›®æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ã€‚</li>
</ol>
<p>ç°åœ¨ï¼Œåªè¦æ˜¯ä½äº com.example.controller åŒ…å†…çš„å…¬å…±æ–¹æ³•éƒ½ä¼šè¢«
LogAspect æ‹¦æˆªï¼Œå¹¶åœ¨æ§åˆ¶å°è¾“å‡ºè¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœçš„æ—¥å¿—ä¿¡æ¯ã€‚</p>
</blockquote>
<p>è¿™ä¸ªå›ç­”è¿˜æ˜¯æŒºå¥½çš„ï¼Œ<code>copy</code>ä¸‹ï¼Œä¿®æ”¹å°±èƒ½ç”¨äº†ï¼Œè€Œä¸”è¿™ä¸ªä»£ç æœ‰æ„æ€çš„ç‚¹æ˜¯<code>Response.fail(ResponseCode.ERROR.getCode(), "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨å€™å†è¯•");</code>ï¼Œè¿™ä¸ªè¿˜æ˜¯ç»Ÿä¸€å“åº”ç»“æœï¼Œæœ‰è¶£çš„å‹’ã€‚</p>
<h1 id="qa3">Q&amp;A3</h1>
<blockquote>
<p>Q3:springbootè‡ªå®šä¹‰æ‹¦æˆªå™¨</p>
</blockquote>
<blockquote>
<p>A3:åœ¨Spring Bootä¸­è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><p>åˆ›å»ºä¸€ä¸ªå®ç°<code>HandlerInterceptor</code>æ¥å£çš„æ‹¦æˆªå™¨ç±»ï¼š
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰è¿›è¡Œè°ƒç”¨ï¼ˆControlleræ–¹æ³•è°ƒç”¨ä¹‹å‰ï¼‰</span></span><br><span class="line">        <span class="comment">// è¿”å›trueï¼Œåˆ™ç»§ç»­æ‰§è¡Œåç»­çš„Interceptoræˆ–Controllerä¸šåŠ¡æ–¹æ³•ï¼›è¿”å›falseï¼Œåˆ™ä¸å†æ‰§è¡Œåç»­çš„Interceptoræˆ–Controllerä¸šåŠ¡æ–¹æ³•ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚å¤„ç†ä¹‹åè¿›è¡Œè°ƒç”¨ï¼Œä½†æ˜¯åœ¨è§†å›¾è¢«æ¸²æŸ“ä¹‹å‰ï¼ˆControlleræ–¹æ³•è°ƒç”¨ä¹‹åï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åœ¨æ•´ä¸ªè¯·æ±‚ç»“æŸä¹‹åè¢«è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨DispatcherServlet æ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾ä¹‹åæ‰§è¡Œï¼ˆä¸»è¦æ˜¯ç”¨äºè¿›è¡Œèµ„æºæ¸…ç†å·¥ä½œï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>æ³¨å†Œæ‹¦æˆªå™¨ æ–¹æ³•ä¸€ï¼šé‡å†™WebMvcConfigurerAdapterç±»
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfigurer</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyInterceptor myInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(myInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>æ–¹æ³•äºŒï¼šå®ç°WebMvcConfigureræ¥å£ <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   MyInterceptor <span class="title function_">getMyInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsInterceptor</span>();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">       registry.addInterceptor(getMyInterceptor()).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3.
è‹¥éœ€è¦åœ¨æ‹¦æˆªå™¨ä¸­ä½¿ç”¨Bean å¯ä»¥é€šè¿‡@Configuration,<span class="citation"
data-cites="Componentç­‰æ–¹å¼ç¡®ä¿è¯¥Beanè¢«Springç®¡ç†">@Componentç­‰æ–¹å¼ç¡®ä¿è¯¥Beanè¢«Springç®¡ç†</span>ï¼Œç„¶åé€šè¿‡@Autowiredæˆ–<span
class="citation"
data-cites="Resourceæ³¨è§£å¼•å…¥">@Resourceæ³¨è§£å¼•å…¥</span>ã€‚</p>
<p>æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ·»åŠ çš„æ‹¦æˆªå™¨å°†ä¼šåº”ç”¨åˆ°æ‰€æœ‰çš„è¯·æ±‚è·¯å¾„ä¸Šã€‚å¦‚æœæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡<code>addPathPatterns</code>ã€<code>excludePathPatterns</code>æ–¹æ³•æ¥è¿›è¡Œé…ç½®ã€‚</p>
<p>é™¤äº†ä»¥ä¸‹å®ç°HandlerInterceptoræ¥å£å¤–ï¼Œè¿˜æ”¯æŒä½¿ç”¨@ControllerAdvice+AOPå¯¹æ§åˆ¶å™¨æ–¹æ³•è¿›è¡Œæ‹¦æˆªå¤„ç†ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨Servlet
Filterå¯¹HTTPè¯·æ±‚ä¸å“åº”è¿›è¡Œæ‹¦æˆªå¤„ç†ã€‚</p>
</blockquote>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeréƒ¨ç½²Nacos</title>
    <url>/article/604142d6.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>https://nacos.io/zh-cn/docs/v2/quickstart/quick-start-docker.html</p>
<p>https://nacos.io/zh-cn/docs/v2/guide/admin/monitor-guide.html</p>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘ä»¥ä¼˜æƒ ä»·è´­ä¹°äº†äº‘æœåŠ¡å™¨ï¼Œæƒ³ç€ä¸èƒ½æµªè´¹èµ„æºï¼Œæ‰“ç®—åšç‚¹ä¸œè¥¿ï¼Œç©ä¸€ç©ã€‚å¯è¿˜æ˜¯é«˜ä¼°äº†æˆ‘çš„ç»æµå®åŠ›ï¼Œ<code>1C2G</code>æ˜¯çœŸçš„ä¸å¤Ÿç”¨ï¼Œæˆ‘åœ¨è¿™å°æœºå™¨ä¸Šè£…äº†<code>JDK</code>ã€<code>Maven</code>ã€<code>RocketMQã€Docker</code>ã€<code>Docker-compose</code>ï¼ŒåŒæ—¶åœ¨<code>Docker</code>ä¸‹è¿è¡Œäº†<code>MySQL</code>ã€<code>Redis</code>ã€<code>Nginx</code>ã€<code>RocketMQ-Dashboard</code>ï¼Œåˆ°è¿™é‡Œå…¶å®éƒ½è¿˜å¥½ï¼Œåœ¨ä¿®æ”¹å¯åŠ¨å‚æ•°çš„æƒ…å†µä¸‹å‹‰å¼ºå¤Ÿç”¨ã€‚</p>
<p>ä½†ä¸ºäº†å­¦ä¹ å¾®æœåŠ¡ï¼Œå‘<code>Spring Cloud Alibaba</code>é ï¼Œå‡†å¤‡æ­å»º<code>Nacos</code>ä½œä¸ºæ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒï¼Œè¿™ä¸‹é—®é¢˜æ¥äº†ï¼ŒæŒ‰ç…§å®˜ç½‘çš„éƒ¨ç½²æ–¹æ¡ˆï¼Œå‡ºäº†é—®é¢˜ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œä¸ºä»–äººå­¦ä¹ æä¾›ä¸€ä¸‹å‚è€ƒã€‚</p>
<span id="more"></span>
<h1 id="éƒ¨ç½²">éƒ¨ç½²</h1>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;2&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nacos/nacos-server:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nacos-standalone</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">PREFER_HOST_MODE=hostname</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">MODE=standalone</span></span><br><span class="line">    <span class="comment"># åŠ ä¸Šäº†å¯åŠ¨å‚æ•°é…ç½®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">JVM_XMS=256m</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">JVM_XMX=256m</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">JVM_XMN=128m</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="comment"># æŒ‚è½½nacosé…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./init.d/application.properties:/home/nacos/conf/application.properties</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./standalone-logs/:/home/nacos/logs</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./init.d/custom.properties:/home/nacos/init.d/custom.properties</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;8848:8848&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9848:9848&quot;</span></span><br><span class="line">  <span class="attr">prometheus:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">prometheus</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">prom/prometheus:latest</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./prometheus/prometheus-standalone.yaml:/etc/prometheus/prometheus.yml</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9090:9090&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nacos</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">on-failure</span></span><br><span class="line">  <span class="attr">grafana:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">grafana/grafana:latest</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="comment"># æŒ‚è½½grafanaé…ç½®æ–‡ä»¶</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./grafana/config/grafana.ini:/etc/grafana/grafana.ini</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3000</span><span class="string">:3000</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">on-failure</span></span><br></pre></td></tr></table></figure>
<p><code>docker-compose</code>å¦‚ä¸Šï¼Œå…¶ä¸­æ³¨é‡Šæ˜¯æˆ‘åœ¨åŸæœ‰ä¸ŠåŠ çš„ï¼Œè‡ªå·±éƒ¨ç½²æ—¶å¯ä»¥å‚è€ƒå®˜ç½‘å†åšæ”¹åŠ¨ã€‚</p>
<p>å¯åŠ¨æ—¶æ³¨æ„è¿™äº›ç«¯å£æœ‰æ²¡æœ‰è¢«å ç”¨ï¼Œæœ‰çš„å°±æ”¹ä¸€ä¸‹æ˜ å°„ã€‚</p>
<h2 id="nacoså¯åŠ¨å‚æ•°é…ç½®">nacoså¯åŠ¨å‚æ•°é…ç½®</h2>
<p>ä¸»è¦æ˜¯æˆ‘çš„æœºå™¨å¤ªæ‹‰äº†ï¼Œä¸ç„¶è¿˜æ˜¯ä½¿ç”¨é»˜è®¤é…ç½®å°±å¥½</p>
<table>
<thead>
<tr class="header">
<th>å±æ€§</th>
<th>è¯´æ˜</th>
<th>é»˜è®¤</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>JVM_XMS</code></td>
<td><code>-Xms</code></td>
<td>é»˜è®¤ :<code>1g</code></td>
</tr>
<tr class="even">
<td><code>JVM_XMX</code></td>
<td><code>-Xms</code></td>
<td>é»˜è®¤ :<code>1g</code></td>
</tr>
<tr class="odd">
<td><code>JVM_XMN</code></td>
<td><code>-Xms</code></td>
<td>é»˜è®¤ :<code>512m</code></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="æŒ‚è½½nacosé…ç½®æ–‡ä»¶">æŒ‚è½½nacosé…ç½®æ–‡ä»¶</h2>
<p>ä¹‹æ‰€ä»¥æŒ‚è½½<code>nacos</code>é…ç½®æ–‡ä»¶ï¼Œæ˜¯å› ä¸ºä¹‹åæ¥å…¥<code>Prometheus</code>éœ€è¦è¿™ä¸ªé…ç½®é¡¹æ‰“å¼€ï¼Œè€Œåœ¨<code>docker</code>å®¹å™¨å†…é…ç½®å®åœ¨æœ‰äº›éº»çƒ¦ã€‚</p>
<p>application.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">### Metrics for prometheus</span></span><br><span class="line"><span class="attr">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br></pre></td></tr></table></figure>
<h2 id="æŒ‚è½½grafanaé…ç½®æ–‡ä»¶">æŒ‚è½½grafanaé…ç½®æ–‡ä»¶</h2>
<p>è¿™ä¸ªæˆ‘çš„é—®é¢˜è¿˜æ²¡è§£å†³ï¼Œå°±æ˜¯å…³äº<code>grafana.init</code>é…ç½®æ–‡ä»¶ï¼Œæ˜æ˜æ”¹äº†<code>domain</code>é…ç½®ï¼Œå¯é…ç½®é’‰é’‰é€šçŸ¥åï¼Œé“¾æ¥ä»ç„¶æ˜¯<code>localhost</code>ï¼Œå¯¼è‡´è®¿é—®é“¾æ¥ä¸€ç›´æ˜¯é”™è¯¯çš„ã€‚</p>
<h1 id="å¯åŠ¨">å¯åŠ¨</h1>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose -f example/standalone-derby.yaml up -d</span><br></pre></td></tr></table></figure>
<p>åŠ ä¸Š<code>-d</code>åå°å¯åŠ¨æ–¹å¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¯åŠ¨æƒ…å†µ</span></span><br><span class="line">docker-compose -f example/standalone-derby.yaml ps</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CONTAINER ID   IMAGE                       COMMAND                  CREATED         STATUS         PORTS                                                                                  NAMES</span><br><span class="line">4ca1c13e6a6b   prom/prometheus:latest      &quot;/bin/prometheus --câ€¦&quot;   2 minutes ago   Up 2 minutes   0.0.0.0:9090-&gt;9090/tcp, :::9090-&gt;9090/tcp                                              prometheus</span><br><span class="line">05fc4410bbd5   grafana/grafana:latest      &quot;/run.sh&quot;                2 minutes ago   Up 2 minutes   0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp                                              grafana</span><br><span class="line">35ae7aae1e09   nacos/nacos-server:latest   &quot;bin/docker-startup.â€¦&quot;   2 minutes ago   Up 2 minutes   0.0.0.0:8848-&gt;8848/tcp, :::8848-&gt;8848/tcp, 0.0.0.0:9848-&gt;9848/tcp, :::9848-&gt;9848/tcp   nacos-standalone</span><br></pre></td></tr></table></figure>
<h2 id="æ§åˆ¶å°æ£€æŸ¥">æ§åˆ¶å°æ£€æŸ¥</h2>
<p>è¿™é‡Œæ³¨æ„æå‰æŠŠç½‘ç»œå¼€é€šï¼Œé˜²ç«å¢™ã€å®‰å…¨ç»„è¿™äº›</p>
<h3 id="nacos">nacos</h3>
<p>http://ip:8848/nacos</p>
<p>ç”¨æˆ·åå¯†ç ï¼š<code>nacos/nacos</code></p>
<h3 id="prometheus">prometheus</h3>
<p>http://ip:9090/</p>
<p>æœç´¢ï¼š<code>nacos_monitor</code>ï¼Œæ£€æŸ¥<code>prometheus</code>æœ‰æ²¡æœ‰é‡‡é›†åˆ°<code>nacos</code>æ•°æ®</p>
<h3 id="grafana">grafana</h3>
<p>http://ip:3000/</p>
<p>ç”¨æˆ·åå¯†ç ï¼š<code>admin/admin</code></p>
<p>é¦–æ¬¡ç™»å½•éœ€è¦ä¿®æ”¹å¯†ç </p>
<h2 id="grafanaé…ç½®">grafanaé…ç½®</h2>
<p><code>Configuration</code>-&gt;<code>Datassources</code>-&gt;é€‰æ‹©<code>Prometheus</code></p>
<p>è¿™é‡Œè¦æ³¨æ„äº†ï¼ŒæŒ‰ç…§å®˜æ–¹è¯´çš„è¯´æ³•ç¡®å®æ²¡é”™ï¼Œä½†æ˜¯å¾ˆå®¹æ˜“å‡ºé”™ï¼Œå› ä¸ºå®˜ç½‘é…ç½®çš„çš„<code>prometheus</code>è€ŒGrafanaé»˜è®¤é…ç½®çš„çš„æ˜¯<code>Prometheus</code>ï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸€ä¸ªå­—æ¯å¤§å°å°å†™ï¼Œä¸ºä¹‹åä»å®˜ç½‘å¯¼å…¥é…ç½®åŸ‹ä¸‹ä¼ç¬”ã€‚</p>
<p><code>Create</code>-&gt;<code>Import</code>-&gt;<code>Upload JSON file</code></p>
<p>å€’å…¥å®˜ç½‘é…ç½®æ–‡ä»¶å³å¯</p>
]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Spring Cloud Alibaba</tag>
        <tag>Grafana</tag>
        <tag>Prometheus</tag>
      </tags>
  </entry>
  <entry>
    <title>Dubboæ•è·è‡ªå®šä¹‰å¼‚å¸¸é—®é¢˜</title>
    <url>/article/98052ade.html</url>
    <content><![CDATA[<h1 id="èµ·å› ">èµ·å› </h1>
<p>æœ€è¿‘åœ¨å·¥ä½œæ—¶ï¼Œå‘ç°çš„ä¸€ä¸ªé—®é¢˜â€”â€”<code>Dubbo</code>æ— æ³•æ•è·è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p>
<p><a
href="http://www.tianch.xyz/archives/dubboæœåŠ¡æä¾›è€…æ— æ³•æ•æ‰è‡ªå®šä¹‰å¼‚å¸¸çš„é—®é¢˜è§£å†³">dubboæœåŠ¡æä¾›è€…æ— æ³•æ•æ‰è‡ªå®šä¹‰å¼‚å¸¸çš„é—®é¢˜è§£å†³
| ç”°å°æ™– (tianch.xyz)</a></p>
<p>https://blog.csdn.net/qq_36827957/article/details/89509749</p>
<p>å¯ç›´æ¥çœ‹å‚è€ƒåŸæ–‡ï¼Œå¦‚ä¸Š</p>
<span id="more"></span>
<h1 id="æ­£æ–‡">æ­£æ–‡</h1>
<p>æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯è¿™æ ·çš„ï¼š</p>
<p>åŸºäº<code>Dubbo</code>çš„é¡¹ç›®ç»“æ„åˆ†ä¸º<code>api</code>ã€<code>privider</code>ã€<code>openapi</code>ï¼Œ<code>api</code>å®šä¹‰<code>Dubbo</code>çš„<code>RPC</code>æ¥å£ï¼Œ<code>provider</code>å’Œ<code>openapi</code>éƒ½å¼•ç”¨<code>api</code>ï¼Œ<code>provider</code>æ˜¯<code>api</code>æ¥å£çš„å®ç°æ–¹ä¹Ÿæ˜¯æœåŠ¡å®é™…æä¾›è€…ï¼Œ<code>openapi</code>æ˜¯æœåŠ¡æ¶ˆè´¹è€…ã€‚åœ¨<code>openapi</code>çš„<code>Controller</code>ä¸­è°ƒç”¨<code>RPC</code>æ¥å£æ—¶ï¼Œæœªèƒ½æ•è·åˆ°çœŸæ­£æä¾›è€…<code>provider</code>æŠ›å‡ºçš„è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p>
<p>é‡åˆ°è¿™ä¸ªé—®é¢˜å¾ˆæ˜¯ç–‘æƒ‘ï¼Ÿ</p>
<p>ä¹Ÿå°è¯•<code>Debug</code>æ‰¾åˆ°é—®é¢˜åŸç”±ï¼Œ<code>Debug</code>è¿‡ç¨‹ä¸­è™½ç„¶èƒ½æ•è·åˆ°å¼‚å¸¸ï¼Œä½†æœ€åæŠ›å‡ºçš„å´æ˜¯RuntimeExceptionï¼Œå¹¶éæˆ‘ä»¬çš„è‡ªå®šä¹‰å¼‚å¸¸</p>
<p>æŸ¥çœ‹<code>Dubbo</code>æºç ï¼Œæœ‰è¿™æ ·çš„å¼‚å¸¸å¤„ç†æµç¨‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ExceptionInvokerFilter</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Functions:</span></span><br><span class="line"><span class="comment"> * &lt;ol&gt;</span></span><br><span class="line"><span class="comment"> * &lt;li&gt;unexpected exception will be logged in ERROR level on provider side. Unexpected exception are unchecked</span></span><br><span class="line"><span class="comment"> * exception not declared on the interface&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> * &lt;li&gt;Wrap the exception not introduced in API package into RuntimeException. Framework will serialize the outer exception but stringnize its cause in order to avoid of possible serialization problem on client side&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> * &lt;/ol&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Activate(group = Constants.PROVIDER)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ExceptionFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(LoggerFactory.getLogger(ExceptionFilter.class));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ExceptionFilter</span><span class="params">(Logger logger)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.logger = logger;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">invoke</span><span class="params">(Invoker&lt;?&gt; invoker, Invocation invocation)</span> <span class="keyword">throws</span> RpcException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> invoker.invoke(invocation);</span><br><span class="line">            <span class="keyword">if</span> (result.hasException() &amp;&amp; GenericService.class != invoker.getInterface()) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">Throwable</span> <span class="variable">exception</span> <span class="operator">=</span> result.getException();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// directly throw if it&#x27;s checked exception</span></span><br><span class="line">                    <span class="keyword">if</span> (!(exception <span class="keyword">instanceof</span> RuntimeException) &amp;&amp; (exception <span class="keyword">instanceof</span> Exception)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> result;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// directly throw if the exception appears in the signature</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> invoker.getInterface().getMethod(invocation.getMethodName(), invocation.getParameterTypes());</span><br><span class="line">                        Class&lt;?&gt;[] exceptionClassses = method.getExceptionTypes();</span><br><span class="line">                        <span class="keyword">for</span> (Class&lt;?&gt; exceptionClass : exceptionClassses) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (exception.getClass().equals(exceptionClass)) &#123;</span><br><span class="line">                                <span class="keyword">return</span> result;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">                        <span class="keyword">return</span> result;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// for the exception not found in method&#x27;s signature, print ERROR message in server&#x27;s log.</span></span><br><span class="line">                    logger.error(<span class="string">&quot;Got unchecked and undeclared exception which called by &quot;</span> + RpcContext.getContext().getRemoteHost()</span><br><span class="line">                            + <span class="string">&quot;. service: &quot;</span> + invoker.getInterface().getName() + <span class="string">&quot;, method: &quot;</span> + invocation.getMethodName()</span><br><span class="line">                            + <span class="string">&quot;, exception: &quot;</span> + exception.getClass().getName() + <span class="string">&quot;: &quot;</span> + exception.getMessage(), exception);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// directly throw if exception class and interface class are in the same jar file.</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">serviceFile</span> <span class="operator">=</span> ReflectUtils.getCodeBase(invoker.getInterface());</span><br><span class="line">                    <span class="type">String</span> <span class="variable">exceptionFile</span> <span class="operator">=</span> ReflectUtils.getCodeBase(exception.getClass());</span><br><span class="line">                    <span class="keyword">if</span> (serviceFile == <span class="literal">null</span> || exceptionFile == <span class="literal">null</span> || serviceFile.equals(exceptionFile)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> result;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// directly throw if it&#x27;s JDK exception</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> exception.getClass().getName();</span><br><span class="line">                    <span class="keyword">if</span> (className.startsWith(<span class="string">&quot;java.&quot;</span>) || className.startsWith(<span class="string">&quot;javax.&quot;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> result;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// directly throw if it&#x27;s dubbo exception</span></span><br><span class="line">                    <span class="keyword">if</span> (exception <span class="keyword">instanceof</span> RpcException) &#123;</span><br><span class="line">                        <span class="keyword">return</span> result;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// otherwise, wrap with RuntimeException and throw back to the client</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RpcResult</span>(<span class="keyword">new</span> <span class="title class_">RuntimeException</span>(StringUtils.toString(exception)));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">                    logger.warn(<span class="string">&quot;Fail to ExceptionFilter when called by &quot;</span> + RpcContext.getContext().getRemoteHost()</span><br><span class="line">                            + <span class="string">&quot;. service: &quot;</span> + invoker.getInterface().getName() + <span class="string">&quot;, method: &quot;</span> + invocation.getMethodName()</span><br><span class="line">                            + <span class="string">&quot;, exception: &quot;</span> + e.getClass().getName() + <span class="string">&quot;: &quot;</span> + e.getMessage(), e);</span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;Got unchecked and undeclared exception which called by &quot;</span> + RpcContext.getContext().getRemoteHost()</span><br><span class="line">                    + <span class="string">&quot;. service: &quot;</span> + invoker.getInterface().getName() + <span class="string">&quot;, method: &quot;</span> + invocation.getMethodName()</span><br><span class="line">                    + <span class="string">&quot;, exception: &quot;</span> + e.getClass().getName() + <span class="string">&quot;: &quot;</span> + e.getMessage(), e);</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµç¨‹æè¿°å¦‚ä¸‹</p>
<blockquote>
<p>1ã€å¦‚æœæ˜¯checkedå¼‚å¸¸ï¼Œç›´æ¥æŠ›å‡ºã€‚</p>
<p>2ã€åœ¨æ–¹æ³•ç­¾åä¸Šæœ‰å£°æ˜ï¼Œç›´æ¥æŠ›å‡ºã€‚</p>
<p>3ã€å¼‚å¸¸ç±»å’Œæ¥å£ç±»åœ¨åŒä¸€jaråŒ…é‡Œï¼Œç›´æ¥æŠ›å‡ºã€‚</p>
<p>4ã€æ˜¯JDKè‡ªå¸¦çš„å¼‚å¸¸ï¼Œç›´æ¥æŠ›å‡ºã€‚</p>
<p>5ã€æ˜¯Dubboæœ¬èº«çš„å¼‚å¸¸(RpcException)ï¼Œç›´æ¥æŠ›å‡ºã€‚</p>
<p>6ã€å¦åˆ™ï¼ŒåŒ…è£…æˆRuntimeExceptionæŠ›ç»™å®¢æˆ·ç«¯ã€‚å› ä¸ºä»¥ä¸Š5ç‚¹å‡ä¸æ»¡è¶³,æ‰€ä»¥è¯¥å¼‚å¸¸ä¼šè¢«åŒ…è£…æˆRuntimeExceptionå¼‚å¸¸æŠ›å‡º(é‡è¦)</p>
</blockquote>
<h1 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h1>
<p>1ã€åœ¨æ–¹æ³•ä¸Šå£°æ˜è‡ªå®šä¹‰å¼‚å¸¸ ä¹Ÿå°±æ˜¯throws è‡ªå®šä¹‰å¼‚å¸¸</p>
<p>2ã€å°†å¼‚å¸¸å’Œæ¥å£æ”¾åˆ°åŒä¸€ä¸ªåŒ…ä¸‹</p>
<p>3ã€é‡å†™ä¸€ä¸ªExceptionFilteræ›¿ä»£dubboçš„ExceptionFilter</p>
<p>é’ˆå¯¹ä»¥ä¸Šä¸‰ç§æ–¹æ¡ˆï¼Œå¯¹äºè‡ªå·±çš„é¡¹ç›®è‡ªç„¶æœ‰åˆé€‚çš„è§£æ³•</p>
<p>æ–¹æ¡ˆä¸€</p>
<blockquote>
<p>æœ€ä¸ºç®€å•ï¼Œåªéœ€è¦åœ¨å£°æ˜æ¥å£æ–¹æ³•æ—¶æŠ›å‡ºä¸€åœºå³å¯</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HelloService</span> &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">sayHello</span><span class="params">(String name)</span> <span class="keyword">throws</span> ServiceException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹æ¡ˆäºŒ</p>
<blockquote>
<p>å¯¹äºå°è§„æ¨¡çš„å¾®æœåŠ¡è¿™ä¸ªä¹Ÿæ˜¯æ¯”è¾ƒå®¹æ˜“åšåˆ°çš„ï¼Œåªè¦æœ‰å…¬å…±çš„commonæ¨¡å—ï¼Œåœ¨ä½¿ç”¨æ—¶åšåˆ°ç»Ÿä¸€å³å¯</p>
</blockquote>
<p>æ–¹æ¡ˆä¸‰</p>
<blockquote>
<p>æ²¡æœ‰æ·±ç©¶è¿‡ï¼Œä½†è¦æ›¿ä»£Dubboï¼Ÿéå¸¸ä¸å»ºè®®</p>
</blockquote>
]]></content>
      <tags>
        <tag>Dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title>2020çš„æ€è€ƒ</title>
    <url>/article/2ed16840.html</url>
    <content><![CDATA[<p>2020æ˜¯ä¸ªä¸å¹³å‡¡çš„ä¸€å¹´ï¼Œç–«æƒ…çˆ†å‘ã€æ¾³æ´²å±±ç«ã€ç§‘æ¯”å æœºèº«äº¡ã€è‹±å›½è„±æ¬§ã€ç‰¹å¼ºè—ç¾ã€ç¯å¡”å›½é»‘äººé­æš´åŠ›æ‰§æ³•è‡´æ­»ã€ç¯å¡”å›½å¯¹äºä¸­å›½åˆ¶è£å‡çº§ç­‰ç­‰ã€‚ä¸Šé¢æåˆ°çš„å¤§éƒ½æ˜¯æ¶ˆæäº›çš„ï¼Œåœ¨2020å¹´å½“ç„¶ä¹Ÿæœ‰ç§¯æçš„äº‹ä»¶ï¼Œä½†è¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯è°ˆè®ºè¿™äº›å¤§äº‹ï¼Œè€Œåªæ˜¯æƒ³è®²ä¸€è®²æˆ‘çš„å…³äºè‡ªå·±å…³äºæœªæ¥çš„ä¸€äº›æ€è€ƒã€‚</p>
<span id="more"></span>
<h1 id="ç–«æƒ…æœŸé—´åœ¨å®¶å¤§åŠå¹´">ç–«æƒ…æœŸé—´åœ¨å®¶å¤§åŠå¹´</h1>
<p>ä¸€äº›æ·±çš„æ€è€ƒå¾€å¾€æ¥è¯´æ˜¯éœ€è¦æ—¶é—´ï¼Œæ°å·§åœ¨ç–«æƒ…æœŸé—´åœ¨å®¶å‘†çš„æ—¶é—´ä¹Ÿå¤Ÿé•¿çš„ï¼Œè§è¯†åˆ°çš„ã€æƒ³åˆ°çš„ä¸œè¥¿è¿˜çœŸä¸å°‘ã€‚æœ‰å¥è¯æ˜¯è¿™æ ·è¯´çš„ï¼Œä¸€ä¸ªäººçš„æ—¶å€™å¾€å¾€æ‰èƒ½çœ‹åˆ°çœŸæ­£çš„è‡ªå·±ï¼Œè¿™æ—¶å€™é€šå¸¸æ˜¯æ²‰é™çš„ï¼Œå¯ä»¥ç•…æ¸¸å†…å¿ƒçš„ã€‚</p>
<p>åˆ°2020ä¹æœˆå°±å¤§ä¸‰äº†ï¼Œå¤§å­¦é©¬ä¸Šå°±ç»“æŸäº†ï¼Œä¸Šç ”orå·¥ä½œï¼Œè¿™ä¸ªé—®é¢˜
æˆ‘ä¸€ç›´éƒ½æœ‰æ€è€ƒï¼Œç”šè‡³åœ¨é«˜ä¸­ï¼Œç°åœ¨ç»ˆäºè¦é¢å¯¹å®ƒäº†ã€‚ä¸Šç ”ä¸å·¥ä½œå½“ç„¶æ˜¯ä¸¤æ¡è·¯ï¼Œæ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ï¼Œä½†æ—©åœ¨å¤§ä¸€æˆ‘ä¸€ç›´æ˜¯å€¾å‘äºå·¥ä½œçš„ï¼Œæƒ³æ—©äº›å»å·¥ä½œã€æŒ£é’±ã€çœŸæ­£çš„è¿›å…¥ç¤¾ä¼šã€‚å¯¹äºæˆ‘çš„é€‰æ‹©æ›´é‡è¦æ˜¯å› ä¸ºå®¶åº­æƒ…å†µå’Œæ²¡æœ‰å¯¹ä¸“ä¸šæ·±å…¥ç ”ç©¶çš„æƒ³æ³•ã€‚</p>
<p>åœ¨å®¶æœŸé—´é‡è§äº†å¤šå¹´ä¸è§çš„å°å­¦åŒå­¦ï¼Œå¬è¯´äº†ä¸€äº›å…³äºä»–ä»¬çš„äº‹æƒ…ï¼Œåªèƒ½è¯´â€œæ—¶é—´åœ¨èµ°ï¼Œå¾ˆå¤šäº‹éƒ½å˜äº†ï¼Œå¾ˆå¤šäººéƒ½å˜äº†â€ã€‚é‚£äº›æ—©æ—©è¾å­¦çš„å¯èƒ½å·²ç»å·¥ä½œç»“å©šäº†ï¼Œæœ‰çš„è¿˜åœ¨å¤–åœ°æ‹¼æåŠªåŠ›ï¼Œæœ‰çš„è¿˜åœ¨å®Œæˆå­¦ä¸šã€‚ã€‚ã€‚æ„Ÿå—åˆ°ç‰©æ˜¯äººéï¼Œæ˜¯å¾ˆéš¾è¡¨è¾¾çš„ã€‚</p>
<h1 id="ä¸€äº›å˜åŒ–">ä¸€äº›å˜åŒ–</h1>
<p>å› ä¸ºæˆ‘å®¶åœ¨å†œæ‘ï¼Œç”Ÿæ´»çš„å¾ˆå®é™ç¥¥å’Œï¼Œè¿™æ ·ç”Ÿæ´»å¤§åŠå¹´ï¼Œå¿ƒæ€æ˜¯ä¼šæœ‰å˜åŒ–ï¼Œå˜å¾—ä¸é‚£ä¹ˆæµ®èºï¼Œä¸é‚£ä¹ˆæ€¥åŠŸè¿‘åˆ©ï¼Œå˜å¾—ä¸ä¸–æ— äº‰ï¼Œæ‚ ç„¶è‡ªå¾—ã€‚è¯´å®è¯åœ¨å®¶è¿™ç§çŠ¶æ€çœŸçš„å¥½ï¼Œæ—©æ—©èµ·åºŠç»•ç€æ‘å­æ™¨ç»ƒï¼Œä¸Šåˆæœ‰æ´»å¹²æ´»ï¼Œæ²¡æœ‰çœ‹ä¹¦ç©æ‰‹æœºï¼Œä¸­åˆåƒé¡¿é¥±é¥­ï¼Œç¡ä¸ªç¾ç¾çš„åˆè§‰ï¼Œä¸‹åˆåŒä¸Šåˆä¸€æ ·ï¼Œæ™šé¥­åä¸æœ‹å‹æ•£æ­¥é¥­åæ¶ˆé£Ÿï¼Œå¹ä¸€å¹å‡‰çˆ½çš„é£ï¼Œæœ›ä¸€æœ›å¤´é¡¶çš„æ˜Ÿã€‚</p>
<p>æ‰€ä»¥ï¼Œå¹´è½»æ—¶ç…§æˆ‘çš„è®¡åˆ’ä¸å˜ï¼Œå‡ºå»çœ‹è‡ªå·±èƒ½æ··æˆä»€ä¹ˆæ ·ï¼Œå°½è‡ªå·±çš„åŠªåŠ›å»æ‹¼æåŠªåŠ›ï¼Œæ¯•ç«Ÿå¹´è½»å˜›ï¼ç­‰åˆ°å¹²ä¸åŠ¨äº†è€äº†å›æ¥ï¼Œè¿‡ç€è¿™æ ·æ‚ é—²çš„ç”Ÿæ´»ï¼Œç¾å‘€ï¼</p>
<h1 id="æœªæ¥çš„æ†§æ†¬">æœªæ¥çš„æ†§æ†¬</h1>
<p>æ—¶ä»£å˜åŒ–å¤ªå¿«äº†ï¼Œå¾ˆå¤šäº‹çœŸçš„ä¸æ•¢æƒ³ï¼Œä¸€äº›ä¸œè¥¿æ­£åœ¨å…´èµ·ï¼Œä¸€äº›æ­£åœ¨è¡°å¼±ï¼Œä»€ä¹ˆéƒ½ä¸å¥½è¯´ã€‚ä¸€ä¸ªäººæ‰€èƒ½æƒ³è±¡çš„å¤§éƒ½æ˜¯åŸºäºè§è¯†ç»å†è¿‡è€Œéšä¹‹äº§ç”Ÿçš„ï¼Œæ¢å¥è¯è¯´ï¼Œç°åœ¨çš„ä½ åªèƒ½æƒ³è±¡åŸºäºç°åœ¨çš„æœªæ¥ï¼Œä¹Ÿå°±æ˜¯è¯´æƒ³è±¡æ˜¯å–å†³äºä½ çš„ç¯å¢ƒçš„ã€‚</p>
<h1 id="æ€è€ƒ">æ€è€ƒ</h1>
<p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å°†æˆ‘çš„ä¸€äº›æ€è€ƒå†™ä¸‹æ¥ï¼Œè¿‡å»ä¹Ÿåªæ˜¯å†™ä¸‹å‡ ä¸ªå­—æˆ–æ˜¯ä¸€å¥è¯ï¼Œæ€è€ƒçš„å¾ˆçç¢ä½†ä¸€å®šæ˜¯æœ‰æ¡çº¿å°†ä»–ä»¬è¿åœ¨ä¸€èµ·çš„ã€‚</p>
<p>æ•´ç¯‡æ–‡ç« å¾ˆä¹±ï¼Œå¯èƒ½çœ‹å®Œäº†ä¹Ÿä¸çŸ¥é“æˆ‘è¦è¡¨è¾¾ä»€ä¹ˆï¼Œä½†æ˜¯æ— æ‰€è°“ã€‚I don't
care.</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>EasyPoiå¯¼å‡ºå¤æ‚Excel</title>
    <url>/article/755ff4c3.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>è¿˜æ˜¯å…³äºæ¯•è®¾çš„ï¼Œç°åœ¨æœ‰ä¸ªå¯¼å‡ºå¤æ‚<code>Excel</code>çš„éœ€æ±‚ï¼Œä¸å‰é¢çš„æ–‡ç« å…³ç³»å¾ˆå¤§ï¼Œæ„Ÿå…´è¶£çš„çœ‹ä¸€ä¸‹å“ˆğŸ¥°ğŸ¥°ğŸ¥°</p>
<p>https://wnhyang.github.io/article/854b9337.html</p>
<span id="more"></span>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>å‰é¢ä¸æ˜¯è§£å†³äº†ï¼Œå±æ€§åˆ—è¡¨å±•ç¤ºé—®é¢˜å—ï¼Ÿ</p>
<p>éšä¹‹è€Œæ¥ï¼Œä¾¿æ˜¯å¯¼å‡º<code>Excel</code>çš„é—®é¢˜äº†ğŸ¥±ğŸ¥±ğŸ¥±</p>
<p>çœ‹äº†å‰é¢éƒ½çŸ¥é“äº†ï¼Œæˆ‘éœ€è¦èƒ½å¯¼å‡ºè¿™æ ·çš„<code>Excel</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1xvh5323b08w.webp"
alt="éœ€è¦çš„è¡¨æ ¼" />
<figcaption aria-hidden="true">éœ€è¦çš„è¡¨æ ¼</figcaption>
</figure>
<p>ç„¶è€Œ<code>ruoyi</code>æœ€åŸç”Ÿçš„åŸºäº<code>org.apache.poi</code>å®ç°çš„ä¸€ç§ç®€å•çš„å¯¼å‡ºï¼Œåªæ”¯æŒç®€å•çš„æ•°æ®ï¼Œå°±æ˜¯ä¸€è¡Œä¸€è¡Œéå¸¸è§„èŒƒçš„é‚£ç§ï¼Œä¸æ”¯æŒå¤æ‚ç±»å‹çš„<code>Excel</code>å¯¼å‡º</p>
<h1 id="è§£å†³">è§£å†³</h1>
<p>æŸ¥äº†å¾ˆå¤šèµ„æ–™åï¼Œç¡®å®šäº†ä½¿ç”¨<code>EasyPoi</code>ï¼Œå¦‚æœç¡®å®æ˜¯æƒ³æ·±å…¥å­¦ä¹ ï¼Œä¸‹é¢æœ‰é“¾æ¥ï¼Œä¸è¿‡è¿™é‡Œå°±è¯´ä¸€ä¸‹æˆ‘çš„åº”ç”¨</p>
<ul>
<li><a
href="https://easypoi.mydoc.io/">https://easypoi.mydoc.io/</a></li>
<li><a
href="https://gitee.com/lemur/easypoi">https://gitee.com/lemur/easypoi</a></li>
<li><a
href="https://blog.51cto.com/u_9771070/2722382">https://blog.51cto.com/u_9771070/2722382</a></li>
<li><a
href="https://cloud.tencent.com/developer/article/1472607">https://cloud.tencent.com/developer/article/1472607</a></li>
</ul>
<h2 id="excel"><span class="citation"
data-cites="Excel">@Excel</span></h2>
<p>è¿™ä¸ªæ˜¯å¿…é¡»ä½¿ç”¨çš„æ³¨è§£,å¦‚æœéœ€æ±‚ç®€å•åªä½¿ç”¨è¿™ä¸€ä¸ªæ³¨è§£ä¹Ÿæ˜¯å¯ä»¥çš„,æ¶µç›–äº†å¸¸ç”¨çš„Exceléœ€æ±‚,éœ€è¦å¤§å®¶ç†Ÿæ‚‰è¿™ä¸ªåŠŸèƒ½,ä¸»è¦åˆ†ä¸ºåŸºç¡€,å›¾ç‰‡å¤„ç†,æ—¶é—´å¤„ç†,åˆå¹¶å¤„ç†å‡ å—,name_idæ˜¯ä¸Šé¢è®²çš„idç”¨æ³•,è¿™é‡Œå°±ä¸ç´¯è¨€äº†</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 8%" />
<col style="width: 16%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="header">
<th>å±æ€§</th>
<th>ç±»å‹</th>
<th>é»˜è®¤å€¼</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>name</td>
<td>String</td>
<td>null</td>
<td>åˆ—å,æ”¯æŒname_id</td>
</tr>
<tr class="even">
<td>needMerge</td>
<td>boolean</td>
<td>fasle</td>
<td>æ˜¯å¦éœ€è¦çºµå‘åˆå¹¶å•å…ƒæ ¼(ç”¨äºå«æœ‰listä¸­,å•ä¸ªçš„å•å…ƒæ ¼,åˆå¹¶liståˆ›å»ºçš„å¤šä¸ªrow)</td>
</tr>
<tr class="odd">
<td>orderNum</td>
<td>String</td>
<td>"0"</td>
<td>åˆ—çš„æ’åº,æ”¯æŒname_id</td>
</tr>
<tr class="even">
<td>replace</td>
<td>String[]</td>
<td>{}</td>
<td>å€¼å¾—æ›¿æ¢ å¯¼å‡ºæ˜¯{a_id,b_id} å¯¼å…¥åè¿‡æ¥</td>
</tr>
<tr class="odd">
<td>type</td>
<td>int</td>
<td>1</td>
<td>å¯¼å‡ºç±»å‹ 1 æ˜¯æ–‡æœ¬ 2 æ˜¯å›¾ç‰‡,3 æ˜¯å‡½æ•°,10 æ˜¯æ•°å­— é»˜è®¤æ˜¯æ–‡æœ¬</td>
</tr>
<tr class="even">
<td>width</td>
<td>double</td>
<td>10</td>
<td>åˆ—å®½</td>
</tr>
<tr class="odd">
<td>exportFormat</td>
<td>String</td>
<td>""</td>
<td>å¯¼å‡ºçš„æ—¶é—´æ ¼å¼,ä»¥è¿™ä¸ªæ˜¯å¦ä¸ºç©ºæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ ¼å¼åŒ–æ—¥æœŸ</td>
</tr>
<tr class="even">
<td>importFormat</td>
<td>String</td>
<td>""</td>
<td>å¯¼å…¥çš„æ—¶é—´æ ¼å¼,ä»¥è¿™ä¸ªæ˜¯å¦ä¸ºç©ºæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ ¼å¼åŒ–æ—¥æœŸ</td>
</tr>
<tr class="odd">
<td>format</td>
<td>String</td>
<td>""</td>
<td>æ—¶é—´æ ¼å¼,ç›¸å½“äºåŒæ—¶è®¾ç½®äº†exportFormat å’Œ importFormat</td>
</tr>
<tr class="even">
<td>databaseFormat</td>
<td>String</td>
<td>"yyyyMMddHHmmss"</td>
<td>å¯¼å‡ºæ—¶é—´è®¾ç½®,å¦‚æœå­—æ®µæ˜¯Dateç±»å‹åˆ™ä¸éœ€è¦è®¾ç½® æ•°æ®åº“å¦‚æœæ˜¯string
ç±»å‹,è¿™ä¸ªéœ€è¦è®¾ç½®è¿™ä¸ªæ•°æ®åº“æ ¼å¼,ç”¨ä»¥è½¬æ¢æ—¶é—´æ ¼å¼è¾“å‡º</td>
</tr>
<tr class="odd">
<td>suffix</td>
<td>String</td>
<td>""</td>
<td>æ–‡å­—åç¼€,å¦‚% 90 å˜æˆ90%</td>
</tr>
<tr class="even">
<td>isWrap</td>
<td>boolean</td>
<td>true</td>
<td>æ˜¯å¦æ¢è¡Œ å³æ”¯æŒ</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢çš„è¡¨æ ¼å·²ç»çœç•¥äº†å¾ˆå¤šå±æ€§äº†</p>
<p>ä¸‹é¢ç›´æ¥çœ‹åº”ç”¨å§</p>
<h2 id="å¯¼å‡ºç±»æ ‡è®°æ³¨è§£">1ã€å¯¼å‡ºç±»æ ‡è®°æ³¨è§£</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Workload</span> <span class="keyword">extends</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥ä½œé‡id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;ç±»å‹&quot;, needMerge = true, dict = &quot;workload_type&quot;, width = 10)</span></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»»åŠ¡ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelCollection(name = &quot;ä»»åŠ¡&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Task&gt; taskList;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥ä½œé‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;å·¥ä½œé‡&quot;, needMerge = true, width = 10)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal workload;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ³¨æ„</p>
<ul>
<li><code>@ExcelCollection(name = "ä»»åŠ¡")</code>å°±æ˜¯ç”¨æ¥æ ‡è®°åˆ—è¡¨å±æ€§çš„ï¼Œè®°å¾—æ ‡æ³¨äº†è¿™ä¸ªï¼Œé‚£ä¹ˆå¯¹åº”çš„ç±»ä¹Ÿè¦åŠ ä¸Šå¿…è¦çš„æ³¨è§£</li>
<li><code>needMerge = true</code>è¡¨ç¤ºéœ€è¦åˆå¹¶</li>
</ul>
<h2 id="åˆ—è¡¨å±æ€§æ ‡è®°">2ã€åˆ—è¡¨å±æ€§æ ‡è®°</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">extends</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äººæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;äººæ•°&quot;)</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;äººæ•°&quot;, orderNum = &quot;10&quot;, width = 10)</span></span><br><span class="line">    <span class="keyword">private</span> Integer headcount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äººæ•°ç³»æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;äººæ•°ç³»æ•°&quot;, orderNum = &quot;11&quot;, width = 10)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal headcountCoefficient;    </span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éš¾åº¦ç³»æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;éš¾åº¦ç³»æ•°&quot;, orderNum = &quot;12&quot;, width = 10)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal degreeCoefficient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•å·¥ä½œé‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;å•å·¥ä½œé‡&quot;, orderNum = &quot;13&quot;, width = 10)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal workload;</span><br><span class="line"> </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>EasyPoi</code>ä½¿ç”¨éå¸¸ç®€å•ï¼Œåˆ°è¿™é‡ŒåŸºæœ¬å·¥ä½œå·²ç»å®Œæˆäº†</p>
<h2 id="å¯¼å‡º">3ã€å¯¼å‡º</h2>
<p>å…³äºå¯¼å‡ºï¼Œè¦åšçš„å°±æ˜¯åœ¨<code>Controller</code>ä¸­ç”¨<code>EasyPoi</code>å¤„ç†ä¸€ä¸‹æŸ¥åˆ°çš„æ•°æ®ï¼Œæˆ‘è¿™é‡Œç”¨çš„å°è£…çš„å·¥å…·ç±»ï¼ˆä¸ºäº†é…åˆ<code>ruoyi</code>ä½¿ç”¨ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¼å‡ºå·¥ä½œé‡åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Log(title = &quot;å·¥ä½œé‡&quot;, businessType = BusinessType.EXPORT)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> AjaxResult <span class="title function_">export</span><span class="params">(Workload workload)</span> &#123;</span><br><span class="line">    List&lt;Workload&gt; list = workloadService.selectWorkloadList(workload);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ExcelExportUtil.exportExcel(<span class="string">&quot;æ•™å¸ˆå·¥ä½œé‡æ•°æ®&quot;</span>, Workload.class, list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯¼å‡ºå·¥å…·ç±»">å¯¼å‡ºå·¥å…·ç±»</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelExportUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(ExcelExportUtil.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">IExcelDictHandler</span> <span class="variable">EXCEL_DICT_HANDLER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExcelDictHandlerImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ExcelExportUtil</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AjaxResult <span class="title function_">exportExcel</span><span class="params">(String sheetName, Class&lt;?&gt; pojoClass,</span></span><br><span class="line"><span class="params">                                         Collection&lt;?&gt; dataSet)</span> &#123;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Workbook</span> <span class="variable">wb</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> ExcelUtil.encodingFilename(sheetName);</span><br><span class="line">            <span class="type">ExportParams</span> <span class="variable">exportParams</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExportParams</span>(sheetName, sheetName);</span><br><span class="line">            exportParams.setDictHandler(EXCEL_DICT_HANDLER);</span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(ExcelUtil.getAbsoluteFile(filename));</span><br><span class="line">            wb = cn.afterturn.easypoi.excel.ExcelExportUtil.exportExcel(exportParams, pojoClass, dataSet);</span><br><span class="line">            wb.write(out);</span><br><span class="line">            <span class="keyword">return</span> AjaxResult.success(filename);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;å¯¼å‡ºExcelå¼‚å¸¸&#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UtilException</span>(<span class="string">&quot;å¯¼å‡ºExcelå¤±è´¥ï¼Œè¯·è”ç³»ç½‘ç«™ç®¡ç†å‘˜ï¼&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            IOUtils.closeQuietly(wb);</span><br><span class="line">            IOUtils.closeQuietly(out);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸çŸ¥é“æˆ‘æ•…æ„é—æ¼äº†<code>dict = "workload_type"</code>æ²¡è¯´ï¼Œæœ‰æ³¨æ„åˆ°æ²¡ğŸ¶ğŸ¶ğŸ¶</p>
<p>è¿™æ˜¯<code>EasyPoi</code>æä¾›çš„ä¸€ä¸ªå…³äºå­—å…¸è½¬æ¢çš„ï¼Œç®€å•è¯´å°±æ˜¯</p>
<p>æˆ‘ä»¬å¯¼å…¥è¾“å…¥â€œå°æ˜â€ï¼Œä¼šé€šè¿‡å­—å…¸æŸ¥è¯¢å¯¹åº”çš„å€¼ï¼Œç”Ÿæˆå¯¹åº”ç±»å±æ€§ï¼Œï¼ˆå°æ˜ï¼‰-&gt;ï¼ˆ0ï¼‰</p>
<p>å¯¼å‡ºä¹Ÿæ˜¯åŒæ ·ï¼Œåªè¦æœ‰å¯¹åº”çš„å­—å…¸æ•°æ®ï¼Œéƒ½æ˜¯å¯ä»¥å®Œæˆçš„</p>
<h3 id="å­—å…¸ä½¿ç”¨">å­—å…¸ä½¿ç”¨</h3>
<p>åªéœ€å®ç°<code>IExcelDictHandler</code>æ¥å£å³å¯ï¼Œå†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelDictHandlerImpl</span> <span class="keyword">implements</span> <span class="title class_">IExcelDictHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(ExcelDictHandlerImpl.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»å€¼ç¿»è¯‘åˆ°åç§°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dict  å­—å…¸Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj   å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name  å±æ€§åç§°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å±æ€§å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toName</span><span class="params">(String dict, Object obj, String name, Object value)</span> &#123;</span><br><span class="line">        log.debug(dict, obj, name, value);</span><br><span class="line">        <span class="keyword">return</span> DictUtils.getDictLabel(dict, String.valueOf(value));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»åç§°ç¿»è¯‘åˆ°å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dict  å­—å…¸Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj   å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name  å±æ€§åç§°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å±æ€§å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toValue</span><span class="params">(String dict, Object obj, String name, Object value)</span> &#123;</span><br><span class="line">        log.debug(dict, obj, name, value);</span><br><span class="line">        <span class="keyword">return</span> DictUtils.getDictValue(dict, String.valueOf(value));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨çš„ä¹Ÿæ˜¯<code>ruoyi</code>å·²æœ‰çš„å­—å…¸å·¥å…·ï¼Œå°±ä¸å†ç»§ç»­å¾€ä¸‹æ·±è®²</p>
<p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤å°±å¯ä»¥å®Œæˆå¤æ‚<code>Excel</code>çš„å¯¼å‡ºæ¥ğŸ˜ŠğŸ˜ŠğŸ˜Šï¼Œé…åˆ<code>ruoyi</code>ä½¿ç”¨å“¦</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å®Œæˆäº†è¿™ä¸ªæ¯•è®¾å¤§ä½“ä¸Šç®—æ˜¯å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å¯èƒ½ä¾ç…§ç€è€å¸ˆçš„æ„è§è¿›è¡Œä¿®æ”¹å§</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Vue</tag>
        <tag>ruoyi</tag>
        <tag>Element</tag>
      </tags>
  </entry>
  <entry>
    <title>Element.Tableå¤„ç†å±æ€§åˆ—è¡¨é—®é¢˜</title>
    <url>/article/854b9337.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>åœ¨ä½¿ç”¨<code>ruoyi</code>ä¸­ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ²¡æœ‰ä¸€ä¸ªè¾ƒä¸ºå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆåªèƒ½å¦¥åä¸€ä¸‹å®Œæˆï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p>
<span id="more"></span>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>åç«¯è¿”å›äº†è¿™æ ·çš„æ•°æ®ï¼Œå¦‚ä¸‹å›¾</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/e0807962ee06441d9c57f88a86ae4d9.43bkzf98m380.webp"
alt="response" />
<figcaption aria-hidden="true">response</figcaption>
</figure>
<p>è¿™å°±æ˜¯æˆ‘è¯´çš„å±æ€§åˆ—è¡¨ï¼Œå°±æ˜¯è¯´è¿”å›çš„æ¯ä¸€è¡Œæ•°æ®éƒ½æ˜¯åŒ…å«ä¸€ä¸ªæ˜¯åˆ—è¡¨çš„å±æ€§ã€‚</p>
<p>å¦‚ä¸Šï¼Œå°±æ˜¯<code>rows</code>æ€»æ•°æ®ä¸­çš„ä¸€è¡Œä¸­çš„<code>taskList</code>ï¼Œæˆ‘å¸Œæœ›æ•°æ®èƒ½åƒä¸‹é¢è¿™æ ·å±•ç¤ºå‡ºæ¥ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1xvh5323b08w.webp"
alt="è¡¨æ ¼å›¾" />
<figcaption aria-hidden="true">è¡¨æ ¼å›¾</figcaption>
</figure>
<p>æ‰¾éäº†<code>Element</code>å®åœ¨æ˜¯æ‰¾ä¸åˆ°ä¸€ä¸ªæ»¡æ„çš„æ–¹æ¡ˆã€‚</p>
<p>https://element.eleme.cn/#/zh-CN/component/table#he-bing-xing-huo-lie</p>
<p><code>Element</code>ç¡®å®æœ‰ä¸€ä¸ªå¾ˆåƒçš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯ä¸Šé¢çš„ï¼Œ<code>Table</code>åˆå¹¶è¡Œæˆ–åˆ—çš„æ–¹å¼</p>
<p>ä½†æ˜¯ï¼Œç»†çœ‹äº†ä¸€ä¸‹ï¼Œå®ƒå®ç°çš„æ˜¯å°†å¤šè¡Œè¿”å›æ•°æ®ç»è¿‡å‡½æ•°å¤„ç†è¿‡åï¼Œæ»¡è¶³æ¡ä»¶çš„è¡Œæˆ–åˆ—è¿›è¡Œåˆå¹¶ï¼Œå’Œæˆ‘è¦çš„ä¸æ˜¯ä¸€å›äº‹</p>
<p>æˆ‘æƒ³è¦çš„æ˜¯å±æ€§çš„å±•ç¤ºï¼Œä¸æ˜¯æ•°æ®çš„æ•´ç†ã€‚</p>
<h1 id="è§£å†³">è§£å†³</h1>
<p>ç½‘ä¸Šä¹Ÿæ‰¾äº†å¾ˆå¤šæ–¹æ¡ˆï¼Œä¹Ÿæ²¡æœ‰æ»¡æ„çš„ï¼Œä½†ç¡®å®èƒ½æä¾›ä¸€äº›ä¸åŒçš„æ€è·¯ã€‚</p>
<p>æœ€ç»ˆè€ƒè™‘ä¸¤ç§æ–¹æ¡ˆ</p>
<blockquote>
<p>æ–¹æ¡ˆä¸€ï¼šè¡¨æ ¼åµŒå¥—ï¼Œå°±æ˜¯æ—¢ç„¶æ˜¯ä¸€ä¸ªå±æ€§åˆ—è¡¨é‚£ä¹ˆåœ¨é‚£ä¸€ä¸ªè¡¨æ ¼å±•ç¤ºå°±å¥½</p>
</blockquote>
<blockquote>
<p>æ–¹æ¡ˆäºŒï¼šå¼¹å‡ºå±•ç¤ºï¼Œå°±æ˜¯éœ€è¦æŸ¥çœ‹æ—¶ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå¼¹å‡ºå±•ç¤ºåˆ—è¡¨æ•°æ®</p>
</blockquote>
<p>ä¸¤ä¸ªæ–¹æ¡ˆå„æœ‰å¥½å¤„ï¼Œä½†æˆ‘æœ€ç»ˆé‡‡ç”¨çš„æ˜¯æ–¹æ¡ˆä¸€ï¼ŒåŸå› æœ‰ä¸‹</p>
<ul>
<li><code>rows</code>æ•°æ®ä¸­çš„<code>workload</code>å±æ€§å¼ºç›¸å…³äºè¿™ä¸ªå±æ€§åˆ—è¡¨ï¼Œç›´æ¥å±•ç¤ºæ›´èƒ½çœ‹å‡ºå…¶ä¸­å…³ç³»</li>
<li>ç¬¬äºŒç‚¹ä¸ç¬¬ä¸€ç‚¹æœ‰ç‚¹ç›¸ä¼¼ï¼Œéƒ½æ˜¯å…³äºå±•ç¤ºçš„â€œç›´è§‚â€ï¼Œæˆ‘ä¿®æ”¹å˜åŒ–æ—¶å¸Œæœ›èƒ½ç›´æ¥çœ‹åˆ°çˆ¶å±æ€§å˜åŒ–</li>
</ul>
<p>åŸºäºä¸Šé¢å°±æœ‰äº†ä¸€ç§æ–¹æ¡ˆäº†</p>
<p>ä¸‹é¢çœ‹å…·ä½“å®ç°ï¼Œéœ€è¦å¯¹<code>ruoyi</code>åˆ†ç¦»ç‰ˆçš„å‰ç«¯æœ‰ç‚¹äº†è§£ï¼Œè¿˜æœ‰ä»£ç å¹¶ä¸å®Œæ•´ï¼Œåªè¯´ä¸€ä¸‹å…³é”®éƒ¨åˆ†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">          <span class="attr">border</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:data</span>=<span class="string">&quot;workloadList&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> /&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ç±»å‹&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ä»»åŠ¡&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;1500&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;scope.row.taskList&quot;</span> <span class="attr">:stripe</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ç¼–å·&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;äººæ•°&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;headcount&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">label</span>=<span class="string">&quot;äººæ•°ç³»æ•°&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">prop</span>=<span class="string">&quot;headcountCoefficient&quot;</span></span></span><br><span class="line"><span class="tag">                                 &gt;</span><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span></span></span><br><span class="line"><span class="tag">                                            &gt;</span>&#123;&#123; parseFloat(scope.row.headcountCoefficient).toFixed(3) &#125;&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">template</span>&gt;</span>&lt;/el-table-column</span><br><span class="line">                    &gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">label</span>=<span class="string">&quot;éš¾åº¦ç³»æ•°&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">prop</span>=<span class="string">&quot;degreeCoefficient&quot;</span></span></span><br><span class="line"><span class="tag">                                 &gt;</span><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">v-model</span>=<span class="string">&quot;scope.row.degreeCoefficient&quot;</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥éš¾åº¦ç³»æ•°&quot;</span></span></span><br><span class="line"><span class="tag">                              /&gt;</span> &lt;/template</span><br><span class="line">                    &gt;<span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;å•å·¥ä½œé‡&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;workload&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                        &#123;&#123; getTaskWorkload(scope.row) &#125;&#125;&lt;/template</span><br><span class="line">                        &gt;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">class-name</span>=<span class="string">&quot;small-padding fixed-width&quot;</span></span></span><br><span class="line"><span class="tag">                                 &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">icon</span>=<span class="string">&quot;el-icon-check&quot;</span></span></span><br><span class="line"><span class="tag">                                   @<span class="attr">click</span>=<span class="string">&quot;handleTaskUpdate(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">v-hasPermi</span>=<span class="string">&quot;[&#x27;teacher:task:edit&#x27;]&quot;</span></span></span><br><span class="line"><span class="tag">                                   &gt;</span>æ›´æ–°&lt;/el-button</span><br><span class="line">                            &gt;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;å·¥ä½œé‡&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;workload&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span> &#123;&#123; getWorkload(scope.row) &#125;&#125; <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">class-name</span>=<span class="string">&quot;small-padding fixed-width&quot;</span></span></span><br><span class="line"><span class="tag">                     &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-show</span>=<span class="string">&quot;scope.row.type &gt; 0&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">icon</span>=<span class="string">&quot;el-icon-edit&quot;</span></span></span><br><span class="line"><span class="tag">                       @<span class="attr">click</span>=<span class="string">&quot;handleUpdate(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-hasPermi</span>=<span class="string">&quot;[&#x27;teacher:workload:edit&#x27;]&quot;</span></span></span><br><span class="line"><span class="tag">                       &gt;</span>ä¿®æ”¹&lt;/el-button</span><br><span class="line">                &gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">icon</span>=<span class="string">&quot;el-icon-delete&quot;</span></span></span><br><span class="line"><span class="tag">                       @<span class="attr">click</span>=<span class="string">&quot;handleDelete(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">v-hasPermi</span>=<span class="string">&quot;[&#x27;teacher:workload:remove&#x27;]&quot;</span></span></span><br><span class="line"><span class="tag">                       &gt;</span>åˆ é™¤&lt;/el-button</span><br><span class="line">                &gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…³é”®éƒ¨åˆ†åœ¨</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;scope.row.taskList&quot;</span> <span class="attr">:stripe</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                ...</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯é€šè¿‡è¿™ä¸ª<code>Element.Table</code>ä¸­è¿™ä¸ª<code>scope</code>æ¥ç¡®å®šèŒƒå›´ï¼Œå†é€šè¿‡<code>scope.row</code>å–å¾—éœ€è¦çš„æ•°æ®å³å¯</p>
<p>å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„æ•ˆæœå›¾</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3ploqxdepee0.webp"
alt="æ•ˆæœå›¾" />
<figcaption aria-hidden="true">æ•ˆæœå›¾</figcaption>
</figure>
<p>å…¶å®è¿˜æ˜¯æœ‰ç‚¹ä¸æ»¡æ„çš„åœ°æ–¹çš„ï¼Œå°±æ˜¯æ¯ä¸ªå±æ€§åˆ—éƒ½è¦å±•ç¤ºä¸€ä»½ç‹¬ç«‹çš„<code>Table</code>è¡¨å¤´</p>
<p>æˆ‘ç›®å‰ä¹Ÿæ²¡æ‰¾åˆ°å¥½çš„æ–¹æ³•æŠŠä»–æå–å‡ºæ¥ï¼ŒğŸ¤”ğŸ¤”ğŸ¤”</p>
<p>è‡³æ­¤å…³äºä¸»è¦çš„åˆ†äº«å·²ç»ç»“æŸäº†</p>
<h1 id="è¡¥å……">è¡¥å……</h1>
<p>å¯èƒ½æœ‰äººä¼šæ³¨æ„åˆ°æˆ‘ä¸Šé¢çš„å±æ€§åˆ—è¡¨çš„è¾“å…¥æ¡†ï¼Œé‚£å…¶å®æˆ‘åšçš„ä¸€ä¸ªç±»ä¼¼äº<code>Excel</code>å…¬å¼è®¡ç®—çš„ä¸œè¥¿</p>
<p>ä¸‹é¢ä¹Ÿåˆ†äº«ä¸€ä¸‹ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå¯èƒ½æˆ‘è¿™è¿˜æ˜¯ç¬¨æ–¹æ³•å‘¢ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;å•å·¥ä½œé‡&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;workload&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; getTaskWorkload(scope.row) &#125;&#125;&lt;/template</span><br><span class="line">        &gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶å®æœ¬è´¨è¿˜æ˜¯<code>scope</code>å®šä¹‰å¥½èŒƒå›´ï¼Œè®¡ç®—å°±æ˜¯äº†</p>
<p>æŠŠéœ€è¦çš„æ–¹æ³•å†™åœ¨<code>methods</code>é‡Œå³å¯ï¼Œå”¯ä¸€æˆ‘è§‰å¾—éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœå‡½æ•°è°ƒç”¨å‚æ•°æ˜¯å¦ä¸€ä¸ªå‡½æ•°è®¡ç®—çš„ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦åœ¨æœ€åçš„å‡½æ•°ä¸­å†è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** è®¡ç®—æ€»å·¥ä½œé‡ */</span></span><br><span class="line"><span class="title function_">getWorkload</span>(<span class="params">row</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="built_in">parseFloat</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> row.<span class="property">taskList</span>) &#123;</span><br><span class="line">        y += <span class="built_in">parseFloat</span>(<span class="variable language_">this</span>.<span class="title function_">getTaskWorkload</span>(row.<span class="property">taskList</span>[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y.<span class="title function_">toFixed</span>(<span class="number">3</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>åšæ¯•è®¾æœŸé—´å­¦åˆ°äº†ä¸å°‘ï¼Œè¿™ç§èƒ½è·å¾—çš„æ—¶å€™å…¶å®å°±æ˜¯å¾ˆå¹¸ç¦çš„</p>
<p>è¿˜æœ‰å¦‚æœæœ‰é”™è¯¯çš„è¯ï¼Œéå¸¸æ¬¢è¿æŒ‡æ­£ğŸ˜ğŸ˜ğŸ˜</p>
]]></content>
      <tags>
        <tag>Vue</tag>
        <tag>ruoyi</tag>
        <tag>Element</tag>
      </tags>
  </entry>
  <entry>
    <title>Githubå¼€æºé¡¹ç›®ä¸‹è½½åŠ é€Ÿ</title>
    <url>/article/9df2c6e.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>è§£å†³å…‹éš†GitHubå¼€æºé¡¹ç›®é€Ÿåº¦ææ…¢é—®é¢˜</p>
<span id="more"></span>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p><a href="https://github.com/">GitHub</a>è´¦å· <a
href="https://gitee.com/">Gitee</a>è´¦å·</p>
<p>å¤åˆ¶è¦å…‹éš†çš„GitHubé¡¹ç›®URLï¼Œåœ¨Giteeé¦–é¡µç‚¹å‡»â€œ+â€ä»GitHub/GitLabå¯¼å…¥ä»“åº“ï¼ˆå¦‚ä¸‹å›¾ï¼‰</p>
<figure>
<img data-src="https://img.imgdb.cn/item/6042427d360785be5428c76e.jpg"
alt="Gitå¯¼å…¥ä»“åº“" />
<figcaption aria-hidden="true">Gitå¯¼å…¥ä»“åº“</figcaption>
</figure>
<p>æ“ä½œå¯¼å…¥ä»“åº“</p>
<p><img data-src="https://img.imgdb.cn/item/604243ae360785be54295add.jpg" style="zoom:80%;" /></p>
<p>å¯¼å…¥æ˜¯éå¸¸å¿«çš„ï¼Œå®Œæˆåå³å¯åˆ©ç”¨Giteeå®Œæˆé¡¹ç›®å…‹éš†</p>
<h2 id="æ³¨æ„"><strong>æ³¨æ„ï¼š</strong></h2>
<ul>
<li>ä¸ºä½¿é¡¹ç›®ä¾æ—§å’ŒGitHubå…³è”ï¼Œéœ€è¦ä¿®æ”¹å…‹éš†å®Œæˆçš„é¡¹ç›®ä¸­.gitéšè—æ–‡ä»¶å¤¹ä¸­congifæ–‡ä»¶</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = https://gitee.com/xxx/xxx.git</span><br></pre></td></tr></table></figure>
<p>å°†è¿œç¨‹ä»“åº“é‡æ–°ä¿®æ”¹ä¸º GitHubåœ°å€</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Git/GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEAä¸Eclipseçš„ç®€å•è®¾ç½®ï¼ˆè½¬è½½ï¼‰</title>
    <url>/article/d315096d.html</url>
    <content><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>æ­£æ‰€è°“å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œå¯¹äºJavaçš„å­¦ä¹ ï¼ŒIDEAä¸Eclipeseåº”è¯¥æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¥½çš„IDEå¯ä»¥å¤§å¤§åŠ å¿«æˆ‘ä»¬çš„å¼€å‘é€Ÿåº¦ï¼Œæœ€å…³é”®çš„æ˜¯ç•Œé¢ä¼˜åŒ–ä½¿å¾—æˆ‘ä»¬åœ¨ç¼–ç¨‹æ—¶ä¸å†æ„Ÿåˆ°é‚£ä¹ˆæ¯ç‡¥ï¼Œåè€Œå› ä¸ºIDEçš„UIè€Œçˆ±ä¸Šç¼–ç¨‹ã€‚æœ¬ç¯‡ä»…ä»…æ˜¯è½¬è½½ï¼</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://zhuanlan.zhihu.com/p/413305008">IntelliJ
IDEAè¯¦ç»†é…ç½®</a></p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeréƒ¨ç½²Javaé•œåƒ</title>
    <url>/article/972d4705.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://gitee.com/log4j/pig">https://gitee.com/log4j/pig</a></p>
<p><a
href="https://gitee.com/y_project/RuoYi-Vue">https://gitee.com/y_project/RuoYi-Vue</a></p>
<p><a
href="https://segmentfault.com/a/1190000022530075">https://segmentfault.com/a/1190000022530075</a></p>
<p><a
href="https://segmentfault.com/a/1190000022530083">https://segmentfault.com/a/1190000022530083</a></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1slfvf330g00.webp"
alt="dockeréƒ¨ç½²æµæ°´çº¿" />
<figcaption aria-hidden="true">dockeréƒ¨ç½²æµæ°´çº¿</figcaption>
</figure>
<span id="more"></span>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>è¿™ç¯‡æ–‡ç« ä»¥ä¹‹å‰çš„<a
href="https://wnhyang.github.io/article/a874eb2e.html">ç™½å«–æ•æ·å¼€å‘ä½“ç³»</a>ä¸ºåŸºç¡€ï¼Œä»æ³¨å†Œä½¿ç”¨äº‘æ•ˆå’Œé˜¿é‡Œäº‘ï¼Œä»£ç æ‰˜ç®¡ï¼Œé…ç½®ä¸ªäººåˆ¶å“ä»“åº“ï¼ˆä¸»è¦æ˜¯<code>Maven</code>ï¼‰ã€ä¸ªäººé•œåƒä»“åº“ï¼Œæµæ°´çº¿åˆ›å»ºæ•´ä¸ªæµç¨‹æ¥ä¸€éã€‚</p>
<h2 id="ä»£ç ç®¡ç†">ä»£ç ç®¡ç†</h2>
<p><a
href="https://codeup.aliyun.com/">https://codeup.aliyun.com/</a></p>
<p>å› ä¸ºäº‘æ•ˆæ˜¯ä¸ºä¼ä¸šæˆ–æ˜¯ç»„ç»‡æœåŠ¡çš„ï¼Œæ‰€ä»¥ä¸<code>GitHub</code>ã€<code>Gitee</code>è¿™äº›å¼€æ”¾çš„ä»£ç æ‰˜ç®¡å¹³å°ä¸åŒï¼Œæ›´åŠ å…³æ³¨ä¸å†…éƒ¨çš„ä»£ç ç®¡ç†ï¼Œæ›´åƒæ˜¯ç§æœ‰çš„<code>GitLab</code>ã€‚</p>
<p>åŸºæœ¬çš„ä»£ç ä»“åº“åŠŸèƒ½éƒ½æ˜¯ç”¨çš„ï¼Œæƒé™ç®¡ç†ï¼Œåˆ†æ”¯åˆå¹¶ï¼Œä»£ç æ£€æµ‹ï¼Œè¿˜å¯ä»¥é…åˆæµæ°´çº¿åšè‡ªåŠ¨åŒ–ï¼Œæ›´æœ‰ä¸ºä¼ä¸šç”¨æˆ·è€ƒè™‘çš„æŠ¥è¡¨åˆ†æã€‚</p>
<p>å¯¼å…¥ä»£ç æ–¹å¼æœ‰ä¸‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4nvmzoe6zq80.webp"
alt="å¯¼å…¥ä»£ç " />
<figcaption aria-hidden="true">å¯¼å…¥ä»£ç </figcaption>
</figure>
<p>è®¾ç½®<code>HTTPS</code>å¯†ç ï¼Œæˆ–æ˜¯<code>SSH</code>å…¬é’¥éƒ½å¯ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œä»£ç å…‹éš†æ¨é€äº†ã€‚</p>
<h2 id="åˆ¶å“ä»“åº“">åˆ¶å“ä»“åº“</h2>
<p><a
href="https://packages.aliyun.com/">https://packages.aliyun.com/</a></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3taf0pon3f40.webp"
alt="åˆ¶å“ä»“åº“" />
<figcaption aria-hidden="true">åˆ¶å“ä»“åº“</figcaption>
</figure>
<h3 id="mavenä»“åº“">Mavenä»“åº“</h3>
<p>é»˜è®¤å°±æœ‰ç”Ÿäº§åº“å’Œéç”Ÿäº§åº“ï¼Œä¹Ÿå°±æ˜¯ç¨³å®šç‰ˆ<code>release</code>å’Œå¿«ç…§ç‰ˆ<code>snapshot</code>ï¼Œä¸ç”¨å¤šè®²</p>
<h4 id="é…ç½®">é…ç½®</h4>
<p>ä¸¤ä¸ªä»“åº“ä»»æ„ç‚¹ä¸€ä¸ªï¼Œè¿›å…¥è®¾ç½®å³å¯ï¼Œé…ç½®<code>Maven</code>æˆ–æ˜¯<code>Gradle</code>éƒ½å¯ï¼Œè¿™é‡Œçš„é…ç½®è¯´æ˜å·²ç»éå¸¸è¯¦ç»†äº†ï¼Œæˆ‘ä¹Ÿæ²¡å¿…è¦å»å¤è¿°äº†ã€‚</p>
<p>å¦å¤–æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸¤ç§é…ç½®æ–¹å¼ï¼Œè¯´äº†ä¸å¤è¿°è¿˜æ˜¯ã€‚ã€‚ã€‚ğŸ˜‚ã€‚æ€»ä¹‹å°±æ˜¯è¦æ³¨æ„è®¤çœŸçœ‹å®˜æ–¹çš„æ–‡æ¡£è¯´æ˜ï¼Œåˆ«è‡ªå·±æ¼æ‰äº†åˆå»å„ç§ç½‘ç«™å»æœï¼Œåˆ«äººçš„ç­”æ¡ˆä¹Ÿåªæ˜¯æŠŠå®˜ç½‘çš„è¯é‡å¤ä¸€é</p>
<p>1ã€æ¨é€ï¼ˆä¿®æ”¹æ–¹å¼ï¼‰ï¼Œé€‚ç”¨äºé…ç½®è¿‡<code>setting.xml</code>ï¼Œéœ€è¦ä¿®æ”¹çš„</p>
<p>2ã€æ¨é€ï¼ˆè¦†ç›–æ–¹å¼ï¼‰ï¼Œé€‚ç”¨äºæœªé…ç½®è¿‡<code>setting.xml</code>ï¼Œå¯ç›´æ¥è¦†ç›–é…ç½®</p>
<p>3ã€<code>username</code>å’Œ<code>password</code>å·²ç»ä¸ºæˆ‘ä»¬å¡«å¥½äº†ï¼Œå¤åˆ¶å»åšå°±è¡Œ</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.501pdo8mbys0.webp"
alt="Mavené…ç½®" />
<figcaption aria-hidden="true">Mavené…ç½®</figcaption>
</figure>
<h4 id="æ¨é€">æ¨é€</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mvn clean install org.apache.maven.plugins:maven-deploy-plugin:2.8:deploy -DskipTests</span><br></pre></td></tr></table></figure>
<h3 id="npmä»“åº“">NPMä»“åº“</h3>
<p>è¿™ä¸ªæˆ‘å°±ç•¥è¿‡äº†ï¼Œå®˜ç½‘ä¹Ÿå¾ˆæ¸…æ¥šçš„</p>
<h3 id="dockerä»“åº“">Dockerä»“åº“</h3>
<p>å¼€å¯å®¹å™¨<a href="https://cr.console.aliyun.com/">é•œåƒæœåŠ¡</a></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2v8mzx78ovy0.webp"
alt="å®¹å™¨é•œåƒæœåŠ¡" />
<figcaption aria-hidden="true">å®¹å™¨é•œåƒæœåŠ¡</figcaption>
</figure>
<h4 id="è®¾ç½®è´¦å·å¯†ç ">è®¾ç½®è´¦å·å¯†ç </h4>
<p>è®¿é—®å‡­è¯ï¼Œè®¾ç½®ä¸€ä¸‹å›ºå®šå¯†ç æˆ–æ˜¯ä¸´æ—¶å¯†ç å³å¯</p>
<h4 id="åˆ›å»ºå‘½åç©ºé—´">åˆ›å»ºå‘½åç©ºé—´</h4>
<p>å‘½åç©ºé—´ï¼ŒæŒ‰è¦æ±‚åˆ›å»ºå°±è¡Œ</p>
<h4 id="åˆ›å»ºé•œåƒä»“åº“">åˆ›å»ºé•œåƒä»“åº“</h4>
<p>å‘½åç©ºé—´å¯æœ‰å¤šä¸ªé•œåƒä»“åº“ï¼Œé•œåƒç”±<code>[Docker Registry åœ°å€]/[ä»“åº“å]:[ç«¯å£å·][é•œåƒå][æ ‡ç­¾]</code>ç»„æˆï¼Œå…¥ä¸‹æ˜¯<code>DockerHub</code>ä¸­<code>java</code>ä»“åº“ï¼Œå¤šä¸ª<code>Tags</code>å¯¹åº”ç€å¤šä¸ªç‰ˆæœ¬</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4jsc439syao0.webp"
alt="å®˜æ–¹javaä»“åº“" />
<figcaption aria-hidden="true">å®˜æ–¹javaä»“åº“</figcaption>
</figure>
<h4 id="åŸºæœ¬ä¿¡æ¯">åŸºæœ¬ä¿¡æ¯</h4>
<p>åˆ›å»ºå¥½é•œåƒä»“åº“ï¼Œç‚¹è¿›å»å°±çœ‹åˆ°åŸºæœ¬ä¿¡æ¯äº†ï¼Œæ“ä½œæŒ‡å—ä¹Ÿæ˜¯å¾ˆæ˜ç¡®çš„</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.70i44y6i8nw0.webp"
alt="é•œåƒä»“åº“åŸºæœ¬ä¿¡æ¯" />
<figcaption aria-hidden="true">é•œåƒä»“åº“åŸºæœ¬ä¿¡æ¯</figcaption>
</figure>
<h2 id="æµæ°´çº¿">æµæ°´çº¿</h2>
<p><a href="https://flow.aliyun.com/">https://flow.aliyun.com/</a></p>
<p>æµæ°´çº¿çš„åˆ›å»ºå¯ä»¥é€šè¿‡æµæ°´çº¿çš„å…¥å£ä¹Ÿå¯ä»¥åœ¨ä»£ç ç®¡ç†ä¸­åˆ›å»ºï¼Œéƒ½æ˜¯ä¸€æ ·çš„</p>
<p>1ã€åˆ›å»ºæ¨¡ç‰ˆ</p>
<p>é»˜è®¤å·²ç»æä¾›äº†å¾ˆå¤šæ¨¡ç‰ˆï¼Œå¦‚æœåˆé€‚çš„è¯ç›´æ¥ä½¿ç”¨å½“ç„¶æ›´æ–¹ä¾¿ï¼Œåˆæ¬¡ä½¿ç”¨çš„è¯ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨å¿«é€Ÿé…ç½®æµæ°´çº¿æ¨¡ç‰ˆï¼Œç”¨è¿™ä¸ªæ›´èƒ½å…¨é¢äº†è§£æµæ°´çº¿å¯ä»¥åšå“ªäº›äº‹æƒ…ã€‚</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6rn3ao3k4u40.webp" alt="åˆ›å»ºæµæ°´çº¿"  /></p>
<p>2ã€é€‰æ‹©æŠ€æœ¯æ¡†æ¶</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.7avzdntdst80.webp"
alt="é€‰æ‹©æŠ€æœ¯æ¡†æ¶" />
<figcaption aria-hidden="true">é€‰æ‹©æŠ€æœ¯æ¡†æ¶</figcaption>
</figure>
<p>æˆ‘è¿™é‡Œé€‰æ‹©äº†<code>Java</code></p>
<p>3ã€æ­¥éª¤é€‰æ‹©ï¼Œæ­¥éª¤å¯ä»¥å…ˆå…ˆé€‰ç®€å•ç‚¹ï¼Œåé¢ä¹Ÿæ˜¯å¯ä»¥æ”¹çš„ï¼Œæˆ‘å°±ä¸ä¸€ä¸€è´´å›¾äº†ï¼Œç›´æ¥å¼€å§‹ç¤ºä¾‹äº†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6n9g83mzrfs0.webp"
alt="æµ‹è¯•é˜¶æ®µ" />
<figcaption aria-hidden="true">æµ‹è¯•é˜¶æ®µ</figcaption>
</figure>
<h3 id="javaæ„å»ºå¹¶å‘å¸ƒåˆ°mavenåˆ¶å“åº“">Javaæ„å»ºå¹¶å‘å¸ƒåˆ°Mavenåˆ¶å“åº“</h3>
<p>é»˜è®¤å·²ç»æŠŠåˆ¶å“åº“é…ç½®å¥½äº†ã€‚</p>
<h4 id="æ·»åŠ æµæ°´çº¿æº">æ·»åŠ æµæ°´çº¿æº</h4>
<p>è¿™é‡Œæœ‰å¾ˆå¤šä»£ç æºå¯é€‰ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<code>Codeup</code>ï¼Œç„¶åé€‰æ‹©ä»£ç ä»“åº“å’Œé»˜è®¤åˆ†æ”¯ï¼Œå¯ä»¥å¼€å¯ä»£ç æºè§¦å‘ï¼Œé€‰æ‹©ä»£ç æäº¤æˆ–æ˜¯åˆå¹¶å®Œæˆï¼Œé»˜è®¤åˆ†æ”¯æ˜¯åœ¨ä½¿ç”¨ä»£ç æºè§¦å‘æ—¶ç›´æ¥ä½¿ç”¨çš„åˆ†æ”¯ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.52d07715xow0.webp"
alt="æ·»åŠ æµæ°´çº¿æº" />
<figcaption aria-hidden="true">æ·»åŠ æµæ°´çº¿æº</figcaption>
</figure>
<h4 id="åˆ›å»ºä»»åŠ¡">åˆ›å»ºä»»åŠ¡</h4>
<p>è¿™é‡Œæœ‰å¾ˆå¤šç§ä»»åŠ¡ç»„å¯é€‰ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå¯¹äº<code>Java</code>æ„å»ºï¼Œå‘å¸ƒåˆ°<code>Maven</code>åˆ¶å“ä»“åº“é€‰ï¼Œ<code>Java</code>æ„å»ºå°±å¥½ï¼Œå…¶å®é€‰æ‹©å‘å¸ƒ<code>Maven</code>äºŒæ–¹åº“åº”è¯¥ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2yqrriem2560.webp"
alt="åˆ›å»ºä»»åŠ¡" />
<figcaption aria-hidden="true">åˆ›å»ºä»»åŠ¡</figcaption>
</figure>
<p>è®¾ç½®ä»»åŠ¡åç§°ï¼Œé€‰æ‹©æ„å»ºé›†ç¾¤ï¼Œä¸‹è½½æµæ°´çº¿æºé€‰æ‹©ï¼Œ<code>JDK</code>ã€<code>Maven</code>ç‰ˆæœ¬é€‰æ‹©ï¼Œæ„å»ºå‘½ä»¤å¦‚ä¸‹ï¼Œå…¶å®å°±æ˜¯ä¹‹å‰<code>Maven</code>åˆ¶å“ä»“åº“ï¼Œä»“åº“æŒ‡å—ä¸­æ¨é€çš„å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mvn clean install org.apache.maven.plugins:maven-deploy-plugin:2.8:deploy -DskipTests</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.695ytiicaf80.webp"
alt="ç¼–è¾‘ä»»åŠ¡" />
<figcaption aria-hidden="true">ç¼–è¾‘ä»»åŠ¡</figcaption>
</figure>
<h4 id="è¿è¡Œ">è¿è¡Œ</h4>
<p>è®¾ç½®äº†è§¦å‘ç­–ç•¥å°±ä¼šè‡ªåŠ¨è§¦å‘ï¼Œè¿™é‡Œæˆ‘ä»¬æ‰‹åŠ¨è§¦å‘è¯•ä¸€ä¸‹ï¼Œç‚¹å‡»-ä¿å­˜å¹¶è¿è¡Œå°±å¯ã€‚</p>
<h4 id="æŸ¥çœ‹æµæ°´çº¿æ—¥å¿—">æŸ¥çœ‹æµæ°´çº¿æ—¥å¿—</h4>
<p>æµæ°´çº¿æ¯ä¸ªè¿‡ç¨‹éƒ½æœ‰è¯¦ç»†æ—¥å¿—å¯æŸ¥çœ‹ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ’æŸ¥é—®é¢˜ï¼Œè¿™é‡Œå±•ç¤ºäº†æˆåŠŸæ„å»ºåçš„æˆªå›¾ï¼Œæ£€æŸ¥<code>Maven</code>åˆ¶å“ä»“åº“ä¹Ÿä¼šå‘ç°æœ‰äº†æ›´æ–°</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6aw72mff1dg0.webp"
alt="æµæ°´çº¿æ—¥å¿—" />
<figcaption aria-hidden="true">æµæ°´çº¿æ—¥å¿—</figcaption>
</figure>
<h3 id="javaé•œåƒæ„å»ºå¹¶éƒ¨ç½²">Javaé•œåƒæ„å»ºå¹¶éƒ¨ç½²</h3>
<p>å¦‚æ ‡é¢˜æ‰€è¿°ï¼Œè¿™ä¸ªæ‰æ˜¯é‡å¤´ã€‚å‰é¢æåˆ°çš„æˆ‘å°±ä¸å¤šè¯´äº†ã€‚å¦å¤–å¤šæä¸€ä¸‹ï¼Œæˆ‘è¿™ä¸ªé¡¹ç›®æ˜¯ä»¿ç…§ç€<a
href="https://gitee.com/log4j/pig">pig</a>è¿™ä¸ªå¼€æºå¾®æœåŠ¡é¡¹ç›®æ¥ç»„ç»‡çš„ï¼Œä½¿ç”¨çš„æ˜¯<code>Spring Cloud Alibaba</code>çš„é‚£ä¸€å¥—ã€‚</p>
<h4 id="pom">pom</h4>
<p>åŒæ—¶åœ¨æ ¹<code>pom.xml</code>ä¸­é…ç½®äº†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profiles.active</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">profiles.active</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">nacosNamespace</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">nacosNamespace</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- åŠ äº†è¿™ä¸ªï¼Œé»˜è®¤é€‰ä¸­ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æµ‹è¯•ç¯å¢ƒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä»¥ä¸‹å±æ€§ç”¨äº bootstrap.yml æ–‡ä»¶ä¸­ å¯é€šè¿‡ @activatedProperties@ è·å–é…ç½®çš„å˜é‡--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profiles.active</span>&gt;</span>test<span class="tag">&lt;/<span class="name">profiles.active</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">nacosNamespace</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">nacosNamespace</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç”Ÿäº§ç¯å¢ƒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>prod<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profiles.active</span>&gt;</span>prod<span class="tag">&lt;/<span class="name">profiles.active</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">nacosNamespace</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">nacosNamespace</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="application">application</h4>
<p><code>application.yml</code>é…ç½®å¦‚ä¸‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">3301</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">@artifactId@</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">$&#123;NACOS_HOST:nacos&#125;:$&#123;NACOS_PORT:8848&#125;</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">@nacosNamespace@</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">@nacos.group@</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">$&#123;spring.cloud.nacos.discovery.server-addr&#125;</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">@nacosNamespace@</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">@nacos.group@</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">import:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">optional:nacos:$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.yml</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">@profiles.active@</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">config:</span> <span class="string">classpath:log4j2-$&#123;spring.profiles.active&#125;.xml</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ç¬¦åˆå¾®æœåŠ¡éƒ¨ç½²å‰æã€‚</p>
<p>åŒæ—¶é¡¹ç›®é»˜è®¤ç¯å¢ƒæ€»æ˜¯<code>dev</code>ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ä¸åŒç¯å¢ƒï¼Œåœ¨<code>Maven</code>æ„å»ºæ—¶å¸¦ä¸Šå¦‚ä¸‹å‚æ•°å³å¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mvn package -Pdev</span><br></pre></td></tr></table></figure>
<p>å‰æå¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œå¦‚æœæœ‰æ—¶é—´æˆ‘ä¼šæŠŠè¿™ä¸ªé¡¹ç›®è¯¦ç»†è®²ä¸€è®²ï¼ˆç›®å‰è¿˜åœ¨ç©è¿™ä¸ªï¼Œè¿˜æ²¡ç»“æŸï¼‰</p>
<h4 id="dockerfile">Dockerfile</h4>
<p>æˆ‘çš„Dockerfileæ–‡ä»¶å¦‚ä¸‹ï¼Œç›®å½•å°±åœ¨é¡¹ç›®æ ¹è·¯å¾„</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> registry.cn-shanghai.aliyuncs.com/wnhyang/openjdk:<span class="number">8</span>-jre</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /home/app</span></span><br><span class="line"><span class="comment"># æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> JAR_FILE=./target/okay-shortLink-service.jar</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> <span class="variable">$&#123;JAR_FILE&#125;</span> app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">3301</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Shanghai JAVA_OPTS=<span class="string">&quot;-Xms128m -Xmx256m -Djava.security.egd=file:/dev/./urandom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;app.jar&quot;</span>,<span class="string">&quot;<span class="variable">$JAVA_OPTS</span>&quot;</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="é€‰æ‹©ä»»åŠ¡ç»„">é€‰æ‹©ä»»åŠ¡ç»„</h4>
<p>è¿™é‡Œé€‰æ‹©<code>Java</code>é•œåƒæ„å»ºï¼Œé»˜è®¤æ·»åŠ ä»»åŠ¡ç»„ï¼š<code>Java</code>æ„å»ºå’Œé•œåƒæ„å»ºå¹¶æ¨é€è‡³é˜¿é‡Œäº‘é•œåƒä»“åº“ä¸ªäººç‰ˆ</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4nyhsd04hcw0.webp"
alt="é€‰æ‹©ä»»åŠ¡ç»„" />
<figcaption aria-hidden="true">é€‰æ‹©ä»»åŠ¡ç»„</figcaption>
</figure>
<h4 id="javaæ„å»º">Javaæ„å»º</h4>
<p>è¿™ä¸ªæ”¹ä¸€ä¸‹<code>JDK</code>ã€<code>Maven</code>ç‰ˆæœ¬å°±å¥½ï¼Œæ³¨æ„âš ï¸ï¼šæˆ‘çš„<code>Dockerfile</code>ä¸­<code>ARG JAR_FILE=./target/okay-shortLink-service.jar</code>å°±æ˜¯å¯¹åº”äº†æ„å»ºç‰©çš„è·¯å¾„å’Œæ–‡ä»¶åï¼Œè¿™ä¸ªä¸€å®šè¦å¯¹åº”çš„ã€‚æ„å»ºååœ¨<code>pom</code>çš„<code>build</code>ä¸­é…ç½®ï¼Œæ„å»ºå®Œæˆéƒ½åœ¨<code>target</code>ç›®å½•ä¸‹ï¼Œ<code>Dockerfile</code>æ„å»ºé•œåƒæ—¶å°†æ„å»ºç‰©è£…è¿›<code>Docker</code>é•œåƒï¼Œå¤§æ¦‚å°±æ˜¯è¿™ä¸ªæµç¨‹ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1xmbht7gfp7k.webp"
alt="ç¼–è¾‘Javaæ„å»º" />
<figcaption aria-hidden="true">ç¼–è¾‘Javaæ„å»º</figcaption>
</figure>
<h4
id="é•œåƒæ„å»ºå¹¶æ¨é€è‡³é˜¿é‡Œäº‘é•œåƒä»“åº“ä¸ªäººç‰ˆ">é•œåƒæ„å»ºå¹¶æ¨é€è‡³é˜¿é‡Œäº‘é•œåƒä»“åº“ä¸ªäººç‰ˆ</h4>
<p>è¿™ä¸ªå¾ˆé‡è¦ï¼ŒæœåŠ¡è¿æ¥ä¸å¤šè®²äº†ï¼ŒæŒ‰ç…§æ­¥éª¤æ¥å°±å¥½ï¼Œé€‰æ‹©ä¹‹å‰é…ç½®å¥½çš„ä»“åº“ï¼Œæ³¨æ„âš ï¸ï¼šä»“åº“åè¦å’Œé¡¹ç›®ä¸€è‡´ï¼Œçœ‹ä¸€ä¸‹æˆ‘å‰é¢ä¸¾çš„<code>java</code>å®˜æ–¹é•œåƒä¾‹å­ï¼Œä¸€ä¸ªä»“åº“å°±æ˜¯ä¸€ç§é•œåƒï¼Œä¾é æ ‡ç­¾åŒºåˆ†ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ç”¨äº†é»˜è®¤çš„<code>$&#123;DATETIME&#125;</code>ä¸ºæ ‡ç­¾ï¼›<code>Dockerfile</code>è·¯å¾„ä¸€å®šè¦æ­£ç¡®ï¼Œä¸æ˜ç™½è·¯å¾„çš„ç‚¹ä¸€ä¸‹å°é—®å·ï¼Ÿä¼šæç¤º</p>
<blockquote>
<p>Dockerfileè·¯å¾„ä¸ºDockerfileæ–‡ä»¶ç›¸å¯¹äºä»£ç åº“æ ¹ç›®å½•æ‰€åœ¨è·¯å¾„ï¼Œå¦‚META/config/Dockerfileæˆ–Dockerfile</p>
</blockquote>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image-20230321165857807.4t2x0o7y6n80.webp"
alt="é•œåƒæ„å»ºå¹¶æ¨é€è‡³é˜¿é‡Œäº‘é•œåƒä»“åº“ä¸ªäººç‰ˆ" />
<figcaption
aria-hidden="true">é•œåƒæ„å»ºå¹¶æ¨é€è‡³é˜¿é‡Œäº‘é•œåƒä»“åº“ä¸ªäººç‰ˆ</figcaption>
</figure>
<p>æœ€åï¼Œä»»åŠ¡è¿˜æœ‰è¾“å‡ºï¼Œè¿™é‡Œè¾“å‡ºçš„æ˜¯é•œåƒåå’Œé•œåƒå…¬ç½‘åœ°å€å’Œé•œåƒVPCåœ°å€ï¼Œæµçº¿çº¿æ‰¿æ¥å°±ä½“ç°åœ¨è¿™ï¼Œä¸Šæ¸¸è¾“å‡ºï¼Œä¸‹æ¸¸è¾“å…¥ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4a9ad4oaw3y0.webp"
alt="ä»»åŠ¡è¾“å‡º" />
<figcaption aria-hidden="true">ä»»åŠ¡è¾“å‡º</figcaption>
</figure>
<h4 id="dockeréƒ¨ç½²">Dockeréƒ¨ç½²</h4>
<p>é€‰éƒ¨ç½²ä¸­é€‰æ‹©<code>Docker</code>éƒ¨ç½²</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3wczq0wwcjw0.webp"
alt="Dockeréƒ¨ç½²" />
<figcaption aria-hidden="true">Dockeréƒ¨ç½²</figcaption>
</figure>
<h4 id="dockeréƒ¨ç½²ç¼–è¾‘">Dockeréƒ¨ç½²ç¼–è¾‘</h4>
<p>ä¸»æœºç»„éœ€è¦è‡ªå·±é…ç½®ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„åä¸ºäº‘æœåŠ¡å™¨ï¼Œéé˜¿é‡Œäº‘ä¸»æœºè¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œä¸è¿‡ä¹Ÿå°±ä¸€ç‚¹ï¼ŒæŒ‰æ­¥éª¤æ¥å°±è¡Œï¼Œä¸å¤šæäº†ã€‚</p>
<p>æ‰§è¡Œç”¨æˆ·éœ€è¦æ³¨æ„ï¼Œæˆ‘ç›®å‰è¯•çš„ï¼Œåœ¨<code>docker</code>ç»„çš„ç”¨æˆ·ä¹Ÿæ˜¯ä¼šè¿è¡Œå¤±è´¥çš„ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ä½¿ç”¨äº†<code>root</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6aiicx8vmhg0.webp"
alt="Dockeréƒ¨ç½²ç¼–è¾‘" />
<figcaption aria-hidden="true">Dockeréƒ¨ç½²ç¼–è¾‘</figcaption>
</figure>
<p>éƒ¨ç½²è„šæœ¬å‘½ä»¤å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">éƒ¨ç½²è„šæœ¬ä¼šåœ¨éƒ¨ç½²ç»„çš„æ¯å°æœºå™¨ä¸Šæ‰§è¡Œã€‚ä¸€ä¸ªå…¸å‹Dockeréƒ¨ç½²è„šæœ¬å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç¤ºä¾‹ä¸­ä½¿ç”¨çš„<span class="variable">$image</span>æ˜¯æ‚¨åœ¨è„šæœ¬ä¸‹æ–¹çš„å˜é‡å¤„å®šä¹‰çš„å˜é‡ï¼ˆä¸Šæ¸¸è¾“å‡ºæˆ–è‡ªå®šä¹‰ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">docker run <span class="variable">$image</span></span></span><br><span class="line"></span><br><span class="line">sh /home/app/deploy.sh restart $APP_NAME $APP_NAME $port $image;</span><br></pre></td></tr></table></figure>
<p>å˜é‡å¯ä»¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œè¿™é‡Œ<code>image</code>å°±æ˜¯ä¸Šæ¸¸è¾“å‡ºã€‚å› ä¸ºæˆ‘åªæœ‰ä¸€å°æœºå™¨æ‰€ä»¥éƒ¨ç½²ç­–ç•¥ç›¸å¯¹äºæˆ‘æ²¡ç”¨ï¼Œå¦‚æœä½ æœ‰å¤šå°æœºå™¨ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸‹ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.678963ewtrk0.webp"
alt="éƒ¨ç½²é…ç½®" />
<figcaption aria-hidden="true">éƒ¨ç½²é…ç½®</figcaption>
</figure>
<h4 id="éƒ¨ç½²è„šæœ¬">éƒ¨ç½²è„šæœ¬</h4>
<p>è¿™ä¸ªè„šæœ¬å°±ä¸è¯¦ç»†è§£é‡Šäº†ï¼Œè¿™ä¸ªè¦æå‰æ”¾åœ¨ä¸»æœºç»„ä¸­ï¼Œéƒ¨ç½²å‘½ä»¤å¯¹åº”ï¼Œæ³¨æ„ä¿®æ”¹nacosåœ°å€å“¦</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">SH_NAME=$0</span><br><span class="line">ACTION=$1</span><br><span class="line">APP_NAME=$2</span><br><span class="line">APP_LOG_NAME=$3</span><br><span class="line">APP_PORT=$4</span><br><span class="line">DOCKER_URL=$5</span><br><span class="line"></span><br><span class="line">usage() &#123;</span><br><span class="line">    echo &quot;Not Support this operation: &quot;$&#123;ACTION&#125;</span><br><span class="line">    echo &quot;Usage: $&#123;SH_NAME&#125; &#123;start|stop|restart&#125; &#123;APP_NAME&#125; &#123;APP_LOG_NAME&#125; &#123;APP_PORT&#125; &#123;ENV_PROFILES&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop_app() &#123;</span><br><span class="line">    echo &#x27;stopping......&#x27;</span><br><span class="line">    # è·å–å®¹å™¨id</span><br><span class="line">    CONTAINER=`docker ps -a |grep &quot;$&#123;APP_NAME&#125;&quot; | awk &#x27;&#123;print $1&#125;&#x27;`</span><br><span class="line">    # -n å­—ç¬¦ä¸²ä¸ä¸ºç©ºè¿”å›true</span><br><span class="line">    # åˆ é™¤å®¹å™¨</span><br><span class="line">    if [[ -n &quot;$&#123;CONTAINER&#125;&quot; ]]</span><br><span class="line">        then</span><br><span class="line">        docker stop $&#123;CONTAINER&#125;</span><br><span class="line">        docker rm $&#123;CONTAINER&#125;</span><br><span class="line">        echo &quot;The container named $&#123;APP_NAME&#125; has been stopped and deleted&quot;</span><br><span class="line">    else</span><br><span class="line">      echo &quot;The container named $&#123;APP_NAME&#125; does not exist&quot;</span><br><span class="line">    fi</span><br><span class="line">    # åˆ é™¤é•œåƒ</span><br><span class="line">    if [[ -n &quot;$&#123;DOCKER_URL&#125;&quot; ]]</span><br><span class="line">        then</span><br><span class="line">        REPO_URL=`echo $&#123;DOCKER_URL%%:*&#125;`</span><br><span class="line">        TAG_NAME=`echo $&#123;DOCKER_URL##*:&#125;`</span><br><span class="line">    fi</span><br><span class="line">    if [[ -n &quot;$&#123;TAG_NAME&#125;&quot; ]]</span><br><span class="line">        then</span><br><span class="line">        IMAGE=`docker images | grep $&#123;REPO_URL&#125; | grep $&#123;TAG_NAME&#125; |awk &#x27;&#123;print $3&#125;&#x27;`</span><br><span class="line">    else</span><br><span class="line">        IMAGE=`docker images | grep $&#123;REPO_URL&#125;|awk &#x27;&#123;print $3&#125;&#x27;`</span><br><span class="line">    fi</span><br><span class="line">    if [[ -n &quot;$&#123;IMAGE&#125;&quot; ]]</span><br><span class="line">        then</span><br><span class="line">        docker rmi $&#123;IMAGE&#125;</span><br><span class="line">        echo &quot;The image named $&#123;APP_NAME&#125; has been deleted&quot;</span><br><span class="line">    else</span><br><span class="line">      echo &quot;The image named $&#123;APP_NAME&#125; does not exist&quot;</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">create_log_dir()&#123;</span><br><span class="line">    #æ—¥å¿—è·¯å¾„è¦çœŸå®å­˜åœ¨</span><br><span class="line">    log_path=&quot;/home/app/logs/&quot;$&#123;APP_LOG_NAME&#125;</span><br><span class="line">    mkdir -p $&#123;log_path&#125;</span><br><span class="line">    echo &quot;create a log path: $&#123;log_path&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start_app() &#123;</span><br><span class="line">    echo &#x27;é•œåƒç‰ˆæœ¬ï¼š&#x27;$&#123;DOCKER_URL&#125;</span><br><span class="line"></span><br><span class="line">    # è¿è¡Œå®¹å™¨</span><br><span class="line">    docker run -v /home/app/logs:/home/app/logs \</span><br><span class="line">               -p $&#123;APP_PORT&#125;:$&#123;APP_PORT&#125; \</span><br><span class="line">               --add-host nacos:ä½ çš„nacosåœ°å€ \</span><br><span class="line">               --name $&#123;APP_NAME&#125; \</span><br><span class="line">               -d $&#123;DOCKER_URL&#125;</span><br><span class="line">     CONTAINER_ID=`docker ps -a | grep -v &quot;grep&quot; | grep $&#123;APP_NAME&#125; | awk -F: &#x27;&#123;print $1&#125;&#x27; | awk  &#x27;&#123;print $1&#125;&#x27; | head -n 1`</span><br><span class="line">     if [[ -n &quot;$&#123;CONTAINER_ID&#125;&quot; ]]</span><br><span class="line">        then</span><br><span class="line">        RESULT=`docker inspect -f &#x27;&#123;&#123;.State.Running&#125;&#125;&#x27; $&#123;CONTAINER_ID&#125;`</span><br><span class="line">        if [[ $&#123;RESULT&#125; = &#x27;true&#x27; ]]</span><br><span class="line">           then</span><br><span class="line">           echo &quot;éƒ¨ç½²æˆåŠŸ&quot;</span><br><span class="line">           exit</span><br><span class="line">        fi</span><br><span class="line">     fi</span><br><span class="line">     echo &quot;éƒ¨ç½²å¤±è´¥&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">    create_log_dir</span><br><span class="line">    start_app</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">    stop_app</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case &quot;$ACTION&quot; in</span><br><span class="line">    start)</span><br><span class="line">        start</span><br><span class="line">    ;;</span><br><span class="line">    stop)</span><br><span class="line">        stop</span><br><span class="line">    ;;</span><br><span class="line">    restart)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">        usage</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<h4 id="è¿è¡Œ-1">è¿è¡Œ</h4>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6nzn46ryhg00.webp"
alt="éƒ¨ç½²å•" />
<figcaption aria-hidden="true">éƒ¨ç½²å•</figcaption>
</figure>
]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Git/GitHub</tag>
        <tag>Maven</tag>
        <tag>DevOps</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEAå¯åŠ¨SpringBooté¡¹ç›®Process finished with exit code 1</title>
    <url>/article/a541e7bd.html</url>
    <content><![CDATA[<h1 id="å¯åŠ¨é”™è¯¯æ—¥å¿—å‘¢">å¯åŠ¨é”™è¯¯æ—¥å¿—å‘¢</h1>
<p>å¦‚é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å…¶å®å¾ˆæ—©ä¹‹å‰å°±é‡åˆ°è¿‡ï¼Œæ˜¯åŒæ ·çš„æŠ¥é”™ï¼Œè™½ç„¶å¯èƒ½å…·ä½“çš„åŸå› æœ‰äº›ä¸åŒï¼Œä½†å¿˜äº†è®°å½•ï¼Œè¿™æ¬¡è¯´ä»€ä¹ˆä¹Ÿè¦è®°å½•ä¸‹æ¥é•¿ä¸ªè®°æ€§ã€‚</p>
<p>è¯´æ¥ä¹Ÿç¦»å¥‡ï¼Œé€šå¸¸åœ¨ä½¿ç”¨<code>IDEA</code>å¯åŠ¨è°ƒè¯•<code>SpringBoot</code>å°±ç®—æ˜¯å¯åŠ¨ä¸äº†ï¼Œè‡³å°‘è¿˜æœ‰ä¸€äº›æ—¥å¿—èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ’æŸ¥å‡ºæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä½†è¿™æ¬¡é‡åˆ°çš„åªæœ‰ä¸‹é¢è¿™ä¸ªï¼Œé™¤æ­¤ä¹‹å¤–ä»€ä¹ˆä»€ä¹ˆä¹Ÿæ²¡æœ‰äº†ï¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 1</span><br></pre></td></tr></table></figure>
<p>è¿™å¯ç€å®æ— ä»ä¸‹æ‰‹ï¼Œè¿˜æœ‰ä¸€ç§å¯åŠ¨å¤±è´¥é”™è¯¯å¦‚ä¸‹ï¼Œä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Connected to the target VM, address: <span class="string">&#x27;127.0.0.1:56302&#x27;</span>, transport: <span class="string">&#x27;socket&#x27;</span></span><br><span class="line">Disconnected from the target VM, address: <span class="string">&#x27;127.0.0.1:56302&#x27;</span>, transport: <span class="string">&#x27;socket&#x27;</span></span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 1</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="ç»™æˆ‘åå‡ºæ¥">ç»™æˆ‘åå‡ºæ¥</h1>
<p>å¦‚æœé‡åˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹åŸå› ï¼š</p>
<ul>
<li>ç«¯å£å ç”¨ï¼Œè¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œä¸€èˆ¬æ˜¯ä¹‹å‰å­˜ç•™çš„è¿›ç¨‹è¿˜åœ¨ï¼Œå¯¼è‡´ç«¯å£å ç”¨ï¼Œæ— æ³•å¯åŠ¨ï¼›è¿™æ—¶å¯ä»¥å°è¯•æ‰¾åˆ°å·²ç»è¢«ä½¿ç”¨çš„ç«¯å£ï¼ŒæŸ¥çœ‹è¯¥è¿›ç¨‹æ˜¯å¦å¯ä»¥ä¸ºä½ çš„è¿›ç¨‹è®©è·¯ï¼Œå¦‚æœå¯ä»¥å°±æ€æ‰å†æ¬¡å°è¯•å¯åŠ¨ï¼Œå¦‚æœæ€æ‰è¿›ç¨‹æˆ–æ˜¯æ¢äº†ç¡®è®¤æ²¡æœ‰å ç”¨çš„ç«¯å£ï¼Œè¿˜æ˜¯ä¼šå‡ºç°ä¸Šé¢çš„é”™è¯¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½æ¯”è¾ƒéº»çƒ¦äº†ã€‚</li>
<li>é…ç½®æ–‡ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸ªå°±è¦å…·ä½“åˆ†æ</li>
</ul>
<p>ä¸Šé¢è¯´äº†ä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„åŸå› ï¼Œå…¶å®ï¼Œä»…ä»…é€šè¿‡å‡ è¡Œä¸å…³é”®çš„é”™è¯¯ä¿¡æ¯æ˜¯æ— æ³•å‡†ç¡®äººåˆ¤æ–­çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®åœ¨å¯åŠ¨æ–¹æ³•ä¸ŠåŠ ä¸Šæ•è·å¼‚å¸¸çš„ï¼Œå¹¶æŠ›å‡ºï¼Œéœ€è¦æ³¨æ„è¿™é‡Œè¦<code>catch(Throwable e)</code>å“¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemServiceApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;å¼€å§‹å¯åŠ¨ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">            SpringApplication.run(SystemServiceApplication.class, args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åšçš„è¯å°±æœ‰å¾ˆæ˜ç¡®äººåŸå› æŒ‡å‘äº†ï¼Œæ²¡é”™ï¼Œæˆ‘å¯åŠ¨å¤±è´¥åŸå› å°±æ˜¯ä¸‹é¢è¿™ä¸ª</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> scanning <span class="keyword">for</span> the next token</span><br><span class="line">found character <span class="string">&#x27;@&#x27;</span> that cannot start any token. (Do not use @ <span class="keyword">for</span> indentation)</span><br><span class="line"> <span class="keyword">in</span> <span class="string">&#x27;reader&#x27;</span>, line 8, column 11:</span><br><span class="line">        name: @artifactId@</span><br><span class="line">              ^</span><br></pre></td></tr></table></figure>
<p>ä¸»è¦è¿˜æ˜¯å› ä¸ºæˆ‘æƒ³é€šè¿‡é¡¹ç›®çš„<code>pom</code>æ–‡ä»¶å»æ§åˆ¶æ•´ä½“ç¯å¢ƒï¼Œä½†æ˜¯å¿½ç•¥äº†å ä½ç¬¦æ›¿æ¢çš„é…ç½®ï¼Œè¯¦ç»†åŸå› è¯·çœ‹ä¸‹é¢è¿™ç¯‡åšå®¢ã€‚</p>
<p>https://blog.csdn.net/qq_41376740/article/details/122792411?spm=1001.2014.3001.5501</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--filteringä¸ºtrueï¼Œå¯è¿›è¡Œå ä½ç¬¦æ›¿æ¢ï¼Œåä¹‹ä¸è¡Œï¼Œä½¿ç”¨includes/excludesåŒ…å«å’Œå‰”é™¤--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--filteringä¸ºtrueï¼Œå¯è¿›è¡Œå ä½ç¬¦æ›¿æ¢ï¼Œåä¹‹ä¸è¡Œï¼Œä½¿ç”¨includes/excludesåŒ…å«å’Œå‰”é™¤--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æœ‰ç¼˜å†è§äº†</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</title>
    <url>/article/fba0a19b.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1B7411L7tE">https://www.bilibili.com/video/BV1B7411L7tE</a></p>
<span id="more"></span>
<h1 id="å¤šçº¿ç¨‹è¿›é˜¶jucå¹¶å‘ç¼–ç¨‹">å¤šçº¿ç¨‹è¿›é˜¶=&gt;JUCå¹¶å‘ç¼–ç¨‹</h1>
<p>JDKä¸‹çš„</p>
<ul>
<li>java.util.concurrent</li>
<li>java.util.concurrent.atomic</li>
<li>java.util.concurrent.locks</li>
<li>java.util.fuction</li>
</ul>
<h2 id="å›é¡¾å¤šçº¿ç¨‹">å›é¡¾å¤šçº¿ç¨‹</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å¾—CPUæ ¸æ•°</span></span><br><span class="line">        System.out.println(Runtime.getRuntime().availableProcessors());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çº¿ç¨‹çŠ¶æ€">çº¿ç¨‹çŠ¶æ€</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a thread which has not yet started.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    NEW,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a runnable thread.  A thread in the runnable</span></span><br><span class="line"><span class="comment">     * state is executing in the Java virtual machine but it may</span></span><br><span class="line"><span class="comment">     * be waiting for other resources from the operating system</span></span><br><span class="line"><span class="comment">     * such as processor.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RUNNABLE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a thread blocked waiting for a monitor lock.</span></span><br><span class="line"><span class="comment">     * A thread in the blocked state is waiting for a monitor lock</span></span><br><span class="line"><span class="comment">     * to enter a synchronized block/method or</span></span><br><span class="line"><span class="comment">     * reenter a synchronized block/method after calling</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> Object#wait() Object.wait&#125;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BLOCKED,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a waiting thread.</span></span><br><span class="line"><span class="comment">     * A thread is in the waiting state due to calling one of the</span></span><br><span class="line"><span class="comment">     * following methods:</span></span><br><span class="line"><span class="comment">     * &lt;ul&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> Object#wait() Object.wait&#125; with no timeout&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> #join() Thread.join&#125; with no timeout&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> LockSupport#park() LockSupport.park&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;A thread in the waiting state is waiting for another thread to</span></span><br><span class="line"><span class="comment">     * perform a particular action.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * For example, a thread that has called &lt;tt&gt;Object.wait()&lt;/tt&gt;</span></span><br><span class="line"><span class="comment">     * on an object is waiting for another thread to call</span></span><br><span class="line"><span class="comment">     * &lt;tt&gt;Object.notify()&lt;/tt&gt; or &lt;tt&gt;Object.notifyAll()&lt;/tt&gt; on</span></span><br><span class="line"><span class="comment">     * that object. A thread that has called &lt;tt&gt;Thread.join()&lt;/tt&gt;</span></span><br><span class="line"><span class="comment">     * is waiting for a specified thread to terminate.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    WAITING,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a waiting thread with a specified waiting time.</span></span><br><span class="line"><span class="comment">     * A thread is in the timed waiting state due to calling one of</span></span><br><span class="line"><span class="comment">     * the following methods with a specified positive waiting time:</span></span><br><span class="line"><span class="comment">     * &lt;ul&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> #sleep Thread.sleep&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> Object#wait(long) Object.wait&#125; with timeout&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> #join(long) Thread.join&#125; with timeout&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> LockSupport#parkNanos LockSupport.parkNanos&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     *   &lt;li&gt;&#123;<span class="doctag">@link</span> LockSupport#parkUntil LockSupport.parkUntil&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TIMED_WAITING,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a terminated thread.</span></span><br><span class="line"><span class="comment">     * The thread has completed execution.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TERMINATED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸­æ–‡å¯¹åº”</p>
<table>
<thead>
<tr class="header">
<th>Enum Constant and Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>BLOCKED</code> ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€é˜»å¡ç­‰å¾…ç›‘è§†å™¨é”å®šã€‚</td>
</tr>
<tr class="even">
<td><code>NEW</code> çº¿ç¨‹å°šæœªå¯åŠ¨çš„çº¿ç¨‹çŠ¶æ€ã€‚</td>
</tr>
<tr class="odd">
<td><code>RUNNABLE</code> å¯è¿è¡Œçº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚</td>
</tr>
<tr class="even">
<td><code>TERMINATED</code> ç»ˆæ­¢çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚</td>
</tr>
<tr class="odd">
<td><code>TIMED_WAITING</code>
å…·æœ‰æŒ‡å®šç­‰å¾…æ—¶é—´çš„ç­‰å¾…çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚</td>
</tr>
<tr class="even">
<td><code>WAITING</code> ç­‰å¾…çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€</td>
</tr>
</tbody>
</table>
<h2 id="locké”">Locké”</h2>
<blockquote>
<p>ä¼ ç»Ÿçš„synchronized</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Ticket ticket=<span class="keyword">new</span> <span class="title class_">Ticket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) &#123;</span><br><span class="line">                ticket.sale();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) &#123;</span><br><span class="line">                ticket.sale();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) &#123;</span><br><span class="line">                ticket.sale();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;C&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> number=<span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">sale</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(number&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            number--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å½“å‰ç¥¨æ•°&quot;</span>+number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Lockæ¥å£</p>
</blockquote>
<ul>
<li><p>éšç€è¿™ç§å¢åŠ çš„çµæ´»æ€§ï¼Œé¢å¤–çš„è´£ä»»ã€‚
æ²¡æœ‰å—ç»“æ„åŒ–é”å®šä¼šåˆ é™¤ä½¿ç”¨<code>synchronized</code>æ–¹æ³•å’Œè¯­å¥å‘ç”Ÿçš„é”çš„è‡ªåŠ¨é‡Šæ”¾ã€‚
åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ä½¿ç”¨ä»¥ä¸‹æƒ¯ç”¨è¯­ï¼š</p>
<p>Lock l = ...; l.lock(); try { // access the resource protected by
this lock } finally { l.unlock(); }</p>
<p>å½“åœ¨ä¸åŒèŒƒå›´å†…å‘ç”Ÿé”å®šå’Œè§£é”æ—¶ï¼Œå¿…é¡»æ³¨æ„ç¡®ä¿åœ¨é”å®šæ—¶æ‰§è¡Œçš„æ‰€æœ‰ä»£ç ç”±try-finallyæˆ–try-catchä¿æŠ¤ï¼Œä»¥ç¡®ä¿åœ¨å¿…è¦æ—¶é‡Šæ”¾é”å®šã€‚</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Ticket2 ticket2=<span class="keyword">new</span> <span class="title class_">Ticket2</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123; <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) ticket2.sale();&#125;, <span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123; <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) ticket2.sale();&#125;, <span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123; <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) ticket2.sale();&#125;, <span class="string">&quot;C&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    <span class="comment">//1.new ReentrantLock();</span></span><br><span class="line">    <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sale</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//2.lock();</span></span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                number--;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å½“å‰ç¥¨æ•°&quot;</span> + number);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//3.unlock();</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>synchronized ä¸ lock åŒºåˆ«</p>
</blockquote>
<ol type="1">
<li>Synchronized å†…ç½®çš„Jvaå…³é”®å­—ï¼Œ Lock æ˜¯ä¸€ä¸ªJavaç±»</li>
<li>Synchronized æ— æ³•åˆ¤æ–­è·å–é”çš„çŠ¶æ€ï¼ŒLockå¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°äº†é”</li>
<li>Synchronized
ä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼Œlockå¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾é”!å¦‚æœä¸é‡Šæ”¾é”ï¼Œæ­»é”</li>
<li>Synchronized çº¿ç¨‹1(è·å¾—é”,é˜³å¡).çº¿ç¨‹2 (ç­‰å¾…,ä½¿ä½¿çš„ç­‰)
ï¼›Locké”å°±ä¸ä¸€å®šä¼šç­‰å¾…ä¸‹å»ï¼›</li>
<li>Synchronizedå¯é‡å…¥é”
ï¼Œä¸å¯ä»¥ä¸­æ–­çš„ï¼Œéå…¬å¹³ï¼›Lockï¼Œå¯é‡å…¥é”,å¯ä»¥åˆ¤æ–­é”,éå…¬å¹³(å¯ä»¥è‡ªå·±è®¾ç½®)
ï¼›</li>
<li>Synchronied é€‚åˆé”å°‘é‡çš„ä»£ç åŒæ­¥é—®é¢˜
ï¼ŒLocké€‚åˆé”å¤§é‡çš„åŒæ­¥ä»£ç ï¼</li>
</ol>
<blockquote>
<p>é”æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•åˆ¤æ–­é”çš„æ˜¯è°ï¼Ÿ</p>
</blockquote>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</title>
    <url>/article/2a621ad2.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1B7411L7tE">https://www.bilibili.com/video/BV1B7411L7tE</a></p>
<span id="more"></span>
<h2 id="å¸¸ç”¨è¾…åŠ©ç±»å¿…ä¼š">å¸¸ç”¨è¾…åŠ©ç±»ï¼ˆå¿…ä¼šï¼‰</h2>
<h3 id="countdownlatch">CountDownLatch</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¡æ•°å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCountDownLatch</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">// æ€»æ•°6</span></span><br><span class="line">        <span class="type">CountDownLatch</span> <span class="variable">countDownLatch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">6</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot; Go out&quot;</span>);</span><br><span class="line">                countDownLatch.countDown();<span class="comment">// æ•°é‡-1</span></span><br><span class="line">            &#125;,String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">        countDownLatch.await();<span class="comment">// ç­‰å¾…è®¡æ•°å™¨å½’é›¶ï¼Œå†å‘ä¸‹æ‰§è¡Œ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Close the Door&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åŸç†ï¼š</strong></p>
<p>countDownLatch.countDown();// æ•°é‡-1</p>
<p>countDownLatch.await();// ç­‰å¾…è®¡æ•°å™¨å½’é›¶ï¼Œå†å‘ä¸‹æ‰§è¡Œ</p>
<p>æ¯æ¬¡æœ‰çº¿ç¨‹è°ƒç”¨countDown()æ•°é‡-1.å‡è®¾è®¡æ•°å™¨å˜ä¸º0ï¼ŒcountDownLatch.await()å°±ä¼šè¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œï¼</p>
<h3 id="cyclicbarrier">CyclicBarrier</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ æ³•è®¡æ•°å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCyclicBarrier</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        CyclicBarrier cyclicBarrier=<span class="keyword">new</span> <span class="title class_">CyclicBarrier</span>(<span class="number">7</span>,()-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¬å”¤ç¥é¾™ï¼&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">7</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> temp=i;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;æ”¶é›†äº†&quot;</span>+temp+<span class="string">&quot;ä¸ªé¾™ç &quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    cyclicBarrier.await();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (BrokenBarrierException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="semaphore">Semaphore</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSemaphore</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">6</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    semaphore.acquire();<span class="comment">// è·å¾—</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æŠ¢åˆ°è½¦ä½&quot;</span>);</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;ç¦»å¼€è½¦ä½&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    semaphore.release();<span class="comment">// é‡Šæ”¾</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åŸç†ï¼š</strong></p>
<p>semaphore.acquire();//
è·å¾—ï¼ŒåŠ å…¥å·²ç»æ»¡äº†ï¼Œç­‰å¾…ï¼Œç­‰å¾…åˆ°è¢«é‡Šæ”¾ä¸ºæ­¢ï¼</p>
<p>semaphore.release();//
é‡Šæ”¾ï¼Œä¼šå°†å½“å‰ä¿¡å·é‡+1ï¼Œç„¶åå”¤é†’ç­‰å¾…çš„çº¿ç¨‹ï¼</p>
<p>ä½œç”¨ï¼šå¤šä¸ªå…±äº«èµ„æºäº’æ–¥çš„ä½¿ç”¨ï¼å¹¶å‘é™æµï¼Œæ§åˆ¶æœ€å¤§çš„çº¿ç¨‹æ•°ï¼</p>
<h2 id="è¯»å†™é”">è¯»å†™é”</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestReadWriteLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç‹¬å é”ï¼ˆå†™é”ï¼‰</span></span><br><span class="line"><span class="comment">         * å…±äº«é”ï¼ˆè¯»é”ï¼‰</span></span><br><span class="line"><span class="comment">         * ReadWriteLock</span></span><br><span class="line"><span class="comment">         * è¯»-è¯»ï¼šå¯ä»¥å…±å­˜</span></span><br><span class="line"><span class="comment">         * è¯»-å†™ï¼šä¸å¯å…±å­˜</span></span><br><span class="line"><span class="comment">         * å†™+å†™ï¼šä¸å¯å…±å­˜</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// MyCache myCache = new MyCache();</span></span><br><span class="line">        MyCacheLock myCache=<span class="keyword">new</span> <span class="title class_">MyCacheLock</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å†™å…¥</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                myCache.put(temp + <span class="string">&quot;&quot;</span>, temp + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;, String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¯»å‡º</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                myCache.get(temp + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;, String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰ç¼“å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCache</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å†™å…¥&quot;</span> + key);</span><br><span class="line">        map.put(key, value);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å†™å…¥OK&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;è¯»å‡º&quot;</span> + key);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;è¯»å‡ºOK&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * åŠ é”</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCacheLock</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReadWriteLock</span> <span class="variable">readWriteLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        readWriteLock.writeLock().lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å†™å…¥&quot;</span> + key);</span><br><span class="line">            map.put(key, value);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å†™å…¥OK&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            readWriteLock.writeLock().unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        readWriteLock.readLock().lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;è¯»å‡º&quot;</span> + key);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;è¯»å‡ºOK&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            readWriteLock.readLock().unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é˜»å¡é˜Ÿåˆ—blockingqueue">é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰</h2>
<p>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ä½¿ç”¨<strong>é˜»å¡é˜Ÿåˆ—</strong>ï¼Œå¤šçº¿ç¨‹å¹¶å‘å¤„ç†ï¼Œçº¿ç¨‹æ± ï¼</p>
<p><strong>å­¦ä¼šä½¿ç”¨é˜Ÿåˆ—</strong></p>
<p>æ·»åŠ ã€ç§»é™¤</p>
<p><strong>å››ç»„API</strong></p>
<table>
<thead>
<tr class="header">
<th>æ–¹å¼</th>
<th>æŠ›å‡ºå¼‚å¸¸</th>
<th>æœ‰è¿”å›å€¼</th>
<th>é˜»å¡ç­‰å¾…</th>
<th>è¶…æ—¶ç­‰å¾…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>æ·»åŠ </td>
<td>add()</td>
<td>offer()</td>
<td>put()</td>
<td>offer(,,)</td>
</tr>
<tr class="even">
<td>ç§»é™¤</td>
<td>remove()</td>
<td>poll()</td>
<td>take()</td>
<td>poll(,)</td>
</tr>
<tr class="odd">
<td>æ£€æµ‹é˜Ÿé¦–å…ƒç´ </td>
<td>element()</td>
<td>peek()</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>æŠ›å‡ºå¼‚å¸¸</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—å¤§å°</span></span><br><span class="line">    <span class="type">ArrayBlockingQueue</span> <span class="variable">arrayBlockingQueue</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">    System.out.println(arrayBlockingQueue.add(<span class="string">&quot;a&quot;</span>));</span><br><span class="line">    System.out.println(arrayBlockingQueue.add(<span class="string">&quot;b&quot;</span>));</span><br><span class="line">    System.out.println(arrayBlockingQueue.add(<span class="string">&quot;c&quot;</span>));</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=====&quot;</span>);</span><br><span class="line">    <span class="comment">// æŸ¥çœ‹é˜Ÿé¦–</span></span><br><span class="line">    System.out.println(arrayBlockingQueue.element());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// java.lang.IllegalStateException: Queue full æŠ›å‡ºå¼‚å¸¸ï¼Œé˜Ÿåˆ—å·²æ»¡</span></span><br><span class="line">    <span class="comment">// System.out.println(arrayBlockingQueue.add(&quot;d&quot;));</span></span><br><span class="line"></span><br><span class="line">    System.out.println(arrayBlockingQueue.remove());</span><br><span class="line">    System.out.println(arrayBlockingQueue.remove());</span><br><span class="line">    System.out.println(arrayBlockingQueue.remove());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// java.util.NoSuchElementException æŠ›å‡ºå¼‚å¸¸ï¼Œé˜Ÿåˆ—å·²æ»¡</span></span><br><span class="line">    <span class="comment">//System.out.println(arrayBlockingQueue.remove());</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ‰è¿”å›å€¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ‰è¿”å›å€¼æ²¡æœ‰å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    ArrayBlockingQueue arrayBlockingQueue=<span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;a&quot;</span>));</span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;b&quot;</span>));</span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;c&quot;</span>));</span><br><span class="line">    <span class="comment">// false</span></span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;d&quot;</span>));</span><br><span class="line"></span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">    <span class="comment">// null</span></span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é˜»å¡ç­‰å¾…</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç­‰å¾…ï¼Œé˜»å¡ï¼ˆä¸€ç›´é˜»å¡ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    ArrayBlockingQueue arrayBlockingQueue=<span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    arrayBlockingQueue.put(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    arrayBlockingQueue.put(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    arrayBlockingQueue.put(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=====&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…ï¼Œä¸€ç›´é˜»å¡</span></span><br><span class="line">    <span class="comment">//arrayBlockingQueue.put(&quot;d&quot;);</span></span><br><span class="line"></span><br><span class="line">    System.out.println(arrayBlockingQueue.take());</span><br><span class="line">    System.out.println(arrayBlockingQueue.take());</span><br><span class="line">    System.out.println(arrayBlockingQueue.take());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…ï¼Œä¸€ç›´é˜»å¡</span></span><br><span class="line">    System.out.println(arrayBlockingQueue.take());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¶…æ—¶ç­‰å¾…</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¶…æ—¶ç­‰å¾…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    ArrayBlockingQueue arrayBlockingQueue=<span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;a&quot;</span>));</span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;b&quot;</span>));</span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;c&quot;</span>));</span><br><span class="line">    <span class="comment">// false,ç­‰å¾…2ç§’é€€å‡º</span></span><br><span class="line">    System.out.println(arrayBlockingQueue.offer(<span class="string">&quot;d&quot;</span>,<span class="number">2</span>, TimeUnit.SECONDS));</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=====&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">    System.out.println(arrayBlockingQueue.poll());</span><br><span class="line">    <span class="comment">// null</span></span><br><span class="line">    System.out.println(arrayBlockingQueue.poll(<span class="number">2</span>,TimeUnit.SECONDS));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>SynchronousQueue åŒæ­¥é˜Ÿåˆ—</p>
</blockquote>
<p>æ²¡æœ‰å®¹é‡ï¼Œè¿›å»ä¸€ä¸ªå…ƒç´ ï¼Œå¿…é¡»ç­‰å¾…å–å‡ºåï¼Œæ‰èƒ½å†å­˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SynchronousQueueDemo</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŒæ­¥é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     * put()å…ƒç´ ï¼Œå¿…é¡»å–å‡ºtake()ï¼Œæ‰èƒ½å†æ¬¡put()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        BlockingQueue&lt;String&gt; blockingQueue = <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot; put 1&quot;</span>);</span><br><span class="line">                blockingQueue.put(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot; put 2&quot;</span>);</span><br><span class="line">                blockingQueue.put(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot; put 3&quot;</span>);</span><br><span class="line">                blockingQueue.put(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,<span class="string">&quot;T1&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+blockingQueue.take());</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+blockingQueue.take());</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+blockingQueue.take());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;T2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çº¿ç¨‹æ± é‡ç‚¹">çº¿ç¨‹æ± ï¼ˆé‡ç‚¹ï¼‰</h2>
<blockquote>
<p>æ± åŒ–æŠ€æœ¯</p>
</blockquote>
<p>ç¨‹åºè¿è¡Œçš„æœ¬è´¨ï¼šå ç”¨ç³»ç»Ÿèµ„æºï¼ä¼˜åŒ–èµ„æºçš„ä½¿ç”¨ =&gt; æ± åŒ–æŠ€æœ¯</p>
<p><strong>å¥½å¤„ï¼š</strong></p>
<ol type="1">
<li>é™ä½èµ„æºæ¶ˆè€—</li>
<li>æé«˜å“åº”é€Ÿåº¦</li>
<li>æ–¹ä¾¿ç®¡ç†</li>
</ol>
<p><strong>çº¿ç¨‹å¤ç”¨ï¼Œå¯ä»¥æ§åˆ¶æœ€å¤§å¹¶å‘æ•°ï¼Œç®¡ç†çº¿ç¨‹</strong></p>
<blockquote>
<p>çº¿ç¨‹æ± ä¸‰å¤§æ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ExecutorService threadPool = Executors.newSingleThreadExecutor();// å•ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="comment">// ExecutorService threadPool = Executors.newFixedThreadPool(5);// å›ºå®š</span></span><br><span class="line">         <span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> Executors.newCachedThreadPool();<span class="comment">// å¯å˜çš„</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">                threadPool.execute(() -&gt; &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot; ok&quot;</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;java</span><br><span class="line">            threadPool.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ƒå¤§å‚æ•°</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newSingleThreadExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FinalizableDelegatedExecutorService</span></span><br><span class="line">        (<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;()));java</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newFixedThreadPool</span><span class="params">(<span class="type">int</span> nThreads)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(nThreads, nThreads,</span><br><span class="line">                                  <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newCachedThreadPool</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">0</span>, Integer.MAX_VALUE,</span><br><span class="line">                                  <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœ¬è´¨newCachedThreadPool()</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(<span class="type">int</span> corePoolSize,	// æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°</span></span><br><span class="line"><span class="params">                              <span class="type">int</span> maximumPoolSize, // æœ€å¤§æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°</span></span><br><span class="line"><span class="params">                              <span class="type">long</span> keepAliveTime, // è¶…æ—¶äº†æ²¡æœ‰äººè°ƒç”¨å°±ä¼šé‡Šæ”¾</span></span><br><span class="line"><span class="params">                              TimeUnit unit, // è¶…æ—¶å•ä½</span></span><br><span class="line"><span class="params">                              BlockingQueue&lt;Runnable&gt; workQueue, //	é˜»å¡é˜Ÿåˆ—</span></span><br><span class="line"><span class="params">                              ThreadFactory threadFactory, // çº¿ç¨‹å·¥å‚ï¼Œåˆ›å»ºçº¿ç¨‹çš„ï¼Œä¸€èˆ¬ä¸åŠ¨</span></span><br><span class="line"><span class="params">                              RejectedExecutionHandler handler)</span> <span class="comment">// æ‹’ç»ç­–ç•¥ &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (corePoolSize &lt; <span class="number">0</span> ||</span><br><span class="line">            maximumPoolSize &lt;= <span class="number">0</span> ||</span><br><span class="line">            maximumPoolSize &lt; corePoolSize ||</span><br><span class="line">            keepAliveTime &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">        <span class="keyword">if</span> (workQueue == <span class="literal">null</span> || threadFactory == <span class="literal">null</span> || handler == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">        <span class="built_in">this</span>.acc = System.getSecurityManager() == <span class="literal">null</span> ?</span><br><span class="line">                <span class="literal">null</span> :</span><br><span class="line">                AccessController.getContext();</span><br><span class="line">        <span class="built_in">this</span>.corePoolSize = corePoolSize;</span><br><span class="line">        <span class="built_in">this</span>.maximumPoolSize = maximumPoolSize;</span><br><span class="line">        <span class="built_in">this</span>.workQueue = workQueue;</span><br><span class="line">        <span class="built_in">this</span>.keepAliveTime = unit.toNanos(keepAliveTime);</span><br><span class="line">        <span class="built_in">this</span>.threadFactory = threadFactory;</span><br><span class="line">        <span class="built_in">this</span>.handler = handler;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ±  + å››ç§æ‹’ç»ç­–ç•¥</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å››ç§æ‹’ç»ç­–ç•¥</span></span><br><span class="line"><span class="comment">         * new ThreadPoolExecutor.AbortPolicy()ï¼šé“¶è¡Œæ»¡äº†ï¼Œè¿˜æœ‰äººæ¥ï¼Œä¸å¤„ç†ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">         * new ThreadPoolExecutor.CallerRunsPolicy()ï¼šå“ªæ¥çš„å»å“ªé‡Œ</span></span><br><span class="line"><span class="comment">         * new ThreadPoolExecutor.DiscardPolicy()ï¼šé˜Ÿåˆ—æ»¡äº†ï¼Œä¸¢åˆ°ä»»åŠ¡ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">         * new ThreadPoolExecutor.DiscardOldestPolicy()ï¼šé˜Ÿåˆ—æ»¡äº†ï¼Œä¸¢å¼ƒæœ€æ—§çš„ï¼Œé‡è¯•ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">                <span class="number">2</span>,</span><br><span class="line">                <span class="number">5</span>,</span><br><span class="line">                <span class="number">3</span>,</span><br><span class="line">                TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="number">3</span>),</span><br><span class="line">                Executors.defaultThreadFactory(),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardOldestPolicy());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æœ€å¤§æ‰¿è½½ = æœ€å¤§çº¿ç¨‹æ•° + é˜Ÿåˆ—å¤§å°</span></span><br><span class="line">            <span class="comment">// è¶…å‡º java.util.concurrent.RejectedExecutionException</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++) &#123;</span><br><span class="line">                threadPool.execute(() -&gt; &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot; ok&quot;</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            threadPool.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å°ç»“</p>
</blockquote>
<p>äº†è§£ CPUå¯†é›†å‹ï¼ŒIOå¯†é›†å‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æœ€å¤§çº¿ç¨‹åˆ°åº•è¯¥å¦‚ä½•å®šä¹‰</span></span><br><span class="line"><span class="comment">         * 1.CPU å¯†é›†å‹ å‡ æ ¸ï¼Œå°±æ˜¯å‡ ï¼Œå¯ä»¥ä¿æŒCPUçš„æ•ˆç‡æœ€é«˜ï¼</span></span><br><span class="line"><span class="comment">         * 2.IO å¯†é›†å‹ &gt;åˆ¤æ–­ç¨‹åºä¸­ååˆ†è€—IOçš„çº¿ç¨‹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        System.out.println(Runtime.getRuntime().availableProcessors());</span><br><span class="line"></span><br><span class="line">   	&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</title>
    <url>/article/54913af9.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1B7411L7tE">https://www.bilibili.com/video/BV1B7411L7tE</a></p>
<span id="more"></span>
<h2 id="ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜">ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</h2>
<p>é¢è¯•ï¼šå•ä¾‹æ¨¡å¼ï¼Œæ’åºç®—æ³•ï¼Œç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ­»é”</p>
<blockquote>
<p>ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ Synchronized</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Data data=<span class="keyword">new</span> <span class="title class_">Data</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.increment();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.decrement();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> number=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">if</span> (number!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.wait();</span><br><span class="line">        &#125;</span><br><span class="line">        number++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span>  <span class="keyword">void</span> <span class="title function_">decrement</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">if</span>(number==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.wait();</span><br><span class="line">        &#125;</span><br><span class="line">        number--;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é—®é¢˜å­˜åœ¨ï¼ŒAï¼ŒBï¼ŒCï¼ŒDï¼Œ4ä¸ªçº¿ç¨‹ï¼è™šå‡å”¤é†’</p>
</blockquote>
<p><strong>ifæ”¹ä¸ºwhile</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Data data=<span class="keyword">new</span> <span class="title class_">Data</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.increment();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.decrement();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.increment();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;C&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.decrement();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;D&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> number=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">while</span> (number!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.wait();</span><br><span class="line">        &#125;</span><br><span class="line">        number++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span>  <span class="keyword">void</span> <span class="title function_">decrement</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">while</span> (number==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.wait();</span><br><span class="line">        &#125;</span><br><span class="line">        number--;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>JUCç‰ˆçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</p>
</blockquote>
<p>é€šè¿‡Lockæ‰¾åˆ°Condition</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Data2</span> <span class="variable">data</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Data2</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.increment();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.decrement();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.increment();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;C&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    data.decrement();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;D&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="comment">// condition.await();</span></span><br><span class="line">    <span class="comment">// condition.signalAll();</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (number != <span class="number">0</span>) &#123;</span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number++;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;=&gt;&quot;</span> + number);</span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">decrement</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (number == <span class="number">0</span>) &#123;</span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;=&gt;&quot;</span> + number);</span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Condition ç²¾å‡†çš„é€šçŸ¥å’Œå”¤é†’çº¿ç¨‹</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Data3</span> <span class="variable">data</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Data3</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                data.printfA();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                data.printfB();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                data.printfC();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;C&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data3</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition1</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition2</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition3</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printfA</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (number != <span class="number">1</span>) &#123;</span><br><span class="line">                condition1.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number=<span class="number">2</span>;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;=&gt;AAAAA&quot;</span>);</span><br><span class="line">            condition2.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printfB</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (number != <span class="number">2</span>) &#123;</span><br><span class="line">                condition2.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number=<span class="number">3</span>;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;=&gt;BBBBB&quot;</span>);</span><br><span class="line">            condition3.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printfC</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (number != <span class="number">3</span>) &#123;</span><br><span class="line">                condition3.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number=<span class="number">1</span>;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;=&gt;CCCCC&quot;</span>);</span><br><span class="line">            condition1.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¹¶å‘ä¸‹é›†åˆä¸å®‰å…¨">å¹¶å‘ä¸‹é›†åˆä¸å®‰å…¨</h2>
<p>java.util.ConcurrentModificationException å¹¶å‘ä¿®æ”¹å¼‚å¸¸</p>
<blockquote>
<p>List ä¸å®‰å…¨</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; list= <span class="keyword">new</span> <span class="title class_">CopyOnWriteArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å¹¶å‘ä¸‹ArrayListä¸å®‰å…¨ï¼Œsynchronized</span></span><br><span class="line"><span class="comment">         * 1.Vector&lt;&gt;()</span></span><br><span class="line"><span class="comment">         * 2.Collections.synchronizedList(new ArrayList&lt;&gt;())</span></span><br><span class="line"><span class="comment">         * 3.new CopyOnWriteArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                list.add(UUID.randomUUID().toString().substring(<span class="number">0</span>,<span class="number">5</span>));</span><br><span class="line">                System.out.println(list);</span><br><span class="line">            &#125;,String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Set ä¸å®‰å…¨</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; set =<span class="keyword">new</span> <span class="title class_">CopyOnWriteArraySet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 1.Collections.synchronizedSet(new HashSet&lt;&gt;());</span></span><br><span class="line"><span class="comment">         * 2.new CopyOnWriteArraySet&lt;&gt;();</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                set.add(UUID.randomUUID().toString().substring(<span class="number">0</span>,<span class="number">5</span>));</span><br><span class="line">                System.out.println(set);</span><br><span class="line">            &#125;,String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Hashsetåº•å±‚HashMap</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">()</span> &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> map.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Map ä¸å®‰å…¨</p>
</blockquote>
<p>å›é¡¾MapåŸºæœ¬æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The default initial capacity - MUST be a power of two.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The maximum capacity, used if a higher value is implicitly specified</span></span><br><span class="line"><span class="comment"> * by either of the constructors with arguments.</span></span><br><span class="line"><span class="comment"> * MUST be a power of two &lt;= 1&lt;&lt;30.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAXIMUM_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The load factor used when none specified in constructor.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMap</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * mapè¿™æ ·ç”¨çš„å—ï¼Ÿ ä¸æ˜¯ï¼Œå·¥ä½œä¸­ä¸ç”¨ HashMap</span></span><br><span class="line"><span class="comment">         * é»˜è®¤ç­‰ä»·äºä»€ä¹ˆï¼Ÿ new HashMap&lt;&gt;(16,0.75);</span></span><br><span class="line"><span class="comment">         * åŠ è½½å› å­ï¼Œåˆå§‹å®¹é‡</span></span><br><span class="line"><span class="comment">         * 1.Collections.synchronizedMap(new HashMap&lt;&gt;());</span></span><br><span class="line"><span class="comment">         * 2.new ConcurrentHashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        Map&lt;String,Object&gt; map= <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                map.put(Thread.currentThread().getName(), UUID.randomUUID().toString().substring(<span class="number">0</span>,<span class="number">5</span>));</span><br><span class="line">                System.out.println(map);</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="callable">Callable</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCallable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * new Thread(new Runable()).start();</span></span><br><span class="line"><span class="comment">         * new Thread(new FutureTask&lt;V&gt;()).start();</span></span><br><span class="line"><span class="comment">         * new Thread(new FutureTask&lt;V&gt;(Callable )).start();</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        MyThread myThread=<span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        FutureTask futureTask=<span class="keyword">new</span> <span class="title class_">FutureTask</span>(myThread);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(futureTask,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">o</span> <span class="operator">=</span> (Integer) futureTask.get();<span class="comment">//å¯èƒ½äº§ç”Ÿé˜»å¡</span></span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Call&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1024</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»†èŠ‚ï¼š</strong></p>
<ol type="1">
<li>æœ‰ç¼“å­˜</li>
<li>ç»“æœå¯èƒ½éœ€è¦ç­‰å¾…ï¼Œä¼šé˜»å¡ï¼</li>
</ol>
<h2 id="section"></h2>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>JUCå¹¶å‘ç¼–ç¨‹(äº”)</title>
    <url>/article/d68aa2a0.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1B7411L7tE">https://www.bilibili.com/video/BV1B7411L7tE</a></p>
<span id="more"></span>
<h2 id="å½»åº•ç©è½¬å•ä¾‹æ¨¡å¼">å½»åº•ç©è½¬å•ä¾‹æ¨¡å¼</h2>
<blockquote>
<p>é¥¿æ±‰å¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hungry</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµªè´¹ç©ºé—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] data1=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] data2=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] data3=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] data4=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Hungry</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Hungry HUNGRY=<span class="keyword">new</span> <span class="title class_">Hungry</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Hungry <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> HUNGRY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DCLæ‡’æ±‰å¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * é“é«˜ä¸€å°ºé­”é«˜ä¸€ä¸ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazyMan</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazyMan</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (LazyMan.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag == <span class="literal">false</span>) &#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ä¸è¦è¯•å›¾åˆ©ç”¨åå°„ç ´åå¼‚å¸¸&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> LazyMan lazyMan;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazyMan <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åŒé‡æ£€æµ‹é”æ¨¡å¼çš„ æ‡’æ±‰å¼å•ä¾‹ DCLæ‡’æ±‰å¼</span></span><br><span class="line">        <span class="keyword">if</span> (lazyMan == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LazyMan.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (lazyMan == <span class="literal">null</span>) &#123;</span><br><span class="line">                    lazyMan = <span class="keyword">new</span> <span class="title class_">LazyMan</span>();</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     *  ä¸æ˜¯åŸå­æ€§æ“ä½œ</span></span><br><span class="line"><span class="comment">                     *  1ã€åˆ†é…å†…å­˜ç©ºé—´</span></span><br><span class="line"><span class="comment">                     *  2ã€æ‰§è¡Œæ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="comment">                     *  3ã€æŠŠè¿™ä¸ªå¯¹è±¡æŒ‡å‘è¿™ä¸ªç©ºé—´</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> lazyMan;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123;</span><br><span class="line">        <span class="comment">// å¤šçº¿ç¨‹å¹¶å‘</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; 10; i++) &#123;</span></span><br><span class="line">        <span class="comment">//     new Thread(() -&gt; &#123;</span></span><br><span class="line">        <span class="comment">//         LazyMan.getInstance();</span></span><br><span class="line">        <span class="comment">//     &#125;).start();</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åå°„</span></span><br><span class="line">        <span class="comment">// LazyMan instance1=LazyMan.getInstance();</span></span><br><span class="line">        Constructor&lt;LazyMan&gt; declaredConstructor = LazyMan.class.getDeclaredConstructor(<span class="literal">null</span>);</span><br><span class="line">        declaredConstructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">LazyMan</span> <span class="variable">instance2</span> <span class="operator">=</span> declaredConstructor.newInstance();</span><br><span class="line">        <span class="type">LazyMan</span> <span class="variable">instance3</span> <span class="operator">=</span> declaredConstructor.newInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// System.out.println(instance1);</span></span><br><span class="line">        System.out.println(instance2);</span><br><span class="line">        System.out.println(instance3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é™æ€å†…éƒ¨ç±»</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é™æ€å†…éƒ¨ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Holder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Holder</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Holder <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> InnerClass.HOLDER;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">InnerClass</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Holder</span> <span class="variable">HOLDER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Holder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å•ä¾‹ä¸å®‰å…¨ï¼Œåå°„</p>
</blockquote>
<blockquote>
<p>æšä¸¾</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">EnumSingle</span> &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> EnumSingle <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123;</span><br><span class="line">        <span class="type">EnumSingle</span> <span class="variable">instance1</span> <span class="operator">=</span> EnumSingle.INSTANCE;</span><br><span class="line">        Constructor&lt;EnumSingle&gt; declaredConstructor = EnumSingle.class.getDeclaredConstructor(<span class="literal">null</span>);</span><br><span class="line">        declaredConstructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        EnumSingle instance2=declaredConstructor.newInstance();</span><br><span class="line">        System.out.println(instance1);</span><br><span class="line">        System.out.println(instance2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æšä¸¾çš„æœ€ç»ˆåç¼–è¯‘ï¼Œæºç æœ‰çš„æ˜¯æœ‰å‚æ„é€ </p>
<h2 id="æ·±å…¥ç†è§£cas">æ·±å…¥ç†è§£CAS</h2>
<blockquote>
<p>ä»€ä¹ˆæ˜¯ CAS</p>
</blockquote>
<p>å¤§å‚å¿…é¡»è¦ç ”ç©¶åº•å±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CASDemo</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// CAS compareAndSet : æ¯”è¾ƒå¹¶äº¤æ¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        AtomicInteger atomicInteger=<span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">2020</span>);</span><br><span class="line">        <span class="comment">// æœŸæœ›ã€æ›´æ–°</span></span><br><span class="line">        <span class="comment">// public final boolean compareAndSet(int expect, int update)</span></span><br><span class="line">        <span class="comment">// å¦‚æœæœŸæœ›å€¼è¾¾åˆ°äº†ï¼Œå°±æ›´æ–°ï¼Œå¦åˆ™ä¸æ›´æ–° ï¼ŒCAS æ˜¯ CPU å¹¶å‘çš„åŸè¯­ï¼</span></span><br><span class="line">        System.out.println(atomicInteger.compareAndSet(<span class="number">2020</span>, <span class="number">2021</span>));</span><br><span class="line">        System.out.println(atomicInteger.get());</span><br><span class="line"></span><br><span class="line">        System.out.println(atomicInteger.compareAndSet(<span class="number">2020</span>, <span class="number">2021</span>));</span><br><span class="line">        System.out.println(atomicInteger.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Unsafe ç±»</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomicInteger</span> <span class="keyword">extends</span> <span class="title class_">Number</span> <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">6214790243416807050L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setup to use Unsafe.compareAndSwapInt for updates</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Unsafe</span> <span class="variable">unsafe</span> <span class="operator">=</span> Unsafe.getUnsafe();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> valueOffset;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            valueOffset = unsafe.objectFieldOffset</span><br><span class="line">                (AtomicInteger.class.getDeclaredField(<span class="string">&quot;value&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(ex); &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// Javaæ— æ³•æ“ä½œå†…å­˜</span></span><br><span class="line"><span class="comment">// Javaå¯ä»¥è°ƒç”¨C++ native</span></span><br><span class="line"><span class="comment">// C++å¯ä»¥æ“ä½œå†…å­˜</span></span><br><span class="line"><span class="comment">// Javaçš„åé—¨ã€‚å¯ä»¥é€šè¿‡è¿™ä¸ªç±»æ“</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> value;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapInt</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">int</span> var4, <span class="type">int</span> var5)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getAndAddInt</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">int</span> var4)</span> &#123;</span><br><span class="line">    <span class="type">int</span> var5;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        var5 = <span class="built_in">this</span>.getIntVolatile(var1, var2);</span><br><span class="line">    &#125; <span class="keyword">while</span>(!<span class="built_in">this</span>.compareAndSwapInt(var1, var2, var5, var5 + var4));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> var5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CAS
æ¯”è¾ƒå¹¶äº¤æ¢ï¼Œæ¯”è¾ƒå½“å‰å·¥ä½œå†…å­˜ä¸­çš„å€¼å’Œä¸»å†…å­˜ä¸­çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯æœŸæœ›çš„ï¼Œé‚£ä¹ˆåˆ™æ‰§è¡Œæ“ä½œï¼å¦‚æœä¸æ˜¯å°±ä¸€ç›´å¾ªç¯ï¼</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol type="1">
<li><p>å¾ªç¯ä¼šè€—æ—¶</p></li>
<li><p>ä¸€æ¬¡æ€§åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«äº¤é‡çš„åŸå­æ€§</p></li>
<li><p>ABAé—®é¢˜</p></li>
</ol>
<blockquote>
<p>CAS : ABA é—®é¢˜ï¼ˆç‹¸çŒ«æ¢å¤ªå­ï¼‰</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CASDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// CAS compareAndSet : æ¯”è¾ƒå¹¶äº¤æ¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">atomicInteger</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">2020</span>);</span><br><span class="line">        <span class="comment">// æœŸæœ›ã€æ›´æ–°</span></span><br><span class="line">        <span class="comment">// public final boolean compareAndSet(int expect, int update)</span></span><br><span class="line">        <span class="comment">// å¦‚æœæœŸæœ›å€¼è¾¾åˆ°äº†ï¼Œå°±æ›´æ–°ï¼Œå¦åˆ™ä¸æ›´æ–° ï¼ŒCAS æ˜¯ CPU å¹¶å‘çš„åŸè¯­ï¼</span></span><br><span class="line">        <span class="comment">// ===== æ£ä¹±çš„çº¿ç¨‹ ======</span></span><br><span class="line">        System.out.println(atomicInteger.compareAndSet(<span class="number">2020</span>, <span class="number">2021</span>));</span><br><span class="line">        System.out.println(atomicInteger.get());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(atomicInteger.compareAndSet(<span class="number">2021</span>, <span class="number">2020</span>));</span><br><span class="line">        System.out.println(atomicInteger.get());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ===== æœŸæœ›çš„çº¿ç¨‹ ======</span></span><br><span class="line">        System.out.println(atomicInteger.compareAndSet(<span class="number">2020</span>, <span class="number">2021</span>));</span><br><span class="line">        System.out.println(atomicjavaInteger.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŸå­å¼•ç”¨">åŸå­å¼•ç”¨</h2>
<blockquote>
<p>è§£å†³ ABA é—®é¢˜ï¼Œå¼•å…¥åŸå­å¼•ç”¨ï¼å¯¹åº”æ€æƒ³ï¼šä¹è§‚é”ï¼</p>
</blockquote>
<p>å¸¦ç‰ˆæœ¬å·çš„ åŸå­æ“ä½œï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CASDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// CAS compareAndSet : æ¯”è¾ƒå¹¶äº¤æ¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// AtomicInteger atomicInteger = new AtomicInteger(1);</span></span><br><span class="line"></span><br><span class="line">        AtomicStampedReference&lt;Integer&gt; atomicInteger = <span class="keyword">new</span> <span class="title class_">AtomicStampedReference</span>&lt;&gt;(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">stamp</span> <span class="operator">=</span> atomicInteger.getStamp(); <span class="comment">// è·å¾—ç‰ˆæœ¬å·</span></span><br><span class="line">            System.out.println(<span class="string">&quot;A1=&gt; &quot;</span>+stamp);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(atomicInteger.compareAndSet(<span class="number">1</span>, <span class="number">2</span>, atomicInteger.getStamp(), atomicInteger.getStamp() + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;A2=&gt; &quot;</span>+atomicInteger.getStamp());</span><br><span class="line"></span><br><span class="line">            System.out.println(atomicInteger.compareAndSet(<span class="number">2</span>, <span class="number">1</span>, atomicInteger.getStamp(), atomicInteger.getStamp() + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;A3=&gt; &quot;</span>+atomicInteger.getStamp());</span><br><span class="line"></span><br><span class="line">        &#125;,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">stamp</span> <span class="operator">=</span> atomicInteger.getStamp(); <span class="comment">// è·å¾—ç‰ˆæœ¬å·</span></span><br><span class="line">            System.out.println(<span class="string">&quot;B1=&gt; &quot;</span>+stamp);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(atomicInteger.compareAndSet(<span class="number">1</span>, <span class="number">6</span>, stamp, stamp + <span class="number">1</span>));</span><br><span class="line">java</span><br><span class="line">            System.out.println(<span class="string">&quot;B2=&gt; &quot;</span>+atomicInteger.getStamp());</span><br><span class="line"></span><br><span class="line">        &#125;,<span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„ç›¸åŒç±»å‹çš„åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨ equals
æ–¹æ³•æ¯”è¾ƒã€‚ è¯´æ˜ï¼šå¯¹äº Integer var = ? åœ¨-128 è‡³ 127
èŒƒå›´å†…çš„èµ‹å€¼ï¼ŒInteger å¯¹è±¡æ˜¯åœ¨ é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ
â€”â€”ç¦æ­¢ç”¨äºå•†ä¸šç”¨é€”ï¼Œè¿è€…å¿…ç©¶â€”â€” 7 /35 IntegerCache.cache
äº§ç”Ÿï¼Œä¼šå¤ç”¨å·²æœ‰å¯¹è±¡ï¼Œè¿™ä¸ªåŒºé—´å†…çš„ Integer å€¼å¯ä»¥ç›´æ¥ä½¿ç”¨==è¿›è¡Œ
åˆ¤æ–­ï¼Œä½†æ˜¯è¿™ä¸ªåŒºé—´ä¹‹å¤–çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½ä¼šåœ¨å †ä¸Šäº§ç”Ÿï¼Œå¹¶ä¸ä¼šå¤ç”¨å·²æœ‰å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§å‘ï¼Œ
æ¨èä½¿ç”¨ equals æ–¹æ³•è¿›è¡Œåˆ¤æ–­ã€‚ ---ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p>
<h2 id="å„ç§é”çš„ç†è§£">å„ç§é”çš„ç†è§£</h2>
<h3 id="å…¬å¹³é”éå…¬å¹³é”">å…¬å¹³é”ã€éå…¬å¹³é”</h3>
<p>å…¬å¹³é”ï¼šéå¸¸å…¬å¹³ï¼Œä¸èƒ½å¤Ÿæ’é˜Ÿï¼Œå¿…é¡»å…ˆæ¥ååˆ°ï¼
éå…¬å¹³é”ï¼šéå¸¸ä¸å…¬å¹³ï¼Œå¯ä»¥æ’é˜Ÿï¼ˆé»˜è®¤éƒ½æ˜¯éå…¬å¹³ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">()</span> &#123;</span><br><span class="line">    sync = <span class="keyword">new</span> <span class="title class_">NonfairSync</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">(<span class="type">boolean</span> fair)</span> &#123;</span><br><span class="line">    sync = fair ? <span class="keyword">new</span> <span class="title class_">FairSync</span>() : <span class="keyword">new</span> <span class="title class_">NonfairSync</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯é‡ç”¨é”">å¯é‡ç”¨é”</h3>
<p>å¯é‡ç”¨é”ï¼ˆé€’å½’é”ï¼‰</p>
<blockquote>
<p>Synchronized</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Phone1</span> <span class="variable">phone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Phone1</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            phone.sms();</span><br><span class="line">        &#125;,<span class="string">&quot;A&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            phone.sms();</span><br><span class="line">        &#125;,<span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">sms</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; sms&quot;</span>);</span><br><span class="line">        call();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; call&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Lock</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Phone2</span> <span class="variable">phone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Phone2</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            phone.sms();</span><br><span class="line">        &#125;, <span class="string">&quot;A&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            phone.sms();</span><br><span class="line">        &#125;, <span class="string">&quot;B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">sms</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; sms&quot;</span>);</span><br><span class="line">            call();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; call&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªæ—‹é”">è‡ªæ—‹é”</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªæ—‹é”</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpinLockDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    AtomicReference&lt;Thread&gt; atomicReference=<span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ é”</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myLock</span><span class="params">()</span>&#123;</span><br><span class="line">        Thread thread=Thread.currentThread();</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;==&gt; mylock&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (!atomicReference.compareAndSet(<span class="literal">null</span>,thread))&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£é”</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myUnLock</span><span class="params">()</span>&#123;</span><br><span class="line">        Thread thread=Thread.currentThread();</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;==&gt; myUnlock&quot;</span>);</span><br><span class="line"></span><br><span class="line">        atomicReference.compareAndSet(thread,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSpinLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SpinLockDemo</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpinLockDemo</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            lock.myLock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.myUnLock();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;, <span class="string">&quot;T1&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            lock.myLock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.myUnLock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;T2&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ­»é”">æ­»é”</h3>
<blockquote>
<p>æ­»é”æ˜¯ä»€ä¹ˆ</p>
</blockquote>
<p>æ­»é”æµ‹è¯•ï¼Œæ€ä¹ˆæ’é™¤æ­»é”</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeadLockDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String lockA=<span class="string">&quot;lockA&quot;</span>;</span><br><span class="line">        String lockB=<span class="string">&quot;lockB&quot;</span>;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyThread</span>(lockA,lockB),<span class="string">&quot;T1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyThread</span>(lockB,lockA),<span class="string">&quot;T2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String lockA;</span><br><span class="line">    <span class="keyword">private</span> String lockB;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String lockA,String lockB)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.lockA=lockA;</span><br><span class="line">        <span class="built_in">this</span>.lockB=lockB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lockA)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;lock:&quot;</span>+lockA+<span class="string">&quot;=&gt;get&quot;</span>+lockB);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">synchronized</span> (lockB)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;lock:&quot;</span>+lockB+<span class="string">&quot;=&gt;get&quot;</span>+lockA);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è§£å†³é—®é¢˜</p>
</blockquote>
<p>1ã€ä½¿ç”¨ <code>jps</code> å®šä½è¿›ç¨‹å·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Users\18339\Desktop\ideaprojects\juc&gt;jps -l</span><br><span class="line">15792 com.lock.DeadLockDemo</span><br><span class="line">9504 org.jetbrains.jps.cmdline.Launcher</span><br><span class="line">14868 sun.tools.jps.Jps</span><br><span class="line">9512</span><br><span class="line"></span><br><span class="line">C:\Users\18339\Desktop\ideaprojects\juc&gt;</span><br></pre></td></tr></table></figure>
<p>2ã€ä½¿ç”¨ <code>jstack  è¿›ç¨‹å·</code> æ‰¾åˆ°æ­»é”é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Found one Java-level deadlock:</span><br><span class="line"></span><br><span class="line">&quot;T2&quot;:</span><br><span class="line">  waiting to lock monitor 0x000002e34e2a0a68 (object 0x00000000d6105220, a java.lang.String),</span><br><span class="line">  which is held by &quot;T1&quot;</span><br><span class="line">&quot;T1&quot;:</span><br><span class="line">  waiting to lock monitor 0x000002e34e2a3248 (object 0x00000000d6105258, a java.lang.String),</span><br><span class="line">  which is held by &quot;T2&quot;</span><br><span class="line"></span><br><span class="line">Java stack information for the threads listed above:</span><br><span class="line"></span><br><span class="line">&quot;T2&quot;:</span><br><span class="line">        at com.lock.MyThread.run(DeadLockDemo.java:38)</span><br><span class="line">        - waiting to lock &lt;0x00000000d6105220&gt; (a java.lang.String)</span><br><span class="line">        - locked &lt;0x00000000d6105258&gt; (a java.lang.String)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">&quot;T1&quot;:</span><br><span class="line">        at com.lock.MyThread.run(DeadLockDemo.java:38)</span><br><span class="line">        - waiting to lock &lt;0x00000000d6105258&gt; (a java.lang.String)</span><br><span class="line">        - locked &lt;0x00000000d6105220&gt; (a java.lang.String)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">Found 1 deadlock.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\Users\18339\Desktop\ideaprojects\juc&gt;</span><br></pre></td></tr></table></figure>
<p>é¢è¯•ï¼Œå·¥ä½œï¼æ’æŸ¥é—®é¢˜</p>
<p>1ã€æ—¥å¿—</p>
<p>2ã€å †æ ˆ</p>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>JUCå¹¶å‘ç¼–ç¨‹(å››)</title>
    <url>/article/d021f5dd.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1B7411L7tE">https://www.bilibili.com/video/BV1B7411L7tE</a></p>
<span id="more"></span>
<h2 id="å››å¤§å‡½æ•°å¼æ¥å£å¿…é¡»æŒæ¡">å››å¤§å‡½æ•°å¼æ¥å£ï¼ˆå¿…é¡»æŒæ¡ï¼‰</h2>
<p>ç°ä»£ç¨‹åºå‘˜ï¼šLambdaè¡¨è¾¾å¼ï¼Œé“¾å¼ç¼–ç¨‹ï¼Œå‡½æ•°å¼æ¥å£ï¼ŒStreamæµå¼è®¡ç®—</p>
<blockquote>
<p>å‡½æ•°å¼æ¥å£ï¼šåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¶…çº§å¤šFunctionalInterface</span></span><br><span class="line"><span class="comment">// ç®€åŒ–ç¼–ç¨‹æ¨¡å‹ï¼Œåœ¨æ–°ç‰ˆæœ¬çš„æ¡†æ¶å±‚å¤§é‡åº”ç”¨</span></span><br><span class="line"><span class="comment">// forEach(æ¶ˆè´¹è€…ç±»å‹çš„å‡½æ•°å¼æ¥å£)</span></span><br></pre></td></tr></table></figure>
<p><strong>ä»£ç æµ‹è¯•</strong></p>
<blockquote>
<p>Function å‡½æ•°å¼æ¥å£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡½æ•°å‹æ¥å£ï¼šæœ‰ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œæœ‰ä¸€ä¸ªè¾“å‡º</span></span><br><span class="line"><span class="comment"> * åªè¦æ˜¯å‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ç”¨ lambdaè¡¨è¾¾å¼ ç®€åŒ–</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Function&lt;String,String&gt; function = new Function&lt;String,String&gt;()&#123;</span></span><br><span class="line">        <span class="comment">//     @Override</span></span><br><span class="line">        <span class="comment">//     public String apply(String str) &#123;</span></span><br><span class="line">        <span class="comment">//         return str;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line">        Function&lt;String,String&gt; function=(str)-&gt;&#123;</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(function.apply(<span class="string">&quot;abc&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Predicate æ–­è¨€å‹æ¥å£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–­è¨€å‹æ¥å£ï¼šæœ‰ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œè¿”å›å€¼åªèƒ½æ˜¯ å¸ƒå°”å€¼ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Predicate&lt;String&gt; predicate = new Predicate&lt;String&gt;()&#123;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//     @Override</span></span><br><span class="line">        <span class="comment">//     public boolean test(String str) &#123;</span></span><br><span class="line">        <span class="comment">//         return str.isEmpty();</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line">        Predicate&lt;String&gt; predicate=(str)-&gt;&#123;</span><br><span class="line">          <span class="keyword">return</span> str.isEmpty();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(predicate.test(<span class="string">&quot;&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Consumer æ¶ˆè´¹å‹æ¥å£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆè´¹æ€§æ¥å£ï¼šåªæœ‰è¾“å…¥ï¼Œæ²¡æœ‰è¿”å›</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Consumer&lt;String&gt; consumer = new Consumer&lt;String&gt;()&#123;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//     @Override</span></span><br><span class="line">        <span class="comment">//     public void accept(String str) &#123;</span></span><br><span class="line">        <span class="comment">//         System.out.println(str);</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line">            Consumer&lt;String&gt; consumer=(str)-&gt;&#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">        consumer.accept(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Supplier ä¾›ç»™å‹æ¥å£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¾›ç»™å‹æ¥å£ï¼šæ²¡æœ‰å‚æ•°ï¼Œæœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Supplier&lt;String&gt; supplier = new Supplier&lt;String&gt;()&#123;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//     @Override</span></span><br><span class="line">        <span class="comment">//     public String get() &#123;</span></span><br><span class="line">        <span class="comment">//         System.out.println(&quot;get()&quot;);</span></span><br><span class="line">        <span class="comment">//         return &quot;1024&quot;;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line">        Supplier&lt;String&gt; supplier = () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;get()&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;1024&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(supplier.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="streamæµå¼è®¡ç®—">Streamæµå¼è®¡ç®—</h2>
<blockquote>
<p>ä»€ä¹ˆæ˜¯Streamæµå¼è®¡ç®—</p>
</blockquote>
<p>å¤§æ•°æ®ï¼šå­˜å‚¨ + è®¡ç®—</p>
<p>é›†åˆã€MySQL æœ¬è´¨å°±æ˜¯å­˜å‚¨</p>
<p>è®¡ç®—éƒ½åº”è¯¥äº¤ç»™æµæ¥æ“ä½œï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¢˜ç›®è¦æ±‚ï¼š</span></span><br><span class="line"><span class="comment"> * ç°æœ‰5ä¸ªç”¨æˆ·ï¼ç­›é€‰ï¼š</span></span><br><span class="line"><span class="comment"> * 1ã€ID å¿…é¡»æ˜¯å¶æ•°</span></span><br><span class="line"><span class="comment"> * 2ã€å¹´é¾„å¿…é¡»å¤§äº23å²</span></span><br><span class="line"><span class="comment"> * 3ã€ç”¨æˆ·åè½¬ä¸ºå¤§å†™å­—æ¯</span></span><br><span class="line"><span class="comment"> * 4ã€ç”¨æˆ·åå­—æ¯å€’åºæ’åˆ—</span></span><br><span class="line"><span class="comment"> * 5ã€åªè¾“å‡ºä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">u1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="number">21</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>, <span class="number">22</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>, <span class="number">23</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>, <span class="number">24</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">6</span>, <span class="string">&quot;e&quot;</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é›†åˆè´Ÿè´£å­˜å‚¨</span></span><br><span class="line">        List&lt;User&gt; list = Arrays.asList(u1, u2, u3, u4, u5);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¡ç®—äº¤ç»™Stream</span></span><br><span class="line">        list.stream()</span><br><span class="line">                .filter(u -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> u.getId() % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">                &#125;)</span><br><span class="line">                .filter(u -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> u.getAge() &gt; <span class="number">23</span>;</span><br><span class="line">                &#125;)</span><br><span class="line">                .map(u -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> u.getName().toUpperCase();</span><br><span class="line">                &#125;)</span><br><span class="line">                .sorted((A, B) -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> B.compareTo(A);</span><br><span class="line">                &#125;)</span><br><span class="line">                .limit(<span class="number">1</span>)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="forkjoin">ForkJoin</h2>
<blockquote>
<p>ä»€ä¹ˆæ˜¯ForkJoin</p>
</blockquote>
<p>JDK1.7ï¼Œå¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼æé«˜æ•ˆç‡ï¼Œå¤§æ•°æ®é‡ï¼</p>
<p>å¤§æ•°æ®ï¼šMap Reduceï¼ˆæŠŠå¤§ä»»åŠ¡æ‹†åˆ†ä¸ºå°ä»»åŠ¡ï¼‰</p>
<blockquote>
<p>ForkJoin ç‰¹ç‚¹ï¼šå·¥ä½œçªƒå–</p>
</blockquote>
<p>è¿™é‡Œç»´æŠ¤çš„çš„æ˜¯åŒå‘é˜Ÿåˆ—</p>
<blockquote>
<p>ForkJoin</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        test1();</span><br><span class="line">        test2();</span><br><span class="line">        test3();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="type">Long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Long</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1L</span>; i &lt;= <span class="number">1000_0000L</span>; i++) &#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;test1ç»“æœï¼š&quot;</span> + sum + <span class="string">&quot;è€—æ—¶ï¼š&quot;</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="type">ForkJoinPool</span> <span class="variable">forkJoinPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>();</span><br><span class="line">        ForkJoinTask&lt;Long&gt; task = <span class="keyword">new</span> <span class="title class_">ForkJoinDemo</span>(<span class="number">1L</span>, <span class="number">1000_0000L</span>);</span><br><span class="line">        ForkJoinTask&lt;Long&gt; submit = forkJoinPool.submit(task);<span class="comment">// æäº¤ä»»åŠ¡</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">sum</span> <span class="operator">=</span> submit.get();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;test2ç»“æœï¼š&quot;</span> + sum + <span class="string">&quot;è€—æ—¶ï¼š&quot;</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> LongStream.rangeClosed(<span class="number">0L</span>, <span class="number">1000_0000L</span>).parallel().reduce(<span class="number">0</span>, Long::sum);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;test3ç»“æœï¼š&quot;</span> + sum + <span class="string">&quot;è€—æ—¶ï¼š&quot;</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Demo</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ ForkJoin</span></span><br><span class="line"><span class="comment"> * 1ã€ForkJoinPool é€šè¿‡å®ƒæ¥æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> * 2ã€è®¡ç®—ä»»åŠ¡ ForkJoinPool.execute(ForkJoinTask&lt;?&gt; task)</span></span><br><span class="line"><span class="comment"> * 3ã€è®¡ç®—ç±»ç»§æ‰¿</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForkJoinDemo</span> <span class="keyword">extends</span> <span class="title class_">RecursiveTask</span>&lt;Long&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long start;</span><br><span class="line">    <span class="keyword">private</span> Long end;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Long</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">10000L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ForkJoinDemo</span><span class="params">(Long start, Long end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Long <span class="title function_">compute</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (end - start &lt; temp) &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">Long</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt;= end; i++) &#123;</span><br><span class="line">                sum += i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">middle</span> <span class="operator">=</span> (start + end) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">ForkJoinDemo</span> <span class="variable">task1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinDemo</span>(start, middle);</span><br><span class="line">            task1.fork();   <span class="comment">//æ‹†åˆ†ä»»åŠ¡ï¼ŒæŠŠä»»åŠ¡å‹å…¥çº¿ç¨‹é˜Ÿåˆ—</span></span><br><span class="line">            <span class="type">ForkJoinDemo</span> <span class="variable">task2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinDemo</span>(middle + <span class="number">1</span>, end);</span><br><span class="line">            task2.fork();</span><br><span class="line">            <span class="keyword">return</span> task1.join() + task2.join();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¼‚æ­¥å›è°ƒ">å¼‚æ­¥å›è°ƒ</h2>
<blockquote>
<p>Future è®¾è®¡åˆè¡·ï¼Œå¯¹å°†æ¥æŸä¸ªäº‹ä»¶</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼‚æ­¥è°ƒç”¨ï¼šCompletableFuture</span></span><br><span class="line"><span class="comment"> * å¼‚æ­¥æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> * æˆåŠŸå›è°ƒ</span></span><br><span class="line"><span class="comment"> * å¤±è´¥å›è°ƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰è¿”å›å€¼çš„ runAsync å¼‚æ­¥å›è°ƒ</span></span><br><span class="line">        <span class="comment">// CompletableFuture&lt;Void&gt; completableFuture = CompletableFuture.runAsync(() -&gt; &#123;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//     try &#123;</span></span><br><span class="line">        <span class="comment">//         TimeUnit.SECONDS.sleep(2);</span></span><br><span class="line">        <span class="comment">//     &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line">        <span class="comment">//         e.printStackTrace();</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//     System.out.println(Thread.currentThread().getName() + &quot; runAsync=&gt;Void&quot;);</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// System.out.println(&quot;abc&quot;);</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// completableFuture.get();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æœ‰è¿”å›å€¼çš„supplyAsync å¼‚æ­¥å›è°ƒ</span></span><br><span class="line">        CompletableFuture&lt;Integer&gt; completableFuture1 = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; supplyAsync=&gt;Integer&quot;</span>);</span><br><span class="line">            <span class="type">int</span> i=<span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1024</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(completableFuture1.whenComplete((t, u) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;t=&gt;&quot;</span> + t);<span class="comment">// æ­£å¸¸çš„è¿”å›å€¼</span></span><br><span class="line">            System.out.println(<span class="string">&quot;u=&gt;&quot;</span> + u);<span class="comment">// é”™è¯¯çš„ä¿¡æ¯ï¼šjava.util.concurrent.CompletionException: java.lang.ArithmeticException: / by zero</span></span><br><span class="line">        &#125;).exceptionally((e) -&gt; &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">            <span class="keyword">return</span> <span class="number">233</span>;</span><br><span class="line">        &#125;).get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="jmm">JMM</h2>
<blockquote>
<p>è¯·ä½ è°ˆè°ˆå¯¹ Volatile çš„ç†è§£</p>
</blockquote>
<p>Volatile æ˜¯ java è™šæ‹Ÿæœºæä¾›çš„<strong>è½»é‡çº§åŒæ­¥æœºåˆ¶</strong></p>
<ol type="1">
<li>ä¿è¯å¯è§æ€§</li>
<li>ä¸ä¿è¯åŸå­æ€§</li>
<li>ç¦æ­¢æŒ‡ä»¤é‡æ’</li>
</ol>
<blockquote>
<p>ä»€ä¹ˆæ˜¯JMM</p>
</blockquote>
<p>JMMï¼šjavaå†…å­˜æ¨¡å‹ï¼Œä¸å­˜åœ¨çš„ä¸œè¥¿ï¼Œæ¦‚å¿µï¼çº¦å®šï¼</p>
<p><strong>å…³äºJMMçš„ä¸€äº›åŒæ­¥çº¦å®šï¼š</strong></p>
<ol type="1">
<li>çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡<strong>ç«‹å³</strong>åˆ·å›ä¸»å­˜ã€‚</li>
<li>çº¿ç¨‹åŠ é”å‰ï¼Œå¿…é¡»è¯»å–ä¸»å­˜ä¸­çš„æœ€æ–°å€¼åˆ°å·¥ä½œå†…å­˜ä¸­ï¼</li>
<li>åŠ é”å’Œè§£é”æ˜¯ç»Ÿä¸€æŠŠé”</li>
</ol>
<p>çº¿ç¨‹ï¼š<strong>å·¥ä½œå†…å­˜</strong>ï¼Œ<strong>ä¸»å­˜</strong></p>
<p>å†…å­˜äº¤äº’æ“ä½œæœ‰8ç§ï¼Œè™šæ‹Ÿæœºå®ç°å¿…é¡»ä¿è¯æ¯ä¸€ä¸ªæ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸å¯åœ¨åˆ†çš„ï¼ˆå¯¹äºdoubleå’Œlongç±»å‹çš„å˜é‡æ¥è¯´ï¼Œloadã€storeã€readå’Œwriteæ“ä½œåœ¨æŸäº›å¹³å°ä¸Šå…è®¸ä¾‹å¤–ï¼‰</p>
<ul>
<li><ul>
<li>lock ï¼ˆé”å®šï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºçº¿ç¨‹ç‹¬å çŠ¶æ€</li>
<li>unlock
ï¼ˆè§£é”ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®š</li>
<li>read
ï¼ˆè¯»å–ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„loadåŠ¨ä½œä½¿ç”¨</li>
<li>load
ï¼ˆè½½å…¥ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠreadæ“ä½œä»ä¸»å­˜ä¸­å˜é‡æ”¾å…¥å·¥ä½œå†…å­˜ä¸­</li>
<li>use
ï¼ˆä½¿ç”¨ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œå®ƒæŠŠå·¥ä½œå†…å­˜ä¸­çš„å˜é‡ä¼ è¾“ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨åˆ°å˜é‡çš„å€¼ï¼Œå°±ä¼šä½¿ç”¨åˆ°è¿™ä¸ªæŒ‡ä»¤</li>
<li>assign
ï¼ˆèµ‹å€¼ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“ä¸­æ¥å—åˆ°çš„å€¼æ”¾å…¥å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­</li>
<li>store
ï¼ˆå­˜å‚¨ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»å·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿åç»­çš„writeä½¿ç”¨</li>
<li>write
ã€€ï¼ˆå†™å…¥ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œå®ƒæŠŠstoreæ“ä½œä»å·¥ä½œå†…å­˜ä¸­å¾—åˆ°çš„å˜é‡çš„å€¼æ”¾å…¥ä¸»å†…å­˜çš„å˜é‡ä¸­</li>
</ul></li>
</ul>
<p>JMMå¯¹è¿™å…«ç§æŒ‡ä»¤çš„ä½¿ç”¨ï¼Œåˆ¶å®šäº†å¦‚ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li><ul>
<li>ä¸å…è®¸readå’Œloadã€storeå’Œwriteæ“ä½œä¹‹ä¸€å•ç‹¬å‡ºç°ã€‚å³ä½¿ç”¨äº†readå¿…é¡»loadï¼Œä½¿ç”¨äº†storeå¿…é¡»write</li>
<li>ä¸å…è®¸çº¿ç¨‹ä¸¢å¼ƒä»–æœ€è¿‘çš„assignæ“ä½œï¼Œå³å·¥ä½œå˜é‡çš„æ•°æ®æ”¹å˜äº†ä¹‹åï¼Œå¿…é¡»å‘ŠçŸ¥ä¸»å­˜</li>
<li>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹å°†æ²¡æœ‰assignçš„æ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜</li>
<li>ä¸€ä¸ªæ–°çš„å˜é‡å¿…é¡»åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸å·¥ä½œå†…å­˜ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–çš„å˜é‡ã€‚å°±æ˜¯æ€¼å˜é‡å®æ–½useã€storeæ“ä½œä¹‹å‰ï¼Œå¿…é¡»ç»è¿‡assignå’Œloadæ“ä½œ</li>
<li>ä¸€ä¸ªå˜é‡åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¯¹å…¶è¿›è¡Œlockã€‚å¤šæ¬¡lockåï¼Œå¿…é¡»æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„unlockæ‰èƒ½è§£é”</li>
<li>å¦‚æœå¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œlockæ“ä½œï¼Œä¼šæ¸…ç©ºæ‰€æœ‰å·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰ï¼Œå¿…é¡»é‡æ–°loadæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼</li>
<li>å¦‚æœä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«lockï¼Œå°±ä¸èƒ½å¯¹å…¶è¿›è¡Œunlockæ“ä½œã€‚ä¹Ÿä¸èƒ½unlockä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”ä½çš„å˜é‡</li>
<li>å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»æŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å†…å­˜</li>
</ul></li>
</ul>
<p>ã€€ã€€JMMå¯¹è¿™å…«ç§æ“ä½œè§„åˆ™å’Œå¯¹<a
href="https://www.cnblogs.com/null-qige/p/8569131.html">volatileçš„ä¸€äº›ç‰¹æ®Šè§„åˆ™</a>å°±èƒ½ç¡®å®šå“ªé‡Œæ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨ï¼Œå“ªäº›æ“ä½œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„äº†ã€‚ä½†æ˜¯è¿™äº›è§„åˆ™å®åœ¨å¤æ‚ï¼Œå¾ˆéš¾åœ¨å®è·µä¸­ç›´æ¥åˆ†æã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¹Ÿä¸ä¼šé€šè¿‡ä¸Šè¿°è§„åˆ™è¿›è¡Œåˆ†æã€‚æ›´å¤šçš„æ—¶å€™ï¼Œä½¿ç”¨javaçš„happen-beforeè§„åˆ™æ¥è¿›è¡Œåˆ†æã€‚</p>
<h2 id="volatile">Volatile</h2>
<blockquote>
<p>1ã€ä¿è¯å¯è§æ€§</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JMMDemo</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸åŠ  volatile ç¨‹åºè¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line"><span class="comment">     * åŠ  volatile å¯ä»¥ä¿è¯å¯è§æ€§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (num == <span class="number">0</span>) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        num = <span class="number">1</span>;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2ã€ä¸ä¿è¯åŸå­æ€§</p>
</blockquote>
<p>åŸå­æ€§ï¼šä¸å¯åˆ†å‰²</p>
<p>çº¿ç¨‹åœ¨æ‰§è¡Œæ—¶ï¼Œä¸èƒ½è¢«æ‰“æ‰°ï¼Œè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JMMDemo2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * volatile ä¸ä¿è¯åŸå­æ€§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="type">int</span> num=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        num++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç†è®ºç»“æœä¸º 20000</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">                    add();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (Thread.activeCount()&gt;<span class="number">2</span>)&#123;</span><br><span class="line">            Thread.<span class="keyword">yield</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot; &quot;</span>+num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¸åŠ  Lock å’Œ synchronized ï¼Œæ€æ ·ä¿è¯åŸå­æ€§</strong></p>
<p>ä½¿ç”¨åŸå­ç±»ï¼Œè§£å†³åŸå­æ€§é—®é¢˜</p>
<blockquote>
<p>åŸå­ç±»</p>
</blockquote>
<p>java.util.concurrent.atomic</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JMMDemo2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * volatile ä¸ä¿è¯åŸå­æ€§</span></span><br><span class="line"><span class="comment">     * AtomicInteger åŸå­ç±»çš„ Integer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> AtomicInteger num=<span class="keyword">new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// num++; // ä¸æ˜¯åŸå­æ€§æ“ä½œ</span></span><br><span class="line">        num.getAndIncrement(); <span class="comment">// AtomicInteger + 1 æ–¹æ³• CAS</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç†è®ºç»“æœä¸º 20000</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">                    add();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (Thread.activeCount()&gt;<span class="number">2</span>)&#123;</span><br><span class="line">            Thread.<span class="keyword">yield</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot; &quot;</span>+num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™äº›ç±»çš„åº•å±‚éƒ½ç›´æ¥ä¸æ“ä½œç³»ç»ŸæŒ‚é’©ï¼åœ¨å†…å­˜ä¸­ä¿®æ”¹ï¼Unsafeç±»æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„å­˜åœ¨</p>
<blockquote>
<p>3ã€æŒ‡ä»¤é‡æ’</p>
</blockquote>
<p>ä»€ä¹ˆæ˜¯
æŒ‡ä»¤é‡æ’ï¼š<strong>è®¡ç®—æœºå¹¶ä¸æ˜¯æŒ‰ä½ å†™çš„é‚£æ ·å»æ‰§è¡Œçš„</strong></p>
<p>æºä»£ç  ---&gt; ç¼–è¯‘å™¨ä¼˜åŒ–é‡æ’ ---&gt; æŒ‡ä»¤å¹¶è¡Œä¹Ÿå¯èƒ½é‡æ’ ---&gt;
å†…å­˜ç³»ç»Ÿä¹Ÿä¼šé‡æ’ ---&gt; æ‰§è¡Œ</p>
<p>å¤„ç†æœºåœ¨è¿›è¡ŒæŒ‡ä»¤é‡æ’æ—¶ï¼Œè€ƒè™‘ï¼šæ•°æ®ä¹‹é—´çš„ä¾èµ–æ€§ï¼</p>
<p><strong>Volatileå¯ä»¥é¿å…æŒ‡ä»¤é‡æ’ï¼š</strong></p>
<p>å†…å­˜å±éšœï¼ŒCPUæŒ‡ä»¤ï¼Œä½œç”¨ï¼š</p>
<p>1ã€ä¿è¯ç‰¹å®šæ“ä½œçš„æ‰§è¡Œé¡ºåºï¼</p>
<p>2ã€å¯ä»¥ä¿è¯æŸäº›å˜é‡å†…å­˜å¯è§æ€§ï¼ï¼ˆåˆ©ç”¨è¿™äº›ç‰¹æ€§ Volatile
å®ç°äº†å¯è§æ€§ï¼‰</p>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/fba0a19b.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/54913af9.html">JUCå¹¶å‘ç¼–ç¨‹(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/2a621ad2.html">JUCå¹¶å‘ç¼–ç¨‹(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/d021f5dd.html">JUCå¹¶å‘ç¼–ç¨‹(å››)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/d68aa2a0.html">JUCå¹¶å‘ç¼–ç¨‹(äº”)</a></li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Java Web å¤§ä½œä¸šï¼ˆåœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿï¼‰æ€»ç»“</title>
    <url>/article/54805cfd.html</url>
    <content><![CDATA[<p>ç»ˆäºæœ‰æœºä¼šå†™è¿™ç¯‡æ–‡ç« äº†ï¼Œå†™åšå®¢è¿™ä¸œè¥¿è¿˜çœŸä¸èƒ½æ‹–å•Šï¼Œå½“æ—¶å¾ˆæœ‰æ¿€æƒ…ï¼Œå¾ˆæ¸…æ¥šè‡ªå·±è¦å†™ä¸€äº›ä»€ä¹ˆï¼Œé‡ç‚¹å¼ºè°ƒäº›ä»€ä¹ˆï¼Œæ‹–åˆ°ç°åœ¨ï¼Œéƒ½ä¸çŸ¥é“è¯¥æ€ä¹ˆå†™äº†ã€‚</p>
<h1 id="é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»</h1>
<p>é¦–å…ˆè¿™ä¸ªé¡¹ç›®æ˜¯ä½œä¸ºè¿™å­¦æœŸçš„Java
Webå¤§ä½œä¸šçš„ï¼Œæˆ‘ä»¬å°ç»„å…±ä¸‰ä¸ªäººï¼Œæˆ‘ä¸»è¦è´Ÿè´£å‰å°åŠŸèƒ½åŠç•Œé¢ï¼Œæˆ‘ä»¬çš„é€‰é¢˜æ˜¯â€œåœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿâ€ã€‚å‰å°éœ€è¦å®ç°ï¼Œæ–°é—»æµè§ˆï¼Œæ–°é—»ç­›é€‰ï¼ˆæŒ‰ç±»å‹æˆ–å…³é”®å­—ï¼‰ï¼Œç™»å½•åç”¨æˆ·å¯ä»¥æ–°é—»å¢åˆ æ”¹ï¼Œæ–°é—»è¯„è®ºï¼Œé—®é¢˜åé¦ˆï¼Œä¿¡æ¯å¯†ç ä¿®æ”¹ç­‰ï¼›åå°å®ç°æ–°é—»ã€ç”¨æˆ·ã€è¯„è®ºã€åé¦ˆçš„å¢åˆ æ”¹ï¼Œè¿˜æœ‰æ–°é—»å®¡æ ¸åŠŸèƒ½ï¼Œæˆ‘ä»¬æœ‰ä¸ªç‰¹è‰²æ˜¯æ§åˆ¶é¦–é¡µæ¨é€çš„æ–°é—»ï¼Œä¹Ÿå°±æ˜¯è¯´é¦–é¡µå¹¶ä¸æ˜¯å±•ç¤ºæœ€è¿‘æ·»åŠ çš„æ–°é—»ï¼Œè€Œæ˜¯æˆ‘ä»¬æ‰€æ§åˆ¶çš„ï¼Œå°±åƒä¸€äº›å¤§ç½‘ç«™æ˜¯é æŸäº›æ•°æ®è®¡ç®—åˆ¤æ–­è¿™äº›å†…å®¹æ˜¯å¦æ¨é€åˆ°é¦–é¡µä¸€æ ·ï¼Œæ§åˆ¶é¦–é¡µçš„è½®æ’­å›¾ï¼Œå¾ˆæœ‰è¶£ï¼å½“ç„¶æˆ‘ä¹Ÿåªæ˜¯ä»‹ç»æˆ‘çš„è¿™éƒ¨åˆ†ï¼Œè‡³äºå…¶ä»–éƒ¨åˆ†ç”±æˆ‘ä»¬å°ç»„å…¶ä»–æˆå‘˜å®Œæˆï¼Œæˆ‘ä¸ä¼šå»ä»‹ç»è¿™éƒ¨åˆ†ã€‚</p>
<span id="more"></span>
<h1 id="å±•ç¤º">å±•ç¤º</h1>
<p>å±•ç¤ºçš„ä¸»è¦æœ‰æŸä¸€ç±»çš„æ–°é—»ï¼Œå…·ä½“å†…å®¹ï¼Œè¯„è®ºåŒºï¼Œä¸ªäººä¸»é¡µï¼Œä¸ªäººèµ„æ–™ï¼Œåé¦ˆé¡µã€‚ã€‚ã€‚</p>
<figure>
<img data-src="https://img.imgdb.cn/item/600254c33ffa7d37b3b653b6.gif"
alt="å±•ç¤º" />
<figcaption aria-hidden="true">å±•ç¤º</figcaption>
</figure>
<h1 id="ç¯å¢ƒå·¥å…·">ç¯å¢ƒ/å·¥å…·</h1>
<ul>
<li>æ„å»ºå·¥å…·ï¼šMaven3.6.3</li>
<li>æ•°æ®åº“ï¼šMySQL5.5</li>
<li>åŸºç¡€ç¯å¢ƒï¼šSSMï¼ŒSpring5.0.6ã€Mybatis3.5.3</li>
<li>å‰å°è®¾è®¡ï¼š<a href="https://www.layui.com/">layui</a></li>
<li>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼š<a href="https://ckeditor.com/">CKEditor</a></li>
<li>å›¾æ ‡æ¥æºï¼š<a
href="https://www.iconfont.cn/">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“</a></li>
<li>å·¥å…·ï¼šIDEAã€Tomcat9.0ã€Navicat Premium15ã€Chromeã€Edge</li>
</ul>
<h1 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h1>
<figure>
<img data-src="https://img.imgdb.cn/item/600258593ffa7d37b3b913f8.jpg"
alt="é¡¹ç›®ç»“æ„" />
<figcaption aria-hidden="true">é¡¹ç›®ç»“æ„</figcaption>
</figure>
<p>ä»å›¾ä¸­å·²ç»å¯ä»¥çœ‹å‡ºæ•´ä¸ªé¡¹ç›®æ˜¯æ€æ ·çš„äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ã€‚</p>
<h1 id="å…³é”®éƒ¨åˆ†">å…³é”®éƒ¨åˆ†</h1>
<p>å› ä¸ºé¡¹ç›®ä¹‹å‰æˆ‘ä¹Ÿè§æ‹†æˆè®¸å¤šéƒ¨åˆ†äº†ï¼ˆé“¾æ¥ä¼šæ”¾åœ¨æ–‡æœ«ï¼‰ï¼Œæ‰€ä»¥æˆ‘åªä¼šæä¸€äº›å…³é”®çš„æˆ–æ˜¯å¾ˆæœ‰è¶£çš„éƒ¨åˆ†ã€‚</p>
<ul>
<li>JSTLä¸ELçš„ä½¿ç”¨</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p>æœ¬é¡¹ç›®å¾ˆå¤šæ•°æ®å±•ç¤ºéƒ½æ˜¯é JSTLä¸ELå®ç°çš„ï¼Œcæ ‡ç­¾ä¸‹çš„ifã€forEachã€chooseã€whenç­‰ä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨ï¼Œä¸ªäººæ„Ÿå—è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ï¼Œè™½ç„¶å¹¶ä¸ç¬¦åˆä¸€äº›å¼€å‘æ ‡å‡†ã€‚</p>
<ul>
<li>é¦–é¡µdivè·³è½¬</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> cPage = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> uid = <span class="string">&#x27;$&#123;sessionScope.userS.userId&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#index&quot;</span>).<span class="title function_">trigger</span>(<span class="string">&quot;click&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#search&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> key = $(<span class="string">&quot;#key&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">main</span>(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsByKey?key=&quot;</span> + key + <span class="string">&quot;&amp;cPage=&quot;</span> + cPage);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#key&#x27;</span>).<span class="title function_">bind</span>(<span class="string">&#x27;keypress&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (event.<span class="property">keyCode</span> === <span class="number">13</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#search&quot;</span>).<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">byCid</span>(<span class="params">cid</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">main</span>(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/queryNewsByCId?cid=&quot;</span> + cid + <span class="string">&quot;&amp;cPage=&quot;</span> + cPage);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">toEdit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myForm = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;form&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="property">method</span> = <span class="string">&quot;post&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="property">target</span> = <span class="string">&quot;_blank&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="property">action</span> = <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/toEdit&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myInput = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        myInput.<span class="title function_">setAttribute</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;uid&quot;</span>); <span class="comment">// ä¸ºinputå¯¹è±¡è®¾ç½®name</span></span></span><br><span class="line"><span class="language-javascript">        myInput.<span class="title function_">setAttribute</span>(<span class="string">&quot;value&quot;</span>, uid); <span class="comment">// ä¸ºinputå¯¹è±¡è®¾ç½®value</span></span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="title function_">appendChild</span>(myInput);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(myForm);</span></span><br><span class="line"><span class="language-javascript">        myForm.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(myForm); <span class="comment">// æäº¤åç§»é™¤åˆ›å»ºçš„form</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params">href</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#main&quot;</span>).<span class="title function_">html</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#main&quot;</span>).<span class="title function_">load</span>(href);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨çš„è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œå°†éœ€è¦çš„å†…å®¹æ”¾å…¥åä¸ºâ€œmainâ€çš„divä¸­ï¼Œå®ç°å¤´éƒ¨å°¾éƒ¨ä¸å˜ï¼Œåªæœ‰ä¸­é—´éƒ¨åˆ†å˜åŒ–ã€‚è¿˜æœ‰é‚£ä¸ªtoEdit()æ–¹æ³•å†™æ–‡ç« æŒ‰é’®ï¼Œå°†aæ ‡ç­¾getå˜ä¸ºformçš„postå®ç°ï¼Œå¢å¼ºäº†å®‰å…¨æ€§ï¼ŒåŒæ—¶å¯ä»¥å°†å¯¹åº”çš„Controlleræ–¹æ³•æ”¹ä¸ºåªæ¥å—postè¯·æ±‚ï¼Œè¿™æ ·å°±ä¿éšœäº†æœªç™»å½•ç”¨æˆ·çš„å†™æ–‡ç« å’Œç™»å½•ç”¨æˆ·ç¼–è¾‘ä»–äººæ–‡ç« ã€‚</p>
<ul>
<li>å¤„ç†JSONæ•°æ®</li>
</ul>
<p>é™¤äº†æ­£å¸¸æ‹¼æ¥æˆhtmlå…ƒç´ å¤–ï¼Œå¾€å¾€éœ€è¦å¢åŠ åˆ°é¡µé¢æˆ–ä»é¡µé¢åˆ é™¤</p>
<p>æ¯”å¦‚ä¸‹é¢çš„è¯„è®ºåˆ é™¤å®ç°ï¼Œcidæ˜¯comment_idæ˜¯è¯„è®ºçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå°†è¯„è®ºçš„idè®¾ç½®ä¸ºâ€œdiv_cidâ€ï¼Œå› ä¸ºæ¯æ¡è¯„è®ºcidä¸åŒï¼Œæ‰€ä»¥å­˜åœ¨ä¸åŒidçš„divï¼Œè¿™æ—¶æˆ‘ä»¬åˆ é™¤è¯„è®ºï¼Œå…³é”®ä»£ç å°±æ˜¯<code>$("#div_" + cid).remove();</code>ï¼Œè¿™æ ·çš„æ“ä½œæ–¹ä¾¿ä¸”ç®€å•ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">delComment</span>(<span class="params">cid</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="title function_">confirm</span>(<span class="string">&quot;ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&quot;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/deleteComment&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: &#123;<span class="attr">cid</span>: cid&#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#div_&quot;</span> + cid).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºåˆ é™¤å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¯„è®ºåˆ é™¤ä¹Ÿç±»åŒï¼ŒJSONæ•°æ®å¤„ç†æˆhtmlèƒ½è¯†åˆ«çš„sï¼Œç„¶å<code>$("#newComment").prepend(s);</code>ï¼Œè¿™è¦æ³¨æ„æ˜¯ä½¿ç”¨.prependåœ¨å…ƒç´ å‰ï¼Œè¿˜æ˜¯appendåœ¨å…ƒç´ åã€‚</p>
<ul>
<li>åç«¯ä»£ç </li>
</ul>
<h2 id="daoå±‚">DAOå±‚</h2>
<p>åç«¯å¹¶æ²¡æœ‰ç”¨åˆ°ä»€ä¹ˆç‰¹ç‰›é€¼çš„æŠ€æœ¯ï¼Œè®©æˆ‘ç”¨æˆ‘ä¹Ÿä¸ä¼šå•Šã€‚æ‰€ä»¥åç«¯å¾ˆæœ´ç´ ç®€å•ï¼Œä¸»è¦è¿‡ç¨‹æ˜¯ï¼Œå†™Mapperä¸­çš„sqlè¯­å¥ï¼Œè¿™äº›éƒ½æ˜¯åŸå­æ“ä½œï¼Œæ— éå°±æ˜¯äº›å¢åˆ æ”¹ï¼Œä¸‹é¢æ˜¯åˆ†é¡µæŸ¥è¯¢æŸç±»æ–°é—»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from news where category_id=#&#123;cid&#125; and state=1 and news_id&lt;=(select news_id from news where category_id=#&#123;cid&#125; and state=1 order by news_id desc limit $&#123;cPage&#125;,1)order by news_id desc limit 10&quot;)</span></span><br><span class="line"><span class="meta">@ResultMap(&quot;News&quot;)</span></span><br><span class="line">List&lt;News&gt; <span class="title function_">QueryNewsByCId</span><span class="params">(<span class="meta">@Param(&quot;cid&quot;)</span> <span class="type">long</span> cid, <span class="meta">@Param(&quot;cPage&quot;)</span> <span class="type">int</span> cPage)</span>;</span><br></pre></td></tr></table></figure>
<h2 id="serviceå±‚">Serviceå±‚</h2>
<p>å‰é¢è¯´äº†DAOæ˜¯åŸå­æ“ä½œï¼ŒServiceå±‚åˆ™æ˜¯å°†DAOå±‚çš„æ“ä½œç»„åˆå½¢æˆæˆ‘ä»¬çœŸæ­£éœ€è¦çš„æ“ä½œã€‚ä¸¾ä¸ªä¾‹å­ï¼šDAOå·²ç»å®ç°äº†ï¼ŒæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨å’Œç”¨æˆ·åˆ›å»ºæ“ä½œï¼Œç°åœ¨æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œè¿™æ—¶æˆ‘éœ€è¦çš„æ˜¯å…ˆæŸ¥è¯¢è¿™ä¸ªç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨åˆ™æç¤ºå·²å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™åˆ›å»ºã€‚å°±æ˜¯è¿™æ ·çš„é“ç†ï¼ŒServiceæ˜¯DAOçš„ç»„åˆï¼Œå½¢æˆæœ‰é€»è¾‘çš„æ“ä½œã€‚ä¸‹é¢æ˜¯åˆ é™¤æŸæ¡æ–°é—»ï¼Œè¿å¸¦ç€åˆ é™¤è¿™æ¡æ–°é—»çš„è¯„è®ºå’Œå›¾ç‰‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">DeleteNews</span><span class="params">(<span class="type">long</span> nid)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.frontMapper.DeleteNews(nid) + <span class="built_in">this</span>.frontMapper.DeleteCommentN(nid) + <span class="built_in">this</span>.frontMapper.DeletePic(nid);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="controllerå±‚">Controllerå±‚</h2>
<p>ç®€å•çš„è¯´å°±æ˜¯Servletï¼Œåªä¸è¿‡æœ‰äº†æ¡†æ¶çš„åŠ æŒä½¿æˆ‘ä»¬ç¼–ç¨‹æ›´åŠ å®¹æ˜“ä¸”æ–¹ä¾¿ï¼ŒControllerå°±æ˜¯é™¤äº†ModelAndViewç¦»ç”¨æˆ·æœ€è¿‘çš„äº†ï¼Œè¿™æ—¶è¦å¤„ç†ç”¨æˆ·çš„Requestï¼Œå¹¶Responseï¼Œè°ƒç”¨å…³ç³»å°±æ˜¯ï¼Œé€šè¿‡å‰ç«¯äº¤äº’äº¤ç”±Controllerå¤„ç†ï¼ŒControllerè°ƒç”¨Serviceï¼ŒServiceè°ƒç”¨Daoï¼ŒDaoå®Œæˆæ•°æ®åº“æ“ä½œã€‚ä¸‹é¢æ˜¯åˆ©ç”¨layuiä¸Šä¼ ç”¨æˆ·å¤´åƒç¤ºä¾‹ï¼Œå›¾ç‰‡å‘½åæ–¹å¼æ˜¯ç”¨æˆ·id_icon.xxxï¼Œè¿™æ ·å¯ä¿è¯ç”¨æˆ·å¤´åƒå”¯ä¸€æ€§ï¼ŒåŒæ—¶è®¾ç½®äº†ä¸Šä¼ é™åˆ¶ä¸º1Mã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;upload&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> $ = layui.<span class="property">jquery</span></span></span><br><span class="line"><span class="language-javascript">            , upload = layui.<span class="property">upload</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ™®é€šå›¾ç‰‡ä¸Šä¼ </span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> uploadInst = upload.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>: <span class="string">&#x27;#test1&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            , <span class="attr">url</span>: <span class="string">&#x27;/NEWS_war_exploded/uploadUserIcon/&#x27;</span> <span class="comment">//æ”¹æˆæ‚¨è‡ªå·±çš„ä¸Šä¼ æ¥å£</span></span></span><br><span class="line"><span class="language-javascript">            ,<span class="attr">accept</span>:<span class="string">&#x27;images&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            ,<span class="attr">size</span>:<span class="number">1024</span></span></span><br><span class="line"><span class="language-javascript">            , <span class="attr">before</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//é¢„è¯»æœ¬åœ°æ–‡ä»¶ç¤ºä¾‹ï¼Œä¸æ”¯æŒie8</span></span></span><br><span class="line"><span class="language-javascript">                obj.<span class="title function_">preview</span>(<span class="keyword">function</span> (<span class="params">index, file, result</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&#x27;#demo1&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, result); <span class="comment">//å›¾ç‰‡é“¾æ¥ï¼ˆbase64ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            , <span class="attr">done</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//å¦‚æœä¸Šä¼ å¤±è´¥</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">code</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> layer.<span class="title function_">msg</span>(<span class="string">&#x27;ä¸Šä¼ å¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//ä¸Šä¼ æˆåŠŸ</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> demoText = $(<span class="string">&#x27;#demoText&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                demoText.<span class="title function_">html</span>(<span class="string">&#x27;&lt;span style=&quot;color: #4cae4c;&quot;&gt;ä¸Šä¼ æˆåŠŸ&lt;/span&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> fileupload = $(<span class="string">&quot;.image&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                fileupload.<span class="title function_">attr</span>(<span class="string">&quot;value&quot;</span>,res.<span class="property">data</span>.<span class="property">src</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(fileupload.<span class="title function_">attr</span>(<span class="string">&quot;value&quot;</span>));</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#userIcon&quot;</span>).<span class="title function_">val</span>(res.<span class="property">data</span>.<span class="property">src</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            , <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ¼”ç¤ºå¤±è´¥çŠ¶æ€ï¼Œå¹¶å®ç°é‡ä¼ </span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> demoText = $(<span class="string">&#x27;#demoText&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                demoText.<span class="title function_">html</span>(<span class="string">&#x27;&lt;span style=&quot;color: #FF5722;&quot;&gt;ä¸Šä¼ å¤±è´¥&lt;/span&gt; &lt;a class=&quot;layui-btn layui-btn-xs demo-reload&quot;&gt;é‡è¯•&lt;/a&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                demoText.<span class="title function_">find</span>(<span class="string">&#x27;.demo-reload&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    uploadInst.<span class="title function_">upload</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;uploadUserIcon&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Map <span class="title function_">upload</span><span class="params">(MultipartFile file, HttpSession session)</span>&#123;</span><br><span class="line"></span><br><span class="line">    Users users= (Users) session.getAttribute(<span class="string">&quot;userS&quot;</span>);</span><br><span class="line">    String prefix=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    String myFileName=users.getUserId()+<span class="string">&quot;_icon&quot;</span>;</span><br><span class="line">    <span class="comment">//ä¿å­˜ä¸Šä¼ </span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    InputStream fileInput=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(file!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">originalName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">            prefix=originalName.substring(originalName.lastIndexOf(<span class="string">&quot;.&quot;</span>)+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">filepath</span> <span class="operator">=</span> session.getServletContext().getRealPath(<span class="string">&quot;/Static/img&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> filepath +<span class="string">&quot;\\&quot;</span>+myFileName+<span class="string">&quot;.&quot;</span> + prefix;</span><br><span class="line"></span><br><span class="line">            File files=<span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">            <span class="comment">//æ‰“å°æŸ¥çœ‹ä¸Šä¼ è·¯å¾„</span></span><br><span class="line">            System.out.println(filepath);</span><br><span class="line">            <span class="keyword">if</span>(!files.getParentFile().exists())&#123;</span><br><span class="line">                files.getParentFile().mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            file.transferTo(files);</span><br><span class="line">            Map&lt;String,Object&gt; map2=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            Map&lt;String,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            map.put(<span class="string">&quot;code&quot;</span>,<span class="number">0</span>);</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;data&quot;</span>,map2);</span><br><span class="line">            map2.put(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;/Static/img/&quot;</span>+myFileName+<span class="string">&quot;.&quot;</span> + prefix);</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(out!=<span class="literal">null</span>)&#123;</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(fileInput!=<span class="literal">null</span>)&#123;</span><br><span class="line">                fileInput.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Map&lt;String,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;code&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¯´å®è¯å¼€å‘è¿‡ç¨‹é‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œå°ç»„å†…è¿˜å‡ºç°è¿‡çŸ›ç›¾ï¼Œä¸è¿‡ä¸€åˆ‡éƒ½è¿‡å»äº†ï¼Œç»“å±€è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæ‰€æœ‰å¤±è´¥å’Œæ•™è®­éƒ½æ˜¯æœ€å®è´µçš„è´¢å¯Œï¼Œå®ƒä¼šå¸®åŠ©æˆ‘èµ°å¥½æ¥ä¸‹çš„æ¯ä¸€æ­¥ã€‚</p>
<h2 id="é—®é¢˜ä¸å±•æœ›">é—®é¢˜ä¸å±•æœ›</h2>
<p>é¡¹ç›®åˆ°æœ€ç»ˆæäº¤çš„æ—¶å€™è¿˜ä¸æ˜¯æˆ‘æ»¡æ„çš„æ ·å­ï¼Œæˆ‘çŸ¥é“çš„å°±å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼šæƒé™å®‰å…¨æ–¹é¢å¹¶æ²¡æœ‰åšå¥½ï¼Œåº”è¯¥è®¾ç½®ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªæœªç™»å½•ç”¨æˆ·æ‰€æœ‰å¢åˆ æ”¹æ“ä½œï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªç³»ç»Ÿä¸­æ˜¯æ”¯æŒæ¸¸å®¢è®¿é—®çš„ï¼Œä¸è¿‡åªèƒ½æŸ¥çœ‹æ–°é—»ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸èƒ½æ“ä½œï¼Œä¸è¿‡æœ€ç»ˆè¿™ä¸ªä¹Ÿæ˜¯æ²¡æœ‰å®Œå…¨å®ç°ï¼Œæ˜¯ä¸ªé—æ†¾ï¼›è¿˜æœ‰å°±æ˜¯å¯¹äºæ•°æ®åº“æ–¹é¢æœ‰å¾ˆå¤§çš„é—æ†¾ï¼Œå› ä¸ºå¯¹äºMybatiså’ŒMySQLç†è§£å¹¶ä¸åˆ°ä½ï¼Œå¯¼è‡´æ•°æ®åº“è®¾è®¡çš„å¾ˆç³Ÿç³•ï¼Œå¯¹ä¹‹åçš„é€ æˆäº†å¾ˆå¤§å½±å“ï¼›è¿˜æœ‰å‰ç«¯è®¾è®¡å®åœ¨æ˜¯æä¸æ¥ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘ï¼Œæœ€åå¯¼è‡´ä¸€äº›jsçŸ›ç›¾ï¼Œæˆ–æ˜¯æå…¶å¤æ‚ï¼Œå¯è¯»æ€§æå·®ã€‚è¿™äº›éƒ½æ˜¯å·²ç»å­˜åœ¨çš„é—®é¢˜ã€‚</p>
<p>è¯´ä¸€è¯´å±•æœ›å§ï¼Œå‰å°åŠŸèƒ½å¤ªå°‘äº†ï¼Œè®°å¾—å½“æ—¶æˆ‘ä»¬æäº¤çš„é€‰é¢˜æŠ¥å‘Šä¸­çš„åŠŸèƒ½è¿˜æœ‰æ–°é—»æ”¶è—ã€ç‚¹èµã€è½¬å‘ï¼Œç”¨æˆ·ç­‰çº§ç³»ç»Ÿï¼Œç”¨æˆ·å…³æ³¨ç­‰ã€‚æœ€åéƒ½æ²¡æœ‰å®ç°ï¼Œå½“æ—¶å¯èƒ½æ²¡æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Œä¸çŸ¥é“æ€ä¹ˆåšï¼Œä½†åˆ°ç°åœ¨ï¼Œæ€ä¹ˆåšæˆ‘å·²ç»æœ‰é‚£ä¸ªæ¡†æ¶äº†ï¼Œå¦‚æœæœ‰æœºä¼šçœŸçš„å¯ä»¥æ‰“è¿™äº›åŠŸèƒ½åŠ ä¸Šå»ã€‚</p>
<h2 id="åˆä½œå¼€å‘é‡è¦æ€§">åˆä½œå¼€å‘é‡è¦æ€§</h2>
<p>è¿™å­¦æœŸè¿˜æœ‰ä¸€é—¨è¯¾â€œè½¯ä»¶å·¥ç¨‹â€ï¼Œè™½ç„¶è¿™é—¨è¯¾æœ‰äº›æ°´ï¼Œä½†è¿˜æ˜¯æœ‰äº›æ”¶è·çš„ã€‚</p>
<p>åˆä½œå¼€å‘ï¼Œéœ€æ±‚åˆ†æå¤ªé‡è¦äº†ï¼Œä¸€å®šè¦ç»Ÿä¸€çš„å¼€å‘ç¯å¢ƒï¼Œä»€ä¹ˆMySQLç‰ˆæœ¬ç»Ÿä¸€äº†ï¼ŒJDKç»Ÿä¸€ï¼ŒSpringç»Ÿä¸€ç­‰ç­‰å¤ªé‡è¦äº†ï¼Œä¸ç„¶çš„è¯å°±ä¼šé‡åˆ°è®¸è®¸å¤šå¤šçš„é—®é¢˜ã€‚</p>
<p>ä»£ç è§„èŒƒä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œå‘½åã€ç±»ã€æ¥å£ç­‰è¿™æ˜¯ç³»ç»Ÿèƒ½ä¸èƒ½èµ°çš„è¿œçš„è¯„åˆ¤æ ‡å‡†ã€‚å¦‚æœè®¾è®¡å¾—å½“é‚£ä¹ˆæ¥ä¸‹æ¥çš„å¼€å‘ä¼šå¾ˆé¡ºåˆ©ï¼ŒåŒ…æ‹¬ä¹‹åçš„ç»´æŠ¤å‡çº§ç­‰ï¼›å¦‚æœè®¾è®¡ä¸å½“é‚£ä¹ˆæ¥ä¸‹æ¥å°±åƒä»å¤´å¼€å§‹ä¸€æ ·éº»çƒ¦ã€‚</p>
<h2 id="ç»“æŸ">ç»“æŸ</h2>
<p>è¿™ç¯‡æ–‡ç« å¹²è´§ä¸å¤šï¼Œå°†æ•´ä¸ªé¡¹ç›®ä»‹ç»å®Œä¹Ÿä¸å¤ªç°å®ï¼Œæºç å…¨æ‘†ä¸Šå»ä¹Ÿæ²¡å¤ªå¤§æ„ä¹‰ã€‚æ‰€ä»¥è¿™é‡Œä¸»è¦è¯´çš„æ˜¯è¿™æ¬¡é¡¹ç›®çš„æ„Ÿå—ä¸æ€»ç»“ã€‚</p>
<h1 id="ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥</h1>
<p><a
href="https://wnhyang.github.io/article/f5984dab.html">mavenä¸npmä½¿ç”¨é•œåƒ</a></p>
<p><a href="https://wnhyang.github.io/article/48213f39.html">Java Web
å¤§ä½œä¸šï¼ˆåœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿï¼‰æ•°æ®åº“è®¾è®¡</a></p>
<p><a
href="https://wnhyang.github.io/article/254393f0.html">SSMæ•´åˆ</a></p>
<p><a
href="https://wnhyang.github.io/article/f2ba51cc.html">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨CKEditoré…ç½®ä¸ä½¿ç”¨</a></p>
<p><a
href="https://wnhyang.github.io/article/933adcc2.html">AJAXä¸JSONåˆæ¬¡ä½¿ç”¨</a></p>
]]></content>
      <tags>
        <tag>JavaWeb</tag>
        <tag>MySQL</tag>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaI/O</title>
    <url>/article/c0837e9c.html</url>
    <content><![CDATA[<p>è¯´ä¸ä¸ŠæŠ€æœ¯åˆ†äº«ï¼Œåªèƒ½ç®—æ˜¯å­¦ä¹ è®°å½•</p>
<span id="more"></span>
<h1 id="io">I/O</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java.io.*</span><br></pre></td></tr></table></figure>
<h2 id="file">File</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//file:æ–‡ä»¶\ç›®å½•\ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line"><span class="comment">//        File file = new File(&quot;d:/abc.txt&quot;);</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;hello.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç›¸å¯¹è·¯å¾„ï¼š&quot;</span>+file.getPath() );</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»å¯¹è·¯å¾„ï¼š&quot;</span>+file.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶åç§°ï¼š&quot;</span>+file.getName() );</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶å¤§å°ï¼š&quot;</span>+file.length() );<span class="comment">//å•ä½å­—èŠ‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(      file.isFile()==<span class="literal">true</span>? <span class="string">&quot;æ–‡ä»¶&quot;</span>:<span class="string">&quot;éæ–‡ä»¶&quot;</span> );</span><br><span class="line">        System.out.println(      file.isDirectory()==<span class="literal">true</span>? <span class="string">&quot;ç›®å½•&quot;</span>:<span class="string">&quot;éç›®å½•&quot;</span> );</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> file.exists();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(flag) &#123;</span><br><span class="line"><span class="comment">//                file.delete();</span></span><br><span class="line">                <span class="comment">//å½»åº•åˆ é™¤ï¼ˆä¸è¿‡å›æ”¶ç«™ï¼‰</span></span><br><span class="line">                System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                file.createNewFile();</span><br><span class="line">                System.out.println(<span class="string">&quot;åˆ›å»ºæˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç›¸å¯¹è·¯å¾„/ç»å¯¹è·¯å¾„ï¼š</p>
<pre><code>- å¦‚æœFIleï¼ˆ&quot;ç»å¯¹è·¯å¾„&quot;ï¼‰ï¼šgetPath() å’ŒgetAbsolutePath()çš„ç»“æœä¸€è‡´ï¼Œæ‰“å°çš„éƒ½æ˜¯ç»å¯¹è·¯å¾„
- å¦‚æœFIleï¼ˆ&quot;ç›¸å¯¹è·¯å¾„&quot;ï¼‰ï¼šgetPath() æ‰“å°ç›¸å¯¹è·¯å¾„;getAbsolutePathï¼ˆï¼‰æ‰“å°ç»å¯¹è·¯å¾„</code></pre>
<h2 id="æµ">æµ</h2>
<p>æµï¼šæ˜¯ä¸€ç§FIFOçš„æ•°æ®ç»“æ„</p>
<blockquote>
<p>è¯´æ˜ï¼š1.å­—èŠ‚æµå°±æ˜¯ å°†å†…å®¹è½¬ä¸ºäº†å­—èŠ‚å½¢å¼è¿›è¡Œä¼ è¾“ï¼Œ 1 å­—èŠ‚ -&gt;8äºŒè¿›åˆ¶
ï¼ŒäºŒè¿›åˆ¶å¯ä»¥ä¼ è¾“ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œå› æ­¤å­—èŠ‚æµä¹Ÿå¯ä»¥ä¼ è¾“ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚</p>
<p>2.å­—èŠ‚æµæ˜¯8ä½é€šç”¨å­—èŠ‚æµ( 1 å­—èŠ‚ -&gt;8äºŒè¿›åˆ¶ )
ï¼ˆå­—èŠ‚æµå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹ï¼Œå¤„ç†æ–‡æœ¬æ–‡ä»¶ä»¥å¤–çš„å…¶ä»–æ–‡ä»¶ï¼‰
;å­—ç¬¦æµæ˜¯16ä½çš„unicodeå­—ç¬¦æµ ï¼ˆåªç”¨äºå¤„ç†å­—ç¬¦ï¼Œå¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼‰</p>
<p>3.åœ¨whileå¾ªç¯ä¸­ åˆ†æ‰¹æ¬¡ä¼ è¾“æ—¶ï¼Œå­—èŠ‚æµä½¿ç”¨çš„ç¼“å†²åŒºæ˜¯
byte[],å­—ç¬¦æµä½¿ç”¨çš„ç¼“å†²åŒºæ˜¯ char[]</p>
</blockquote>
<figure>
<img data-src="https://www.runoob.com/wp-content/uploads/2013/12/iostream2xx.png"
alt="IOæµç»†åˆ†" />
<figcaption aria-hidden="true">IOæµç»†åˆ†</figcaption>
</figure>
<h3 id="è¾“å…¥">è¾“å…¥</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputStreamDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in =   <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:/abc.txt&quot;</span>));</span><br><span class="line"><span class="comment">//            InputStream in = new FileInputStream(&quot;d://abc.txt&quot;);</span></span><br><span class="line">            System.out.println(in.available());<span class="comment">//file.length()</span></span><br><span class="line">            <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[in.available()] ;</span><br><span class="line">            in.read(buf);<span class="comment">//å°†æ–‡ä»¶abc.txtå†…å®¹è¯»å–åˆ°bufä¸­</span></span><br><span class="line">            <span class="comment">//buf :byte[] -&gt;String</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf));</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                in.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="è¾“å‡º">è¾“å‡º</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OutputStreamDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:/xyz.txt&quot;</span>) ;</span><br><span class="line">             out.write(<span class="string">&quot;helloworld123&quot;</span>.getBytes()); <span class="comment">//å†…å­˜-&gt;xyz.txt</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                out.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="æ–‡ä»¶å¤åˆ¶">æ–‡ä»¶å¤åˆ¶</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileCopy</span> &#123;</span><br><span class="line">    <span class="comment">//abc.txt-&gt;å†…å­˜-&gt;xyz.txt</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//abc.txt-&gt;å†…å­˜</span></span><br><span class="line">             in = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:/abc.txt&quot;</span>) ;</span><br><span class="line"></span><br><span class="line">             out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:/xyz.txt&quot;</span>) ;</span><br><span class="line">            <span class="comment">//å¼€è¾Ÿ10å­—èŠ‚çš„å†…å­˜</span></span><br><span class="line">            <span class="type">byte</span> []buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">10</span>] ;</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span> ;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>((len= in.read(buf)) != -<span class="number">1</span>)&#123;<span class="comment">//in -&gt;buf</span></span><br><span class="line">            	out.write(buf,<span class="number">0</span>,len);<span class="comment">//buf-&gt;out</span></span><br><span class="line">        	&#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(out !=<span class="literal">null</span>)out.close();</span><br><span class="line">                <span class="keyword">if</span>(in !=<span class="literal">null</span>) in.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨å­—ç¬¦æµè¿›è¡Œæ–‡ä»¶çš„å¤åˆ¶">ä½¿ç”¨å­—ç¬¦æµè¿›è¡Œæ–‡ä»¶çš„å¤åˆ¶</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileCopyCharactor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ–‡ä»¶-&gt;å†…å­˜ï¼ˆReaderï¼‰</span></span><br><span class="line">        <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">Writer</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;d:/ä¸ªäººä»‹ç».txt&quot;</span>);</span><br><span class="line">             writer = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;d:/ä¸ªäººå®Œæ•´ä»‹ç».txt&quot;</span>) ;</span><br><span class="line"></span><br><span class="line">            <span class="type">char</span>[] buf = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">4</span>];</span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>() ;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span> ;</span><br><span class="line">            <span class="keyword">while</span>((len =reader.read(  buf)) != -<span class="number">1</span> )&#123;</span><br><span class="line">                <span class="comment">// str += buf ;</span></span><br><span class="line">                sb.append(buf,<span class="number">0</span>,len) ;<span class="comment">//å°†æ¯æ¬¡è¯»å–åˆ°çš„ 4ä¸ªå­—ç¬¦ æ‹¼æ¥èµ·æ¥</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(sb);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åœ¨å†…å­˜ä¸­ æ›¿æ¢å ä½ç¬¦</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> sb.toString() ;</span><br><span class="line">            content= content.replace(<span class="string">&quot;&#123;name&#125;&quot;</span>,<span class="string">&quot;é¢œç¾¤&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&#123;enterprise&#125;&quot;</span>,<span class="string">&quot;è“æ¡¥å­¦é™¢&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&#123;weixin&#125;&quot;</span>,<span class="string">&quot;157468995&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å°†æ›¿æ¢åçš„å†…å®¹ è¾“å‡ºåˆ°æ–‡ä»¶   ï¼Œå†…å­˜ -&gt;æ–‡ä»¶ï¼ˆWriterï¼‰</span></span><br><span class="line">            writer.write(content);</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆåŠŸ...&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//            writer.flush(); å°†ç®¡é“ä¸­çš„æ•°æ® åˆ·å‡ºåˆ° æ–‡ä»¶ä¸­</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">if</span>(writer!=<span class="literal">null</span>) writer.close();</span><br><span class="line">                <span class="keyword">if</span>(reader!=<span class="literal">null</span>) reader.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå¸¦ç¼“å†²åŒºçš„å­—ç¬¦æµ">è‡ªå¸¦ç¼“å†²åŒºçš„å­—ç¬¦æµ</h3>
<p>ç¼“å†²åŒºå¤§å°ï¼Œä¸€è¡Œ</p>
<p>BufferedReader /BufferedWriter</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileCopyCharactorBuffered</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ–‡ä»¶-&gt;å†…å­˜ï¼ˆReaderï¼‰</span></span><br><span class="line">        <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">Writer</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line"></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;d:/ä¸ªäººä»‹ç».txt&quot;</span>);</span><br><span class="line">             writer = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;d:/ä¸ªäººå®Œæ•´ä»‹ç»2.txt&quot;</span>) ;</span><br><span class="line"></span><br><span class="line">             br = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>( reader) ;</span><br><span class="line">             bw = <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>( writer);</span><br><span class="line"></span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>() ;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>( (line= br.readLine()) != <span class="literal">null</span>   )&#123;</span><br><span class="line">                sb.append(line) ;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(sb);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åœ¨å†…å­˜ä¸­ æ›¿æ¢å ä½ç¬¦</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> sb.toString() ;</span><br><span class="line">            content= content.replace(<span class="string">&quot;&#123;name&#125;&quot;</span>,<span class="string">&quot;é¢œç¾¤&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&#123;enterprise&#125;&quot;</span>,<span class="string">&quot;è“æ¡¥å­¦é™¢&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&#123;weixin&#125;&quot;</span>,<span class="string">&quot;157468995&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å°†æ›¿æ¢åçš„å†…å®¹ è¾“å‡ºåˆ°æ–‡ä»¶   ï¼Œå†…å­˜ -&gt;æ–‡ä»¶ï¼ˆWriterï¼‰</span></span><br><span class="line"></span><br><span class="line">            bw.write(content);</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆåŠŸ...&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//            writer.flush(); å°†ç®¡é“ä¸­çš„æ•°æ® åˆ·å‡ºåˆ° æ–‡ä»¶ä¸­</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            *    1å…ˆå…³å‡ºï¼Œå†å…³å…¥</span></span><br><span class="line"><span class="comment">            *    2ä»å¤–å¾€å†…å…³  brå¤– = new BufferedReader( readerå†…) ;</span></span><br><span class="line"><span class="comment">            * */</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">if</span>(bw != <span class="literal">null</span>) bw.close();</span><br><span class="line">              <span class="keyword">if</span>(br!=<span class="literal">null</span> )  br.close();</span><br><span class="line">               <span class="keyword">if</span>(writer!=<span class="literal">null</span>) writer.close();</span><br><span class="line">                <span class="keyword">if</span>(reader!=<span class="literal">null</span>) reader.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¸¦ç¼“å†²åŒºçš„å­—ç¬¦æµ å¯¹è±¡ = new å¸¦ç¼“å†²åŒºçš„å­—ç¬¦æµ(å­—ç¬¦æµ) ï¼›</p>
<h3 id="äºŒè¿›åˆ¶æµ">äºŒè¿›åˆ¶æµ</h3>
<p>DataInputStream/DataOutputStream</p>
<p>äºŒè¿›åˆ¶æµ å¯¹è±¡ = new äºŒè¿›åˆ¶æµ(å­—èŠ‚æµ) ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="comment">//äºŒè¿›åˆ¶æµ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileCopyData</span> &#123;</span><br><span class="line">    <span class="comment">//abc.txt-&gt;å†…å­˜-&gt;xyz.txt</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">dataInput</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">dataOutput</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//abc.txt-&gt;å†…å­˜</span></span><br><span class="line">             in = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:/IMG_6285.JPG&quot;</span>) ;</span><br><span class="line"></span><br><span class="line">              dataInput = <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(in) ;<span class="comment">//å­—èŠ‚æµ-&gt;äºŒè¿›åˆ¶æµ</span></span><br><span class="line"></span><br><span class="line">             out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;e:/é¢œç¾¤å¾®ä¿¡3.jpg&quot;</span>) ;</span><br><span class="line">              dataOutput = <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(out );<span class="comment">//å­—èŠ‚æµ-&gt;äºŒè¿›åˆ¶æµ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¼€è¾Ÿ10å­—èŠ‚çš„å†…å­˜</span></span><br><span class="line">            <span class="type">byte</span> []buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">10</span>] ;</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span> ;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(   (len= dataInput.read(buf)) != -<span class="number">1</span>)&#123;<span class="comment">//in -&gt;buf</span></span><br><span class="line">            dataOutput.write(buf,<span class="number">0</span>,len);<span class="comment">//buf-&gt;out</span></span><br><span class="line">        &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(dataOutput !=<span class="literal">null</span>) dataOutput.close();</span><br><span class="line">                <span class="keyword">if</span>(dataInput !=<span class="literal">null</span>) dataInput.close();</span><br><span class="line">                <span class="keyword">if</span>(out !=<span class="literal">null</span>)out.close();</span><br><span class="line">                <span class="keyword">if</span>(in !=<span class="literal">null</span>) in.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="è£…é¥°æ¨¡å¼ioè®¾è®¡çš„æ ¸å¿ƒæ€æƒ³">è£…é¥°æ¨¡å¼ï¼šIOè®¾è®¡çš„æ ¸å¿ƒæ€æƒ³</h2>
<p>åœ¨ä¸å½±å“åŸæœ‰å¯¹è±¡çš„å‰æä¸‹ï¼Œæ— ä¾µå…¥çš„ç»™ä¸€ä¸ªå¯¹è±¡å¢ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<p>new InputStreamReader( new FileInputStream(new File("d:/abc.txt")) )
;</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.bilibili.com/video/BV114411W7id?p=56">https://www.bilibili.com/video/BV114411W7id?p=56</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>I/OåŸºç¡€è¿˜æ˜¯å¾ˆé‡è¦çš„ã€‚</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Java Web å¤§ä½œä¸šï¼ˆåœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿï¼‰æ•°æ®åº“è®¾è®¡</title>
    <url>/article/48213f39.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>å¦‚æ ‡é¢˜æ‰€ç¤ºï¼Œè¦å®Œæˆçš„æ˜¯åœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡ï¼Œæœ€å¼€å§‹è¿™æ–¹é¢ä¸€ç›´æ²¡æœ‰è¿›å±•ï¼Œç›´åˆ°æœåˆ°ä¸€äº›æœ‰å¸®åŠ©çš„æ–‡ç« åï¼Œå¹¶è§£å†³äº†æ–°é—»æ–‡ç« çš„å­˜å‚¨é—®é¢˜ï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å¹¶ç›´æ¥å­˜å…¥æ–¹å¼ï¼‰ï¼Œç»ˆäºå¯ä»¥å¼€å±•å·¥ä½œäº†ï¼</p>
<p>å£°æ˜ï¼š</p>
<p>è™½ç„¶è¿™é‡Œçš„æ•°æ®åº“è®¾è®¡åªæ˜¯å¤§éƒ¨åˆ†æ•°æ®åº“çš„è®¾è®¡ï¼Œå› ä¸ºè¿™ä¸ªé¡¹ç›®æ˜¯åˆä½œå¼€å‘çš„ï¼Œæˆ‘åªä¼šä»‹ç»æˆ‘è®¾è®¡æˆ–è¯´æ˜¯æˆ‘æœ€ç†Ÿæ‚‰çš„é‚£éƒ¨åˆ†æ•°æ®åº“ã€‚</p>
<span id="more"></span>
<h1 id="ä¸»è¦æ•°æ®åº“è®¾è®¡">ä¸»è¦æ•°æ®åº“è®¾è®¡</h1>
<p>è¿™é‡Œçš„è®¾è®¡è¿˜ä¸æ˜¯å¾ˆæˆç†Ÿï¼Œå¿…ç„¶å­˜åœ¨äº›è®¸é—®é¢˜ï¼Œä½†æ€»è¦ç»å†è¿™ä¸€æ­¥çš„å˜›ã€‚</p>
<h2 id="æ•°æ®åº“webnews">æ•°æ®åº“webnews</h2>
<p>ç®€å•è¯´ä¸€è¯´å§ï¼Œå­˜åœ¨å¤ªå¤šé—®é¢˜äº†ï¼Œæ–‡ç« ç»“å°¾ä¼šå†æåˆ°ã€‚</p>
<p>usersæ•°æ®è¡¨</p>
<table>
<thead>
<tr class="header">
<th>å</th>
<th>ç±»å‹</th>
<th>é•¿åº¦</th>
<th>ä¸æ˜¯null</th>
<th>é”®</th>
<th>å­—æ®µè¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>user_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td>ä¸»é”®</td>
<td>ç”¨æˆ·idï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œé€’å¢</td>
</tr>
<tr class="even">
<td>user_name</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>ç”¨æˆ·å</td>
</tr>
<tr class="odd">
<td>user_password</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>å¯†ç </td>
</tr>
<tr class="even">
<td>user_phone</td>
<td>varchar</td>
<td>20</td>
<td></td>
<td></td>
<td>æ‰‹æœºå·</td>
</tr>
<tr class="odd">
<td>user_address</td>
<td>varchar</td>
<td>255</td>
<td></td>
<td></td>
<td>åœ°å€</td>
</tr>
<tr class="even">
<td>user_detail</td>
<td>varchar</td>
<td>255</td>
<td></td>
<td></td>
<td>è¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr class="odd">
<td>user_email</td>
<td>varchar</td>
<td>40</td>
<td>*</td>
<td></td>
<td>é‚®ç®±ï¼Œå¯¹ç…§ç€ç”¨æˆ·idï¼Œç™»å½•ä½¿ç”¨</td>
</tr>
<tr class="even">
<td>user_icon</td>
<td>varchar</td>
<td>255</td>
<td></td>
<td></td>
<td>ç”¨æˆ·å¤´åƒ</td>
</tr>
</tbody>
</table>
<p>categoryæ•°æ®è¡¨</p>
<table>
<thead>
<tr class="header">
<th>å</th>
<th>ç±»å‹</th>
<th>é•¿åº¦</th>
<th>ä¸æ˜¯null</th>
<th>é”®</th>
<th>å­—æ®µè¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>category_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td>ä¸»é”®</td>
<td>æ–°é—»ç±»å‹idï¼Œå›ºå®šå‡ ä¸ªç±»å‹</td>
</tr>
<tr class="even">
<td>category_name</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>æ–°é—»ç±»å‹åç§°</td>
</tr>
</tbody>
</table>
<p>newsæ•°æ®è¡¨</p>
<table>
<thead>
<tr class="header">
<th>å</th>
<th>ç±»å‹</th>
<th>é•¿åº¦</th>
<th>ä¸æ˜¯null</th>
<th>é”®</th>
<th>å­—æ®µè¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>news_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td>ä¸»é”®</td>
<td>æ–°é—»idï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œé€’å¢</td>
</tr>
<tr class="even">
<td>category_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td></td>
<td>æ–°é—»ç±»å‹id</td>
</tr>
<tr class="odd">
<td>user_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td></td>
<td>ç”¨æˆ·id</td>
</tr>
<tr class="even">
<td>title</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>æ–°é—»æ ‡é¢˜</td>
</tr>
<tr class="odd">
<td>content</td>
<td>longtext</td>
<td></td>
<td>*</td>
<td></td>
<td>æ–°é—»å†…å®¹</td>
</tr>
<tr class="even">
<td>state</td>
<td>int</td>
<td>1</td>
<td>*</td>
<td></td>
<td>æ–°é—»çŠ¶æ€ï¼ˆ0ï¼šå®¡æ ¸ä¸­ï¼Œ1ï¼šé€šè¿‡ï¼Œ2ï¼šä¸é€šè¿‡ï¼‰</td>
</tr>
<tr class="odd">
<td>createTime</td>
<td>datetime</td>
<td></td>
<td>*</td>
<td></td>
<td>æ–°é—»åˆ›å»ºæ—¶é—´</td>
</tr>
</tbody>
</table>
<p>commentsæ•°æ®è¡¨</p>
<table>
<thead>
<tr class="header">
<th>å</th>
<th>ç±»å‹</th>
<th>é•¿åº¦</th>
<th>ä¸æ˜¯null</th>
<th>é”®</th>
<th>å­—æ®µè¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>comment_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td>ä¸»é”®</td>
<td>è¯„è®ºidï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œé€’å¢</td>
</tr>
<tr class="even">
<td>user_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td></td>
<td>ç”¨æˆ·id</td>
</tr>
<tr class="odd">
<td>news_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td></td>
<td>æ–°é—»id</td>
</tr>
<tr class="even">
<td>content</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>è¯„è®ºå†…å®¹</td>
</tr>
<tr class="odd">
<td>createTime</td>
<td>datetime</td>
<td></td>
<td>*</td>
<td></td>
<td>è¯„è®ºæ—¶é—´</td>
</tr>
</tbody>
</table>
<p>feedbacksæ•°æ®è¡¨</p>
<table>
<thead>
<tr class="header">
<th>å</th>
<th>ç±»å‹</th>
<th>é•¿åº¦</th>
<th>ä¸æ˜¯null</th>
<th>é”®</th>
<th>å­—æ®µè¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>feedback_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td>ä¸»é”®</td>
<td>åé¦ˆidï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œé€’å¢</td>
</tr>
<tr class="even">
<td>user_id</td>
<td>bigint</td>
<td>20</td>
<td>*</td>
<td></td>
<td>ç”¨æˆ·id</td>
</tr>
<tr class="odd">
<td>type</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>ç±»å‹ï¼Œå›ºå®šå‡ ç§</td>
</tr>
<tr class="even">
<td>content</td>
<td>varchar</td>
<td>255</td>
<td>*</td>
<td></td>
<td>åé¦ˆå†…å®¹</td>
</tr>
<tr class="odd">
<td>createTime</td>
<td>datetime</td>
<td></td>
<td>*</td>
<td></td>
<td>åé¦ˆæ—¶é—´</td>
</tr>
</tbody>
</table>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è®¾è®¡å­˜åœ¨è®¸å¤šä¸å½“çš„åœ°æ–¹ï¼Œåœ¨è®¾è®¡ä¹‹å‰åº”è¯¥æ¸…æ¥šçš„äº†è§£éœ€æ±‚ï¼Œå¯¹æ¯ä¸ªæ•°æ®è¡¨å‘½åã€æ•°æ®å­—æ®µåã€æ•°æ®ç±»å‹ã€é•¿åº¦ã€æ˜¯å¦ä¸ºnullã€é”®ä¿¡æ¯ï¼Œä¸¥æ ¼æŠŠå…³ï¼Œå¦‚æ•°æ®è¡¨ååº”è¯¥è§„èŒƒï¼Œæ–¹ä¾¿æ„é€ javaç±»ã€sqlçš„ç¼–å†™ï¼Œæ•°æ®ç±»å‹åº”ä¸¥æ ¼å¯¹ç…§mybatiså¯¹åº”ç±»å‹è®¾è®¡ï¼Œé•¿åº¦å¤§å°è¦åšåˆ°åœ¨å­˜çš„ä¸‹çš„å‰æä¸‹ï¼Œå°½é‡å‡å°‘æµªè´¹ã€‚è¿™æ¬¡è®¾è®¡æ˜¯æŒºçƒ‚çš„ï¼Œä¹Ÿå°±å› æ­¤åœ¨ä¹‹ååˆä½œå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä¸å°‘éº»çƒ¦ã€‚æ•°æ®åº“è®¾è®¡å¯å¤ªé‡è¦äº†ï¼</p>
<p><a href="https://wnhyang.github.io/article/54805cfd.html">Java Web
å¤§ä½œä¸šï¼ˆåœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿï¼‰æ€»ç»“</a></p>
]]></content>
      <tags>
        <tag>JavaWeb</tag>
        <tag>MySQL</tag>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaGUIç¼–ç¨‹</title>
    <url>/article/93011f6b.html</url>
    <content><![CDATA[<p>è™½è¯´javaåœ¨åšpcåº”ç”¨å¹¶ä¸æ˜¯å¾ˆæœ‰å¸‚åœºï¼Œæˆ‘é‚£æ—¶å­¦çš„ä¹Ÿæ˜¯VSä¸‹ç”¨WPFåšçš„ï¼Œæœ‰äº†WPFé‚£äº›åŸºç¡€ï¼Œä¹‹åçš„Androidä¹Ÿæ›´å®¹æ˜“å…¥æ‰‹ï¼Œè¿˜æ˜¯æœ‰äº›å¸®åŠ©çš„ã€‚</p>
<span id="more"></span>
<h1 id="guiç¼–ç¨‹">GUIç¼–ç¨‹</h1>
<h2 id="ç»„ä»¶å’Œå®¹å™¨">ç»„ä»¶å’Œå®¹å™¨</h2>
<h3 id="frame">Frame</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFrame2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyFrame</span> <span class="variable">myFrame1</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">MyFrame</span>(<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,Color.blue);</span><br><span class="line">        <span class="type">MyFrame</span> <span class="variable">myFrame2</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">MyFrame</span>(<span class="number">200</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,Color.yellow);</span><br><span class="line">        <span class="type">MyFrame</span> <span class="variable">myFrame3</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">MyFrame</span>(<span class="number">300</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,Color.red);</span><br><span class="line">        <span class="type">MyFrame</span> <span class="variable">myFrame4</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">MyFrame</span>(<span class="number">400</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,Color.gray);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyFrame</span> <span class="keyword">extends</span> <span class="title class_">Frame</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> id=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFrame</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> w, <span class="type">int</span> h, Color color)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;MyFrame&quot;</span>+(++id));</span><br><span class="line">        setBackground(color);</span><br><span class="line">        setBounds(x,y,w,h);</span><br><span class="line">        setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="panel">Panel</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPanel</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Frame frame=<span class="keyword">new</span> <span class="title class_">Frame</span>();</span><br><span class="line">        Panel panel=<span class="keyword">new</span> <span class="title class_">Panel</span>();</span><br><span class="line"></span><br><span class="line">        frame.setLayout(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        frame.setBounds(<span class="number">300</span>,<span class="number">300</span>,<span class="number">500</span>,<span class="number">500</span>);</span><br><span class="line">        frame.setBackground(<span class="keyword">new</span> <span class="title class_">Color</span>(<span class="number">40</span>,<span class="number">160</span>,<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line">        panel.setBounds(<span class="number">50</span>,<span class="number">50</span>,<span class="number">400</span>,<span class="number">400</span>);</span><br><span class="line">        panel.setBackground(<span class="keyword">new</span> <span class="title class_">Color</span>(<span class="number">90</span>,<span class="number">20</span>,<span class="number">150</span>));</span><br><span class="line"></span><br><span class="line">        frame.add(panel);</span><br><span class="line"></span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        frame.addWindowListener(<span class="keyword">new</span> <span class="title class_">WindowAdapter</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">windowClosing</span><span class="params">(WindowEvent e)</span> &#123;</span><br><span class="line">                System.exit(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸ƒå±€ç®¡ç†å™¨">å¸ƒå±€ç®¡ç†å™¨</h2>
<h3 id="æµå¼å¸ƒå±€">æµå¼å¸ƒå±€</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFlowLayout</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Frame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Frame</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">button1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;button1&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">button2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;button2&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">button3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;button3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        frame.setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>(FlowLayout.LEFT));</span><br><span class="line"></span><br><span class="line">        frame.setSize(<span class="number">200</span>,<span class="number">200</span>);</span><br><span class="line">        frame.add(button1);java</span><br><span class="line">        frame.add(button2);</span><br><span class="line">        frame.add(button3);</span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¾¹ç•Œå¸ƒå±€">è¾¹ç•Œå¸ƒå±€</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBorderLayout</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Frame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Frame</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">east</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;East&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">west</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;West&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">south</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;South&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">north</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;North&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">center</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;Center&quot;</span>);</span><br><span class="line"></span><br><span class="line">        frame.add(east,BorderLayout.EAST);</span><br><span class="line">        frame.add(west,BorderLayout.WEST);</span><br><span class="line">        frame.add(south,BorderLayout.SOUTH);</span><br><span class="line">        frame.add(north,BorderLayout.NORTH);</span><br><span class="line">        frame.add(center,BorderLayout.CENTER);</span><br><span class="line"></span><br><span class="line">        frame.setSize(<span class="number">500</span>,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç½‘æ ¼å¸ƒå±€">ç½‘æ ¼å¸ƒå±€</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGridLayout</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Frame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Frame</span>(<span class="string">&quot;GridLayout&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;btn2&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;btn3&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;btn4&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;btn5&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;btn6&quot;</span>);</span><br><span class="line"></span><br><span class="line">        frame.setLayout(<span class="keyword">new</span> <span class="title class_">GridLayout</span>(<span class="number">3</span>,<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">        frame.add(btn1);</span><br><span class="line">        frame.add(btn2);</span><br><span class="line">        frame.add(btn3);</span><br><span class="line">        frame.add(btn4);</span><br><span class="line">        frame.add(btn5);</span><br><span class="line">        frame.add(btn6);</span><br><span class="line"></span><br><span class="line">        frame.pack();</span><br><span class="line"></span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº‹ä»¶ç›‘å¬">äº‹ä»¶ç›‘å¬</h2>
<h3 id="å•ä¸ªæŒ‰é’®">å•ä¸ªæŒ‰é’®</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestActionEvent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Frame frame=<span class="keyword">new</span> <span class="title class_">Frame</span>();</span><br><span class="line">        Button button=<span class="keyword">new</span> <span class="title class_">Button</span>();</span><br><span class="line">        MyActionListener myActionListener=<span class="keyword">new</span> <span class="title class_">MyActionListener</span>();</span><br><span class="line">        button.addActionListener(myActionListener);</span><br><span class="line"></span><br><span class="line">        frame.add(button,BorderLayout.CENTER);</span><br><span class="line">        frame.pack();</span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        windowClosing(frame);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">windowClosing</span><span class="params">(Frame frame)</span>&#123;</span><br><span class="line">        frame.addWindowListener(<span class="keyword">new</span> <span class="title class_">WindowAdapter</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">windowClosing</span><span class="params">(WindowEvent e)</span> &#123;</span><br><span class="line">                System.exit(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyActionListener</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;as&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¤šä¸ªæŒ‰é’®">å¤šä¸ªæŒ‰é’®</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestAction2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Frame frame=<span class="keyword">new</span> <span class="title class_">Frame</span>(<span class="string">&quot;å¼€å§‹-åœæ­¢&quot;</span>);</span><br><span class="line">        Button start=<span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">        Button stop=<span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;stop&quot;</span>);</span><br><span class="line">        start.setActionCommand(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">        stop.setActionCommand(<span class="string">&quot;stop&quot;</span>);</span><br><span class="line">        MyMonitor myMonitor=<span class="keyword">new</span> <span class="title class_">MyMonitor</span>();</span><br><span class="line">        start.addActionListener(myMonitor);</span><br><span class="line">        stop.addActionListener(myMonitor);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        frame.add(start,BorderLayout.NORTH);</span><br><span class="line">        frame.add(stop,BorderLayout.SOUTH);</span><br><span class="line">        frame.pack();</span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyMonitor</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç‚¹å‡»ï¼Œmsg=&gt;&quot;</span>+e.getActionCommand());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–‡æœ¬æ¡†">æ–‡æœ¬æ¡†</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestText0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MyFrame2</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyFrame2</span> <span class="keyword">extends</span> <span class="title class_">Frame</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFrame2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">TextField</span> <span class="variable">textField</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TextField</span>();</span><br><span class="line">        add(textField);</span><br><span class="line"></span><br><span class="line">        <span class="type">MyActionListener2</span> <span class="variable">myActionListener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyActionListener2</span>();</span><br><span class="line">        textField.addActionListener(myActionListener);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®æ›¿æ¢ç¼–ç </span></span><br><span class="line">        textField.setEchoChar(<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        pack();</span><br><span class="line">        setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyActionListener2</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">        <span class="type">TextField</span> <span class="variable">textField</span> <span class="operator">=</span> (TextField) e.getSource();</span><br><span class="line">        System.out.println(textField.getText());</span><br><span class="line">        textField.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€æ˜“è®¡ç®—å™¨">ç®€æ˜“è®¡ç®—å™¨</h3>
<p><strong>ç»„åˆ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCalc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Calculator</span>().loadFrame();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> <span class="keyword">extends</span> <span class="title class_">Frame</span> &#123;</span><br><span class="line">    TextField num1,num2,num3;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loadFrame</span><span class="params">()</span>&#123;</span><br><span class="line">        num1 = <span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">        num2 = <span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">        num3 = <span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;20&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">        <span class="type">Label</span> <span class="variable">label</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Label</span>(<span class="string">&quot;+&quot;</span>);</span><br><span class="line"></span><br><span class="line">        btn.addActionListener(<span class="keyword">new</span> <span class="title class_">MyCalcActionListener</span>(<span class="built_in">this</span>));</span><br><span class="line"></span><br><span class="line">        setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line">        add(num1);</span><br><span class="line">        add(label);</span><br><span class="line">        add(num2);</span><br><span class="line">        add(btn);</span><br><span class="line">        add(num3);</span><br><span class="line">        pack();</span><br><span class="line">        setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCalcActionListener</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span> &#123;</span><br><span class="line">    Calculator calculator=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCalcActionListener</span><span class="params">(Calculator calculator)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.calculator=calculator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">       <span class="type">int</span> n1= Integer.parseInt(calculator.num1.getText());</span><br><span class="line">       <span class="type">int</span> n2= Integer.parseInt(calculator.num2.getText());</span><br><span class="line"></span><br><span class="line">       calculator.num3.setText(<span class="string">&quot;&quot;</span>+(n1+n2));</span><br><span class="line"></span><br><span class="line">       calculator.num1.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">       calculator.num2.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å†…éƒ¨ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCalc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Calculator</span>().loadFrame();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> <span class="keyword">extends</span> <span class="title class_">Frame</span> &#123;</span><br><span class="line">    TextField num1,num2,num3;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loadFrame</span><span class="params">()</span>&#123;</span><br><span class="line">        num1 = <span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">        num2 = <span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">        num3 = <span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;20&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Button</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">        <span class="type">Label</span> <span class="variable">label</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Label</span>(<span class="string">&quot;+&quot;</span>);</span><br><span class="line"></span><br><span class="line">        btn.addActionListener(<span class="keyword">new</span> <span class="title class_">MyCalcActionListener</span>());</span><br><span class="line"></span><br><span class="line">        setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line">        add(num1);</span><br><span class="line">        add(label);</span><br><span class="line">        add(num2);</span><br><span class="line">        add(btn);</span><br><span class="line">        add(num3);</span><br><span class="line">        pack();</span><br><span class="line">        setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCalcActionListener</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">            <span class="type">int</span> n1= Integer.parseInt(num1.getText());</span><br><span class="line">            <span class="type">int</span> n2= Integer.parseInt(num2.getText());</span><br><span class="line"></span><br><span class="line">            num3.setText(<span class="string">&quot;&quot;</span>+(n1+n2));</span><br><span class="line"></span><br><span class="line">            num1.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            num2.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç”»ç¬”paint">ç”»ç¬”Paint</h3>
<h3 id="é¼ æ ‡ç›‘å¬">é¼ æ ‡ç›‘å¬</h3>
<h3 id="çª—å£ç›‘å¬">çª—å£ç›‘å¬</h3>
<h3 id="é”®ç›˜ç›‘å¬">é”®ç›˜ç›‘å¬</h3>
<h2 id="swing">Swing</h2>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.bilibili.com/video/BV1DJ411B75F">https://www.bilibili.com/video/BV1DJ411B75F</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å‰é¢å¾ˆå¤šéƒ½æ²¡å»æ€»ç»“ï¼Œæˆ‘æ˜¯è§‰å¾—è¿™æ–¹é¢äº†è§£å°±å¥½ï¼Œä¸æƒ³æ·±å…¥é’»ç ”ã€‚</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¤šçº¿ç¨‹</title>
    <url>/article/a2c3ad19.html</url>
    <content><![CDATA[<p>è¯´ä¸ä¸ŠæŠ€æœ¯åˆ†äº«ï¼Œåªèƒ½ç®—æ˜¯å­¦ä¹ è®°å½•</p>
<span id="more"></span>
<h1 id="åˆ›å»ºä¸€ä¸ªçº¿ç¨‹">åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</h1>
<p>Java æä¾›äº†ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹æ³•ï¼š</p>
<ul>
<li>é€šè¿‡å®ç° Runnable æ¥å£ï¼›</li>
<li>é€šè¿‡ç»§æ‰¿ Thread ç±»æœ¬èº«ï¼›</li>
<li>é€šè¿‡ Callable å’Œ Future åˆ›å»ºçº¿ç¨‹ã€‚</li>
</ul>
<h2 id="é€šè¿‡å®ç°-runnable-æ¥å£æ¥åˆ›å»ºçº¿ç¨‹">é€šè¿‡å®ç° Runnable
æ¥å£æ¥åˆ›å»ºçº¿ç¨‹</h2>
<p>å®ç°Runnableæ¥å£ï¼Œé‡å†™runæ–¹æ³•ï¼Œè°ƒç”¨startæ–¹æ³•</p>
<p><strong>å®ä¾‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;t&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Thread2 t2=<span class="keyword">new</span> <span class="title class_">Thread2</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(t2).start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;<span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;now&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡ç»§æ‰¿threadæ¥åˆ›å»ºçº¿ç¨‹">é€šè¿‡ç»§æ‰¿Threadæ¥åˆ›å»ºçº¿ç¨‹</h2>
<p>ç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•ï¼Œè°ƒç”¨startæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;t&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Thread1 t1=<span class="keyword">new</span> <span class="title class_">Thread1</span>();</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;<span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;now&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡-callable-å’Œ-future-åˆ›å»ºçº¿ç¨‹">é€šè¿‡ Callable å’Œ Future
åˆ›å»ºçº¿ç¨‹</h2>
<ul>
<li><ol type="1">
<li>åˆ›å»º Callable æ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç° call() æ–¹æ³•ï¼Œè¯¥ call()
æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚</li>
</ol></li>
<li><ol start="2" type="1">
<li>åˆ›å»º Callable å®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨ FutureTask ç±»æ¥åŒ…è£… Callable
å¯¹è±¡ï¼Œè¯¥ FutureTask å¯¹è±¡å°è£…äº†è¯¥ Callable å¯¹è±¡çš„ call()
æ–¹æ³•çš„è¿”å›å€¼ã€‚</li>
</ol></li>
<li><ol start="3" type="1">
<li>ä½¿ç”¨ FutureTask å¯¹è±¡ä½œä¸º Thread å¯¹è±¡çš„ target
åˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚</li>
</ol></li>
<li><ol start="4" type="1">
<li>è°ƒç”¨ FutureTask å¯¹è±¡çš„ get()
æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚</li>
</ol></li>
</ul>
<h1 id="åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”">åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”</h1>
<ul>
<li><ol type="1">
<li>é‡‡ç”¨å®ç° Runnableã€Callable æ¥å£çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹ç±»åªæ˜¯å®ç°äº†
Runnable æ¥å£æˆ– Callable æ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚</li>
</ol></li>
<li><ol start="2" type="1">
<li>ä½¿ç”¨ç»§æ‰¿ Thread
ç±»çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ï¼Œç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨
Thread.currentThread() æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨ this å³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚</li>
</ol></li>
</ul>
<h1 id="çº¿ç¨‹çš„å‡ ä¸ªä¸»è¦æ¦‚å¿µ">çº¿ç¨‹çš„å‡ ä¸ªä¸»è¦æ¦‚å¿µ</h1>
<p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹æ—¶ï¼Œä½ éœ€è¦äº†è§£ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>çº¿ç¨‹åŒæ­¥</li>
<li>çº¿ç¨‹é—´é€šä¿¡</li>
<li>çº¿ç¨‹æ­»é”</li>
<li>çº¿ç¨‹æ§åˆ¶ï¼šæŒ‚èµ·ã€åœæ­¢å’Œæ¢å¤</li>
</ul>
<h2 id="sleep">Sleep</h2>
<p>ä¼‘çœ ï¼Œå•ä½ï¼šæ¯«ç§’</p>
<h2 id="yield">Yield</h2>
<p>ç¤¼è®©ï¼Œä½†ä¸ä¸€å®šæˆåŠŸ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYield</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        MyYield myYield=<span class="keyword">new</span> <span class="title class_">MyYield</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield,<span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield,<span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyYield</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;çº¿ç¨‹å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        Thread.<span class="keyword">yield</span>();</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;çº¿ç¨‹åœæ­¢æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="join">Join</h2>
<p>å¼ºåˆ¶æ‰§è¡Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJoin</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        TestJoin testJoin=<span class="keyword">new</span> <span class="title class_">TestJoin</span>();</span><br><span class="line">        Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(testJoin);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">500</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">200</span>) &#123;</span><br><span class="line">                thread.join();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;main&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’é˜Ÿ&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒæ­¥">åŒæ­¥</h2>
<h3 id="synchronizedå…³é”®å­—">synchronizedå…³é”®å­—</h3>
<h3 id="lock">Lock</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        TestLock2 testLock2=<span class="keyword">new</span> <span class="title class_">TestLock2</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock2).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock2).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock2).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestLock2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ticketNum</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰Locké”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                lock.lock();<span class="comment">//åŠ é”</span></span><br><span class="line">                <span class="keyword">if</span> (ticketNum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">200</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(ticketNum--);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();<span class="comment">//è§£é”</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çº¿ç¨‹æ± ">çº¿ç¨‹æ± </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPool</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæœåŠ¡ï¼Œåˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line">        <span class="comment">//newFixedThreadPool å‚æ•°ï¼šçº¿ç¨‹æ± å¤§å°</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">MyThread</span>());</span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">MyThread</span>());</span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">MyThread</span>());</span><br><span class="line">        service.execute(<span class="keyword">new</span> <span class="title class_">MyThread</span>());</span><br><span class="line">        <span class="comment">//å…³é—­</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1V4411p7EF">https://www.bilibili.com/video/BV1V4411p7EF</a></p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ³¨è§£ä¸åå°„</title>
    <url>/article/20d0a84c.html</url>
    <content><![CDATA[<p>è¯´ä¸ä¸ŠæŠ€æœ¯åˆ†äº«ï¼Œåªèƒ½ç®—æ˜¯å­¦ä¹ è®°å½•</p>
<span id="more"></span>
<h1 id="æ³¨è§£annotation">æ³¨è§£ï¼ˆAnnotationï¼‰</h1>
<h2 id="å†…ç½®æ³¨è§£">å†…ç½®æ³¨è§£</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span> ï¼šå¯ä»¥ç¡®ä¿ é‡å†™çš„æ–¹æ³•  çš„ç¡®å­˜åœ¨äºçˆ¶ç±»/æ¥å£ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å… å•è¯æ‹¼é”™ç­‰æƒ…å†µã€‚</span><br><span class="line"><span class="meta">@Deprecated</span>ï¼šç»™ç”¨äºæç¤ºï¼Œè¯¥æ–¹æ³•ç”±äºå®‰å…¨ã€æ€§èƒ½é—®é¢˜ç­‰ å·²ç»ä¸æ¨èä½¿ç”¨äº†ã€‚æ­¤å¤–ï¼Œåœ¨ç‰ˆæœ¬å‡çº§æ—¶ï¼Œå¦‚æœè¦è®¡åˆ’åˆ é™¤ä¸€äº›æ–¹æ³•ï¼Œä¹Ÿé€šå¸¸ä¼šåœ¨å‰ä¸€ä¸ªç‰ˆæœ¬ä¸­ å°†è¯¥æ–¹æ³•åŠ ä¸Š<span class="meta">@Deprecated</span>ï¼Œç„¶åå†åœ¨åç»­ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings(value=&quot;unchecked&quot;)</span><span class="comment">//å‹åˆ¶è­¦å‘Š ï¼ˆè™½ç„¶å¯ä»¥ä½¿ç”¨SuppressWarningså‹åˆ¶è­¦å‘Šï¼Œä½†ä¸å»ºè®®ä½¿ç”¨ã€‚ï¼‰//å¿½ç•¥å¯¹æ³›å‹ç­‰çš„æ£€æŸ¥æ“ä½œã€‚valueå€¼ï¼šunchecked ,deprecation(å¿½ç•¥ä¸€äº›è¿‡æœŸçš„API) ï¼Œunused (æ˜¯å¦æœªè¢«ä½¿ç”¨)  ï¼Œfallthroughï¼ˆswtich æ˜¯å¦ä¸€è‡´å¾€ä¸‹æ‰§è¡Œï¼Œè€Œæ²¡æœ‰breakï¼‰;path(å¿½ç•¥ å¯¹ç±»è·¯å¾„ä¸å­˜åœ¨çš„æ£€æŸ¥)  ï¼ŒserialVersionUIDï¼ˆå¿½ç•¥ ä¸€ä¸ªç±»å¯ä»¥åºåˆ—åŒ–ã€ä½†å´æ²¡æœ‰åºåˆ—åŒ–çš„ è­¦å‘Šï¼‰ï¼Œall</span></span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰æ³¨è§£">è‡ªå®šä¹‰æ³¨è§£</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…ƒæ³¨è§£">å…ƒæ³¨è§£</h2>
<p>å…ƒæ•°æ®ï¼šä¿®é¥°æ•°æ®çš„æ•°æ®</p>
<p>å…ƒæ³¨è§£ï¼šä¿®é¥°æ³¨è§£çš„æ³¨è§£ï¼Œ <span class="citation"
data-cites="Target">@Target</span>ã€<span class="citation"
data-cites="Retention">@Retention</span>ã€<span class="citation"
data-cites="Document">@Document</span>ã€<span class="citation"
data-cites="Inherited">@Inherited</span></p>
<h3 id="targeté™åˆ¶æ³¨è§£-å¯ä»¥ä½¿ç”¨çš„ä½ç½®"><span class="citation"
data-cites="Target">@Target</span>ï¼šé™åˆ¶æ³¨è§£ å¯ä»¥ä½¿ç”¨çš„ä½ç½®</h3>
<p>é™åˆ¶æ³¨è§£
èƒ½å¤Ÿä½¿ç”¨å“ªäº›å…ƒç´ ä¸Šï¼ˆå±æ€§ã€æ–¹æ³•ã€ç±»ï¼‰ï¼›å¦‚æœä¸€ä¸ªæ³¨è§£æ²¡æœ‰@Targetæè¿°ï¼Œåˆ™è¯¥æ³¨è§£
å¯ä»¥ä¿®é¥°ä»»ä½•ç±»å‹çš„å…ƒç´ ï¼› å¦‚æœæœ‰@Targetä¿®é¥°ï¼Œè¯¥æ³¨è§£å°±åªèƒ½ç”¨äº
è¢«@Targetä¿®é¥°çš„åœ°æ–¹</p>
<p>å“ªäº›ä½ç½®ï¼Ÿ ElementType.æšä¸¾</p>
<p>è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¿®é¥°è¯¥æ³¨è§£ åªèƒ½åœ¨ å±æ€§ã€æ–¹æ³•ä¸Šä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Target(value= &#123;ElementType.FIELD   ,ElementType.METHOD&#125; )</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ç”¨å®šä¹‰æ–¹æ³•çš„å½¢å¼ï¼Œå®šä¹‰ä¸€ä¸ªå±æ€§ value</span></span><br><span class="line"><span class="comment">        æ–¹æ³•çš„åå­—ï¼Œå°±æ˜¯å±æ€§çš„åå­—ï¼›æ–¹æ³•çš„è¿”å›å€¼ï¼Œå°±æ˜¯å±æ€§çš„ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>  <span class="keyword">default</span> <span class="string">&quot;å¼ ä¸‰&quot;</span>;<span class="comment">//String value = &quot;å¼ ä¸‰&quot; ï¼›</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span> <span class="keyword">default</span>  <span class="number">22</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyAnnotation</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MyAnnotation(value=&quot;æå››&quot;,age=33)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="retentioné™åˆ¶æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ"><span class="citation"
data-cites="Retention:é™åˆ¶æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ">@Retention:é™åˆ¶æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</span></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RetentionPolicy</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Annotations are to be discarded by the compiler.</span></span><br><span class="line"><span class="comment">       jvmç›´æ¥å°†è¯¥æ³¨è§£ä¸¢å¼ƒ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SOURCE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Annotations are to be recorded in the class file by the compiler</span></span><br><span class="line"><span class="comment">     * but need not be retained by the VM at run time.  This is the default</span></span><br><span class="line"><span class="comment">     * behavior.</span></span><br><span class="line"><span class="comment">       .java -&gt; .class</span></span><br><span class="line"><span class="comment">       ç¨‹åºåœ¨ç¼–è¯‘æ—¶ ä¼šä½¿ç”¨æ³¨è§£ï¼Œåœ¨è¿è¡Œæ—¶ä¸ä¼šä½¿ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CLASS,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Annotations are to be recorded in the class file by the compiler and</span></span><br><span class="line"><span class="comment">     * retained by the VM at run time, so they may be read reflectively.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> java.lang.reflect.AnnotatedElement</span></span><br><span class="line"><span class="comment">       ç¨‹åºåœ¨ç¼–è¯‘ä»¥åŠè¿è¡Œæ—¶ï¼Œéƒ½ä¼šä½¿ç”¨æ³¨è§£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RUNTIME</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰æ³¨è§£å¦‚ä½•ä½¿ç”¨ï¼Ÿ ç»“åˆåå°„ä½¿ç”¨ã€‚</p>
<p>æ³¨è§£+åå°„ ä»€ä¹ˆæ—¶å€™ä¼šçœŸæ­£ä½¿ç”¨ï¼Ÿ å¼€å‘æ¡†æ¶</p>
<p>ä½¿ç”¨æ³¨è§£æ¡ˆä¾‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> annotaion;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyAnnotation</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@MyAnnotation(value=&quot;æå››&quot;,age=33)</span></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span>  Exception&#123;</span><br><span class="line"></span><br><span class="line">        Annotation[] annotations = Class.forName(<span class="string">&quot;annotaion.TestMyAnnotation&quot;</span>).getMethod(<span class="string">&quot;test&quot;</span>).getAnnotations();</span><br><span class="line">        <span class="keyword">for</span>(Annotation a :annotations)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a  <span class="keyword">instanceof</span>  MyAnnotation )&#123;<span class="comment">//@MyAnnotation</span></span><br><span class="line">                System.out.println(    ((MyAnnotation)a)  .value()     );</span><br><span class="line">                System.out.println(    ((MyAnnotation)a)  .age()     );</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;<span class="comment">//@Deprecated</span></span><br><span class="line">                System.out.println(        <span class="string">&quot;@Deprecated&quot;</span>     );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">        test() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æå››</span><br><span class="line">33</span><br><span class="line">@Deprecated</span><br></pre></td></tr></table></figure>
<p><span class="citation" data-cites="Document">@Document</span>ï¼š</p>
<p>â€‹ javadocï¼šjavaå¸®åŠ©æ–‡æ¡£ã€‚ ABC.java -&gt; å¸®åŠ©æ–‡æ¡£</p>
<p>â€‹ é»˜è®¤æƒ…å†µä¸‹ï¼Œjavadocä¸åŒ…å« æ³¨è§£çš„è§£é‡Šï¼›å¦‚æœç°åœ¨javadocæ–‡æ¡£ä¸­
ä¹ŸåŒ…å«å¯¹æ³¨è§£çš„è¯´æ˜ï¼Œåˆ™éœ€è¦ä½¿ç”¨ <span class="citation"
data-cites="Documentæ ‡æ³¨">@Documentæ ‡æ³¨</span></p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸‹MyAnnotationæ³¨è§£ï¼Œä¼šåœ¨ç”Ÿæˆjavadocæ—¶ï¼Œè¢«æ˜¾ç¤ºåœ¨æ–‡æ¡£ä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="citation"
data-cites="Inherited">@Inherited</span>ï¼šç»§æ‰¿</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyAnnotation</span></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span> <span class="title class_">A</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;&#125;<span class="comment">//é»˜è®¤æƒ…å†µä¸‹ï¼ŒBä¸ä¼šç»§æ‰¿Aä¸­çš„æ³¨è§£ï¼›å¦‚æœè¦æƒ³ç»§æ‰¿ï¼Œåˆ™éœ€è¦åŠ @Inherited</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="æ›´å¤š"><a
href="https://www.runoob.com/w3cnote/java-annotation.html">æ›´å¤š</a></h2>
<h1 id="åå°„reflection">åå°„ï¼ˆReflectionï¼‰</h1>
<h2 id="åå°„è·å¾—å¯¹è±¡">åå°„è·å¾—å¯¹è±¡</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    Person person=<span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿™ä¸ªäººæ˜¯ï¼š&quot;</span>+person.name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸€ï¼šå¯¹è±¡è·å¾—</span></span><br><span class="line">        Class c1=person.getClass();</span><br><span class="line">        System.out.println(c1.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼äºŒï¼šfornameè·å¾—</span></span><br><span class="line">        Class c2=Class.forName(<span class="string">&quot;com.refection.Student&quot;</span>);</span><br><span class="line">        System.out.println(c2.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸‰ï¼šé€šè¿‡ç±»å.classè·å¾—</span></span><br><span class="line">        Class c3=Student.class;</span><br><span class="line">        System.out.println(c3.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å¾—çˆ¶ç±»</span></span><br><span class="line">        Class c5=c1.getSuperclass();</span><br><span class="line">        System.out.println(c5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="built_in">this</span>.name=<span class="string">&quot;å­¦ç”Ÿ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=<span class="string">&quot;è€å¸ˆ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰€æœ‰ç±»å‹çš„classå¯¹è±¡">æ‰€æœ‰ç±»å‹çš„Classå¯¹è±¡</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Class c1=Object.class;<span class="comment">//ç±»</span></span><br><span class="line">        Class c2=Comparable.class;<span class="comment">//æ¥å£</span></span><br><span class="line">        Class c3=String[].class;<span class="comment">//ä¸€ç»´æ•°ç»„</span></span><br><span class="line">        Class c4=<span class="type">int</span>[][].class;<span class="comment">//äºŒç»´æ•°ç»„</span></span><br><span class="line">        Class c5=Override.class;<span class="comment">//æ³¨è§£</span></span><br><span class="line">        Class c6= ElementType.class;<span class="comment">//æšä¸¾</span></span><br><span class="line">        Class c7=Integer.class;<span class="comment">//åŸºæœ¬æ•°æ®ç±»å‹</span></span><br><span class="line">        Class c8=<span class="keyword">void</span>.class;<span class="comment">//void</span></span><br><span class="line">        Class c9=Class.class;<span class="comment">//Class</span></span><br><span class="line"></span><br><span class="line">        System.out.println(c1);</span><br><span class="line">        System.out.println(c2);</span><br><span class="line">        System.out.println(c3);</span><br><span class="line">        System.out.println(c4);</span><br><span class="line">        System.out.println(c5);</span><br><span class="line">        System.out.println(c6);</span><br><span class="line">        System.out.println(c7);</span><br><span class="line">        System.out.println(c8);</span><br><span class="line">        System.out.println(c9);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] a=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="type">int</span>[] b=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line">        System.out.println(a.getClass().hashCode());</span><br><span class="line">        System.out.println(b.getClass().hashCode());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å–å¾—ç±»çš„ä¿¡æ¯">å–å¾—ç±»çš„ä¿¡æ¯</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        Class c1=Class.forName(<span class="string">&quot;com.refection.User&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(c1.getName());</span><br><span class="line">        System.out.println(c1.getSimpleName());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å¾—å±æ€§</span></span><br><span class="line">        Field[] fields=c1.getFields();<span class="comment">//åªèƒ½æ‰¾åˆ°publicå±æ€§</span></span><br><span class="line">        fields=c1.getDeclaredFields();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            System.out.println(field);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è·å¾—æŒ‡å®šå±æ€§</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å¾—æ–¹æ³•</span></span><br><span class="line">        Method[] methods =c1.getMethods();<span class="comment">//æœ¬ç±»å’ŒåŠçˆ¶ç±»publicæ–¹æ³•</span></span><br><span class="line">        methods=c1.getDeclaredMethods();<span class="comment">//æœ¬ç±»æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è·å¾—æŒ‡å®šæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å¾—æ„é€ å™¨</span></span><br><span class="line">        Constructor[] constructors=c1.getConstructors();</span><br><span class="line">        constructors=c1.getDeclaredConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor constructor : constructors) &#123;</span><br><span class="line">            System.out.println(constructor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è·å¾—æŒ‡å®šæ„é€ å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºå¯¹è±¡">åˆ›å»ºå¯¹è±¡</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException, NoSuchFieldException &#123;</span><br><span class="line">        <span class="comment">//è·å¾—Classå¯¹è±¡</span></span><br><span class="line">        Class c1=Class.forName(<span class="string">&quot;com.refection.User&quot;</span>);</span><br><span class="line">        <span class="comment">//æ„é€ ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        User user= (User) c1.newInstance();<span class="comment">//æœ¬è´¨è°ƒç”¨æ— å‚æ„é€ å™¨</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡æ„é€ å™¨åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        Constructor constructor=c1.getConstructor(<span class="type">int</span>.class,String.class,<span class="type">int</span>.class);</span><br><span class="line">        User user1= (User) constructor.newInstance(<span class="number">1</span>,<span class="string">&quot;wnhyang&quot;</span>,<span class="number">18</span>);</span><br><span class="line">        System.out.println(user1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        User user2= (User) c1.newInstance();</span><br><span class="line">        <span class="comment">//åå°„è·å–æ–¹æ³•</span></span><br><span class="line">        Method method=c1.getDeclaredMethod(<span class="string">&quot;setName&quot;</span>, String.class);</span><br><span class="line">        <span class="comment">//invokeè°ƒç”¨</span></span><br><span class="line">        method.invoke(user2,<span class="string">&quot;wnhyang&quot;</span>);</span><br><span class="line">        System.out.println(user2.getName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡åå°„æ“ä½œå±æ€§</span></span><br><span class="line">        User user3= (User) c1.newInstance();</span><br><span class="line">        <span class="comment">//é€šè¿‡åå°„è·å¾—å±æ€§</span></span><br><span class="line">        Field field=c1.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸èƒ½ç›´æ¥æ“ä½œç§æœ‰å±æ€§ï¼Œéœ€è¦å…³é—­å®‰å…¨æ£€æµ‹ï¼ŒåŠä¸‹é¢çš„setAccessible(true);</span></span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        field.set(user3,<span class="string">&quot;wnhyang&quot;</span>);</span><br><span class="line">        System.out.println(user3.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.bilibili.com/video/BV1p4411P7V3">https://www.bilibili.com/video/BV1p4411P7V3</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>åœ¨å­¦Springæ¡†æ¶æ—¶ï¼Œéƒ½ä¼šäº†è§£åˆ°Springæœ€é‡è¦çš„<strong>IOC</strong>ä¸<strong>AOP</strong>ï¼Œå°±ä¼šå¬åˆ°<strong>æ³¨è§£ä¸åå°„</strong>ï¼Œç›´åˆ°å»çœŸæ­£äº†è§£è¿™äº›çŸ¥è¯†ï¼Œæ‰ä¼šå‘ç°å…¶ä¸­çš„è”ç³»ï¼Œä¸è¿‡ç°åœ¨æˆ‘çš„ç†è§£è¿˜ä¸åˆ°ä½ï¼Œè¯´ä¸äº†å¤ªå¤šä¸œè¥¿ï¼Œç›¸ä¿¡éšç€å­¦ä¹ çš„æ·±å…¥ï¼Œæ…¢æ…¢å°±ä¼šå‘ç°å…¶ä¸­çš„å¥¥ç§˜ã€‚</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode1</title>
    <url>/article/75055f1f.html</url>
    <content><![CDATA[<p>è¿™ä¸¤å¤©åœ¨LeetCodeè¿™ä¸ªå¹³å°ä¸Šåˆ·ç®—æ³•é¢˜ï¼Œæƒ³ç€ä¹Ÿå¿«æ¯•ä¸šäº†ï¼Œä¸æƒ³è¯»ç ”ï¼Œé‚£å°±è¦ä¸ºæ‰¾å·¥ä½œå¤šè´¹å¿ƒåŠ›äº†ã€‚ä¹‹åæˆ‘ä¼šç»å¸¸åœ¨è¿™çœ‹é¢˜çš„ï¼Œä¹Ÿä¼šå‘ä¸€äº›å¥½çš„é¢˜ç›®ç®—æ³•ï¼Œåšä¸ªè®°å½•ã€‚</p>
<p>è¿™æ¬¡ç›¸å¯¹éƒ½æ˜¯ç®€å•ä¸€äº›çš„ã€‚</p>
<span id="more"></span>
<h1 id="æ•´æ•°åè½¬">7.æ•´æ•°åè½¬</h1>
<p><a
href="https://leetcode-cn.com/problems/reverse-integer/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å‡ºä¸€ä¸ª 32
ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬ã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt; è¾“å…¥: 123<br />
&gt; è¾“å‡º: 321</p>
<p>ç¤ºä¾‹2ï¼š &gt; è¾“å…¥: -123<br />
&gt; è¾“å‡º: -321</p>
<p>ç¤ºä¾‹3ï¼š &gt; è¾“å…¥: 120<br />
&gt; è¾“å‡º: 21</p>
<p>æ³¨æ„:</p>
<p>å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨å¾—ä¸‹ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œåˆ™å…¶æ•°å€¼èŒƒå›´ä¸ºÂ [âˆ’231,Â 
231Â âˆ’ 1]ã€‚è¯·æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœåè½¬åæ•´æ•°æº¢å‡ºé‚£ä¹ˆå°±è¿”å› 0ã€‚</p>
<h1 id="begin">begin</h1>
<p>æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç®€å•ï¼Œæ²¡é”™æ˜¯ç›¸å¯¹ç®€å•çš„é¢˜ï¼Œè§£è¿™ä¸ªé¢˜åº”è¯¥éƒ½å¯ä»¥çš„ï¼Œä½†è§£é¢˜å‰æ˜¯å¦åˆ†æäº†è¯¥æ€ä¹ˆåšæ‰èƒ½åšåˆ°æœ€ä¼˜ï¼Œæ—¶é—´ç©ºé—´è¾¾åˆ°å¹³è¡¡ã€‚</p>
<p>è¿™ä¸ªé¢˜å…³é”®æ˜¯å°±æ˜¯ç”¨å¥½â€œ%â€ã€â€œ/â€å’Œå¾ªç¯ï¼Œç„¶ååˆ¤æ–­æº¢å‡ºå³å¯ï¼Œæœ€ç®€å•çš„å¼€å§‹ç»ƒæ‰‹å˜›ï¼</p>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> rev=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">int</span> pop=x%<span class="number">10</span>;</span><br><span class="line">            x/=<span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (rev &gt; Integer.MAX_VALUE/<span class="number">10</span> || (rev == Integer.MAX_VALUE / <span class="number">10</span> &amp;&amp; pop &gt; <span class="number">7</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (rev &lt; Integer.MIN_VALUE/<span class="number">10</span> || (rev == Integer.MIN_VALUE / <span class="number">10</span> &amp;&amp; pop &lt; -<span class="number">8</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            rev=rev*<span class="number">10</span>+pop;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/reverse-integer/solution/">è¯¦ç»†é¢˜è§£</a></p>
<p>çƒ­èº«å¥½å°±ä¸‹ä¸€ä¸ª</p>
<h1 id="å›æ–‡æ•°">9.å›æ–‡æ•°</h1>
<p><a
href="https://leetcode-cn.com/problems/palindrome-number/">é¢˜ç›®åœ°å€</a></p>
<p>åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å›æ–‡æ•°ã€‚å›æ–‡æ•°æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt; è¾“å…¥: 121<br />
&gt; è¾“å‡º: true</p>
<p>ç¤ºä¾‹2ï¼š &gt; è¾“å…¥: -121<br />
&gt; è¾“å‡º: false<br />
&gt;è§£é‡Š: ä»å·¦å‘å³è¯», ä¸º -121 ã€‚ ä»å³å‘å·¦è¯», ä¸º 121-
ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚</p>
<p>ç¤ºä¾‹3ï¼š &gt; è¾“å…¥: 10<br />
&gt; è¾“å‡º: false<br />
&gt; è§£é‡Š: ä»å³å‘å·¦è¯», ä¸º 01 ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚</p>
<p>è¿›é˜¶:</p>
<p>ä½ èƒ½ä¸å°†æ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸²æ¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</p>
<h1 id="begin-1">begin</h1>
<p>å¾ˆå¤šäººå¯èƒ½å¯¹è¿›é˜¶çš„å­—ç¬¦ä¸²å›æ–‡çš„ä¼šæ›´äº†è§£ï¼Œlowã€highé¦–å°¾åˆ¤æ–­ã€‚è¿™ä¸ªé¢˜æ˜¯æ•´æ•°çš„å›æ–‡ï¼Œæœ€å¥½è‡ªå·±å…ˆæ˜¯å°è¯•ä¸€ä¸‹ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰äººè¿™æ ·æƒ³ï¼Œåˆ†ä¸‰ç§æƒ…å†µè€ƒè™‘ï¼Œè´Ÿæ•°falseï¼Œ0trueï¼Œæ­£æ•°åœ¨åšç±»ä¼¼äºå­—ç¬¦ä¸²é‚£æ ·å¤„ç†ï¼Œä¸æ€•ä½ ä»¬å˜²ç¬‘ï¼Œæˆ‘å½“æ—¶å°±è¿™ä¹ˆæƒ³çš„ï¼Œå®ç°ä¹‹åï¼Œè™½ç„¶é€šè¿‡ä½†æ—¶é—´æ¶ˆè€—å¤ªå¤§äº†ï¼Œéœ€è¦æ”¹è¿›ï¼Œçœ‹äº†é¢˜è§£ï¼Œä¸ç¦æ„Ÿæ…¨ï¼šæˆ‘æ€ä¹ˆæƒ³ä¸åˆ°ï¼ï¼ï¼</p>
<p>é¢˜è§£æ€è·¯ï¼šè´Ÿæ•°å’Œä»¥0ç»“å°¾çš„æ•°falseï¼Œé‡ç‚¹æ¥äº†ï¼Œä¸‹ä¸€æ­¥å°†è¿™ä¸ªæ•°åè½¬ä¸€åŠï¼Œå¦‚ï¼š12321å’Œ123321åˆ†åˆ«åè½¬ä¸º123å’Œ123ï¼Œæ¥ç€ä¸å‰©ä¸‹çš„æ¯”è¾ƒï¼ŒåŒ¹é…åˆ™trueã€‚</p>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    bool <span class="title function_">isPalindrome</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// ç‰¹æ®Šæƒ…å†µï¼š</span></span><br><span class="line">        <span class="comment">// å¦‚ä¸Šæ‰€è¿°ï¼Œå½“ x &lt; 0 æ—¶ï¼Œx ä¸æ˜¯å›æ–‡æ•°ã€‚</span></span><br><span class="line">        <span class="comment">// åŒæ ·åœ°ï¼Œå¦‚æœæ•°å­—çš„æœ€åä¸€ä½æ˜¯ 0ï¼Œä¸ºäº†ä½¿è¯¥æ•°å­—ä¸ºå›æ–‡ï¼Œ</span></span><br><span class="line">        <span class="comment">// åˆ™å…¶ç¬¬ä¸€ä½æ•°å­—ä¹Ÿåº”è¯¥æ˜¯ 0</span></span><br><span class="line">        <span class="comment">// åªæœ‰ 0 æ»¡è¶³è¿™ä¸€å±æ€§</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">revertedNumber</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; revertedNumber) &#123;</span><br><span class="line">            revertedNumber = revertedNumber * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“æ•°å­—é•¿åº¦ä¸ºå¥‡æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ revertedNumber/10 å»é™¤å¤„äºä¸­ä½çš„æ•°å­—ã€‚</span></span><br><span class="line">        <span class="comment">// ä¾‹å¦‚ï¼Œå½“è¾“å…¥ä¸º 12321 æ—¶ï¼Œåœ¨ while å¾ªç¯çš„æœ«å°¾æˆ‘ä»¬å¯ä»¥å¾—åˆ° x = 12ï¼ŒrevertedNumber = 123ï¼Œ</span></span><br><span class="line">        <span class="comment">// ç”±äºå¤„äºä¸­ä½çš„æ•°å­—ä¸å½±å“å›æ–‡ï¼ˆå®ƒæ€»æ˜¯ä¸è‡ªå·±ç›¸ç­‰ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å…¶å»é™¤ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> x == revertedNumber || x == revertedNumber / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/palindrome-number/solution/hui-wen-shu-by-leetcode-solution/">è¯¦ç»†é¢˜è§£</a></p>
<p>æ˜¯ä¸æ˜¯è§‰å¾—ï¼Œå°±è¿™ï¼Œé‚£å°±æ¥ä¸€é“å¤æ‚ä¸€ç‚¹çš„å§ï¼</p>
<h1 id="ä¸¤æ•°ç›¸åŠ ">2. ä¸¤æ•°ç›¸åŠ </h1>
<p><a
href="https://leetcode-cn.com/problems/add-two-numbers/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å‡ºä¸¤ä¸ªÂ éç©º
çš„é“¾è¡¨ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å…¶ä¸­ï¼Œå®ƒä»¬å„è‡ªçš„ä½æ•°æ˜¯æŒ‰ç…§Â é€†åºÂ çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨Â ä¸€ä½Â æ•°å­—ã€‚</p>
<p>å¦‚æœï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ•°ç›¸åŠ èµ·æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨æ¥è¡¨ç¤ºå®ƒä»¬çš„å’Œã€‚</p>
<p>æ‚¨å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0Â å¼€å¤´ã€‚</p>
<p>ç¤ºä¾‹ï¼š &gt;è¾“å…¥ï¼š(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br />
&gt;è¾“å‡ºï¼š7 -&gt; 0 -&gt; 8<br />
&gt;åŸå› ï¼š342 + 465 = 807</p>
<h1 id="begin-2">begin</h1>
<p>è¿™ä¸ªï¼Œè¿˜è¡Œå§ï¼ŒåŒ…å«é“¾è¡¨çŸ¥è¯†ï¼Œå¯ä»¥è´¹ç‚¹å¿ƒæ€äº†å§ï¼</p>
<p>é€‰è¿™ä¸ªé¢˜æ˜¯æœ‰ç›®çš„çš„ï¼Œå› ä¸ºè¿™ä¸ªé¢˜å’Œè§£å¤ªæœ‰è¶£äº†ï¼Œä¹Ÿå¯èƒ½å°±æˆ‘ç¬¨æƒ³ä¸åˆ°å§ï¼</p>
<p>æç¤ºä¸€ä¸‹ä¸‹é¢ç›´æ¥æ”¾é¢˜è§£äº†â€”â€”ä»ä½ä½ä¾æ¬¡å‘ä¸ŠåŠ ï¼Œå­˜å…¥é“¾è¡¨å³å¯ã€‚</p>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">        ListNode l=<span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        ListNode p1=l1,p2=l2,p=l;</span><br><span class="line">        <span class="type">int</span> carry=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(p1!=<span class="literal">null</span>||p2!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">int</span> x=(p1!=<span class="literal">null</span>)? p1.val:<span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> y=(p2!=<span class="literal">null</span>)? p2.val:<span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> sum=carry+x+y;</span><br><span class="line">            carry=sum/<span class="number">10</span>;</span><br><span class="line">            p.next=<span class="keyword">new</span> <span class="title class_">ListNode</span>(sum%<span class="number">10</span>);</span><br><span class="line">            p=p.next;</span><br><span class="line">            <span class="keyword">if</span>(p1!=<span class="literal">null</span>)</span><br><span class="line">                p1=p1.next;</span><br><span class="line">            <span class="keyword">if</span>(p2!=<span class="literal">null</span>)</span><br><span class="line">                p2=p2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(carry&gt;<span class="number">0</span>)</span><br><span class="line">            p.next=<span class="keyword">new</span> <span class="title class_">ListNode</span>(carry);</span><br><span class="line">        <span class="keyword">return</span> l.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/add-two-numbers/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¼•ç”¨ä¸€ä½è§£é¢˜è€…åœ¨é¢˜è§£ä¸‹çš„è¯„è®ºâ€œç®€å•çš„é¢˜æ•ˆç‡å®Œå…¨æ¯”ä¸ä¸Šé¢˜è§£ï¼Œå¤æ‚çš„é¢˜å®Œå…¨ä¸ä¼š
-.-â€ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™æ ·ï¼Œå¤©ç”Ÿæ²¡æœ‰é‚£ä¹ˆèªæ˜çš„è„‘å­ï¼Œé‚£å°±å¿…é¡»è¦æ ¼å¤–åŠªåŠ›ï¼Fightingï¼</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ¯”è¾ƒå™¨</title>
    <url>/article/4f8e0775.html</url>
    <content><![CDATA[<p>å¯’å‡è®¡åˆ’ç¬¬ä¸€æ­¥å·²ç»å®Œæˆï¼Œç°åœ¨å¼€å§‹ç¬¬äºŒæ­¥ã€‚æœ‰æ—¶å€™æˆ‘ä»¬è®¡åˆ’è¾¾æˆæŸä¸ªå¤§ç›®æ ‡æ˜¯å¾ˆéš¾è€Œä¸”å¾ˆå®¹æ˜“æ”¾å¼ƒçš„ï¼Œä¸€ä¸ªå¥½çš„æ–¹æ³•å°±æ˜¯åˆ¶å®šä¸€ä¸ªä¸ªå°ç›®æ ‡ï¼Œæ¯ä¸ªå°½é‡æ˜ç¡®ä¸”å®¹æ˜“è¾¾åˆ°ï¼Œè¿™æ ·æˆ‘ä»¬æ¯å®Œæˆä¸€é¡¹éƒ½ä¼šæœ‰æˆå°±æ„Ÿå¹¶é©±ä½¿æˆ‘ä»¬ç»§ç»­ä¸‹å»ï¼Œå°±è¿™æ ·ä¸çŸ¥ä¸è§‰ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æ‰€æœ‰ç›®æ ‡ã€‚</p>
<p>æœ€è¿‘å°±åœ¨å¼€å§‹æ•´ç†javaåŸºç¡€çŸ¥è¯†ï¼Œä¸€è¾¹æœèµ„æ–™çœ‹è§†é¢‘ï¼Œä¸€è¾¹è®°å½•æ•´ç†ï¼Œè¿˜æ˜¯æŒºä¸é”™çš„ã€‚</p>
<p>å°±åœ¨æ•´ç†é›†åˆæ¡†æ¶è¿™éƒ¨åˆ†æ—¶ï¼Œæƒ³å†™ä¸€ç¯‡åšå®¢ï¼Œæ‰€ä»¥å°±ç®€å•è¯´ä¸€ä¸‹æ¯”è¾ƒå™¨ï¼</p>
<span id="more"></span>
<h1 id="æè¦">æè¦</h1>
<p>åœ¨ä½¿ç”¨é›†åˆå·¥å…·ç±»è¿›è¡Œæ’åºæ—¶ï¼Œé€šå¸¸éƒ½å·²ç»é»˜è®¤äº†æ’åºæ–¹å¼ï¼ˆç®€å•ç±»å‹çš„æ’åºï¼‰ï¼Œå¦‚æœè¦è¿›è¡Œå¯¹è±¡é›†åˆçš„æ’åºï¼Œå°±éœ€è¦ç”¨åˆ°æ¯”è¾ƒå™¨ã€‚ä¸‹é¢ä»‹ç»äº†ä¸¤ç§æ–¹æ³•ã€‚</p>
<h2 id="å†…éƒ¨æ¯”è¾ƒå™¨comparable">å†…éƒ¨æ¯”è¾ƒå™¨ï¼ˆComparableï¼‰</h2>
<p>å®ç°Comparableæ¥å£çš„compareToæ–¹æ³•ï¼Œé‡ç‚¹æ˜¯è¿”å›å€¼-1ï¼Œ0ï¼Œ1</p>
<p><strong>å®ä¾‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span> &#123;</span><br><span class="line">    <span class="type">int</span> sno;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        People p=(People) o;</span><br><span class="line">        <span class="type">int</span> result=<span class="built_in">this</span>.sno&gt;p.sno? <span class="number">1</span>:(<span class="built_in">this</span>.sno==p.sno?<span class="number">0</span>:-<span class="number">1</span>);<span class="comment">//ä¼˜åŒ–åInteger.compare(this.sno, p.sno);</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ç”¨IDEAç¼–è¾‘<code>int result=this.sno&gt;p.sno? 1:(this.sno==p.sno?0:-1);</code>æ—¶ï¼Œè¿™ç‰‡ä»£ç æ˜¾ç¤ºé»„è‰²ï¼Œè¡¨ç¤ºå¯ä»¥ä¼˜åŒ–ï¼Œä¼˜åŒ–åä¸º<code>int result= Integer.compare(this.sno, p.sno);</code>ï¼Œå¥½å¥‡åœ°ç‚¹å¼€<code>Integer.compare()</code>æ–¹æ³•ï¼Œçœ‹åˆ°ä¸‹é¢çš„æºç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (x &lt; y) ? -<span class="number">1</span> : ((x == y) ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶å‰é¢è¿˜æœ‰æºç æ³¨è§£ã€‚å› ä¸ºé»˜è®¤æ’åˆ—åŠæ˜¯å‡åºï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦å‡åºæ’åˆ—å°±é‡‡ç”¨ä¸Šé¢çš„ç¼–å†™æ–¹æ³•ï¼Œç›¸åï¼Œé™åºä½ç½®è°ƒæ¢ä¸€ä¸‹å³å¯ã€‚</p>
<p><strong>ä½¿ç”¨</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;People&gt; peopleList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">1</span>,<span class="string">&quot;zy&quot;</span>,<span class="number">95</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">6</span>,<span class="string">&quot;ls&quot;</span>,<span class="number">86</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">16</span>,<span class="string">&quot;ww&quot;</span>,<span class="number">75</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">25</span>,<span class="string">&quot;zl&quot;</span>,<span class="number">63</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">3</span>,<span class="string">&quot;ao&quot;</span>,<span class="number">55</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">9</span>,<span class="string">&quot;xp&quot;</span>,<span class="number">13</span>));</span><br><span class="line">        </span><br><span class="line">        Collections.sort(peopleList);<span class="comment">//æ’åº</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(peopleList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[People&#123;sno=1, name=&#x27;zy&#x27;, score=95&#125;, People&#123;sno=3, name=&#x27;ao&#x27;, score=55&#125;, People&#123;sno=6, name=&#x27;ls&#x27;, score=86&#125;, People&#123;sno=9, name=&#x27;xp&#x27;, score=13&#125;, People&#123;sno=16, name=&#x27;ww&#x27;, score=75&#125;, People&#123;sno=25, name=&#x27;zl&#x27;, score=63&#125;]</span><br></pre></td></tr></table></figure>
<h2 id="å¤–éƒ¨æ¯”è¾ƒå™¨comparator">å¤–éƒ¨æ¯”è¾ƒå™¨ï¼ˆComparatorï¼‰</h2>
<p>å®šä¹‰å¤–éƒ¨æ¯”è¾ƒå™¨ï¼Œå®ç°Comparatoræ¥å£çš„compareæ–¹æ³•</p>
<p><strong>å®ä¾‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">        People p1= (People) o1;</span><br><span class="line">        People p2= (People) o2;</span><br><span class="line">        <span class="keyword">return</span> p1.sno-p2.sno;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ²¡å•¥å¯è¯´çš„ï¼Œå‡åºå°±æŒ‰ä¸Šé¢æ¥ï¼Œå½“ç„¶ä¹Ÿå¯æŒ‰ä¸Šé¢çš„æ¥ï¼Œè¿”å›-1ï¼Œ0ï¼Œ1</p>
<p><strong>ä½¿ç”¨</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;People&gt; peopleList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">1</span>,<span class="string">&quot;zy&quot;</span>,<span class="number">95</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">6</span>,<span class="string">&quot;ls&quot;</span>,<span class="number">86</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">16</span>,<span class="string">&quot;ww&quot;</span>,<span class="number">75</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">25</span>,<span class="string">&quot;zl&quot;</span>,<span class="number">63</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">3</span>,<span class="string">&quot;ao&quot;</span>,<span class="number">55</span>));</span><br><span class="line">        peopleList.add(<span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">9</span>,<span class="string">&quot;xp&quot;</span>,<span class="number">13</span>));</span><br><span class="line">        </span><br><span class="line">        Collections.sort(peopleList,<span class="keyword">new</span> <span class="title class_">MyComparator</span>());<span class="comment">//æ’åº</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(peopleList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡º</strong>(åŒä¸Š)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[People&#123;sno=1, name=&#x27;zy&#x27;, score=95&#125;, People&#123;sno=3, name=&#x27;ao&#x27;, score=55&#125;, People&#123;sno=6, name=&#x27;ls&#x27;, score=86&#125;, People&#123;sno=9, name=&#x27;xp&#x27;, score=13&#125;, People&#123;sno=16, name=&#x27;ww&#x27;, score=75&#125;, People&#123;sno=25, name=&#x27;zl&#x27;, score=63&#125;]</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.bilibili.com/video/BV114411W7id?p=47">https://www.bilibili.com/video/BV114411W7id?p=47</a></p>
<h2 id="æ¯”è¾ƒ">æ¯”è¾ƒ</h2>
<ul>
<li>ä½¿ç”¨æ–¹æ³•ä¸åŒï¼Œç›®çš„ç›¸åŒï¼ˆæ’åºå˜›ï¼‰</li>
<li>Comparableåœ¨ç±»çš„å†…éƒ¨ï¼Œä¸ç±»ç²˜è¿åœ¨ä¸€å—ï¼Œä¹Ÿæ¯”è¾ƒå®¹æ˜“å®ç°</li>
<li>Comparatoråœ¨ç±»çš„å¤–éƒ¨ï¼Œè‡ªå·±é¢å¤–å®šä¹‰ï¼Œå®ç°æ•°æ®ä¸ç®—æ³•åˆ†ç¦»</li>
<li>æˆ‘ä¸ªäººè®¤ä¸ºæ— æ‰€è°“ç”¨å“ªä¸ªï¼Œé¡ºæ‰‹å°±è¡Œ</li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaç½‘ç»œç¼–ç¨‹</title>
    <url>/article/81e7b834.html</url>
    <content><![CDATA[<p>è¯´ä¸ä¸ŠæŠ€æœ¯åˆ†äº«ï¼Œåªèƒ½ç®—æ˜¯å­¦ä¹ è®°å½•</p>
<span id="more"></span>
<h1 id="ç½‘ç»œç¼–ç¨‹">ç½‘ç»œç¼–ç¨‹</h1>
<p>java.net åŒ…ä¸­æä¾›äº†ä¸¤ç§å¸¸è§çš„ç½‘ç»œåè®®çš„æ”¯æŒï¼š</p>
<ul>
<li><strong>TCP</strong>ï¼šTCPï¼ˆè‹±è¯­ï¼šTransmission Control
Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰
æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ï¼ŒTCP å±‚æ˜¯ä½äº IP
å±‚ä¹‹ä¸Šï¼Œåº”ç”¨å±‚ä¹‹ä¸‹çš„ä¸­é—´å±‚ã€‚TCP
ä¿éšœäº†ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„å¯é é€šä¿¡ã€‚é€šå¸¸ç”¨äºäº’è”ç½‘åè®®ï¼Œè¢«ç§° TCP /
IPã€‚</li>
<li><strong>UDP</strong>ï¼šUDP ï¼ˆè‹±è¯­ï¼šUser Datagram
Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼Œä½äº OSI
æ¨¡å‹çš„ä¼ è¾“å±‚ã€‚ä¸€ä¸ªæ— è¿æ¥çš„åè®®ã€‚æä¾›äº†åº”ç”¨ç¨‹åºä¹‹é—´è¦å‘é€æ•°æ®çš„æ•°æ®æŠ¥ã€‚ç”±äºUDPç¼ºä¹å¯é æ€§ä¸”å±äºæ— è¿æ¥åè®®ï¼Œæ‰€ä»¥åº”ç”¨ç¨‹åºé€šå¸¸å¿…é¡»å®¹è®¸ä¸€äº›ä¸¢å¤±ã€é”™è¯¯æˆ–é‡å¤çš„æ•°æ®åŒ…ã€‚</li>
</ul>
<p>æœ¬æ•™ç¨‹ä¸»è¦è®²è§£ä»¥ä¸‹ä¸¤ä¸ªä¸»é¢˜ã€‚</p>
<ul>
<li><strong>Socket
ç¼–ç¨‹</strong>ï¼šè¿™æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ç½‘ç»œæ¦‚å¿µï¼Œå®ƒå·²è¢«è§£é‡Šåœ°éå¸¸è¯¦ç»†ã€‚</li>
<li><strong>URL
å¤„ç†</strong>ï¼šè¿™éƒ¨åˆ†ä¼šåœ¨å¦å¤–çš„ç¯‡å¹…é‡Œè®²ï¼Œç‚¹å‡»è¿™é‡Œæ›´è¯¦ç»†åœ°äº†è§£åœ¨ <a
href="https://www.runoob.com/java/java-url-processing.html">Java
è¯­è¨€ä¸­çš„ URL å¤„ç†</a>ã€‚</li>
</ul>
<p>æ¡ˆä¾‹ï¼š</p>
<h2 id="æ¨¡æ¿">æ¨¡æ¿</h2>
<p>1.å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ ï¼›æœåŠ¡ç«¯å‡†å¤‡æœåŠ¡ï¼ˆip[é»˜è®¤æœ¬æœº]:ç«¯å£ï¼‰</p>
<p>2.é€šè¿‡socketç”Ÿæˆinputstream/outputstreamï¼ˆå‡†å¤‡å‘é€æ•°æ®ï¼‰</p>
<p>3.ä½¿ç”¨inputstream/outputstreamè¿›è¡Œå‘é€ã€æ¥å—æ•°æ®</p>
<p>4.å…³é—­inputstream/outputstreamã€socket</p>
<h3 id="æœåŠ¡ç«¯serversocket">æœåŠ¡ç«¯ï¼ˆServerSocketï¼‰</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.å‡†å¤‡æœåŠ¡.ip:é»˜è®¤æœ¬æœº127.0.0.1,ç«¯å£8888</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            serverSocket = <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8888</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æœåŠ¡ç«¯å¯åŠ¨&quot;</span>);</span><br><span class="line">            <span class="comment">//å‡†å¤‡å®Œæ¯•ï¼Œå¯ä»¥ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">            socket = serverSocket.accept();<span class="comment">//ä¸€ç›´é˜»å¡ï¼Œç›´åˆ°æœ‰å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line">            System.out.println(<span class="string">&quot;æœåŠ¡ç«¯æ£€æµ‹åˆ°å®¢æˆ·ç«¯é“¾æ¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2.é€šè¿‡socketç”Ÿæˆinputstream/outputstreamï¼ˆå‡†å¤‡å‘é€æ•°æ®ï¼‰</span></span><br><span class="line">            <span class="comment">//3.ä½¿ç”¨inputstream/outputstreamè¿›è¡Œå‘é€ã€æ¥å—æ•°æ®</span></span><br><span class="line">            in = socket.getInputStream();</span><br><span class="line">            <span class="comment">//å¸¦ç¼“å†²åŒºçš„å­—ç¬¦æµï¼ˆå­—èŠ‚æµ-è½¬æ¢æµ-å­—ç¬¦æµï¼‰</span></span><br><span class="line">            reader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(in));</span><br><span class="line">            <span class="type">String</span> <span class="variable">info</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span> ((info = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;I am server,æ¥å—åˆ°å®¢æˆ·ç«¯ä¿¡æ¯æ˜¯ï¼š&quot;</span> + info);</span><br><span class="line">            &#125;</span><br><span class="line">            socket.shutdownInput();</span><br><span class="line">            <span class="comment">//æœåŠ¡ç«¯åšå‡ºåé¦ˆ</span></span><br><span class="line">            out = socket.getOutputStream();</span><br><span class="line">            out.write(<span class="string">&quot;welcome  client....&quot;</span>.getBytes());</span><br><span class="line">            socket.shutdownOutput();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// 4.å…³é—­inputstream/outputstreamã€socket</span></span><br><span class="line">                <span class="keyword">if</span> (reader != <span class="literal">null</span>) reader.close();</span><br><span class="line">                <span class="keyword">if</span> (out != <span class="literal">null</span>) out.close();</span><br><span class="line">                <span class="keyword">if</span> (in != <span class="literal">null</span>) in.close();</span><br><span class="line">                <span class="keyword">if</span> (socket != <span class="literal">null</span>) socket.close();</span><br><span class="line">                <span class="keyword">if</span> (serverSocket != <span class="literal">null</span>) serverSocket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®¢æˆ·ç«¯socket">å®¢æˆ·ç«¯ï¼ˆSocketï¼‰</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket=<span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">8888</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;å®¢æˆ·ç«¯é“¾æ¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line">            out = socket.getOutputStream();</span><br><span class="line">            out.write( <span class="string">&quot;hello server&quot;</span>.getBytes()  );</span><br><span class="line">            socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ¥æ”¶æœåŠ¡ç«¯çš„åé¦ˆ</span></span><br><span class="line">            in = socket.getInputStream();</span><br><span class="line">            reader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(in));</span><br><span class="line">            <span class="type">String</span> <span class="variable">info</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span>(   (info=reader.readLine()) != <span class="literal">null</span> )&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;I am client,æ¥æ”¶åˆ°çš„æœåŠ¡ç«¯æ¶ˆæ¯ï¼š&quot;</span>+info);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            socket.shutdownInput();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(out!=<span class="literal">null</span>) out.close();</span><br><span class="line">                <span class="keyword">if</span>(in!=<span class="literal">null</span>) in.close();</span><br><span class="line">                <span class="keyword">if</span>(socket!=<span class="literal">null</span>) socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯¹è±¡æµ">å¯¹è±¡æµ</h2>
<p>ç½‘ç»œä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼š 1.å°†è¦ä¼ é€’çš„å¯¹è±¡åºåˆ—åŒ–
2.ä½¿ç”¨å¯¹è±¡æµï¼ˆObjectInputStream/ObjectOutputStreamï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;<span class="comment">//å°†è¦ä¼ é€’çš„å¯¹è±¡åºåˆ—åŒ–</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sid ;</span><br><span class="line">    <span class="keyword">private</span> String sname ;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> sid, String sname, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sid = sid;</span><br><span class="line">        <span class="built_in">this</span>.sname = sname;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSid</span><span class="params">(<span class="type">int</span> sid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sid = sid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSname</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSname</span><span class="params">(String sname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sname = sname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;sid=&quot;</span> + sid +</span><br><span class="line">                <span class="string">&quot;, sname=&#x27;&quot;</span> + sname + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverScoket</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             serverScoket = <span class="keyword">new</span> <span class="title class_">ServerSocket</span>( <span class="number">8888</span>) ;</span><br><span class="line">             socket = serverScoket.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ¥å—å®¢æˆ·ç«¯å‘æ¥çš„å¯¹è±¡</span></span><br><span class="line">             in = socket.getInputStream();</span><br><span class="line">            <span class="comment">//å¯¹è±¡æµ</span></span><br><span class="line">             ois = <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(in);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student)ois.readObject();<span class="comment">//è¯»å–å¯¹è±¡</span></span><br><span class="line">                System.out.println(student);</span><br><span class="line">                socket.shutdownInput();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">if</span>(ois!=<span class="literal">null</span>) ois.close();</span><br><span class="line">                <span class="keyword">if</span>(in!=<span class="literal">null</span>)   in.close();</span><br><span class="line">                <span class="keyword">if</span>(socket!=<span class="literal">null</span>)  socket.close();</span><br><span class="line">                <span class="keyword">if</span>(serverScoket!=<span class="literal">null</span>)  serverScoket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å®¢æˆ·ç«¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket = <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;localhost&quot;</span>,<span class="number">8888</span>) ;</span><br><span class="line"></span><br><span class="line">            <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1001</span>,<span class="string">&quot;zs&quot;</span>,<span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">            out = socket.getOutputStream();</span><br><span class="line">            <span class="comment">//å°†OutputStreamè½¬ä¸ºå¯¹è±¡æµ</span></span><br><span class="line">            oos = <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(out) ;</span><br><span class="line">            oos.writeObject( student );<span class="comment">//å‘é€å¯¹è±¡</span></span><br><span class="line">            socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(oos!=<span class="literal">null</span>) oos.close();</span><br><span class="line">                <span class="keyword">if</span>(out!=<span class="literal">null</span>)   out.close();</span><br><span class="line">                <span class="keyword">if</span>(socket!=<span class="literal">null</span>)  socket.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="å¤šå®¢æˆ·ç«¯é—®é¢˜">å¤šå®¢æˆ·ç«¯é—®é¢˜</h2>
<p>æ€è·¯ï¼šå®¢æˆ·ç«¯ä»£ç ä¸å˜ï¼›æœåŠ¡ç«¯ï¼šæ¯å½“æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå°±å¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹å»å¤„ç†ï¼ˆæ¯ä¸ªçº¿ç¨‹ä¸“é—¨å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡ï¼‰ã€‚</p>
<h3 id="æœåŠ¡ç«¯çº¿ç¨‹">æœåŠ¡ç«¯çº¿ç¨‹</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line"></span><br><span class="line">    Socket socket;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServerThread</span><span class="params">(Socket socket)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span><span class="literal">null</span> ;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span>  <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æ¥å—å®¢æˆ·ç«¯æ•°æ®ï¼ˆå®¢æˆ·ç«¯â€”&gt;æœåŠ¡ç«¯ï¼‰</span></span><br><span class="line">            in = socket.getInputStream();</span><br><span class="line">            ois  = <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(in) ;</span><br><span class="line">            <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span>  (Student)ois.readObject() ;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">            socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ç»™å®¢æˆ·ç«¯åé¦ˆ(æœåŠ¡ç«¯-&gt;å®¢æˆ·ç«¯)</span></span><br><span class="line">            out = socket.getOutputStream();</span><br><span class="line">            out.write(<span class="string">&quot;å·²æ”¶åˆ°....&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                out.close();</span><br><span class="line">                ois.close();</span><br><span class="line">                in.close();</span><br><span class="line">                socket.close(); ;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8888</span>) ;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();<span class="comment">//é˜»å¡ï¼Œæ¥å—å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">                <span class="type">ServerThread</span> <span class="variable">serverThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerThread</span>(socket) ;</span><br><span class="line">                serverThread.start();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket = <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;localhost&quot;</span>,<span class="number">8888</span>) ;</span><br><span class="line"></span><br><span class="line">            <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1001</span>,<span class="string">&quot;zs&quot;</span>,<span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">             out = socket.getOutputStream();</span><br><span class="line">            <span class="comment">//å°†OutputStreamè½¬ä¸ºå¯¹è±¡æµ</span></span><br><span class="line">             oos = <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(out) ;</span><br><span class="line">            oos.writeObject( student );<span class="comment">//å‘é€å¯¹è±¡</span></span><br><span class="line">            socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ¥å—æœåŠ¡ç«¯çš„åé¦ˆ</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">            <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">100</span>] ;</span><br><span class="line">            in.read(buf) ;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°çš„æœåŠ¡ç«¯åé¦ˆ:&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(buf)      );</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(oos!=<span class="literal">null</span>) oos.close();</span><br><span class="line">                <span class="keyword">if</span>(out!=<span class="literal">null</span>)   out.close();</span><br><span class="line">                <span class="keyword">if</span>(socket!=<span class="literal">null</span>)  socket.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="udpçš„å®ç°">UDPçš„å®ç°</h2>
<p>DatagramPacketï¼ˆæ•°æ®ï¼‰ï¼šå°è£…äº†æ•°æ®æŠ¥çš„æ•°æ®ã€æ•°æ®é•¿åº¦ã€ç›®æ ‡åœ°å€å’Œç›®æ ‡ç«¯å£</p>
<p>DatagramScoketï¼ˆæ”¶å‘å™¨ï¼‰ï¼šæ¥æ”¶å’Œå‘é€DatagramPacketä¸­å°è£…å¥½çš„æ•°æ®</p>
<p>æ¥æ”¶æ–¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Receive</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">64</span>] ;</span><br><span class="line">        <span class="comment">//å‡†å¤‡æ¥æ”¶æ•°æ®çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(data , data.length) ;</span><br><span class="line">        <span class="comment">//æ¥æ”¶æ•°æ®</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ds = <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">9999</span>);</span><br><span class="line">            ds.receive( dp );</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ˜¾ç¤ºæ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">receiveData</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(dp.getData(), <span class="number">0</span>, data.length);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°çš„æ•°æ®ï¼š&quot;</span>+receiveData);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜¾ç¤ºå‘é€æ–¹çš„ä¿¡æ¯ï¼š&quot;</span> +  dp.getAddress().getHostAddress() );</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            ds.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å‘é€æ–¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Send</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªInetAddresså¯¹è±¡</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">ip</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ip = InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;helloserver..&quot;</span> ;</span><br><span class="line">            <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(msg.getBytes(),msg.length(),ip,<span class="number">9999</span>) ;</span><br><span class="line">            ds = <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>() ;</span><br><span class="line">            ds.send(  dp );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            ds.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼šå‘é€æ•°æ®ä½¿ç”¨çš„å·¥å…·</p>
<p>TCPï¼šå­—èŠ‚æµ</p>
<p>UDPï¼šDatagramScoket</p>
<h2 id="ç½‘ç»œç¼–ç¨‹ä¸­ä¸€äº›å·¥å…·ç±»">ç½‘ç»œç¼–ç¨‹ä¸­ä¸€äº›å·¥å…·ç±»</h2>
<p>InetAddress</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     <span class="type">InetAddress</span> <span class="variable">host</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="comment">//æœ¬æœº</span></span><br><span class="line">         host = InetAddress.getLocalHost();</span><br><span class="line">         System.out.println(host);</span><br><span class="line">         <span class="comment">//ç½‘ç»œä¸­ä»»æ„ä¸€å°</span></span><br><span class="line">         <span class="type">InetAddress</span> <span class="variable">host163</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.163.com&quot;</span>);</span><br><span class="line">         System.out.println(host163);</span><br><span class="line">     &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><strong>URL/URLConnection</strong></p>
<p>ä»¥ä¸‹ç¤ºä¾‹ï¼Œæ³¨æ„ç‚¹ï¼šè¾“å…¥æµ url-å†…å­˜ï¼› è¾“å‡ºæµï¼šå†…å­˜-æœ¬åœ°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLConnection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">URLDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="type">URLConnection</span> <span class="variable">urlConnection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://www.163.com/&quot;</span>) ;</span><br><span class="line">            urlConnection = url.openConnection();</span><br><span class="line">            in = urlConnection.getInputStream();</span><br><span class="line"></span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\163.txt&quot;</span>);</span><br><span class="line">            <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">64</span>] ;</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span> ;</span><br><span class="line">            <span class="keyword">while</span>(  (len = in.read(buf)) != -<span class="number">1</span> )&#123;</span><br><span class="line">                out.write(buf,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               	<span class="keyword">if</span>(out!=<span class="literal">null</span>) out.close();</span><br><span class="line">                <span class="keyword">if</span>(in!=<span class="literal">null</span>)  in.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.bilibili.com/video/BV114411W7id?p=61">https://www.bilibili.com/video/BV114411W7id?p=61</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è®°å¾—å­¦è¿™ä¸ªæ˜¯åœ¨ç–«æƒ…æœŸé—´ç½‘è¯¾å­¦ä¹ çš„ï¼Œå½“æ—¶ç”¨çš„æ˜¯C#ï¼ŒVSæ•™å­¦çš„ï¼Œåˆ°ç°åœ¨éƒ½å¿«å¿˜å®Œäº†ï¼Œæˆ‘æ˜¯å–œæ¬¢Javaï¼</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxè™šæ‹Ÿæœºå®‰è£…</title>
    <url>/article/e8c0a077.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>Bç«™è§†é¢‘ï¼š<a
href="https://www.bilibili.com/video/BV1bA411b7vs">https://www.bilibili.com/video/BV1bA411b7vs</a></p>
<p>è§†é¢‘é…å¥—ï¼ˆwindowså®‰è£…ï¼‰ï¼š<a
href="https://mp.weixin.qq.com/s/onVwwEQ1DAwbvK7qS2YNxg">https://mp.weixin.qq.com/s/onVwwEQ1DAwbvK7qS2YNxg</a></p>
<p>csdnï¼š<a
href="https://blog.csdn.net/java_xinshou1/article/details/100010099">https://blog.csdn.net/java_xinshou1/article/details/100010099</a>ã€<a
href="https://blog.csdn.net/qq_40950957/article/details/80467513">https://blog.csdn.net/qq_40950957/article/details/80467513</a></p>
<p>èœé¸Ÿæ•™ç¨‹ï¼š<a
href="https://www.runoob.com/linux/linux-install.html">https://www.runoob.com/linux/linux-install.html</a></p>
<span id="more"></span>
<h1 id="èµ·å› ">èµ·å› </h1>
<p>å•çº¯çš„çŸ¥é“ï¼ŒLinuxæ˜¯ç¨‹åºå‘˜ï¼Œå°¤å…¶æ˜¯åç«¯ç¨‹åºå‘˜å¿…é¡»æŒæ¡çš„ï¼Œso...</p>
<h1 id="å®‰è£…">å®‰è£…</h1>
<h2 id="å‡†å¤‡">å‡†å¤‡</h2>
<p>å®¿ä¸»æœºç³»ç»Ÿï¼š<code>Windows 10</code></p>
<p>è™šæ‹Ÿæœºè½¯ä»¶ï¼š<a
href="https://my.vmware.com/cn/web/vmware/downloads/info/slug/desktop_end_user_computing/vmware_workstation_pro/16_0"><code>VMware Workstation 16</code></a></p>
<p><code>CentOS</code> æ“ä½œç³»ç»Ÿ <code>ISO</code> é•œåƒï¼š<a
href="http://mirrors.aliyun.com/centos/7/isos/x86_64/">CentOS 7</a></p>
<p>SSHç»ˆç«¯è½¯ä»¶ï¼š<a
href="https://mobaxterm.mobatek.net/"><code>MobaXterm</code></a></p>
<h2 id="å¼€å§‹">å¼€å§‹</h2>
<p>ä¸Šé¢çš„æ•™ç¨‹å·²ç»ç›¸å½“å®Œå¤‡äº†ï¼Œæˆ‘åªæƒ³æä¸€ä¸‹å¯èƒ½é‡åˆ°çš„é—®é¢˜</p>
<p><strong>å…ˆæ•´ä¸ªå™è¿°ä¸€ä¸‹å®‰è£…çš„æ•´ä¸ªè¿‡ç¨‹</strong></p>
<ul>
<li>æ‰“å¼€è™šæ‹Ÿæœºè½¯ä»¶<code>VMware Workstation</code>ï¼Œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºï¼Œè‡ªå®šä¹‰å®‰è£…ï¼Œé€‰æ‹©è™šæ‹Ÿæœºç¡¬ä»¶å…¼å®¹æ€§</li>
<li>åŠ è½½å·²ä¸‹è½½å¥½çš„<code>CentOS 7</code>é•œåƒï¼Œä¸‹ä¸€æ­¥ï¼Œç›´åˆ°å‘½åè™šæ‹Ÿæœºå’Œé€‰æ‹©å®‰è£…ä½ç½®ï¼Œåå­—å°½é‡ä¸ç”¨ï¼ˆç©ºæ ¼ï¼Œæ–œçº¿ï¼Œç‚¹ï¼Œä¸­æ–‡ï¼‰ï¼Œå¯ä»¥ç”¨ä¸‹åˆ’çº¿è¿æ¥å‘½åï¼Œä½ç½®è‡ªå·±é€‰å°±è¡Œ</li>
<li>è‡ªå®šä¹‰è™šæ‹Ÿæœºé…ç½®ï¼Œå¤„ç†æœºæŒ‰éœ€åˆ†é…ï¼ˆå‚è€ƒï¼š8æ ¸åˆ†2æ ¸ï¼‰ï¼Œå†…å­˜æ¨èå€¼å·¦å³å§ï¼Œç½‘ç»œç±»å‹æ¡¥æ¥ç½‘ç»œï¼Œä¸‹ä¸€æ­¥ï¼Œç›´åˆ°ç¡¬ç›˜å¤§å°ï¼Œæˆ‘ä½¿ç”¨çš„å°±æ˜¯æ¨èå¤§å°ï¼ˆåŒæ ·æŒ‰éœ€åˆ†é…ï¼‰</li>
<li>å®‰è£…æˆåŠŸåå¯åŠ¨ï¼Œè®¾ç½®ç®€ä½“ä¸­æ–‡ï¼Œé€‰æ‹©é¢„å®‰è½¯ä»¶ï¼ˆæœ€å°å®‰è£…æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œç”šè‡³ä¸æ”¯æŒä¸€äº›å‘½ä»¤ï¼Œéœ€è¦é¢å¤–å®‰è£…ï¼Œå½“ç„¶æ­£å› å¦‚æ­¤å®‰è£…å†…å®¹å°‘æ›´å¿«ï¼Œæ­¤é¡¹å°±æ˜¯æ ¹æ®ä¸ªäººéœ€æ±‚é€‰æ‹©çš„ï¼‰</li>
<li>é…ç½®åˆ†åŒºï¼Œæ²¡æœ‰ç‰¹åˆ«éœ€æ±‚å¯ä»¥é€‰æ‹©è‡ªåŠ¨åˆ†åŒºï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªå®šä¹‰åˆ†åŒº</li>
<li>å¼€å§‹å®‰è£…ï¼Œè¿™æ˜¯æœ‰ä¸¤ä¸ªéœ€è¦é…ç½®ï¼ŒROOTå¯†ç å’Œåˆ›å»ºç”¨æˆ·ï¼ˆROOTç”¨æˆ·åŠæ‹¥æœ‰æœ€é«˜æƒé™çš„ç”¨æˆ·ï¼Œè®¸å¤šæ“ä½œéƒ½éœ€è¦åœ¨ROOTç”¨æˆ·ä¸‹æ“ä½œï¼›åˆ›å»ºç”¨æˆ·åˆ™å¯ä»¥ç”¨è¿™ä¸ªç”¨æˆ·ç™»å½•Linuxï¼Œæƒé™ä½ä¸€äº›ï¼‰</li>
<li>å®‰è£…å®Œæˆé‡å¯ï¼Œè¿›å…¥ç³»ç»Ÿ</li>
</ul>
<p><strong>å¾…è§£å†³é—®é¢˜</strong></p>
<ul>
<li>ç½‘ç»œé—®é¢˜ï¼ˆè™šæ‹Ÿæœºä¸èƒ½è®¿é—®å¤–ç½‘ï¼Œä¸èƒ½è®¿é—®å®¿ä¸»æœºï¼‰</li>
</ul>
<p><strong>ç½‘ç»œé…ç½®</strong></p>
<ul>
<li><code>ifconfig</code>æˆ–<code>ip addr</code>æŸ¥çœ‹ipä¿¡æ¯</li>
<li>å‚è€ƒä¸Šé¢çš„é“¾æ¥æ“ä½œå³å¯</li>
</ul>
<p><strong>ç½‘ç»œé…ç½®å®Œæˆä»ç„¶æœ‰é—®é¢˜</strong></p>
<ul>
<li>å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œpingé€šå¤–ç½‘ï¼Œå®¿ä¸»æœºpingé€šè™šæ‹Ÿæœºï¼Œä½†è™šæ‹Ÿæœºpingä¸é€šå®¿ä¸»æœº</li>
<li>å‚è€ƒé“¾æ¥ï¼š<a
href="https://blog.csdn.net/qq_22799043/article/details/110682846">https://blog.csdn.net/qq_22799043/article/details/110682846</a></li>
</ul>
<p><strong>æœ€å°å®‰è£…å­—ä½“ä¸åˆ†è¾¨ç‡é—®é¢˜</strong></p>
<ul>
<li>å‚è€ƒé“¾æ¥ï¼š<a
href="https://blog.csdn.net/weixin_39622178/article/details/114490496">https://blog.csdn.net/weixin_39622178/article/details/114490496</a></li>
</ul>
<p><strong>SSHç»ˆç«¯è¿æ¥</strong></p>
<p>ä½¿ç”¨SSHç»ˆç«¯è¿æ¥Linuxï¼Œ<code>MobaXterm</code>åˆšåˆšå®‰è£…è¿˜åœ¨æ¢ç´¢é˜¶æ®µ</p>
<p>ChromeSSHæ’ä»¶ï¼š<a
href="chrome://extensions/?id=iodihamcpbpeioajjeobimgagajmlibd">chrome://extensions/?id=iodihamcpbpeioajjeobimgagajmlibd</a></p>
<p>å…¶ä»–è¿˜æœ‰è®¸å¤šï¼Œç”šè‡³Win10éƒ½å¸¦æœ‰ï¼Œåœ¨ä»»æ„ç›®å½•ä¸‹æŒ‰<code>shift</code>å’Œé¼ æ ‡å³é”®ï¼Œåœ¨æ­¤å¤„æ‰“å¼€Powershellçª—å£ï¼Œè¾“å…¥<code>ssh</code>ï¼Œå‘ç°win10è‡ªå¸¦äº†SSHç»ˆç«¯åŠŸèƒ½ï¼Œå³å¯
<code>ssh username@xxx.xxx.xxx.xxx</code> è¿æ¥äº†</p>
<p>å¦‚æœæœ‰éœ€è¦å¯ä»¥å…‹éš†å·²å®‰è£…çš„è™šæ‹Ÿæœºæ‰“é€ å¤šèŠ‚ç‚¹ï¼Œå¹³æ—¶ç»ƒç»ƒæ‰‹</p>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode3</title>
    <url>/article/9b0b3e33.html</url>
    <content><![CDATA[<p>ç»­<a
href="https://wnhyang.github.io/article/ec0c0ea5.html">LeetCode2</a></p>
<p>æœ‰äº†å‰é¢çš„åšé¢˜ç»éªŒï¼Œä¼šå‘ç°æ¥ä¸‹æ¥åšçš„é¢˜æœ‰è®¸å¤šéƒ½æ˜¯ä¸€ä¸ªæ ·æ¿çš„ç¿»ç‰ˆï¼Œéƒ½å¾ˆç±»ä¼¼ï¼Œåªè¦æŒæ¡äº†ä¸€äº›æ–¹æ³•è¿˜æ˜¯å®¹æ˜“åº”å¯¹çš„ã€‚æˆ‘å†™çš„ä¸€èˆ¬éƒ½æ˜¯æ–°çš„é¢˜ã€‚</p>
<span id="more"></span>
<h1 id="ç››æœ€å¤šæ°´çš„å®¹å™¨">11.ç››æœ€å¤šæ°´çš„å®¹å™¨</h1>
<p><a
href="https://leetcode-cn.com/problems/container-with-most-water/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™ä½  n ä¸ªéè´Ÿæ•´æ•° a1ï¼Œa2ï¼Œ...ï¼Œanï¼Œæ¯ä¸ªæ•°ä»£è¡¨åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹Â (i,Â ai)
ã€‚åœ¨åæ ‡å†…ç”» n æ¡å‚ç›´çº¿ï¼Œå‚ç›´çº¿ iÂ çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«ä¸ºÂ (i,Â ai) å’Œ (i,
0)ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸Â xÂ è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚</p>
<p>è¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ï¼Œä¸”Â nÂ çš„å€¼è‡³å°‘ä¸º 2ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/question_11.jpg"
alt="å›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚" />
<figcaption aria-hidden="true">å›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„
[1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º
49ã€‚</figcaption>
</figure>
<p>ç¤ºä¾‹ï¼š &gt;è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]<br />
&gt;è¾“å‡ºï¼š49</p>
<h1 id="begin">begin</h1>
<p>è¿™ä¸ªä½ ä¼šæ€ä¹ˆå»è§£å‘¢ï¼Ÿæˆ‘çš„ç¬¬ä¸€æƒ³æ³•å°±æ˜¯åˆšåˆšè§è¯†è¿‡çš„åŒæŒ‡é’ˆï¼Œè¯•è¯•å˜›ã€‚ä½†æ˜¯åˆ¤æ–­å¦‚ä½•ç§»åŠ¨æ—¶æ…Œäº†ï¼Œä¸çŸ¥é“å’‹åŠäº†ã€‚ä¹‹åçœ‹æ¥é¢˜è§£æç„¶å¤§æ‚Ÿï¼Œè‡ªå·±çœŸå‚»ï¼Œæ€ä¹ˆç§»åŠ¨ï¼Ÿå½“æ—¶çœŸæ˜¯æ²¡è„‘ç­‹ï¼Œå½“ç„¶æ˜¯ä½çš„å‘ä¸­é—´ç§»åŠ¨äº†ï¼Œå“ã€‚</p>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxArea</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">        <span class="type">int</span> maxarea=<span class="number">0</span>,l=<span class="number">0</span>,h=height.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;h)&#123;</span><br><span class="line">            maxarea=Math.max(maxarea,Math.min(height[l],height[h])*(h-l));</span><br><span class="line">            <span class="keyword">if</span>(height[l]&lt;=height[h])&#123;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                h--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxarea;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/container-with-most-water/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æœç´¢æ’å…¥ä½ç½®">35.æœç´¢æ’å…¥ä½ç½®</h1>
<p><a
href="https://leetcode-cn.com/problems/search-insert-position/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚</p>
<p>ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­æ— é‡å¤å…ƒç´ ã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt;è¾“å…¥: [1,3,5,6], 5<br />
&gt;è¾“å‡º: 2</p>
<p>ç¤ºä¾‹2ï¼š &gt;è¾“å…¥: [1,3,5,6], 2<br />
&gt;è¾“å‡º: 1</p>
<p>ç¤ºä¾‹3ï¼š &gt;è¾“å…¥: [1,3,5,6], 7<br />
&gt;è¾“å‡º: 4</p>
<p>ç¤ºä¾‹4ï¼š &gt;è¾“å…¥: [1,3,5,6], 0<br />
&gt;è¾“å‡º: 0</p>
<h1 id="begin-1">begin</h1>
<p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„äºŒåˆ†æ³•åº”ç”¨ï¼Œè¿·æƒ‘çš„ç‚¹åœ¨è¿™ä¸ªé¢˜å«â€œæœç´¢æ’å…¥ä½ç½®â€ï¼Œå…³é”®æ˜¯ä¸å­˜åœ¨æ—¶è¦æ‰¾åˆ°æ’å…¥ä¸ºã€‚æƒ³é€šè¿™ä¸ªå°±å®¹æ˜“äº†ï¼Œä¹‹åå¯ä»¥å°è¯•è¿™ä¸ª<a
href="https://leetcode-cn.com/problems/sqrtx/">69. x çš„å¹³æ–¹æ ¹</a>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> l=<span class="number">0</span>,h=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;=h)&#123;</span><br><span class="line">            <span class="type">int</span> mid=l+(h-l)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(target==nums[mid])&#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(target&gt;nums[mid])&#123;</span><br><span class="line">                l=mid+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                h=mid-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/search-insert-position/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="ç¯å½¢é“¾è¡¨">141.ç¯å½¢é“¾è¡¨</h1>
<p><a
href="https://leetcode-cn.com/problems/linked-list-cycle/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚</p>
<p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next
æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos
æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯
-1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos
ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p>
<p>å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚</p>
<p>è¿›é˜¶ï¼š</p>
<p>ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ</p>
<p>ç¤ºä¾‹1ï¼š</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/141_1.png" width="400" height="" alt="141-1" /></p>
<blockquote>
<p>è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1<br />
è¾“å‡ºï¼štrue<br />
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹2ï¼š</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/141_2.png" width="200" height="" alt="141-1" /></p>
<blockquote>
<p>è¾“å…¥ï¼šhead = [1,2], pos = 0 è¾“å‡ºï¼štrue<br />
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹3ï¼š</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/141_3.png" width="60" height="" alt="141-1" /></p>
<blockquote>
<p>è¾“å…¥ï¼šhead = [1], pos = -1<br />
è¾“å‡ºï¼šfalse<br />
è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</p>
</blockquote>
<p>æç¤ºï¼š</p>
<ul>
<li>é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [<span class="math inline">\(0\)</span>,
<span class="math inline">\(10^4\)</span>]</li>
<li><span class="math inline">\({-10}^5\)</span> &lt;= Node.val &lt;=
<span class="math inline">\({10}^5\)</span></li>
<li>pos ä¸º <span class="math inline">\(-1\)</span> æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ª
<strong>æœ‰æ•ˆç´¢å¼•</strong> ã€‚</li>
</ul>
<h1 id="begin-2">begin</h1>
<p>å®˜æ–¹ç»™äº†ä¸¤ç§æ–¹æ³•ã€‚è¿™ä¸ªé¢˜æ˜¯ä¸€å®šè¦æ”¾åœ¨è¿™çš„åŸå› å°±æ˜¯å› ä¸ºç¬¬äºŒç§è§£æ³•ï¼Œæˆ‘åªèƒ½è¯´èƒ½äº§ç”Ÿè¿™ç§æƒ³æ³•å’Œæ€ç»´çš„ç®€ç›´äº†ã€‚</p>
<h1 id="æ–¹æ³•ä¸€å“ˆå¸Œè¡¨">æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨</h1>
<p>åˆ©ç”¨å“ˆå¸Œè¡¨åˆ¤æ–­æ˜¯å¦æœ‰é‡å¤å…ƒç´ è¿›è€Œå¾—å‡ºç»“æœã€‚</p>
<p>å®˜æ–¹æ–¹æ³•ä¸€java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    Set&lt;ListNode&gt; nodesSeen = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nodesSeen.contains(head)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nodesSeen.add(head);</span><br><span class="line">        &#125;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h1>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(<span class="math inline">\(n\)</span>)ï¼Œå¯¹äºå«æœ‰ n
ä¸ªå…ƒç´ çš„é“¾è¡¨ï¼Œæˆ‘ä»¬è®¿é—®æ¯ä¸ªå…ƒç´ æœ€å¤šä¸€æ¬¡ã€‚æ·»åŠ ä¸€ä¸ªç»“ç‚¹åˆ°å“ˆå¸Œè¡¨ä¸­åªéœ€è¦èŠ±è´¹
O(<span class="math inline">\(1\)</span>)çš„æ—¶é—´ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(<span
class="math inline">\(n\)</span>)ï¼Œç©ºé—´å–å†³äºæ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ æ•°ç›®ï¼Œæœ€å¤šå¯ä»¥æ·»åŠ 
<span class="math inline">\(n\)</span> ä¸ªå…ƒç´ ã€‚</li>
</ul>
<h1 id="æ–¹æ³•äºŒå¿«æ…¢æŒ‡é’ˆ">æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆ</h1>
<p>æƒ³è±¡è·‘æ­¥æ¯”èµ›ï¼Œå½“æ— ç¯æ—¶ï¼šå¿«æŒ‡é’ˆç­‰äºnullï¼Œå³åˆ°ç»ˆç‚¹äº†ï¼Œè¿”å›falseã€‚å½“æœ‰ç¯æ—¶ï¼šå¿«æ…¢æŒ‡é’ˆéƒ½ä¼šè¿›å…¥ç¯èµ›é“ä¸­ï¼Œå¿…å®šå­˜åœ¨å¿«æŒ‡é’ˆè¶…è¶Šæ…¢æŒ‡é’ˆï¼Œå³çš„ç¡®æœ‰ç¯ï¼Œè¿”å›trueã€‚</p>
<p>å®˜æ–¹æ–¹æ³•äºŒjava</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head.next;</span><br><span class="line">    <span class="keyword">while</span> (slow != fast) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fast == <span class="literal">null</span> || fast.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤æ‚åº¦åˆ†æ-1">å¤æ‚åº¦åˆ†æ</h1>
<ul>
<li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(<span class="math inline">\(n\)</span>)ï¼Œè®©æˆ‘ä»¬å°†
<span class="math inline">\(n\)</span>
è®¾ä¸ºé“¾è¡¨ä¸­ç»“ç‚¹çš„æ€»æ•°ã€‚ä¸ºäº†åˆ†ææ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬åˆ†åˆ«è€ƒè™‘ä¸‹é¢ä¸¤ç§æƒ…å†µã€‚</p>
<ul>
<li><strong><em>é“¾è¡¨ä¸­ä¸å­˜åœ¨ç¯</em></strong>ï¼š<br />
å¿«æŒ‡é’ˆå°†ä¼šé¦–å…ˆåˆ°è¾¾å°¾éƒ¨ï¼Œå…¶æ—¶é—´å–å†³äºåˆ—è¡¨çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ O(<span
class="math inline">\(n\)</span>)ã€‚</li>
<li><strong><em>é“¾è¡¨ä¸­å­˜åœ¨ç¯</em></strong>ï¼š
æˆ‘ä»¬å°†æ…¢æŒ‡é’ˆçš„ç§»åŠ¨è¿‡ç¨‹åˆ’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šéç¯éƒ¨åˆ†ä¸ç¯å½¢éƒ¨åˆ†ï¼š</li>
</ul>
<ol type="1">
<li>æ…¢æŒ‡é’ˆåœ¨èµ°å®Œéç¯éƒ¨åˆ†é˜¶æ®µåå°†è¿›å…¥ç¯å½¢éƒ¨åˆ†ï¼šæ­¤æ—¶ï¼Œå¿«æŒ‡é’ˆå·²ç»è¿›å…¥ç¯ä¸­
<strong>è¿­ä»£æ¬¡æ•°</strong> = <strong>éç¯éƒ¨åˆ†é•¿åº¦</strong> =
<strong><span class="math inline">\(N\)</span></strong></li>
<li>ä¸¤ä¸ªæŒ‡é’ˆéƒ½åœ¨ç¯å½¢åŒºåŸŸä¸­ï¼šè€ƒè™‘ä¸¤ä¸ªåœ¨ç¯å½¢èµ›é“ä¸Šçš„è¿åŠ¨å‘˜ -
å¿«è·‘è€…æ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥è€Œæ…¢è·‘è€…æ¯æ¬¡åªç§»åŠ¨ä¸€æ­¥ã€‚å…¶é€Ÿåº¦çš„å·®å€¼ä¸º 1ï¼Œå› æ­¤éœ€è¦ç»è¿‡
<strong>äºŒè€…ä¹‹é—´è·ç¦»é€Ÿåº¦å·®å€¼</strong>æ¬¡å¾ªç¯åï¼Œå¿«è·‘è€…å¯ä»¥è¿½ä¸Šæ…¢è·‘è€…ã€‚è¿™ä¸ªè·ç¦»å‡ ä¹å°±æ˜¯
<strong>"ç¯å½¢éƒ¨åˆ†é•¿åº¦ <span class="math inline">\(K\)</span>"</strong>
ä¸”é€Ÿåº¦å·®å€¼ä¸º <span class="math inline">\(1\)</span>ï¼Œæˆ‘ä»¬å¾—å‡ºè¿™æ ·çš„ç»“è®º
<strong>è¿­ä»£æ¬¡æ•° = è¿‘ä¼¼äº "ç¯å½¢éƒ¨åˆ†é•¿åº¦Â K"</strong>.</li>
</ol>
<p>å› æ­¤ï¼Œåœ¨æœ€ç³Ÿç³•çš„æƒ…å½¢ä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(<span
class="math inline">\(N+K\)</span>)ï¼Œä¹Ÿå°±æ˜¯ O(<span
class="math inline">\(n\)</span>)ã€‚</p></li>
<li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(<span
class="math inline">\(1\)</span>)ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†æ…¢æŒ‡é’ˆå’Œå¿«æŒ‡é’ˆä¸¤ä¸ªç»“ç‚¹ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º
O(<span class="math inline">\(1\)</span>)ã€‚</p></li>
</ul>
<p><a
href="https://leetcode-cn.com/problems/linked-list-cycle/solution/">è¯¦ç»†é¢˜è§£</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxé‚®ä»¶å‘é€</title>
    <url>/article/51f254be.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘åœ¨æŠ˜è…¾<code>Linux</code>ï¼Œæƒ³åšä¸€ç‚¹æœ‰è¶£çš„äº‹æƒ…ï¼Œé¦–å…ˆæƒ³åˆ°å°±æ˜¯é€šè¿‡å®šæ—¶ä»»åŠ¡ï¼Œåšä¸€äº›é€šçŸ¥ï¼ŒåŸæ¥æˆ‘å°±åšè¿‡<code>Java</code>æ•´åˆé‚®ä»¶ï¼Œåšä¸€äº›é‚®ä»¶å‘é€ï¼Œç›´åˆ°æœ€è¿‘æˆ‘æ‰çŸ¥é“ï¼ŒåŸæ¥<code>Linux</code>æœ¬èº«å°±èƒ½å‘é€é‚®ä»¶çš„ã€‚</p>
<p>é‚£æ›´å¥½äº†ï¼Œç›´æ¥å¼€å§‹ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><p>https://linux.cn/article-11663-1.html</p></li>
<li><p>https://www.jianshu.com/p/d1f757c89826</p></li>
</ul>
<span id="more"></span>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>å¦‚æœä½ æ‡’å¾—æ‰“å¼€ä¸Šé¢çš„ä¸¤ä¸ªé“¾æ¥ï¼Œé‚£æˆ‘è§£é‡Šä¸€ä¸‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯<code>Linux</code>å‘é€é‚®ä»¶çš„å‡ ç§æ–¹å¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä½¿ç”¨<code>ssl</code>å‘é€é‚®ä»¶çš„é…ç½®æ–¹å¼ã€‚</p>
<h2 id="section"></h2>
<h2 id="å®‰è£…mailx">å®‰è£…<code>mailx</code></h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install mailx</span><br></pre></td></tr></table></figure>
<h2 id="ç¼–è¾‘é…ç½®">ç¼–è¾‘é…ç½®</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/mail.rc</span><br></pre></td></tr></table></figure>
<p>æœ€åæ·»åŠ </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘å‡ºé‚®ä»¶åœ°å€</span></span><br><span class="line">set from=example@qq.com</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">smtpé…ç½®ï¼Œä¸ä¸Šé¢å¯¹åº”</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šå¸¸ä¸ä½¿ç”¨sslï¼Œsmtpä½¿ç”¨25ç«¯å£ï¼Œé…ç½®é‡‡ç”¨ä¸‹é¢çš„å³å¯</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨sslï¼Œsmtpä½¿ç”¨465ç«¯å£ï¼Œé…ç½®è¦æ”¹ä¸º stmps://smtp.qq.com</span></span><br><span class="line">set smtp=smtp.qq.com                                         </span><br><span class="line">set smtp-auth-user=example@qq.com</span><br><span class="line">set smtp-auth-password=**************</span><br><span class="line">set smtp-auth=login</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœè¦ç”¨sslå°±è¦åŠ ä¸Šä¸‹é¢çš„</span></span><br><span class="line">set ssl-verify=ignore</span><br><span class="line">set nss-config-dir=/root/.certs</span><br></pre></td></tr></table></figure>
<h2 id="è¯ä¹¦é…ç½®">è¯ä¹¦é…ç½®</h2>
<p>ä½¿ç”¨<code>ssl</code>ï¼Œå¿…é¡»è¦é…ç½®è¯ä¹¦</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /root/.certs/</span><br><span class="line">echo -n | openssl s_client -connect smtp.qq.com:465 | sed -ne &#x27;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&#x27; &gt; ~/.certs/qq.crt</span><br><span class="line">certutil -A -n &quot;GeoTrust SSL CA&quot; -t &quot;C,,&quot; -d ~/.certs -i ~/.certs/qq.crt</span><br><span class="line">certutil -A -n &quot;GeoTrust Global CA&quot; -t &quot;C,,&quot; -d ~/.certs -i ~/.certs/qq.crt</span><br><span class="line">certutil -A -n &quot;GeoTrust SSL CA - G3&quot; -t &quot;Pu,Pu,Pu&quot; -d ~/.certs/./ -i qq.crt</span><br><span class="line">certutil -L -d /root/.certs</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &quot;This is the mail body&quot; | mail -a /home/wnh/apps/spring/application.properties -s &quot;Subject&quot; wnhyang@139.com</span><br></pre></td></tr></table></figure>
<h1 id="è¡¥ä¸Š">è¡¥ä¸Š</h1>
<h2 id="è¦å®šæ—¶çš„è„šæœ¬">è¦å®šæ—¶çš„è„šæœ¬</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">info=&quot;This is the mail body\nç£ç›˜ä½¿ç”¨æƒ…å†µï¼š\n`df -h`\nå†…å­˜ä½¿ç”¨æƒ…å†µï¼š\n`free -h`è¿›ç¨‹è¿è¡Œæƒ…å†µï¼š\n`top -n 1`&quot;</span><br><span class="line"></span><br><span class="line">zip -r /home/wnh/linux_bak.zip /home/wnh/script /home/wnh/mail /home/wnh/apps</span><br><span class="line"></span><br><span class="line">curl -i -k  -H &quot;Content-type: application/json&quot; -X POST -d &#x27;&#123;&quot;mailbox&quot;: &quot;wnhyang@139.com&quot;,&quot;subject&quot;: &quot;testMail&quot;,&quot;content&quot;: &quot;$&#123;info&#125;&quot;&#125;&#x27; http://127.0.0.1:8093/email/4</span><br><span class="line"></span><br><span class="line">echo -e &quot;$&#123;info&#125;&quot; | mail -a /home/wnh/linux_bak.zip -s &quot;Subject&quot; wnhyang@139.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="å®šæ—¶æ‰§è¡Œ">å®šæ—¶æ‰§è¡Œ</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">crontab -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç§»é™¤å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">crontab -r</span><br><span class="line"></span><br><span class="line">00 12 * * 5 /home/wnh/script/mail.sh</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode2</title>
    <url>/article/ec0c0ea5.html</url>
    <content><![CDATA[<p>ç»­<a
href="https://wnhyang.github.io/article/75055f1f.html">LeetCode1</a></p>
<span id="more"></span>
<h1 id="powx-n">50.Pow(x, n)</h1>
<p><a href="https://leetcode-cn.com/problems/powx-n/">é¢˜ç›®åœ°å€</a></p>
<p>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt; è¾“å…¥: 2.00000, 10<br />
&gt;è¾“å‡º: 1024.00000</p>
<p>ç¤ºä¾‹2ï¼š &gt; è¾“å…¥: 2.10000, 3<br />
&gt;è¾“å‡º: 9.26100</p>
<p>ç¤ºä¾‹3ï¼š &gt; è¾“å…¥: 2.00000, -2<br />
&gt;è¾“å‡º: 0.25000<br />
&gt;è§£é‡Š: <span class="math inline">\(2^{-2}\)</span> = <span
class="math inline">\(1/2^2\)</span> = <span
class="math inline">\(1/4\)</span> = <span
class="math inline">\(0.25\)</span></p>
<p>è¯´æ˜:</p>
<ul>
<li>-100.0 &lt; x &lt; 100.0</li>
<li>n æ˜¯ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [<span
class="math inline">\(âˆ’2^{31}\)</span>, <span
class="math inline">\(2^{31} âˆ’ 1\)</span>] ã€‚</li>
</ul>
<h1 id="begin">begin</h1>
<p>æ˜¯ä¸æ˜¯æœ‰äººå°±ç–‘æƒ‘äº†ï¼Œæ˜æ˜æœ‰powå¯ä»¥ç”¨ï¼Œä¸ºå•¥è¿˜æœ‰è¿™é¢˜å‘¢ï¼Ÿæ˜¯å•Š,ä½†è¿™æ ·å°±è€ƒéªŒåˆ°ä½ å¯¹åŸºç¡€çš„ç†è§£äº†ã€‚</p>
<p>è¿™é‡Œç”¨åˆ°çš„æ˜¯å¿«é€Ÿå¹‚ç®—æ³•ï¼ˆä½¿ç”¨äº†åˆ†æ²»çš„æ€æƒ³ï¼‰ï¼ŒçŸ¥é“çš„éƒ½çŸ¥é“äº†ï¼Œä¸çŸ¥é“çš„æ…¢æ…¢äº†è§£å˜›ã€‚å†åŠ ä¸Šè´Ÿæ•°çš„åˆ¤æ–­å¤„ç†å³å¯è§£ã€‚</p>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">quickpow</span><span class="params">(<span class="type">double</span> x, <span class="type">long</span> n)</span>&#123;</span><br><span class="line">        <span class="type">double</span> res=<span class="number">1.0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">1</span>) res*=x;</span><br><span class="line">            x*=x;</span><br><span class="line">            n/=<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">myPow</span><span class="params">(<span class="type">double</span> x, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">long</span> N=n;</span><br><span class="line">        <span class="keyword">return</span> N&gt;=<span class="number">0</span>? quickpow(x,N) : <span class="number">1.0</span>/quickpow(x,-N);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/powx-n/solution/powx-n-by-leetcode-solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹">26.åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</h1>
<p><a
href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„ï¼Œä½ éœ€è¦åœ¨ åŸåœ°
åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œè¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p>
<p>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1)
é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt; ç»™å®šæ•°ç»„ nums = [1,1,2],<br />
&gt;å‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2, å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2ã€‚
&gt;ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p>
<p>ç¤ºä¾‹2ï¼š &gt; ç»™å®š nums = [0,0,1,1,1,2,2,3,3,4],<br />
&gt;å‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5, å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 0, 1,
2, 3, 4ã€‚<br />
&gt;ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p>
<p>è¯´æ˜:</p>
<p>ä¸ºä»€ä¹ˆè¿”å›æ•°å€¼æ˜¯æ•´æ•°ï¼Œä½†è¾“å‡ºçš„ç­”æ¡ˆæ˜¯æ•°ç»„å‘¢?</p>
<p>è¯·æ³¨æ„ï¼Œè¾“å…¥æ•°ç»„æ˜¯ä»¥ã€Œå¼•ç”¨ã€æ–¹å¼ä¼ é€’çš„ï¼Œè¿™æ„å‘³ç€åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</p>
<p>ä½ å¯ä»¥æƒ³è±¡å†…éƒ¨æ“ä½œå¦‚ä¸‹: <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// nums æ˜¯ä»¥â€œå¼•ç”¨â€æ–¹å¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯¹å®å‚åšä»»ä½•æ‹·è´</span></span><br><span class="line"><span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> removeDuplicates(nums);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</span></span><br><span class="line"><span class="comment">// æ ¹æ®ä½ çš„å‡½æ•°è¿”å›çš„é•¿åº¦, å®ƒä¼šæ‰“å°å‡ºæ•°ç»„ä¸­è¯¥é•¿åº¦èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ã€‚</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">Â  Â  print(nums[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="begin-1">begin</h1>
<p>è¿™é“é¢˜åº”è¯¥æ˜¯æˆ‘ç›®å‰è§£çš„æœ€å®¹æ˜“çš„äº†ï¼ŒåŸå› å°±æ˜¯ä¸Šå­¦æœŸæ•°æ®ç»“æ„æœ‰ä¸ªè¯¾åé¢˜å’Œè¿™ä¸ªå·®ä¸å¤šã€‚</p>
<p>è§£æ³•å°±æ˜¯åŒæŒ‡é’ˆï¼ŒkæŒ‡å‘å½“å‰ä½ç½®ï¼ŒlæŒ‡å‘é¢„å¤‡ç§»å…¥k+1ä½ç½®çš„ä½ç½®ï¼Œwhileå¾ªç¯æ¡ä»¶ä¸ºlåˆ°æ•°ç»„æœ«å°¾ï¼Œè‹¥nums[k]==nums[l],l++ï¼Œlå‘åç§»åŠ¨ï¼›è‹¥ä¸ç­‰ï¼Œè¯´æ˜è¿˜æœªå‡ºç°è¿™ä¸ªæ•°å¯ä»¥å­˜å…¥æ•°ç»„ä¸­ï¼Œnums[++k]=nums[l]å¯è§£å†³é—®é¢˜ï¼Œæœ€åè¿”å›å½“å‰ä¸‹æ ‡k+1å³æ–°æ•°ç»„é•¿åº¦ã€‚</p>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> k=<span class="number">0</span>,l=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;nums.length)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[k]==nums[l])</span><br><span class="line">                l++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                nums[++k]=nums[l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> k+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„">88.åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h1>
<p><a
href="https://leetcode-cn.com/problems/merge-sorted-array/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿
nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚</p>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>åˆå§‹åŒ–Â nums1 å’Œ nums2 çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸ºÂ m å’Œ n ã€‚</li>
<li>ä½ å¯ä»¥å‡è®¾Â nums1Â æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆç©ºé—´å¤§å°å¤§äºæˆ–ç­‰äºÂ m + nï¼‰æ¥ä¿å­˜
nums2 ä¸­çš„å…ƒç´ ã€‚</li>
</ul>
<p>ç¤ºä¾‹1ï¼š &gt; è¾“å…¥:<br />
&gt;nums1 = [1,2,3,0,0,0], m = 3<br />
&gt;nums2 = [2,5,6], n = 3<br />
&gt;è¾“å‡º:Â [1,2,2,3,5,6]</p>
<h1 id="begin-2">begin</h1>
<p>å…¶å®è¿™ä¸ªé¢˜ä¸ä¸Šé¢é‚£ä¸ªé¢˜æœ‰ç‚¹ç±»ä¼¼ï¼Œå¯å‚è€ƒç€å»åšï¼Œä½†ä¸€å®šè¦æ³¨æ„æ•°ç»„èŒƒå›´å’Œæ˜¯å¦æ‰€æœ‰æ•°ä»¥åŠ å…¥æ–°æ•°ç»„ä¸­äº†ã€‚</p>
<p>å®˜æ–¹é¢˜è§£ç»™å‡ºäº†ä¸‰ç§è§£æ³•éƒ½ç”¨åˆ°äº†ä¸‹é¢ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.arraycopy(dataType[] srcArray,<span class="type">int</span> srcIndex,<span class="type">int</span> destArray,<span class="type">int</span> destIndex,<span class="type">int</span> length)</span><br><span class="line"><span class="comment">//å…¶ä¸­ï¼ŒsrcArray è¡¨ç¤ºåŸæ•°ç»„ï¼›srcIndex è¡¨ç¤ºåŸæ•°ç»„ä¸­çš„èµ·å§‹ç´¢å¼•ï¼›destArray è¡¨ç¤ºç›®æ ‡æ•°ç»„ï¼›destIndex è¡¨ç¤ºç›®æ ‡æ•°ç»„ä¸­çš„èµ·å§‹ç´¢å¼•ï¼›length è¡¨ç¤ºè¦å¤åˆ¶çš„æ•°ç»„é•¿åº¦ã€‚</span></span><br></pre></td></tr></table></figure>
<h1 id="æ–¹æ³•ä¸€åˆå¹¶åæ’åº">æ–¹æ³•ä¸€ï¼šåˆå¹¶åæ’åº</h1>
<p>ç®€ç›´äº†ï¼Œå®˜æ–¹è¿™ä¹ˆç©ï¼Œæˆ‘ç›´æ¥æ‡µé€¼ã€‚</p>
<p>å®˜æ–¹æ–¹æ³•ä¸€java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    System.arraycopy(nums2, <span class="number">0</span>, nums1, m, n);</span><br><span class="line">    Arrays.sort(nums1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h1>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ : <span class="math inline">\(O((n + m)log(n +
m))\)</span>ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ : <span class="math inline">\(O(1)\)</span>ã€‚</li>
</ul>
<h1 id="æ–¹æ³•äºŒ-åŒæŒ‡é’ˆ-ä»å‰å¾€å">æ–¹æ³•äºŒ : åŒæŒ‡é’ˆ / ä»å‰å¾€å</h1>
<p>ç±»ä¼¼äºå‰ä¸€ä¸ªé¢˜ï¼Œä½†è¦æ³¨æ„ï¼Œå‰é¢è¯´çš„æ˜¯å¦æ‰€æœ‰æ•°ä»¥åŠ å…¥æ–°æ•°ç»„ä¸­äº†ï¼Œè¿˜æœ‰è¿™ä¸ªæ–¹æ³•éœ€è¦å†…å­˜å­˜nums1çš„åŸæ•°æ®ã€‚</p>
<p>å®˜æ–¹æ–¹æ³•äºŒjava</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// Make a copy of nums1.</span></span><br><span class="line">    <span class="type">int</span> [] nums1_copy = <span class="keyword">new</span> <span class="title class_">int</span>[m];</span><br><span class="line">    System.arraycopy(nums1, <span class="number">0</span>, nums1_copy, <span class="number">0</span>, m);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Two get pointers for nums1_copy and nums2.</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set pointer for nums1</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Compare elements from nums1_copy and nums2</span></span><br><span class="line">    <span class="comment">// and add the smallest one into nums1.</span></span><br><span class="line">    <span class="keyword">while</span> ((p1 &lt; m) &amp;&amp; (p2 &lt; n))</span><br><span class="line">      nums1[p++] = (nums1_copy[p1] &lt; nums2[p2]) ? nums1_copy[p1++] : nums2[p2++];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if there are still elements to add</span></span><br><span class="line">    <span class="keyword">if</span> (p1 &lt; m)</span><br><span class="line">      System.arraycopy(nums1_copy, p1, nums1, p1 + p2, m + n - p1 - p2);</span><br><span class="line">    <span class="keyword">if</span> (p2 &lt; n)</span><br><span class="line">      System.arraycopy(nums2, p2, nums1, p1 + p2, m + n - p1 - p2);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤æ‚åº¦åˆ†æ-1">å¤æ‚åº¦åˆ†æ</h1>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ : <span class="math inline">\(O(n + m)\)</span>ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ : <span class="math inline">\(O(m)\)</span>ã€‚</li>
</ul>
<h1 id="æ–¹æ³•ä¸‰-åŒæŒ‡é’ˆ-ä»åå¾€å‰">æ–¹æ³•ä¸‰ : åŒæŒ‡é’ˆ / ä»åå¾€å‰</h1>
<p>æƒ³åˆ°è¿™ä¸ªä¹Ÿæ˜¯ç»äº†ï¼Œè™½ç„¶ä¸æ–¹æ³•äºŒç›¸æ¯”åªæ˜¯ä»å¤´åˆ°å°¾å˜ä¸ºä»å°¾åˆ°å‰ï¼Œä½†ç©ºé—´çœä¸‹æ¥äº†ã€‚</p>
<p>å®˜æ–¹æ–¹æ³•äºŒjava</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// two get pointers for nums1 and nums2</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">p1</span> <span class="operator">=</span> m - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">p2</span> <span class="operator">=</span> n - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// set pointer for nums1</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> m + n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// while there are still elements to compare</span></span><br><span class="line">    <span class="keyword">while</span> ((p1 &gt;= <span class="number">0</span>) &amp;&amp; (p2 &gt;= <span class="number">0</span>))</span><br><span class="line">      <span class="comment">// compare two elements from nums1 and nums2 </span></span><br><span class="line">      <span class="comment">// and add the largest one in nums1 </span></span><br><span class="line">      nums1[p--] = (nums1[p1] &lt; nums2[p2]) ? nums2[p2--] : nums1[p1--];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// add missing elements from nums2</span></span><br><span class="line">    System.arraycopy(nums2, <span class="number">0</span>, nums1, <span class="number">0</span>, p2 + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤æ‚åº¦åˆ†æ-2">å¤æ‚åº¦åˆ†æ</h1>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ : <span class="math inline">\(O(n + m)\)</span>ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ : <span class="math inline">\(O(1)\)</span>ã€‚</li>
</ul>
<p><a
href="https://leetcode-cn.com/problems/merge-sorted-array/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ç»§ç»­ï¼Œæœ‰å¾…æé«˜ã€‚</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>MDç¼–è¾‘å™¨çš„çƒ¦æ¼</title>
    <url>/article/1ac0b150.html</url>
    <content><![CDATA[<h1 id="èµ·å› ">èµ·å› </h1>
<p>å› ä¸ºåœ¨å®ä¹ å˜›ï¼Œå…¬å¸é…æœ‰<code>mac</code>åŠå…¬ï¼Œè€Œæˆ‘æœ‰ä¸€å°<code>windows</code>ï¼Œæˆ‘åˆä¹ æƒ¯æ€§ä½¿ç”¨<code>Typora</code>è¿›è¡Œ<code>MarkDown</code>ç¼–è¾‘è®°å½•ï¼Œè¿™å°±å¾ˆçƒ¦äº†ï¼Œä¸¤å°ç”µè„‘æ•°æ®æ€»æ˜¯ä¸ä¸€è‡´ã€‚è€Œä¸”æˆ‘çš„<code>hexo</code>åšå®¢åœ¨<code>windows</code>ä¸Šï¼Œç°åœ¨æˆ‘ä½¿ç”¨<code>mac</code>æ›´å¤šä¸€äº›äº†ï¼Œæ‰€ä»¥æ¯æ¬¡ç¼–è¾‘æ–°åšå®¢å°±æ¯”è¾ƒéº»çƒ¦ã€‚ä¹‹å‰ä¸€ç›´éƒ½æ˜¯ç”¨<code>Tim</code>ã€<code>å¾®ä¿¡</code>ã€<code>é’‰é’‰</code>è¿™äº›èŠå¤©å·¥å…·é€šè¿‡ç»™è‡ªå·±å‘æ¶ˆæ¯ï¼Œç„¶åå¤åˆ¶ç²˜è´´æ¥ä¿è¯åŒæ­¥çš„ã€‚å®åœ¨æ˜¯å¤ªè ¢äº†ã€‚å°¤å…¶æ˜¯åœ¨ç°åœ¨è¿™æ ·çš„äº‘æ—¶ä»£ã€‚æ‰€ä»¥æˆ‘äºŸéœ€å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„äº‘çŸ¥è¯†åº“ã€‚</p>
<span id="more"></span>
<h1 id="è¯­é›€">è¯­é›€</h1>
<p>å…³äºè§£å†³æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä½†æœ€ç»ˆè¿˜æ˜¯å®ƒäº†â€”â€”<a
href="https://www.yuque.com/dashboard">è¯­é›€</a>ã€‚</p>
<p>å®ƒçš„åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œä»ç›®å‰æ„Ÿè§¦æ¥çœ‹ï¼Œå®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹</p>
<ul>
<li><p>äº‘ï¼Œè¿™æ˜¯å¿…é¡»çš„ï¼Œæˆ‘çš„é¦–è¦è€ƒè™‘å› ç´ </p></li>
<li><p>åŒæ­¥åä½œï¼Œç›®å‰æ„Ÿè§¦ä¸»è¦æ˜¯åŒæ­¥ï¼Œåä½œå˜›ï¼ŒæœŸå¾…å§</p></li>
<li><p>ç”Ÿæ€ï¼Œå…¶å®å°±æ˜¯å¾ˆå¤šäººåœ¨ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®äº’è”ç½‘å…¬å…±æƒé™</p></li>
<li><p>èµ„æºåº“ï¼Œå¯ä»¥ä¸Šä¼ ä¸€äº›å…±äº«èµ„æºï¼Œåœ¨çº¿çœ‹ï¼Œç›®å‰ä¸»è¦æ˜¯ä¸€äº›pdfæ–‡æ¡£</p></li>
<li><p>ç¼–è¾‘å†…å®¹éå¸¸ä¸°å¯Œï¼Œåªéœ€åœ¨ç¼–è¾‘æ—¶è¾“å…¥â€œ/â€ï¼Œå°±å¯ä»¥äº†ï¼Œå…¬å¼ã€éŸ³ä¹ã€æ€ç»´å¯¼å›¾è¿™äº›éƒ½å¾ˆå¸¸è§„ï¼Œä½†å®ƒè¿˜åŒ…æ‹¬åœ°å›¾ã€æ·˜å®è§†é¢‘ç­‰ç­‰</p></li>
<li><p>...</p></li>
</ul>
<p>è¯´å®Œä¼˜ç‚¹ï¼Œå¿…é¡»æ¥ç¼ºç‚¹å•Š</p>
<p>å°½ç®¡è¯­é›€æ–‡æ¡£ç¼–è¾‘åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯å®ƒçš„å‡ ä¸ªé¡µé¢è·³è½¬ä¹Ÿå¤ªéš¾ç”¨äº†å§ï¼Œä¸¾ä¸ªä¾‹å­ï¼šé¦–å…ˆè¿›å…¥è¯­é›€åˆ°<code>dashboard</code>é¡µé¢ï¼Œé¦–å…ˆç‚¹å‡»æŸä¸ªçŸ¥è¯†åº“ï¼Œè·³è¿›æ¥æ²¡é—®é¢˜ï¼Œä½†æ˜¯ï¼Œè·³è¿›æ¥å±•ç¤ºçš„ä¿¡æ¯ä¹Ÿå¤ªå°‘äº†å§ï¼Œåªæœ‰ä¸­é—´æ˜¾ç¤ºä¸€äº›æ–‡æ¡£ä¿¡æ¯ï¼Œæ›´å…³é”®çš„æ˜¯ï¼Œæˆ‘è¦å›åˆ°dashboardä¸èƒ½é€šè¿‡<code>username/çŸ¥è¯†åº“å</code>è¿™é‡Œè·³è½¬ï¼Œåªèƒ½é€šè¿‡<code>username</code>è·³åˆ°æˆ‘çš„ä¸»é¡µï¼Œå¦‚æœè¿™é‡Œæœ‰åˆ†çº§ç›®å½•å¤šå¥½å•Šï¼Œå·¦è¾¹æ˜¯dashboardèœå•ï¼Œæœ‰å·¥ä½œå°ã€æ”¶è—ã€ä¸ªäººçŸ¥è¯†åº“ç­‰ç­‰è·³è½¬å…¥å£ï¼ŒåŠ ä¸Šä¸€çº§ä¸ªçŸ¥è¯†åº“ç›®å½•ï¼Œä¸‰çº§ç›®å½•ç»“æ„ï¼Œè¿˜å¯ä»¥éšè—/æ˜¾ç¤ºï¼Œå¤šå¥½å•Šï¼å¯ï¼Œé‚£éƒ½æ˜¯å¹»æƒ³ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè·³è½¬èµ·æ¥ç®€ç›´è®©æˆ‘æŠ“ç‹‚ã€‚</p>
<p>è¿˜æœ‰ï¼Œæˆ‘çœŸæ˜¯ç”¨æƒ¯äº†<code>Typora</code>ï¼Œä¹ æƒ¯ç”¨<code>MarkDown</code>ç›´æ¥ç¼–è¾‘ï¼Œä¸å–œæ¬¢åœ¨çº¿ç¼–è¾‘<code>MarkDown</code>ç”¨ä¸Šå„ç§æŒ‰é’®çš„æ–¹å¼ï¼Œéš¾æã€‚</p>
<p>æ‰€ä»¥åªèƒ½å¯»æ±‚è§£å†³æ–¹æ¡ˆäº†ï¼Œé¦–å…ˆçœ‹åˆ°åœ¨è¯­é›€å®˜æ–¹çš„è¿›é˜¶ç©æ³•ä¸­æœ‰ç¬¬ä¸‰æ–¹å·¥å…·<a
href="https://www.yuque.com/yuque/tygt6i">https://www.yuque.com/yuque/tygt6i</a>é‡Œï¼Œå¯ä»¥æœ‰ä¸åŒè§£å†³æ–¹æ¡ˆï¼Œå°è¯•äº†å…¶ä¸­çš„<code>MarkEditor</code>åï¼Œåˆæ”¾å¼ƒäº†ï¼ŒåŸå› æ˜¯å®ƒä»…ä»…èƒ½è§£å†³ä¸Šé¢æåˆ°çš„æ²¡æœ‰ç›®å½•çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒçš„ç¼–è¾‘æ¨¡å¼å´ä¸æ˜¯é‚£ç§å®æ—¶ç›´æ¥é¢„è§ˆçš„æ–¹å¼ï¼Œæœ‰ç‚¹å¤´ç–¼ã€‚</p>
<p>çœŸå°±æ‰¾ä¸åˆ°ä¸€ä¸ªæˆ‘è®©æˆ‘æ»¡æ„çš„æ–¹æ¡ˆã€‚</p>
<p>å¦‚æœä½ æœ‰ä¸é”™çš„æ–¹æ¡ˆè¯·åŠ¡å¿…è”ç³»æˆ‘ï¼Œhhhhh</p>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<p>è®²ä¸€ä¸‹æˆ‘æ˜¯æ€ä¹ˆæ ·åˆ©ç”¨è¯­é›€çš„å§ã€‚</p>
<p>é¦–å…ˆæˆ‘ç°åœ¨ä»…ä»…æ˜¯ä¸ªäººä½¿ç”¨ï¼Œæ²¡æœ‰ç»„ç»‡æ²¡æœ‰åä½œã€‚æ‰€ä»¥æˆ‘ä¸»è¦æ˜¯ç”¨ä¸ªäººçŸ¥è¯†åº“ï¼Œç›®å‰ä¸»è¦4ä¸ªï¼Œå®ƒä»¬æ˜¯ä¸»çŸ¥è¯†åº“ï¼ˆç»å¤§å¤šæ•°æ—¶é—´éƒ½åœ¨ç”¨ç€ï¼‰ã€blogï¼ˆä¸ªäººåšå®¢ï¼Œè€ƒè™‘å¼€æ”¾ä¸€äº›å†…å®¹ï¼‰ã€imgï¼ˆç›®å‰æ„Ÿè§‰å¯ä»¥ä½œä¸ºå›¾åºŠï¼Œè™½ç„¶æˆ‘æœ‰å…¶ä»–æ–¹æ¡ˆï¼‰ã€resourceï¼ˆæ”¾ä¸€äº›å…±äº«èµ„æºï¼Œpdfä¹‹ç±»çš„èµ„æ–™ï¼‰ã€‚</p>
<p>è¯´ä¸€äº›æœ€å¼€å§‹çš„äº‹å§ï¼Œç°åœ¨æƒ³æƒ³æ˜¯çœŸè ¢å•Šã€‚åŸæœ¬åˆ›å»ºçš„æ˜¯5ä¸ªï¼Œå°±æ˜¯æŠŠä¸»çŸ¥è¯†åº“åˆ†ä¸º<code>mac</code>å’Œ<code>win</code>ï¼Œæ˜¾è€Œæ˜“è§ï¼Œåˆ†å¹³å°åŒºåˆ†å¼€ã€‚å¥½è ¢å•Šï¼Œå½“æ—¶æƒ³ç€è¿™æ ·æˆ‘çš„æ•°æ®ä¸å°±èƒ½åŒæ—¶èƒ½çœ‹åˆ°äº†ã€‚ç„¶è€Œè¿™æ ·åšä¸å°±å’Œæ²¡ä½¿ç”¨è¯­é›€ä¸€æ ·å—ï¼ŸåŒæ­¥äº†ä»€ä¹ˆå‘¢ï¼Ÿå¥½å‚»ï¼ç¼“è¿‡ç¥æ¥ï¼Œæ‰æŠŠå®ƒä»¬åˆå¹¶æ•´ç†äº†ä¸€ä¸‹ã€‚</p>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>ç›®å‰å·²ç»æ…¢æ…¢é€‚åº”è¯­é›€äº†ï¼Œæ˜¯æŒºå¥½ç”¨çš„ã€‚</p>
<p>ä½†ä¹Ÿå‘ç°äº†é—®é¢˜ï¼Œ<a
href="https://www.yuque.com/yuque/topics">https://www.yuque.com/yuque/topics</a>ï¼Œåœ¨è¯­é›€å®˜æ–¹ä¸­ä¹Ÿæœ‰ï¼Œå°±æ˜¯<strong>å¡é¡¿</strong>ï¼Œå¯ä»¥åœ¨å‰é¢é“¾æ¥ä¸­æœç´¢ã€‚</p>
<p>å°±æ˜¯æŸ¥çœ‹/ç¼–è¾‘å¤§æ–‡æ¡£æ—¶ï¼Œæ•´ä¸ªè¯­é›€å°±ä¼šå¡é¡¿ï¼Œå°±æ˜¯è¯´åªè¦ä½ æœ‰ä¸€ä¸ªé¡µé¢åœ¨æŸ¥çœ‹/ç¼–è¾‘å¤§æ–‡æ¡£ï¼Œä¸è¯­é›€æœ‰å…³çš„æ‰€æœ‰çš„éƒ½ä¼šå¡é¡¿ã€‚</p>
<p>å…¶ä¸­å®˜æ–¹äººå‘˜æœ‰å›ç­”å¯ä»¥è¯•è¯•å‡çº§æµè§ˆå™¨ç‰ˆæœ¬ï¼Œæˆ‘ä¹Ÿè¯•äº†è¯•ï¼Œä½¿ç”¨æœ€æ–°çš„<code>Edge</code>åï¼Œå¡é¡¿é—®é¢˜å¥½åƒå°±è§£å†³äº†ã€‚</p>
<p>æ‰€ä»¥æ¨èä½¿ç”¨æœ€æ–°ç‰ˆçš„æµè§ˆå™¨ï¼Œæœ‰å¯èƒ½åªæ˜¯é’ˆå¯¹<a
href="https://www.chromium.org/">Chromium</a>çš„æµè§ˆå™¨å“¦ã€‚</p>
<h1 id="å°ç»“">å°ç»“</h1>
<p>äº‘æ—¶ä»£ï¼Œæˆ‘ä»¬çœŸçš„å¯ä»¥æœ‰æ•ˆçš„åˆ©ç”¨ï¼Œæ¥æé«˜è‡ªå·±å·¥ä½œå­¦ä¹ çš„æ•ˆç‡ã€‚å¾ˆæœ‰å¸®åŠ©ï¼</p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac-Javaå¼€å‘ç¯å¢ƒ</title>
    <url>/article/661307ba.html</url>
    <content><![CDATA[<h1 id="ç³»ç»Ÿè®¾ç½®">ç³»ç»Ÿè®¾ç½®</h1>
<p>è¿™ä¸ªå®Œå…¨çœ‹ä¸ªäººä¹ æƒ¯ï¼Œä¸å¤šæäº†<br />å…³äºä½¿ç”¨æŠ€å·§ï¼Œè¿™ä¸ªç”¨çš„è¶Šå¤šè¶Šç†Ÿæ‚‰ï¼Œæ…¢æ…¢æ¥</p>
<table>
<thead>
<tr class="header">
<th>å¿«æ·é”®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>command</code>+<code>option</code>+<code>1</code></td>
<td>å›¾æ ‡è‡ªåŠ¨æ’åˆ—</td>
</tr>
<tr class="even">
<td><code>command</code>+<code>shift</code>+<code>.</code></td>
<td>æ˜¾ç¤º/ä¸æ˜¾ç¤ºéšè—æ–‡ä»¶</td>
</tr>
<tr class="odd">
<td><code>command</code>+<code>option</code>+<code>c</code></td>
<td>å¤åˆ¶æ–‡ä»¶è·¯å¾„</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<span id="more"></span>
<h1 id="homebrewgit">homebrew&amp;git</h1>
<p><a
href="https://zhuanlan.zhihu.com/p/111014448">Homebrewå›½å†…å¦‚ä½•è‡ªåŠ¨å®‰è£…ï¼ˆå›½å†…åœ°å€ï¼‰ï¼ˆMac
&amp; Linuxï¼‰</a></p>
<p>è¿™ä¸ªä¸ç”¨å¤šè¯´ï¼Œè£…å°±å¯¹äº†</p>
<p>æœ‰äº†homebrewï¼Œåœ¨macä¸Šå®‰è£…è½¯ä»¶å°±å˜çš„éå¸¸å®¹æ˜“äº†ï¼Œä¸ä»…æ˜¯<code>wget</code>ã€<code>curl</code>ã€<code>telnet</code>è¿™äº›ï¼Œè€Œä¸”è¿˜åŒ…æ‹¬ç™¾åº¦ç½‘ç›˜ã€è¿…é›·è¿™äº›ï¼Œæ¡Œé¢ç¨‹åºä¹Ÿæ˜¯å¯ä»¥çš„</p>
<p>è²Œä¼¼æŒ‰ç…§ä¸Šé¢çš„å®‰è£…æ–¹å¼ä¹Ÿä¼šåŒæ—¶å®‰è£…<code>git</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹gitç‰ˆæœ¬</span></span><br><span class="line">git -v</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹é…ç½® </span></span><br><span class="line">git config -l</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç³»ç»Ÿconfig</span></span><br><span class="line">git config --system --listã€€</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span></span><br><span class="line">git config --global  --list</span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®ç”¨æˆ·å</span></span><br><span class="line">git config --global user.name <span class="string">&quot;username&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®é‚®ç®±</span></span><br><span class="line">git config --global user.email <span class="string">&quot;xxx@xxx.com&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="jdk">JDK</h1>
<p><code>Mac</code>å®‰è£…<code>JDK</code>ï¼Œç›´æ¥æŒ‰ç…§å‚»ç“œå¼å®‰è£…å³å¯ï¼Œå®‰è£…å®Œæ¯•ä¼šå‘ç°<code>java -version</code>ï¼Œ<code>java</code>ï¼Œ<code>javac</code>éƒ½åœ¨äº†</p>
<h1 id="maven">Maven</h1>
<p><code>Maven</code>ä¸‹è½½<code>zip</code>æˆ–æ˜¯<code>tar.gz</code>å‹ç¼©åŒ…å³å¯ï¼Œä¸‹è½½åè§£å‹åˆ°ä¸€ä¸ªç›®å½•ï¼Œä¸‹é¢å¼€å§‹é…ç½®<code>Maven</code>ç¯å¢ƒå˜é‡<br /><code>vi ~/.bash_profile</code>åŠ ä¸Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export MAVEN_HOME=/xxx/apache-maven-3.6.3</span><br><span class="line">export PATH=$MAVEN_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>
<p><code>source ~/.bash_profile</code>ç”Ÿæ•ˆ</p>
<p><code>mvn -v</code>æ£€æŸ¥</p>
<p>é¡ºå¸¦ä¸€æï¼Œé…ç½®æ–‡ä»¶æ ¹æ®è‡ªå·±æƒ…å†µé…ç½®å³å¯ï¼Œé€šå¸¸æˆ‘ä¹ æƒ¯åˆ›å»ºä¸€ä¸ª<code>repository</code>æ–‡ä»¶å¤¹ç”¨äºæœ¬åœ°<code>maven</code>ä»“åº“</p>
<h1 id="iterm2">iTerm2</h1>
<p><a
href="https://www.jianshu.com/p/405956cdaca6">ITerm2é…ç½®-è®©ä½ çš„macå‘½ä»¤è¡Œæ›´åŠ ä¸°å¯Œé«˜æ•ˆ</a></p>
<p><a href="https://iterm2.com/">iTerm2 - macOS Terminal
Replacement</a></p>
<p><a
href="https://blog.csdn.net/qwe641259875/article/details/107201760">oh-my-zsh
å›½å†…å®‰è£…åŠé…ç½®_èœé¥¼åŒå­¦çš„åšå®¢-CSDNåšå®¢_ohmyzsh</a></p>
<h1 id="section">âœˆï¸</h1>
<p><a href="https://github.com/yichengchen/clashX">clashX</a></p>
<p><a
href="chrome-extension://padekgcemlokbadohgkifijomclgjgif/options.html#!/about">SwitchyOmega</a></p>
<p>è¿™ä¸ªä¸æ²¡æ€ä¹ˆç”¨è¿‡ï¼Œè¿™æ¬¡å…è´¹è¯•ç”¨äº†ä¸€ä¸‹ï¼Œå› ä¸ºæ¯•ç«Ÿæ˜¯ä»<code>win</code>è½¬è¿‡æ¥çš„ï¼Œå¯¹äº<code>Google</code>ã€<code>Github</code>è¦æ±‚è¿˜æ˜¯æŒºé«˜çš„ï¼Œæ¯•ç«Ÿè¦åŒæ­¥å’Œä¸‹è½½ä¸œè¥¿ï¼Œç”¨ä¸€ä¸‹å¾ˆæœ‰å¿…è¦</p>
<h1 id="nvmnodenpm">nvm&amp;node&amp;npm</h1>
<p><a
href="https://zhuanlan.zhihu.com/p/114364577">Macå·²åˆ°æ‰‹ï¼Ÿä»é›¶å¼€å§‹ï¼Œå…«æ­¥æ‰“é€ ä¸€ä¸ªé«˜æ•ˆèˆ’é€‚çš„å¼€å‘ç¯å¢ƒ</a></p>
<p><a
href="https://cloud.tencent.com/developer/article/1956818?from=article.detail.1913156">mac
ä¸Šä½¿ç”¨brewå®‰è£… nvm - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nvm list                 ##æ˜¯æŸ¥æ‰¾æœ¬ç”µè„‘ä¸Šæ‰€æœ‰çš„nodeç‰ˆæœ¬</span><br><span class="line">- nvm list     ##æŸ¥çœ‹å·²ç»å®‰è£…çš„ç‰ˆæœ¬</span><br><span class="line">- nvm list installed ##æŸ¥çœ‹å·²ç»å®‰è£…çš„ç‰ˆæœ¬</span><br><span class="line">- nvm list available ##æŸ¥çœ‹ç½‘ç»œå¯ä»¥å®‰è£…çš„ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">nvm install    ##å®‰è£…æŒ‡å®šç‰ˆæœ¬node</span><br><span class="line">nvm uninstall  ##å¸è½½åˆ¶å®šçš„ç‰ˆæœ¬</span><br><span class="line">nvm install stable             ## å®‰è£…æœ€æ–°ç¨³å®šç‰ˆ nodeï¼Œå½“å‰æ˜¯node v9.5.0 (npm v5.6.0)</span><br><span class="line">nvm install      ##å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œå¯æ¨¡ç³Šå®‰è£…ï¼Œå¦‚ï¼šå®‰è£…v4.4.0ï¼Œæ—¢å¯nvm install v4.4.0ï¼Œåˆå¯nvm install 4.4</span><br><span class="line"></span><br><span class="line">nvm use              ##åˆ‡æ¢ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬node</span><br><span class="line">nvm -v                                     ##æŸ¥çœ‹å½“å‰çš„ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">nvm ls                                     ## åˆ—å‡ºæ‰€æœ‰å®‰è£…çš„ç‰ˆæœ¬</span><br><span class="line">nvm ls-remote                     ## åˆ—å‡ºæ‰€æœ‰è¿œç¨‹æœåŠ¡å™¨çš„ç‰ˆæœ¬ï¼ˆå®˜æ–¹node version listï¼‰</span><br><span class="line">nvm current                          ## æ˜¾ç¤ºå½“å‰çš„ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">nvm alias       ## ç»™ä¸åŒçš„ç‰ˆæœ¬å·æ·»åŠ åˆ«å</span><br><span class="line">nvm unalias                      ## åˆ é™¤å·²å®šä¹‰çš„åˆ«å</span><br><span class="line"></span><br><span class="line">nvm reinstall-packages      ## åœ¨å½“å‰ç‰ˆæœ¬ node ç¯å¢ƒä¸‹ï¼Œé‡æ–°å…¨å±€å®‰è£…æŒ‡å®šç‰ˆæœ¬å·çš„ npm åŒ…</span><br><span class="line"></span><br><span class="line">nvm on                         ##æ‰“å¼€nodejsæ§åˆ¶</span><br><span class="line">nvm off                     ##å…³é—­nodejsæ§åˆ¶</span><br><span class="line">nvm proxy                 ##æŸ¥çœ‹è®¾ç½®ä¸ä»£ç†</span><br><span class="line">nvm node_mirror [url] ##è®¾ç½®æˆ–è€…æŸ¥çœ‹setting.txtä¸­çš„node_mirrorï¼Œå¦‚æœä¸è®¾ç½®çš„é»˜è®¤æ˜¯ https://nodejs.org/dist/</span><br><span class="line">nvm npm_mirror [url]  ##è®¾ç½®æˆ–è€…æŸ¥çœ‹setting.txtä¸­çš„npm_mirror,å¦‚æœä¸è®¾ç½®çš„è¯é»˜è®¤çš„æ˜¯ï¼š https://github.com/npm/npm/archive/.</span><br><span class="line"></span><br><span class="line">nvm use [version] [arch] ##åˆ‡æ¢åˆ¶å®šçš„nodeç‰ˆæœ¬å’Œä½æ•°</span><br><span class="line">nvm root [path]          ##è®¾ç½®å’ŒæŸ¥çœ‹rootè·¯å¾„</span><br></pre></td></tr></table></figure>
<h1 id="è½¯ä»¶">è½¯ä»¶</h1>
<p>åŸæœ¬æ˜¯æœ‰<a
href="http://macwk.com/">http://macwk.com/</a>çš„ï¼Œä½†å·²ç»å…³ç«™äº†ï¼Œå¾ˆé—æ†¾ï¼Œåªèƒ½é€‰æ‹©å…¶ä»–çš„è½¯ä»¶ç½‘ç«™äº†ï¼Œå¯¹äºéœ€è¦ç ´è§£çš„è½¯ä»¶ï¼Œæˆ‘æ˜¯å»ºè®®å¯ä»¥åœ¨è¿™é‡Œæ‰¾çš„ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œå¦‚æœæœ‰èƒ½åŠ›è¯·æ”¯æŒæ­£ç‰ˆ</p>
<p><a
href="https://www.hereitis.cn/">hereitis,åœ¨è¿™é‡Œèµ„æºç«™,å…è´¹è½¯ä»¶ä¸‹è½½,PPTã€å›¾ç‰‡ç´ æä¸‹è½½,ç²¾å“å°å·¥å…·å°æ’ä»¶</a></p>
<p><a href="https://en.softonic.com/">App news and reviews, best
software downloads and discovery - Softonic</a></p>
<h2 id="idea">Idea</h2>
<p>é€šè¿‡<a
href="https://www.jetbrains.com/zh-cn/idea/">å®˜ç½‘</a>ä¸‹è½½å³å¯ï¼Œæƒ³è¦æœ€ç»ˆç‰ˆå°±è‡ªå·±æƒ³åŠæ³•å§</p>
<h2 id="vscode">VSCode</h2>
<p><a
href="https://code.visualstudio.com/">å®˜ç½‘</a>å®‰è£…å³å¯ï¼Œå¯ä»¥ç™»å½•å¾®è½¯è´¦å·åŒæ­¥è®¾ç½®å’Œæ’ä»¶ï¼Œéå¸¸æ–¹ä¾¿</p>
<h2 id="navicat-premium">Navicat Premium</h2>
<p>ä¸€ç›´ä½¿ç”¨çš„éƒ½æ˜¯è¿™ä¸ªï¼Œå¥½ç”¨ä¸”å¥½ç”¨<br /><a
href="https://www.hereitis.cn/">https://www.hereitis.cn/</a><br />è¿™ä¸ªåªèƒ½é€šè¿‡ç ´è§£æ¥å®‰è£…ä½¿ç”¨ï¼Œå‚è€ƒä¸Šé¢ç½‘ç«™å®‰è£…å³å¯ï¼ŒæœŸé—´é‡åˆ°é—®é¢˜ä¹Ÿæœ‰æ–‡æ¡£å¯è§£ç­”</p>
<h2 id="another-redis-desktop-manager">Another Redis Desktop
Manager</h2>
<p><a
href="https://www.hereitis.cn/">https://www.hereitis.cn/</a><br />åŒä¸Šï¼Œå‚è€ƒä¸Šé¢ç½‘ç«™å®‰è£…å³å¯ï¼ŒæœŸé—´é‡åˆ°é—®é¢˜ä¹Ÿæœ‰æ–‡æ¡£å¯è§£ç­”</p>
<h2 id="postman">Postman</h2>
<p><a href="https://www.postman.com/">å®˜ç½‘</a>å®‰è£…å³å¯</p>
<h2 id="docker">Docker</h2>
<p><a href="https://yeasy.gitbook.io/docker_practice/install/mac">macOS
- Docker â€” ä»å…¥é—¨åˆ°å®è·µ</a></p>
<p>å‚è€ƒè¿™é‡Œçš„å®‰è£…å’Œé•œåƒé…ç½®å³å¯</p>
<h2 id="å…¶ä»–">å…¶ä»–</h2>
<p>è¿™ä¸ªçº¯ä¸ªäººä½¿ç”¨è€Œå®š<br />å¾®ä¿¡ï¼ŒQQï¼ˆæ‰å‘ç°æ²¡æœ‰Macç‰ˆTimï¼‰ï¼Œé’‰é’‰ï¼Œè…¾è®¯ä¼šè®®ï¼Œé˜¿é‡Œäº‘ç›˜ï¼Œç™¾åº¦ç½‘ç›˜ã€ç½‘æ˜“äº‘éŸ³ä¹ï¼Œè¯­é›€ï¼ŒChromeã€Edgeã€WPSï¼ŒDNMï¼Œè…¾è®¯æŸ æª¬</p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Macåšå¼€å‘</title>
    <url>/article/30c6026a.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>å¼€å§‹å®ä¹ äº†ï¼Œå…¬å¸é…çš„ç”µè„‘æ˜¯Macï¼Œå¯¹äºMacæˆ‘åªæœ‰åœ¨ä¸Šå­¦æœŸé€‰çš„ä¸€ä¸ªâ€œiosè®°äº‹æœ¬â€çš„åˆ›æ–°å®è·µè¯¾ç¨‹ä¸­ä½“ä¼šè¿‡ï¼Œä½†å­¦æ ¡é‚£ä¸ªç”µè„‘å®åœ¨æ˜¯ä¸å¤ªè¡Œï¼Œæ•´ä½“ä½“éªŒä¹Ÿå¾ˆå·®ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯å¾ˆæœŸå¾…ä½¿ç”¨Macåšå¼€å‘çš„ï¼Œæ¯•ç«Ÿå…³äºMacçš„ç”Ÿäº§èƒ½åŠ›è¿˜æ˜¯ä¸å®¹ç½®ç–‘çš„ã€‚ç”šè‡³æƒ³ç€æ‹¥æœ‰ä¸€å°å±äºè‡ªå·±çš„Macç”µè„‘ã€‚</p>
<span id="more"></span>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>Macåšå¼€å‘æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆå¯¹äºç”¨æƒ¯äº†Windowsçš„ç”¨æˆ·ï¼Œè¿˜æ˜¯éœ€è¦ä¸€äº›é€‚åº”æ—¶é—´çš„ï¼Œæ¯•ç«Ÿæ˜¯ä¸¤ä¸ªç³»ç»Ÿï¼Œå·®åˆ«è¿˜æ˜¯å¾ˆå¤§çš„ã€‚</p>
<p>å…ˆè®²ä¸€è®²æˆ‘çš„ä½“ä¼šå§ï¼ŒMacçš„è§¦æ§æ¿çœŸæ˜¯å¥½ç”¨ï¼Œå¤ªèˆ’æœäº†ï¼Œè™½ç„¶çœ‹è¿‡å¥½å¤šå¹Macè§¦æ§æ¿çš„ï¼Œä½†æ¯•ç«Ÿä¹Ÿæ²¡æœ‰çœŸå®ä½“ä¼šå˜›ã€‚è¿™ä¸‹çœŸçš„æ˜¯æœäº†ï¼Œæœç„¶å¥½ç”¨ï¼Œç¬¬ä¸€æ„Ÿè§‰ç©ç”µè„‘å¤±å»é¼ æ ‡ï¼Œä½“éªŒä¾æ—§å¾ˆæ£’ã€‚æ¥ä¸‹æ¥è¯´ä¸€ä¸‹Macçš„åšå·¥å§ï¼Œå¾ˆç²¾è‡´ï¼Œå±å¹•ç´ è´¨å¾ˆå¥½ï¼Œå¾ˆå°åªæœ‰13å¯¸ä½†æ˜¯å¾ˆç²¾æ‚ï¼ŒåŠ ä¸ŠM1èŠ¯ç‰‡çš„æ”¯æŒï¼Œé€Ÿåº¦æ²¡çš„è¯´ã€‚åœ¨è£…å¸è½¯ä»¶æ–¹é¢ï¼Œä¸Windowså·®åˆ«æ›´å¤§äº†ï¼Œåœ¨Macä¸Šè£…è½¯ä»¶æ²¡æœ‰é‚£ä¹ˆå¤šå¤æ‚çš„é€‰é¡¹ï¼Œå¾ˆç®€æ´è½»æ¾ï¼Œä¸ç”¨ä¸è½¯ä»¶å•†æ–—æ™ºæ–—å‹‡äº†ã€‚</p>
<p>ä¸‹é¢è¯´ä¸€ä¸‹æˆ‘ç°åœ¨åœ¨ç”¨çš„è½¯ä»¶å§ã€‚</p>
<ul>
<li>Chrome</li>
<li>HomeBrewï¼Œmacä¸“å±è£…è½¯ä»¶ç¯å¢ƒå·¥å…·</li>
<li>JDKï¼Œä¸ç”¨å¤šè¯´</li>
<li>Gitï¼Œåä½œå¼€å‘</li>
<li>Mavenï¼Œæ„å»ºJavaé¡¹ç›®</li>
<li>IDEAï¼ŒJavaIDE</li>
<li>Navicat Premiumï¼Œæ•°æ®åº“å¯è§†åŒ–å·¥å…·</li>
<li>Postmanï¼ŒAPIè°ƒè¯•ã€Httpè¯·æ±‚çš„å·¥å…·</li>
<li>JMeterï¼Œå‹æµ‹å·¥å…·</li>
<li>RDMï¼ŒRediså¯è§†åŒ–å·¥å…·</li>
<li>VSCodeï¼Œå¼ºå¤§ç¼–è¾‘å™¨</li>
<li>NDMï¼Œä¸‹è½½å™¨é…åˆChromeæ’ä»¶ä½¿ç”¨</li>
<li>Dockerï¼Œè™šæ‹Ÿå®¹å™¨</li>
<li>Dashï¼ŒæŸ¥æ–‡æ¡£åŠ©æ‰‹</li>
<li>iTermï¼Œå¾ˆå¥½ç”¨çš„ç»ˆç«¯</li>
</ul>
<h1 id="æœ€å">æœ€å</h1>
<p>Macä½¿ç”¨ä¸‹æ¥è¿˜æ˜¯å¾ˆæ£’çš„ï¼Œå°¤å…¶æ˜¯èƒ½æ„Ÿå—åˆ°M1èŠ¯ç‰‡çš„å¼ºå¤§ï¼Œè¿™é‡Œè¦æ³¨æ„äº†ï¼Œä¸‹è½½è½¯ä»¶æ—¶è¦åŒºåˆ†æ˜¯å¦é€‚é…M1èŠ¯ç‰‡ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ”¯æŒarmæ¶æ„ï¼Œä¸ç„¶å¾ˆå¯èƒ½å‡ºé—®é¢˜ï¼Œæˆ–æ˜¯æ— æ³•å‘æŒ¥M1çš„ä¼˜åŠ¿ã€‚</p>
<p>M1å·²ç»å‘å¸ƒä¸€å¹´å¤šäº†ï¼Œä»Šå¹´æ–°çš„M1Proã€M1Maxéƒ½åœ¨M1çš„åŸºç¡€ä¸Šï¼Œå˜å¾—æ›´å¼ºå¤§äº†ï¼Œè¢«ç”¨åœ¨äº†æ–°ä¸€ä»£çš„Macæœºå™¨ä¸Šäº†ï¼Œæ‰€ç”¨è¿‡çš„äººéƒ½ä½“ä¼šåˆ°äº†M1ç³»åˆ—èŠ¯ç‰‡æ˜¯æœ‰å¤šä¹ˆå¼ºå¤§äº†ã€‚ä»è‹¹æœå¼€å§‹å‘iPadæ¨å¹¿M1èŠ¯ç‰‡ï¼Œå¯ä»¥çœ‹å‡ºè‹¹æœçœŸçš„æƒ³è¦å°†è‡ªå·±çš„èŠ¯ç‰‡åšçš„æ›´é•¿è¿œçš„æƒ³æ³•ï¼Œä¸ç¦æ„Ÿå¹ï¼šè‹¹æœçœŸçš„æ˜¯è½¯ç¡¬ä»¶éƒ½éå¸¸å¼ºå¤§çš„å…¬å¸ã€‚è·‘è¿œäº†ï¼Œæˆ‘æƒ³è¯´å…¶å®æ˜¯ï¼Œåœ¨M1èŠ¯ç‰‡æ¨å‡ºåï¼Œå‡ ä¹æ‰€æœ‰å‚å•†éƒ½åœ¨ä¸ºé€‚é…åŸºäºarmæ¶æ„çš„M1åŠªåŠ›ï¼Œå¯è§è‹¹æœçš„å·å¬åŠ›å’Œå½±å“åŠ›å•Šï¼ä¸è¿‡ç°åœ¨è¿˜æ˜¯æœ‰ä¸€äº›æ¬ ç¼ºçš„è½¯ä»¶å¾…å®Œå–„ã€‚</p>
<p>æœ€åä¸€å¥è¯ï¼šMacå¼ºå¤§ç”Ÿäº§åŠ›å·¥å…·ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavenä¸Npmä½¿ç”¨é•œåƒ</title>
    <url>/article/f5984dab.html</url>
    <content><![CDATA[<p>ä½¿ç”¨mavenå’Œnpmä»è¿œç¨‹ä»“åº“ä¸‹æ–‡ä»¶å¸¸å¸¸å‡ºç°é€Ÿåº¦ææ…¢çš„é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œé•œåƒè§£å†³é—®é¢˜ï¼</p>
<span id="more"></span>
<h1 id="é…ç½®maven">é…ç½®maven</h1>
<p>æ‰“å¼€ Maven
çš„é…ç½®æ–‡ä»¶(windowsæœºå™¨ä¸€èˆ¬åœ¨mavenå®‰è£…ç›®å½•çš„conf/settings.xml)ï¼Œåœ¨
<mirrors></mirrors> æ ‡ç­¾ä¸­æ·»åŠ  mirror å­èŠ‚ç‚¹:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="https://developer.aliyun.com/mirror/maven">è¯¦ç»†è¯·çœ‹</a></p>
<h1 id="é…ç½®npm">é…ç½®npm</h1>
<p>ç”¨setå‘½ä»¤æ¢æˆé˜¿é‡Œçš„é•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<p><a href="https://developer.aliyun.com/mirror/npm">è¯¦ç»†è¯·çœ‹</a></p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Maven</tag>
        <tag>Node&amp;NPM</tag>
      </tags>
  </entry>
  <entry>
    <title>MurmurHashç®—æ³•åˆæ¢</title>
    <url>/article/3df251b7.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ç®€å•è®¨è®ºä¸€ä¸‹<code>MurmurHash</code>ç®—æ³•ï¼Œä¹‹åä¼šä¾æ­¤åšä¸€ä¸ªç®€æ˜“çš„çŸ­é“¾æ¥é¡¹ç›®ï¼Œå°½é‡å¿«äº›åšå‡ºæ¥ï¼Œåˆ†äº«å‡ºæ¥ğŸ˜</p>
<p>æ—¢ç„¶æ˜¯åˆæ¢ï¼Œæˆ‘åªä¼šå»è¯´æ€ä¹ˆä½¿ç”¨ï¼Œè‡³äºåŸç†ï¼Œå°±ç•™åˆ°æœ‰æœºä¼šï¼ˆ<code>doge</code>ï¼‰å†æ¥æ¢ç©¶å§ğŸ˜‚</p>
<p>åœ¨ä¸€å‘¨å‰æˆ‘å¯¹è¿™ä¸ªç®—æ³•ä¹Ÿæ˜¯é—»æ‰€æœªé—»ï¼Œè‡³åˆ°æˆ‘çœ‹äº†è¿™ç¯‡<a
href="https://mp.weixin.qq.com/s/YTrBaERcyjvw7A0Fg2Iegw">é«˜æ€§èƒ½çŸ­é“¾è®¾è®¡</a>æ–‡ç« ï¼Œæ‰æœ‰æ‰€äº†è§£ã€‚</p>
<p>å…³äº<code>MurmurHash</code>ç®—æ³•ï¼Œå¯å‚è€ƒ<a
href="https://blog.csdn.net/thinkmo/article/details/26833565">Murmurhashä»‹ç»ä¸å®ç°</a></p>
<span id="more"></span>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<p>ä»ä¸Šé¢æ–‡ç« çŸ¥é“ï¼Œ<code>MurmurHash</code>æ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„åŠ å¯†å‹å“ˆå¸Œç®—æ³•ï¼Œéšæœºç‰¹å¾è¡¨ç°çš„éå¸¸å¥½ï¼Œåº”ç”¨é¢†åŸŸä¹Ÿå¾ˆå¤šï¼Œå…·æœ‰è¾ƒé«˜çš„å¹³è¡¡æ€§å’Œä½ç¢°æ’ç‡ã€‚</p>
<p>å®ƒå®ç°äº†<code>32</code>ä½å’Œ<code>128</code>ä½<code>HashKey</code>åŠ å¯†ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨<code>Google</code>æä¾›çš„<code>guava</code>ã€‚</p>
<p><strong>pomä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>30.1-jre<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨å¦‚ä¸‹</strong></p>
<p>åˆ›å»º<code>HashFunction</code>å¯¹è±¡ï¼ŒåŠ å¯†å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">HashFunction</span> <span class="variable">hashFunction</span> <span class="operator">=</span> Hashing.murmur3_32();</span><br><span class="line">    <span class="type">HashCode</span> <span class="variable">hashCode</span> <span class="operator">=</span> hashFunction.hashString(<span class="string">&quot;https://wnhyang.github.io/&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    System.out.println(hashCode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœå¦‚ä¸‹</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">a453dd36</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸ç¦æœ‰ç–‘é—®äº†ï¼Ÿ</p>
<p><code>a453dd36</code>æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œç¬¬ä¸€ååº”ä¾¿æ˜¯<code>16</code>è¿›åˆ¶æ•°ï¼Œæ­£å¥½<span
class="math inline">\(4*8=32\)</span>ä½ï¼Œå¾ˆå®Œç¾</p>
<p>æ‰¾åˆ°<code>HashCode</code>æ¥å£ï¼Œçœ‹åˆ°ä¸‹é¢å‡ ä¸ªæ–¹æ³•ï¼Œéƒ½èƒ½çœ‹æ‡‚å§ï¼ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Beta</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">HashCode</span> &#123;</span><br><span class="line">  HashCode() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Returns the number of bits in this hash code; a positive multiple of 8. */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">bits</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Returns the first four bytes of &#123;<span class="doctag">@linkplain</span> #asBytes() this hashcode&#x27;s bytes&#125;, converted to an</span></span><br><span class="line"><span class="comment">   * &#123;<span class="doctag">@code</span> int&#125; value in little-endian order.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IllegalStateException if &#123;<span class="doctag">@code</span> bits() &lt; 32&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">asInt</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Returns the first eight bytes of &#123;<span class="doctag">@linkplain</span> #asBytes() this hashcode&#x27;s bytes&#125;, converted to a</span></span><br><span class="line"><span class="comment">   * &#123;<span class="doctag">@code</span> long&#125; value in little-endian order.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IllegalStateException if &#123;<span class="doctag">@code</span> bits() &lt; 64&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">long</span> <span class="title function_">asLong</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * If this hashcode has enough bits, returns &#123;<span class="doctag">@code</span> asLong()&#125;, otherwise returns a &#123;<span class="doctag">@code</span> long&#125;</span></span><br><span class="line"><span class="comment">   * value with &#123;<span class="doctag">@code</span> asBytes()&#125; as the least-significant bytes and &#123;<span class="doctag">@code</span> 0x00&#125; as the remaining</span></span><br><span class="line"><span class="comment">   * most-significant bytes.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@since</span> 14.0 (since 11.0 as &#123;<span class="doctag">@code</span> Hashing.padToLong(HashCode)&#125;)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">long</span> <span class="title function_">padToLong</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Returns the value of this hash code as a byte array. The caller may modify the byte array;</span></span><br><span class="line"><span class="comment">   * changes to it will &lt;i&gt;not&lt;/i&gt; be reflected in this &#123;<span class="doctag">@code</span> HashCode&#125; object or any other arrays</span></span><br><span class="line"><span class="comment">   * returned by this method.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="comment">// TODO(user): consider ByteString here, when that is available</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">byte</span>[] asBytes();</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åŠ ä¸Šè¿™äº›æ–¹æ³•ï¼Œé‡æ–°æ¥</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">HashFunction</span> <span class="variable">hashFunction</span> <span class="operator">=</span> Hashing.murmur3_32();</span><br><span class="line">    <span class="type">HashCode</span> <span class="variable">hashCode</span> <span class="operator">=</span> hashFunction.hashString(<span class="string">&quot;https://wnhyang.github.io/&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    System.out.print(hashCode.asInt() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.print(hashCode.padToLong() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.print(hashCode.asBytes() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.print(hashCode.bits() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.println(hashCode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–°ç»“æœå°±å¾ˆèˆ’æœäº†ï¼Œ<span
class="math inline">\(2^{32}=4,294,967,296\)</span>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>32</code>ä½çš„<code>MurmurHash</code>ç®—æ³•æœ€å¤šå¯ä»¥æœ‰è¿‘<code>43</code>äº¿ï¼ŒæŒ‰ä¸Šé¢çŸ­é“¾æ¥çš„æ–¹æ³•è½¬ä¸º<code>62</code>è¿›åˆ¶ï¼Œ<code>6</code>ä½è¶³çŸ£ï¼Œ<span
class="math inline">\(62^{6}=56,800,235,584\)</span>ï¼Œæœ‰<code>568</code>äº¿å‘¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">920474532    920474532    [B@76ed5528    32    a453dd36</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure>
<p>å¯æ˜¯ï¼Œä¹‹åæµ‹è¯•äº†åŒæ ·çš„ä»£ç ï¼Œåªæ˜¯æŠŠè¦åŠ å¯†çš„<code>url</code>å˜ä¸º<code>https://blog.csdn.net/freda1997/article/details/105199265</code>ä¾¿å‡ºç°é—®é¢˜äº†ã€‚</p>
<p><strong>æ„æ–™ä¹‹å¤–çš„ç»“æœ</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-503738096    3791229200    [B@76ed5528    32    1091f9e1</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢<code>HashCode</code>æ¥å£çš„æ–¹æ³•å¯çŸ¥<code>asInt()</code>å’Œ<code>padToLong()</code>åŒºåˆ«å°±åœ¨è¿™ï¼Œä»<code>Java</code>åŸºç¡€æˆ–è€…è¯´æ˜¯è®¡ç®—æœºåŸºç¡€å¯çŸ¥æ•°æœ‰æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¸€è¯´ã€‚æœ‰ç¬¦å·æ•°ç¬¬ä¸€ä½è¡¨ç¤ºç¬¦å·èŒƒå›´ä¸º[<span
class="math inline">\(-2^{n-1}\)</span>,<span
class="math inline">\(2^{n-1}-1\)</span>]ï¼Œæ— ç¬¦å·æ•°åˆ™æ²¡æœ‰é¦–ä½çš„é™åˆ¶ã€‚æ‰€ä»¥èƒ½å®¹æ˜“æƒ³åˆ°æ˜¯<code>int</code>æ•°å€¼æº¢å‡ºäº†ã€‚</p>
<p><strong>æµ‹è¯•éªŒè¯</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">HashFunction</span> <span class="variable">hashFunction</span> <span class="operator">=</span> Hashing.murmur3_32();</span><br><span class="line">    <span class="type">HashCode</span> <span class="variable">hashCode</span> <span class="operator">=</span> hashFunction.hashString(<span class="string">&quot;https://blog.csdn.net/freda1997/article/details/105199265&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    System.out.print(hashCode.asInt() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.print(hashCode.padToLong() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.print(hashCode.asBytes() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.print(hashCode.bits() + <span class="string">&quot;    &quot;</span>);</span><br><span class="line">    System.out.println(hashCode);</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">d</span> <span class="operator">=</span> (<span class="type">int</span>) hashCode.padToLong();</span><br><span class="line">    System.out.println(d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœç„¶</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-503738096    3791229200    [B@76ed5528    32    1091f9e1</span><br><span class="line">-503738096</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å°±å±•ç¤ºäº†æ€ä¹ˆä½¿ç”¨<code>MurmurHash</code>ç®—æ³•ï¼Œä¹‹åå°±å¯ç€æ‰‹å¼€å§‹çŸ­é“¾æ¥é¡¹ç›®äº†ã€‚ğŸ˜</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisï¼ˆä¸‰ï¼‰</title>
    <url>/article/450ea905.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/3806e68f.html">MyBatis(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/8100a57.html">MyBatis(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/450ea905.html">MyBatis(ä¸‰)ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NE411Q7Nx">https://www.bilibili.com/video/BV1NE411Q7Nx</a></p>
<p><a
href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p>
<span id="more"></span>
<h1 id="åŠ¨æ€-sql">åŠ¨æ€ SQL</h1>
<p>åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC
æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL
è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€
SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</p>
<p>ä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†å€ŸåŠ©å¯ç”¨äºä»»ä½• SQL
æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€ï¼ŒMyBatis
æ˜¾è‘—åœ°æå‡äº†è¿™ä¸€ç‰¹æ€§çš„æ˜“ç”¨æ€§ã€‚</p>
<p>å¦‚æœä½ ä¹‹å‰ç”¨è¿‡ JSTL æˆ–ä»»ä½•åŸºäºç±» XML è¯­è¨€çš„æ–‡æœ¬å¤„ç†å™¨ï¼Œä½ å¯¹åŠ¨æ€ SQL
å…ƒç´ å¯èƒ½ä¼šæ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ã€‚åœ¨ MyBatis
ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦èŠ±æ—¶é—´äº†è§£å¤§é‡çš„å…ƒç´ ã€‚å€ŸåŠ©åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL
çš„è¡¨è¾¾å¼ï¼ŒMyBatis 3
æ›¿æ¢äº†ä¹‹å‰çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼Œå¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨è¦å­¦ä¹ çš„å…ƒç´ ç§ç±»æ¯”åŸæ¥çš„ä¸€åŠè¿˜è¦å°‘ã€‚</p>
<ul>
<li>if</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
</ul>
<h2 id="æ•°æ®åº“å‡†å¤‡">æ•°æ®åº“å‡†å¤‡</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `blog`(</span><br><span class="line">`id` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢id&#x27;</span>,</span><br><span class="line">`title` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢æ ‡é¢˜&#x27;</span>,</span><br><span class="line">`author` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢ä½œè€…&#x27;</span>,</span><br><span class="line">`create_time` DATETIME <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">`views` <span class="type">INT</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æµè§ˆé‡&#x27;</span></span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>
<p><strong>å®ä½“ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Blog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> views;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ¥å£å’Œå¯¹åº”çš„ Mapper.xml</strong></p>
<p>ã€‚ã€‚ã€‚</p>
<p><strong>mybatis é…ç½®ç•¥</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// true : è‡ªåŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>mapUnderscoreToCamelCaseï¼šé©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„</p>
<h2 id="if">If</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;QueryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog where 1=1</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">        and title=#&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">        and author=#&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryBlogIf</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;è€æ¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Blog&gt; blogs = mapper.QueryBlogIf(map);</span><br><span class="line">    <span class="keyword">for</span> (Blog blog : blogs) &#123;</span><br><span class="line">        System.out.println(blog);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="choosewhenotherwise">chooseã€whenã€otherwise</h2>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis
æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p>
<h2 id="trimwhereset">trimã€whereã€set</h2>
<p><strong>where</strong></p>
<p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€
å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em>
å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;QueryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">                title=#&#123;title&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">                and author=#&#123;author&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                and views &gt;#&#123;view&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryBlogChoose</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// map.put(&quot;title&quot;,&quot;Java&quot;);</span></span><br><span class="line">    map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;è€æ¨&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;view&quot;</span>,<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Blog&gt; blogs = mapper.QueryBlogChoose(map);</span><br><span class="line">    <span class="keyword">for</span> (Blog blog : blogs) &#123;</span><br><span class="line">        System.out.println(blog);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>set</strong></p>
<p><em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET
å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    update blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">            title=#&#123;title&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">            author=#&#123;author&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBlog</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;c3e4fcff19c64a4b8503883b4b999091&quot;</span>);</span><br><span class="line">    <span class="comment">// map.put(&quot;title&quot;,&quot;C&quot;);</span></span><br><span class="line">    map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;å°æ¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">    mapper.updateBlog(map);</span><br><span class="line">	sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>trim</strong></p>
<p><a
href="https://blog.csdn.net/wt_better/article/details/80992014">å‚è€ƒ</a></p>
<p><strong>sqlç‰‡æ®µ</strong></p>
<p>æŠ½å–å…¬å…±éƒ¨åˆ†ï¼Œæ–¹ä¾¿å¤ç”¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">        and title=#&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">        and author=#&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;QueryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog where 1=1</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="foreach">foreach</h2>
<p><em>foreach</em>
å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå…ƒç´ ä¹Ÿä¸ä¼šé”™è¯¯åœ°æ·»åŠ å¤šä½™çš„åˆ†éš”ç¬¦ï¼Œçœ‹å®ƒå¤šæ™ºèƒ½ï¼</p>
<p><strong>å®˜æ–¹ç¤ºä¾‹</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPostIn&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;domain.blog.Post&quot;</span>&gt;</span></span><br><span class="line">  SELECT *</span><br><span class="line">  FROM POST P</span><br><span class="line">  WHERE ID in</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;item&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>è‡ªå·±æ¥</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>open å¼€å§‹ç¬¦ï¼Œclose ç»“æŸç¬¦ï¼Œseparator åˆ†éš”ç¬¦</p>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryBlogForeach</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    List&lt;Integer&gt; ids=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// ids.add(1);</span></span><br><span class="line">    <span class="comment">// ids.add(2);</span></span><br><span class="line">    map.put(<span class="string">&quot;ids&quot;</span>,ids);</span><br><span class="line"></span><br><span class="line">    List&lt;Blog&gt; blogs = mapper.queryBlogForeach(map);</span><br><span class="line">    <span class="keyword">for</span> (Blog blog : blogs) &#123;</span><br><span class="line">        System.out.println(blog);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç¼“å­˜">ç¼“å­˜</h1>
<p>MyBatis
å†…ç½®äº†ä¸€ä¸ªå¼ºå¤§çš„äº‹åŠ¡æ€§æŸ¥è¯¢ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é…ç½®å’Œå®šåˆ¶ã€‚
ä¸ºäº†ä½¿å®ƒæ›´åŠ å¼ºå¤§è€Œä¸”æ˜“äºé…ç½®ï¼Œæˆ‘ä»¬å¯¹ MyBatis 3
ä¸­çš„ç¼“å­˜å®ç°è¿›è¡Œäº†è®¸å¤šæ”¹è¿›ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯ç”¨äº†æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ï¼Œå®ƒä»…ä»…å¯¹ä¸€ä¸ªä¼šè¯ä¸­çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚</p>
<p>åŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·ã€‚è¿™ä¸ªç®€å•è¯­å¥çš„æ•ˆæœå¦‚ä¸‹:</p>
<ul>
<li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ select è¯­å¥çš„ç»“æœå°†ä¼šè¢«ç¼“å­˜ã€‚</li>
<li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ insertã€update å’Œ delete è¯­å¥ä¼šåˆ·æ–°ç¼“å­˜ã€‚</li>
<li>ç¼“å­˜ä¼šä½¿ç”¨æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLRU, Least Recently
Usedï¼‰ç®—æ³•æ¥æ¸…é™¤ä¸éœ€è¦çš„ç¼“å­˜ã€‚</li>
<li>ç¼“å­˜ä¸ä¼šå®šæ—¶è¿›è¡Œåˆ·æ–°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰åˆ·æ–°é—´éš”ï¼‰ã€‚</li>
<li>ç¼“å­˜ä¼šä¿å­˜åˆ—è¡¨æˆ–å¯¹è±¡ï¼ˆæ— è®ºæŸ¥è¯¢æ–¹æ³•è¿”å›å“ªç§ï¼‰çš„ 1024 ä¸ªå¼•ç”¨ã€‚</li>
<li>ç¼“å­˜ä¼šè¢«è§†ä¸ºè¯»/å†™ç¼“å­˜ï¼Œè¿™æ„å‘³ç€è·å–åˆ°çš„å¯¹è±¡å¹¶ä¸æ˜¯å…±äº«çš„ï¼Œå¯ä»¥å®‰å…¨åœ°è¢«è°ƒç”¨è€…ä¿®æ”¹ï¼Œè€Œä¸å¹²æ‰°å…¶ä»–è°ƒç”¨è€…æˆ–çº¿ç¨‹æ‰€åšçš„æ½œåœ¨ä¿®æ”¹ã€‚</li>
</ul>
<p><strong>æç¤º</strong> ç¼“å­˜åªä½œç”¨äº cache
æ ‡ç­¾æ‰€åœ¨çš„æ˜ å°„æ–‡ä»¶ä¸­çš„è¯­å¥ã€‚å¦‚æœä½ æ··åˆä½¿ç”¨ Java API å’Œ XML
æ˜ å°„æ–‡ä»¶ï¼Œåœ¨å…±ç”¨æ¥å£ä¸­çš„è¯­å¥å°†ä¸ä¼šè¢«é»˜è®¤ç¼“å­˜ã€‚ä½ éœ€è¦ä½¿ç”¨ <span
class="citation"
data-cites="CacheNamespaceRef">@CacheNamespaceRef</span>
æ³¨è§£æŒ‡å®šç¼“å­˜ä½œç”¨åŸŸã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryBlogById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">Blog</span> <span class="variable">blog1</span> <span class="operator">=</span> mapper.queryBlogById(<span class="number">1</span>);</span><br><span class="line">    <span class="type">Blog</span> <span class="variable">blog2</span> <span class="operator">=</span> mapper.queryBlogById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(blog1==blog2);</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤å¼€å¯ä¸€çº§ç¼“å­˜ï¼Œå¦‚ä¸‹åªä¼šæŸ¥è¯¢ä¸€æ¬¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 555273695.</span><br><span class="line">==&gt;  Preparing: select * from blog where id = ? </span><br><span class="line">==&gt; Parameters: 1(Integer)</span><br><span class="line">&lt;==    Columns: id, title, author, create_time, views</span><br><span class="line">&lt;==        Row: 1, Mybatis, è€æ¨, 2021-02-08 11:00:41, 9999</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">true</span><br><span class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@2118cddf]</span><br><span class="line">Returned connection 555273695 to pool.</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨"><strong>ä½¿ç”¨</strong></h2>
<p>1ã€å¼€å¯å…¨å±€ç¼“å­˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€å¯å…¨å±€ç¼“å­˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnable&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>2ã€åœ¨è¦ä½¿ç”¨çš„çš„ Mapper ä¸­åŠ ä¸Š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è‡ªå®šä¹‰å‚æ•°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag">  <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>3ã€æµ‹è¯•</p>
<p><a
href="https://mybatis.org/mybatis-3/zh/sqlmap-xml.html#cache">å®˜ç½‘</a></p>
<h2 id="å‚è€ƒ-1"><a
href="https://blog.csdn.net/weixin_37139197/article/details/82908377">å‚è€ƒ</a></h2>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/3806e68f.html">MyBatis(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/8100a57.html">MyBatis(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/450ea905.html">MyBatis(ä¸‰)ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisï¼ˆä¸€ï¼‰</title>
    <url>/article/3806e68f.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/3806e68f.html">MyBatis(ä¸€)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/8100a57.html">MyBatis(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/450ea905.html">MyBatis(ä¸‰)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NE411Q7Nx">https://www.bilibili.com/video/BV1NE411Q7Nx</a></p>
<p><a
href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p>
<span id="more"></span>
<h1 id="mybatis">Mybatis</h1>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<h2 id="ä»€ä¹ˆæ˜¯-mybatis">ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ</h2>
<figure>
<img data-src="https://mybatis.org/images/mybatis-logo.png" alt="Mybatis" />
<figcaption aria-hidden="true">Mybatis</figcaption>
</figure>
<p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰
SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC
ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML
æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java
Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<ul>
<li><p>è¦ä½¿ç”¨ MyBatisï¼Œ åªéœ€å°† <a
href="https://github.com/mybatis/mybatis-3/releases">mybatis-x.x.x.jar</a>
æ–‡ä»¶ç½®äºç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸­å³å¯ã€‚</p>
<p>å¦‚æœä½¿ç”¨ Maven æ¥æ„å»ºé¡¹ç›®ï¼Œåˆ™éœ€å°†ä¸‹é¢çš„ä¾èµ–ä»£ç ç½®äº pom.xml
æ–‡ä»¶ä¸­ï¼š</p></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Githubï¼š<a
href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></li>
<li>ä¸­æ–‡æ–‡æ¡£ï¼š<a
href="https://github.com/tuguangquan/mybatis">https://github.com/tuguangquan/mybatis</a></li>
<li>å‚è€ƒï¼š<a
href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></li>
</ul>
<h1 id="ä½œç”¨åŸŸscopeå’Œç”Ÿå‘½å‘¨æœŸ">ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</h1>
<h2 id="sqlsessionfactorybuilder">SqlSessionFactoryBuilder</h2>
<p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº†
SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder
å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨
SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory
å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦ä¸€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML
è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</p>
<h2 id="sqlsessionfactory">SqlSessionFactory</h2>
<p>SqlSessionFactory
ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚
ä½¿ç”¨ SqlSessionFactory
çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactory
è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory
çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚
æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</p>
<h2 id="sqlsession">SqlSession</h2>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession
çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚
ç»å¯¹ä¸èƒ½å°† SqlSession
å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°†
SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„
HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession
æ”¾åœ¨ä¸€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP
è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚
è¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ°
finally å—ä¸­ã€‚</p>
<h1 id="mybatisä¸Šæ‰‹">Mybatisä¸Šæ‰‹</h1>
<h2 id="æ­å»ºç¯å¢ƒ">æ­å»ºç¯å¢ƒ</h2>
<p>MySQL5.7 + IDEA + Navicat Premium</p>
<h3 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">user</span> mybatis;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `<span class="keyword">user</span>`(</span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`name` <span class="type">VARCHAR</span> (<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`pwd` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>UTF8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">USER</span>(id,name,pwd) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;123789&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;456789&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="æ–°å»ºé¡¹ç›®">æ–°å»ºé¡¹ç›®</h3>
<p>æ™®é€šçš„ maven é¡¹ç›®</p>
<p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ ¸å¿ƒé…ç½®">æ ¸å¿ƒé…ç½®</h3>
<p>mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å·¥å…·ç±»">å·¥å…·ç±»</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¼–å†™ä»£ç ">ç¼–å†™ä»£ç </h2>
<h3 id="å®ä½“ç±»">å®ä½“ç±»</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String name, String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPwd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPwd</span><span class="params">(String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="daoæ¥å£">Daoæ¥å£</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapper-é…ç½®æ–‡ä»¶">Mapper é…ç½®æ–‡ä»¶</h3>
<p>æ¥å£å®ç°ç±»ç”±åŸæ¥çš„ Impl è½¬ä¸º Mapper é…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.dao.UserMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">&quot;getUserList&quot;</span> resultType=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from user</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = mapper.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="crud">CRUD</h1>
<h2 id="namespace">namespace</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>namespace ç»‘å®šå¯¹åº” Mapper æ¥å£</p>
<h2 id="select">select</h2>
<p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥ï¼›</p>
<ul>
<li>idï¼šå°±æ˜¯å¯¹åº”çš„ namespace ä¸­çš„æ–¹æ³•å</li>
<li>resultTypeï¼šsql è¯­å¥æ‰§è¡Œçš„è¿”å›å€¼</li>
<li>parameterTypeï¼šå‚æ•°ç±»å‹</li>
</ul>
<p>1ã€ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>
<p>2ã€ç¼–å†™å¯¹åº”çš„ Mapper é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from user</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>3ã€æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.getUserById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="insert">insert</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user(id, name, pwd) values (#&#123;id&#125;, #&#123;name&#125;, #&#123;pwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="update">update</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    update user set name = #&#123;name&#125;,pwd=#&#123;pwd&#125; where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="delete">delete</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    delete from user where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„">æ³¨æ„ï¼š</h2>
<p>å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="parametertype">parameterType</h2>
<ul>
<li>map</li>
<li>Object</li>
<li>åŸºæœ¬ç±»å‹</li>
</ul>
<h2 id="åˆ†é¡µ">åˆ†é¡µ</h2>
<p><strong>æ–¹å¼ä¸€ï¼š</strong>limitå®ç°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByPage&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ–¹å¼äºŒï¼š</strong>RowBoundså®ç°ï¼ˆäº†è§£ï¼‰</p>
<p>java å¯¹è±¡å±‚é¢å®ç°åˆ†é¡µ</p>
<p><strong>æ–¹å¼ä¸‰ï¼š</strong>æ’ä»¶ï¼ˆäº†è§£ï¼‰</p>
<p>Mybatis-PageHelper</p>
<h1 id="é…ç½®">é…ç½®</h1>
<p>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</p>
<ul>
<li><p>mybatis-config.xml</p></li>
<li><p>é…ç½®æ–‡æ¡£çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>xml æ ‡ç­¾æœ‰é¡ºåº</p>
<p>The content of element type "configuration" must match
"(properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?)".</p>
<h2 id="å±æ€§properties">å±æ€§ï¼ˆpropertiesï¼‰</h2>
<p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java
å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚</p>
<p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
<p>db.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨8.0ä»¥ä¸Šé©±åŠ¨ä¸è¦åŠ ä¸Š<code>serverTimezone=UTC</code></p>
<p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶åŠ å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å¼•å…¥å¤–éƒ¨é…ç½®ä¹Ÿå¯ä»¥ç›´æ¥å¢åŠ å±æ€§ï¼Œä½†ä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®</p>
<h2 id="è®¾ç½®settings">è®¾ç½®ï¼ˆsettingsï¼‰</h2>
<h2 id="ç±»å‹åˆ«åtypealiases">ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</h2>
<p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML
é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚</p>
<p><strong>æ–¹å¼ä¸€ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.pojo.User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span> <span class="comment">&lt;!-- resultType ä¸ä¸Šé…ç½®çš„ alias ä¸€è‡´ --&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ–¹å¼äºŒï¼š</strong></p>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Bean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ªå®ä½“ç±»åŒ… ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean
çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</p>
<p>è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Author</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¯å¢ƒé…ç½®environments">ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰</h2>
<p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åŠ©äºå°† SQL
æ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­ï¼Œ
ç°å®æƒ…å†µä¸‹æœ‰å¤šç§ç†ç”±éœ€è¦è¿™ä¹ˆåšã€‚ä¾‹å¦‚ï¼Œå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒéœ€è¦æœ‰ä¸åŒçš„é…ç½®ï¼›æˆ–è€…æƒ³åœ¨å…·æœ‰ç›¸åŒ
Schema çš„å¤šä¸ªç”Ÿäº§æ•°æ®åº“ä¸­ä½¿ç”¨ç›¸åŒçš„ SQL
æ˜ å°„ã€‚è¿˜æœ‰è®¸å¤šç±»ä¼¼çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory
å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p>
<p><strong>äº‹åŠ¡ç®¡ç†å™¨ï¼ˆtransactionManagerï¼‰</strong></p>
<p>åœ¨ MyBatis ä¸­æœ‰ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯
type="[JDBC|MANAGED]"ï¼‰</p>
<p>é»˜è®¤ JDBC</p>
<p><strong>æ•°æ®æºï¼ˆdataSourceï¼‰</strong></p>
<p>dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC
è¿æ¥å¯¹è±¡çš„èµ„æºã€‚æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹ï¼ˆä¹Ÿå°±æ˜¯
type="[UNPOOLED|POOLED|JNDI]"ï¼‰</p>
<p>é»˜è®¤ POOLED</p>
<h2 id="å…¶ä»–é…ç½®">å…¶ä»–é…ç½®</h2>
<p><strong>ç±»å‹å¤„ç†å™¨ï¼ˆtypeHandlersï¼‰</strong></p>
<p><strong>å¤„ç†æšä¸¾ç±»å‹</strong></p>
<p><strong>å¯¹è±¡å·¥å‚ï¼ˆobjectFactoryï¼‰</strong></p>
<p><strong>æ’ä»¶ï¼ˆpluginsï¼‰</strong></p>
<h2 id="æ˜ å°„å™¨mappers">æ˜ å°„å™¨ï¼ˆmappersï¼‰</h2>
<p><strong>æ–¹å¼ä¸€ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ–¹å¼äºŒï¼š</strong>ä½¿ç”¨ class æ–‡ä»¶ç»‘å®šæ³¨å†Œ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æ¥å£å’Œå®ƒçš„ Mapper é…ç½®æ–‡ä»¶å¿…é¡»åŒå</li>
<li>æ¥å£å’Œå®ƒçš„ Mapper é…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€åŒ…ä¸‹</li>
</ul>
<p><strong>æ–¹å¼ä¸‰ï¼š</strong>ä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æ¥å£å’Œå®ƒçš„ Mapper é…ç½®æ–‡ä»¶å¿…é¡»åŒå</li>
<li>æ¥å£å’Œå®ƒçš„ Mapper é…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€åŒ…ä¸‹</li>
</ul>
<h1 id="ç»“æœæ˜ å°„">ç»“æœæ˜ å°„</h1>
<p><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis
ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚å®ƒå¯ä»¥è®©ä½ ä» 90% çš„ JDBC <code>ResultSets</code>
æ•°æ®æå–ä»£ç ä¸­è§£æ”¾å‡ºæ¥ï¼Œå¹¶åœ¨ä¸€äº›æƒ…å½¢ä¸‹å…è®¸ä½ è¿›è¡Œä¸€äº› JDBC
ä¸æ”¯æŒçš„æ“ä½œã€‚å®é™…ä¸Šï¼Œåœ¨ä¸ºä¸€äº›æ¯”å¦‚è¿æ¥çš„å¤æ‚è¯­å¥ç¼–å†™æ˜ å°„ä»£ç çš„æ—¶å€™ï¼Œä¸€ä»½
<code>resultMap</code> èƒ½å¤Ÿä»£æ›¿å®ç°åŒç­‰åŠŸèƒ½çš„æ•°åƒè¡Œä»£ç ã€‚ResultMap
çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</p>
<p>MyBatis ä¼šåœ¨å¹•åè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª
<code>ResultMap</code>ï¼Œå†æ ¹æ®å±æ€§åæ¥æ˜ å°„åˆ—åˆ° JavaBean
çš„å±æ€§ä¸Šã€‚å¦‚æœåˆ—åå’Œå±æ€§åä¸èƒ½åŒ¹é…ä¸Šï¼Œéœ€è¦æ˜¾å¼é…ç½®
<code>ResultMap</code>ï¼Œè¿™å°±æ˜¯ <code>ResultMap</code>
çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚</p>
<p>è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    select * from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å®ä½“ç±» Userï¼Œpwd å±æ€§æ”¹ä¸º passwordï¼ŒæŸ¥è¯¢ password ä¸º null</p>
<p>è§£å†³é—®é¢˜ï¼š</p>
<ul>
<li>èµ·åˆ«å</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    select id,name,pwd as password from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç»“æœé›†æ˜ å°„ ResultMap</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>column æŒ‡æ•°æ®åº“å­—æ®µï¼Œproperty æŒ‡å®ä½“ç±»å±æ€§</p>
<p>æ³¨æ„å› ä¸ºä¸Šé¢å‰ä¸¤ä¸ªéƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¯ä»¥çœå»ï¼Œåªå‰©ä¸‹ä¸åŒçš„ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/3806e68f.html">MyBatis(ä¸€)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/8100a57.html">MyBatis(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/450ea905.html">MyBatis(ä¸‰)</a></li>
</ul>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisï¼ˆäºŒï¼‰</title>
    <url>/article/8100a57.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/3806e68f.html">MyBatis(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/8100a57.html">MyBatis(äºŒ)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/450ea905.html">MyBatis(ä¸‰)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NE411Q7Nx">https://www.bilibili.com/video/BV1NE411Q7Nx</a></p>
<p><a
href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p>
<span id="more"></span>
<h1 id="æ—¥å¿—">æ—¥å¿—</h1>
<h2 id="æ—¥å¿—å·¥å‚">æ—¥å¿—å·¥å‚</h2>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 42%" />
<col style="width: 47%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr class="header">
<th>è®¾ç½®å</th>
<th>æè¿°</th>
<th>æœ‰æ•ˆå€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>logImpl</td>
<td>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td>
<td>SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING |
STDOUT_LOGGING | NO_LOGGING</td>
<td>æœªè®¾ç½®</td>
</tr>
</tbody>
</table>
<p>Mybatis
é€šè¿‡ä½¿ç”¨å†…ç½®çš„æ—¥å¿—å·¥å‚æä¾›æ—¥å¿—åŠŸèƒ½ã€‚å†…ç½®æ—¥å¿—å·¥å‚å°†ä¼šæŠŠæ—¥å¿—å·¥ä½œå§”æ‰˜ç»™ä¸‹é¢çš„å®ç°ä¹‹ä¸€ï¼š</p>
<ul>
<li>SLF4J</li>
<li>Apache Commons Logging</li>
<li>Log4j 2</li>
<li>Log4j</li>
<li>JDK logging</li>
</ul>
<h2 id="é…ç½®æ—¥å¿—">é…ç½®æ—¥å¿—</h2>
<p>æ ¸å¿ƒé…ç½®åŠ å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœï¼š</p>
<figure class="highlight plaintext"><figcaption><span>initialized using 'class org.apache.ibatis.logging.stdout.StdOutImpl' adapter.</span></figcaption><table><tr><td class="code"><pre><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1658699134.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@62ddbd7e]</span><br><span class="line">==&gt;  Preparing: select * from user where id = ? </span><br><span class="line">==&gt; Parameters: 1(Integer)</span><br><span class="line">&lt;==    Columns: id, name, pwd</span><br><span class="line">&lt;==        Row: 1, å¼ ä¸‰, 123456</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">User0&#123;id=1, name=&#x27;å¼ ä¸‰&#x27;, password=&#x27;123456&#x27;&#125;</span><br><span class="line">Resetting autocommit to true on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@62ddbd7e]</span><br><span class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@62ddbd7e]</span><br><span class="line">Returned connection 1658699134 to pool.</span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<h2 id="log4j">Log4j</h2>
<p>Log4jæ˜¯<a
href="https://baike.baidu.com/item/Apache/8512995">Apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€<a
href="https://baike.baidu.com/item/GUI">GUI</a>ç»„ä»¶ï¼Œç”šè‡³æ˜¯å¥—æ¥å£æœåŠ¡å™¨ã€<a
href="https://baike.baidu.com/item/NT/3443842">NT</a>çš„äº‹ä»¶è®°å½•å™¨ã€<a
href="https://baike.baidu.com/item/UNIX">UNIX</a> <a
href="https://baike.baidu.com/item/Syslog">Syslog</a><a
href="https://baike.baidu.com/item/å®ˆæŠ¤è¿›ç¨‹/966835">å®ˆæŠ¤è¿›ç¨‹</a>ç­‰ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ª<a
href="https://baike.baidu.com/item/é…ç½®æ–‡ä»¶/286550">é…ç½®æ–‡ä»¶</a>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</p>
<p>1ã€å¯¼å…¥ log4j åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2ã€log4j.properties</p>
<p>è¯¦ç»†é…ç½®</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># priority  :debug&lt;info&lt;warn&lt;error</span></span><br><span class="line"><span class="comment">#you cannot specify every priority with different file for log4j </span></span><br><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">debug,stdout,info,debug,warn,error </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">#console</span></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender </span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>= <span class="string">[%d&#123;yyyy-MM-dd HH:mm:ss a&#125;]:%p %l%m%n</span></span><br><span class="line"><span class="comment">#info log</span></span><br><span class="line"><span class="attr">log4j.logger.info</span>=<span class="string">info</span></span><br><span class="line"><span class="attr">log4j.appender.info</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender </span></span><br><span class="line"><span class="attr">log4j.appender.info.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="attr">log4j.appender.info.File</span>=<span class="string">./src/com/hp/log/info.log</span></span><br><span class="line"><span class="attr">log4j.appender.info.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">log4j.appender.info.Threshold</span>=<span class="string">INFO</span></span><br><span class="line"><span class="attr">log4j.appender.info.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="attr">log4j.appender.info.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br><span class="line"><span class="comment">#debug log</span></span><br><span class="line"><span class="attr">log4j.logger.debug</span>=<span class="string">debug</span></span><br><span class="line"><span class="attr">log4j.appender.debug</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender </span></span><br><span class="line"><span class="attr">log4j.appender.debug.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="attr">log4j.appender.debug.File</span>=<span class="string">./src/com/hp/log/debug.log</span></span><br><span class="line"><span class="attr">log4j.appender.debug.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">log4j.appender.debug.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.debug.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="attr">log4j.appender.debug.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br><span class="line"><span class="comment">#warn log</span></span><br><span class="line"><span class="attr">log4j.logger.warn</span>=<span class="string">warn</span></span><br><span class="line"><span class="attr">log4j.appender.warn</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender </span></span><br><span class="line"><span class="attr">log4j.appender.warn.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="attr">log4j.appender.warn.File</span>=<span class="string">./src/com/hp/log/warn.log</span></span><br><span class="line"><span class="attr">log4j.appender.warn.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">log4j.appender.warn.Threshold</span>=<span class="string">WARN</span></span><br><span class="line"><span class="attr">log4j.appender.warn.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="attr">log4j.appender.warn.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br><span class="line"><span class="comment">#error</span></span><br><span class="line"><span class="attr">log4j.logger.error</span>=<span class="string">error</span></span><br><span class="line"><span class="attr">log4j.appender.error</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.error.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="attr">log4j.appender.error.File</span> = <span class="string">./src/com/hp/log/error.log </span></span><br><span class="line"><span class="attr">log4j.appender.error.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">log4j.appender.error.Threshold</span> = <span class="string">ERROR </span></span><br><span class="line"><span class="attr">log4j.appender.error.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.error.layout.ConversionPattern</span> = <span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br></pre></td></tr></table></figure>
<p>ç•¥ç®€ç‰ˆ</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span></span><br><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">DEBUG,console,file</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="attr">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="attr">log4j.appender.console.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout.ConversionPattern</span>=<span class="string">[%c]-%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="attr">log4j.appender.file</span> = <span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.file.File</span>=<span class="string">./log/wnhyang.log</span></span><br><span class="line"><span class="attr">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb</span></span><br><span class="line"><span class="attr">log4j.appender.file.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span></span><br><span class="line"><span class="attr">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>
<p>æç®€ç‰ˆ</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…¨å±€æ—¥å¿—é…ç½®</span></span><br><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">ERROR,stdout</span></span><br><span class="line"><span class="comment"># MyBatis æ—¥å¿—é…ç½®</span></span><br><span class="line"><span class="attr">log4j.logger.org.mybatis.example.BlogMapper</span>=<span class="string">TRACE</span></span><br><span class="line"><span class="comment"># æ§åˆ¶å°è¾“å‡º</span></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p [%t] - %m%n</span></span><br></pre></td></tr></table></figure>
<p>3ã€é…ç½® log4j</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>4ã€æµ‹è¯•è¿è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[org.apache.ibatis.logging.LogFactory]-Logging initialized using &#x27;class org.apache.ibatis.logging.log4j.Log4jImpl&#x27; adapter.</span><br><span class="line">[org.apache.ibatis.datasource.pooled.PooledDataSource]-PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">[org.apache.ibatis.datasource.pooled.PooledDataSource]-PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">[org.apache.ibatis.datasource.pooled.PooledDataSource]-PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">[org.apache.ibatis.datasource.pooled.PooledDataSource]-PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Opening JDBC Connection</span><br><span class="line">[org.apache.ibatis.datasource.pooled.PooledDataSource]-Created connection 279593458.</span><br><span class="line">[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@10aa41f2]</span><br><span class="line">[com.dao.UserMapper.getUserById]-==&gt;  Preparing: select * from user where id = ? </span><br><span class="line">[com.dao.UserMapper.getUserById]-==&gt; Parameters: 1(Integer)</span><br><span class="line">[com.dao.UserMapper.getUserById]-&lt;==      Total: 1</span><br><span class="line">User0&#123;id=1, name=&#x27;å¼ ä¸‰&#x27;, password=&#x27;123456&#x27;&#125;</span><br><span class="line">[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Resetting autocommit to true on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@10aa41f2]</span><br><span class="line">[org.apache.ibatis.transaction.jdbc.JdbcTransaction]-Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@10aa41f2]</span><br><span class="line">[org.apache.ibatis.datasource.pooled.PooledDataSource]-Returned connection 279593458 to pool.</span><br></pre></td></tr></table></figure>
<p><strong>ç®€å•ä½¿ç”¨ï¼š</strong></p>
<p>1ã€åœ¨è¦ä½¿ç”¨ Log4j çš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ…
<code>import org.apache.log4j.Logger;</code></p>
<p>2ã€æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰çš„class</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> Logger logger=  Logger.getLogger(UserDaoTest.class);</span><br></pre></td></tr></table></figure>
<p>3ã€æ—¥å¿—çº§åˆ«</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">logger.info(<span class="string">&quot;infoï¼šè¿›å…¥äº†testLog4j&quot;</span>);</span><br><span class="line">logger.debug(<span class="string">&quot;debugï¼šè¿›å…¥äº†testLog4j&quot;</span>);</span><br><span class="line">logger.error(<span class="string">&quot;errorï¼šè¿›å…¥äº†testLog4j&quot;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="æ³¨è§£å¼€å‘">æ³¨è§£å¼€å‘</h1>
<p>ä½¿ç”¨æ³¨è§£æ¥æ˜ å°„ç®€å•è¯­å¥ä¼šä½¿ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œä½†å¯¹äºç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼ŒJava
æ³¨è§£ä¸ä»…åŠ›ä¸ä»å¿ƒï¼Œè¿˜ä¼šè®©ä½ æœ¬å°±å¤æ‚çš„ SQL è¯­å¥æ›´åŠ æ··ä¹±ä¸å ªã€‚
å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åšä¸€äº›å¾ˆå¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ç”¨ XML æ¥æ˜ å°„è¯­å¥ã€‚</p>
<p>1ã€æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<p>2ã€æ ¸å¿ƒé…ç½®ç»‘å®šæ¥å£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dao/UserMapper.class&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>xml ä¸æ³¨è§£åŒæ—¶ä½¿ç”¨éœ€è¦ï¼šæ¥å£å’Œå®ƒçš„ Mapper
é…ç½®æ–‡ä»¶å¿…é¡»åŒåä¸”å¿…é¡»åœ¨åŒä¸€åŒ…ä¸‹ï¼Œå¹¶é…ç½® xml</p>
<p>3ã€æµ‹è¯•</p>
<p>æœ¬è´¨ï¼šåå°„æœºåˆ¶å®ç°</p>
<p>åº•å±‚ï¼šåŠ¨æ€ä»£ç†</p>
<h2 id="crud">CRUD</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select()</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">@Insert()</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">@Update()</span></span><br><span class="line">....</span><br><span class="line"><span class="meta">@Delete()</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>å…³äº <span class="citation"
data-cites="Param">@Param</span>() æ³¨è§£</strong></p>
<ul>
<li>8åŸºæœ¬ç±»å‹ + String ç±»å‹ï¼Œéœ€è¦åŠ ä¸Š</li>
<li>å¼•ç”¨ç±»å‹ä¸ç”¨åŠ </li>
<li>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†å»ºè®®åŠ ä¸Š</li>
<li>åœ¨ sql ä¸­å¼•ç”¨çš„å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„ <span class="citation"
data-cites="Param">@Param</span>() ä¸­è®¾å®šçš„å±æ€§å</li>
</ul>
<h2 id="åŒºåˆ«">#{} ${} åŒºåˆ«</h2>
<p><strong>å‚è€ƒï¼š</strong></p>
<p><a
href="https://www.bilibili.com/video/BV1gs411j7kA">MyBatisè§†é¢‘æ•™ç¨‹</a></p>
<p>[#{}ä¸<span
class="math inline">\({}çš„åŒºåˆ«](https://blog.csdn.net/qian_qian_123/article/details/92844194?ops_request_misc=%25257B%252522request%25255Fid%252522%25253A%252522160759025519726885835134%252522%25252C%252522scm%252522%25253A%25252220140713.130102334..%252522%25257D&amp;request_id=160759025519726885835134&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-3-92844194.pc_search_result_no_baidu_js&amp;utm_term=#{}%E4%B8%8E\)</span>{}%E5%8C%BA%E5%88%AB)</p>
<h2 id="mybatis-è¯¦ç»†æ‰§è¡Œæµç¨‹">Mybatis è¯¦ç»†æ‰§è¡Œæµç¨‹</h2>
<p><a
href="https://louluan.blog.csdn.net/article/details/40422941?utm_medium=distribute.pc_relevant.none-task-blog-searchFromBaidu-9.baidujs&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-searchFromBaidu-9.baidujs">å‚è€ƒ</a></p>
<h1 id="å¤æ‚æŸ¥è¯¢">å¤æ‚æŸ¥è¯¢</h1>
<h2 id="æ•°æ®åº“å‡†å¤‡">æ•°æ®åº“å‡†å¤‡</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `teacher` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher(`id`, `name`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;è€æ¨&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `fktid` (`tid`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fktid` <span class="keyword">FOREIGN</span> KEY (`tid`) <span class="keyword">REFERENCES</span> `teacher` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;å°æ˜&#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;å°çº¢&#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;å°å¼ &#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;å°æ&#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;å°ç‹&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®">é…ç½®</h2>
<p><strong>å®ä½“ç±»ï¼ˆä½¿ç”¨äº† Lombok æ’ä»¶ï¼‰</strong></p>
<p>Teacher</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Student</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Teacher teacher;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ¥å£å’Œå¯¹åº”çš„ Mapper.xml</strong></p>
<p>æ³¨æ„æ”¾åœ¨åŒä¸€åŒ…ä¸‹ï¼Œä¸”å‘½åç›¸åŒï¼Œå¦‚ä¸‹æ¨¡æ¿</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dao.xxxMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ ¸å¿ƒé…ç½®">æ ¸å¿ƒé…ç½®</h2>
<p>å¦‚æœéœ€è¦çš„è¯ä¿®æ”¹ db.properties</p>
<p>mybatis-config.xml ä¿®æ”¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span> <span class="comment">&lt;!-- æ•°æ®åº“é…ç½®è¦æ­£ç¡® --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span> <span class="comment">&lt;!-- è‡ªå¸¦æ—¥å¿—å¼€å¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span> <span class="comment">&lt;!-- æ‰«æåŒ…å–åˆ«å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span> <span class="comment">&lt;!-- éœ€è¦çš„ä¿®æ”¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dao/TeacherMapper.xml&quot;</span>/&gt;</span> <span class="comment">&lt;!-- + --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dao/StudentMapper.xml&quot;</span>/&gt;</span> <span class="comment">&lt;!-- + --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<h3 id="è¦æ±‚ä¸€">è¦æ±‚ä¸€ï¼š</h3>
<p>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ï¼Œå†…å®¹åŒ…æ‹¬ï¼ˆå­¦ç”Ÿidï¼Œå­¦ç”Ÿnameï¼Œè€å¸ˆnameï¼‰</p>
<p><strong>æ–¹æ³•ä¸€ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤æ‚å±æ€§ï¼Œéœ€è¦å•ç‹¬å¤„ç†</span></span><br><span class="line"><span class="comment">         å¯¹è±¡ï¼šassociation</span></span><br><span class="line"><span class="comment">         é›†åˆï¼šcollection</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacherById&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentMap&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacherById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from teacher</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†ï¼Œç›¸å½“äºå­æŸ¥è¯¢</p>
<p><strong>æ–¹æ³•äºŒï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentMap0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤æ‚å±æ€§ï¼Œéœ€è¦å•ç‹¬å¤„ç†</span></span><br><span class="line"><span class="comment">         å¯¹è±¡ï¼šassociation</span></span><br><span class="line"><span class="comment">         é›†åˆï¼šcollection</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent0&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentMap0&quot;</span>&gt;</span></span><br><span class="line">    select s.id sid, s.name sname, t.name tname</span><br><span class="line">    from student s,</span><br><span class="line">         teacher t</span><br><span class="line">    where s.tid = t.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†ï¼Œå³è¿è¡¨æŸ¥è¯¢</p>
<h3 id="è¦æ±‚äºŒ">è¦æ±‚äºŒï¼š</h3>
<p>æŸ¥è¯¢æ‰€æœ‰è€å¸ˆä¿¡æ¯ï¼Œå†…å®¹åŒ…æ‹¬ï¼ˆè€å¸ˆidï¼Œè€å¸ˆnameï¼Œæ‰€æœ‰å­¦ç”Ÿï¼ˆå­¦ç”Ÿidï¼Œå­¦ç”Ÿnameï¼Œå­¦ç”Ÿè€å¸ˆidï¼‰ï¼‰</p>
<p><strong>å®ä½“ç±»çš„å˜åŒ–</strong></p>
<p>Student0</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student0</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Teacher0</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher0</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Student0&gt; student0s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ–¹æ³•ä¸€ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;teacherMap0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;teacher0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;student0s&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student0&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getStudentByTid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher0&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;teacherMap0&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from teacher</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentByTid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student0&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from student</span><br><span class="line">    where tid = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†ï¼Œç›¸å½“äºå­æŸ¥è¯¢</p>
<p><strong>æ–¹æ³•äºŒï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;resultMap id=<span class="string">&quot;teacherMap&quot;</span> type=<span class="string">&quot;teacher0&quot;</span>&gt;</span><br><span class="line">    &lt;result column=<span class="string">&quot;tid&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">    &lt;result column=<span class="string">&quot;tname&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        javaType=<span class="string">&quot;&quot;</span> æŒ‡å®šå±æ€§ç±»å‹</span><br><span class="line">        é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ ofType è·å–</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;collection property=<span class="string">&quot;student0s&quot;</span> ofType=<span class="string">&quot;Student0&quot;</span>&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;sid&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;sname&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;tid&quot;</span> column=<span class="string">&quot;tid&quot;</span>/&gt;</span><br><span class="line">    &lt;/collection&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">&quot;getTeacher&quot;</span> resultMap=<span class="string">&quot;teacherMap&quot;</span>&gt;</span><br><span class="line">    select t.id tid, t.name tname, s.id sid, s.name sname</span><br><span class="line">    from student s,</span><br><span class="line">         teacher t</span><br><span class="line">    where s.tid = t.id</span><br><span class="line">      and t.id = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†ï¼Œå³è¿è¡¨æŸ¥è¯¢</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>1ã€å…³è” - association</p>
<p>2ã€é›†åˆ - collection</p>
<p>3ã€javaType &amp; ofType</p>
<ol type="1">
<li>javaType ç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­å±æ€§çš„ç±»å‹</li>
<li>ofType ç”¨æ¥æŒ‡å®šæ˜ å°„åˆ° List æˆ–é›†åˆä¸­çš„ pojo
ç±»å‹ï¼Œæ³›å‹ä¸­çš„çº¦æŸç±»å‹</li>
</ol>
<p><strong>æ³¨æ„ç‚¹ï¼š</strong></p>
<ul>
<li>sql å¯è¯»æ€§</li>
<li>æ•°æ®åº“å­—æ®µä¸å®ä½“ç±»å±æ€§å¯¹åº”</li>
<li>æ’é”™ä¾é æ—¥å¿—ä¿¡æ¯ï¼ˆlog4jç­‰ï¼‰</li>
</ul>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/3806e68f.html">MyBatis(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/8100a57.html">MyBatis(äºŒ)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/450ea905.html">MyBatis(ä¸‰)</a></li>
</ul>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL-explainåº”ç”¨</title>
    <url>/article/f6b622c.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>https://segmentfault.com/a/1190000023565685</p>
<p>ä¹Ÿä¸å¤šè¯´äº†ï¼Œå…³äº<code>MySQL</code>çš„<code>explain</code>çœ‹çœ‹ä¸Šé¢çš„æ–‡ç« å°±æŒºå¥½çš„äº†</p>
]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLçš„å°ç»“01</title>
    <url>/article/c769172d.html</url>
    <content><![CDATA[<h1 id="ç®€è¿°">ç®€è¿°</h1>
<p>æœ€è¿‘åšé¡¹ç›®æ—¶ï¼Œé‡åˆ°ä½¿ç”¨<code>MySQL</code>çš„ä¸€äº›é—®é¢˜å’Œæ€»ç»“</p>
<span id="more"></span>
<h1 id="èŒƒå¼">èŒƒå¼</h1>
<p><a
href="https://blog.csdn.net/weixin_43433032/article/details/89293663">https://blog.csdn.net/weixin_43433032/article/details/89293663</a></p>
<p>å…³äºæ•°æ®åº“è®¾è®¡å¿…é¡»è¦äº†è§£èŒƒå¼çš„æ¦‚å¿µï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸ä¼šç»“åˆå…·ä½“åœºæ™¯æ¥åšè®¾è®¡ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œä¹Ÿæœªå¿…è¦å®Œå…¨éµå®ˆèŒƒå¼çº¦å®šã€‚</p>
<p>è¿™é‡Œå°±ä¸ä¸¾ä¾‹å­äº†ã€‚</p>
<h1 id="nullä¸é»˜è®¤å€¼">NULLä¸é»˜è®¤å€¼</h1>
<p>è¿™ä¸ªå¾ˆé‡è¦ï¼Œé€šå¸¸è¿˜æ˜¯è¦è®¾ç½®é»˜è®¤å€¼çš„ï¼Œè¿™æ ·èƒ½é¿å…æ”¹å˜éç©ºå­—æ®µä¸º<code>NULL</code>çš„æƒ…å†µã€‚</p>
<p>å­¦åˆ°äº†æ—¶é—´çš„é»˜è®¤è®¾ç½®ï¼Œå¥½å¤„å°±æ˜¯ï¼Œåˆ›å»ºæ—¶é—´ç›´æ¥æ’å…¥å°±æ˜¯å½“ä¸‹æ—¶é—´ï¼Œæ›´æ–°æ—¶é—´å°±æ˜¯æ¯æ¬¡åšæ›´æ–°æ“ä½œçš„æ—¶é—´ï¼Œä¸éœ€è¦å†™é¢å¤–sqlæ›´æ–°ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br></pre></td></tr></table></figure>
<h1 id="mbg">MBG</h1>
<p><code>Mybatis-Generator</code>åœ¨ç”Ÿæˆ<code>BaseResultMap</code>ä¼šæœ‰ä¸åŒ</p>
<p>è‹¥æ•°æ®è¡¨å­—æ®µä¸º<code>tinyiny(1)</code>ï¼Œ<code>MBG</code>æ˜ å°„<code>jdbcType</code>ä¸º<code>BIT</code>ï¼Œ<code>Java</code>å±æ€§ä¸º<code>Boolean</code>ï¼Œ</p>
<p>è‹¥ä¸º<code>tinyint(4)</code>ï¼Œ<code>MBG</code>æ˜ å°„<code>jdbcType</code>ä¸º<code>TINYINT</code>ï¼Œ<code>Java</code>å±æ€§ä¸º<code>Byte</code>ï¼Œ</p>
<p>è‹¥ä¸º<code>datetime</code>ï¼Œ<code>MBG</code>æ˜ å°„<code>jdbcType</code>ä¸º<code>TIMESTAMP</code>ï¼Œ<code>Java</code>å±æ€§ä¸º<code>Date</code>ã€‚</p>
<p>è¿™ä¸ªéœ€è¦æ³¨æ„</p>
<h1 id="order-by">order by</h1>
<p><code>order by</code>å­å¥æœ€å¥½ä¾æ®æœ‰å”¯ä¸€å­—æ®µæ’åº</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>çœ‹è¿™å¼ è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">20	demoData	1	2021-12-31 17:13:03	2021-12-31 17:14:15</span><br><span class="line">22	etjyrj	0	2021-12-31 17:13:11	2021-12-31 17:13:11</span><br><span class="line">21	olafa	1	2021-12-31 17:13:08	2021-12-31 17:13:08</span><br><span class="line">19	tjryj	1	2021-12-31 17:13:00	2021-12-31 17:13:00</span><br><span class="line">18	rgher	1	2021-12-31 17:12:58	2021-12-31 17:12:58</span><br><span class="line">17	rg	1	2021-12-31 17:12:55	2021-12-31 17:12:55</span><br><span class="line">12	äººç‰©	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">16	å¥åº·	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">15	æ•™è‚²	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">14	å†œä¸š	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">13	å†›äº‹	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">11	æ³•æ²»	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">10	æ±½è½¦	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">9	æ—¶æ”¿	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">8	ç§‘æŠ€	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">7	ç”Ÿæ´»	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">6	æ–‡åŒ–	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">5	ä½“è‚²	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">4	é‡‘è	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">3	è´¢ç»	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">2	ç¤¾ä¼š	1	2021-12-31 17:06:22	2021-12-31 17:06:22</span><br><span class="line">1	å›½é™…	1	2021-12-31 17:06:01	2021-12-31 17:06:01</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ¬¡åˆ†é¡µæŸ¥æ‰¾</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	id,</span><br><span class="line">	category_name,</span><br><span class="line">	valid,</span><br><span class="line">	create_time,</span><br><span class="line">	update_time </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	news_category </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	valid <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	update_time <span class="keyword">DESC</span></span><br><span class="line">	LIMIT <span class="number">0</span>,</span><br><span class="line">	<span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">20	demoData	1	2021-12-31 17:13:03	2021-12-31 17:14:15</span><br><span class="line">21	olafa	1	2021-12-31 17:13:08	2021-12-31 17:13:08</span><br><span class="line">19	tjryj	1	2021-12-31 17:13:00	2021-12-31 17:13:00</span><br><span class="line">18	rgher	1	2021-12-31 17:12:58	2021-12-31 17:12:58</span><br><span class="line">17	rg	1	2021-12-31 17:12:55	2021-12-31 17:12:55</span><br></pre></td></tr></table></figure>
<p>æ²¡ä»€ä¹ˆé—®é¢˜</p>
<p>ä¸‹ä¸€é¡µ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">xxx</span><br><span class="line">	LIMIT <span class="number">5</span>,</span><br><span class="line">	<span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">3	è´¢ç»	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">5	ä½“è‚²	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">6	æ–‡åŒ–	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">7	ç”Ÿæ´»	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">10	æ±½è½¦	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br></pre></td></tr></table></figure>
<p>ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ä¸‹ä¸€é¡µ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">xxx</span><br><span class="line">	LIMIT <span class="number">10</span>,</span><br><span class="line">	<span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10	æ±½è½¦	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">11	æ³•æ²»	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">12	äººç‰©	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">13	å†›äº‹	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br><span class="line">14	å†œä¸š	1	2021-12-31 17:12:19	2021-12-31 17:12:19</span><br></pre></td></tr></table></figure>
<p>ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>â€œæ›´ç¦»è°±äº†â€ğŸ¤”ä¸Šä¸€é¡µçš„æ•°æ®æ€ä¹ˆåˆæ¥äº†</p>
<p>å½“æ—¶äººå‚»äº†åŠå¤©ï¼Œæœ€åæ‰å‘ç°ä¸­é—´çš„æ•°æ®<code>update_time</code>å­—æ®µä¸€æ ·ï¼Œå¯¼è‡´MySQLæ— æ³•æ­£å¸¸æ’åº</p>
<p>æ‰€ä»¥MySQLéœ€è¦ä¸€ä¸ªèƒ½å”¯ä¸€ç¡®å®šçš„å­—æ®µæ¥æ’åºï¼Œso</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	update_time <span class="keyword">DESC</span>,id <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ok</p>
<h1 id="å°ç»“">å°ç»“</h1>
<p>è¿˜æœ‰å¾ˆå¤šé—®é¢˜å¾…å‘ç°å§~</p>
]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLï¼ˆä¸€ï¼‰</title>
    <url>/article/8d742da7.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NJ411J79W">https://www.bilibili.com/video/BV1NJ411J79W</a></p>
<p><a
href="https://www.runoob.com/mysql/mysql-tutorial.html">https://www.runoob.com/mysql/mysql-tutorial.html</a></p>
<span id="more"></span>
<h1 id="ä»€ä¹ˆæ˜¯æ•°æ®åº“">ä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿ</h1>
<p>æ•°æ®åº“ï¼ˆDatabaseï¼‰æ˜¯æŒ‰ç…§æ•°æ®ç»“æ„æ¥ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ä»“åº“ã€‚</p>
<p>æ¯ä¸ªæ•°æ®åº“éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒçš„ API
ç”¨äºåˆ›å»ºï¼Œè®¿é—®ï¼Œç®¡ç†ï¼Œæœç´¢å’Œå¤åˆ¶æ‰€ä¿å­˜çš„æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯åœ¨æ–‡ä»¶ä¸­è¯»å†™æ•°æ®é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚</p>
<p>æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰æ¥å­˜å‚¨å’Œç®¡ç†å¤§æ•°æ®é‡ã€‚æ‰€è°“çš„å…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šçš„æ•°æ®åº“ï¼Œå€ŸåŠ©äºé›†åˆä»£æ•°ç­‰æ•°å­¦æ¦‚å¿µå’Œæ–¹æ³•æ¥å¤„ç†æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p>
<p>RDBMS å³å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(Relational Database Management
System)çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>1.æ•°æ®ä»¥è¡¨æ ¼çš„å½¢å¼å‡ºç°</li>
<li>2.æ¯è¡Œä¸ºå„ç§è®°å½•åç§°</li>
<li>3.æ¯åˆ—ä¸ºè®°å½•åç§°æ‰€å¯¹åº”çš„æ•°æ®åŸŸ</li>
<li>4.è®¸å¤šçš„è¡Œå’Œåˆ—ç»„æˆä¸€å¼ è¡¨å•</li>
<li>5.è‹¥å¹²çš„è¡¨å•ç»„æˆdatabase</li>
</ul>
<h1 id="mysql-è¿æ¥">MySQL è¿æ¥</h1>
<blockquote>
<p>å‘½ä»¤è¡Œè¿æ¥</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[root<span class="variable">@host</span>]# mysql <span class="operator">-</span>u root <span class="operator">-</span>p	<span class="comment">--è¿æ¥</span></span><br><span class="line">Enter password:<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> databases;	<span class="comment">-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> DATABASE æ•°æ®åº“å;	<span class="comment">-- åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> database æ•°æ®åº“å;	<span class="comment">-- åˆ é™¤æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> use æ•°æ®åº“å;	<span class="comment">-- é€‰æ‹©æ•°æ®åº“ </span></span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;	<span class="comment">-- æŸ¥çœ‹è¯¥æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> exit	<span class="comment">-- é€€å‡º</span></span><br><span class="line">Bye</span><br></pre></td></tr></table></figure>
<p>CRUD
ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ï¼›å¢åŠ ï¼ˆCreateï¼‰ã€æ£€ç´¢ï¼ˆRetrieveï¼‰ã€æ›´æ–°ï¼ˆUpdateï¼‰å’Œåˆ é™¤ï¼ˆDeleteï¼‰</p>
<p>æ•°æ®åº“ xxx è¯­è¨€</p>
<p>DDL ï¼ˆData Definition Languageï¼‰</p>
<p>DMLï¼ˆData Manipulation Languageï¼‰</p>
<p>DQL ï¼ˆData QueryLanguageï¼‰</p>
<p>DCL ï¼ˆData Control Languageï¼‰</p>
<h1 id="æ“ä½œæ•°æ®åº“">æ“ä½œæ•°æ®åº“</h1>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">EXISTS</span> test	<span class="comment">-- åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">EXISTS</span> test	<span class="comment">-- åˆ é™¤æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="æ•°å€¼ç±»å‹">æ•°å€¼ç±»å‹</h2>
<p>MySQLæ”¯æŒæ‰€æœ‰æ ‡å‡†SQLæ•°å€¼æ•°æ®ç±»å‹ã€‚</p>
<p>è¿™äº›ç±»å‹åŒ…æ‹¬ä¸¥æ ¼æ•°å€¼æ•°æ®ç±»å‹(INTEGERã€SMALLINTã€DECIMALå’ŒNUMERIC)ï¼Œä»¥åŠè¿‘ä¼¼æ•°å€¼æ•°æ®ç±»å‹(FLOATã€REALå’ŒDOUBLE
PRECISION)ã€‚</p>
<p>å…³é”®å­—INTæ˜¯INTEGERçš„åŒä¹‰è¯ï¼Œå…³é”®å­—DECæ˜¯DECIMALçš„åŒä¹‰è¯ã€‚</p>
<p>BITæ•°æ®ç±»å‹ä¿å­˜ä½å­—æ®µå€¼ï¼Œå¹¶ä¸”æ”¯æŒMyISAMã€MEMORYã€InnoDBå’ŒBDBè¡¨ã€‚</p>
<p>ä½œä¸ºSQLæ ‡å‡†çš„æ‰©å±•ï¼ŒMySQLä¹Ÿæ”¯æŒæ•´æ•°ç±»å‹TINYINTã€MEDIUMINTå’ŒBIGINTã€‚ä¸‹é¢çš„è¡¨æ˜¾ç¤ºäº†éœ€è¦çš„æ¯ä¸ªæ•´æ•°ç±»å‹çš„å­˜å‚¨å’ŒèŒƒå›´ã€‚</p>
<table style="width:100%;">
<colgroup>
<col style="width: 6%" />
<col style="width: 21%" />
<col style="width: 32%" />
<col style="width: 32%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">ç±»å‹</th>
<th style="text-align: left;">å¤§å°</th>
<th style="text-align: left;">èŒƒå›´ï¼ˆæœ‰ç¬¦å·ï¼‰</th>
<th style="text-align: left;">èŒƒå›´ï¼ˆæ— ç¬¦å·ï¼‰</th>
<th style="text-align: left;">ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TINYINT</td>
<td style="text-align: left;">1 byte</td>
<td style="text-align: left;">(-128ï¼Œ127)</td>
<td style="text-align: left;">(0ï¼Œ255)</td>
<td style="text-align: left;">å°æ•´æ•°å€¼</td>
</tr>
<tr class="even">
<td style="text-align: left;">SMALLINT</td>
<td style="text-align: left;">2 bytes</td>
<td style="text-align: left;">(-32 768ï¼Œ32 767)</td>
<td style="text-align: left;">(0ï¼Œ65 535)</td>
<td style="text-align: left;">å¤§æ•´æ•°å€¼</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MEDIUMINT</td>
<td style="text-align: left;">3 bytes</td>
<td style="text-align: left;">(-8 388 608ï¼Œ8 388 607)</td>
<td style="text-align: left;">(0ï¼Œ16 777 215)</td>
<td style="text-align: left;">å¤§æ•´æ•°å€¼</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTæˆ–INTEGER</td>
<td style="text-align: left;">4 bytes</td>
<td style="text-align: left;">(-2 147 483 648ï¼Œ2 147 483 647)</td>
<td style="text-align: left;">(0ï¼Œ4 294 967 295)</td>
<td style="text-align: left;">å¤§æ•´æ•°å€¼</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIGINT</td>
<td style="text-align: left;">8 bytes</td>
<td style="text-align: left;">(-9,223,372,036,854,775,808ï¼Œ9 223 372 036
854 775 807)</td>
<td style="text-align: left;">(0ï¼Œ18 446 744 073 709 551 615)</td>
<td style="text-align: left;">æå¤§æ•´æ•°å€¼</td>
</tr>
<tr class="even">
<td style="text-align: left;">FLOAT</td>
<td style="text-align: left;">4 bytes</td>
<td style="text-align: left;">(-3.402 823 466 E+38ï¼Œ-1.175 494 351
E-38)ï¼Œ0ï¼Œ(1.175 494 351 E-38ï¼Œ3.402 823 466 351 E+38)</td>
<td style="text-align: left;">0ï¼Œ(1.175 494 351 E-38ï¼Œ3.402 823 466
E+38)</td>
<td style="text-align: left;">å•ç²¾åº¦ æµ®ç‚¹æ•°å€¼</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">8 bytes</td>
<td style="text-align: left;">(-1.797 693 134 862 315 7 E+308ï¼Œ-2.225
073 858 507 201 4 E-308)ï¼Œ0ï¼Œ(2.225 073 858 507 201 4 E-308ï¼Œ1.797 693
134 862 315 7 E+308)</td>
<td style="text-align: left;">0ï¼Œ(2.225 073 858 507 201 4 E-308ï¼Œ1.797
693 134 862 315 7 E+308)</td>
<td style="text-align: left;">åŒç²¾åº¦ æµ®ç‚¹æ•°å€¼</td>
</tr>
<tr class="even">
<td style="text-align: left;">DECIMAL</td>
<td style="text-align: left;">å¯¹DECIMAL(M,D)
ï¼Œå¦‚æœM&gt;Dï¼Œä¸ºM+2å¦åˆ™ä¸ºD+2</td>
<td style="text-align: left;">ä¾èµ–äºMå’ŒDçš„å€¼</td>
<td style="text-align: left;">ä¾èµ–äºMå’ŒDçš„å€¼</td>
<td style="text-align: left;">å°æ•°å€¼</td>
</tr>
</tbody>
</table>
<h2 id="æ—¥æœŸå’Œæ—¶é—´ç±»å‹">æ—¥æœŸå’Œæ—¶é—´ç±»å‹</h2>
<p>è¡¨ç¤ºæ—¶é—´å€¼çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ä¸ºDATETIMEã€DATEã€TIMESTAMPã€TIMEå’ŒYEARã€‚</p>
<p>æ¯ä¸ªæ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªæœ‰æ•ˆå€¼èŒƒå›´å’Œä¸€ä¸ª"é›¶"å€¼ï¼Œå½“æŒ‡å®šä¸åˆæ³•çš„MySQLä¸èƒ½è¡¨ç¤ºçš„å€¼æ—¶ä½¿ç”¨"é›¶"å€¼ã€‚</p>
<p>TIMESTAMPç±»å‹æœ‰ä¸“æœ‰çš„è‡ªåŠ¨æ›´æ–°ç‰¹æ€§ï¼Œå°†åœ¨åé¢æè¿°ã€‚</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 48%" />
<col style="width: 15%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">ç±»å‹</th>
<th style="text-align: left;">å¤§å° ( bytes)</th>
<th style="text-align: left;">èŒƒå›´</th>
<th style="text-align: left;">æ ¼å¼</th>
<th style="text-align: left;">ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DATE</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">1000-01-01/9999-12-31</td>
<td style="text-align: left;">YYYY-MM-DD</td>
<td style="text-align: left;">æ—¥æœŸå€¼</td>
</tr>
<tr class="even">
<td style="text-align: left;">TIME</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">'-838:59:59'/'838:59:59'</td>
<td style="text-align: left;">HH:MM:SS</td>
<td style="text-align: left;">æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´</td>
</tr>
<tr class="odd">
<td style="text-align: left;">YEAR</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1901/2155</td>
<td style="text-align: left;">YYYY</td>
<td style="text-align: left;">å¹´ä»½å€¼</td>
</tr>
<tr class="even">
<td style="text-align: left;">DATETIME</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">1000-01-01 00:00:00/9999-12-31
23:59:59</td>
<td style="text-align: left;">YYYY-MM-DD HH:MM:SS</td>
<td style="text-align: left;">æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TIMESTAMP</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">1970-01-01 00:00:00/2038ç»“æŸæ—¶é—´æ˜¯ç¬¬
<strong>2147483647</strong> ç§’ï¼ŒåŒ—äº¬æ—¶é—´ <strong>2038-1-19
11:14:07</strong>ï¼Œæ ¼æ—å°¼æ²»æ—¶é—´ 2038å¹´1æœˆ19æ—¥ å‡Œæ™¨ 03:14:07</td>
<td style="text-align: left;">YYYYMMDD HHMMSS</td>
<td style="text-align: left;">æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²ç±»å‹">å­—ç¬¦ä¸²ç±»å‹</h2>
<p>å­—ç¬¦ä¸²ç±»å‹æŒ‡CHARã€VARCHARã€BINARYã€VARBINARYã€BLOBã€TEXTã€ENUMå’ŒSETã€‚è¯¥èŠ‚æè¿°äº†è¿™äº›ç±»å‹å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ã€‚</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">ç±»å‹</th>
<th style="text-align: left;">å¤§å°</th>
<th style="text-align: left;">ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CHAR</td>
<td style="text-align: left;">0-255 bytes</td>
<td style="text-align: left;">å®šé•¿å­—ç¬¦ä¸²</td>
</tr>
<tr class="even">
<td style="text-align: left;">VARCHAR</td>
<td style="text-align: left;">0-65535 bytes</td>
<td style="text-align: left;">å˜é•¿å­—ç¬¦ä¸²</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TINYBLOB</td>
<td style="text-align: left;">0-255 bytes</td>
<td style="text-align: left;">ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td>
</tr>
<tr class="even">
<td style="text-align: left;">TINYTEXT</td>
<td style="text-align: left;">0-255 bytes</td>
<td style="text-align: left;">çŸ­æ–‡æœ¬å­—ç¬¦ä¸²</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BLOB</td>
<td style="text-align: left;">0-65 535 bytes</td>
<td style="text-align: left;">äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®</td>
</tr>
<tr class="even">
<td style="text-align: left;">TEXT</td>
<td style="text-align: left;">0-65 535 bytes</td>
<td style="text-align: left;">é•¿æ–‡æœ¬æ•°æ®</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MEDIUMBLOB</td>
<td style="text-align: left;">0-16 777 215 bytes</td>
<td style="text-align: left;">äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td>
</tr>
<tr class="even">
<td style="text-align: left;">MEDIUMTEXT</td>
<td style="text-align: left;">0-16 777 215 bytes</td>
<td style="text-align: left;">ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LONGBLOB</td>
<td style="text-align: left;">0-4 294 967 295 bytes</td>
<td style="text-align: left;">äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®</td>
</tr>
<tr class="even">
<td style="text-align: left;">LONGTEXT</td>
<td style="text-align: left;">0-4 294 967 295 bytes</td>
<td style="text-align: left;">æå¤§æ–‡æœ¬æ•°æ®</td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æ„</strong>ï¼šchar(n) å’Œ varchar(n) ä¸­æ‹¬å·ä¸­ n
ä»£è¡¨å­—ç¬¦çš„ä¸ªæ•°ï¼Œå¹¶ä¸ä»£è¡¨å­—èŠ‚ä¸ªæ•°ï¼Œæ¯”å¦‚ CHAR(30) å°±å¯ä»¥å­˜å‚¨ 30
ä¸ªå­—ç¬¦ã€‚</p>
<p>CHAR å’Œ VARCHAR
ç±»å‹ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¿å­˜å’Œæ£€ç´¢çš„æ–¹å¼ä¸åŒã€‚å®ƒä»¬çš„æœ€å¤§é•¿åº¦å’Œæ˜¯å¦å°¾éƒ¨ç©ºæ ¼è¢«ä¿ç•™ç­‰æ–¹é¢ä¹Ÿä¸åŒã€‚åœ¨å­˜å‚¨æˆ–æ£€ç´¢è¿‡ç¨‹ä¸­ä¸è¿›è¡Œå¤§å°å†™è½¬æ¢ã€‚</p>
<p>BINARY å’Œ VARBINARY ç±»ä¼¼äº CHAR å’Œ
VARCHARï¼Œä¸åŒçš„æ˜¯å®ƒä»¬åŒ…å«äºŒè¿›åˆ¶å­—ç¬¦ä¸²è€Œä¸è¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬åŒ…å«å­—èŠ‚å­—ç¬¦ä¸²è€Œä¸æ˜¯å­—ç¬¦å­—ç¬¦ä¸²ã€‚è¿™è¯´æ˜å®ƒä»¬æ²¡æœ‰å­—ç¬¦é›†ï¼Œå¹¶ä¸”æ’åºå’Œæ¯”è¾ƒåŸºäºåˆ—å€¼å­—èŠ‚çš„æ•°å€¼å€¼ã€‚</p>
<p>BLOB æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³å¯å˜æ•°é‡çš„æ•°æ®ã€‚æœ‰ 4 ç§ BLOB
ç±»å‹ï¼šTINYBLOBã€BLOBã€MEDIUMBLOB å’Œ
LONGBLOBã€‚å®ƒä»¬åŒºåˆ«åœ¨äºå¯å®¹çº³å­˜å‚¨èŒƒå›´ä¸åŒã€‚</p>
<p>æœ‰ 4 ç§ TEXT ç±»å‹ï¼šTINYTEXTã€TEXTã€MEDIUMTEXT å’Œ LONGTEXTã€‚å¯¹åº”çš„è¿™ 4
ç§ BLOB ç±»å‹ï¼Œå¯å­˜å‚¨çš„æœ€å¤§é•¿åº¦ä¸åŒï¼Œå¯æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚</p>
<h2 id="å­—æ®µå±æ€§">å­—æ®µå±æ€§</h2>
<table>
<thead>
<tr class="header">
<th>å­—æ®µå±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Unsignedï¼ˆæ— ç¬¦å·ï¼‰</td>
<td>å£°æ˜è¯¥åˆ—ä¸ä¸ºè´Ÿæ•°</td>
</tr>
<tr class="even">
<td>zerofillï¼ˆé›¶å¡«å……ï¼‰</td>
<td>é•¿åº¦ä¸å¤Ÿ 0 å¡«å……</td>
</tr>
<tr class="odd">
<td>AUTO_INCREMENTï¼ˆè‡ªå¢ï¼‰</td>
<td>ä¸»é”®è‡ªå¢</td>
</tr>
<tr class="even">
<td>not nullï¼ˆéç©ºï¼‰</td>
<td>ä¸ä¸ºç©º</td>
</tr>
<tr class="odd">
<td>defaultï¼ˆé»˜è®¤ï¼‰</td>
<td>è®¾ç½®é»˜è®¤å€¼</td>
</tr>
</tbody>
</table>
<h2 id="åˆ›å»ºæ•°æ®åº“è¡¨">åˆ›å»ºæ•°æ®åº“è¡¨</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">varchar</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ€§åˆ«&#x27;</span>,</span><br><span class="line">  `birthday` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å‡ºç”Ÿæ—¥æœŸ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE test	<span class="comment">-- æŸ¥çœ‹åˆ›å»ºæ•°æ®åº“ test è¯­å¥</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span>	<span class="comment">-- æŸ¥çœ‹åˆ›å»ºè¡¨ USER è¯­å¥</span></span><br><span class="line"><span class="keyword">desc</span> <span class="keyword">user</span>	<span class="comment">-- æŸ¥çœ‹ user è¡¨ç»“æ„</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®åº“è¡¨ç±»å‹">æ•°æ®åº“è¡¨ç±»å‹</h2>
<blockquote>
<p>å¼•æ“</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ENGINE<span class="operator">=</span>InnoDB</span><br></pre></td></tr></table></figure>
<p>InnoDB</p>
<p>MyISAM</p>
<blockquote>
<p>å­—ç¬¦é›†ç¼–ç </p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹åˆ é™¤è¡¨">ä¿®æ”¹åˆ é™¤è¡¨</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> æ—§è¡¨å rename <span class="keyword">as</span> æ–°è¡¨å	<span class="comment">-- ä¿®æ”¹è¡¨å </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">add</span> å­—æ®µå åˆ—å±æ€§	<span class="comment">-- æ·»åŠ æ–°å­—æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å modify å­—æ®µå åˆ—å±æ€§	<span class="comment">-- ä¿®æ”¹çº¦æŸ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å change æ—§å æ–°å åˆ—å±æ€§	<span class="comment">-- å­—æ®µé‡å‘½å</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">drop</span> å­—æ®µå	<span class="comment">-- åˆ é™¤å­—æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> è¡¨å</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)</a></li>
</ul>
]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLï¼ˆäºŒï¼‰</title>
    <url>/article/bd62c17f.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NJ411J79W">https://www.bilibili.com/video/BV1NJ411J79W</a></p>
<p><a
href="https://www.runoob.com/mysql/mysql-tutorial.html">https://www.runoob.com/mysql/mysql-tutorial.html</a></p>
<span id="more"></span>
<h1 id="mysql-æ•°æ®ç®¡ç†">MySQL æ•°æ®ç®¡ç†</h1>
<h2 id="å¤–é”®äº†è§£">å¤–é”®ï¼ˆäº†è§£ï¼‰</h2>
<p>ã€å¼ºåˆ¶ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚
è¯´æ˜ï¼šä»¥å­¦ç”Ÿå’Œæˆç»©çš„å…³ç³»ä¸ºä¾‹ï¼Œå­¦ç”Ÿè¡¨ä¸­çš„
student_idæ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„ student_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ç”Ÿè¡¨ä¸­çš„
student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„ student_id æ›´æ–°ï¼Œå³ä¸º
çº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äºå•æœºä½å¹¶å‘ï¼Œä¸é€‚åˆåˆ†å¸ƒå¼ã€é«˜å¹¶å‘é›†ç¾¤ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»
å¡ï¼Œå­˜åœ¨æ•°æ®åº“æ›´æ–°é£æš´çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„æ’å…¥é€Ÿåº¦ã€‚
â€”â€”é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ</p>
<h2 id="dmlæŒæ¡">DMLï¼ˆæŒæ¡ï¼‰</h2>
<blockquote>
<p>where</p>
</blockquote>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 69%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">æ“ä½œç¬¦</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">=</td>
<td
style="text-align: left;">ç­‰å·ï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰è¿”å›true</td>
<td style="text-align: left;">(A = B) è¿”å›falseã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">&lt;&gt;, !=</td>
<td
style="text-align: left;">ä¸ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰è¿”å›true</td>
<td style="text-align: left;">(A != B) è¿”å› trueã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&gt;</td>
<td style="text-align: left;">å¤§äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºå³è¾¹çš„å€¼,
å¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼è¿”å›true</td>
<td style="text-align: left;">(A &gt; B) è¿”å›falseã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">&lt;</td>
<td style="text-align: left;">å°äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºå³è¾¹çš„å€¼,
å¦‚æœå·¦è¾¹çš„å€¼å°äºå³è¾¹çš„å€¼è¿”å›true</td>
<td style="text-align: left;">(A &lt; B) è¿”å› trueã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&gt;=</td>
<td
style="text-align: left;">å¤§äºç­‰äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼,
å¦‚æœå·¦è¾¹çš„å€¼å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true</td>
<td style="text-align: left;">(A &gt;= B) è¿”å›falseã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">&lt;=</td>
<td
style="text-align: left;">å°äºç­‰äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºæˆ–ç­‰äºå³è¾¹çš„å€¼,
å¦‚æœå·¦è¾¹çš„å€¼å°äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true</td>
<td style="text-align: left;">(A &lt;= B) è¿”å› trueã€‚</td>
</tr>
</tbody>
</table>
<p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ MySQL æ•°æ®è¡¨ä¸­è¯»å–æŒ‡å®šçš„æ•°æ®ï¼ŒWHERE
å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
<p>ä½¿ç”¨ä¸»é”®æ¥ä½œä¸º WHERE å­å¥çš„æ¡ä»¶æŸ¥è¯¢æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚</p>
<p>å¦‚æœç»™å®šçš„æ¡ä»¶åœ¨è¡¨ä¸­æ²¡æœ‰ä»»ä½•åŒ¹é…çš„è®°å½•ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸ä¼šè¿”å›ä»»ä½•æ•°æ®ã€‚</p>
<h3 id="å¢åŠ ">å¢åŠ </h3>
<blockquote>
<p>insert</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name ( field1, field2,...fieldN )</span><br><span class="line"><span class="keyword">VALUES</span> ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹">ä¿®æ”¹</h3>
<blockquote>
<p>update</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> field1<span class="operator">=</span><span class="keyword">new</span><span class="operator">-</span>value1, field2<span class="operator">=</span><span class="keyword">new</span><span class="operator">-</span>value2</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤">åˆ é™¤</h3>
<blockquote>
<p>delete</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name [<span class="keyword">WHERE</span> Clause]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>truncate</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> table_name</span><br></pre></td></tr></table></figure>
<blockquote>
<p>delete ä¸ truncate çš„åŒºåˆ«</p>
</blockquote>
<ul>
<li>ç›¸åŒç‚¹ï¼šéƒ½èƒ½åˆ é™¤è¡¨æ•°æ®ï¼Œä¸å½±å“è¡¨ç»“æ„</li>
<li>ä¸åŒï¼š
<ul>
<li>TRUNCATE é‡æ–°è®¾ç½®è‡ªå¢ï¼ˆå½’é›¶ï¼‰</li>
<li>TRUNCATE ä¸å½±å“äº‹åŠ¡</li>
</ul></li>
</ul>
<h1 id="dql-æŸ¥è¯¢æ•°æ®">DQL æŸ¥è¯¢æ•°æ®</h1>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> [<span class="keyword">all</span> <span class="operator">|</span> <span class="keyword">distinct</span>] <span class="operator">&lt;</span>select_expr<span class="operator">&gt;</span>, <span class="operator">&lt;</span>select_expr<span class="operator">&gt;</span>, ...</span><br><span class="line"><span class="keyword">from</span> <span class="operator">&lt;</span>table_reference<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">where</span> <span class="operator">&lt;</span>where_condition<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">group</span> <span class="keyword">by</span> <span class="operator">&lt;</span>col_list<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">having</span> <span class="operator">&lt;</span>having_condition<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">order</span> <span class="keyword">by</span> <span class="operator">&lt;</span>order_condition<span class="operator">&gt;</span>]</span><br><span class="line">[distribute <span class="keyword">by</span> <span class="operator">&lt;</span>distribute_condition<span class="operator">&gt;</span> [sort <span class="keyword">by</span> <span class="operator">&lt;</span>sort_condition<span class="operator">&gt;</span>] ]</span><br><span class="line">[limit <span class="operator">&lt;</span>number<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure>
<h2 id="ç®€å•ç¤ºä¾‹">ç®€å•ç¤ºä¾‹</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users	<span class="comment">-- æŸ¥è¯¢å…¨éƒ¨è¡¨æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> user_name <span class="keyword">as</span> å§“å,user_password <span class="keyword">as</span> å¯†ç  <span class="keyword">from</span> users	<span class="comment">-- æŸ¥è¯¢æŒ‡å®šå­—æ®µ as å¯ä»¥å–åˆ«å</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> CONCAT(<span class="string">&#x27;å§“åï¼š&#x27;</span>,user_name) <span class="keyword">as</span> å§“å <span class="keyword">from</span> users	<span class="comment">-- å‡½æ•° CONCAT(&#x27;å§“åï¼š&#x27;,user_name)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> <span class="keyword">table</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> coutn(<span class="number">1</span>) <span class="keyword">from</span> <span class="keyword">table</span> </span><br></pre></td></tr></table></figure>
<blockquote>
<p>å»é‡</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> user_id <span class="keyword">from</span> news	<span class="comment">-- ä¾æ® user_id å»é‡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ•°æ®åº“çš„åˆ—</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> version()	<span class="comment">--æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span><span class="operator">*</span><span class="number">3</span><span class="number">-1</span> <span class="keyword">as</span> è®¡ç®—ç»“æœ	<span class="comment">-- è®¡ç®—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@auto</span>_increment_increment	<span class="comment">-- æŸ¥è¯¢è‡ªå¢æ­¥é•¿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> state<span class="operator">+</span><span class="number">1</span> <span class="keyword">from</span> news	<span class="comment">-- çŠ¶æ€ +1</span></span><br></pre></td></tr></table></figure>
<h2 id="é€»è¾‘è¿ç®—">é€»è¾‘è¿ç®—</h2>
<table>
<thead>
<tr class="header">
<th>é€»è¾‘è¿ç®—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>and &amp;&amp;</td>
<td>ä¸</td>
</tr>
<tr class="even">
<td>or ||</td>
<td>æˆ–</td>
</tr>
<tr class="odd">
<td>not !</td>
<td>é</td>
</tr>
</tbody>
</table>
<h2 id="æ¨¡ç³ŠæŸ¥è¯¢">æ¨¡ç³ŠæŸ¥è¯¢</h2>
<table>
<thead>
<tr class="header">
<th>è¿ç®—ç¬¦</th>
<th>è¯­æ³•</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>is null</td>
<td>a is null</td>
</tr>
<tr class="even">
<td>is not null</td>
<td>a is not null</td>
</tr>
<tr class="odd">
<td>between and</td>
<td>a between b and c</td>
</tr>
<tr class="even">
<td><strong>like</strong></td>
<td>a like b</td>
</tr>
<tr class="odd">
<td><strong>in</strong></td>
<td>a in (b,c,d...)</td>
</tr>
</tbody>
</table>
<p>likeï¼š</p>
<ul>
<li><p>%ï¼š0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</p></li>
<li><p>_ï¼š1ä¸ªå­—ç¬¦</p></li>
</ul>
<h2 id="è¿æ¥æŸ¥è¯¢join-on">è¿æ¥æŸ¥è¯¢ï¼ˆjoin onï¼‰</h2>
<p><img data-src="https://pic4.zhimg.com/80/v2-7dd2e77f2d94fb2752900b05ba7ae67b_720w.jpg" alt="è¿æ¥æŸ¥è¯¢" style="zoom: 67%;" /></p>
<table>
<thead>
<tr class="header">
<th>æ“ä½œ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>INNER JOIN</strong></td>
<td>å†…è¿æ¥,æˆ–ç­‰å€¼è¿æ¥ï¼Œè·å–ä¸¤ä¸ªè¡¨ä¸­å­—æ®µåŒ¹é…å…³ç³»çš„è®°å½•ã€‚</td>
</tr>
<tr class="even">
<td><strong>LEFT JOIN</strong></td>
<td>è·å–å·¦è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</td>
</tr>
<tr class="odd">
<td><strong>RIGHT JOIN</strong></td>
<td>è·å–å³è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</td>
</tr>
</tbody>
</table>
<p>ä¾‹ï¼š</p>
<p><strong>ç­‰å€¼è¿æ¥ï¼š</strong>æŸ¥æ‰¾ä¸¤ä¸ªè¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å­¦å·ã€å§“åã€ç±è´¯ã€å¹´é¾„ã€ä¸“ä¸šã€ç­çº§</span></span><br><span class="line"><span class="comment">--æ¶‰åŠåˆ°studentå’Œmajorä¸¤å¼ è¡¨ï¼Œç”¨å…±æœ‰å­—æ®µâ€œå­¦å·â€ä¸ºè¿æ¥å­—æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--å†™æ³•1ï¼šä½¿ç”¨INNER JOIN</span></span><br><span class="line"><span class="keyword">SELECT</span> A.å­¦å·, A.å§“å, A.ç±è´¯, A.å¹´é¾„, B.ä¸“ä¸š, B.ç­çº§</span><br><span class="line"><span class="keyword">FROM</span> student A</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> major B   </span><br><span class="line"><span class="keyword">ON</span>  A.å­¦å·<span class="operator">=</span>B.å­¦å·</span><br><span class="line"></span><br><span class="line"><span class="comment">--å†™æ³•2ï¼š--çœå»äº†INNERï¼Œç›´æ¥å†™JOINï¼Œä¸INNER JOINæ²¡æœ‰åŒºåˆ«</span></span><br><span class="line"><span class="keyword">SELECT</span> A.å­¦å·, A.å§“å, A.ç±è´¯, A.å¹´é¾„, B.ä¸“ä¸š, B.ç­çº§</span><br><span class="line"><span class="keyword">FROM</span> student A</span><br><span class="line"><span class="keyword">JOIN</span> major B  </span><br><span class="line"><span class="keyword">ON</span>  A.å­¦å·<span class="operator">=</span>B.å­¦å·</span><br><span class="line"></span><br><span class="line"><span class="comment">--å†™æ³•3ï¼š --ä½¿ç”¨WHEREï¼Œå·²ç»é€æ¸è¢«æ·˜æ±°</span></span><br><span class="line"><span class="keyword">SELECT</span> A.å­¦å·, A.å§“å, A.ç±è´¯, A.å¹´é¾„, B.ä¸“ä¸š, B.ç­çº§</span><br><span class="line"><span class="keyword">FROM</span> student A, major B</span><br><span class="line"><span class="keyword">WHERE</span> A.å­¦å·<span class="operator">=</span>B.å­¦å· </span><br><span class="line"></span><br><span class="line"><span class="comment">--ä¸Šé¢ä¸‰ç§å†™æ³•çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ¨èä½¿ç”¨å†™æ³•2</span></span><br></pre></td></tr></table></figure>
<p><strong>è‡ªèº«è¿æ¥ï¼š</strong>å°±æ˜¯å’Œè‡ªå·±è¿›è¡Œè¿æ¥æŸ¥è¯¢ï¼Œç»™ä¸€å¼ è¡¨å–ä¸¤ä¸ªä¸åŒçš„åˆ«åï¼Œç„¶åé™„ä¸Šè¿æ¥æ¡ä»¶ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--è¦åœ¨å­¦ç”Ÿè¡¨é‡ŒæŸ¥è¯¢ä¸ HH åŒé¾„ä¸”ç±è´¯ä¹Ÿç›¸åŒçš„å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> B.å­¦å·, B.å§“å, B.æ€§åˆ«, B.ç±è´¯, B.å¹´é¾„</span><br><span class="line"><span class="keyword">FROM</span> student A </span><br><span class="line"><span class="keyword">JOIN</span> student B</span><br><span class="line"><span class="keyword">ON</span> A.å¹´é¾„<span class="operator">=</span>B.å¹´é¾„ <span class="keyword">AND</span> A.ç±è´¯<span class="operator">=</span>B.ç±è´¯ <span class="keyword">AND</span> A.å§“å<span class="operator">=</span><span class="string">&#x27;HH&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a
href="https://zhuanlan.zhihu.com/p/68136613">https://zhuanlan.zhihu.com/p/68136613</a></p>
<h2 id="å­æŸ¥è¯¢åµŒå¥—æŸ¥è¯¢">å­æŸ¥è¯¢ã€åµŒå¥—æŸ¥è¯¢</h2>
<ul>
<li>æ ¼å¼1</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">&lt;</span>select_expr<span class="operator">&gt;</span> <span class="keyword">from</span> (<span class="operator">&lt;</span>select_statement<span class="operator">&gt;</span>) <span class="operator">&lt;</span>sq_alias_name<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ ¼å¼2</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> (<span class="operator">&lt;</span>select_statement<span class="operator">&gt;</span>) <span class="keyword">from</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜</p>
<ul>
<li><strong>select_expr</strong>ï¼šå¿…å¡«ã€‚æ ¼å¼ä¸º<code>col1_name, col2_name, æ­£åˆ™è¡¨è¾¾å¼,...</code>ï¼Œè¡¨ç¤ºå¾…æŸ¥è¯¢çš„æ™®é€šåˆ—ã€åˆ†åŒºåˆ—æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚</li>
<li><strong>select_statement</strong>å¿…å¡«ã€‚å­æŸ¥è¯¢è¯­å¥ã€‚å¦‚æœå­æŸ¥è¯¢è¯­å¥ä¸ºæ ¼å¼2ï¼Œå­æŸ¥è¯¢ç»“æœå¿…é¡»åªæœ‰ä¸€è¡Œã€‚æ ¼å¼è¯·å‚è§<a
href="https://help.aliyun.com/document_detail/73777.html">SELECTè¯­æ³•</a>ã€‚</li>
<li><strong>sq_alias_name</strong>ï¼šå¿…å¡«ã€‚å­æŸ¥è¯¢çš„åˆ«åã€‚</li>
<li><strong>table_name</strong>ï¼šå¿…å¡«ã€‚ç›®æ ‡è¡¨åç§°ã€‚</li>
</ul>
<h2 id="åˆ†ç»„">åˆ†ç»„</h2>
<blockquote>
<p>[group by å­å¥ ]ï¼šåˆ†ç»„å­å¥ï¼Œgroup
byå­å¥ä¸»è¦çš„ä½œç”¨æ˜¯åˆ†ç»„ï¼Œä»è€Œè¿›è¡Œç»Ÿè®¡æ“ä½œï¼Œè€Œä¸æ˜¯ä¸ºäº†å±•ç¤ºï¼ˆå±•ç¤ºçš„æ—¶å€™ï¼Œåªä¼šå±•ç¤ºåˆ†ç»„è®°å½•çš„ç¬¬ä¸€æ¡è®°å½•ï¼‰ï¼Œåˆ†ç»„æ—¶ï¼Œä¸€èˆ¬ä¼šç»“åˆä½¿ç”¨countï¼ˆï¼‰ã€maxï¼ˆï¼‰ã€minï¼ˆï¼‰ã€avgï¼ˆï¼‰ã€sumï¼ˆï¼‰å‡½æ•°ã€‚</p>
</blockquote>
<p><strong>ä¾‹ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> c_id,sex,<span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">max</span>(height),<span class="built_in">min</span>(height),<span class="built_in">avg</span>(height),<span class="built_in">sum</span>(age),GROUP_CONCAT(name) <span class="keyword">from</span> my_student <span class="keyword">group</span> <span class="keyword">by</span> c_id ,sex;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[having
å­å¥]ï¼šhavingçš„ä½œç”¨ç±»åŒwhereï¼Œè€Œä¸”havingèƒ½åšå‡ ä¹æ‰€æœ‰whereèƒ½åšçš„äº‹æƒ…ï¼Œè€Œwhereå´ä¸èƒ½åšhavingèƒ½åšçš„å¾ˆå¤šäº‹æƒ…ï¼Œä¸»è¦æ˜¯å› ä¸º</p>
<p>whereåªèƒ½åœ¨ç£ç›˜æå–æ•°æ®çš„æ—¶å€™å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼›è€Œåœ¨å†…å­˜ä¸­å¯¹æ•°æ®è¿›è¡Œgroup
byåˆ†ç»„ä¹‹åçš„ç»“æœè¿›è¡Œå¤„ç†ï¼Œåªèƒ½é€šè¿‡havingã€‚</p>
</blockquote>
<p><strong>ä¾‹ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> c_id,<span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">max</span>(height),<span class="built_in">min</span>(height),<span class="built_in">avg</span>(height),<span class="built_in">sum</span>(age) <span class="keyword">from</span> my_student <span class="keyword">group</span> <span class="keyword">by</span> c_id <span class="keyword">having</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æ’åº">æ’åº</h2>
<ul>
<li><p>å‡åº ASC</p></li>
<li><p>é™åºï¼šDESC</p></li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> order_experssion[<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>]</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œorder_experssionè¡¨ç¤ºç”¨äºæ’åºçš„åˆ—æˆ–åˆ—ååŠè¡¨è¾¾å¼ã€‚å½“æœ‰å¤šä¸ªæ’åºåˆ—æ—¶ï¼Œæ¯ä¸ªæ’åºäº†åˆ—ç”¨é€—å·éš”å¼€ï¼Œè€Œä¸”åˆ—åéƒ½å¯ä»¥è·Ÿä¸€ä¸ªæ’åºè¦æ±‚ã€‚</p>
<h2 id="åˆ†é¡µ">åˆ†é¡µ</h2>
<blockquote>
<p>ä¸€èˆ¬çš„åˆ†é¡µæŸ¥è¯¢</p>
</blockquote>
<p>ä¸€èˆ¬çš„åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨ç®€å•çš„ limit å­å¥å°±å¯ä»¥å®ç°ã€‚limit
å­å¥å£°æ˜å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT [<span class="keyword">offset</span>,] <span class="keyword">rows</span> <span class="operator">|</span> <span class="keyword">rows</span> <span class="keyword">OFFSET</span> <span class="keyword">offset</span></span><br></pre></td></tr></table></figure>
<p>LIMIT å­å¥å¯ä»¥è¢«ç”¨äºæŒ‡å®š SELECT
è¯­å¥è¿”å›çš„è®°å½•æ•°ã€‚éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç¬¬ä¸€ä¸ªè¿”å›è®°å½•è¡Œçš„åç§»é‡ï¼Œæ³¨æ„ä»<code>0</code>å¼€å§‹</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šè¿”å›è®°å½•è¡Œçš„æœ€å¤§æ•°ç›®</li>
<li>å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼šå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ä¸º -1
è¡¨ç¤ºæ£€ç´¢ä»æŸä¸€ä¸ªåç§»é‡åˆ°è®°å½•é›†çš„ç»“æŸæ‰€æœ‰çš„è®°å½•è¡Œ</li>
<li>åˆå§‹è®°å½•è¡Œçš„åç§»é‡æ˜¯ 0(è€Œä¸æ˜¯ 1)</li>
</ul>
<p><strong>ä¾‹ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> news limit <span class="number">0</span>,<span class="number">5</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å­æŸ¥è¯¢ä¼˜åŒ–</p>
</blockquote>
<h2 id="å‚è€ƒ-1">å‚è€ƒ</h2>
<p><a href="http://uusama.com/458.html">åˆ†é¡µä¼˜åŒ–å‚è€ƒ</a></p>
<p><a
href="https://blog.csdn.net/u011991249/article/details/64519945?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.baidujs&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-4.baidujs">selectå‚è€ƒ</a></p>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)</a></li>
</ul>
]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLï¼ˆä¸‰ï¼‰</title>
    <url>/article/f07c622d.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NJ411J79W">https://www.bilibili.com/video/BV1NJ411J79W</a></p>
<p><a
href="https://www.runoob.com/mysql/mysql-tutorial.html">https://www.runoob.com/mysql/mysql-tutorial.html</a></p>
<span id="more"></span>
<h1 id="mysql-å‡½æ•°">MySQL å‡½æ•°</h1>
<h2 id="å­—ç¬¦ä¸²å‡½æ•°">å­—ç¬¦ä¸²å‡½æ•°</h2>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 41%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">å‡½æ•°</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CHAR_LENGTH(s)</td>
<td style="text-align: left;">è¿”å›å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°</td>
<td style="text-align: left;">è¿”å›å­—ç¬¦ä¸² RUNOOB
çš„å­—ç¬¦æ•°<code>SELECT CHAR_LENGTH("RUNOOB") AS LengthOfString;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">CONCAT(s1,s2...sn)</td>
<td style="text-align: left;">å­—ç¬¦ä¸² s1,s2
ç­‰å¤šä¸ªå­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</td>
<td
style="text-align: left;">åˆå¹¶å¤šä¸ªå­—ç¬¦ä¸²<code>SELECT CONCAT("SQL ", "Runoob ", "Gooogle ", "Facebook") AS ConcatenatedString;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">CONCAT_WS(x, s1,s2...sn)</td>
<td style="text-align: left;">åŒ CONCAT(s1,s2,...)
å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¦åŠ ä¸Š xï¼Œx å¯ä»¥æ˜¯åˆ†éš”ç¬¦</td>
<td
style="text-align: left;">åˆå¹¶å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶æ·»åŠ åˆ†éš”ç¬¦ï¼š<code>SELECT CONCAT_WS("-", "SQL", "Tutorial", "is", "fun!")AS ConcatenatedString;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">FORMAT(x,n)</td>
<td style="text-align: left;">å‡½æ•°å¯ä»¥å°†æ•°å­— x è¿›è¡Œæ ¼å¼åŒ– "#,##.##", å°†
x ä¿ç•™åˆ°å°æ•°ç‚¹å n ä½ï¼Œæœ€åä¸€ä½å››èˆäº”å…¥ã€‚</td>
<td style="text-align: left;">æ ¼å¼åŒ–æ•°å­— "#,##.##"
å½¢å¼ï¼š<code>SELECT FORMAT(250500.5634, 2);     -- è¾“å‡º 250,500.56</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">INSERT(s1,x,len,s2)</td>
<td style="text-align: left;">å­—ç¬¦ä¸² s2 æ›¿æ¢ s1 çš„ x ä½ç½®å¼€å§‹é•¿åº¦ä¸º len
çš„å­—ç¬¦ä¸²</td>
<td style="text-align: left;">ä»å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹çš„ 6 ä¸ªå­—ç¬¦æ›¿æ¢ä¸º
runoobï¼š<code>SELECT INSERT("google.com", 1, 6, "runoob");  -- è¾“å‡ºï¼šrunoob.com</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">LEFT(s,n)</td>
<td style="text-align: left;">è¿”å›å­—ç¬¦ä¸² s çš„å‰ n ä¸ªå­—ç¬¦</td>
<td style="text-align: left;">è¿”å›å­—ç¬¦ä¸² runoob
ä¸­çš„å‰ä¸¤ä¸ªå­—ç¬¦ï¼š<code>SELECT LEFT('runoob',2) -- ru</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">LOWER(s)</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯</td>
<td style="text-align: left;">å­—ç¬¦ä¸² RUNOOB
è½¬æ¢ä¸ºå°å†™ï¼š<code>SELECT LOWER('RUNOOB') -- runoob</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">LTRIM(s)</td>
<td style="text-align: left;">å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å¤„çš„ç©ºæ ¼</td>
<td style="text-align: left;">å»æ‰å­—ç¬¦ä¸²
RUNOOBå¼€å§‹å¤„çš„ç©ºæ ¼ï¼š<code>SELECT LTRIM("    RUNOOB") AS LeftTrimmedString;-- RUNOOB</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">REPLACE(s,s1,s2)</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸² s2 æ›¿ä»£å­—ç¬¦ä¸² s ä¸­çš„å­—ç¬¦ä¸²
s1</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸² abc ä¸­çš„å­—ç¬¦ a æ›¿æ¢ä¸ºå­—ç¬¦
xï¼š<code>SELECT REPLACE('abc','a','x') --xbc</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">REVERSE(s)</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸²sçš„é¡ºåºåè¿‡æ¥</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸² abc
çš„é¡ºåºåè¿‡æ¥ï¼š<code>SELECT REVERSE('abc') -- cba</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">RIGHT(s,n)</td>
<td style="text-align: left;">è¿”å›å­—ç¬¦ä¸² s çš„å n ä¸ªå­—ç¬¦</td>
<td style="text-align: left;">è¿”å›å­—ç¬¦ä¸² runoob
çš„åä¸¤ä¸ªå­—ç¬¦ï¼š<code>SELECT RIGHT('runoob',2) -- ob</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">RTRIM(s)</td>
<td style="text-align: left;">å»æ‰å­—ç¬¦ä¸² s ç»“å°¾å¤„çš„ç©ºæ ¼</td>
<td style="text-align: left;">å»æ‰å­—ç¬¦ä¸² RUNOOB
çš„æœ«å°¾ç©ºæ ¼ï¼š<code>SELECT RTRIM("RUNOOB     ") AS RightTrimmedString;   -- RUNOOB</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">STRCMP(s1,s2)</td>
<td style="text-align: left;">æ¯”è¾ƒå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œå¦‚æœ s1 ä¸ s2
ç›¸ç­‰è¿”å› 0 ï¼Œå¦‚æœ s1&gt;s2 è¿”å› 1ï¼Œå¦‚æœ s1&lt;s2 è¿”å› -1</td>
<td
style="text-align: left;">æ¯”è¾ƒå­—ç¬¦ä¸²ï¼š<code>SELECT STRCMP("runoob", "runoob");  -- 0</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">SUBSTR(s, start, length)</td>
<td style="text-align: left;">ä»å­—ç¬¦ä¸² s çš„ start ä½ç½®æˆªå–é•¿åº¦ä¸º length
çš„å­å­—ç¬¦ä¸²</td>
<td style="text-align: left;">ä»å­—ç¬¦ä¸² RUNOOB ä¸­çš„ç¬¬ 2 ä¸ªä½ç½®æˆªå– 3ä¸ª
å­—ç¬¦ï¼š<code>SELECT SUBSTR("RUNOOB", 2, 3) AS ExtractString; -- UNO</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPPER(s)</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td>
<td style="text-align: left;">å°†å­—ç¬¦ä¸² runoob
è½¬æ¢ä¸ºå¤§å†™ï¼š<code>SELECT UPPER("runoob"); -- RUNOOB</code></td>
</tr>
</tbody>
</table>
<h2 id="æ•°å­—å‡½æ•°">æ•°å­—å‡½æ•°</h2>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 41%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">å‡½æ•°å</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SUM(expression)</td>
<td style="text-align: left;">è¿”å›æŒ‡å®šå­—æ®µçš„æ€»å’Œ</td>
<td style="text-align: left;">è®¡ç®— OrderDetails è¡¨ä¸­å­—æ®µ Quantity
çš„æ€»å’Œï¼š<code>SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">ABS(x)</td>
<td style="text-align: left;">è¿”å› x çš„ç»å¯¹å€¼</td>
<td style="text-align: left;">è¿”å› -1
çš„ç»å¯¹å€¼ï¼š<code>SELECT ABS(-1) -- è¿”å›1</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">AVG(expression)</td>
<td style="text-align: left;">è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼çš„å¹³å‡å€¼ï¼Œexpression
æ˜¯ä¸€ä¸ªå­—æ®µ</td>
<td style="text-align: left;">è¿”å› Products è¡¨ä¸­Price
å­—æ®µçš„å¹³å‡å€¼ï¼š<code>SELECT AVG(Price) AS AveragePrice FROM Products;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">CEIL(x)</td>
<td style="text-align: left;">è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•°</td>
<td
style="text-align: left;"><code>SELECT CEIL(1.5) -- è¿”å›2</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">COUNT(expression)</td>
<td style="text-align: left;">è¿”å›æŸ¥è¯¢çš„è®°å½•æ€»æ•°ï¼Œexpression
å‚æ•°æ˜¯ä¸€ä¸ªå­—æ®µæˆ–è€… * å·</td>
<td style="text-align: left;">è¿”å› Products è¡¨ä¸­ products
å­—æ®µæ€»å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼š<code>SELECT COUNT(ProductID) AS NumberOfProducts FROM Products;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">FLOOR(x)</td>
<td style="text-align: left;">è¿”å›å°äºæˆ–ç­‰äº x çš„æœ€å¤§æ•´æ•°</td>
<td style="text-align: left;">å°äºæˆ–ç­‰äº 1.5
çš„æ•´æ•°ï¼š<code>SELECT FLOOR(1.5) -- è¿”å›1</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">MAX(expression)</td>
<td style="text-align: left;">è¿”å›å­—æ®µ expression ä¸­çš„æœ€å¤§å€¼</td>
<td style="text-align: left;">è¿”å›æ•°æ®è¡¨ Products ä¸­å­—æ®µ Price
çš„æœ€å¤§å€¼ï¼š<code>SELECT MAX(Price) AS LargestPrice FROM Products;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">MIN(expression)</td>
<td style="text-align: left;">è¿”å›å­—æ®µ expression ä¸­çš„æœ€å°å€¼</td>
<td style="text-align: left;">è¿”å›æ•°æ®è¡¨ Products ä¸­å­—æ®µ Price
çš„æœ€å°å€¼ï¼š<code>SELECT MIN(Price) AS MinPrice FROM Products;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">RAND()</td>
<td style="text-align: left;">è¿”å› 0 åˆ° 1 çš„éšæœºæ•°</td>
<td
style="text-align: left;"><code>SELECT RAND() --0.93099315644334</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">ROUND(x)</td>
<td style="text-align: left;">è¿”å›ç¦» x æœ€è¿‘çš„æ•´æ•°</td>
<td
style="text-align: left;"><code>SELECT ROUND(1.23456) --1</code></td>
</tr>
</tbody>
</table>
<h2 id="æ—¥æœŸå‡½æ•°">æ—¥æœŸå‡½æ•°</h2>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 20%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">å‡½æ•°å</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CURRENT_DATE()</td>
<td style="text-align: left;">è¿”å›å½“å‰æ—¥æœŸ</td>
<td
style="text-align: left;"><code>SELECT CURRENT_DATE(); -&gt; 2018-09-19</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">CURRENT_TIME</td>
<td style="text-align: left;">è¿”å›å½“å‰æ—¶é—´</td>
<td
style="text-align: left;"><code>SELECT CURRENT_TIME(); -&gt; 19:59:02</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">CURRENT_TIMESTAMP()</td>
<td style="text-align: left;">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td>
<td
style="text-align: left;"><code>SELECT CURRENT_TIMESTAMP() -&gt; 2018-09-19 20:57:43</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">NOW()</td>
<td style="text-align: left;">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td>
<td
style="text-align: left;"><code>SELECT NOW() -&gt; 2018-09-19 20:57:43</code></td>
</tr>
</tbody>
</table>
<h2 id="æ›´å¤š"><a
href="https://www.runoob.com/mysql/mysql-functions.html">æ›´å¤š</a></h2>
<h1 id="äº‹åŠ¡">äº‹åŠ¡</h1>
<p>MySQL äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚</p>
<ul>
<li>åœ¨ MySQL ä¸­åªæœ‰ä½¿ç”¨äº† Innodb æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚</li>
<li>äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ SQL
è¯­å¥è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</li>
<li>äº‹åŠ¡ç”¨æ¥ç®¡ç† insert,update,delete è¯­å¥</li>
</ul>
<blockquote>
<p>ACID åŸåˆ™</p>
</blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡æ˜¯å¿…é¡»æ»¡è¶³4ä¸ªæ¡ä»¶ï¼ˆACIDï¼‰ï¼šï¼šåŸå­æ€§ï¼ˆ<strong>A</strong>tomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆ<strong>C</strong>onsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆ<strong>I</strong>solationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆ<strong>D</strong>urabilityï¼‰ã€‚</p>
<ul>
<li><strong>åŸå­æ€§ï¼š</strong>ä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</li>
<li><strong>ä¸€è‡´æ€§ï¼š</strong>åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</li>
<li><strong>éš”ç¦»æ€§ï¼š</strong>æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead
uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable
readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</li>
<li><strong>æŒä¹…æ€§ï¼š</strong>äº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li>
</ul>
<blockquote>
<p>éš”ç¦»æ‰€å¯¼è‡´çš„ä¸€äº›é—®é¢˜</p>
</blockquote>
<p><strong>è„è¯»ï¼š</strong></p>
<p>å½“å‰äº‹åŠ¡(A)ä¸­å¯ä»¥è¯»åˆ°å…¶ä»–äº‹åŠ¡(B)æœªæäº¤çš„æ•°æ®ï¼ˆè„æ•°æ®ï¼‰ï¼Œè¿™ç§ç°è±¡æ˜¯è„è¯»ã€‚</p>
<p><strong>ä¸å¯é‡å¤è¯»ï¼š</strong></p>
<p>åœ¨äº‹åŠ¡Aä¸­å…ˆåä¸¤æ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®ï¼Œä¸¤æ¬¡è¯»å–çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚</p>
<p><strong>è™šè¯»ï¼ˆå¹»è¯»ï¼‰ï¼š</strong></p>
<p>åœ¨äº‹åŠ¡Aä¸­æŒ‰ç…§æŸä¸ªæ¡ä»¶å…ˆåä¸¤æ¬¡æŸ¥è¯¢æ•°æ®åº“ï¼Œä¸¤æ¬¡æŸ¥è¯¢ç»“æœçš„æ¡æ•°ä¸åŒï¼Œè¿™ç§ç°è±¡ç§°ä¸ºå¹»è¯»ã€‚</p>
<blockquote>
<p>åœ¨ MySQL å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ SQL
è¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ COMMIT æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡åŠ¡é¡»ä½¿ç”¨å‘½ä»¤
BEGIN æˆ– START TRANSACTIONï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ SET
AUTOCOMMIT=0ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚</p>
</blockquote>
<h2 id="äº‹åŠ¡æ§åˆ¶è¯­å¥">äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š</h2>
<ul>
<li>BEGIN æˆ– START TRANSACTION æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li>
<li>COMMIT ä¹Ÿå¯ä»¥ä½¿ç”¨ COMMIT WORKï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚COMMIT
ä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„ï¼›</li>
<li>ROLLBACK ä¹Ÿå¯ä»¥ä½¿ç”¨ ROLLBACK
WORKï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚å›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼›</li>
<li>SAVEPOINT identifierï¼ŒSAVEPOINT
å…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ª SAVEPOINTï¼›</li>
<li>RELEASE SAVEPOINT identifier
åˆ é™¤ä¸€ä¸ªäº‹åŠ¡çš„ä¿å­˜ç‚¹ï¼Œå½“æ²¡æœ‰æŒ‡å®šçš„ä¿å­˜ç‚¹æ—¶ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼›</li>
<li>ROLLBACK TO identifier æŠŠäº‹åŠ¡å›æ»šåˆ°æ ‡è®°ç‚¹ï¼›</li>
<li>SET TRANSACTION ç”¨æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚InnoDB
å­˜å‚¨å¼•æ“æä¾›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰READ UNCOMMITTEDã€READ COMMITTEDã€REPEATABLE
READ å’Œ SERIALIZABLEã€‚</li>
</ul>
<h2 id="mysql-äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•">MYSQL
äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</h2>
<p>1ã€ç”¨ BEGIN, ROLLBACK, COMMITæ¥å®ç°</p>
<ul>
<li><strong>BEGIN</strong> å¼€å§‹ä¸€ä¸ªäº‹åŠ¡</li>
<li><strong>ROLLBACK</strong> äº‹åŠ¡å›æ»š</li>
<li><strong>COMMIT</strong> äº‹åŠ¡ç¡®è®¤</li>
</ul>
<p>2ã€ç›´æ¥ç”¨ SET æ¥æ”¹å˜ MySQL çš„è‡ªåŠ¨æäº¤æ¨¡å¼:</p>
<ul>
<li><strong>SET AUTOCOMMIT=0</strong> ç¦æ­¢è‡ªåŠ¨æäº¤</li>
<li><strong>SET AUTOCOMMIT=1</strong> å¼€å¯è‡ªåŠ¨æäº¤</li>
</ul>
<p><strong>ä¾‹ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ¨¡æ‹Ÿè½¬è´¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `account`(</span><br><span class="line">	`id` <span class="type">int</span>(<span class="number">3</span>) <span class="keyword">not</span> <span class="keyword">null</span> AUTO_INCREMENT,</span><br><span class="line">	`name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	`money` <span class="type">decimal</span>(<span class="number">9</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	<span class="keyword">primary</span> key(`id`)</span><br><span class="line">)engine<span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> account (`name`,`money`)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;a&#x27;</span>,<span class="number">2000.00</span>),(<span class="string">&#x27;b&#x27;</span>,<span class="number">10000.00</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> AUTOCOMMIT <span class="operator">=</span> <span class="number">0</span>;	<span class="comment">-- å…³é—­è‡ªåŠ¨æäº¤</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money<span class="operator">=</span>money<span class="number">-500</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money<span class="operator">=</span>money<span class="operator">+</span><span class="number">500</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> AUTOCOMMIT <span class="operator">=</span> <span class="number">1</span>;	<span class="comment">-- å¼€å¯è‡ªåŠ¨æäº¤</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)</a></li>
</ul>
]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavené¡¹ç›®çš„å°é—®é¢˜</title>
    <url>/article/93353eaf.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æˆ‘çš„ç§‹æ‹›åŸºæœ¬ç»“æŸäº†ï¼Œæœ€å¿™ç¢Œçš„æ—¶é—´æ®µæ˜¯8ã€9æœˆï¼Œ10æœˆåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆç¬”è¯•/é¢è¯•äº†ï¼Œæˆ–æ˜¯è‡ªå·±çœŸçš„ç´¯äº†ï¼Œä¸æƒ³å†ç»§ç»­ç§‹æ‹›äº†ï¼Œæƒ³èººäº†ï¼Œä¸€äº›ç¡®å®æ˜¯è‡ªå·±ä¸»åŠ¨ç»“æŸæµç¨‹çš„</p>
<p>å› ä¸ºæœ‰äº†ç§‹æ‹›çš„ç»å†ï¼Œç°åœ¨æ›´åŠ äº†è§£è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œæ˜ç™½è‡ªå·±éœ€è¦è¡¥å……å“ªäº›å†…å®¹ï¼Œå› ä¸ºç§‹æ‹›å®åœ¨æ˜¯å¾ˆç…ç†¬ï¼Œä¸€ä¸‹å­ä»é‚£æ ·çš„çŠ¶æ€è½¬æ¢è¿‡æ¥ï¼Œç¡®å®å¾ˆä¸é€‚ï¼Œå¾ˆç©ºè™šã€‚</p>
<p>æ‰€æœ‰å¶å°”ä¼šèŠ±äº›æ—¶é—´ç»§ç»­ä¹‹å‰çš„å­¦ä¹ ï¼Œæ¯”å¦‚æˆ‘è¦è¯´çš„<a
href="https://www.bilibili.com/video/BV1np4y1C7Yf">è°·ç²’å•†åŸ</a>ï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹å›°æ‰°äº†æˆ‘å¥½ä¹…çš„ä¸€ä¸ªé—®é¢˜</p>
<span id="more"></span>
<h1 id="è¯´æ˜">è¯´æ˜</h1>
<p>å…³äºé¡¹ç›®ä¸‹é¢æœ‰ä¸¤ä¸ªé“¾æ¥å¯ä»¥äº†è§£ä¸€ä¸‹</p>
<p>Bç«™ï¼šhttps://www.bilibili.com/video/BV1np4y1C7Yf</p>
<p>ç¬”è®°ï¼šhttps://www.yuque.com/zhangshuaiyin/guli-mall/wrbzgy</p>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>æˆ‘é‡åˆ°é—®é¢˜æ˜¯<code>p125</code>çš„<code>SpringBoot</code>æ•´åˆ<code>ElasticSearch</code>å‡ºç°çš„å­é¡¹ç›®<code>&lt;properties&gt;</code>æ ‡ç­¾æŒ‡å®šç‰ˆæœ¬ä¸ç”Ÿæ•ˆé—®é¢˜ã€‚</p>
<p>éœ€è¦å¼•å…¥çš„æ˜¯<code>elasticsearch-rest-high-level-client</code>ï¼Œç‰ˆæœ¬æ ¹æ®è‡ªå·±çš„<code>ES</code>å®š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.11.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç›´æ¥å¼•å…¥å‡ºç°çš„é—®é¢˜æ˜¯<code>SpringBoot</code>è‡ªå¸¦çš„<code>ES</code>ç»„ä»¶ç‰ˆæœ¬ä¸æˆ‘ä»¬éœ€è¦çš„ä¸åŒï¼Œä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ï¼ˆå¦‚ä¸‹å›¾æ˜¯æˆ‘ä»¬æœŸæœ›çš„ç»“æœï¼Œä½†ä¹‹å‰å´æ˜¯çº¢æ¡†ä¸­æ˜¯<code>SpringBoot</code>è‡ªå¸¦çš„ESç‰ˆæœ¬ï¼‰ï¼Œåœ¨ä½¿ç”¨ä¸€äº›apiä¼šæœ‰é—®é¢˜</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1t7w1sncjbsw.png"
alt="Mavenä¾èµ–ç‰ˆæœ¬å£°æ˜" />
<figcaption aria-hidden="true">Mavenä¾èµ–ç‰ˆæœ¬å£°æ˜</figcaption>
</figure>
<p>æŒ‰ç…§è§†é¢‘é‡Œçš„åšæ³•æ˜¯é…ç½®<code>&lt;properties&gt;</code>æ ‡ç­¾ï¼ŒåŠ ä¸Š<code>ES</code>ç‰ˆæœ¬</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.27gzi460dpz4.png" alt="Mavenä¾èµ–æŸ¥çœ‹" style="zoom:67%;" /></p>
<p>åœ¨æˆ‘ä½¿ç”¨çš„<code>SpringBoot</code>ä¸­æ‰¾åˆ°<code>ES</code>ç‰ˆæœ¬é…ç½®ï¼Œæ ¹æ®å°±è¿‘åŸåˆ™ï¼Œæˆ‘ä»¬åªéœ€åœ¨é¡¹ç›®ä¸­åšå¦‚ä¸‹é…ç½®å³å¯ï¼ˆè¿™ä¹Ÿæ˜¯è§†é¢‘ä¸­çš„æ–¹æ³•ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">elasticsearch.version</span>&gt;</span>7.11.1<span class="tag">&lt;/<span class="name">elasticsearch.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å´æ²¡æœ‰æˆ‘æœŸå¾…çš„ç»“æœï¼Œè¯•äº†å¾ˆå¤šæ¬¡ï¼Œæ€ä¹ˆéƒ½ä¸å¯¹ï¼Œè™½ç„¶å¯ä»¥æš´åŠ›å¼•å…¥å¯¹åº”åŒ…è§£å†³ï¼ˆä¹Ÿå°±æ˜¯åŠ å…¥å¦‚ä¸‹ä»£ç ï¼‰ï¼Œä½†ä¸è§‰å¾—é‚£æ˜¯æœ€å¥½çš„æ–¹æ¡ˆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;elasticsearch.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;elasticsearch.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å“ªé‡Œå‡ºäº†é—®é¢˜">å“ªé‡Œå‡ºäº†é—®é¢˜</h1>
<p>å°±è¿‘åŸåˆ™ä¸å¯¹ï¼ŸIDEAæœ‰bugï¼Ÿ</p>
<p>å„ç§æƒ³æ³•éƒ½å‡ºç°äº†ï¼Œä½†å§‹ç»ˆæ— æ³•è§£å†³</p>
<p>è¿™æ—¶æƒ³åˆ°æˆ‘è™½ç„¶æ˜¯ç…§ç€è§†é¢‘å­¦ä¹ çš„ï¼Œä»£ç éƒ½æ˜¯è‡ªå·±æ•²çš„ï¼Œä½†è‡ªå·±ä¹Ÿå¹¶éæ˜¯ä¸€æˆä¸å˜çš„ï¼Œæ¯”å¦‚æ•´ä¸ªé¡¹ç›®æ¶æ„ï¼Œå› ä¸ºè‡ªå·±æœ‰ä¸€å®šåŸºç¡€ï¼Œæˆ‘ä¼šå¯¹çˆ¶å­é¡¹ç›®è¿›è¡Œå°é‡æ„ï¼Œä¼šé€šè¿‡çˆ¶é¡¹ç›®ç®¡ç†ä¸€äº›å…¬å…±çš„ç‰ˆæœ¬ä¾èµ–ç­‰</p>
<p>æ‰€ä»¥æˆ‘æ‹¿äº†ä¸€ä¸ªæ–°é¡¹ç›®åšå®éªŒï¼Œå®Œå…¨æŒ‰ç…§è§†é¢‘é‡Œé‚£æ ·ï¼Œä¹Ÿå°±æ˜¯<code>SpringBoot</code>é¡¹ç›®ï¼Œå¼•å…¥<code>elasticsearch-rest-high-level-client</code>ï¼Œå¹¶é…ç½®<code>&lt;properties&gt;</code>ç‰ˆæœ¬</p>
<p>æœç„¶å°±æ˜¯æˆ‘æœŸæœ›çš„ç»“æœï¼Œé‚£ä¹ˆç°åœ¨é—®é¢˜å¾ˆæ˜æ˜¾äº†ï¼Œé—®é¢˜å°±åœ¨æˆ‘çš„searchå­é¡¹ç›®çš„çˆ¶é¡¹ç›®æ˜¯æˆ‘é…ç½®çš„å¤§çš„çˆ¶é¡¹ç›®ï¼Œé‡Œé¢åŒ…å«äº†å¾ˆå¤šå…¶ä»–çš„ä¾èµ–ï¼Œå¯èƒ½æ˜¯è¿™é‡Œçš„é—®é¢˜</p>
<h1 id="æœ€ç»ˆè§£å†³æ–¹æ¡ˆ">æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</h1>
<p>çˆ¶pom</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.wnh.gulimall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>gulimall<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-coupon<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-member<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-order<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-product<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-ware<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>renren-fast<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-common<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-gateway<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-third-part<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>renren-generator<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-search<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç»Ÿä¸€ç®¡ç†jaråŒ…ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">elasticsearch.version</span>&gt;</span>7.11.1<span class="tag">&lt;/<span class="name">elasticsearch.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å­æ¨¡å—ç»§æ‰¿ä¹‹åï¼Œæä¾›ä½œç”¨ï¼šé”å®šç‰ˆæœ¬+å­modlueä¸ç”¨å†™groupIdå’Œversion --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">           ...</span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;elasticsearch.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;elasticsearch.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;elasticsearch.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            ...</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	...</span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ä¸€äº›å…¬å…±ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å­pomå°±å¾ˆç®€å•äº†ï¼Œç›´æ¥å¼•å…¥å³å¯ä¸ç”¨ç‰ˆæœ¬</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="è¡¥å……">è¡¥å……</h1>
<p>åœ¨è§£å†³é—®é¢˜ä¸­è¿˜å‘ç°äº†é¡¹ç›®ä¸­ä¸€äº›ä¾èµ–å†²çªé—®é¢˜ï¼Œæ¨èä½¿ç”¨IDEAçš„æ’ä»¶<code>Maven Helper</code>è§£å†³</p>
<p>æˆ‘ä¹Ÿæ˜¯æ—©å°±ä¸‹äº†è¿™ä¸ªæ’ä»¶ï¼Œä½†ä¸€ç›´æ²¡æœ‰ä½¿ç”¨ï¼Œæ­£å¥½åœ¨è¿™é‡Œå®è·µäº† s
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6ucdg4ujw4s0.png" alt="Maven Helper" style="zoom:67%;" /></p>
<p>å¦‚ä¸Šï¼Œpomä¸‹æœ‰<code>Text</code>å’Œ<code>Dependency Analyzer</code>ä¸¤ä¸ªé€‰é¡¹</p>
<p><code>Text</code>æ˜¾ç¤ºpomå†…å®¹</p>
<p><code>Dependency Analyzer</code>ä¾èµ–åˆ†æï¼Œå®ƒä¼šåˆ†æpomä¾èµ–ä¹‹é—´å­˜åœ¨çš„é—®é¢˜ï¼Œå†²çªé¡¹ä¼šå±•ç¤ºå‡ºæ¥</p>
<p>å¦‚æœè§‰å¾—ä¾èµ–å…³ç³»ä¸æ¸…æ™°çš„è¿˜å¯ä»¥ï¼Œé€šè¿‡å³ä¾§<code>Maven</code>å·¥å…·æ æ‰¾åˆ°<code>Show Dependencies...</code>å±•ç¤ºä¾èµ–å›¾ï¼Œå…¶ä¸­å†²çªä¼šä»¥çº¢è‰²æ ‡è¯†ï¼Œéå¸¸æ–¹ä¾¿</p>
<p>å¯ä»¥é€šè¿‡æ’é™¤æŸäº›ä¾èµ–è§£å†³å†²çª</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¿‘æœŸå­¦ä¹ çŠ¶æ€ä¸è¡Œï¼Œç§‹æ‹›ç»“æŸèººäº†å¾ˆä¹…äº†ï¼ŒçŠ¶æ€ç¡®å®ä¸å¦‚ä¹‹å‰ï¼Œå¸Œæœ›èƒ½æ…¢æ…¢æ¢å¤å§ï¼Œæ‰¾åˆ°ä¸€ç§é€‚åº”è‡ªå·±çš„Balance</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLï¼ˆå››ï¼‰</title>
    <url>/article/47517b48.html</url>
    <content><![CDATA[<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1NJ411J79W">https://www.bilibili.com/video/BV1NJ411J79W</a></p>
<p><a
href="https://www.runoob.com/mysql/mysql-tutorial.html">https://www.runoob.com/mysql/mysql-tutorial.html</a></p>
<span id="more"></span>
<h1 id="ç´¢å¼•">ç´¢å¼•</h1>
<p>MySQLç´¢å¼•çš„å»ºç«‹å¯¹äºMySQLçš„é«˜æ•ˆè¿è¡Œæ˜¯å¾ˆé‡è¦çš„ï¼Œç´¢å¼•å¯ä»¥å¤§å¤§æé«˜MySQLçš„æ£€ç´¢é€Ÿåº¦ã€‚</p>
<ul>
<li><strong>Primary
Keyï¼ˆèšé›†ç´¢å¼•ï¼‰</strong>ï¼šInnoDBå­˜å‚¨å¼•æ“çš„è¡¨ä¼šå­˜åœ¨ä¸»é”®ï¼ˆå”¯ä¸€énullï¼‰ï¼Œå¦‚æœå»ºè¡¨çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œåˆ™ä¼šä½¿ç”¨ç¬¬ä¸€éç©ºçš„å”¯ä¸€ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•ï¼Œå¦åˆ™InnoDBä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„ã€é•¿åº¦ä¸º6å­—èŠ‚çš„row_idç”¨æ¥ä½œä¸ºèšé›†ç´¢å¼•ã€‚</li>
<li><strong>å•åˆ—ç´¢å¼•</strong>ï¼šå•åˆ—ç´¢å¼•å³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—</li>
<li><strong>ç»„åˆç´¢å¼•</strong>ï¼šç»„åˆç´¢å¼•æŒ‡åœ¨è¡¨çš„å¤šä¸ªå­—æ®µç»„åˆä¸Šåˆ›å»ºçš„ç´¢å¼•ï¼Œåªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨äº†è¿™äº›å­—æ®µçš„å·¦è¾¹å­—æ®µæ—¶ï¼Œç´¢å¼•æ‰ä¼šè¢«ä½¿ç”¨ã€‚ä½¿ç”¨ç»„åˆç´¢å¼•æ—¶<strong>éµå¾ªæœ€å·¦å‰ç¼€é›†åˆ</strong></li>
<li><strong>Uniqueï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰</strong>ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚è‹¥æ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ã€‚ä¸»é”®ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼</li>
<li><strong>Keyï¼ˆæ™®é€šç´¢å¼•ï¼‰</strong>ï¼šæ˜¯MySQLä¸­çš„åŸºæœ¬ç´¢å¼•ç±»å‹ï¼Œå…è®¸åœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼</li>
<li><strong>FULLTEXTï¼ˆå…¨æ–‡ç´¢å¼•ï¼‰</strong>ï¼šå…¨æ–‡ç´¢å¼•ç±»å‹ä¸ºFULLTEXTï¼Œåœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸Šæ”¯æŒå€¼çš„å…¨æ–‡æŸ¥æ‰¾ï¼Œå…è®¸åœ¨è¿™äº›ç´¢å¼•åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼ã€‚å…¨æ–‡ç´¢å¼•å¯ä»¥åœ¨CHARã€VARCHARæˆ–è€…TEXTç±»å‹çš„åˆ—ä¸Šåˆ›å»º</li>
<li><strong>SPATIALï¼ˆç©ºé—´ç´¢å¼•ï¼‰</strong>ï¼šç©ºé—´ç´¢å¼•æ˜¯å¯¹ç©ºé—´æ•°æ®ç±»å‹çš„å­—æ®µå»ºç«‹çš„ç´¢å¼•ï¼ŒMySQLä¸­çš„ç©ºé—´æ•°æ®ç±»å‹æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯GEOMETRYã€POINTã€LINESTRINGå’ŒPOLYGONã€‚MySQLä½¿ç”¨SPATIALå…³é”®å­—è¿›è¡Œæ‰©å±•ï¼Œä½¿å¾—èƒ½å¤Ÿç”¨äºåˆ›å»ºæ­£è§„ç´¢å¼•ç±»ä¼¼çš„è¯­æ³•åˆ›å»ºç©ºé—´ç´¢å¼•ã€‚åˆ›å»ºç©ºé—´ç´¢å¼•çš„åˆ—å¿…é¡»å£°æ˜ä¸ºNOT
NULL</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> tablename	<span class="comment">-- æ˜¾ç¤ºæ‰€æœ‰ç´¢å¼•ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX indexName <span class="keyword">ON</span> table_name (column_name)	<span class="comment">-- åˆ›å»ºç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> tableName <span class="keyword">ADD</span> INDEX indexName(columnName)	<span class="comment">-- ä¿®æ”¹è¡¨å¢åŠ ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> INDEX [indexName] <span class="keyword">ON</span> mytable;	<span class="comment">-- åˆ é™¤ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tablename	<span class="comment">-- explainåˆ†æç´¢å¼•</span></span><br></pre></td></tr></table></figure>
<h2 id="æ›´å¤š"><a
href="https://www.cnblogs.com/zsql/p/13808417.html">æ›´å¤š</a></h2>
<h1 id="æƒé™ç®¡ç†">æƒé™ç®¡ç†</h1>
<blockquote>
<p>SQL å‘½ä»¤</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> jack@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> &quot;jack&quot; <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line"><span class="comment">--  å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåˆ›å»ºä¸€ä¸ªåªå…è®¸ä»æœ¬åœ°ç™»å½•çš„è¶…çº§ç”¨æˆ·jackï¼Œå¹¶å…è®¸å°†æƒé™èµ‹äºˆåˆ«çš„ç”¨æˆ·ï¼Œå¯†ç ä¸ºï¼šjack.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> jack;	<span class="comment">-- æŸ¥çœ‹æƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">delete</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">from</span> <span class="string">&#x27;jack&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;	<span class="comment">-- å›æ”¶æƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;jack&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;	<span class="comment">-- åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"></span><br><span class="line">rename <span class="keyword">user</span> <span class="string">&#x27;jack&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;jim&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;	<span class="comment">-- é‡å‘½å</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;123456&#x27;</span>);	<span class="comment">-- ä¿®æ”¹å¯†ç </span></span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ-1"><a
href="https://www.cnblogs.com/Richardzhu/p/3318595.html">å‚è€ƒ</a></h2>
<h1 id="å¤‡ä»½">å¤‡ä»½</h1>
<blockquote>
<p>MySQL å¯è§†åŒ–å·¥å…·ï¼Œè½¬å‚¨ sql æ–‡ä»¶</p>
</blockquote>
<blockquote>
<p>mysqldump å‘½ä»¤è¡Œä½¿ç”¨</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤‡ä»½</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysqldump -hä¸»æœº -uç”¨æˆ·å -på¯†ç  æ•°æ®åº“ è¡¨å &gt;ç‰©ç†ç£ç›˜ä½ç½®/æ–‡ä»¶å.sql</span></span><br><span class="line">mysqldump -hlocalhost -uroot -proot <span class="built_in">test</span> user &gt;C:/Users/18339/Desktop/a.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysqldump -hä¸»æœº -uç”¨æˆ·å -på¯†ç  æ•°æ®åº“ è¡¨1 è¡¨2 &gt;ç‰©ç†ç£ç›˜ä½ç½®/æ–‡ä»¶å.sql</span></span><br><span class="line">mysqldump -hlocalhost -uroot -proot <span class="built_in">test</span> user teacher &gt;C:/Users/18339/Desktop/a.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysqldump -hä¸»æœº -uç”¨æˆ·å -på¯†ç  æ•°æ®åº“ &gt;ç‰©ç†ç£ç›˜ä½ç½®/æ–‡ä»¶å.sql</span></span><br><span class="line">mysqldump -hlocalhost -uroot -proot <span class="built_in">test</span> &gt;C:/Users/18339/Desktop/a.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç™»é™†æƒ…å†µä¸‹ï¼Œåˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“</span></span><br><span class="line"><span class="comment"># source å¤‡ä»½æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> C:/Users/18339/Desktop/a.sql</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰å¤§èŒƒå¼">ä¸‰å¤§èŒƒå¼</h1>
<p><strong>ç¬¬ä¸€èŒƒå¼</strong></p>
<p>1NFæ˜¯å¯¹å±æ€§çš„<strong>åŸå­æ€§</strong>ï¼Œè¦æ±‚å±æ€§å…·æœ‰åŸå­æ€§ï¼Œä¸å¯å†åˆ†è§£ï¼›</p>
<p>è¯´æ˜ï¼šåœ¨ä»»ä½•ä¸€ä¸ªå…³ç³»æ•°æ®åº“ä¸­ï¼Œç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯å¯¹å…³ç³»æ¨¡å¼çš„åŸºæœ¬è¦æ±‚ï¼Œä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„æ•°æ®åº“å°±ä¸æ˜¯å…³ç³»æ•°æ®åº“ã€‚</p>
<p><strong>ç¬¬äºŒèŒƒå¼</strong></p>
<p><strong>2NFè¦æ±‚è®°å½•æœ‰æƒŸä¸€æ ‡è¯†ï¼Œå³ä¸å­˜åœ¨éƒ¨åˆ†ä¾èµ–ï¼›</strong></p>
<p>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå³æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€‚</p>
<p><strong>ç¬¬ä¸‰èŒƒå¼</strong></p>
<p>3NFæ˜¯å¯¹å­—æ®µçš„<strong><code>å†—ä½™æ€§</code></strong>ï¼Œè¦æ±‚ä»»ä½•å­—æ®µä¸èƒ½ç”±å…¶ä»–å­—æ®µæ´¾ç”Ÿå‡ºæ¥ï¼Œå®ƒè¦æ±‚å­—æ®µæ²¡æœ‰å†—ä½™ï¼Œå³ä¸å­˜åœ¨ä¼ é€’ä¾èµ–ï¼›</p>
<p>æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€‚ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰è¦æ±‚ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éä¸»å…³é”®å­—ä¿¡æ¯ã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong>ä¸‰å¤§èŒƒå¼åªæ˜¯ä¸€èˆ¬è®¾è®¡æ•°æ®åº“çš„åŸºæœ¬ç†å¿µï¼Œå¯ä»¥å»ºç«‹å†—ä½™è¾ƒå°ã€ç»“æ„åˆç†çš„æ•°æ®åº“ã€‚å¦‚æœæœ‰ç‰¹æ®Šæƒ…å†µï¼Œå½“ç„¶è¦ç‰¹æ®Šå¯¹å¾…ï¼Œæ•°æ®åº“è®¾è®¡æœ€é‡è¦çš„æ˜¯çœ‹éœ€æ±‚è·Ÿæ€§èƒ½ï¼Œéœ€æ±‚&gt;æ€§èƒ½&gt;è¡¨ç»“æ„ã€‚æ‰€ä»¥ä¸èƒ½ä¸€å‘³çš„å»è¿½æ±‚èŒƒå¼å»ºç«‹æ•°æ®åº“ã€‚</p>
<h1 id="sql-æ³¨å…¥">SQL æ³¨å…¥</h1>
<p>å¦‚æœæ‚¨é€šè¿‡ç½‘é¡µè·å–ç”¨æˆ·è¾“å…¥çš„æ•°æ®å¹¶å°†å…¶æ’å…¥ä¸€ä¸ªMySQLæ•°æ®åº“ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‘ç”ŸSQLæ³¨å…¥å®‰å…¨çš„é—®é¢˜ã€‚</p>
<p>æ‰€è°“SQLæ³¨å…¥ï¼Œå°±æ˜¯é€šè¿‡æŠŠSQLå‘½ä»¤æ’å…¥åˆ°Webè¡¨å•é€’äº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚</p>
<p>æˆ‘ä»¬æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ï¼Œæˆ‘ä»¬å¿…é¡»è®¤å®šç”¨æˆ·è¾“å…¥çš„æ•°æ®éƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚</p>
<blockquote>
<p>é˜²æ­¢SQLæ³¨å…¥ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>1.æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ã€‚å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œæ ¡éªŒï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ–é™åˆ¶é•¿åº¦ï¼›å¯¹å•å¼•å·å’Œ
åŒ"-"è¿›è¡Œè½¬æ¢ç­‰ã€‚</li>
<li>2.æ°¸è¿œä¸è¦ä½¿ç”¨åŠ¨æ€æ‹¼è£…sqlï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°åŒ–çš„sqlæˆ–è€…ç›´æ¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹è¿›è¡Œæ•°æ®æŸ¥è¯¢å­˜å–ã€‚</li>
<li>3.æ°¸è¿œä¸è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™çš„æ•°æ®åº“è¿æ¥ï¼Œä¸ºæ¯ä¸ªåº”ç”¨ä½¿ç”¨å•ç‹¬çš„æƒé™æœ‰é™çš„æ•°æ®åº“è¿æ¥ã€‚</li>
<li>4.ä¸è¦æŠŠæœºå¯†ä¿¡æ¯ç›´æ¥å­˜æ”¾ï¼ŒåŠ å¯†æˆ–è€…hashæ‰å¯†ç å’Œæ•æ„Ÿçš„ä¿¡æ¯ã€‚</li>
<li>5.åº”ç”¨çš„å¼‚å¸¸ä¿¡æ¯åº”è¯¥ç»™å‡ºå°½å¯èƒ½å°‘çš„æç¤ºï¼Œæœ€å¥½ä½¿ç”¨è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯å¯¹åŸå§‹é”™è¯¯ä¿¡æ¯è¿›è¡ŒåŒ…è£…</li>
<li>6.sqlæ³¨å…¥çš„æ£€æµ‹æ–¹æ³•ä¸€èˆ¬é‡‡å–è¾…åŠ©è½¯ä»¶æˆ–ç½‘ç«™å¹³å°æ¥æ£€æµ‹ï¼Œè½¯ä»¶ä¸€èˆ¬é‡‡ç”¨sqlæ³¨å…¥æ£€æµ‹å·¥å…·jskyï¼Œç½‘ç«™å¹³å°å°±æœ‰äº¿æ€ç½‘ç«™å®‰å…¨å¹³å°æ£€æµ‹å·¥å…·ã€‚MDCSOFT
SCANç­‰ã€‚é‡‡ç”¨MDCSOFT-IPSå¯ä»¥æœ‰æ•ˆçš„é˜²å¾¡SQLæ³¨å…¥ï¼ŒXSSæ”»å‡»ç­‰ã€‚</li>
</ul>
<p>å› ä¸ºå†…å®¹å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°†å…¶æ‹†åˆ†ä¸ºä»¥ä¸‹å†…å®¹</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/8d742da7.html">MySQL(ä¸€)</a></li>
<li><a
href="https://wnhyang.github.io/article/bd62c17f.html">MySQL(äºŒ)</a></li>
<li><a
href="https://wnhyang.github.io/article/f07c622d.html">MySQL(ä¸‰)</a></li>
<li><a
href="https://wnhyang.github.io/article/47517b48.html">MySQL(å››)ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis-Generatorä½¿ç”¨</title>
    <url>/article/524c985a.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>åœ¨å­¦ä¹ å…¬å¸é¡¹ç›®æ—¶çœ‹åˆ°å…¬å¸æœ‰ä½¿ç”¨<code>Mybatis-Generator</code>ï¼Œæ‰€ä»¥å­¦ä¹ äº†ä¸€ä¸‹</p>
<p>ä¹‹å‰æ˜¯æœ‰è§è¯†è¿‡<code>Mybatis-Plus</code>çš„<code>generator</code>ï¼Œä½¿ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆæ£’çš„ï¼Œå†è¯´äº†<code>Mybatis-Plus</code>ä¸ä¹Ÿæ˜¯åŸºäº<code>Mybatis</code>åšçš„å—ï¼Œæ‰€ä»¥ç›¸ä¿¡ä»–ä»¬ä¼šå¾ˆç›¸ä¼¼</p>
<p>å†æœ‰å°±æ˜¯å­¦ä¹ é¡¹ç›®æ—¶ç”¨è¿‡<a
href="https://gitee.com/renrenio/renren-generator">renren-generator</a>ï¼Œä»–èƒ½ç”Ÿæˆé¡¹ç›®ä¸­ç®€å•çš„ä¸šåŠ¡ä»£ç ï¼ŒåŒ…æ‹¬controllerã€serviceç­‰ç­‰</p>
<span id="more"></span>
<h1 id="å†…å®¹">å†…å®¹</h1>
<p>å…³äº<code>Mybatis-Generator</code>æœ€å¥½è¿˜æ˜¯å»å®˜ç½‘å­¦ä¹ ï¼Œhttp://mybatis.org/generator/index.html</p>
<p>å½“ç„¶æœ‰äº›åšå®¢å†™çš„ä¹Ÿå¾ˆæ£’ï¼Œhttps://www.cnblogs.com/throwable/p/12046848.html</p>
<p>å…³äºä¸Šé¢çš„é‚£ç¯‡åšå®¢æˆ‘åªçº æ­£ä¸€ç‚¹ï¼Œå°±æ˜¯å…³äº<code>commentGeneratoræ ‡ç­¾</code>è¿™å—<code>suppressAllComments</code>ï¼Œé»˜è®¤å€¼æ˜¯<code>false</code>æ²¡é”™ï¼Œä½†æ˜¯<code>false</code>å«ä¹‰æ˜¯ç”Ÿæˆæ³¨é‡Šï¼Œè®¾ç½®ä¸º<code>true</code>æ‰è¡¨ç¤ºä¸ç”Ÿæˆæ³¨è§£ã€‚</p>
<h2 id="ä»£ç ">ä»£ç </h2>
<p>ä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›ä»£ç ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹</p>
<p>ä¸»è¦æ˜¯<code>pom.xml</code>ã€<code>generatorConfig.xml</code>ã€<code>generatorConfig.properties</code></p>
<p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.wnh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.boot.version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">spring.boot.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.driver.version</span>&gt;</span>8.0.17<span class="tag">&lt;/<span class="name">mysql.driver.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.generator.version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">mybatis.generator.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.driver.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.generator.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- é€šè¿‡mvn mybatis-generator:generateå‘½ä»¤ï¼Œè¿è¡Œmybatis-generator --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å‚è€ƒï¼šhttps://mybatis.org/generator/running/runningWithMaven.html --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.generator.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>Generate MyBatis Artifacts<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>generate<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- å®šä¹‰é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>$&#123;basedir&#125;/src/main/resources/mybatis/generatorConfig.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- è¾“å‡ºè¯¦ç»†ä¿¡æ¯ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- è¦†ç›–ç”Ÿæˆæ–‡ä»¶ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- è¿™é‡Œè®¸å¤šé…ç½®å¯ä»¥æ”¾åœ¨å¯¹åº”çš„xmlæ–‡ä»¶ä¸­ --&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.driver.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>generatorConfig.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">datasource.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/operation?useSSL=false</span></span><br><span class="line"><span class="attr">datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">datasource.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
<p>generatorConfig.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/generatorConfig.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¦æ·»åŠ åˆ°ç±»è·¯å¾„çš„ JAR/ZIP æ–‡ä»¶çš„å®Œæ•´è·¯å¾„åï¼Œæˆ–è¦æ·»åŠ åˆ°ç±»è·¯å¾„çš„ç›®å½• --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éœ€è¦é©±åŠ¨ï¼š1ã€åŠ å…¥é©±åŠ¨è·¯å¾„ 2ã€åœ¨pluginé‡Œç›´æ¥åŠ å…¥ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;classPathEntry location=&quot;/Program Files/IBM/SQLLIB/java/db2java.zip&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- targetRuntimeå±æ€§æ¨èMyBatis3å’ŒMyBatis3Simple --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¿…é¡»æŒ‰contextçš„é¡ºåºé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;MySQL&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3Simple&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ’ä»¶æ‰©å±•ç”Ÿæˆç±»ï¼Œä¾‹å¦‚ï¼šç”ŸæˆtoStringï¼Œå®ç°java.io.Serializableç­‰ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- http://mybatis.org/generator/reference/plugins.html     https://github.com/itfsw/mybatis-generator-plugin --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;plugin type=&quot;com.itfsw.mybatis.generator.plugins.LombokPlugin&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash; @Data é»˜è®¤å¼€å¯,åŒæ—¶æ’ä»¶ä¼šå¯¹å­ç±»è‡ªåŠ¨é™„åŠ @EqualsAndHashCode(callSuper = true)ï¼Œ@ToString(callSuper = true) &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;@Data&quot; value=&quot;true&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash; @Builder å¿…é¡»åœ¨ Lombok ç‰ˆæœ¬ &gt;= 1.18.2 çš„æƒ…å†µä¸‹å¼€å¯ï¼Œå¯¹å­˜åœ¨ç»§æ‰¿å…³ç³»çš„ç±»è‡ªåŠ¨æ›¿æ¢æˆ@SuperBuilder &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;@Builder&quot; value=&quot;false&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash; @NoArgsConstructor å’Œ @AllArgsConstructor ä½¿ç”¨è§„åˆ™å’ŒLombokä¸€è‡´ &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;@AllArgsConstructor&quot; value=&quot;false&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;@NoArgsConstructor&quot; value=&quot;false&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash; @Getterã€@Setterã€@Accessors ç­‰ä½¿ç”¨è§„åˆ™å‚è§å®˜æ–¹æ–‡æ¡£ &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;@Accessors(chain = true)&quot; value=&quot;false&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash; ä¸´æ—¶è§£å†³IDEAå·¥å…·å¯¹@SuperBuilderçš„ä¸æ”¯æŒé—®é¢˜ï¼Œå¼€å¯å(é»˜è®¤æœªå¼€å¯)æ’ä»¶åœ¨é‡åˆ°@SuperBuilderæ³¨è§£æ—¶ä¼šè°ƒç”¨ModelBuilderPluginæ¥ç”Ÿæˆç›¸åº”çš„builderä»£ç  &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;supportSuperBuilderForIdea&quot; value=&quot;false&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/plugin&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--è¦†ç›–ç”ŸæˆXMLæ–‡ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.generator.plugins.UnmergeableXmlMappersPlugin&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ˜¯å¦è¾“å‡ºè¡¨å’Œåˆ—çš„commentä¿¡æ¯ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addRemarkComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®æºè¿æ¥ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span></span></span><br><span class="line"><span class="tag">                <span class="attr">driverClass</span>=<span class="string">&quot;$&#123;datasource.driver&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">connectionURL</span>=<span class="string">&quot;$&#123;datasource.url&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">userId</span>=<span class="string">&quot;$&#123;datasource.username&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">password</span>=<span class="string">&quot;$&#123;datasource.password&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¦‚æœä¸ºtrueï¼Œæ‰€æœ‰æ•°å­—å±æ€§è¢«å¼ºåˆ¶ä½¿ç”¨BigDecimalç±»å‹è¡¨ç¤º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆæ¨¡å‹çš„åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">&quot;com.wnh.pojo.model&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆçš„æ˜ å°„æ–‡ä»¶åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">&quot;mybatis/mapper&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">&quot;src/main/resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”ŸæˆDAOçš„åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">&quot;com.wnh.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;table tableName=&quot;school_area&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               domainObjectName=&quot;SchoolArea&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableCountByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableSelectByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableUpdateByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableDeleteByExample=&quot;false&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;generatedKey column=&quot;id&quot; sqlStatement=&quot;JDBC&quot; identity=&quot;true&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/table&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;user&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">domainObjectName</span>=<span class="string">&quot;user.User&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">mapperName</span>=<span class="string">&quot;user.UserMapper&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">sqlStatement</span>=<span class="string">&quot;JDBC&quot;</span> <span class="attr">identity</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h2>
<ul>
<li>è™½ç„¶æœ‰<code>Java</code>å’Œ<code>maven</code>ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼Œä½†æˆ‘è¿˜æ˜¯æ¨è<code>maven</code></li>
<li>å…³äº<code>pom</code>ï¼Œè¦åœ¨<code>plugin</code>ä¸­å¼•å…¥éœ€è¦çš„ä¾èµ–ï¼Œä¸Šé¢ä¹Ÿæåˆ°äº†å¯ä»¥é…ç½®æ’ä»¶å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä»£ç ï¼Œä½†å®˜æ–¹æä¾›çš„æ’ä»¶éƒ½å¤ªåŸºç¡€äº†ï¼Œä¸å¤ªå®ç”¨</li>
<li>å…³äº<code>generatorConfig.xml</code>ï¼Œè¿™é‡Œ<code>context</code>æ ‡ç­¾é‡Œçš„è¦ä¸¥æ ¼æŒ‰ç…§é¡ºåºé…ç½®ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸€å®šæ³¨æ„ä¸Šé¢çš„è¦†ç›–<code>xml</code>çš„<code>plugin</code>é…ç½®ï¼Œä¸ç„¶åœ¨è¦†ç›–ç”Ÿæˆæ—¶ä¼šæœ‰é—®é¢˜</li>
</ul>
<h2 id="åæ§½">åæ§½</h2>
<ul>
<li>é¦–å…ˆå°±æ˜¯å…³äºæ³¨é‡Šçš„ï¼Œ<code>Mybatis-Generator</code>ç”Ÿæˆæ³¨é‡Šé…ç½®ä¸‹ï¼Œä¼šç”Ÿæˆå¾ˆå¤šå¤šä½™çš„æ³¨è§£ï¼Œå…¶ä¸»è¦å°±æ˜¯å…³äºå£°æ˜è¿™é‡Œçš„ä»£ç æ˜¯æˆ‘ä»¬<code>Mybatis-Generator</code>ç”Ÿæˆçš„ï¼Œä½†çœŸçš„æ²¡ä»€ä¹ˆç”¨å•Šã€‚æœ‰äººå°±é—®äº†ï¼Œâ€œä½ ä¸ä¼šæŠŠå®ƒå…³æ‰å—ï¼Ÿâ€æˆ‘è¦ä¸æ˜¯ä¸ºäº†ç”Ÿæˆå®ä½“ç±»å¯¹åº”æ•°æ®åº“çš„æ³¨é‡Šæˆ‘ä¹Ÿä¸ä¼šå¼€</li>
<li>å…³äºç”Ÿæˆè¡¨è¿™å—ï¼Œéš¾é“æ²¡æœ‰ç›´æ¥é…ç½®å¤šä¸ªè¡¨çš„é€‰é¡¹å—ï¼Ÿéå¾—å¯¹åº”æ•°æ®åº“æ¯ä¸ªè¡¨å†™ä¸€ä¸ª<code>table</code>æ ‡ç­¾å—ï¼Ÿ</li>
<li>è¿˜æœ‰å°±æ˜¯åœ¨ç”Ÿæˆæ–‡ä»¶æ—¶ï¼Œå®ƒä¸ä¼šè‡ªå·±ç¡®å®šçˆ¶åŒ…ï¼Œä¹Ÿå°±æ˜¯è¿˜å¾—é…ç½®æ¯ä¸ªæ–‡ä»¶çš„çˆ¶åŒ…ï¼Œå¾ˆéº»çƒ¦</li>
</ul>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¯´å®è¯<code>Mybatis-Generator</code>ç¡®å®èƒ½å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å¼€å‘ï¼Œç”Ÿæˆæ•°æ®åº“å®ä½“ç±»ã€<code>mapper</code>æ¥å£å’Œ<code>xml</code>ï¼Œä½†æ˜¯ç¡®å®ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå®ƒä¸æ›´æ–°äº†å§ï¼Œä¸Š<code>maven</code>ä»“åº“å°±å¯ä»¥çœ‹åˆ°æœ€æ–°ç‰ˆæœ¬å°±æ˜¯<code>1.4.0</code>ï¼Œåœç•™åœ¨2019å¹´ï¼Œç°åœ¨ç¡®å®ä¹Ÿå­˜åœ¨å¾ˆå¤šèƒ½æ›¿ä»£å®ƒçš„æ–¹æ¡ˆã€‚</p>
]]></content>
      <tags>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis-Plus-Generatorä½¿ç”¨</title>
    <url>/article/52ebbcb.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ä¹‹å‰æœ‰æ–‡ç« <a
href="https://wnhyang.github.io/article/524c985a.html">Mybatis-Generatorä½¿ç”¨</a>ï¼Œç°åœ¨ä½“éªŒäº†<code>Mybatis-Plus-Generator</code>ï¼ŒçœŸå¿ƒè§‰å¾—æœ‰äº†å®ƒå¼€å‘æ•ˆç‡æé«˜å¤ªå¤šäº†ï¼Œç”¨èµ·æ¥æ˜¯çœŸçš„çˆ½ï¼Œçˆ½ï¼</p>
<p>å‚è€ƒï¼š</p>
<p><a
href="https://baomidou.com/pages/779a6e/">https://baomidou.com/pages/779a6e/</a></p>
<p><a
href="https://blog.csdn.net/qq_20185737/article/details/121456598">https://blog.csdn.net/qq_20185737/article/details/121456598</a></p>
<span id="more"></span>
<h1 id="ä»£ç ">ä»£ç </h1>
<blockquote>
<p>æ³¨æ„</p>
<p>é€‚ç”¨ç‰ˆæœ¬ï¼šmybatis-plus-generator 3.5.1
åŠå…¶ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¯¹å†å²ç‰ˆæœ¬ä¸å…¼å®¹ï¼3.5.1 ä»¥ä¸‹çš„è¯·å‚è€ƒ <a
href="https://baomidou.com/pages/d357af/">ä»£ç ç”Ÿæˆå™¨æ—§</a></p>
</blockquote>
<h2 id="ä¾èµ–">ä¾èµ–</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="yml">yml</h2>
<p>å› ä¸ºæˆ‘ä¹ æƒ¯çš„ä¸‰å­—æ®µï¼ˆ<code>valid</code>ã€<code>create_time</code>ã€<code>update_time</code>ï¼‰ï¼Œæ‰€ä»¥é…ç½®æœ‰é€»è¾‘åˆ é™¤</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/sl?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/**/*Mapper.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">valid</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="generator">Generator</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-08-19 10:20</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Generator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€é…ç½®æ•°æ®æº</span></span><br><span class="line">        FastAutoGenerator.create(<span class="string">&quot;jdbc:mysql://localhost:3306/sl&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line">                <span class="comment">//2ã€å…¨å±€é…ç½®</span></span><br><span class="line">                .globalConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.author(<span class="string">&quot;wnhyang&quot;</span>) <span class="comment">// è®¾ç½®ä½œè€…å</span></span><br><span class="line">                            .outputDir(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/java&quot;</span>)   <span class="comment">//è®¾ç½®è¾“å‡ºè·¯å¾„ï¼šé¡¹ç›®çš„ java ç›®å½•ä¸‹</span></span><br><span class="line">                            .commentDate(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>)   <span class="comment">//æ³¨é‡Šæ—¥æœŸ</span></span><br><span class="line">                            .dateType(DateType.TIME_PACK)   <span class="comment">//å®šä¹‰ç”Ÿæˆçš„å®ä½“ç±»ä¸­æ—¥æœŸçš„ç±»å‹ TIME_PACK=LocalDateTime;ONLY_DATE=Date;</span></span><br><span class="line">                            .fileOverride()   <span class="comment">//è¦†ç›–ä¹‹å‰çš„æ–‡ä»¶</span></span><br><span class="line">                            <span class="comment">// .enableSwagger()   //å¼€å¯ swagger æ¨¡å¼</span></span><br><span class="line">                            .disableOpenDir();   <span class="comment">//ç¦æ­¢æ‰“å¼€è¾“å‡ºç›®å½•ï¼Œé»˜è®¤æ‰“å¼€</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">//3ã€åŒ…é…ç½®</span></span><br><span class="line">                .packageConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.parent(<span class="string">&quot;com.wnh.shortlink&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…å</span></span><br><span class="line">                            .moduleName(<span class="string">&quot;&quot;</span>)   <span class="comment">//è®¾ç½®æ¨¡å—åŒ…å</span></span><br><span class="line">                            .entity(<span class="string">&quot;entity&quot;</span>)   <span class="comment">//pojo å®ä½“ç±»åŒ…å</span></span><br><span class="line">                            .service(<span class="string">&quot;service&quot;</span>) <span class="comment">//Service åŒ…å</span></span><br><span class="line">                            .serviceImpl(<span class="string">&quot;service.impl&quot;</span>) <span class="comment">// ***ServiceImpl åŒ…å</span></span><br><span class="line">                            .mapper(<span class="string">&quot;mapper&quot;</span>)   <span class="comment">//Mapper åŒ…å</span></span><br><span class="line">                            .xml(<span class="string">&quot;mapper&quot;</span>)  <span class="comment">//Mapper XML åŒ…å</span></span><br><span class="line">                            .controller(<span class="string">&quot;controller&quot;</span>) <span class="comment">//Controller åŒ…å</span></span><br><span class="line">                            .other(<span class="string">&quot;utils&quot;</span>) <span class="comment">//è‡ªå®šä¹‰æ–‡ä»¶åŒ…å</span></span><br><span class="line">                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/resources/mapper&quot;</span>));    <span class="comment">//é…ç½® mapper.xml è·¯å¾„ä¿¡æ¯ï¼šé¡¹ç›®çš„ resources ç›®å½•ä¸‹</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">//4ã€ç­–ç•¥é…ç½®</span></span><br><span class="line">                .strategyConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.addInclude(<span class="string">&quot;url_map&quot;</span>) <span class="comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„æ•°æ®è¡¨å</span></span><br><span class="line">                            .addTablePrefix(<span class="string">&quot;t_&quot;</span>, <span class="string">&quot;c_&quot;</span>) <span class="comment">// è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">//4.1ã€Mapperç­–ç•¥é…ç½®</span></span><br><span class="line">                            .mapperBuilder()</span><br><span class="line">                            .superClass(BaseMapper.class)   <span class="comment">//è®¾ç½®çˆ¶ç±»</span></span><br><span class="line">                            .formatMapperFileName(<span class="string">&quot;%sMapper&quot;</span>)   <span class="comment">//æ ¼å¼åŒ– mapper æ–‡ä»¶åç§°</span></span><br><span class="line">                            .enableMapperAnnotation()       <span class="comment">//å¼€å¯ @Mapper æ³¨è§£</span></span><br><span class="line">                            .formatXmlFileName(<span class="string">&quot;%sXml&quot;</span>)<span class="comment">//æ ¼å¼åŒ– Xml æ–‡ä»¶åç§°</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">//4.2ã€service ç­–ç•¥é…ç½®</span></span><br><span class="line">                            .serviceBuilder()</span><br><span class="line">                            .formatServiceFileName(<span class="string">&quot;%sService&quot;</span>) <span class="comment">//æ ¼å¼åŒ– service æ¥å£æ–‡ä»¶åç§°ï¼Œ%sè¿›è¡ŒåŒ¹é…è¡¨åï¼Œå¦‚ UserService</span></span><br><span class="line">                            .formatServiceImplFileName(<span class="string">&quot;%sServiceImpl&quot;</span>) <span class="comment">//æ ¼å¼åŒ– service å®ç°ç±»æ–‡ä»¶åç§°ï¼Œ%sè¿›è¡ŒåŒ¹é…è¡¨åï¼Œå¦‚ UserServiceImpl</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">//4.3ã€å®ä½“ç±»ç­–ç•¥é…ç½®</span></span><br><span class="line">                            .entityBuilder()</span><br><span class="line">                            .enableLombok() <span class="comment">//å¼€å¯ Lombok</span></span><br><span class="line">                            .disableSerialVersionUID()  <span class="comment">//ä¸å®ç° Serializable æ¥å£ï¼Œä¸ç”Ÿäº§ SerialVersionUID</span></span><br><span class="line">                            .logicDeleteColumnName(<span class="string">&quot;valid&quot;</span>)   <span class="comment">//é€»è¾‘åˆ é™¤å­—æ®µå</span></span><br><span class="line">                            .naming(NamingStrategy.underline_to_camel)  <span class="comment">//æ•°æ®åº“è¡¨æ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥ï¼šä¸‹åˆ’çº¿è½¬é©¼å³°å‘½</span></span><br><span class="line">                            .columnNaming(NamingStrategy.underline_to_camel)    <span class="comment">//æ•°æ®åº“è¡¨å­—æ®µæ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥ï¼šä¸‹åˆ’çº¿è½¬é©¼å³°å‘½</span></span><br><span class="line">                            .addTableFills(</span><br><span class="line">                                    <span class="keyword">new</span> <span class="title class_">Column</span>(<span class="string">&quot;create_time&quot;</span>, FieldFill.INSERT),</span><br><span class="line">                                    <span class="keyword">new</span> <span class="title class_">Column</span>(<span class="string">&quot;update_time&quot;</span>, FieldFill.INSERT_UPDATE)</span><br><span class="line">                            )   <span class="comment">//æ·»åŠ è¡¨å­—æ®µå¡«å……ï¼Œ&quot;create_time&quot;å­—æ®µè‡ªåŠ¨å¡«å……ä¸ºæ’å…¥æ—¶é—´ï¼Œ&quot;modify_time&quot;å­—æ®µè‡ªåŠ¨å¡«å……ä¸ºæ’å…¥ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">                            .enableTableFieldAnnotation()       <span class="comment">// å¼€å¯ç”Ÿæˆå®ä½“æ—¶ç”Ÿæˆå­—æ®µæ³¨è§£</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">//4.4ã€Controllerç­–ç•¥é…ç½®</span></span><br><span class="line">                            .controllerBuilder()</span><br><span class="line">                            .formatFileName(<span class="string">&quot;%sController&quot;</span>) <span class="comment">//æ ¼å¼åŒ– Controller ç±»æ–‡ä»¶åç§°ï¼Œ%sè¿›è¡ŒåŒ¹é…è¡¨åï¼Œå¦‚ UserController</span></span><br><span class="line">                            .enableRestStyle();  <span class="comment">//å¼€å¯ç”Ÿæˆ @RestController æ§åˆ¶å™¨</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">//5ã€æ¨¡æ¿</span></span><br><span class="line">                .templateEngine(<span class="keyword">new</span> <span class="title class_">VelocityTemplateEngine</span>())</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    .templateEngine(new FreemarkerTemplateEngine())</span></span><br><span class="line"><span class="comment">                    .templateEngine(new BeetlTemplateEngine())</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//6ã€æ‰§è¡Œ</span></span><br><span class="line">                .execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªåŠ¨å¡«å……"><a
href="https://baomidou.com/pages/4c6bcf/">è‡ªåŠ¨å¡«å……</a></h2>
<p><code>mybatis-plus</code>æä¾›çš„è‡ªåŠ¨å¡«å……åŠŸèƒ½ï¼Œå‚è€ƒå®˜ç½‘æ–‡æ¡£å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill ....&quot;</span>);</span><br><span class="line">        <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨èä½¿ç”¨)</span></span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="comment">// æˆ–è€…</span></span><br><span class="line">        <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.3(æ¨è)</span></span><br><span class="line">        <span class="comment">// this.strictInsertFill(metaObject, &quot;createTime&quot;, () -&gt; LocalDateTime.now(), LocalDateTime.class);</span></span><br><span class="line">        <span class="comment">// æˆ–è€…</span></span><br><span class="line">        <span class="comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨(3.3.0 è¯¥æ–¹æ³•æœ‰bug)</span></span><br><span class="line">        <span class="comment">// this.fillStrategy(metaObject, &quot;createTime&quot;, LocalDateTime.now());</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill ....&quot;</span>);</span><br><span class="line">        <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨è)</span></span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="comment">// æˆ–è€…</span></span><br><span class="line">        <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.3(æ¨è)</span></span><br><span class="line">        <span class="comment">// this.strictUpdateFill(metaObject, &quot;updateTime&quot;, () -&gt; LocalDateTime.now(), LocalDateTime.class);</span></span><br><span class="line">        <span class="comment">// æˆ–è€…</span></span><br><span class="line">        <span class="comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨(3.3.0 è¯¥æ–¹æ³•æœ‰bug)</span></span><br><span class="line">        <span class="comment">// this.fillStrategy(metaObject, &quot;updateTime&quot;, LocalDateTime.now());</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨ç±»">å¯åŠ¨ç±»</h2>
<p>æ·»åŠ æ‰«æå³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-08-19 10:03</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.wnh.shortlink.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>Mybatis-Plus</code>çš„ä½“éªŒå°±æ˜¯çˆ½ï¼Œå¼€å‘æ•ˆç‡å¤ªé«˜äº†ï¼ˆåˆé‡å¤äº†ä¸€éğŸ˜‚ï¼‰</p>
]]></content>
      <tags>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Nacosé…ç½®ä¸­å¿ƒé‡åˆ°çš„é—®é¢˜</title>
    <url>/article/7a63aa1b.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘åœ¨è‡ªå·±æ­å»ºçš„å•æœº<code>nacos</code>ä½¿ç”¨ä¸­é‡åˆ°çš„é…ç½®ä¸­å¿ƒé—®é¢˜ï¼Œè¿™é‡Œåšä¸€ä¸ªæ€»ç»“ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://developer.aliyun.com/article/897341">SpringCloud
Alibaba 2021ç‰ˆ nacos é…ç½®ä¸­å¿ƒæ•™ç¨‹</a></p>
<p><a
href="https://cloud.tencent.com/developer/article/1986714">SpringBootä½¿ç”¨spring.config.importå¤šç§æ–¹å¼å¯¼å…¥é…ç½®æ–‡ä»¶</a></p>
<p><a
href="https://blog.csdn.net/weixin_44951259/article/details/127929284">è§£å†³
Spring Cloud 2021.0.5 ç‰ˆæœ¬ï¼Œä½¿ç”¨ nacos åšé…ç½®ä¸­å¿ƒï¼ŒæŠ¥ No
spring.config.import property has been defined çš„é—®é¢˜</a></p>
<p><a
href="https://blog.csdn.net/qq_41376740/article/details/122792411?spm=1001.2014.3001.5501">SpringCloud
+ Nacos é…åˆmavenï¼Œè¿›è¡Œç¯å¢ƒï¼ˆé…ç½®æ–‡ä»¶ï¼‰çš„åˆ‡æ¢ï¼Œdev/ prod/ test
ä¸‰ç§ç¯å¢ƒ</a></p>
<p><a
href="https://blog.csdn.net/john1337/article/details/120865113">nacosä»1.xå‡çº§åˆ°2.xéœ€è¦æ³¨æ„çš„åœ°æ–¹</a></p>
<p><a
href="https://blog.csdn.net/li1325169021/article/details/121626299">Nacosä½¿ç”¨2.0.1ç‰ˆæœ¬å¯åŠ¨å‡ºç°9848ç«¯å£é”™è¯¯çš„è§£å†³æ–¹å¼(äº²æµ‹æœ‰æ•ˆ)</a></p>
<span id="more"></span>
<h1 id="æ”¾åœ¨æœ€å‰">æ”¾åœ¨æœ€å‰</h1>
<p><a
href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">spring-cloud-alibabaç‰ˆæœ¬è¯´æ˜</a></p>
<p>åœ¨ä½¿ç”¨<code>spring-cloud-alibaba</code>ä¹‹å‰ä¸€å®šè¦äº†è§£çš„ç‰ˆæœ¬è¯´æ˜ï¼Œä¸€å®šè¦ä½¿ç”¨å®˜æ–¹æ¨èçš„ç‰ˆæœ¬å¯¹åº”å…³ç³»ï¼Œé¿å…å‡ºç°å¼‚å¸¸é—®é¢˜ã€‚</p>
<h1 id="é—®é¢˜æ ¹æº">é—®é¢˜æ ¹æº</h1>
<p>æœ¬è´¨ä¸Šä¸€å¥è¯ï¼šç‰ˆæœ¬å…¼å®¹</p>
<p>ç®€å•æ¦‚æ‹¬ï¼š<code>1.x</code>ç‰ˆæœ¬<code>nacos-client</code>èƒ½è®¿é—®<code>2.x</code>ç‰ˆæœ¬<code>nacos-server</code>ï¼Œä½†æ˜¯<code>2.x</code>ç‰ˆæœ¬<code>nacos-client</code>ä¸èƒ½è®¿é—®<code>1.x nacos-server</code></p>
<p><code>nacos2.x</code>ä¸<code>1.x</code>çš„å˜åŒ–è¿˜æ˜¯æŒºå¤§çš„ï¼Œå°¤å…¶æ˜¯æˆ‘åœ¨ä½¿ç”¨é…ç½®ä¸­å¿ƒåŠŸèƒ½æ—¶ï¼ŒæŠ˜ç£¨æˆ‘ä¸¤å¤©ï¼Œæ€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ°é—®é¢˜è§£å†³æ–¹æ³•ã€‚æ›´æˆ‘å¥‡æ€ªçš„æ˜¯ä¹‹å‰å­¦ä¹ <code>nacos</code>æ—¶æ­çš„ä¸€ä¸ªé¡¹ç›®èƒ½æ­£å¸¸å¯åŠ¨ï¼Œæ³¨å†Œå¹¶è®¿é—®åˆ°é…ç½®æ–‡ä»¶ï¼Œç„¶è€Œæ–°æ­å»ºçš„é¡¹ç›®å°±æ˜¯å„ç§é—®é¢˜ï¼Œ<code>Could not resolve placeholder</code>ï¼Œ<code>Connection refused: no further information: xxxxx:9848</code>ç­‰ç­‰æŠ¥é”™ï¼Œæ›´å…³é”®çš„æ˜¯æˆ‘ä½¿ç”¨<code>maven</code>ç®¡ç†é¡¹ç›®ç¯å¢ƒï¼Œé€šè¿‡<code>@@</code>çš„æ–¹å¼é…ç½®çš„é…ç½®æ–‡ä»¶ï¼ŒæœŸé—´è¿˜ä¸€ç›´æ€€ç–‘æ˜¯è¿™ä¸ªçš„åŸå› ã€‚æ€»ä¹‹ï¼ŒæŸ¥äº†è®¸å¤šåšå®¢ï¼Œçœ‹äº†å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œä¹Ÿéƒ½å°è¯•äº†ï¼Œæœ€ç»ˆè¿˜æ˜¯è§£å†³äº†ã€‚</p>
<h1 id="é—®é¢˜æ€»ç»“">é—®é¢˜æ€»ç»“</h1>
<p>å£°æ˜ï¼šæˆ‘æ²¡æœ‰ç»†æŠ æœ¬è´¨ï¼Œæˆ–æ˜¯è¯´æºç ï¼Œåªæ˜¯è¯´æˆ‘é‡åˆ°é—®é¢˜çš„è§£å†³ï¼Œå¸®åŠ©å…¶ä»–äººé¿å…è¿™äº›é—®é¢˜ã€‚</p>
<h2 id="ç‰ˆæœ¬ç»Ÿä¸€">ç‰ˆæœ¬ç»Ÿä¸€</h2>
<p>è¿™ä¸ªæ˜¯å¿…é¡»çš„ï¼Œä¸€å®šè¦æŒ‰ç…§å®˜æ–¹çš„ç‰ˆæœ¬å¯¹åº”å…³ç³»å¼•å…¥ï¼Œä¸ç„¶ç¬¬ä¸€æ­¥å°±é”™äº†ã€‚</p>
<h2 id="æ˜ç¡®ç‰ˆæœ¬">æ˜ç¡®ç‰ˆæœ¬</h2>
<p>æ˜ç¡®ç‰ˆæœ¬åå°±æ˜¯ç”¨å¯¹åº”çš„ä½¿ç”¨æ–¹å¼ï¼Œ<code>nacos2.x</code>ä¸<code>1.x</code>ï¼Œå‰é¢æåˆ°æˆ‘æ€€ç–‘è¿‡æ˜¯å› ä¸º<code>maven</code>å¯¹ç¯å¢ƒé…ç½®æ‰€ä»¥å¯¼è‡´æˆ‘ä½¿ç”¨<code>nacos</code>äº§ç”Ÿé—®é¢˜çš„ï¼Œåæ¥æ’æŸ¥å‡ºä¸æ˜¯å®ƒï¼Œä¹Ÿå°±ä¸å¸¦<code>maven</code>è®¨è®ºäº†ï¼Œ<a
href="https://blog.csdn.net/qq_41376740/article/details/122792411?spm=1001.2014.3001.5501">SpringCloud
+ Nacos é…åˆmavenï¼Œè¿›è¡Œç¯å¢ƒï¼ˆé…ç½®æ–‡ä»¶ï¼‰çš„åˆ‡æ¢ï¼Œdev/ prod/ test
ä¸‰ç§ç¯å¢ƒ</a>æ„Ÿå…´è¶£çš„çœ‹è¿™ç¯‡æ–‡ç« ã€‚</p>
<h2 id="æ–°ç‰¹æ€§åŠå…¶ä½¿ç”¨å¼•ç”¨">æ–°ç‰¹æ€§åŠå…¶ä½¿ç”¨ï¼ˆå¼•ç”¨ï¼‰</h2>
<ul>
<li>æ”¯æŒ <code>spring.config.import</code>
è¿™é‡Œå‡è®¾æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶(<code>bootstrap.yml</code>)ï¼Œå‡çº§åˆ°æ–°ç‰ˆæœ¬åº”è¯¥æ€ä¹ˆé…ç½®å‘¢</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># bootstrap.yml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">test.yml</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">        <span class="attr">extension-configs:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">dataId:</span> <span class="string">test01.yml</span></span><br><span class="line">            <span class="attr">group:</span> <span class="string">group_01</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">dataId:</span> <span class="string">test02.yml</span></span><br><span class="line">            <span class="attr">group:</span> <span class="string">group_02</span></span><br><span class="line">            <span class="attr">refresh:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªé…ç½®æ˜¯ç­‰ä»·çš„</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">import:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">optional:nacos:test.yml</span>  <span class="comment"># ç›‘å¬ DEFAULT_GROUP:test.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">optional:nacos:test01.yml?group=group_01</span> <span class="comment"># è¦†ç›–é»˜è®¤ groupï¼Œç›‘å¬ group_01:test01.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">optional:nacos:test02.yml?group=group_02&amp;refreshEnabled=false</span> <span class="comment"># ä¸å¼€å¯åŠ¨æ€åˆ·æ–°</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nacos:test03.yml</span> <span class="comment"># åœ¨æ‹‰å–nacosé…ç½®å¼‚å¸¸æ—¶ä¼šå¿«é€Ÿå¤±è´¥ï¼Œä¼šå¯¼è‡´ spring å®¹å™¨å¯åŠ¨å¤±è´¥</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹:</p>
<p>å¦‚æœä½¿ç”¨ <code>spring.config.import</code> å°±ä¸èƒ½ä½¿ç”¨
<code>bootstrap.yml/properties</code> å¼•å…¥é…ç½®çš„æ–¹å¼äº† !!!</p>
<p>å¦‚æœå¼•å…¥äº†<code>spring-cloud-starter-alibaba-nacos-config</code>ï¼Œå¹¶ä¸”ä½¿ç”¨
<code>import</code> æ–¹å¼å¯¼å…¥é…ç½®,é¡¹ç›®å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦å¼•å…¥äº†
<code>nacos:æ¡ç›®</code>ï¼Œå¦‚æœæ²¡æœ‰ <code>import nacos</code>
æ¡ç›®ï¼Œä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">The spring.config.import property is missing a nacos: entry</span><br><span class="line">Action:</span><br><span class="line">Add a spring.config.import=nacos: property to your configuration.</span><br><span class="line">    If configuration is not required add spring.config.import=optional:nacos: instead.</span><br><span class="line">    To <span class="built_in">disable</span> this check, <span class="built_in">set</span> spring.cloud.nacos.config.import-check.enabled=<span class="literal">false</span>.</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥æ‰‹åŠ¨é€šè®¾ç½®
<code>spring.cloud.nacos.config.import-check.enabled=false</code>
å…³é—­å®ƒï¼Œä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆåšï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥æ˜¯å¦å¼•å…¥å¤šä½™ä¾èµ–</p>
<p>å‡å¦‚æƒ³ä¿ç•™ä»¥å‰çš„ä½¿ç”¨æ–¹å¼
(<code>bootstrap</code>å¼•å…¥é…ç½®)ï¼Œä½ åªéœ€è¦æ·»åŠ ä¾èµ–
<code>pring-cloud-starter-bootstrap</code> ä¾èµ–ï¼Œä¸éœ€è¦ä¿®æ”¹ä¸€è¡Œä»£ç </p>
<p>æ–°ç‰ˆçš„é…ç½®æ–¹å¼æ˜¯æœ‰äº›ä¸åŒçš„ï¼Œæˆ‘çš„å»ºè®®è¿˜æ˜¯ä½¿ç”¨æ–°ç‰ˆå°±éµå¾ªæ–°ç‰ˆã€‚</p>
<h2 id="ç«¯å£å¼€æ”¾ä¸é…ç½®å»ºè®®">ç«¯å£å¼€æ”¾ä¸é…ç½®å»ºè®®</h2>
<p>æ–°ç‰ˆ<code>nacos</code>é™¤äº†éœ€è¦å¼€æ”¾<code>8848</code>å¤–è¿˜éœ€è¦<code>9848</code>ã€<code>9849</code>ç«¯å£ã€‚</p>
<p>ç”Ÿäº§å»ºè®®çš„è¯ï¼Œé™¤äº†ä¸¥æ ¼é™åˆ¶æº<code>ip</code>æ³¨å†Œè®¿é—®åˆ°<code>nacos</code>å¤–ï¼Œå»ºè®®æœ‰éœ€è¦çš„åŠ ä¸Šæƒé™è®¿é—®é…ç½®ï¼Œå¦å¤–å…³äº<code>namespace</code>ã€<code>group</code>ã€<code>dataid</code>ï¼Œå»ºè®®å¦‚ä¸‹:</p>
<p><code>namespace</code>:å»ºè®®ä¸<code>git</code>å¸¸é©»åˆ†æ”¯ä¸€è‡´ï¼Œå¦‚<code>dev</code>ã€<code>test</code>ã€<code>pre</code>ã€<code>prod</code>ï¼Œä¸€ä¸ªå‘½åç©ºé—´ä¸‹æœ‰ç€ä¸€æ•´å¥—ç±»åŒäºç”Ÿäº§çš„æœåŠ¡å’Œé…ç½®ã€‚</p>
<p><code>group</code>:å»ºè®®ä¸å›¢é˜Ÿç»„ç»‡æ¶æ„ä¸€è‡´ï¼Œå¦‚ï¼šæŠ€æœ¯ç ”å‘éƒ¨ã€ä¸­å°ç ”å‘éƒ¨ã€åå°ç ”å‘éƒ¨ã€å®¢æˆ·ç«¯ç ”å‘éƒ¨ã€æ•°æ®ç ”å‘éƒ¨ç­‰ç­‰ï¼Œå–å…¶è‹±æ–‡ç®€ç§°å³å¯</p>
<p><code>dataid</code>:å»ºè®®ä¸é¡¹ç›®åç§°ä¸€è‡´ï¼Œä¸€èˆ¬æ ¼å¼æ˜¯<code>xxx-xxx-xxx</code>ï¼Œè¿™ä¸ªå°±è‡ªç”±ä¸€ç‚¹äº†ï¼Œçº¦å®šä¸€ä¸‹å°±å¥½ï¼Œé—®é¢˜ä¸å¤§</p>
<h2 id="nacos-namingæ¨é€å¤±è´¥failedpushå¼‚å¸¸æŒ‡æ ‡æ¿€å¢">Nacos
namingæ¨é€å¤±è´¥/failedPushå¼‚å¸¸æŒ‡æ ‡æ¿€å¢</h2>
<p><a href="https://github.com/alibaba/nacos/issues/6841">Nacos
namingæ¨é€å¤±è´¥æ•° Â· Issue #6841</a></p>
<p><a
href="https://github.com/alibaba/nacos/issues/8676">Nacosé›†ç¾¤failedPushå¼‚å¸¸æŒ‡æ ‡æ¿€å¢
Â· Issue #8676</a></p>
<p>å› ä¸ºæˆ‘æ˜¯ä½¿ç”¨å®˜ç½‘<code>nacos</code>å•èŠ‚ç‚¹<code>docker-compose</code>éƒ¨ç½²æ–¹å¼éƒ¨ç½²çš„ï¼Œå¦å¤–å¸¦äº†<code>prometheus</code>å’Œ<code>grafana</code>ï¼Œè€Œä¸”é…ç½®äº†<code>nacos</code>ç›‘æ§å’Œé’‰é’‰æŠ¥è­¦ï¼Œæ‰€ä»¥ä¹Ÿä¸€ç›´è¢«è¿™ä¸ªé—®é¢˜å›°æ‰°ã€‚</p>
<p>å¦‚æœ‰ç±»ä¼¼ç–‘é—®ï¼Œå…ˆçœ‹ä¸Šé¢<code>Issue</code>ï¼Œå…¶å®ä¸Šé¢çš„æ²¡æœ‰ç»™æˆ‘å¤ªå¤šå¸®åŠ©ï¼Œåè€Œå°†nacosé‡å¯ä¸€ä¸‹å°±æ²¡é—®é¢˜ï¼Œæˆ‘çŒœæµ‹å¾ˆæœ‰å¯èƒ½æ˜¯ä¹‹å‰é”™è¯¯æ³¨å†Œåè¯»å–é…ç½®å¤±è´¥æ¬¡æ•°å¤ªå¤šæœ‰å…³ï¼Œæˆ‘æš‚æ—¶ä¹Ÿä¸æƒ³æ·±ç©¶äº†ã€‚</p>
]]></content>
      <tags>
        <tag>Spring Cloud Alibaba</tag>
        <tag>Spring Boot</tag>
        <tag>Spring Cloud</tag>
      </tags>
  </entry>
  <entry>
    <title>Python pipä½¿ç”¨å›½å†…æºï¼ˆè½¬è½½ï¼‰</title>
    <url>/article/f551fc56.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://www.jianshu.com/p/dfbb90995a2c">åŸæ–‡</a></p>
<span id="more"></span>
<h1 id="å›½å†…æº">å›½å†…æº</h1>
<ul>
<li>æ¸…åï¼šhttps://pypi.tuna.tsinghua.edu.cn/simple/</li>
<li>é˜¿é‡Œäº‘ï¼šhttp://mirrors.aliyun.com/pypi/simple/</li>
<li>ä¸­å›½ç§‘æŠ€å¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple/</li>
<li>åä¸­ç†å·¥å¤§å­¦ï¼šhttp://pypi.hustunique.com/</li>
<li>å±±ä¸œç†å·¥å¤§å­¦ï¼šhttp://pypi.sdutlinux.org/</li>
<li>è±†ç“£ï¼šhttp://pypi.douban.com/simple/</li>
</ul>
<blockquote>
<p>æ–°ç‰ˆubuntuè¦æ±‚ä½¿ç”¨httpsæºï¼Œè¦æ³¨æ„ã€‚</p>
</blockquote>
<h1 id="ä¸´æ—¶ä½¿ç”¨">ä¸´æ—¶ä½¿ç”¨</h1>
<p>å¯ä»¥åœ¨ä½¿ç”¨pipçš„æ—¶å€™åŠ å‚æ•°
<code>-i https://pypi.tuna.tsinghua.edu.cn/simple</code>
ä¾‹å¦‚ï¼š<code>pip install -i http://mirrors.aliyun.com/pypi/simple/ tensorflow</code>ï¼Œè¿™æ ·å°±ä¼šä»é˜¿é‡Œäº‘è¿™è¾¹çš„é•œåƒå»å®‰è£…tensorflowåº“ã€‚</p>
<h1 id="æ°¸ä¹…ä½¿ç”¨">æ°¸ä¹…ä½¿ç”¨</h1>
<p>è¯·å‚è€ƒ<a href="https://www.jianshu.com/p/dfbb90995a2c">åŸæ–‡</a></p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ•°æ®åˆ†ææ•°æ®æº</title>
    <url>/article/74f926a1.html</url>
    <content><![CDATA[<h1 id="ä¸¤ä¸ªæ•°æ®ç¤¾åŒº">ä¸¤ä¸ªæ•°æ®ç¤¾åŒº</h1>
<p><a href="https://www.kaggle.com/">kaggle</a></p>
<p><a href="https://www.kesci.com/">å’Œé²¸ç¤¾åŒºKesci</a></p>
<p>åœ¨ç”¨pythonåšæ•°æ®åˆ†ææ—¶å¯ä»¥ä»è¿™æ‰¾åˆ°æƒ³è¦çš„æ•°æ®æºï¼Œå½“ç„¶æ›´é‡è¦çš„æ˜¯ç¤¾åŒºäº¤æµå­¦ä¹ ã€‚</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatisä¸­ä¸¤ç§å–å€¼ç¬¦å·åŒºåˆ«</title>
    <url>/article/dc4db25f.html</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨Mybatiså†™sqlè¯­å¥æ—¶å¸¸ä¼šç”¨åˆ°#{}å’Œ${}åŠ¨æ€å®ç°å‚æ•°ä¼ é€’ï¼Œè¿™é‡Œå°±æ˜¯æ¥è®°å½•ä¸€ä¸‹è¿™ä¸¤è€…çš„åŒºåˆ«ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1gs411j7kA">MyBatisè§†é¢‘æ•™ç¨‹</a></p>
<p>[#{}ä¸<span
class="math inline">\({}çš„åŒºåˆ«](https://blog.csdn.net/qian_qian_123/article/details/92844194?ops_request_misc=%25257B%252522request%25255Fid%252522%25253A%252522160759025519726885835134%252522%25252C%252522scm%252522%25253A%25252220140713.130102334..%252522%25257D&amp;request_id=160759025519726885835134&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-3-92844194.pc_search_result_no_baidu_js&amp;utm_term=#{}%E4%B8%8E\)</span>{}%E5%8C%BA%E5%88%AB)</p>
<span id="more"></span>
<h1 id="åŒºåˆ«">åŒºåˆ«</h1>
<p>è¾“å…¥å‚æ•°: parameterType</p>
<p>ç±»å‹ä¸ºç®€å•ç±»å‹(8ä¸ªåŸºæœ¬ç±»å‹+String)</p>
<blockquote>
<p>a</p>
</blockquote>
<p>#{ä»»æ„å€¼}</p>
<p>${value}ï¼Œå…¶ä¸­çš„æ ‡è¯†ç¬¦åªèƒ½æ˜¯value</p>
<blockquote>
<p>b</p>
</blockquote>
<p>#{}è‡ªåŠ¨ç»™Stringç±»å‹åŠ ä¸Š' '(è‡ªåŠ¨ç±»å‹è½¬æ¢)</p>
<p>${}åŸæ ·è¾“å‡ºï¼Œä½†æ˜¯é€‚åˆäºåŠ¨æ€æ’åº(åŠ¨æ€å­—æ®µ)</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> sno,sname,sage <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="operator">=</span> #&#123;<span class="keyword">value</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»·</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> sno,sname,sage <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="operator">=</span><span class="string">&#x27;$&#123;value&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>åŠ¨æ€æ’åº</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> sno,sname,sage <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> $&#123;<span class="keyword">value</span>&#125; <span class="keyword">asc</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>c</p>
</blockquote>
<p>#{}å¯ä»¥é˜²æ­¢SQLæ³¨å…¥</p>
<p>${}ä¸é˜²æ­¢</p>
<p><a
href="https://blog.csdn.net/q_all_is_well/article/details/81559612">åŸå› </a></p>
]]></content>
      <tags>
        <tag>MySQL</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonè¯¾ç¨‹ä½œä¸š</title>
    <url>/article/bfa801bc.html</url>
    <content><![CDATA[<h1 id="è¯¾ç¨‹è®ºæ–‡">è¯¾ç¨‹è®ºæ–‡</h1>
<p>Pythonè¯¾ç¨‹æœ€ç»ˆè€ƒæ ¸æ–¹å¼æ˜¯è¯¾ç¨‹è®ºæ–‡ï¼Œè¦æ±‚å°±æ˜¯åšä¸€ä¸ªæ•°æ®åˆ†æï¼Œæäº¤æ–‡æ¡£ã€æºç åŠæ•°æ®æºã€‚</p>
<span id="more"></span>
<h2 id="æ•°æ®æº">æ•°æ®æº</h2>
<p>æˆ‘çš„æ•°æ®æºæ¥è‡ª<a href="https://www.kesci.com/">å’Œé²¸ç¤¾åŒº</a>çš„<a
href="https://www.kesci.com/mw/dataset/5d91aa61037db3002d3b5d53/file">ä¸–ç•Œå¹¸ç¦æŠ¥å‘Š</a>ã€‚</p>
<h2 id="ç›®æ ‡">ç›®æ ‡</h2>
<p>åˆ†æçš„ä¸»è¦ç›®æ ‡æœ‰ï¼Œæœ¬æ¬¡è°ƒæŸ¥æ‰€æœ‰å›½å®¶æˆ–åœ°åŒºçš„å…¨ä¸–ç•ŒåŒºåŸŸæ•°é‡åˆ†å¸ƒçŠ¶å†µï¼Œç”±æ­¤å±•å¼€åŒºåŸŸæ•´ä½“å¹¸ç¦æ„Ÿå¯¹æ¯”ï¼Œå¦‚å„å¤§åœ°åŒºå¹¸ç¦æŒ‡æ•°å¯¹æ¯”ï¼Œå„å¤§åœ°åŒºå¹¸ç¦æŒ‡æ•°åŒºé—´åˆ†å¸ƒï¼Œ2020å¹´ä¸–ç•Œå¹¸ç¦æŠ¥å‘Šå‰10åå’Œå10åï¼Œæœ€åé€šè¿‡å¯è§†åŒ–ï¼Œå¦‚çƒ­åŠ›å›¾åˆ†å¸ƒï¼Œç›´è§‚ä½“ç°å¹¸ç¦æŒ‡æ•°ä¸è°ƒæŸ¥é¡¹ç›®ä¸­ç›¸å…³å…³ç³»ï¼Œå¹¸ç¦åœ°å›¾ï¼Œç›´è§‚ä½“ç°å„å›½å®¶åœ°åŒºå¹¸ç¦æŒ‡æ•°å¯¹æ¯”ã€‚</p>
<h2 id="æ–¹æ³•åŠç±»åº“">æ–¹æ³•åŠç±»åº“</h2>
<p>å…¶ä¸­ä¸»è¦åˆ†ææ–¹æ³•æ˜¯Pythonçš„numpyå’Œpandasçš„ç›¸å…³æ•°æ®åˆ†ææ–¹æ³•ï¼Œå†åŠ ä¸Šä¸€äº›å¯è§†åŒ–åº“æ–¹æ³•ä¸»è¦æœ‰matplotlibå’Œseabornï¼Œæ›´é‡è¦çš„æ˜¯pyechartsçš„å„ç§å·¥å…·ï¼Œåº“é‡Œçš„å¾ˆå¤šå¯è§†åŒ–éƒ½éå¸¸æ¼‚äº®ï¼Œå°¤å…¶æ˜¯ä¸–ç•Œåœ°å›¾ã€‚ç»è¿‡åˆ†ææ•°æ®å’Œå¯è§†åŒ–ï¼Œå¾—å‡ºåˆ†æç»“è®ºã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.kesci.com/mw/project/5fb78386cced1800302a94f9">ä¸–ç•Œå¹¸ç¦æŒ‡æ•°åˆ†æå“ªä¸ªå›½å®¶æœ€å¹¸ç¦</a></p>
<p><a
href="https://blog.csdn.net/qq_31468321/article/details/84593604">æ•°æ®å¯è§†åŒ–--ä¸–ç•Œå¹¸ç¦æŒ‡æ•°æŠ¥å‘Š</a></p>
<p><a
href="https://edu.cda.cn/group/19/thread/279">ä¸–ç•Œå¹¸ç¦æŠ¥å‘Šæ•°æ®åˆ†æ</a></p>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>ç±»åº“å¯¼å…¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯è§†åŒ–</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar, Map, Line, Page, Pie, Grid</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options <span class="keyword">as</span> opts</span><br><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm</span><br><span class="line"><span class="keyword">import</span> statsmodels.formula.api <span class="keyword">as</span> smf</span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]  <span class="comment"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>  <span class="comment"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºè´Ÿå·</span></span><br></pre></td></tr></table></figure>
<p>è¯»å–æ•°æ®åŠæ•°æ®å¤„ç†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯»å…¥æ•°æ®ä¸æ•°æ®å¤„ç†</span></span><br><span class="line">s = <span class="string">r&#x27;C:\Users\86183\Desktop\è¯¾ç¨‹è®ºæ–‡\data&#x27;</span></span><br><span class="line">df_2018 = pd.read_csv(s+<span class="string">&#x27;/2018.csv&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line">df_2019 = pd.read_csv(s+<span class="string">&#x27;/2019.csv&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line">df_2020 = pd.read_csv(s+<span class="string">&#x27;/2020.csv&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ä¸å¿…è¦çš„ä¿¡æ¯</span></span><br><span class="line">df_2020 = df_2020.iloc[:, :<span class="number">12</span>]</span><br><span class="line">columns = [<span class="string">&#x27;Standard error of ladder score&#x27;</span>, <span class="string">&#x27;upperwhisker&#x27;</span>, <span class="string">&#x27;lowerwhisker&#x27;</span>]</span><br><span class="line">df_2020.drop(columns, axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">data_info</span>():</span><br><span class="line">    <span class="built_in">print</span>(df_2020.info())</span><br><span class="line">    <span class="built_in">print</span>(df_2020.describe())</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000fad23ffa7d37b3151887.jpg"
alt="æ•°æ®ä¿¡æ¯" />
<figcaption aria-hidden="true">æ•°æ®ä¿¡æ¯</figcaption>
</figure>
<p>ä¸»ä½“ <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¹¸ç¦åœ°å›¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">HappinessMap</span>():</span><br><span class="line">    x_data = df_2020[<span class="string">&#x27;Country name&#x27;</span>].tolist()</span><br><span class="line">    y_data = df_2020[<span class="string">&#x27;Ladder score&#x27;</span>].<span class="built_in">round</span>(<span class="number">2</span>).tolist()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åœ°å›¾</span></span><br><span class="line">    map1 = Map()</span><br><span class="line">    map1.add(<span class="string">&#x27;&#x27;</span>, [<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(x_data, y_data)], maptype=<span class="string">&#x27;world&#x27;</span>,)</span><br><span class="line">    map1.set_series_opts(label_opts=opts.LabelOpts(is_show=<span class="literal">False</span>))</span><br><span class="line">    map1.set_global_opts(title_opts=opts.TitleOpts(title=<span class="string">&#x27;Happiness Score&#x27;</span>),</span><br><span class="line">    visualmap_opts=opts.VisualMapOpts(max_=<span class="number">8</span>, is_piecewise=<span class="literal">True</span>,</span><br><span class="line">        pieces=[&#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;min&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;0-3&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;min&#x27;</span>: <span class="number">3.1</span>,</span><br><span class="line">                    <span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;3-4&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;min&#x27;</span>: <span class="number">4.1</span>,</span><br><span class="line">                    <span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;4-5&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;min&#x27;</span>: <span class="number">5.1</span>,</span><br><span class="line">                    <span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;5-6&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;min&#x27;</span>: <span class="number">6.1</span>,</span><br><span class="line">                    <span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;6-7&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">8</span>, <span class="string">&#x27;min&#x27;</span>: <span class="number">7.1</span>, <span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;7-8&#x27;</span>&#125;]</span><br><span class="line">        ),</span><br><span class="line">                        )</span><br><span class="line">    map1.render(<span class="string">&quot;å¹¸ç¦åœ°å›¾.html&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f3943ffa7d37b3111a15.jpg"
alt="å¹¸ç¦åœ°å›¾" />
<figcaption aria-hidden="true">å¹¸ç¦åœ°å›¾</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å„å¤§åœ°åŒºçš„å¹³å‡å¹¸ç¦æŒ‡æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">country_score_of_every_region</span>():</span><br><span class="line">    df_m = df_2020.groupby(<span class="string">&#x27;Regional indicator&#x27;</span>)[<span class="string">&#x27;Ladder score&#x27;</span>].mean().sort_values()</span><br><span class="line">    x_data = df_m .index.tolist()</span><br><span class="line">    y_data = df_m .values.<span class="built_in">round</span>(<span class="number">2</span>).tolist()</span><br><span class="line">    grid = Grid()</span><br><span class="line">    bar1 = Bar()</span><br><span class="line">    bar1.add_yaxis(<span class="string">&#x27;&#x27;</span>,y_data) </span><br><span class="line">    bar1.add_xaxis(x_data)</span><br><span class="line">    bar1.set_global_opts(title_opts=opts.TitleOpts(title=<span class="string">&#x27;Average Happiness Score by Regional Indicator&#x27;</span>))</span><br><span class="line">    bar1.set_series_opts(label_opts=opts.LabelOpts(is_show=<span class="literal">True</span>, position=<span class="string">&#x27;right&#x27;</span>),</span><br><span class="line">            markline_opts=opts.MarkLineOpts(</span><br><span class="line">            data=[opts.MarkLineItem(type_=<span class="string">&quot;average&quot;</span>, name=<span class="string">&quot;å¹³å‡å€¼&quot;</span>)])) </span><br><span class="line">    bar1.set_colors(<span class="string">&#x27;CadetBlue&#x27;</span>)</span><br><span class="line">    bar1.reversal_axis()</span><br><span class="line"></span><br><span class="line">    grid.add(bar1, grid_opts=opts.GridOpts(pos_left=<span class="string">&quot;20%&quot;</span>))</span><br><span class="line"></span><br><span class="line">    grid.render(<span class="string">&quot;å„å¤§åœ°åŒºçš„å¹³å‡å¹¸ç¦æŒ‡æ•°.html&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f3ec3ffa7d37b31156a6.jpg"
alt="å¾—åˆ†" />
<figcaption aria-hidden="true">å¾—åˆ†</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å„å¹¸ç¦åŒºé—´çš„ç™¾åˆ†æ¯”</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regions_country_pie</span>():</span><br><span class="line">    df2 = df_2020.iloc[:,:<span class="number">3</span>]</span><br><span class="line">    df2[<span class="string">&#x27;score_group&#x27;</span>] = pd.cut(x=df2[<span class="string">&#x27;Ladder score&#x27;</span>],bins=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]).astype(<span class="string">&#x27;str&#x27;</span>)</span><br><span class="line">    c = (</span><br><span class="line">        Pie()</span><br><span class="line">        .add(</span><br><span class="line">        <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        [<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(df2.groupby(<span class="string">&#x27;score_group&#x27;</span>).score_group.count().index.tolist(),df2.groupby(<span class="string">&#x27;score_group&#x27;</span>).score_group.count().values.tolist())],</span><br><span class="line">            radius=[<span class="string">&quot;30%&quot;</span>, <span class="string">&quot;75%&quot;</span>],</span><br><span class="line">            rosetype=<span class="string">&quot;area&quot;</span>,</span><br><span class="line">        label_opts = opts.LabelOpts(position=<span class="string">&#x27;right&#x27;</span>),</span><br><span class="line">        )</span><br><span class="line">        .set_global_opts(</span><br><span class="line">        title_opts=opts.TitleOpts(title=<span class="string">&#x27;Number of Countries by Happiness Score Categories&#x27;</span>),</span><br><span class="line">        legend_opts=opts.LegendOpts(is_show=<span class="literal">False</span>),</span><br><span class="line">        )</span><br><span class="line">        .set_series_opts(label_opts=opts.LabelOpts(formatter=<span class="string">&quot;&#123;b&#125;:\n &#123;c&#125; (&#123;d&#125;%)&quot;</span>))</span><br><span class="line">    )</span><br><span class="line">    c.render(<span class="string">&quot;å„å¹¸ç¦åŒºé—´çš„ç™¾åˆ†æ¯”.html&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f4073ffa7d37b3116694.jpg"
alt="æ¯”ä¾‹" />
<figcaption aria-hidden="true">æ¯”ä¾‹</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰€æœ‰å›½å®¶åœ¨ä¸åŒåŒºåŸŸå†…çš„åˆ†éƒ¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">every_regions_country_num</span>():</span><br><span class="line">    plt_cols = [<span class="string">&#x27;Regional indicator&#x27;</span>, <span class="string">&#x27;Ladder score&#x27;</span>, <span class="string">&#x27;Country name&#x27;</span>]</span><br><span class="line">    plt_da = df_2020[plt_cols]</span><br><span class="line">    plt.figure()</span><br><span class="line">    sns.countplot(x=<span class="string">&#x27;Regional indicator&#x27;</span>, data=plt_da)</span><br><span class="line">    plt.xticks(rotation=<span class="string">&#x27;vertical&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Country name count of Regional indicator&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f3c13ffa7d37b31136e3.jpg"
alt="åˆ†å¸ƒ" />
<figcaption aria-hidden="true">åˆ†å¸ƒ</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 2020å‰10å10</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Top_and_Bottem_10_country_happiness</span>():</span><br><span class="line">    rank_top10 = df_2020.head(</span><br><span class="line">        <span class="number">10</span>)[[<span class="string">&#x27;Country name&#x27;</span>, <span class="string">&#x27;Ladder score&#x27;</span>]]</span><br><span class="line">    last_top10 = df_2020.tail(</span><br><span class="line">        <span class="number">10</span>)[[<span class="string">&#x27;Country name&#x27;</span>, <span class="string">&#x27;Ladder score&#x27;</span>]]</span><br><span class="line">    plt.figure()</span><br><span class="line">    ax = plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">    sns.barplot(x=<span class="string">&#x27;Country name&#x27;</span>, y=<span class="string">&#x27;Ladder score&#x27;</span>, data=rank_top10)</span><br><span class="line">    plt.xticks(rotation=<span class="string">&#x27;vertical&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Top 10 Country name&#x27;</span>)</span><br><span class="line">    ax = plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, sharey=ax)</span><br><span class="line">    sns.barplot(x=<span class="string">&#x27;Country name&#x27;</span>, y=<span class="string">&#x27;Ladder score&#x27;</span>, data=last_top10)</span><br><span class="line">    plt.xticks(rotation=<span class="string">&#x27;vertical&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Bottem 10 Country name&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f41b3ffa7d37b3117070.jpg"
alt="2020å‰10å10" />
<figcaption aria-hidden="true">2020å‰10å10</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¹¸ç¦æŒ‡æ•°ç›¸å…³æ€§çƒ­åŠ›å›¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Heat_map</span>():</span><br><span class="line">    cor = df_2020.corr()</span><br><span class="line">    plt.figure(figsize=(<span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line">    plt.title(<span class="string">&#x27;Correlation between numeric variables&#x27;</span>, fontsize=<span class="number">18</span>)</span><br><span class="line">    sns.heatmap(cor, square=<span class="literal">True</span>, cmap=<span class="string">&quot;vlag&quot;</span>, annot=<span class="literal">True</span>, linewidths=<span class="number">0.5</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f4333ffa7d37b3117aae.jpg"
alt="çƒ­åŠ›å›¾" />
<figcaption aria-hidden="true">çƒ­åŠ›å›¾</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">XXX_Score</span>(<span class="params">x</span>):</span><br><span class="line">    plt.figure()</span><br><span class="line">    ax = plt.subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    fm_2018 = sm.OLS(df_2018[<span class="string">&#x27;Score&#x27;</span>], sm.add_constant(</span><br><span class="line">        df_2018[x])).fit()</span><br><span class="line">    plt.scatter(df_2018[x], df_2018[<span class="string">&#x27;Score&#x27;</span>])</span><br><span class="line">    plt.plot(df_2018[x], fm_2018.fittedvalues)</span><br><span class="line">    plt.title(<span class="string">&#x27;2018-2020 &#x27;</span>+x+<span class="string">&#x27; and Ladder score&#x27;</span>, fontsize=<span class="number">18</span>)</span><br><span class="line">    ax = plt.subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fm_2019 = sm.OLS(df_2019[<span class="string">&#x27;Score&#x27;</span>], sm.add_constant(</span><br><span class="line">        df_2019[x])).fit()</span><br><span class="line">    plt.scatter(df_2019[x], df_2019[<span class="string">&#x27;Score&#x27;</span>])</span><br><span class="line">    plt.plot(df_2019[x], fm_2019.fittedvalues)</span><br><span class="line">    ax = plt.subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    fm = sm.OLS(df_2020[<span class="string">&#x27;Ladder score&#x27;</span>], sm.add_constant(</span><br><span class="line">        df_2020[x])).fit()</span><br><span class="line">    plt.scatter(df_2020[x], df_2020[<span class="string">&#x27;Ladder score&#x27;</span>])</span><br><span class="line">    plt.plot(df_2020[x], fm.fittedvalues)</span><br><span class="line"></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># GDPå’Œå¹¸ç¦å¾—åˆ†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">GDP_Score</span>():</span><br><span class="line">    plt.figure()</span><br><span class="line">    ax = plt.subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    fm_2018 = sm.OLS(df_2018[<span class="string">&#x27;Score&#x27;</span>], sm.add_constant(</span><br><span class="line">        df_2018[<span class="string">&#x27;GDP per capita&#x27;</span>])).fit()</span><br><span class="line">    plt.scatter(df_2018[<span class="string">&#x27;GDP per capita&#x27;</span>], df_2018[<span class="string">&#x27;Score&#x27;</span>])</span><br><span class="line">    plt.plot(df_2018[<span class="string">&#x27;GDP per capita&#x27;</span>], fm_2018.fittedvalues)</span><br><span class="line">    plt.title(<span class="string">&#x27;2018-2020 GDP per capita and Ladder score&#x27;</span>, fontsize=<span class="number">18</span>)</span><br><span class="line">    ax = plt.subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fm_2019 = sm.OLS(df_2019[<span class="string">&#x27;Score&#x27;</span>], sm.add_constant(</span><br><span class="line">        df_2019[<span class="string">&#x27;GDP per capita&#x27;</span>])).fit()</span><br><span class="line">    plt.scatter(df_2019[<span class="string">&#x27;GDP per capita&#x27;</span>], df_2019[<span class="string">&#x27;Score&#x27;</span>])</span><br><span class="line">    plt.plot(df_2019[<span class="string">&#x27;GDP per capita&#x27;</span>], fm_2019.fittedvalues)</span><br><span class="line">    ax = plt.subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    fm_2020 = sm.OLS(df_2020[<span class="string">&#x27;Ladder score&#x27;</span>], sm.add_constant(</span><br><span class="line">        df_2020[<span class="string">&#x27;Logged GDP per capita&#x27;</span>])).fit()</span><br><span class="line">    plt.scatter(df_2020[<span class="string">&#x27;Logged GDP per capita&#x27;</span>], df_2020[<span class="string">&#x27;Ladder score&#x27;</span>])</span><br><span class="line">    plt.plot(df_2020[<span class="string">&#x27;Logged GDP per capita&#x27;</span>], fm_2020.fittedvalues)</span><br><span class="line"></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Healthyå’Œå¹¸ç¦å¾—åˆ†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Healthy_Score</span>():</span><br><span class="line">    XXX_Score(<span class="string">&#x27;Healthy life expectancy&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Socialsupportå’Œå¹¸ç¦å¾—åˆ†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Socialsupport_Score</span>():</span><br><span class="line">    XXX_Score(<span class="string">&#x27;Social support&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Freedomå’Œå¹¸ç¦å¾—åˆ†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Freedom_Score</span>():</span><br><span class="line">    XXX_Score(<span class="string">&#x27;Freedom to make life choices&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generosityå’Œå¹¸ç¦å¾—åˆ†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Generosity_Score</span>():</span><br><span class="line">    XXX_Score(<span class="string">&#x27;Generosity&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Corruptionå’Œå¹¸ç¦å¾—åˆ†(å‡ºé”™ï¼Œ2018å¹´æ•°æ®æœ‰nan)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Corruption_Score</span>():</span><br><span class="line">    XXX_Score(<span class="string">&#x27;Perceptions of corruption&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000f4cf3ffa7d37b311c150.jpg"
alt="æ‹Ÿåˆ1" />
<figcaption aria-hidden="true">æ‹Ÿåˆ1</figcaption>
</figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000fafe3ffa7d37b31530ea.jpg"
alt="æ‹Ÿåˆ2" />
<figcaption aria-hidden="true">æ‹Ÿåˆ2</figcaption>
</figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6000fb203ffa7d37b3153d4a.jpg"
alt="æ‹Ÿåˆ3" />
<figcaption aria-hidden="true">æ‹Ÿåˆ3</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¹¸ç¦æŠ¥å‘Šä¸­çš„ä¸­å›½è¿‘ä¸‰å¹´å¯¹æ¯”</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">All_China</span>():</span><br><span class="line">    l0=[<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;2020&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    df_2018_china=df_2018.loc[df_2018[<span class="string">&#x27;Country or region&#x27;</span>] == <span class="string">&#x27;China&#x27;</span>]</span><br><span class="line">    df_2019_china=df_2019.loc[df_2019[<span class="string">&#x27;Country or region&#x27;</span>] == <span class="string">&#x27;China&#x27;</span>]</span><br><span class="line">    df_2020_china=df_2020.loc[df_2020[<span class="string">&#x27;Country name&#x27;</span>] == <span class="string">&#x27;China&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    la1=[df_2018[<span class="string">&#x27;Score&#x27;</span>].mean(),df_2019[<span class="string">&#x27;Score&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Ladder score&#x27;</span>].mean()]</span><br><span class="line">    lc1=df_2018_china[<span class="string">&#x27;Score&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;Score&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Ladder score&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    la2=[df_2018[<span class="string">&#x27;GDP per capita&#x27;</span>].mean(),df_2019[<span class="string">&#x27;GDP per capita&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Logged GDP per capita&#x27;</span>].mean()]</span><br><span class="line">    lc2=df_2018_china[<span class="string">&#x27;GDP per capita&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;GDP per capita&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Logged GDP per capita&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    la3=[df_2018[<span class="string">&#x27;Social support&#x27;</span>].mean(),df_2019[<span class="string">&#x27;Social support&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Social support&#x27;</span>].mean()]</span><br><span class="line">    lc3=df_2018_china[<span class="string">&#x27;Social support&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;Social support&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Social support&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    la4=[df_2018[<span class="string">&#x27;Healthy life expectancy&#x27;</span>].mean(),df_2019[<span class="string">&#x27;Healthy life expectancy&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Healthy life expectancy&#x27;</span>].mean()]</span><br><span class="line">    lc4=df_2018_china[<span class="string">&#x27;Healthy life expectancy&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;Healthy life expectancy&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Healthy life expectancy&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    la5=[df_2018[<span class="string">&#x27;Freedom to make life choices&#x27;</span>].mean(),df_2019[<span class="string">&#x27;Freedom to make life choices&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Freedom to make life choices&#x27;</span>].mean()]</span><br><span class="line">    lc5=df_2018_china[<span class="string">&#x27;Freedom to make life choices&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;Freedom to make life choices&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Freedom to make life choices&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    la6=[df_2018[<span class="string">&#x27;Generosity&#x27;</span>].mean(),df_2019[<span class="string">&#x27;Generosity&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Generosity&#x27;</span>].mean()]</span><br><span class="line">    lc6=df_2018_china[<span class="string">&#x27;Generosity&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;Generosity&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Generosity&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    la7=[df_2018[<span class="string">&#x27;Perceptions of corruption&#x27;</span>].mean(),df_2019[<span class="string">&#x27;Perceptions of corruption&#x27;</span>].mean(),df_2020[<span class="string">&#x27;Perceptions of corruption&#x27;</span>].mean()]</span><br><span class="line">    lc7=df_2018_china[<span class="string">&#x27;Perceptions of corruption&#x27;</span>].tolist()+df_2019_china[<span class="string">&#x27;Perceptions of corruption&#x27;</span>].tolist()+df_2020_china[<span class="string">&#x27;Perceptions of corruption&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line">    bar=(</span><br><span class="line">        Bar()</span><br><span class="line">        .add_xaxis(l0)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸­å›½å¹¸ç¦æŒ‡æ•°&quot;</span>,lc1)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸­å›½GDPæŒ‡æ•°&quot;</span>,lc2)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸­å›½SocialæŒ‡æ•°&quot;</span>,lc3)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸­å›½HealthyæŒ‡æ•°&quot;</span>,lc4)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸­å›½FreedomæŒ‡æ•°&quot;</span>,lc5)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸­å›½GenerosityæŒ‡æ•°&quot;</span>,lc6)</span><br><span class="line">        <span class="comment"># .add_yaxis(&quot;ä¸­å›½CorruptionæŒ‡æ•°&quot;,lc7)</span></span><br><span class="line">    )</span><br><span class="line">    line=(</span><br><span class="line">        Line()</span><br><span class="line">        .add_xaxis(l0)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸–ç•Œå¹¸ç¦æŒ‡æ•°&quot;</span>,la1)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸–ç•ŒGDPæŒ‡æ•°&quot;</span>,la2)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸–ç•ŒSocialæŒ‡æ•°&quot;</span>,la3)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸–ç•ŒHealthyæŒ‡æ•°&quot;</span>,la4)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸–ç•ŒFreedomæŒ‡æ•°&quot;</span>,la5)</span><br><span class="line">        .add_yaxis(<span class="string">&quot;ä¸–ç•ŒGenerosityæŒ‡æ•°&quot;</span>,la6)</span><br><span class="line">        <span class="comment"># .add_yaxis(&quot;ä¸–ç•ŒCorruptionæŒ‡æ•°&quot;,la7)</span></span><br><span class="line">    )</span><br><span class="line">    bar.overlap(line).render(<span class="string">&quot;2018-2020ä¸­å›½ä¸ä¸–ç•Œå¹³å‡æ°´å¹³å¯¹æ¯”.html&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;main&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(df_2020)</span></span><br><span class="line"><span class="comment"># data_info()</span></span><br><span class="line"><span class="comment"># HappinessMap()</span></span><br><span class="line"><span class="comment"># country_score_of_every_region()</span></span><br><span class="line"><span class="comment"># regions_country_pie()</span></span><br><span class="line"><span class="comment"># every_regions_country_num()</span></span><br><span class="line"><span class="comment"># Top_and_Bottem_10_country_happiness()</span></span><br><span class="line"><span class="comment"># Heat_map()</span></span><br><span class="line"><span class="comment"># GDP_Score()</span></span><br><span class="line"><span class="comment"># Healthy_Score()</span></span><br><span class="line"><span class="comment"># Socialsupport_Score()</span></span><br><span class="line"><span class="comment"># Freedom_Score()</span></span><br><span class="line"><span class="comment"># Generosity_Score()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡ºé”™ï¼Œ2018æ•°æ®æœ‰nan</span></span><br><span class="line"><span class="comment"># Corruption_Score()</span></span><br><span class="line"></span><br><span class="line">All_China()</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ä¸Šé¢çš„å…¶å®å¤§éƒ¨åˆ†éƒ½æ˜¯å‚è€ƒè¿‡æ¥çš„ï¼Œè‡ªå·±ä¹Ÿæ·»åŠ äº†ä¸€äº›å†…å®¹ï¼Œä¸Šé¢ä¸»è¦æ˜¯ä»£ç å’Œå¯è§†åŒ–å›¾ç‰‡ï¼Œç»“è®ºåˆ†æå¹¶æ²¡æœ‰å±•ç°ã€‚æœŸé—´è¿˜ç”¨VSCodeä½¿ç”¨äº†Jupyter
Notebookï¼Œå‚è€ƒæ¥è‡ª<a
href="https://blog.csdn.net/qq_44486439/article/details/108043302">VSCodeæ’ä»¶
ä¼˜é›…åœ°ä½¿ç”¨Jupyter Notebook</a>ã€‚</p>
<p>pythonä¹Ÿåªå­¦äº†ä¸€å­¦æœŸï¼ŒæœŸé—´è¿˜å› ä¸ºè¯¾ç¨‹å®‰æ’åœ¨å‘¨å…­ï¼Œè¢«ä¼šè®¡è€ƒè¯•ã€ç«èµ›ã€æ•™å¸ˆèµ„æ ¼è¯ã€å››å…­çº§ã€ç ”ç©¶ç”Ÿè€ƒè¯•ç­‰å„ç§åŸå› ï¼Œå®é™…ä¸Šåªä¸Šäº†å‡ å‘¨ï¼Œæœ¬æ¥è¿™é—¨è¯¾å°±æ˜¯æ™®é€šçš„è€ƒæŸ¥è¯¾ï¼Œè€å¸ˆä¹Ÿæ²¡æœ‰è¦æ±‚é‚£ä¹ˆä¸¥æ ¼ï¼Œä½†æ˜¯å­¦ä¹ Pythonè¿˜æ˜¯æŒºæœ‰è¶£çš„ã€‚å¥½åƒæœ‰æ•°æ®è¡¨æ˜Pythonåœ¨å¹´åº•æ—¶è¶…è¶Šäº†javaï¼Œæˆä¸ºä½¿ç”¨æœ€å¤šçš„è¯­è¨€ï¼Œçš„ç¡®åœ¨æŸäº›æ–¹é¢Pythonä¸å…¶å®ƒè¯­è¨€æ˜¯æœ‰ç€ä¸å°‘çš„ä¼˜åŠ¿ï¼Œè¿‘å‡ å¹´äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ å¤§ç«ï¼Œä¸ä¹‹è„±ä¸å¼€å…³ç³»ã€‚</p>
]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQå­¦ä¹ </title>
    <url>/article/54e979b4.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>å®˜ç½‘ï¼š<a
href="https://www.rabbitmq.com/tutorials/tutorial-one-javascript.html">https://www.rabbitmq.com/tutorials/tutorial-one-javascript.html</a></p>
<p>Bç«™ï¼š<a
href="https://www.bilibili.com/video/BV1dE411K7MG">https://www.bilibili.com/video/BV1dE411K7MG</a></p>
<p>CSDNï¼š<a
href="https://blog.csdn.net/kavito/article/details/91403659">https://blog.csdn.net/kavito/article/details/91403659</a></p>
<h1 id="å®‰è£…">å®‰è£…</h1>
<p>https://blog.csdn.net/qq_44767162/article/details/114531509</p>
<span id="more"></span>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p><strong>æ¶ˆæ¯</strong>æŒ‡çš„æ˜¯ä¸¤ä¸ªåº”ç”¨é—´ä¼ é€’çš„æ•°æ®ã€‚æ•°æ®çš„ç±»å‹æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œå¯èƒ½åªåŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½åŒ…å«åµŒå…¥å¯¹è±¡ã€‚</p>
<p><strong>â€œæ¶ˆæ¯é˜Ÿåˆ—(Message
Queue)â€æ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿å­˜æ¶ˆæ¯çš„å®¹å™¨</strong>ã€‚åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œé€šå¸¸æœ‰ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸¤ä¸ªè§’è‰²ã€‚ç”Ÿäº§è€…åªè´Ÿè´£å‘é€æ•°æ®åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®å¤„ç†ï¼Œä»–ä¸ç®¡ã€‚æ¶ˆè´¹è€…åªè´Ÿè´£ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®å¤„ç†ï¼Œä»–ä¸ç®¡è¿™æ˜¯è°å‘é€çš„æ•°æ®ã€‚</p>
<figure>
<img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC83LzE5LzE3MzY3NTNjNDc1M2M2Zjk?x-oss-process=image/format,png"
alt="ç”Ÿäº§è€…-æ¶ˆæ¯é˜Ÿåˆ—-æ¶ˆè´¹è€…ç®€å›¾" />
<figcaption aria-hidden="true">ç”Ÿäº§è€…-æ¶ˆæ¯é˜Ÿåˆ—-æ¶ˆè´¹è€…ç®€å›¾</figcaption>
</figure>
<p>ä¸»è¦æœ‰ä¸‰ä¸ªä½œç”¨ï¼š</p>
<ul>
<li><strong>è§£è€¦</strong>ã€‚å¦‚å›¾æ‰€ç¤ºã€‚å‡è®¾æœ‰ç³»ç»ŸBã€Cã€Déƒ½éœ€è¦ç³»ç»ŸAçš„æ•°æ®ï¼Œäºæ˜¯ç³»ç»ŸAè°ƒç”¨ä¸‰ä¸ªæ–¹æ³•å‘é€æ•°æ®åˆ°Bã€Cã€Dã€‚è¿™æ—¶ï¼Œç³»ç»ŸDä¸éœ€è¦äº†ï¼Œé‚£å°±éœ€è¦åœ¨ç³»ç»ŸAæŠŠç›¸å…³çš„ä»£ç åˆ æ‰ã€‚å‡è®¾è¿™æ—¶æœ‰ä¸ªæ–°çš„ç³»ç»ŸEéœ€è¦æ•°æ®ï¼Œè¿™æ—¶ç³»ç»ŸAåˆè¦å¢åŠ è°ƒç”¨ç³»ç»ŸEçš„ä»£ç ã€‚ä¸ºäº†é™ä½è¿™ç§å¼ºè€¦åˆï¼Œå°±å¯ä»¥ä½¿ç”¨MQï¼Œ<strong>ç³»ç»ŸAåªéœ€è¦æŠŠæ•°æ®å‘é€åˆ°MQï¼Œå…¶ä»–ç³»ç»Ÿå¦‚æœéœ€è¦æ•°æ®ï¼Œåˆ™ä»MQä¸­è·å–å³å¯</strong>ã€‚</li>
</ul>
<figure>
<img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC83LzE5LzE3MzY3OGM3YTgxY2MxYzA?x-oss-process=image/format,png"
alt="æ¶ˆæ¯é˜Ÿåˆ—-è§£è€¦" />
<figcaption aria-hidden="true">æ¶ˆæ¯é˜Ÿåˆ—-è§£è€¦</figcaption>
</figure>
<ul>
<li>å¼‚æ­¥ã€‚å¦‚å›¾æ‰€ç¤ºã€‚ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€è¿›æ¥ï¼Œç³»ç»ŸAä¼šè°ƒç”¨ç³»ç»ŸBã€Cã€Dä¸‰ä¸ªç³»ç»Ÿï¼ŒåŒæ­¥è¯·æ±‚çš„è¯ï¼Œå“åº”æ—¶é—´å°±æ˜¯ç³»ç»ŸAã€Bã€Cã€Dçš„æ€»å’Œï¼Œä¹Ÿå°±æ˜¯800msã€‚<strong>å¦‚æœä½¿ç”¨MQï¼Œç³»ç»ŸAå‘é€æ•°æ®åˆ°MQï¼Œç„¶åå°±å¯ä»¥è¿”å›å“åº”ç»™å®¢æˆ·ç«¯ï¼Œä¸éœ€è¦å†ç­‰å¾…ç³»ç»ŸBã€Cã€Dçš„å“åº”ï¼Œå¯ä»¥å¤§å¤§åœ°æé«˜æ€§èƒ½</strong>ã€‚å¯¹äºä¸€äº›éå¿…è¦çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚å‘é€çŸ­ä¿¡ï¼Œå‘é€é‚®ä»¶ç­‰ç­‰ï¼Œå°±å¯ä»¥é‡‡ç”¨MQã€‚</li>
</ul>
<figure>
<img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC83LzE5LzE3MzY3OTQ1YThjNGRmNzM?x-oss-process=image/format,png"
alt="æ¶ˆæ¯é˜Ÿåˆ—-å¼‚æ­¥" />
<figcaption aria-hidden="true">æ¶ˆæ¯é˜Ÿåˆ—-å¼‚æ­¥</figcaption>
</figure>
<ul>
<li>å‰Šå³°ã€‚å¦‚å›¾æ‰€ç¤ºã€‚è¿™å…¶å®æ˜¯MQä¸€ä¸ªå¾ˆé‡è¦çš„åº”ç”¨ã€‚å‡è®¾ç³»ç»ŸAåœ¨æŸä¸€æ®µæ—¶é—´è¯·æ±‚æ•°æš´å¢ï¼Œæœ‰5000ä¸ªè¯·æ±‚å‘é€è¿‡æ¥ï¼Œç³»ç»ŸAè¿™æ—¶å°±ä¼šå‘é€5000æ¡SQLè¿›å…¥MySQLè¿›è¡Œæ‰§è¡Œï¼ŒMySQLå¯¹äºå¦‚æ­¤åºå¤§çš„è¯·æ±‚å½“ç„¶å¤„ç†ä¸è¿‡æ¥ï¼ŒMySQLå°±ä¼šå´©æºƒï¼Œå¯¼è‡´ç³»ç»Ÿç˜«ç—ªã€‚<strong>å¦‚æœä½¿ç”¨MQï¼Œç³»ç»ŸAä¸å†æ˜¯ç›´æ¥å‘é€SQLåˆ°æ•°æ®åº“ï¼Œè€Œæ˜¯æŠŠæ•°æ®å‘é€åˆ°MQï¼ŒMQçŸ­æ—¶é—´ç§¯å‹æ•°æ®æ˜¯å¯ä»¥æ¥å—çš„ï¼Œç„¶åç”±æ¶ˆè´¹è€…æ¯æ¬¡æ‹‰å–2000æ¡è¿›è¡Œå¤„ç†ï¼Œé˜²æ­¢åœ¨è¯·æ±‚å³°å€¼æ—¶æœŸå¤§é‡çš„è¯·æ±‚ç›´æ¥å‘é€åˆ°MySQLå¯¼è‡´ç³»ç»Ÿå´©æºƒ</strong>ã€‚</li>
</ul>
<figure>
<img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC83LzE5LzE3MzY3YTlkOTAyY2NhNGY?x-oss-process=image/format,png"
alt="æ¶ˆæ¯é˜Ÿåˆ—-å‰Šå³°" />
<figcaption aria-hidden="true">æ¶ˆæ¯é˜Ÿåˆ—-å‰Šå³°</figcaption>
</figure>
<h1 id="rabbitmqçš„ç‰¹ç‚¹">RabbitMQçš„ç‰¹ç‚¹</h1>
<p>RabbitMQæ˜¯ä¸€æ¬¾ä½¿ç”¨Erlangè¯­è¨€å¼€å‘çš„ï¼Œå®ç°AMQP(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®)çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ã€‚é¦–å…ˆè¦çŸ¥é“ä¸€äº›RabbitMQçš„ç‰¹ç‚¹ï¼Œ<a
href="https://www.rabbitmq.com/">å®˜ç½‘</a>å¯æŸ¥ï¼š</p>
<ul>
<li>å¯é æ€§ã€‚æ”¯æŒæŒä¹…åŒ–ï¼Œä¼ è¾“ç¡®è®¤ï¼Œå‘å¸ƒç¡®è®¤ç­‰ä¿è¯äº†MQçš„å¯é æ€§ã€‚</li>
<li>çµæ´»çš„åˆ†å‘æ¶ˆæ¯ç­–ç•¥ã€‚è¿™åº”è¯¥æ˜¯RabbitMQçš„ä¸€å¤§ç‰¹ç‚¹ã€‚åœ¨æ¶ˆæ¯è¿›å…¥MQå‰ç”±Exchange(äº¤æ¢æœº)è¿›è¡Œè·¯ç”±æ¶ˆæ¯ã€‚åˆ†å‘æ¶ˆæ¯ç­–ç•¥æœ‰ï¼šç®€å•æ¨¡å¼ã€å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ã€å‘å¸ƒè®¢é˜…æ¨¡å¼ã€è·¯ç”±æ¨¡å¼ã€é€šé…ç¬¦æ¨¡å¼ã€‚</li>
<li>æ”¯æŒé›†ç¾¤ã€‚å¤šå°RabbitMQæœåŠ¡å™¨å¯ä»¥ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œå½¢æˆä¸€ä¸ªé€»è¾‘Brokerã€‚</li>
<li>å¤šç§åè®®ã€‚RabbitMQæ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ¯”å¦‚ STOMPã€MQTT ç­‰ç­‰ã€‚</li>
<li>æ”¯æŒå¤šç§è¯­è¨€å®¢æˆ·ç«¯ã€‚RabbitMQå‡ ä¹æ”¯æŒæ‰€æœ‰å¸¸ç”¨ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬
Javaã€.NETã€Ruby ç­‰ç­‰ã€‚</li>
<li>å¯è§†åŒ–ç®¡ç†ç•Œé¢ã€‚RabbitMQæä¾›äº†ä¸€ä¸ªæ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ç›‘æ§å’Œç®¡ç†æ¶ˆæ¯
Brokerã€‚</li>
<li>æ’ä»¶æœºåˆ¶ã€‚RabbitMQæä¾›äº†è®¸å¤šæ’ä»¶ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶è¿›è¡Œæ‰©å±•ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ’ä»¶ã€‚</li>
</ul>
<h1 id="å‡†å¤‡">å‡†å¤‡</h1>
<p>mavenä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.rabbitmq/amqp-client --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.rabbitmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>amqp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>RabbitMQUtils</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitMQUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰è¿æ¥å·¥å‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ConnectionFactory factory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// é‡é‡çº§èµ„æº ç±»åŠ è½½æ‰§è¡Œ</span></span><br><span class="line">        factory = <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// ä¸»æœºåœ°å€</span></span><br><span class="line">        factory.setHost(<span class="string">&quot;192.168.1.107&quot;</span>);</span><br><span class="line">        <span class="comment">// ç«¯å£</span></span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">        factory.setVirtualHost(<span class="string">&quot;/ems&quot;</span>);</span><br><span class="line">        <span class="comment">// è´¦å·å¯†ç </span></span><br><span class="line">        factory.setUsername(<span class="string">&quot;ems&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å»ºç«‹ RabbitMQ è¿æ¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> factory.newConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Channel channel, Connection connection)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (channel != <span class="literal">null</span>) &#123;</span><br><span class="line">                channel.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç»†èŠ‚">ç»†èŠ‚</h1>
<p>ç”Ÿäº§è€…æ¶ˆè´¹è€…é˜Ÿåˆ—è¦ä¸¥æ ¼å¯¹åº”ï¼Œæ¶ˆè´¹è€…é€€å‡ºè‡ªåŠ¨åˆ é™¤æ‰ç”Ÿæ•ˆ</p>
<h1 id="åŸºæœ¬æ¶ˆæ¯æ¨¡å‹">â‘ åŸºæœ¬æ¶ˆæ¯æ¨¡å‹ï¼š</h1>
<figure>
<img data-src="https://img-blog.csdnimg.cn/20190610232537261.png"
alt="åŸºæœ¬æ¶ˆæ¯æ¨¡å‹" />
<figcaption aria-hidden="true">åŸºæœ¬æ¶ˆæ¯æ¨¡å‹</figcaption>
</figure>
<p>åœ¨ä¸Šå›¾çš„æ¨¡å‹ä¸­ï¼Œæœ‰ä»¥ä¸‹æ¦‚å¿µï¼š</p>
<ul>
<li>Pï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åº</li>
<li>Cï¼šæ¶ˆè´¹è€…ï¼šæ¶ˆæ¯çš„æ¥å—è€…ï¼Œä¼šä¸€ç›´ç­‰å¾…æ¶ˆæ¯åˆ°æ¥ã€‚</li>
<li>queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå›¾ä¸­çº¢è‰²éƒ¨åˆ†ã€‚å¯ä»¥ç¼“å­˜æ¶ˆæ¯ï¼›ç”Ÿäº§è€…å‘å…¶ä¸­æŠ•é€’æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä»å…¶ä¸­å–å‡ºæ¶ˆæ¯ã€‚</li>
</ul>
<h2 id="ç”Ÿäº§è€…">ç”Ÿäº§è€…</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Send</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;simple_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1ã€è·å–åˆ°è¿æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="comment">// 2ã€ä»è¿æ¥ä¸­åˆ›å»ºé€šé“ï¼Œä½¿ç”¨é€šé“æ‰èƒ½å®Œæˆæ¶ˆæ¯ç›¸å…³çš„æ“ä½œ</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// 3ã€å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">// å‚æ•°ï¼šString queue, boolean durable, boolean exclusive, boolean autoDelete, Map&lt;String, Object&gt; arguments</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•°æ˜ç»†</span></span><br><span class="line"><span class="comment">         * 1ã€queue é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">         * 2ã€durable æ˜¯å¦æŒä¹…åŒ–ï¼Œå¦‚æœæŒä¹…åŒ–ï¼Œmqé‡å¯åé˜Ÿåˆ—è¿˜åœ¨</span></span><br><span class="line"><span class="comment">         * 3ã€exclusive æ˜¯å¦ç‹¬å è¿æ¥ï¼Œé˜Ÿåˆ—åªå…è®¸åœ¨è¯¥è¿æ¥ä¸­è®¿é—®ï¼Œå¦‚æœconnectionè¿æ¥å…³é—­é˜Ÿåˆ—åˆ™è‡ªåŠ¨åˆ é™¤,å¦‚æœå°†æ­¤å‚æ•°è®¾ç½®trueå¯ç”¨äºä¸´æ—¶é˜Ÿåˆ—çš„åˆ›å»º</span></span><br><span class="line"><span class="comment">         * 4ã€autoDelete è‡ªåŠ¨åˆ é™¤ï¼Œé˜Ÿåˆ—ä¸å†ä½¿ç”¨æ—¶æ˜¯å¦è‡ªåŠ¨åˆ é™¤æ­¤é˜Ÿåˆ—ï¼Œå¦‚æœå°†æ­¤å‚æ•°å’Œexclusiveå‚æ•°è®¾ç½®ä¸ºtrueå°±å¯ä»¥å®ç°ä¸´æ—¶é˜Ÿåˆ—ï¼ˆé˜Ÿåˆ—ä¸ç”¨äº†å°±è‡ªåŠ¨åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment">         * 5ã€arguments å‚æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªé˜Ÿåˆ—çš„æ‰©å±•å‚æ•°ï¼Œæ¯”å¦‚ï¼šå¯è®¾ç½®å­˜æ´»æ—¶é—´</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4ã€æ¶ˆæ¯å†…å®¹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">        <span class="comment">// å‘æŒ‡å®šçš„é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯</span></span><br><span class="line">        <span class="comment">//å‚æ•°ï¼šString exchange, String routingKey, BasicProperties props, byte[] body</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•°æ˜ç»†ï¼š</span></span><br><span class="line"><span class="comment">         * 1ã€exchangeï¼Œäº¤æ¢æœºï¼Œå¦‚æœä¸æŒ‡å®šå°†ä½¿ç”¨mqçš„é»˜è®¤äº¤æ¢æœºï¼ˆè®¾ç½®ä¸º&quot;&quot;ï¼‰</span></span><br><span class="line"><span class="comment">         * 2ã€routingKeyï¼Œè·¯ç”±keyï¼Œäº¤æ¢æœºæ ¹æ®è·¯ç”±keyæ¥å°†æ¶ˆæ¯è½¬å‘åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤äº¤æ¢æœºï¼ŒroutingKeyè®¾ç½®ä¸ºé˜Ÿåˆ—çš„åç§°</span></span><br><span class="line"><span class="comment">         * 3ã€propsï¼Œæ¶ˆæ¯çš„å±æ€§</span></span><br><span class="line"><span class="comment">         * 4ã€bodyï¼Œæ¶ˆæ¯å†…å®¹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.basicPublish(<span class="string">&quot;&quot;</span>, QUEUE_NAME, <span class="literal">null</span>, message.getBytes());</span><br><span class="line">        System.out.println(<span class="string">&quot;Send &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­é€šé“å’Œè¿æ¥(èµ„æºå…³é—­æœ€å¥½ç”¨try-catch-finallyè¯­å¥å¤„ç†)</span></span><br><span class="line">        RabbitMQUtils.close(channel, connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…">æ¶ˆè´¹è€…</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Recv</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;simple_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1ã€è·å–åˆ°è¿æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="comment">// 2ã€ä»è¿æ¥ä¸­åˆ›å»ºé€šé“ï¼Œä½¿ç”¨é€šé“æ‰èƒ½å®Œæˆæ¶ˆæ¯ç›¸å…³çš„æ“ä½œ</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// 3ã€å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">// å‚æ•°ï¼šString queue, boolean durable, boolean exclusive, boolean autoDelete, Map&lt;String, Object&gt; arguments</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•°æ˜ç»†</span></span><br><span class="line"><span class="comment">         * 1ã€queue é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">         * 2ã€durable æ˜¯å¦æŒä¹…åŒ–ï¼Œå¦‚æœæŒä¹…åŒ–ï¼Œmqé‡å¯åé˜Ÿåˆ—è¿˜åœ¨</span></span><br><span class="line"><span class="comment">         * 3ã€exclusive æ˜¯å¦ç‹¬å è¿æ¥ï¼Œé˜Ÿåˆ—åªå…è®¸åœ¨è¯¥è¿æ¥ä¸­è®¿é—®ï¼Œå¦‚æœconnectionè¿æ¥å…³é—­é˜Ÿåˆ—åˆ™è‡ªåŠ¨åˆ é™¤,å¦‚æœå°†æ­¤å‚æ•°è®¾ç½®trueå¯ç”¨äºä¸´æ—¶é˜Ÿåˆ—çš„åˆ›å»º</span></span><br><span class="line"><span class="comment">         * 4ã€autoDelete è‡ªåŠ¨åˆ é™¤ï¼Œé˜Ÿåˆ—ä¸å†ä½¿ç”¨æ—¶æ˜¯å¦è‡ªåŠ¨åˆ é™¤æ­¤é˜Ÿåˆ—ï¼Œå¦‚æœå°†æ­¤å‚æ•°å’Œexclusiveå‚æ•°è®¾ç½®ä¸ºtrueå°±å¯ä»¥å®ç°ä¸´æ—¶é˜Ÿåˆ—ï¼ˆé˜Ÿåˆ—ä¸ç”¨äº†å°±è‡ªåŠ¨åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment">         * 5ã€arguments å‚æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªé˜Ÿåˆ—çš„æ‰©å±•å‚æ•°ï¼Œæ¯”å¦‚ï¼šå¯è®¾ç½®å­˜æ´»æ—¶é—´</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç›‘å¬é˜Ÿåˆ—ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šæ˜¯å¦è‡ªåŠ¨è¿›è¡Œæ¶ˆæ¯ç¡®è®¤ã€‚</span></span><br><span class="line">        <span class="comment">//å‚æ•°ï¼šString queue, boolean autoAck, Consumer callback</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•°æ˜ç»†ï¼š</span></span><br><span class="line"><span class="comment">         * 1ã€queue é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">         * 2ã€autoAck è‡ªåŠ¨å›å¤ï¼Œå½“æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯åè¦å‘Šè¯‰mqæ¶ˆæ¯å·²æ¥æ”¶ï¼Œå¦‚æœå°†æ­¤å‚æ•°è®¾ç½®ä¸ºtruè¡¨ç¤ºä¼šè‡ªåŠ¨å›å¤mqï¼Œå¦‚æœè®¾ç½®ä¸ºfalseè¦é€šè¿‡ç¼–ç¨‹å®ç°å›å¤</span></span><br><span class="line"><span class="comment">         * 3ã€callbackï¼Œæ¶ˆè´¹æ–¹æ³•ï¼Œå½“æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯è¦æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="comment">// è·å–æ¶ˆæ¯ï¼Œå¹¶ä¸”å¤„ç†ï¼Œè¿™ä¸ªæ–¹æ³•ç±»ä¼¼äº‹ä»¶ç›‘å¬ï¼Œå¦‚æœæœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œä¼šè¢«è‡ªåŠ¨è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * å½“æ¥æ”¶åˆ°æ¶ˆæ¯åæ­¤æ–¹æ³•å°†è¢«è°ƒç”¨</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> consumerTag  æ¶ˆè´¹è€…æ ‡ç­¾ï¼Œç”¨æ¥æ ‡è¯†æ¶ˆè´¹è€…çš„ï¼Œåœ¨ç›‘å¬é˜Ÿåˆ—æ—¶è®¾ç½®channel.basicConsume</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> envelope ä¿¡å°ï¼Œé€šè¿‡envelope</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> properties æ¶ˆæ¯å±æ€§</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> body æ¶ˆæ¯å†…å®¹</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Recv &#x27;&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body) + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸ç”¨å…³é—­ï¼Œä½¿å…¶å¤„äºç›‘å¬çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// abbitMQUtils.close(channel, connection);</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="workæ¶ˆæ¯æ¨¡å‹">â‘¡workæ¶ˆæ¯æ¨¡å‹</h1>
<p>å·¥ä½œé˜Ÿåˆ—æˆ–è€…<strong>ç«äº‰æ¶ˆè´¹è€…</strong>æ¨¡å¼</p>
<figure>
<img data-src="https://img-blog.csdnimg.cn/20190611201227139.png"
alt="workæ¶ˆæ¯æ¨¡å‹" />
<figcaption aria-hidden="true">workæ¶ˆæ¯æ¨¡å‹</figcaption>
</figure>
<p>work
queuesä¸å…¥é—¨ç¨‹åºç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ªæ¶ˆè´¹ç«¯ï¼Œä¸¤ä¸ªæ¶ˆè´¹ç«¯å…±åŒæ¶ˆè´¹åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œä½†æ˜¯ä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…è·å–ã€‚</p>
<p>è¿™ä¸ªæ¶ˆæ¯æ¨¡å‹åœ¨Webåº”ç”¨ç¨‹åºä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥å¤„ç†çŸ­çš„HTTPè¯·æ±‚çª—å£ä¸­æ— æ³•å¤„ç†å¤æ‚çš„ä»»åŠ¡ã€‚</p>
<h2 id="ç”Ÿäº§è€…-1">ç”Ÿäº§è€…</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">provider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;work_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>, QUEUE_NAME, <span class="literal">null</span>, (<span class="string">&quot;ä½ å¥½hello work queue &quot;</span>+i).getBytes());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        RabbitMQUtils.close(channel, connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…1">æ¶ˆè´¹è€…1</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;work_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                <span class="comment">// æµ‹è¯•å¤„ç†é€Ÿåº¦ä¸åŒé—®é¢˜</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer1ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…2">æ¶ˆè´¹è€…2</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;work_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer2ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="èƒ½è€…å¤šåŠ³">èƒ½è€…å¤šåŠ³</h2>
<p>éœ€è¦äº†è§£ç¡®è®¤æœºåˆ¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;work_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// è¿™æ ·RabbitMQå°±ä¼šä½¿å¾—æ¯ä¸ªConsumeråœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹æœ€å¤šå¤„ç†1ä¸ªMessage</span></span><br><span class="line">        channel.basicQos(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">false</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer1ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å…³é—­äº†è‡ªåŠ¨ç¡®è®¤åˆ™æ‰‹åŠ¨è®¾ç½®ç¡®è®¤</span></span><br><span class="line">                channel.basicAck(envelope.getDeliveryTag(),<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Customer1 å¤„ç†å¾—æ…¢è®¾ç½®ä¸ºæ‰‹åŠ¨ç¡®è®¤ï¼ŒCustomer2
å¤„ç†çš„å¿«è®¾ç½®ä¸ºè‡ªåŠ¨ç¡®è®¤</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;work_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// è¿™æ ·RabbitMQå°±ä¼šä½¿å¾—æ¯ä¸ªConsumeråœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹æœ€å¤šå¤„ç†1ä¸ªMessage</span></span><br><span class="line">        channel.basicQos(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer2ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1
id="publishsubscribeäº¤æ¢æœºç±»å‹fanoutä¹Ÿç§°ä¸ºå¹¿æ’­">â‘¢<strong>Publish/subscribeï¼ˆäº¤æ¢æœºç±»å‹ï¼š</strong>Fanoutï¼Œä¹Ÿç§°ä¸ºå¹¿æ’­
<strong>ï¼‰</strong></h1>
<p>Publish/subscribeæ¨¡å‹ç¤ºæ„å›¾ ï¼š</p>
<figure>
<img data-src="https://img-blog.csdnimg.cn/20190611200955466.png"
alt="å¹¿æ’­æ¨¡å‹" />
<figcaption aria-hidden="true">å¹¿æ’­æ¨¡å‹</figcaption>
</figure>
<h2 id="ç”Ÿäº§è€…-2">ç”Ÿäº§è€…</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Provider</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;fanout_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;fanout&quot;</span>);</span><br><span class="line">        channel.basicPublish(EXCHANGE_NAME, <span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;fanout type message&quot;</span>.getBytes());</span><br><span class="line">        RabbitMQUtils.close(channel, connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…ä¸‰ä¸ª">æ¶ˆè´¹è€…ï¼ˆä¸‰ä¸ªï¼‰</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer1</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;fanout_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;fanout&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> channel.queueDeclare().getQueue();</span><br><span class="line">        channel.queueBind(queueName, EXCHANGE_NAME, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        channel.basicConsume(queueName, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer1ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Customer1ï¼ŒCustomer2ï¼ŒCustomer3å‡ ä¹ç›¸åŒ</p>
<h1 id="routing-è·¯ç”±æ¨¡å‹äº¤æ¢æœºç±»å‹direct">â‘£Routing
è·¯ç”±æ¨¡å‹ï¼ˆäº¤æ¢æœºç±»å‹ï¼šdirectï¼‰</h1>
<p>Routingæ¨¡å‹ç¤ºæ„å›¾ï¼š</p>
<figure>
<img data-src="https://img-blog.csdnimg.cn/20190611151532501.png"
alt="è·¯ç”±æ¨¡å‹" />
<figcaption aria-hidden="true">è·¯ç”±æ¨¡å‹</figcaption>
</figure>
<p>Pï¼šç”Ÿäº§è€…ï¼Œå‘Exchangeå‘é€æ¶ˆæ¯ï¼Œå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šæŒ‡å®šä¸€ä¸ªrouting
keyã€‚</p>
<p>Xï¼šExchangeï¼ˆäº¤æ¢æœºï¼‰ï¼Œæ¥æ”¶ç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œç„¶åæŠŠæ¶ˆæ¯é€’äº¤ç»™ ä¸routing
keyå®Œå…¨åŒ¹é…çš„é˜Ÿåˆ—</p>
<p>C1ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦routing key ä¸º error çš„æ¶ˆæ¯</p>
<p>C2ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦routing key ä¸º infoã€errorã€warning
çš„æ¶ˆæ¯</p>
<h2 id="ç”Ÿäº§è€…-3">ç”Ÿäº§è€…</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Provider</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;direct_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;direct&quot;</span>);</span><br><span class="line">        <span class="comment">// æµ‹è¯• info error warning        </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        channel.basicPublish(EXCHANGE_NAME, routingKey, <span class="literal">null</span>, (<span class="string">&quot;direct type åŸºäºroutingKeyï¼š[&quot;</span> + routingKey + <span class="string">&quot;] message &quot;</span>).getBytes());</span><br><span class="line">        RabbitMQUtils.close(channel, connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…1-1">æ¶ˆè´¹è€…1</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer1</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;direct_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;direct&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();</span><br><span class="line">        channel.queueBind(queue, EXCHANGE_NAME, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">        channel.basicConsume(queue, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer1ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…2-1">æ¶ˆè´¹è€…2</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;direct_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;direct&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();</span><br><span class="line">        channel.queueBind(queue, EXCHANGE_NAME, <span class="string">&quot;info&quot;</span>);</span><br><span class="line">        channel.queueBind(queue, EXCHANGE_NAME, <span class="string">&quot;warning&quot;</span>);</span><br><span class="line">        channel.queueBind(queue, EXCHANGE_NAME, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">        channel.basicConsume(queue, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer2ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>direct ä¸‹</p>
<p>Customer1 ç›´æ¥æ”¶ error</p>
<p>Customer2 æ¥æ”¶ infoã€warningã€error</p>
<h1 id="topics-é€šé…ç¬¦æ¨¡å¼äº¤æ¢æœºç±»å‹topics">â‘¤Topics
é€šé…ç¬¦æ¨¡å¼ï¼ˆäº¤æ¢æœºç±»å‹ï¼štopicsï¼‰</h1>
<p>Topicsæ¨¡å‹ç¤ºæ„å›¾ï¼š</p>
<figure>
<img data-src="https://img-blog.csdnimg.cn/20190611154905286.png"
alt="Topicæ¨¡å‹" />
<figcaption aria-hidden="true">Topicæ¨¡å‹</figcaption>
</figure>
<p>æ¯ä¸ªæ¶ˆè´¹è€…ç›‘å¬è‡ªå·±çš„é˜Ÿåˆ—ï¼Œå¹¶ä¸”è®¾ç½®å¸¦ç»Ÿé…ç¬¦çš„routingkey,ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™brokerï¼Œç”±äº¤æ¢æœºæ ¹æ®routingkeyæ¥è½¬å‘æ¶ˆæ¯åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ã€‚</p>
<p>Routingkeyä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥â€œ.â€åˆ†å‰²ï¼Œä¾‹å¦‚ï¼šinform.sms</p>
<p>é€šé…ç¬¦è§„åˆ™ï¼š</p>
<p>#ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯</p>
<p>*ï¼šåŒ¹é…ä¸å¤šä¸å°‘æ°å¥½1ä¸ªè¯</p>
<h2 id="ç”Ÿäº§è€…-4">ç”Ÿäº§è€…</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Provider</span> &#123;    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;topic_exchange&quot;</span>;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC);        <span class="comment">// æµ‹è¯• * #        String routingKey = &quot;user.save.find&quot;;        channel.basicPublish(EXCHANGE_NAME, routingKey, null, (&quot;topic type åŸºäºroutingKeyï¼š[&quot; + routingKey + &quot;] message &quot;).getBytes());        RabbitMQUtils.close(channel, connection);    &#125;&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…1-2">æ¶ˆè´¹è€…1</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer1</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;topic_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME,BuiltinExchangeType.TOPIC);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();</span><br><span class="line"></span><br><span class="line">        channel.queueBind(queue,EXCHANGE_NAME,<span class="string">&quot;user.*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(queue,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer1ï¼š&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…4">æ¶ˆè´¹è€…4</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;topic_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> RabbitMQUtils.getConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();</span><br><span class="line"></span><br><span class="line">        channel.queueBind(queue,EXCHANGE_NAME,<span class="string">&quot;user.#&quot;</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(queue,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Customer1ï¼š&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(body));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="rpc">â‘¥RPC</h1>
<p>RPCæ¨¡å‹ç¤ºæ„å›¾ï¼š</p>
<figure>
<img data-src="https://img-blog.csdnimg.cn/20190611200118579.png"
alt="RPCæ¨¡å‹" />
<figcaption aria-hidden="true">RPCæ¨¡å‹</figcaption>
</figure>
<p>åŸºæœ¬æ¦‚å¿µï¼š</p>
<p>Callback queue
å›è°ƒé˜Ÿåˆ—ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚åï¼Œå°†å…¶å¤„ç†ç»“æœä¿å­˜åœ¨ä¸€ä¸ªå­˜å‚¨ä½“ä¸­ã€‚è€Œå®¢æˆ·ç«¯ä¸ºäº†è·å¾—å¤„ç†ç»“æœï¼Œé‚£ä¹ˆå®¢æˆ·åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼ŒåŒæ—¶å‘é€ä¸€ä¸ªå›è°ƒé˜Ÿåˆ—åœ°å€reply_toã€‚</p>
<p>Correlation id
å…³è”æ ‡è¯†ï¼Œå®¢æˆ·ç«¯å¯èƒ½ä¼šå‘é€å¤šä¸ªè¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œå½“æœåŠ¡å™¨å¤„ç†å®Œåï¼Œå®¢æˆ·ç«¯æ— æ³•è¾¨åˆ«åœ¨å›è°ƒé˜Ÿåˆ—ä¸­çš„å“åº”å…·ä½“å’Œé‚£ä¸ªè¯·æ±‚æ—¶å¯¹åº”çš„ã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œå®¢æˆ·ç«¯åœ¨å‘é€æ¯ä¸ªè¯·æ±‚æ—¶ï¼ŒåŒæ—¶ä¼šé™„å¸¦ä¸€ä¸ªç‹¬æœ‰correlation_idå±æ€§ï¼Œè¿™æ ·å®¢æˆ·ç«¯åœ¨å›è°ƒé˜Ÿåˆ—ä¸­æ ¹æ®correlation_idå­—æ®µçš„å€¼å°±å¯ä»¥åˆ†è¾¨æ­¤å“åº”å±äºå“ªä¸ªè¯·æ±‚ã€‚</p>
<p>æµç¨‹è¯´æ˜ï¼š</p>
<p>å½“å®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªåŒ¿åç‹¬äº«çš„å›è°ƒé˜Ÿåˆ—ã€‚ åœ¨ RPC
è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯å‘é€å¸¦æœ‰ä¸¤ä¸ªå±æ€§çš„æ¶ˆæ¯ï¼šä¸€ä¸ªæ˜¯è®¾ç½®å›è°ƒé˜Ÿåˆ—çš„ reply_to
å±æ€§ï¼Œå¦ä¸€ä¸ªæ˜¯è®¾ç½®å”¯ä¸€å€¼çš„ correlation_id å±æ€§ã€‚ å°†è¯·æ±‚å‘é€åˆ°ä¸€ä¸ª
rpc_queue é˜Ÿåˆ—ä¸­ã€‚
æœåŠ¡å™¨ç­‰å¾…è¯·æ±‚å‘é€åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­æ¥ã€‚å½“è¯·æ±‚å‡ºç°çš„æ—¶å€™ï¼Œå®ƒæ‰§è¡Œä»–çš„å·¥ä½œå¹¶ä¸”å°†å¸¦æœ‰æ‰§è¡Œç»“æœçš„æ¶ˆæ¯å‘é€ç»™
reply_to å­—æ®µæŒ‡å®šçš„é˜Ÿåˆ—ã€‚
å®¢æˆ·ç«¯ç­‰å¾…å›è°ƒé˜Ÿåˆ—é‡Œçš„æ•°æ®ã€‚å½“æœ‰æ¶ˆæ¯å‡ºç°çš„æ—¶å€™ï¼Œå®ƒä¼šæ£€æŸ¥ correlation_id
å±æ€§ã€‚å¦‚æœæ­¤å±æ€§çš„å€¼ä¸è¯·æ±‚åŒ¹é…ï¼Œå°†å®ƒè¿”å›ç»™åº”ç”¨ åˆ†äº«ä¸¤é“é¢è¯•é¢˜ï¼š
é¢è¯•é¢˜ï¼š</p>
<p>é¿å…æ¶ˆæ¯å †ç§¯ï¼Ÿ</p>
<p>1ï¼‰ é‡‡ç”¨workqueueï¼Œå¤šä¸ªæ¶ˆè´¹è€…ç›‘å¬åŒä¸€é˜Ÿåˆ—ã€‚</p>
<p>2ï¼‰æ¥æ”¶åˆ°æ¶ˆæ¯ä»¥åï¼Œè€Œæ˜¯é€šè¿‡çº¿ç¨‹æ± ï¼Œå¼‚æ­¥æ¶ˆè´¹ã€‚</p>
<p>å¦‚ä½•é¿å…æ¶ˆæ¯ä¸¢å¤±ï¼Ÿ</p>
<p>1ï¼‰ æ¶ˆè´¹è€…çš„ACKæœºåˆ¶ã€‚å¯ä»¥é˜²æ­¢æ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ¶ˆè´¹è€…æ¶ˆè´¹ä¹‹å‰ï¼ŒMQå°±å®•æœºäº†ï¼Œæ¶ˆæ¯å°±æ²¡äº†ï¼Ÿ</p>
<p>2ï¼‰å¯ä»¥å°†æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–ã€‚è¦å°†æ¶ˆæ¯æŒä¹…åŒ–ï¼Œå‰ææ˜¯ï¼šé˜Ÿåˆ—ã€Exchangeéƒ½æŒä¹…åŒ–</p>
<h1 id="springæ•´åˆribbitmq">Springæ•´åˆRibbitMQ</h1>
<p>ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>application</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">rabbitmq-springboot</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.107</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">ems</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/ems</span></span><br></pre></td></tr></table></figure>
<p>RabbitTemplate</p>
<h1 id="simple">Simple</h1>
<p>ç”Ÿäº§è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RabbitmqStringbootApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// simple</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testHello</span><span class="params">()</span> &#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RabbitListener(queuesToDeclare = @Queue(value = &quot;hello&quot;,declare = &quot;true&quot;))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloCustomer</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitHandler</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="work">Work</h1>
<p>ç”Ÿäº§è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// work</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testWork</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;work&quot;</span>, <span class="string">&quot;workæ¨¡å‹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkCustomer</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;work&quot;))</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message1 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;work&quot;))</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message2 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="fanout">Fanout</h1>
<p>ç”Ÿäº§è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// fanout</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testFanout</span><span class="params">()</span> &#123;</span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;logs&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;Fanoutçš„æ¨¡å‹å‘é€æ¶ˆæ¯&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutCustomer</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(value = @Queue, exchange = @Exchange(value = &quot;logs&quot;, type = &quot;fanout&quot;))</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message1 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(value = @Queue, exchange = @Exchange(value = &quot;logs&quot;, type = &quot;fanout&quot;))</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message2 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="direct">Direct</h1>
<p>ç”Ÿäº§è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// direct</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDirect</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ error info warn æµ‹è¯•</span></span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;direct&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;Directçš„æ¨¡å‹å‘é€infoæ¶ˆæ¯&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DirectCustomer</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(value = @Queue, exchange = @Exchange(value = &quot;direct&quot;, type = &quot;direct&quot;), key = &#123;&quot;info&quot;, &quot;warn&quot;, &quot;error&quot;&#125;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message1 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(value = @Queue, exchange = @Exchange(value = &quot;direct&quot;, type = &quot;direct&quot;), key = &#123;&quot;error&quot;&#125;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message2 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="topic">Topic</h1>
<p>ç”Ÿäº§è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// topic</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testTopic</span><span class="params">()</span> &#123;</span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;topic&quot;</span>, <span class="string">&quot;product.save&quot;</span>, <span class="string">&quot;Topicçš„æ¨¡å‹å‘é€product.saveæ¶ˆæ¯&quot;</span>);</span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;topic&quot;</span>, <span class="string">&quot;user.save&quot;</span>, <span class="string">&quot;Topicçš„æ¨¡å‹å‘é€user.saveæ¶ˆæ¯&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopicCustomer</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(value = @Queue, exchange = @Exchange(value = &quot;topic&quot;, type = &quot;topic&quot;), key = &#123;&quot;user.save&quot;, &quot;user.*&quot;&#125;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message1 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(value = @Queue, exchange = @Exchange(value = &quot;topic&quot;, type = &quot;topic&quot;), key = &#123;&quot;user.#&quot;,&quot;product.#&quot;&#125;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message2 = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h1>
<h2 id="å¼‚æ­¥å¤„ç†">å¼‚æ­¥å¤„ç†</h2>
<p><code>åœºæ™¯è¯´æ˜ï¼šç”¨æˆ·æ³¨å†Œåï¼Œéœ€è¦å‘æ³¨å†Œé‚®ä»¶å’Œæ³¨å†ŒçŸ­ä¿¡,ä¼ ç»Ÿçš„åšæ³•æœ‰ä¸¤ç§ 1.ä¸²è¡Œçš„æ–¹å¼ 2.å¹¶è¡Œçš„æ–¹å¼</code></p>
<p><code>ä¸²è¡Œæ–¹å¼:</code>å°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“å,å‘é€æ³¨å†Œé‚®ä»¶,å†å‘é€æ³¨å†ŒçŸ­ä¿¡,ä»¥ä¸Šä¸‰ä¸ªä»»åŠ¡å…¨éƒ¨å®Œæˆåæ‰è¿”å›ç»™å®¢æˆ·ç«¯ã€‚
è¿™æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯,é‚®ä»¶,çŸ­ä¿¡å¹¶ä¸æ˜¯å¿…é¡»çš„,å®ƒåªæ˜¯ä¸€ä¸ªé€šçŸ¥,è€Œè¿™ç§åšæ³•è®©å®¢æˆ·ç«¯ç­‰å¾…æ²¡æœ‰å¿…è¦ç­‰å¾…çš„ä¸œè¥¿.</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/20170209145852454.2k9wa1cgetk0.webp"
alt="ä¸²è¡Œæ–¹å¼" />
<figcaption aria-hidden="true">ä¸²è¡Œæ–¹å¼</figcaption>
</figure>
<p><code>å¹¶è¡Œæ–¹å¼:</code>å°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“å,å‘é€é‚®ä»¶çš„åŒæ—¶,å‘é€çŸ­ä¿¡,ä»¥ä¸Šä¸‰ä¸ªä»»åŠ¡å®Œæˆå,è¿”å›ç»™å®¢æˆ·ç«¯,å¹¶è¡Œçš„æ–¹å¼èƒ½æé«˜å¤„ç†çš„æ—¶é—´ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/20170209150218755.3mla1ew7uo40.webp"
alt="å¹¶è¡Œæ–¹å¼" />
<figcaption aria-hidden="true">å¹¶è¡Œæ–¹å¼</figcaption>
</figure>
<p><code>æ¶ˆæ¯é˜Ÿåˆ—:</code>å‡è®¾ä¸‰ä¸ªä¸šåŠ¡èŠ‚ç‚¹åˆ†åˆ«ä½¿ç”¨50ms,ä¸²è¡Œæ–¹å¼ä½¿ç”¨æ—¶é—´150ms,å¹¶è¡Œä½¿ç”¨æ—¶é—´100msã€‚è™½ç„¶å¹¶è¡Œå·²ç»æé«˜çš„å¤„ç†æ—¶é—´,ä½†æ˜¯,å‰é¢è¯´è¿‡,é‚®ä»¶å’ŒçŸ­ä¿¡å¯¹æˆ‘æ­£å¸¸çš„ä½¿ç”¨ç½‘ç«™æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰å¿…è¦ç­‰ç€å…¶å‘é€å®Œæˆæ‰æ˜¾ç¤ºæ³¨å†ŒæˆåŠŸ,åº”è¯¥æ˜¯å†™å…¥æ•°æ®åº“åå°±è¿”å›.
æ¶ˆæ¯é˜Ÿåˆ—: å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—åï¼ŒæŠŠå‘é€é‚®ä»¶,çŸ­ä¿¡ä¸æ˜¯å¿…é¡»çš„ä¸šåŠ¡é€»è¾‘å¼‚æ­¥å¤„ç†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/20170209150824008.2qharizfgzc.webp"
alt="æ¶ˆæ¯é˜Ÿåˆ—" />
<figcaption aria-hidden="true">æ¶ˆæ¯é˜Ÿåˆ—</figcaption>
</figure>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡º,å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—åï¼Œç”¨æˆ·çš„å“åº”æ—¶é—´å°±ç­‰äºå†™å…¥æ•°æ®åº“çš„æ—¶é—´+å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„æ—¶é—´(å¯ä»¥å¿½ç•¥ä¸è®¡),å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—åå¤„ç†å,å“åº”æ—¶é—´æ˜¯ä¸²è¡Œçš„3å€,æ˜¯å¹¶è¡Œçš„2å€ã€‚</p>
<h2 id="åº”ç”¨è§£è€¦">åº”ç”¨è§£è€¦</h2>
<p><code>åœºæ™¯ï¼šåŒ11æ˜¯è´­ç‰©ç‹‚èŠ‚,ç”¨æˆ·ä¸‹å•å,è®¢å•ç³»ç»Ÿéœ€è¦é€šçŸ¥åº“å­˜ç³»ç»Ÿ,ä¼ ç»Ÿçš„åšæ³•å°±æ˜¯è®¢å•ç³»ç»Ÿè°ƒç”¨åº“å­˜ç³»ç»Ÿçš„æ¥å£.</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/20170209151602258.7kxqme9hcgk0.webp"
alt="æœªæ¥å…¥æ¶ˆæ¯é˜Ÿåˆ—" />
<figcaption aria-hidden="true">æœªæ¥å…¥æ¶ˆæ¯é˜Ÿåˆ—</figcaption>
</figure>
<p>è¿™ç§åšæ³•æœ‰ä¸€ä¸ªç¼ºç‚¹: å½“åº“å­˜ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶,è®¢å•å°±ä¼šå¤±è´¥ã€‚
è®¢å•ç³»ç»Ÿå’Œåº“å­˜ç³»ç»Ÿé«˜è€¦åˆ. å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/20170209152116530.7k5z0k5bl6o0.webp"
alt="æ¥å…¥æ¶ˆæ¯é˜Ÿåˆ—" />
<figcaption aria-hidden="true">æ¥å…¥æ¶ˆæ¯é˜Ÿåˆ—</figcaption>
</figure>
<p><code>è®¢å•ç³»ç»Ÿ:</code>ç”¨æˆ·ä¸‹å•å,è®¢å•ç³»ç»Ÿå®ŒæˆæŒä¹…åŒ–å¤„ç†,å°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—,è¿”å›ç”¨æˆ·è®¢å•ä¸‹å•æˆåŠŸã€‚</p>
<p><code>åº“å­˜ç³»ç»Ÿ:</code>è®¢é˜…ä¸‹å•çš„æ¶ˆæ¯,è·å–ä¸‹å•æ¶ˆæ¯,è¿›è¡Œåº“æ“ä½œã€‚
å°±ç®—åº“å­˜ç³»ç»Ÿå‡ºç°æ•…éšœ,æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿèƒ½ä¿è¯æ¶ˆæ¯çš„å¯é æŠ•é€’,ä¸ä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±.</p>
<h2 id="æµé‡å‰Šå³°">æµé‡å‰Šå³°</h2>
<p><code>åœºæ™¯: ç§’æ€æ´»åŠ¨ï¼Œä¸€èˆ¬ä¼šå› ä¸ºæµé‡è¿‡å¤§ï¼Œå¯¼è‡´åº”ç”¨æŒ‚æ‰,ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬åœ¨åº”ç”¨å‰ç«¯åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—ã€‚</code></p>
<p><code>ä½œç”¨:</code></p>
<p>1.å¯ä»¥æ§åˆ¶æ´»åŠ¨äººæ•°ï¼Œè¶…è¿‡æ­¤ä¸€å®šé˜€å€¼çš„è®¢å•ç›´æ¥ä¸¢å¼ƒ(æˆ‘ä¸ºä»€ä¹ˆç§’æ€ä¸€æ¬¡éƒ½æ²¡æœ‰æˆåŠŸè¿‡å‘¢^^)</p>
<p>2.å¯ä»¥ç¼“è§£çŸ­æ—¶é—´çš„é«˜æµé‡å‹å®åº”ç”¨(åº”ç”¨ç¨‹åºæŒ‰è‡ªå·±çš„æœ€å¤§å¤„ç†èƒ½åŠ›è·å–è®¢å•)</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/20201030225837502.29yakcoyj5hc.webp"
alt="ç§’æ€å‰Šå³°" />
<figcaption aria-hidden="true">ç§’æ€å‰Šå³°</figcaption>
</figure>
<p>1.ç”¨æˆ·çš„è¯·æ±‚,æœåŠ¡å™¨æ”¶åˆ°ä¹‹å,é¦–å…ˆå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—,åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦è¶…è¿‡æœ€å¤§å€¼,åˆ™ç›´æ¥æŠ›å¼ƒç”¨æˆ·è¯·æ±‚æˆ–è·³è½¬åˆ°é”™è¯¯é¡µé¢.</p>
<p>2.ç§’æ€ä¸šåŠ¡æ ¹æ®æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ä¿¡æ¯ï¼Œå†åšåç»­å¤„ç†.</p>
<h1 id="rabbitmqé›†ç¾¤">RabbitMQé›†ç¾¤</h1>
<h2 id="æ™®é€šé›†ç¾¤å‰¯æœ¬é›†ç¾¤">æ™®é€šé›†ç¾¤(å‰¯æœ¬é›†ç¾¤)</h2>
<blockquote>
<p>All data/state required for the operation of a RabbitMQ broker is
replicated across all nodes. An exception to this are message queues,
which by default reside on one node, though they are visible and
reachable from all nodes. To replicate queues across nodes in a cluster
--æ‘˜è‡ªå®˜ç½‘</p>
</blockquote>
<p><code>é»˜è®¤æƒ…å†µä¸‹:RabbitMQä»£ç†æ“ä½œæ‰€éœ€çš„æ‰€æœ‰æ•°æ®/çŠ¶æ€éƒ½å°†è·¨æ‰€æœ‰èŠ‚ç‚¹å¤åˆ¶ã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å¤–æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä½äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå°½ç®¡å®ƒä»¬å¯ä»¥ä»æ‰€æœ‰èŠ‚ç‚¹çœ‹åˆ°å’Œè®¿é—®</code></p>
<p><strong>æ¶æ„å›¾</strong></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6au4m3q1jqk0.png"
alt="æ¶æ„å›¾" />
<figcaption aria-hidden="true">æ¶æ„å›¾</figcaption>
</figure>
<p>æ ¸å¿ƒè§£å†³é—®é¢˜:
<code>å½“é›†ç¾¤ä¸­æŸä¸€æ—¶åˆ»masterèŠ‚ç‚¹å®•æœº,å¯ä»¥å¯¹Queneä¸­ä¿¡æ¯,è¿›è¡Œå¤‡ä»½</code></p>
<p><strong>é›†ç¾¤æ­å»º</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">0.é›†ç¾¤è§„åˆ’</span></span><br><span class="line">	node1: 10.15.0.3  mq1  master ä¸»èŠ‚ç‚¹</span><br><span class="line">	node2: 10.15.0.4  mq2  repl1  å‰¯æœ¬èŠ‚ç‚¹</span><br><span class="line">	node3: 10.15.0.5  mq3  repl2  å‰¯æœ¬èŠ‚ç‚¹</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.å…‹éš†ä¸‰å°æœºå™¨ä¸»æœºåå’Œipæ˜ å°„</span></span><br><span class="line">	vim /etc/hostsåŠ å…¥:</span><br><span class="line">		 10.15.0.3 mq1</span><br><span class="line">    	10.15.0.4 mq2</span><br><span class="line">    	10.15.0.5 mq3</span><br><span class="line">	node1: vim /etc/hostname åŠ å…¥:  mq1</span><br><span class="line">	node2: vim /etc/hostname åŠ å…¥:  mq2</span><br><span class="line">	node3: vim /etc/hostname åŠ å…¥:  mq3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.ä¸‰ä¸ªæœºå™¨å®‰è£…rabbitmq,å¹¶åŒæ­¥cookieæ–‡ä»¶,åœ¨node1ä¸Šæ‰§è¡Œ:</span></span><br><span class="line">	scp /var/lib/rabbitmq/.erlang.cookie root@mq2:/var/lib/rabbitmq/</span><br><span class="line">	scp /var/lib/rabbitmq/.erlang.cookie root@mq3:/var/lib/rabbitmq/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.æŸ¥çœ‹cookieæ˜¯å¦ä¸€è‡´:</span></span><br><span class="line">	node1: cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line">	node2: cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line">	node3: cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4.åå°å¯åŠ¨rabbitmqæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤,å¯åŠ¨æˆåŠŸè®¿é—®ç®¡ç†ç•Œé¢:</span></span><br><span class="line">	rabbitmq-server -detached </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5.åœ¨node2å’Œnode3æ‰§è¡ŒåŠ å…¥é›†ç¾¤å‘½ä»¤:</span></span><br><span class="line">	1.å…³é—­       rabbitmqctl stop_app</span><br><span class="line">	2.åŠ å…¥é›†ç¾¤    rabbitmqctl join_cluster rabbit@mq1</span><br><span class="line">	3.å¯åŠ¨æœåŠ¡    rabbitmqctl start_app</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">6.æŸ¥çœ‹é›†ç¾¤çŠ¶æ€,ä»»æ„èŠ‚ç‚¹æ‰§è¡Œ:</span></span><br><span class="line">	rabbitmqctl cluster_status</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">7.å¦‚æœå‡ºç°å¦‚ä¸‹æ˜¾ç¤º,é›†ç¾¤æ­å»ºæˆåŠŸ:</span></span><br><span class="line">	Cluster status of node rabbit@mq3 ...</span><br><span class="line">	[&#123;nodes,[&#123;disc,[rabbit@mq1,rabbit@mq2,rabbit@mq3]&#125;]&#125;,</span><br><span class="line">	&#123;running_nodes,[rabbit@mq1,rabbit@mq2,rabbit@mq3]&#125;,</span><br><span class="line">	&#123;cluster_name,&lt;&lt;&quot;rabbit@mq1&quot;&gt;&gt;&#125;,</span><br><span class="line">	&#123;partitions,[]&#125;,</span><br><span class="line">	&#123;alarms,[&#123;rabbit@mq1,[]&#125;,&#123;rabbit@mq2,[]&#125;,&#123;rabbit@mq3,[]&#125;]&#125;]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">8.ç™»å½•ç®¡ç†ç•Œé¢,å±•ç¤ºå¦‚ä¸‹çŠ¶æ€:</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1uf0mjfngcgw.png"
alt="ç®¡ç†ç•Œé¢" />
<figcaption aria-hidden="true">ç®¡ç†ç•Œé¢</figcaption>
</figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">9.æµ‹è¯•é›†ç¾¤åœ¨node1ä¸Š,åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.541gmm21ikw0.png"
alt="Queues" />
<figcaption aria-hidden="true">Queues</figcaption>
</figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">10.æŸ¥çœ‹node2å’Œnode3èŠ‚ç‚¹:</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6gi58obfb1w0.png"
alt="Queues" />
<figcaption aria-hidden="true">Queues</figcaption>
</figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">11.å…³é—­node1èŠ‚ç‚¹,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤,æŸ¥çœ‹node2å’Œnode3:</span></span><br><span class="line">	rabbitmqctl stop_app</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="é•œåƒé›†ç¾¤">é•œåƒé›†ç¾¤</h2>
<blockquote>
<p>This guide covers mirroring (queue contents replication) of classic
queues --æ‘˜è‡ªå®˜ç½‘</p>
<p>By default, contents of a queue within a RabbitMQ cluster are located
on a single node (the node on which the queue was declared). This is in
contrast to exchanges and bindings, which can always be considered to be
on all nodes. Queues can optionally be made <em>mirrored</em> across
multiple nodes. --æ‘˜è‡ªå®˜ç½‘</p>
</blockquote>
<p>é•œåƒé˜Ÿåˆ—æœºåˆ¶å°±æ˜¯å°†é˜Ÿåˆ—åœ¨ä¸‰ä¸ªèŠ‚ç‚¹ä¹‹é—´è®¾ç½®ä¸»ä»å…³ç³»ï¼Œæ¶ˆæ¯ä¼šåœ¨ä¸‰ä¸ªèŠ‚ç‚¹ä¹‹é—´è¿›è¡Œè‡ªåŠ¨åŒæ­¥ï¼Œä¸”å¦‚æœå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå¹¶ä¸ä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±æˆ–æœåŠ¡ä¸å¯ç”¨çš„æƒ…å†µï¼Œæå‡MQé›†ç¾¤çš„æ•´ä½“é«˜å¯ç”¨æ€§ã€‚</p>
<p><strong>é›†ç¾¤æ¶æ„å›¾</strong></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1z5nljizwmlc.png"
alt="é›†ç¾¤æ¶æ„å›¾" />
<figcaption aria-hidden="true">é›†ç¾¤æ¶æ„å›¾</figcaption>
</figure>
<p><strong>é…ç½®é›†ç¾¤æ¶æ„</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">0.ç­–ç•¥è¯´æ˜</span></span><br><span class="line">rabbitmqctl set_policy [-p &lt;vhost&gt;] [--priority &lt;priority&gt;] [--apply-to &lt;apply-to&gt;] &lt;name&gt; &lt;pattern&gt;  &lt;definition&gt;</span><br><span class="line">-p Vhostï¼š å¯é€‰å‚æ•°ï¼Œé’ˆå¯¹æŒ‡å®švhostä¸‹çš„queueè¿›è¡Œè®¾ç½®</span><br><span class="line">Name:     policyçš„åç§°</span><br><span class="line">Pattern: queueçš„åŒ¹é…æ¨¡å¼(æ­£åˆ™è¡¨è¾¾å¼)</span><br><span class="line">Definitionï¼šé•œåƒå®šä¹‰ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ha-mode, ha-params, ha-sync-mode</span><br><span class="line">         		ha-mode:æŒ‡æ˜é•œåƒé˜Ÿåˆ—çš„æ¨¡å¼ï¼Œæœ‰æ•ˆå€¼ä¸º all/exactly/nodes</span><br><span class="line">                      allï¼šè¡¨ç¤ºåœ¨é›†ç¾¤ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒ</span><br><span class="line">                      exactlyï¼šè¡¨ç¤ºåœ¨æŒ‡å®šä¸ªæ•°çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒï¼ŒèŠ‚ç‚¹çš„ä¸ªæ•°ç”±ha-paramsæŒ‡å®š</span><br><span class="line">                      nodesï¼šè¡¨ç¤ºåœ¨æŒ‡å®šçš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒï¼ŒèŠ‚ç‚¹åç§°é€šè¿‡ha-paramsæŒ‡å®š</span><br><span class="line">          	 ha-paramsï¼šha-modeæ¨¡å¼éœ€è¦ç”¨åˆ°çš„å‚æ•°</span><br><span class="line">              ha-sync-modeï¼šè¿›è¡Œé˜Ÿåˆ—ä¸­æ¶ˆæ¯çš„åŒæ­¥æ–¹å¼ï¼Œæœ‰æ•ˆå€¼ä¸ºautomaticå’Œmanual</span><br><span class="line">              priorityï¼šå¯é€‰å‚æ•°ï¼Œpolicyçš„ä¼˜å…ˆçº§</span><br><span class="line">              </span><br><span class="line">               </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.æŸ¥çœ‹å½“å‰ç­–ç•¥</span></span><br><span class="line">rabbitmqctl list_policies</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.æ·»åŠ ç­–ç•¥</span></span><br><span class="line">rabbitmqctl set_policy ha-all &#x27;^hello&#x27; &#x27;&#123;&quot;ha-mode&quot;:&quot;all&quot;,&quot;ha-sync-mode&quot;:&quot;automatic&quot;&#125;&#x27; </span><br><span class="line">è¯´æ˜:ç­–ç•¥æ­£åˆ™è¡¨è¾¾å¼ä¸º â€œ^â€ è¡¨ç¤ºæ‰€æœ‰åŒ¹é…æ‰€æœ‰é˜Ÿåˆ—åç§°  ^hello:åŒ¹é…helloå¼€å¤´é˜Ÿåˆ—</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.åˆ é™¤ç­–ç•¥</span></span><br><span class="line">rabbitmqctl clear_policy ha-all</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4.æµ‹è¯•é›†ç¾¤</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å‰é¢çš„é™¤äº†é›†ç¾¤éƒ¨åˆ†æ²¡æœ‰å®Œå…¨å®é™…æ“ä½œå¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯å®é™…æ“ä½œè¿‡çš„ç›®å‰ä¸­é—´ä»¶æ¶ˆæ¯é˜Ÿåˆ—éƒ¨åˆ†åªäº†è§£äº†è¿™ä¸€ä¸ªRabbitMQï¼Œè¿˜æ˜¯å¸Œæœ›èƒ½å­¦åˆ°æ›´å¤šï¼Œæ›´é‡è¦çš„æ˜¯å®é™…æ“ä½œåº”ç”¨</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Linux</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>Redisåšåˆ†å¸ƒå¼é”çš„é—®é¢˜</title>
    <url>/article/f388e05f.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>è°·ç²’å•†åŸp158ï¼š<a
href="https://www.bilibili.com/video/BV1np4y1C7Yf?p=158">https://www.bilibili.com/video/BV1np4y1C7Yf?p=158</a></p>
<p>rediså®˜ç½‘ï¼š<a
href="http://www.redis.cn/commands/set.html">http://www.redis.cn/commands/set.html</a></p>
<h1 id="æè¦">æè¦</h1>
<p>åˆ†å¸ƒå¼åœºæ™¯ä¸‹å°†åŸæœ‰çš„æœ¬åœ°é”æ¢ä¸ºï¼ŒåŸºäºredisçš„setnxå‘½ä»¤çš„åˆ†å¸ƒå¼é”</p>
<ul>
<li><code>getCatalogJsonFromDb</code>ï¼šä»æ•°æ®åº“æŸ¥æ•°æ®</li>
<li><code>getCatalogJsonFromDbWithLocalLock</code>ï¼šåˆ©ç”¨æœ¬åœ°é”æŸ¥æ•°æ®</li>
<li><code>getCatalogJsonFromDbWithRedisLock</code>ï¼šåˆ©ç”¨redisçš„setnxå‘½ä»¤çš„åˆ†å¸ƒå¼é”æŸ¥æ•°æ®ï¼Œç°éœ€è¦å®Œæˆçš„</li>
</ul>
<span id="more"></span>
<h1 id="åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µä¸€">åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µä¸€</h1>
<h2 id="ä»£ç ">ä»£ç </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;Catalog2Vo&gt;&gt; <span class="title function_">getCatalogJsonFromDbWithRedisLock</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1ã€å åˆ†å¸ƒå¼é”ï¼Œsetnx</span></span><br><span class="line">	<span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>,<span class="string">&quot;111&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(lock)&#123;</span><br><span class="line">        <span class="comment">// åŠ é”æˆåŠŸã€‚ã€‚ã€‚æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        Map&lt;String, List&lt;Catalog2Vo&gt;&gt; catalogJsonFromDb = getCatalogJsonFromDb();</span><br><span class="line">        redisTemplate.delete(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> catalogJsonFromDb;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// åŠ é”å¤±è´¥ã€‚ã€‚ã€‚é‡è¯•</span></span><br><span class="line">        <span class="comment">// ä¼‘çœ 100msé‡è¯•</span></span><br><span class="line">        <span class="comment">// è‡ªæ—‹æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> getCatalogJsonFromDbWithRedisLock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜">é—®é¢˜</h2>
<ul>
<li><code>setnx</code>å å¥½äº†ä½ç½®ï¼Œä¸šåŠ¡ä»£ç å¼‚å¸¸æˆ–ç¨‹åºå®•æœºï¼Œæ²¡æœ‰æ‰§è¡Œåˆ é”é€»è¾‘ï¼Œæ­»é”ï¼ï¼ï¼</li>
</ul>
<h2 id="è§£å†³">è§£å†³</h2>
<ul>
<li>è®¾ç½®é”è‡ªåŠ¨è¿‡æœŸï¼Œå³ä½¿æ²¡æœ‰åˆ é™¤ï¼Œåˆ°æœŸä¹Ÿä¼šæ¶ˆå¤±</li>
</ul>
<h1 id="åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µäºŒ">åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µäºŒ</h1>
<h2 id="ä»£ç -1">ä»£ç </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;Catalog2Vo&gt;&gt; <span class="title function_">getCatalogJsonFromDbWithRedisLock</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1ã€å åˆ†å¸ƒå¼é”ï¼Œsetnx</span></span><br><span class="line">	<span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>,<span class="string">&quot;111&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(lock)&#123;</span><br><span class="line">        <span class="comment">// åŠ é”æˆåŠŸã€‚ã€‚ã€‚æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2ã€è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        redisTemplate.expire(<span class="string">&quot;lock&quot;</span>, <span class="number">30</span>, TimeUnit.SECONDS);</span><br><span class="line">        </span><br><span class="line">        Map&lt;String, List&lt;Catalog2Vo&gt;&gt; catalogJsonFromDb = getCatalogJsonFromDb();</span><br><span class="line">        redisTemplate.delete(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> catalogJsonFromDb;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// åŠ é”å¤±è´¥ã€‚ã€‚ã€‚é‡è¯•</span></span><br><span class="line">        <span class="comment">// ä¼‘çœ 100msé‡è¯•</span></span><br><span class="line">        <span class="comment">// è‡ªæ—‹æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> getCatalogJsonFromDbWithRedisLock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜-1">é—®é¢˜</h2>
<ul>
<li>åŠ é”ä¸è®¾ç½®è¿‡æœŸæ—¶é—´éåŸå­æ“ä½œï¼Œæ‰€ä»¥ä»ä¼šå‡ºç°æ­»é”é—®é¢˜</li>
</ul>
<h2 id="è§£å†³-1">è§£å†³</h2>
<ul>
<li>åˆ©ç”¨<code>redis</code>æä¾›çš„<code>setexnx</code>ï¼ŒåšåŸå­æ“ä½œ</li>
</ul>
<h1 id="åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µä¸‰">åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µä¸‰</h1>
<h2 id="ä»£ç -2">ä»£ç </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;Catalog2Vo&gt;&gt; <span class="title function_">getCatalogJsonFromDbWithRedisLock</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1ã€å åˆ†å¸ƒå¼é”ï¼Œsetnx</span></span><br><span class="line">    <span class="comment">// åŒæ—¶è®¾ç½®æ—¶é—´</span></span><br><span class="line">	<span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>, uuid, <span class="number">30</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="keyword">if</span>(lock)&#123;</span><br><span class="line">        <span class="comment">// åŠ é”æˆåŠŸã€‚ã€‚ã€‚æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2ã€è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        <span class="comment">// redisTemplate.expire(&quot;lock&quot;, 30, TimeUnit.SECONDS);</span></span><br><span class="line">        </span><br><span class="line">        Map&lt;String, List&lt;Catalog2Vo&gt;&gt; catalogJsonFromDb = getCatalogJsonFromDb();</span><br><span class="line">        redisTemplate.delete(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> catalogJsonFromDb;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// åŠ é”å¤±è´¥ã€‚ã€‚ã€‚é‡è¯•</span></span><br><span class="line">        <span class="comment">// ä¼‘çœ 100msé‡è¯•</span></span><br><span class="line">        <span class="comment">// è‡ªæ—‹æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> getCatalogJsonFromDbWithRedisLock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜-2">é—®é¢˜</h2>
<ul>
<li>å¦‚æœä¸šåŠ¡æ—¶é—´è¿‡é•¿ï¼Œæˆ‘ä»¬çš„é”è¿‡æœŸè‡ªåŠ¨åˆ é™¤ï¼Œè¿™æ—¶ç›´æ¥åˆ é”ï¼Œæœ‰å¯èƒ½æŠŠåˆ«äººæ­£åœ¨æŒæœ‰çš„é”åˆ é™¤äº†</li>
</ul>
<h2 id="è§£å†³-2">è§£å†³</h2>
<ul>
<li>å é”æ—¶æŒ‡å®š<code>uuid</code>ä¿è¯å”¯ä¸€æ€§ï¼Œåˆ é”éœ€è¦éªŒè¯æ˜¯å¦æ˜¯è‡ªå·±çš„é”</li>
</ul>
<h1 id="åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µå››">åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µå››</h1>
<h2 id="ä»£ç -3">ä»£ç </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;Catalog2Vo&gt;&gt; <span class="title function_">getCatalogJsonFromDbWithRedisLock</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1ã€å åˆ†å¸ƒå¼é”ï¼Œsetnx</span></span><br><span class="line">    <span class="comment">// åŒæ—¶è®¾ç½®æ—¶é—´</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>, uuid, <span class="number">30</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="keyword">if</span>(lock)&#123;</span><br><span class="line">        <span class="comment">// åŠ é”æˆåŠŸã€‚ã€‚ã€‚æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2ã€è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        <span class="comment">// redisTemplate.expire(&quot;lock&quot;, 30, TimeUnit.SECONDS);</span></span><br><span class="line">        </span><br><span class="line">        Map&lt;String, List&lt;Catalog2Vo&gt;&gt; catalogJsonFromDb = getCatalogJsonFromDb();</span><br><span class="line">        <span class="comment">// redisTemplate.delete(&quot;lock&quot;);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">lockValue</span> <span class="operator">=</span> redisTemplate.opsForValue().get(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        <span class="comment">// éªŒè¯æ˜¯å¦æ˜¯è‡ªå·±çš„é”</span></span><br><span class="line">        <span class="keyword">if</span>(uuid.equals(lockValue))&#123;</span><br><span class="line">            <span class="comment">// æ˜¯ï¼Œåˆ é”</span></span><br><span class="line">            redisTemplate.delete(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> catalogJsonFromDb;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// åŠ é”å¤±è´¥ã€‚ã€‚ã€‚é‡è¯•</span></span><br><span class="line">        <span class="comment">// ä¼‘çœ 100msé‡è¯•</span></span><br><span class="line">        <span class="comment">// è‡ªæ—‹æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> getCatalogJsonFromDbWithRedisLock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜-3">é—®é¢˜</h2>
<ul>
<li>æ³¨æ„åœ¨<code>redis</code>ï¼Œ<code>get</code>é”çš„å€¼æ—¶ï¼Œå³<code>String lockValue = redisTemplate.opsForValue().get("lock");</code>ï¼Œè¿™æ—¶å¯èƒ½<code>redis</code>è¿˜å­˜åœ¨æˆ‘ä»¬çš„é”ï¼Œè¿™æ—¶è¿”å›çš„æ­£æ˜¯æˆ‘ä»¬<code>uuid</code>ï¼Œä½†æ˜¯å› ä¸ºç½‘ç»œä¼ è¾“çš„å»¶æ—¶ï¼Œæˆ‘ä»¬è¦æ‰§è¡Œ<code>delete</code>æ“ä½œæ—¶ï¼Œæˆ‘ä»¬çš„é”å·²ç»å› ä¸ºè¿‡æœŸç­–ç•¥åˆ é™¤äº†ï¼Œæ‰€ä»¥è™½ç„¶è¿™æ˜¯çš„é”ä¸æ˜¯æˆ‘ä»¬çš„ï¼Œä½†ç¨‹åºä»£ç ä»ç„¶ä¼šæ‰§è¡Œåˆ é™¤é”ï¼ˆå¹¶éæˆ‘ä»¬çš„ï¼‰ï¼Œæœ¬è´¨ä»æ˜¯éåŸå­æ“ä½œé—®é¢˜</li>
</ul>
<h2 id="è§£å†³-3">è§£å†³</h2>
<ul>
<li><code>lua</code>è„šæœ¬ï¼Œå®ç°åŸå­æ“ä½œ</li>
</ul>
<h1 id="åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µäº”">åˆ†å¸ƒå¼é”æ¼”è¿›-é˜¶æ®µäº”</h1>
<h2 id="ä»£ç -4">ä»£ç </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;Catalog2Vo&gt;&gt; <span class="title function_">getCatalogJsonFromDbWithRedisLock</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€å åˆ†å¸ƒå¼é”ï¼Œsetnx</span></span><br><span class="line">    <span class="comment">// åŒæ—¶è®¾ç½®æ—¶é—´</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>, uuid, <span class="number">30</span>, TimeUnit.SECONDS);</span><br><span class="line">    Map&lt;String, List&lt;Catalog2Vo&gt;&gt; catalogJsonFromDb = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (lock) &#123;</span><br><span class="line">        <span class="comment">// åŠ é”æˆåŠŸ</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2ã€è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        <span class="comment">// redisTemplate.expire(&quot;lock&quot;, 30, TimeUnit.SECONDS);</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            catalogJsonFromDb = getCatalogJsonFromDb();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–å€¼å¯¹æ¯”+å¯¹æ¯”æˆåŠŸåˆ é™¤=åŸå­æ“ä½œ</span></span><br><span class="line">            <span class="comment">// String lockValue = redisTemplate.opsForValue().get(&quot;lock&quot;);</span></span><br><span class="line">            <span class="comment">// if (uuid.equals(lockValue)) &#123;</span></span><br><span class="line">            <span class="comment">//     redisTemplate.delete(&quot;lock&quot;);</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// è„šæœ¬è§£é”</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">script</span> <span class="operator">=</span> <span class="string">&quot;if redis.call(&#x27;get&#x27;,KEYS[1]) == ARGV[1] then return redis.call(&#x27;del&#x27;,KEYS[1]) else return 0 end&quot;</span>;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">unlock</span> <span class="operator">=</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">DefaultRedisScript</span>&lt;Long&gt;(script, Long.class), Arrays.asList(<span class="string">&quot;lock&quot;</span>), uuid);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> catalogJsonFromDb;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// åŠ é”å¤±è´¥ã€‚ã€‚ã€‚é‡è¯•</span></span><br><span class="line">        <span class="comment">// ä¼‘çœ 100msé‡è¯•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">200</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> getCatalogJsonFromDbWithRedisLock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ä½¿ç”¨<code>redis</code>åšåˆ†å¸ƒå¼é”</p>
<ul>
<li>åŠ é”å’Œè®¾ç½®è¿‡æœŸæ—¶é—´çš„åŸå­æ€§é—®é¢˜</li>
<li>è§£é”ä¸éªŒè¯é”çš„å½’å±çš„åŸå­æ€§é—®é¢˜</li>
<li>è¿˜æœ‰ä¸šåŠ¡æ—¶é—´ä¸è¿‡æœŸæ—¶é—´çš„è®¾ç½®ï¼Œæœ‰æ—¶éœ€è¦å»¶é•¿è¿‡æœŸæ—¶é—´</li>
</ul>
<p>å¯ä»¥è€ƒè™‘ä½¿ç”¨<code>Redisson</code></p>
]]></content>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Rediså¤§keyé—®é¢˜ä¸scanå‘½ä»¤</title>
    <url>/article/1e9afcf1.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>å‰é¢ä¸æ˜¯å†™äº†ä¸€ç¯‡<a
href="https://wnhyang.github.io/article/8abc133f.html">ç‚¹èµåŠŸèƒ½çš„ä¸€ç§å®ç°</a>çš„æ–‡ç« å—</p>
<p>å½“æ—¶ä¹Ÿæå‡ºäº†ä¸€äº›é—®é¢˜ï¼Œä»Šå¤©å°±æ¥è§£å†³å…¶ä¸­çš„éƒ¨åˆ†é—®é¢˜</p>
<span id="more"></span>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>å…ˆè®²ä¸€è®²èƒŒæ™¯å§ï¼Œä»¥å…æ²¡çœ‹è¿‡ä¹‹å‰æ–‡ç« çš„è¿·æƒ‘</p>
<p>è¿˜æ˜¯ä»¥ç‚¹èµåŠŸèƒ½ä¸ºè¯é¢˜ï¼Œè¿™é‡Œä¸»è¦è§£å†³ä¹‹å‰å­˜åœ¨çš„å¤§<code>key</code>é—®é¢˜</p>
<h2 id="å¤§keyé—®é¢˜">å¤§keyé—®é¢˜</h2>
<p>ç”±äº<code>Redis</code>ä¸»çº¿ç¨‹ä¸ºå•çº¿ç¨‹æ¨¡å‹ï¼Œå¤§<code>key</code>ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œå¦‚ï¼š</p>
<p>1ã€é›†ç¾¤æ¨¡å¼åœ¨<code>slot</code>åˆ†ç‰‡å‡åŒ€æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°æ•°æ®å’ŒæŸ¥è¯¢å€¾æ–œæƒ…å†µï¼Œéƒ¨åˆ†æœ‰å¤§<code>key</code>çš„<code>Redis</code>èŠ‚ç‚¹å ç”¨å†…å­˜å¤šï¼Œ<code>QPS</code>é«˜ã€‚</p>
<p>2ã€å¤§<code>key</code>ç›¸å…³çš„åˆ é™¤æˆ–è€…è‡ªåŠ¨è¿‡æœŸæ—¶ï¼Œä¼šå‡ºç°<code>qps</code>çªé™æˆ–è€…çªå‡çš„æƒ…å†µï¼Œæç«¯æƒ…å†µä¸‹ï¼Œä¼šé€ æˆä¸»ä»å¤åˆ¶å¼‚å¸¸ï¼Œ<code>Redis</code>æœåŠ¡é˜»å¡æ— æ³•å“åº”è¯·æ±‚ã€‚</p>
<h2 id="ç­–ç•¥">ç­–ç•¥</h2>
<p>åŸºäºä¹‹å‰çš„è®¾è®¡ï¼Œè¿™é‡Œè¿›è¡Œæ”¹è¿›</p>
<p>å› ä¸ºç‚¹èµå±äºç»å¸¸æ€§æ“ä½œï¼Œä¸ºäº†é¿å…é¢‘ç¹æ“ä½œæ•°æ®åº“ï¼Œè¿™é‡Œçš„ç­–ç•¥æ˜¯ï¼š</p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 48%" />
<col style="width: 29%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="header">
<th>redis</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>string</td>
<td>key</td>
<td>value</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>news:like:count:%s <br />æ–°é—»ç‚¹èµæ•° stringå‰ç¼€:newsId</td>
<td>count<br />ä¿®æ”¹æ•°</td>
<td></td>
</tr>
<tr class="odd">
<td>hash</td>
<td>key</td>
<td>field</td>
<td>value</td>
</tr>
<tr class="even">
<td></td>
<td>user:like:news:%s <br />ç”¨æˆ·ç‚¹èµæ–°é—» hashå‰ç¼€:hashCodeå–æ¨¡</td>
<td>%s:%s<br />userId:newsId</td>
<td>0ï¼ˆæœªç‚¹èµï¼‰/1ï¼ˆç‚¹èµï¼‰</td>
</tr>
<tr class="odd">
<td>set</td>
<td>key</td>
<td>value</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>user:like:news:set <br />ç”¨æˆ·ç‚¹èµæ“ä½œhashKeyé›†åˆ</td>
<td>user:like:news:%s<br />hashCodeå–æ¨¡</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>news:like:count:set <br />æ–°é—»ç‚¹èµæ•°æ“ä½œnewsIdé›†åˆ</td>
<td>%s<br />newsId</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="æµç¨‹å›¾">æµç¨‹å›¾</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/ç‚¹èµè®¾è®¡.6quc89ltvq40.webp"
alt="ç‚¹èµè®¾è®¡" />
<figcaption aria-hidden="true">ç‚¹èµè®¾è®¡</figcaption>
</figure>
<p>é€šè¿‡å®šæ—¶ä»»åŠ¡ï¼ˆä½¿ç”¨çš„<code>JDK</code>è‡ªå¸¦çš„<code>ScheduledExecutorService</code>ï¼‰å°†<code>redis</code>æ•°æ®æŒä¹…åŒ–åˆ°<code>mysql</code>ï¼Œåæ¥å‘ç°é—®é¢˜ï¼Œåœ¨ä½¿ç”¨<code>ScheduledExecutorService</code>æ—¶ï¼Œåº”è¯¥æ˜¯ç”±äºåœ¨éSpringç»„ä»¶ä¸­æ³¨å…¥Springç»„ä»¶å¯¼è‡´çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæ‰€ä»¥æœ€åæ”¹ä¸ºä½¿ç”¨SpringBootçš„å®šæ—¶ä»»åŠ¡ï¼Œä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œä¹‹å‰å®šæ—¶ä»»åŠ¡æ–‡ç« ä¹Ÿæåˆ°äº†ã€‚</p>
<p>ç‚¹èµä¼šäº§ç”Ÿéå¸¸å¤šæ•°æ®ï¼ŒåšæŒä¹…åŒ–æ—¶ä¸ºäº†ä¸ç”Ÿæˆé‚£ä¹ˆå¤šæ•°æ®ï¼Œåˆ©ç”¨äº†<code>valid</code>å­—æ®µ</p>
<h2 id="ä»£ç ">ä»£ç </h2>
<p>ä¸‹é¢æ˜¯éƒ¨åˆ†ä»£ç ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹</p>
<p><code>Redis</code>å·¥å…·ç±»ï¼Œä¸»è¦å®šä¹‰ä¸€äº›å¸¸é‡å’Œ<code>key</code>æ‹¼è£…å·¥å…·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤keyè¿‡æœŸæ—¶é—´(s)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DEFAULT_TTL</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤keyè¿‡æœŸæ—¶é—´(minute)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DEFAULT_TTL_MINUTES</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤keyè¿‡æœŸæ—¶é—´(day)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DEFAULT_TTL_DAYS</span> <span class="operator">=</span> <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¨¡ 256</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">KEY_MOLD</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * scan count</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SCAN_COUNT</span> <span class="operator">=</span> <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;P, T&gt; String <span class="title function_">getKey</span><span class="params">(P keyPrefix, T id)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>().append(keyPrefix).append(id);</span><br><span class="line">        <span class="keyword">return</span> builder.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUserLikeNewsKey</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>()</span><br><span class="line">                .append(RedisKeyConstants.USER_LIKE_NEWS)</span><br><span class="line">                .append(Math.abs(userId.hashCode() &amp; KEY_MOLD - <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> builder.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUserLikeNewsField</span><span class="params">(Long userId, Long newsId)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>()</span><br><span class="line">                .append(userId)</span><br><span class="line">                .append(RedisKeyConstants.SPLITTER)</span><br><span class="line">                .append(newsId);</span><br><span class="line">        <span class="keyword">return</span> builder.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢ä¸»è¦æ˜¯ç‚¹èµåŠ¨ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userLikeService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLikeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserLikeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(UserLikeServiceImpl.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LIKE_STATE</span> <span class="operator">=</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">UNLIKE_STATE</span> <span class="operator">=</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserLikeNewsMapper userLikeNewsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">like</span><span class="params">(Long userId, Long newsId)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userLikeNewsKey</span> <span class="operator">=</span> RedisUtils.getUserLikeNewsKey(userId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userLikeNewsField</span> <span class="operator">=</span> RedisUtils.getUserLikeNewsField(userId, newsId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">newsLikeCountKey</span> <span class="operator">=</span> RedisUtils.getKey(RedisKeyConstants.NEWS_LIKE_COUNT, newsId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤§keyé—®é¢˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">recordState</span> <span class="operator">=</span> (String) stringRedisTemplate.opsForHash().get(userLikeNewsKey, userLikeNewsField);</span><br><span class="line">        <span class="keyword">if</span> (!LIKE_STATE.equals(recordState)) &#123;</span><br><span class="line">            <span class="comment">// æœªç‚¹èµï¼Œç‚¹èµ</span></span><br><span class="line">            LOGGER.info(<span class="string">&quot;æœªç‚¹èµï¼Œç‚¹èµ&quot;</span>);</span><br><span class="line">            stringRedisTemplate.opsForHash().put(userLikeNewsKey, userLikeNewsField, LIKE_STATE);</span><br><span class="line">            <span class="comment">// æ“ä½œkeyè®°å½•</span></span><br><span class="line">            stringRedisTemplate.opsForSet().add(RedisKeyConstants.USER_LIKE_NEWS_KEY_SET, userLikeNewsKey);</span><br><span class="line">            <span class="comment">// æ–°é—»ç‚¹èµæ•°+1</span></span><br><span class="line">            stringRedisTemplate.opsForValue().increment(newsLikeCountKey);</span><br><span class="line">            <span class="comment">// æ“ä½œkeyè®°å½•</span></span><br><span class="line">            stringRedisTemplate.opsForSet().add(RedisKeyConstants.NEWS_LIKE_COUNT_KEY_SET, String.valueOf(newsId));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unlike</span><span class="params">(Long userId, Long newsId)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userLikeNewsKey</span> <span class="operator">=</span> RedisUtils.getUserLikeNewsKey(userId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userLikeNewsField</span> <span class="operator">=</span> RedisUtils.getUserLikeNewsField(userId, newsId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">newsLikeCountKey</span> <span class="operator">=</span> RedisUtils.getKey(RedisKeyConstants.NEWS_LIKE_COUNT, newsId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">recordState</span> <span class="operator">=</span> (String) stringRedisTemplate.opsForHash().get(userLikeNewsKey, userLikeNewsField);</span><br><span class="line">        <span class="keyword">if</span> (!UNLIKE_STATE.equals(recordState)) &#123;</span><br><span class="line">            <span class="comment">// å·²ç‚¹èµï¼Œå–æ¶ˆç‚¹èµ</span></span><br><span class="line">            LOGGER.info(<span class="string">&quot;å·²ç‚¹èµï¼Œå–æ¶ˆç‚¹èµ&quot;</span>);</span><br><span class="line">            stringRedisTemplate.opsForHash().put(userLikeNewsKey, userLikeNewsField, UNLIKE_STATE);</span><br><span class="line">            <span class="comment">// æ“ä½œkeyè®°å½•</span></span><br><span class="line">            stringRedisTemplate.opsForSet().add(RedisKeyConstants.USER_LIKE_NEWS_KEY_SET, userLikeNewsKey);</span><br><span class="line">            <span class="comment">// æ–°é—»ç‚¹èµæ•°-1</span></span><br><span class="line">            stringRedisTemplate.opsForValue().decrement(newsLikeCountKey);</span><br><span class="line">            <span class="comment">// æ“ä½œkeyè®°å½•</span></span><br><span class="line">            stringRedisTemplate.opsForSet().add(RedisKeyConstants.NEWS_LIKE_COUNT_KEY_SET, String.valueOf(newsId));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç‚¹èµæ–°é—»</span></span><br><span class="line"><span class="comment">     * æš‚æœªè°ƒç”¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newsId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">liked</span><span class="params">(Long userId, Long newsId)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userLikeNewsKey</span> <span class="operator">=</span> RedisUtils.getUserLikeNewsKey(userId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userLikeNewsField</span> <span class="operator">=</span> RedisUtils.getUserLikeNewsField(userId, newsId);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">recordState</span> <span class="operator">=</span> (String) stringRedisTemplate.opsForHash().get(userLikeNewsKey, userLikeNewsField);</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(recordState)) &#123;</span><br><span class="line">            <span class="keyword">return</span> LIKE_STATE.equals(recordState);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">UserLikeNews</span> <span class="variable">userLikeNews</span> <span class="operator">=</span> userLikeNewsMapper.selectValidByUserIdAndNewsId(userId, newsId);</span><br><span class="line">            <span class="keyword">return</span> Objects.nonNull(userLikeNews);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="scan">scan</h2>
<p>æœ€åå…³äºæŒä¹…åŒ–ï¼Œå¯ä»¥å…ˆçœ‹ä¸‹é¢æ–‡ç« </p>
<p><a
href="https://aijishu.com/a/1060000000007477">https://aijishu.com/a/1060000000007477</a></p>
<p>è¿™ç¯‡è®²çš„æ˜¯åˆ©ç”¨<code>scan</code>ä»£æ›¿<code>keys</code></p>
<p>ç„¶åå†çœ‹</p>
<p><a
href="https://cloud.tencent.com/developer/article/1650002">https://cloud.tencent.com/developer/article/1650002</a></p>
<p><a
href="https://redis.io/commands/scan">https://redis.io/commands/scan</a></p>
<p>è¿™é‡Œè®²çš„<code>scan</code>å­˜åœ¨çš„é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="meta">@Scheduled(initialDelay = 60 * 1000, fixedDelay = 5 * 60 * 1000)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">persistUserLikeNews</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// å®šæ—¶ä»»åŠ¡æŒä¹…åŒ–</span></span><br><span class="line">    Set&lt;String&gt; keys = stringRedisTemplate.opsForSet().members(RedisKeyConstants.USER_LIKE_NEWS_KEY_SET);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Objects.nonNull(keys)) &#123;</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="comment">// TODO cursor é—®é¢˜</span></span><br><span class="line">            Cursor&lt;Map.Entry&lt;Object, Object&gt;&gt; cursor = stringRedisTemplate.opsForHash().scan(key</span><br><span class="line">                    , ScanOptions.scanOptions().match(<span class="string">&quot;*&quot;</span>).count(RedisUtils.SCAN_COUNT).build());</span><br><span class="line">            <span class="keyword">while</span> (cursor.hasNext()) &#123;</span><br><span class="line">                Map.Entry&lt;Object, Object&gt; entry = cursor.next();</span><br><span class="line">                <span class="type">String</span> <span class="variable">likeRecordField</span> <span class="operator">=</span> (String) entry.getKey();</span><br><span class="line"></span><br><span class="line">                <span class="type">UserLikeNews</span> <span class="variable">userLikeRecord</span> <span class="operator">=</span> getUserLikeNews(likeRecordField);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ???æ£€æŸ¥ç”¨æˆ·å’Œæ–°é—»è¿˜åœ¨ä¸</span></span><br><span class="line"></span><br><span class="line">                <span class="type">UserLikeNews</span> <span class="variable">userLikeNews</span> <span class="operator">=</span> userLikeNewsMapper.selectByUserIdAndNewsId(userLikeRecord.getUserId(), userLikeRecord.getNewsId());</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">haveRecord</span> <span class="operator">=</span> Objects.nonNull(userLikeNews);</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">state</span> <span class="operator">=</span> (String) entry.getValue();</span><br><span class="line">                <span class="comment">// ç‚¹èµçŠ¶æ€</span></span><br><span class="line">                <span class="keyword">if</span> (LikeConstants.LIKE.equals(state)) &#123;</span><br><span class="line">                    <span class="comment">// æœ‰è®°å½• valid true</span></span><br><span class="line">                    <span class="keyword">if</span> (haveRecord) &#123;</span><br><span class="line">                        userLikeNews.setValid(<span class="literal">true</span>);</span><br><span class="line">                        userLikeNewsMapper.updateByPrimaryKeySelective(userLikeNews);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// æ— è®°å½• æ’å…¥</span></span><br><span class="line">                        userLikeNewsMapper.insertSelective(userLikeRecord);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (LikeConstants.UNLIKE.equals(state)) &#123;</span><br><span class="line">                    <span class="comment">// å–æ¶ˆç‚¹èµçŠ¶æ€</span></span><br><span class="line">                    <span class="keyword">if</span> (haveRecord) &#123;</span><br><span class="line">                        <span class="comment">// æœ‰è®°å½• valid false</span></span><br><span class="line">                        userLikeNews.setValid(<span class="literal">false</span>);</span><br><span class="line">                        userLikeNewsMapper.updateByPrimaryKeySelective(userLikeNews);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// åˆ é™¤å·²æŒä¹…åŒ–çš„fieldï¼Œé—®é¢˜è‹¥å‡ºç°å¼‚å¸¸ï¼Œmysqlå¯ä»¥ä¾æ®äº‹åŠ¡å›æ»šï¼Œä½†redisä¸ä¼š</span></span><br><span class="line">                stringRedisTemplate.opsForHash().delete(key, likeRecordField);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                cursor.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                LOGGER.error(<span class="string">&quot;cursorå…³é—­å¤±è´¥&quot;</span>);</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­hashKeyä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ æœªæŒä¹…åŒ–</span></span><br><span class="line">            <span class="keyword">if</span> (stringRedisTemplate.opsForHash().size(key) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// ä»setä¸­åˆ é™¤</span></span><br><span class="line">                stringRedisTemplate.opsForSet().remove(RedisKeyConstants.USER_LIKE_NEWS_KEY_SET, key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®šæ—¶ä»»åŠ¡ä»£ç å°±ä¸è´´äº†ï¼Œæœ‰å¾ˆå¤šå®ç°æ–¹å¼</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è®¸å¤šæ—¶å€™ï¼Œæˆ‘ä»¬çœŸçš„éœ€è¦å®è·µæ‰èƒ½å¾—åˆ°çœŸç†</p>
<p>ä¸€å¼€å§‹ç•…æƒ³çš„å¾ˆç¾å¥½ï¼Œä»¥ä¸ºå®ç°å¾ˆç®€å•ï¼Œç­‰åˆ°æ‰‹å»åšäº†ï¼Œæ‰å‘ç°æ€»ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¸æ˜¯é‚£ä¹ˆé¡ºç•…ï¼Œå®è·µå•Š~å®è·µå•Š</p>
]]></content>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Rediså®‰è£…</title>
    <url>/article/c9f6f059.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>èœé¸Ÿæ•™ç¨‹ï¼š<a
href="https://www.runoob.com/redis/redis-tutorial.html">https://www.runoob.com/redis/redis-tutorial.html</a></p>
<p>ä¸‹è½½åœ°å€ï¼šhttp://download.redis.io/releases/</p>
<p>åšæ–‡ï¼š<a
href="https://blog.csdn.net/u022812849/article/details/108021517">https://blog.csdn.net/u022812849/article/details/108021517</a></p>
<span id="more"></span>
<p><strong>è§£å‹</strong></p>
<p>è¿™â¾¥ä¸‹è½½çš„æ˜¯ <code>redis-6.0.6.tar.gz</code> å®‰è£…åŒ…ï¼Œå¹¶å°†å…¶ç›´æ¥æ”¾åœ¨äº†
<code>root</code> â½¬å½•ä¸‹</p>
<p>1ã€åœ¨ <code>/usr/local/</code> ä¸‹åˆ›å»º <code>redis</code>
â½‚ä»¶å¤¹å¹¶è¿›â¼Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">mkdir redis</span><br><span class="line">cd redis</span><br></pre></td></tr></table></figure>
<p>2ã€å°† <code>Redis</code> å®‰è£…åŒ…è§£å‹åˆ° <code>/usr/local/redis</code>
ä¸­å³å¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf /root/redis-5.0.8.tar.gz -C ./</span><br></pre></td></tr></table></figure>
<p>è§£å‹å®Œä¹‹åï¼Œ <code>/usr/local/redis</code> â½¬å½•ä¸­ä¼šå‡ºç°â¼€ä¸ª
<code>redis-6.0.6</code> çš„â½¬å½•</p>
<p><strong>å®‰è£…</strong></p>
<p>å¦‚æœæ²¡æœ‰å®‰è£…<code>wget</code>ï¼Œå…ˆå®‰è£…<code>yum install -y wget</code>ã€‚</p>
<p>makeä¹‹å‰ç¡®ä¿å®‰è£…äº†gccï¼Œæœªå®‰è£…åˆ™éœ€å®‰è£…<code>yum install -y gcc</code>ã€‚</p>
<p><code>gcc -v</code> æŸ¥çœ‹ç‰ˆæœ¬</p>
<p><code>redis6</code> éœ€è¦ <code>gcc5.3</code>ä»¥ä¸Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‡çº§åˆ° 5.3åŠä»¥ä¸Šç‰ˆæœ¬</span></span><br><span class="line">yum -y install centos-release-scl</span><br><span class="line">yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils</span><br><span class="line"></span><br><span class="line">scl enable devtoolset-9 bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼šsclå‘½ä»¤å¯ç”¨åªæ˜¯ä¸´æ—¶çš„ï¼Œé€€å‡ºxshellæˆ–è€…é‡å¯å°±ä¼šæ¢å¤åˆ°åŸæ¥çš„gccç‰ˆæœ¬ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¦‚æœè¦é•¿æœŸç”Ÿæ•ˆçš„è¯ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š</span></span><br><span class="line">echo &quot;source /opt/rh/devtoolset-9/enable&quot; &gt;&gt;/etc/profile</span><br></pre></td></tr></table></figure>
<p>å…ˆè¿è¡Œ<code>make distclean</code>æ¸…ç†ä¸Šæ¬¡makeå¤±è´¥çš„æ–‡ä»¶å’Œç›®å½•ï¼Œå†æ¬¡makeã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd redis-5.0.8/</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p><strong>å¯åŠ¨</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd utils/</span><br><span class="line">./install_server.sh</span><br></pre></td></tr></table></figure>
<p><code>install_server.sh</code>å¯èƒ½å‡ºé”™è¯¯</p>
<p>æ‰“å¼€install_server.shï¼Œæ³¨é‡Šæ‰ä¸‹é¢çš„å†…å®¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">_pid_1_exe=<span class="string">&quot;<span class="subst">$(readlink -f /proc/1/exe)</span>&quot;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;_pid_1_exe##*/&#125;</span>&quot;</span> = systemd ]</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="keyword">then</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">	<span class="built_in">echo</span> <span class="string">&quot;This systems seems to use systemd.&quot;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">	<span class="built_in">echo</span> <span class="string">&quot;Please take a look at the provided example service unit files in this directory, and adapt and install them. Sorry!&quot;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">	<span class="built_in">exit</span> 1</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="keyword">fi</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">unset</span> _pid_1_exe</span></span><br></pre></td></tr></table></figure>
<p>ä»¥åå°±å¯ä»¥ä½¿ç”¨ç³»ç»ŸæœåŠ¡çš„å‘½ä»¤æ¥æ“ä½œredisäº†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl stop redis_6379</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl status redis_6379</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl start redis_6379</span></span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹RedisæœåŠ¡å¯åŠ¨æƒ…å†µ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status redis_6379.service</span><br></pre></td></tr></table></figure>
<p><strong>å®¢æˆ·ç«¯æµ‹è¯•</strong></p>
<p>å¯åŠ¨â¾ƒå¸¦çš„ redis-cli å®¢æˆ·ç«¯æµ‹è¯•</p>
<p><code>ping</code> - <code>PONG</code></p>
<p><strong>è®¾ç½®è¿œç¨‹è¿æ¥å’Œè®¿é—®å¯†ç </strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/redis/6379.conf</span><br></pre></td></tr></table></figure>
<p>å°† <code>bind 127.0.0.1</code> ä¿®æ”¹ä¸º
<code>0.0.0.0</code>å®Œæˆå…è®¸è¿œç¨‹è¿æ¥</p>
<p>æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">requirepass foobared</span></span><br></pre></td></tr></table></figure>
<p>å»æ‰æ³¨é‡Šï¼Œå°† <code>foobared</code>
ä¿®æ”¹ä¸ºâ¾ƒâ¼°æƒ³è¦çš„å¯†ç ï¼Œä¿å­˜å³å¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">requirepass root</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜ï¼Œé‡å¯ Redis æœåŠ¡å³å¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart redis_6379.service</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡ä½¿ç”¨<code>redis-cli</code>è¿›å…¥</p>
<p>æç¤º<code>NOAUTH Authentication required.</code>ï¼Œæ—¢éœ€è¦è¾“å…¥å¯†ç éªŒè¯</p>
<p>è¾“å…¥<code>auth root</code>å³å¯ï¼ˆrootä¸ºä¹‹å‰è®¾ç½®çš„å¯†ç ï¼‰</p>
<p>æƒ³è¦è¿œç¨‹è¿æ¥è¿˜éœ€è¦</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€æ”¾é˜²ç«å¢™ç«¯å£</span></span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°åŠ è½½</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•</strong></p>
<p><a
href="https://github.com/uglide/RedisDesktopManager/releases/tag/0.8.8">https://github.com/uglide/RedisDesktopManager/releases/tag/0.8.8</a></p>
<h1 id="å‘½ä»¤">å‘½ä»¤</h1>
<p>Redis å®¢æˆ·ç«¯çš„åŸºæœ¬è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">redis-cli</span></span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br><span class="line">redis 127.0.0.1:6379&gt; PING</span><br><span class="line"></span><br><span class="line">PONG</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ <strong>PING</strong> å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ç”¨äºæ£€æµ‹ redis
æœåŠ¡æ˜¯å¦å¯åŠ¨ã€‚</p>
<p>è¿œç¨‹è¿æ¥</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ redis-cli -h host -p port -a password</span><br><span class="line"></span><br><span class="line">$ redis-cli -h 127.0.0.1 -p 6379 -a <span class="string">&quot;mypass&quot;</span></span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br><span class="line">redis 127.0.0.1:6379&gt; PING</span><br><span class="line"></span><br><span class="line">PONG</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤16ä¸ªæ•°æ®åº“ï¼Œé€‰æ‹©æ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">select db</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ•°æ®åº“å¤§å°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dbsize </span><br></pre></td></tr></table></figure>
<p>å¸¸ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set key value #è®¾ç½®k-v</span><br><span class="line"></span><br><span class="line">get key	#è·å–k-v</span><br><span class="line"></span><br><span class="line">key * #è·å–æ‰€æœ‰k</span><br><span class="line"></span><br><span class="line">flushdb #æ¸…ç©ºæ•°æ®åº“</span><br><span class="line"></span><br><span class="line">flushall #æ¸…ç©ºå…¨éƒ¨æ•°æ®åº“</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¿™ç¯‡æ–‡ç« ä»…ä»…æ˜¯Rediså®‰è£…ï¼Œå­¦ä¹ è®°å½•è¿˜æœ‰å¾…æ•´ç†ã€‚</p>
]]></content>
      <tags>
        <tag>Redis</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>RocketMQéƒ¨ç½²</title>
    <url>/article/28a4cb58.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘åœ¨å­¦ä¹ <code>RocketMQ</code>ï¼Œä½†ä¸€ç›´è‹¦äºæ²¡æœ‰åˆé€‚çš„ç¯å¢ƒå­¦ä¹ ã€‚æˆ‘çš„ç”µè„‘æ˜¯<code>Windows</code>ç³»ç»Ÿï¼Œè™½ç„¶æ¢ä¸Šäº†ä¸“ä¸šç‰ˆè£…ä¸Šäº†<code>Docker</code>ï¼Œè€Œä¸”ä¹Ÿæœ‰è™šæ‹Ÿæœºï¼Œå¹³å¸¸ä¹Ÿä¼šé€šè¿‡è¿™äº›ç¯å¢ƒå­¦ä¹ ï¼Œä½†æ˜¯è¿˜æ˜¯å¤ªä¸æ–¹ä¾¿äº†ï¼Œä¸ºäº†æ–¹ä¾¿ç»ˆäºåˆç”¨ä¸Šäº†äº‘æœåŠ¡å™¨ï¼Œè¿™æ¬¡æ˜¯é˜¿é‡Œçš„ã€‚</p>
<p>é…ç½®å¦‚ä¸‹</p>
<blockquote>
<p>CPU&amp;å†…å­˜ 1æ ¸(vCPU)2 GiB</p>
</blockquote>
<blockquote>
<p>æ“ä½œç³»ç»Ÿ CentOS 7.8 64ä½</p>
</blockquote>
<blockquote>
<p>å½“å‰ä½¿ç”¨å¸¦å®½ 1Mbps</p>
</blockquote>
<p>è¿™æ¬¡<code>RocketMQ</code>çš„é…ç½®åŒ…æ‹¬ï¼Œ<code>RocketMQï¼ˆNameServerã€Brokerï¼‰</code>å’Œæ§åˆ¶å°<code>RocketMQ-Dashboard</code></p>
<p>æè¦ï¼šåŸºç¡€çš„<code>JDK</code>å’Œ<code>Maven</code>è¿™é‡Œä¸å¤šæäº†ï¼Œéƒ½å®‰è£…é…ç½®å¥½äº†ï¼Œå¦å¤–åé¢çš„<code>RocketMQ-Dashboard</code>é‡‡ç”¨<code>Docker</code>éƒ¨ç½²æ–¹å¼ï¼Œ<code>Docker</code>å®‰è£…æŸ¥çœ‹å®˜ç½‘è£…ä¸Šå°±å¥½ã€‚</p>
<span id="more"></span>
<h1 id="rocketmq">RocketMQ</h1>
<p>https://rocketmq.apache.org/zh/docs/quickStart/02quickstart/</p>
<h2 id="å‡†å¤‡rocketmqå®‰è£…åŒ…">å‡†å¤‡RocketMQå®‰è£…åŒ…</h2>
<p>å®˜ç½‘æä¾›æœ‰äºŒè¿›åˆ¶åŒ…å’Œæºç åŒ…ï¼ŒåŒºåˆ«æ˜¯ï¼šæºç åŒ…é€šè¿‡ç¼–è¯‘æˆä¸ºäºŒè¿›åˆ¶åŒ…æ‰å¯è¿è¡Œ</p>
<p>è¿™é‡Œç›´æ¥å‡†å¤‡<code>rocketmq-all-5.0.0-bin-release.zip</code>äºŒè¿›åˆ¶åŒ…</p>
<h2 id="åˆ›å»ºç›®å½•å¹¶è§£å‹">åˆ›å»ºç›®å½•å¹¶è§£å‹</h2>
<p>é€‰å¥½ç›®å½•è§£å‹</p>
<p>å¦‚æœç¼ºå°‘<code>zip</code>å’Œ<code>unzip</code>ï¼Œç›´æ¥ç”¨ä¸‹é¢å‘½ä»¤å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y unzip zip</span><br></pre></td></tr></table></figure>
<p>ç„¶åè§£å‹å³å¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip rocketmq-all-5.0.0-bin-release.zip</span><br></pre></td></tr></table></figure>
<p>è§£å‹åå°±æœ‰<code>rocketmq-all-5.0.0-bin-release</code></p>
<h2 id="ä¿®æ”¹é…ç½®">ä¿®æ”¹é…ç½®</h2>
<p>https://blog.csdn.net/qq359605040/article/details/124272238</p>
<p>å®˜ç½‘å¯åŠ¨æ–¹æ³•åœ¨ä¸‹é¢ï¼Œå»ºè®®å…ˆä¿®æ”¹å¯åŠ¨é…ç½®ï¼Œä¸ç„¶å¾ˆå¯èƒ½å¯åŠ¨å¤±è´¥</p>
<p>å…ˆä¿®æ”¹<code>nameserver</code>å¯åŠ¨é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim bin/runserver.sh</span><br></pre></td></tr></table></figure>
<p>åŸæœ‰é…ç½®æˆ‘å·²ç»æ³¨é‡Šæ‰äº†<code>#JAVA_OPT="$&#123;JAVA_OPT&#125; -server -Xms4g -Xmx4g -Xmn2g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"</code></p>
<p>è¿™ä¸ªé…ç½®å¯¹äºæœºå™¨é…ç½®å¾ˆé«˜ï¼Œæ‰€ä»¥æˆ‘å°†é…ç½®æ”¹æˆä¸‹é¢çš„ä¸€è¡Œäº†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">choose_gc_options()</span><br><span class="line">&#123;</span><br><span class="line">    # Example of JAVA_MAJOR_VERSION value : &#x27;1&#x27;, &#x27;9&#x27;, &#x27;10&#x27;, &#x27;11&#x27;, ...</span><br><span class="line">    # &#x27;1&#x27; means releases befor Java 9</span><br><span class="line">    JAVA_MAJOR_VERSION=$(&quot;$JAVA&quot; -version 2&gt;&amp;1 | sed -r -n &#x27;s/.* version &quot;([0-9]*).*$/\1/p&#x27;)</span><br><span class="line">    if [ -z &quot;$JAVA_MAJOR_VERSION&quot; ] || [ &quot;$JAVA_MAJOR_VERSION&quot; -lt &quot;9&quot; ] ; then</span><br><span class="line">      #JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms4g -Xmx4g -Xmn2g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSInitiatingOccupancyFraction=70 -XX:+CMSParallelRemarkEnabled -XX:SoftRefLRUPolicyMSPerMB=0 -XX:+CMSClassUnloadingEnabled -XX:SurvivorRatio=8 -XX:-UseParNewGC&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -verbose:gc -Xloggc:$&#123;GC_LOG_DIR&#125;/rmq_srv_gc_%p_%t.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=30m&quot;</span><br><span class="line">    else</span><br><span class="line">      #JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms4g -Xmx4g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseG1GC -XX:G1HeapRegionSize=16m -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -XX:SoftRefLRUPolicyMSPerMB=0&quot;</span><br><span class="line">      JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -Xlog:gc*:file=$&#123;GC_LOG_DIR&#125;/rmq_srv_gc_%p_%t.log:time,tags:filecount=5,filesize=30M&quot;</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æ˜¯<code>broker</code>å¯åŠ¨é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim bin/runbroker.sh</span><br></pre></td></tr></table></figure>
<p>åŒæ ·è¢«æ³¨é‡Šçš„æ˜¯<code>#JAVA_OPT="$&#123;JAVA_OPT&#125; -server -Xms8g -Xmx8g"</code>æŠŠå‚æ•°æ”¹å°äº†ä¸€äº›</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">choose_gc_log_directory</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -server -Xms8g -Xmx8g&quot;</span></span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m&quot;</span><br><span class="line">choose_gc_options</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:-OmitStackTraceInFastThrow&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+AlwaysPreTouch&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:MaxDirectMemorySize=15g&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:-UseLargePages -XX:-UseBiasedLocking&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -Drocketmq.client.logUseSlf4j=true&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xdebug -Xrunjdwp:transport=dt_socket,address=9555,server=y,suspend=n&quot;</span></span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; $&#123;JAVA_OPT_EXT&#125;&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -cp $&#123;CLASSPATH&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>æœ€åä¿®æ”¹<code>broker</code>é…ç½®</p>
<p>https://blog.csdn.net/zhwyj1019/article/details/81082254</p>
<p>ä¿®æ”¹æ­¤é…ç½®ä¸»è¦åŸå› æ˜¯å¯èƒ½å‡ºç°ä¸Šé¢é“¾æ¥çš„æƒ…å†µ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim conf/broker.conf</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ åé¢çš„ä¸¤è¡Œé…ç½®ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨<code>IP</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brokerClusterName = DefaultCluster</span><br><span class="line">brokerName = broker-a</span><br><span class="line">brokerId = 0</span><br><span class="line">deleteWhen = 04</span><br><span class="line">fileReservedTime = 48</span><br><span class="line">brokerRole = ASYNC_MASTER</span><br><span class="line">flushDiskType = ASYNC_FLUSH</span><br><span class="line">namesrvAddr=IP:9876</span><br><span class="line">brokerIP1=IP</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨nameserver">å¯åŠ¨NameServer</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å¯åŠ¨namesrv</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">nohup</span> sh bin/mqnamesrv &amp;</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># éªŒè¯namesrvæ˜¯å¦å¯åŠ¨æˆåŠŸ</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -f ~/logs/rocketmqlogs/namesrv.log</span></span><br><span class="line">The Name Server boot success...</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨brokerproxy">å¯åŠ¨Broker+Proxy</h2>
<p><code>NameServer</code>æˆåŠŸå¯åŠ¨åï¼Œæˆ‘ä»¬å¯åŠ¨<code>Broke</code>rå’Œ<code>Proxyï¼Œ5.x</code>
ç‰ˆæœ¬ä¸‹æˆ‘ä»¬å»ºè®®ä½¿ç”¨ <code>Local</code> æ¨¡å¼éƒ¨ç½²ï¼Œå³ <code>Broker</code>
å’Œ <code>Proxy</code> åŒè¿›ç¨‹éƒ¨ç½²ã€‚<code>5.x</code> ç‰ˆæœ¬ä¹Ÿæ”¯æŒ
<code>Broker</code> å’Œ <code>Proxy</code>
åˆ†ç¦»éƒ¨ç½²ä»¥å®ç°æ›´çµæ´»çš„é›†ç¾¤èƒ½åŠ›ã€‚è¯¦æƒ…å‚è€ƒ<a
href="https://rocketmq.apache.org/zh/docs/deploymentOperations/15deploy">éƒ¨ç½²æ•™ç¨‹</a>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å…ˆå¯åŠ¨broker</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">nohup</span> sh bin/mqbroker -n localhost:9876 --enable-proxy &amp;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># éªŒè¯brokeræ˜¯å¦å¯åŠ¨æˆåŠŸ, æ¯”å¦‚, brokerçš„ipæ˜¯192.168.1.2 ç„¶ååå­—æ˜¯broker-a</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -f ~/logs/rocketmqlogs/broker_default.log</span> </span><br><span class="line">The broker[broker-a,192.169.1.2:10911] boot success...</span><br></pre></td></tr></table></figure>
<h1 id="rocketmq-dashboard">RocketMQ-Dashboard</h1>
<p>https://github.com/apache/rocketmq-dashboard</p>
<p>å®˜ç½‘æœ‰<code>docker</code>å’Œæºç ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼Œè¿™é‡Œä½¿ç”¨<code>docker</code>éƒ¨ç½²ï¼Œè€Œä¸”æˆ‘ä¹Ÿéå¸¸æ¨èè¿™ç§æ–¹å¼ï¼Œæ–¹ä¾¿ç®€å•</p>
<h2 id="æ‹‰å–é•œåƒ">æ‹‰å–é•œåƒ</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull apacherocketmq/rocketmq-dashboard:latest</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨">å¯åŠ¨</h2>
<p>è¿™é‡ŒæŠŠ<code>ip</code>ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘æœåŠ¡å™¨çš„<code>ip</code>ï¼Œå› ä¸ºæˆ‘è¯•äº†å¥½å¤šæ¬¡æ€»æ˜¯å­˜åœ¨<code>RemotingConnectException</code>å¼‚å¸¸ï¼Œç›®å‰è¿™æ ·åšæ˜¯æ²¡é—®é¢˜çš„ï¼Œè€Œä¸”è¦æ³¨æ„è¿™é‡Œçš„<code>docker</code>å†…éƒ¨ç«¯å£ä¸è¦æ”¹ï¼Œå› ä¸ºè¿™ä¸ªé•œåƒå°±æ˜¯è¿è¡Œåœ¨<code>8080</code>ç«¯å£çš„ï¼Œå¤–éƒ¨æ— æ‰€è°“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d --name rocketmq-dashboard -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=127.0.0.1:9876&quot; -p 8080:8080 -t apacherocketmq/rocketmq-dashboard:latest</span><br></pre></td></tr></table></figure>
<h1 id="é˜²ç«å¢™ä¸å®‰å…¨ç»„">é˜²ç«å¢™ä¸å®‰å…¨ç»„</h1>
<p>å¯¹äºæˆ‘ä»¬æœ¬åœ°æ­å»ºçš„æœåŠ¡è¿›ç¨‹ï¼Œæœ¬åœ°è®¿é—®æ˜¯éƒ½æ˜¯æ— æ„Ÿçš„ï¼Œä½†æ˜¯ä¸€æ—¦ç”¨åˆ°äº†äº‘æœåŠ¡å™¨æˆ–æ˜¯å…¶ä»–è™šæ‹Ÿæœºä¸åŒipæœåŠ¡è¿›ç¨‹ï¼Œå°±è¦æ³¨æ„é˜²ç«å¢™å’Œå®‰å…¨ç»„äº†ã€‚</p>
<h2 id="é˜²ç«å¢™å¸¸ç”¨æ“ä½œ">é˜²ç«å¢™å¸¸ç”¨æ“ä½œ</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent  ï¼ˆ--permanentæ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆï¼‰</span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --list-ports  ï¼ˆæŸ¥çœ‹æ‰€æœ‰å¼€å¯çš„ç«¯å£ï¼‰</span><br><span class="line"> </span><br><span class="line">firewall-cmd --zone=public --remove-port=8080/tcp --permanent  ï¼ˆåˆ é™¤ç«¯å£ï¼‰</span><br><span class="line"></span><br><span class="line">firewall-cmd --reload ï¼ˆé‡å¯ç”Ÿæ•ˆé…ç½®ï¼‰</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹ç«¯å£">æŸ¥çœ‹ç«¯å£</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netstat -ntulp |grep 80</span><br></pre></td></tr></table></figure>
<h2 id="å®‰å…¨ç»„">å®‰å…¨ç»„</h2>
<p>å®‰å…¨ç»„çš„è¯é’ˆå¯¹äº‘æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¼€æ”¾äº†é˜²ç«å¢™åè¿˜éœ€è¦åˆ°å¯¹åº”çš„äº‘æœåŠ¡ç®¡ç†å°å¼€æ”¾å¯¹åº”ç«¯å£ï¼Œæˆ‘ä»¬æ‰å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p>
]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Linux</tag>
        <tag>RocketMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>SSMæ•´åˆ</title>
    <url>/article/254393f0.html</url>
    <content><![CDATA[<p>åˆå­¦ï¼Œå¾ˆå¤šçŸ¥è¯†ä¸çŸ¥é“ï¼Œåªæƒ³ç®€å•è®°å½•ä¸€ä¸‹</p>
<h1 id="å‚è€ƒ">å‚è€ƒï¼š</h1>
<p><a
href="https://mp.weixin.qq.com/s/SDxqGu_il3MUCTcN1EYrng">ç‹‚ç¥è¯´SpringMVC05ï¼šæ•´åˆSSMæ¡†æ¶</a></p>
<p><a
href="https://yichun.blog.csdn.net/article/details/100192558">å²ä¸Šæœ€è¯¦ç»†çš„IDEAä¼˜é›…æ•´åˆMaven+SSMæ¡†æ¶ï¼ˆè¯¦ç»†æ€è·¯+é™„å¸¦æºç ï¼‰</a></p>
<span id="more"></span>
<h1 id="å£°æ˜">å£°æ˜</h1>
<p>è¿™ä¸æ˜¯æ•™ç¨‹ï¼Œç®€å•çš„ä¸ªäººè®°å½•è€Œå·²</p>
<blockquote>
<p>ç¯å¢ƒè¦æ±‚</p>
</blockquote>
<h1 id="ç¯å¢ƒ">ç¯å¢ƒï¼š</h1>
<ul>
<li>IDEA2019</li>
<li>MySQL5.5.27</li>
<li>Tomcat9</li>
<li>Maven3.6</li>
</ul>
<h2 id="æ•°æ®åº“ç¯å¢ƒ">æ•°æ®åº“ç¯å¢ƒ</h2>
<p>ä¸€ä¸ªåŒ…å«æ•°æ®åº“è¡¨çš„æ•°æ®åº“</p>
<h2 id="åŸºæœ¬ç¯å¢ƒæ­å»º">åŸºæœ¬ç¯å¢ƒæ­å»º</h2>
<h3 id="æ–°å»ºmavené¡¹ç›®">1ã€æ–°å»ºMavené¡¹ç›®</h3>
<h3 id="pom.xml">2ã€pom.xml</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- springç‰ˆæœ¬å· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.6.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatisç‰ˆæœ¬å· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.5.3<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- log4jæ—¥å¿—æ–‡ä»¶ç®¡ç†åŒ…ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.7.7<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mysqlé©±åŠ¨ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.37<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- springæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-oxm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼å…¥Mysqlé©±åŠ¨jaråŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼å…¥dbcpçš„jaråŒ…ï¼Œç”¨æ¥åœ¨applicationContext.xmlä¸­é…ç½®æ•°æ®åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatisæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis/springåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--   json --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- jsp/servlet/EL/JSTL --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- log start --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- log end --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="é¡¹ç›®ç»“æ„">3ã€é¡¹ç›®ç»“æ„</h3>
<figure>
<img data-src="https://pic.downk.cc/item/5fd0d44e3ffa7d37b34bb7da.jpg"
alt="é¡¹ç›®ç»“æ„" />
<figcaption aria-hidden="true">é¡¹ç›®ç»“æ„</figcaption>
</figure>
<h3 id="åŸºæœ¬ç»“æ„å’Œæ¡†æ¶">4ã€åŸºæœ¬ç»“æ„å’Œæ¡†æ¶</h3>
<ul>
<li>mybatis-config.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>applicationContext.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="mybatiså±‚">Mybatiså±‚</h2>
<h3 id="æ•°æ®åº“é…ç½®æ–‡ä»¶-db.properties">1ã€æ•°æ®åº“é…ç½®æ–‡ä»¶
db.properties</h3>
<p>æ³¨æ„ï¼šMySQLç‰ˆæœ¬å¤§äº8è¦åœ¨urlåŠ å…¥æ—¶åŒºé…ç½®ï¼ˆæŸ¥èµ„æ–™å§ï¼‰</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/ex2?useSSL=true&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.maxActive</span>=<span class="string">30</span></span><br><span class="line"><span class="attr">jdbc.maxIdle</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">jdbc.initialSize</span>=<span class="string">5</span></span><br></pre></td></tr></table></figure>
<h3 id="mybatisæ ¸å¿ƒé…ç½®">2ã€MyBatisæ ¸å¿ƒé…ç½®</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.xx.pojo&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/xx/dao/xxMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®åº“å®ä½“ç±»com.xx.pojo.xx">3ã€æ•°æ®åº“å®ä½“ç±»com.xx.pojo.xx</h3>
<p>ä½¿ç”¨lombokæ’ä»¶ï¼Œä¼šç®€å•ä¸€äº›ï¼Œä½†åªå»ºè®®ä¸ªäººå¼€å‘ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br></pre></td></tr></table></figure>
<h3 id="daoå±‚çš„-mapperæ¥å£">4ã€Daoå±‚çš„ Mapperæ¥å£</h3>
<h3 id="ç¼–å†™æ¥å£å¯¹åº”çš„-mapper.xml-æ–‡ä»¶">5ã€ç¼–å†™æ¥å£å¯¹åº”çš„ Mapper.xml
æ–‡ä»¶</h3>
<h3 id="ç¼–å†™serviceå±‚çš„æ¥å£å’Œå®ç°ç±»">6ã€ç¼–å†™Serviceå±‚çš„æ¥å£å’Œå®ç°ç±»</h3>
<p>æ¥å£ï¼š</p>
<p>å®ç°ç±»ï¼š</p>
<h2 id="springå±‚">Springå±‚</h2>
<h3
id="springæ•´åˆmybatisè¿™é‡Œä½¿ç”¨dbcpè¿æ¥æ± ">1ã€Springæ•´åˆMyBatisï¼Œè¿™é‡Œä½¿ç”¨dbcpè¿æ¥æ± </h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®æ•´åˆmybatis --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1.å…³è”æ•°æ®åº“æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:dp.properties&quot;</span> <span class="attr">ignore-unresolvable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2.æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line"><span class="comment">    dbcp åŠè‡ªåŠ¨åŒ–æ“ä½œ ä¸èƒ½è‡ªåŠ¨è¿æ¥</span></span><br><span class="line"><span class="comment">    c3p0 è‡ªåŠ¨åŒ–æ“ä½œï¼ˆè‡ªåŠ¨çš„åŠ è½½é…ç½®æ–‡ä»¶ å¹¶ä¸”è®¾ç½®åˆ°å¯¹è±¡é‡Œé¢ï¼‰</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span><span class="comment">&lt;!--destroy-method=&quot;close&quot;,åœ¨é”€æ¯dataSource beanæ—¶ï¼Œå…³é—­æ‰€æœ‰é“¾æ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.maxIdle&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.maxActive&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.initialSize&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 3.é…ç½®SqlSessionFactoryå¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 4.é…ç½®æ‰«æDaoæ¥å£åŒ…ï¼ŒåŠ¨æ€å®ç°Daoæ¥å£æ³¨å…¥åˆ°springå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è§£é‡Š ï¼šhttps://www.cnblogs.com/jpfss/p/7799806.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨å…¥sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»™å‡ºéœ€è¦æ‰«æDaoæ¥å£åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®log4jæ—¥å¿—ï¼ˆå¯é€‰ï¼‰</p>
<p>log4j.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">log4j.rootLogger</span> = <span class="string">error,stdout</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.logger.com.test</span>=<span class="string">debug</span></span><br><span class="line"><span class="attr">log4j.appender.stdout</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span> = <span class="string">[%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®æ—¥å¿—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:log4j.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="springæ•´åˆserviceå±‚">2ã€Springæ•´åˆserviceå±‚</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  å¼€å¯äº‹åŠ¡æ³¨è§£ï¼Œæ³¨å†Œäº‹åŠ¡ç®¡ç†å™¨é©±åŠ¨  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼€å¯æ‰«æ--&gt;</span><span class="comment">&lt;!--å°†Springçš„ç›¸å…³æ³¨è§£çš„ç±»æ³¨å†Œä¸ºSpringçš„bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;Dao,POJO,Service&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="springmvcå±‚">SpringMVCå±‚</h2>
<h3 id="web.xml">1ã€web.xml</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>View/login.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- contextConfigLocationå‚æ•°ç”¨æ¥æŒ‡å®šSpringçš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®springæ ¸å¿ƒç›‘å¬å™¨ï¼Œé»˜è®¤ä¼šä»¥ /WEB-INF/applicationContext.xmlä½œä¸ºé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--DispatcherServlet--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--ä¸€å®šè¦æ³¨æ„:æˆ‘ä»¬è¿™é‡ŒåŠ è½½çš„æ˜¯æ€»çš„é…ç½®æ–‡ä»¶ï¼Œä¹‹å‰è¢«è¿™é‡Œå‘äº†ï¼--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--encodingFilter--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></span><br><span class="line">      org.springframework.web.filter.CharacterEncodingFilter</span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--Sessionè¿‡æœŸæ—¶é—´--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="spring-mvc.xml">2ã€spring-mvc.xml</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">   https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- é…ç½®SpringMVC --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 1.å¼€å¯SpringMVCæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 2.é™æ€èµ„æºé»˜è®¤servleté…ç½®--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 3.é…ç½®jsp æ˜¾ç¤ºViewResolverè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;viewClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.springframework.web.servlet.view.JstlView&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 4.æ‰«æwebç›¸å…³çš„bean --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.kuang.controller&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ‹¦æˆªå™¨</p>
<p>ç»§æ‰¿HandlerInterceptoræ¥å£ï¼Œå®ç°ä¸‰ä¸ªæ–¹æ³•</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 86183</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//æ‹¦æˆªè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‹¦æˆªè¯·æ±‚&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å– session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (obj != <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰ç™»å½•ä¸”ä¸æ˜¯ç™»å½•é¡µé¢ï¼Œè½¬å‘åˆ°ç™»å½•é¡µé¢ï¼Œå¹¶ç»™å‡ºæç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;è¿˜æ²¡ç™»å½•ï¼Œè¯·å…ˆç™»å½•ï¼&quot;</span>);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/View/login.jsp&quot;</span>).forward(request, response);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//æ‹¦æˆªå“åº”</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‹¦æˆªå“åº”&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//æ¸²æŸ“å®Œæ¯•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¸²æŸ“å®Œæ¯•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æŒ‡å®šæ‹¦æˆªè·¯å¾„ï¼ŒåŸºäºanté£æ ¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æŒ‡å®šä¸æ‹¦æˆªè·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/verify&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/toLogin&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/View/login.jsp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;Util.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="applicationcontext.xml">3ã€applicationContext.xml</h3>
<p>å› ä¸ºæˆ‘æ˜¯å°†å‰é¢çš„Springå±‚é…ç½®Mybatiså’ŒServiceæ”¾åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶é‡Œçš„ï¼Œæ‰€ä»¥æ¯”è¾ƒä¹±ï¼Œåˆå­¦å˜›ï¼Œä¸æ˜¯æ€ä¹ˆè§„èŒƒï¼Œå»ºè®®è¿˜æ˜¯å‚è€ƒå¤§ä½¬ä»¬çš„é…ç½®æ–¹æ¡ˆã€‚</p>
<p>è¿™é‡Œå°±ä¸å±•ç¤ºä»£ç äº†ï¼Œå°±æ˜¯å‰é¢çš„ç»„åˆï¼ˆæ¯”è¾ƒä¹±ã€ä¸è§„èŒƒï¼‰ã€‚</p>
<blockquote>
<p>é…ç½®æš‚æ—¶ç»“æŸ</p>
</blockquote>
<p>ç¼–å†™ä»£ç å§ï¼</p>
<blockquote>
<p>Tomcaté…ç½®</p>
</blockquote>
<figure>
<img data-src="https://pic.downk.cc/item/5fd0de2b3ffa7d37b356d3e1.jpg"
alt="Tomcaté…ç½®" />
<figcaption aria-hidden="true">Tomcaté…ç½®</figcaption>
</figure>
<p>è¯´æ˜ï¼š</p>
<p>é€‰é¡¹ On 'Update' action å’Œ On frame deactivation</p>
<p>å‰ä¸€ä¸ªï¼š å¯åŠ¨Tomcatåç‚¹å‡»æ›´æ–°å¯åŠ¨æŒ‰é’®æ—¶ï¼Œé¦–é€‰é¡¹çš„ä½ç½® åä¸€ä¸ªï¼š
å½“é¡¹ç›®IDEAå¤±å»ç„¦ç‚¹æ—¶è¦åšçš„ï¼ˆå¯è®¾ç½®æˆçƒ­éƒ¨ç½²ï¼‰</p>
<p>Update resourseï¼šæ›´æ–°èµ„æº</p>
<p>Update classes and reasourseï¼šæ›´æ–°ç±»å’Œèµ„æº</p>
<p>Redeployï¼šé‡æ–°éƒ¨ç½²</p>
<p>Restart serverï¼šé‡å¯æœåŠ¡</p>
<h1 id="å°ç»“">å°ç»“</h1>
<ul>
<li>è¿™ä¸ªå­¦æœŸå­¦åˆ°çš„ä¸œè¥¿çœŸä¸å°‘ï¼Œæ›¾ç»é‚£ä¹ˆé™Œç”Ÿçš„ä¸œè¥¿ï¼Œç°åœ¨ç”šè‡³æœªæ¥è¿˜è¦ç»§ç»­ç”¨</li>
</ul>
<p>äººç”Ÿå°±æ˜¯è¦å¼€å¼€å¿ƒå¿ƒ</p>
<p>å–œæ¬¢çš„è¯å°±è¦è®¤è®¤çœŸçœŸ</p>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>SSM(æ–°)</title>
    <url>/article/423c4963.html</url>
    <content><![CDATA[<p>ç¬¬ä¸€æ¬¡<a
href="https://wnhyang.github.io/article/254393f0.html">å°è¯•</a>ï¼Œæ˜¯å› ä¸ºæ€¥äºå®ŒæˆæœŸæœ«ä½œä¸šï¼Œèµ¶ç€æ—¶é—´å­¦çš„ï¼Œå‚è€ƒäº†ä¸€äº›æ–‡ç« å’Œè§†é¢‘é…ç½®çš„ï¼Œå¯¹äºå…¶ä¸­çš„é…ç½®åªæ˜¯ç…§çŒ«ç”»è™ï¼Œç†è§£åªæœ‰ä¸€ç‚¹ç‚¹ï¼Œç°åœ¨è¶ç€å¯’å‡ï¼ŒæŠŠæ•´ä¸ªåˆå­¦ä¹ äº†ä¸€ä¸‹ï¼Œè¿™æ¬¡çœŸçš„æœ‰äº†æ¯”ä¸Šæ¬¡æ·±åˆ»å¤šäº†çš„ç†è§£ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1aE41167Tu">ã€ç‹‚ç¥è¯´Javaã€‘SpringMVCæœ€æ–°æ•™ç¨‹IDEAç‰ˆé€šä¿—æ˜“æ‡‚</a></p>
<span id="more"></span>
<h1 id="ssmæ•´åˆ">SSMæ•´åˆ</h1>
<h2 id="æ•°æ®åº“åˆ›å»º">æ•°æ®åº“åˆ›å»º</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE ssmbuild;</span><br><span class="line">USE ssmbuild;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `books`(</span><br><span class="line">`bookID` <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¹¦id&#x27;</span>,</span><br><span class="line">`bookName` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¹¦å&#x27;</span>,</span><br><span class="line">`bookCounts` <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ•°é‡&#x27;</span>,</span><br><span class="line">`detail` <span class="type">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æè¿°&#x27;</span>,</span><br><span class="line">KEY `bookID`(`bookID`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `books`(`bookID`,`bookName`,`bookCounts`,`detail`)<span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;ä»å…¥é—¨åˆ°æ”¾å¼ƒ&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;ä»åˆ åº“åˆ°è·‘è·¯&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;Linux&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;ä»è¿›é—¨åˆ°è¿›ç‰¢&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="åŸºæœ¬ç¯å¢ƒæ­å»º">åŸºæœ¬ç¯å¢ƒæ­å»º</h2>
<p>åˆ›å»ºæ™®é€š mavené¡¹ç›®</p>
<h2 id="å¯¼åŒ…">å¯¼åŒ…</h2>
<h3 id="åŸºç¡€ä¾èµ–"><strong>åŸºç¡€ä¾èµ–</strong></h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Servlet JSP --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="maven-èµ„æºè¿‡æ»¤é—®é¢˜">maven èµ„æºè¿‡æ»¤é—®é¢˜</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- èµ„æºè¿‡æ»¤é—®é¢˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“</h2>
<p>idea æ“ä½œå³å¯</p>
<h2 id="å»ºåŒ…å’Œé…ç½®æ–‡ä»¶">å»ºåŒ…å’Œé…ç½®æ–‡ä»¶</h2>
<ul>
<li>pojo</li>
<li>dao</li>
<li>service</li>
<li>controller</li>
<li>utils</li>
</ul>
<h2 id="mybatis-config.xml">mybatis-config.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="applicationconext.xml">applicationConext.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="db.properties">db.properties</h2>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/ssmbuild?useSSL=true&amp;useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
<h2 id="pojo-å®ä½“ç±»"><strong>pojo å®ä½“ç±»</strong></h2>
<p>Books</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Books</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> bookID;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> bookCounts;</span><br><span class="line">    <span class="keyword">private</span> String detail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨åˆ°äº† lombok</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="dao">dao</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wnh.dao.BookMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="bookmapper-æ¥å£">BookMapper æ¥å£</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">addBook</span><span class="params">(Books books)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteBookById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span>;</span><br><span class="line"></span><br><span class="line">    Books <span class="title function_">queryBookById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Books&gt; <span class="title function_">queryAllBook</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bookmapper.xml">BookMapper.xml</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wnh.dao.BookMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addBook&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        insert into books(bookName, bookCounts, detail)</span><br><span class="line">        values (#&#123;bookName&#125;, #&#123;bookCounts&#125;, #&#123;detail&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBook&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        update books</span><br><span class="line">        set bookName=#&#123;bookName&#125;,</span><br><span class="line">            bookCounts=#&#123;bookCounts&#125;,</span><br><span class="line">            detail=#&#123;detail&#125;</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBookById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete</span><br><span class="line">        from books</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBookById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from books</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllBook&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">        select * from books</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="mybatis-config.xml-1">mybatis-config.xml</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ•°æ®æºï¼Œäº¤ç»™ Spring å»åš --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- åˆ«å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wnh.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åé¢åŠ å…¥åŒ…æ‰«æåä¸€å®šè¦å»æ‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.dao.BookMapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>mybatis-config.xml åªç•™ä¸‹ typeAliases å’Œ setting å³å¯</p>
<h2 id="service">Service</h2>
<h3 id="bookservice-æ¥å£">BookService æ¥å£</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">addBook</span><span class="params">(Books books)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteBookById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span>;</span><br><span class="line"></span><br><span class="line">    Books <span class="title function_">queryBookById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Books&gt; <span class="title function_">queryAllBook</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bookserviceimpl-å®ç°ç±»">BookServiceImpl å®ç°ç±»</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å™¨ï¼šæµ‹è¯•åŠ å…¥ Service æ³¨è§£å æ„é€ å™¨å¯ç›´æ¥æ³¨å…¥ daoæ¥å£ï¼Œè€Œ setæ–¹æ³•ä¸è¡Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookServiceImpl</span><span class="params">(BookMapper bookMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookMapper = bookMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addBook</span><span class="params">(Books books)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.addBook(books);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteBookById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.deleteBookById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.updateBook(books);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Books <span class="title function_">queryBookById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryBookById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Books&gt; <span class="title function_">queryAllBook</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryAllBook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="spring-dao.xml">spring-dao.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 1.å…³è”æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 2.æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line"><span class="comment">        dbcp åŠè‡ªåŠ¨åŒ–æ“ä½œ ä¸èƒ½è‡ªåŠ¨è¿æ¥</span></span><br><span class="line"><span class="comment">        c3p0 è‡ªåŠ¨åŒ–æ“ä½œï¼ˆè‡ªåŠ¨çš„åŠ è½½é…ç½®æ–‡ä»¶ å¹¶ä¸”è®¾ç½®åˆ°å¯¹è±¡é‡Œé¢ï¼‰</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»‘å®š Mybatisé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® dao æ¥å£æ‰«æåŒ…ï¼Œå¯ä»¥åŠ¨æ€çš„å®ç° daoæ¥å£æ³¨å…¥åˆ° Springå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥ sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ‰«æ daoåŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.wnh.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="spring-service.xml">spring-service.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 1.æ‰«æ serviceåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wnh.service&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 2.å°†ä¸šåŠ¡ç±»æ³¨å…¥ Spring è¿™é‡Œçœç•¥å› ä¸ºä½¿ç”¨äº†æ³¨è§£æ–¹å¼</span></span><br><span class="line"><span class="comment">        serviceåŒ…ä¸‹å®ç°ç±»æ³¨è§£ @Service</span></span><br><span class="line"><span class="comment">        è‹¥æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ daoæ¥å£ä¸ç”¨å¤šä½™æ“ä½œ</span></span><br><span class="line"><span class="comment">        è‹¥æ˜¯ setæ–¹æ³•æ³¨å…¥ éœ€è¦å†åŠ ä¸Š @Autowired</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®æº --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¢åŠ -web-æ”¯æŒ">å¢åŠ  Web æ”¯æŒ</h2>
<p>å³é”®é¡¹ç›® -&gt; Add Frameworks Support -&gt; å‹¾é€‰ Web Application
-&gt; OK</p>
<p><img data-src="https://img.imgdb.cn/item/60334aea5f4313ce258c51b9.png" style="zoom:67%;" /></p>
<h2 id="web.xml">web.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® DispatcherServletï¼šè¿™æ˜¯ SpringMVC çš„æ ¸å¿ƒï¼š è¯·æ±‚åˆ†å‘å™¨ï¼Œå‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ³¨æ„ classpath: åº”æŒ‡å‘æ€»çš„ Springé…ç½®ï¼Œä¸ç„¶ä¼šå¯¼è‡´ Controlleræ³¨å…¥ Serviceå¤±è´¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯åŠ¨çº§åˆ« --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- /ï¼šåŒ¹é…æ‰€æœ‰è¯·æ±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¹±ç è¿‡æ»¤ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- session è¿‡æœŸæ—¶é—´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="springmvc.xml">springmvc.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 1.å¼€å¯SpringMVCæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 2.é™æ€èµ„æºè¿‡æ»¤ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/view/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 4.æ‰«æåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wnh.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="éœ€è¦çš„è¯å¯ä»¥åŠ ä¸Š">éœ€è¦çš„è¯å¯ä»¥åŠ ä¸Š</h3>
<p>å¤„ç† JSON é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jacksonMessageConverter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶ä¸Šä¼ é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–‡ä»¶ä¸Šä¼  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼–ç æ ¼å¼ä¸ JSP çš„ PageEncoding å±æ€§ä¸€è‡´ é»˜è®¤ä¸º ISO-8859-1 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSizePerFile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242880&quot;</span>/&gt;</span><span class="comment">&lt;!--5M--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‹¦æˆªå™¨é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ‹¦æˆªå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ä½œç”¨çš„è·¯å¾„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç­‰</p>
<h2 id="æ³¨æ„">æ³¨æ„</h2>
<p>Project Structure -&gt; Project Settings -&gt; Artifacts -&gt;
WEB-INFç›®å½•ä¸‹æ–°å»º libç›®å½•ï¼Œå¯¼å…¥ä¾èµ–</p>
<figure>
<img data-src="https://img.imgdb.cn/item/60334a5e5f4313ce258c0a3f.png"
alt="libä¾èµ–" />
<figcaption aria-hidden="true">libä¾èµ–</figcaption>
</figure>
<h1 id="æµ‹è¯•">æµ‹è¯•</h1>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Sa-Tokenç™»å½•pre</title>
    <url>/article/883fd0a3.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>åŸæœ¬æ ‡é¢˜æ˜¯ï¼šâ€œSa-Tokenç™»å½•è¯¦è§£â€ï¼Œå†™ç€å†™ç€ï¼Œå‘ç°å­—æ•°å…œä¸ä½äº†ï¼Œæ— å¥ˆè¿˜æ˜¯æ‹†å¼€å§ğŸ˜‚</p>
<p>å‰æ–‡è®²äº†<a href="https://www.yuque.com/wnh/share/otvz3nr27xua7s2q"
title="Sa-Tokenç»„ä»¶ä»‹ç»">Sa-Tokenç»„ä»¶ä»‹ç»</a>ï¼ŒåŸºæœ¬ä¸Šé‡è¦çš„<code>satoken</code>ç»„ä»¶éƒ½è¿‡äº†ä¸€éï¼Œæœ€åä¹Ÿç®€å•è¯´æ˜äº†ä¸€ä¸‹ç»„ä»¶æ³¨å†Œç®¡ç†æœºåˆ¶ã€‚æœ¬æ–‡å°±<code>satoken</code>ç™»å½•å‰å¿…é¡»äº†è§£çš„è¿›è¡Œè¯´æ˜ã€‚</p>
<p>ç¯å¢ƒå£°æ˜ï¼š</p>
<p><a href="https://sa-token.cc/">Sa-Tokenå®˜ç½‘</a>ï¼Œç‰ˆæœ¬1.37.0</p>
<p>ä¾èµ–ï¼š</p>
<p><code>sa-token-spring-boot-starter</code></p>
<p><code>sa-token-redisson-jackson</code></p>
<p>ä»¥ä¸Šç¯å¢ƒè¡¨ç¤ºæœ¬æ¬¡ç™»å½•è¯¦è§£é’ˆå¯¹çš„æ˜¯æ™®é€šç™»å½•ï¼ˆé<code>SSO</code>ã€<code>OAuth</code>åœºæ™¯ï¼‰ï¼Œé›†æˆ<code>redisson</code>å­˜å‚¨<code>satoken</code>æ•°æ®ã€‚</p>
<h1 id="ç™»å½•åº”è¯¥å¦‚ä½•è®¾è®¡">ç™»å½•åº”è¯¥å¦‚ä½•è®¾è®¡</h1>
<p>å¦‚æœè®©æˆ‘ä»¬æ¥è®¾è®¡æƒé™è®¤è¯æ¡†æ¶ï¼Œæˆ–æ˜¯è¯´ï¼Œè®©æˆ‘ä»¬å¯¹ä½¿ç”¨è¿‡çš„æƒé™è®¤è¯æ¡†æ¶è¿›è¡ŒæŠ½è±¡ï¼Œä½¿ä¹‹èƒ½é¢å¯¹å¤šç§ä¸åŒçš„ç™»å½•é‰´æƒåœºæ™¯ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ</p>
<p>å·²çŸ¥æˆ‘ç™»å½•é€çš„ç”¨æˆ·idæ˜¯<code>1</code>ï¼Œä¸‹é¢è¿™å¼ å›¾å±•ç¤ºçš„æ˜¯<code>satoken</code>åœ¨ä¸€æ¬¡ç™»å½•æˆåŠŸååœ¨<code>redis</code>ä¸­äº§ç”Ÿçš„<code>k-v</code>æ•°æ®ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240118/1705580359372.webp"
alt="ç™»å½•æˆåŠŸåredisçš„æ•°æ®" />
<figcaption aria-hidden="true">ç™»å½•æˆåŠŸåredisçš„æ•°æ®</figcaption>
</figure>
<span id="more"></span>
<p>å¯¹äº†ï¼Œè¦ç»“åˆä¸€ä¸‹æˆ‘ä¹‹å‰ç»™å‡ºçš„<code>satoken</code>é…ç½®ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">############## Sa-Token é…ç½® (æ–‡æ¡£: https://sa-token.cc) ##############</span></span><br><span class="line"><span class="attr">sa-token:</span></span><br><span class="line">  <span class="comment"># token åç§°ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ cookie åç§°ï¼‰</span></span><br><span class="line">  <span class="attr">token-name:</span> <span class="string">Authorization</span></span><br><span class="line">  <span class="comment"># token æœ‰æ•ˆæœŸï¼ˆå•ä½ï¼šç§’ï¼‰ é»˜è®¤30å¤©ï¼Œ-1 ä»£è¡¨æ°¸ä¹…æœ‰æ•ˆ</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">3600</span></span><br><span class="line">  <span class="comment"># token æœ€ä½æ´»è·ƒé¢‘ç‡ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œå¦‚æœ token è¶…è¿‡æ­¤æ—¶é—´æ²¡æœ‰è®¿é—®ç³»ç»Ÿå°±ä¼šè¢«å†»ç»“ï¼Œé»˜è®¤-1 ä»£è¡¨ä¸é™åˆ¶ï¼Œæ°¸ä¸å†»ç»“</span></span><br><span class="line">  <span class="attr">active-timeout:</span> <span class="number">1800</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦å…è®¸åŒä¸€è´¦å·å¤šåœ°åŒæ—¶ç™»å½• ï¼ˆä¸º true æ—¶å…è®¸ä¸€èµ·ç™»å½•, ä¸º false æ—¶æ–°ç™»å½•æŒ¤æ‰æ—§ç™»å½•ï¼‰</span></span><br><span class="line">  <span class="attr">is-concurrent:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># åœ¨å¤šäººç™»å½•åŒä¸€è´¦å·æ—¶ï¼Œæ˜¯å¦å…±ç”¨ä¸€ä¸ª token ï¼ˆä¸º true æ—¶æ‰€æœ‰ç™»å½•å…±ç”¨ä¸€ä¸ª token, ä¸º false æ—¶æ¯æ¬¡ç™»å½•æ–°å»ºä¸€ä¸ª tokenï¼‰</span></span><br><span class="line">  <span class="attr">is-share:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦å°è¯•ä»headeré‡Œè¯»å–token</span></span><br><span class="line">  <span class="attr">is-read-header:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦å°è¯•ä»cookieé‡Œè¯»å–token</span></span><br><span class="line">  <span class="attr">is-read-cookie:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># tokenå‰ç¼€</span></span><br><span class="line">  <span class="attr">token-prefix:</span> <span class="string">&quot;Bearer&quot;</span></span><br><span class="line">  <span class="comment"># token é£æ ¼ï¼ˆé»˜è®¤å¯å–å€¼ï¼šuuidã€simple-uuidã€random-32ã€random-64ã€random-128ã€tikï¼‰</span></span><br><span class="line">  <span class="attr">token-style:</span> <span class="string">tik</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦è¾“å‡ºæ“ä½œæ—¥å¿—</span></span><br><span class="line">  <span class="attr">is-log:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="stputilä¸stplogic">StpUtilä¸StpLogic</h1>
<p>åœ¨è®²ç™»å½•æµç¨‹å‰ï¼Œä¸€å®šè¦æåˆ°<code>StpUtil</code>å’Œ<code>StpLogic</code>ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://sa-token.cc/doc.html#/api/stp-util">Sa-Token
StpUtil - é‰´æƒå·¥å…·ç±»</a>ï¼ŒStpUtil æ˜¯ Sa-Token
æ•´ä½“åŠŸèƒ½çš„æ ¸å¿ƒï¼Œå¤§å¤šæ•°åŠŸèƒ½å‡ç”±æ­¤å·¥å…·ç±»æä¾›ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706238806811.webp"
alt="StpUtil" />
<figcaption aria-hidden="true">StpUtil</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°<code>StpUtil</code>åªæœ‰ä¸€ä¸ªç§æœ‰æ„é€ å™¨ï¼Œç§æœ‰æ„é€ å™¨å¸¸ç”¨äºå“ªäº›åœºæ™¯å‘¢ï¼Ÿ</p>
<ol type="1">
<li><strong>å•ä¾‹æ¨¡å¼</strong></li>
<li><strong>å·¥å…·ç±»</strong></li>
<li><strong>ä¸å¯å®ä¾‹åŒ–çš„æŠ½è±¡åŸºç±»</strong></li>
<li><strong>æšä¸¾ç±»å‹</strong></li>
<li><strong>å®‰å…¨æ€§è€ƒè™‘</strong></li>
</ol>
<p>ä»<code>StpUtil</code>çš„å‘½åå…¶å®å°±å¯ä»¥ç¡®å®šäº†ï¼Œ<strong>å·¥å…·ç±»</strong>å˜›ï¼å…¶ä¸­è¿™ä¸ª<code>StpLogic</code>æ˜¯Sa-Token
çš„æ ¸å¿ƒï¼Œæ¡†æ¶å¤§å¤šæ•°åŠŸèƒ½å‡ç”±æ­¤ç±»æä¾›å…·ä½“é€»è¾‘å®ç°ã€‚<code>StpLogic</code>æœ‰ä¸‰ä¸ªå­ç±»ç”¨äºé›†æˆ<code>JWT</code>ï¼Œå¯å‚è€ƒå®˜ç½‘<a
href="https://sa-token.cc/doc.html#/plugin/jwt-extend">Sa-Token å’Œ jwt
é›†æˆ</a>ã€‚</p>
<p>åŒºåˆ«ä¸é€‰æ‹©ï¼Œä»¥ä¸‹<code>copy</code>äºå®˜ç½‘<a
href="https://sa-token.cc/doc.html#/micro/dcs-session?id=%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88">Sa-Tokenåˆ†å¸ƒå¼Sessionä¼šè¯è§£å†³æ–¹æ¡ˆ</a>ã€‚</p>
<p><a
href="https://sa-token.cc/doc.html#/micro/dcs-session?id=%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88">è§£å†³æ–¹æ¡ˆ</a></p>
<p>è¦æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç›®å‰çš„ä¸»æµæ–¹æ¡ˆæœ‰å››ç§ï¼š</p>
<ol type="1">
<li><strong>SessionåŒæ­¥</strong>ï¼šåªè¦ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œå°±å¼ºåˆ¶åŒæ­¥åˆ°å…¶å®ƒæ‰€æœ‰èŠ‚ç‚¹</li>
<li><strong>Sessionç²˜æ»</strong>ï¼šé€šè¿‡ä¸€å®šçš„ç®—æ³•ï¼Œä¿è¯ä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚éƒ½ç¨³å®šçš„è½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¹‹ä¸Šï¼Œå¯¹è¿™ä¸ªç”¨æˆ·æ¥è®²ï¼Œå°±å¥½åƒè¿˜æ˜¯åœ¨è®¿é—®ä¸€ä¸ªå•æœºç‰ˆçš„æœåŠ¡</li>
<li><strong>å»ºç«‹ä¼šè¯ä¸­å¿ƒ</strong>ï¼šå°†Sessionå­˜å‚¨åœ¨ä¸“ä¸šçš„ç¼“å­˜ä¸­é—´ä»¶ä¸Šï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹éƒ½å˜æˆäº†æ— çŠ¶æ€æœåŠ¡ï¼Œä¾‹å¦‚ï¼šRedis</li>
<li><strong>é¢å‘æ— çŠ¶æ€token</strong>ï¼šæ”¾å¼ƒSessionæœºåˆ¶ï¼Œå°†ç”¨æˆ·æ•°æ®ç›´æ¥å†™å…¥åˆ°ä»¤ç‰Œæœ¬èº«ä¸Šï¼Œä½¿ä¼šè¯æ•°æ®åšåˆ°ä»¤ç‰Œè‡ªè§£é‡Šï¼Œä¾‹å¦‚ï¼šjwt</li>
</ol>
<p>æœ¬æ–‡ä½¿ç”¨æ–¹å¼3ï¼Œé›†æˆ<code>Redis</code>ï¼Œæ‰€ä»¥<code>jwt</code>ç›¸å…³ä¸å¤šè®²äº†ã€‚</p>
<p>å‰æ–‡ä¹Ÿè®²è¿‡<code>SaManager</code>ç®¡ç†ç€<code>Sa-Token</code>æ‰€æœ‰å…¨å±€ç»„ä»¶ï¼Œå…¶æœ€é‡è¦ä½“ç°å°±åœ¨è¿™ä¸¤ä¸ªç±»ä¸­ï¼Œå¾€ä¸‹çœ‹å°±å¯¹äº†ã€‚</p>
<h1 id="sessionä¼šè¯">Sessionä¼šè¯</h1>
<p>è¿™é‡Œè¡¥å……ä¸€ä¸ªçŸ¥è¯†<a
href="https://sa-token.cc/doc.html#/fun/session-model">Sa-Token ä¸­çš„
Sessionä¼šè¯
æ¨¡å‹è¯¦è§£</a>ï¼Œå»ºè®®æŠŠåŸæ–‡çœ‹ä¸€ä¸‹ï¼Œæ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Œæœ‰æ²¡æœ‰å…¶ä»–è®¾è®¡æ€è·¯ã€‚</p>
<ul>
<li>Account-Session ä»¥è´¦å· id ä¸ºä¸»ï¼Œåªè¦ token æŒ‡å‘çš„è´¦å· id
ä¸€è‡´ï¼Œé‚£ä¹ˆå¯¹åº”çš„Sessionå¯¹è±¡å°±ä¸€è‡´</li>
<li>Token-Session
ä»¥tokenä¸ºä¸»ï¼Œåªè¦tokenä¸åŒï¼Œé‚£ä¹ˆå¯¹åº”çš„Sessionå¯¹è±¡å°±ä¸åŒ</li>
<li>Custom-Session
ä»¥ç‰¹å®šçš„keyä¸ºä¸»ï¼Œä¸åŒkeyå¯¹åº”ä¸åŒçš„Sessionå¯¹è±¡ï¼ŒåŒæ ·çš„keyæŒ‡å‘åŒä¸€ä¸ªSessionå¯¹è±¡</li>
</ul>
<p>åœ¨å†™åé¢å†…å®¹æ—¶å‘ç°è¿™ä¸ªå¿…é¡»è¦å†å¼ºè°ƒä¸€ä¸‹ï¼Œä¸€å®šè¦æŠŠè¿™ä¸ªç†è§£ä¸€ä¸‹ï¼Œå¾ˆé‡è¦ï¼</p>
<h1 id="sasessionä¼šè¯å¯¹è±¡">SaSessionä¼šè¯å¯¹è±¡</h1>
<p>å®˜ç½‘ï¼š<a
href="https://sa-token.cc/doc.html#/api/sa-session?id=sasession-%e4%bc%9a%e8%af%9d%e5%af%b9%e8%b1%a1">SaSession-ä¼šè¯å¯¹è±¡</a></p>
<p>é‚£ä¹ˆ<code>satoken</code>å…·ä½“æ˜¯æ€ä¹ˆåšçš„ï¼Ÿå¦‚ä½•å®ç°ä¸Šé¢çš„<code>Session</code>æ¨¡å‹çš„å‘¢ï¼Ÿå½“ç„¶åé¢è¯¦è§£ç™»å½•ä¼šè®²ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹æœ€é‡è¦çš„ä¸¤ä¸ªç±»<code>SaSession</code>å’Œ<code>TokenSign</code>ã€‚</p>
<h2 id="sasession">SaSession</h2>
<p>ä¼šè¯å¯¹è±¡ï¼Œå±æ€§åˆ—è¡¨å¦‚ä¸‹ï¼Œçœ‹åˆ°<code>tokenSignList</code>å±æ€§å°±åº”è¯¥æ˜ç™½äº†ä¸¤è€…çš„å…³ç³»ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706323782453.webp"
alt="sasessionå±æ€§" />
<figcaption aria-hidden="true">sasessionå±æ€§</figcaption>
</figure>
<h2 id="tokensign">TokenSign</h2>
<p><code>Token</code>ç­¾åï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨çš„<code>token</code>å€¼å°±æ˜¯è¿™é‡Œçš„<code>value</code>å±æ€§ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706325831095.webp"
alt="TokenSign" />
<figcaption aria-hidden="true">TokenSign</figcaption>
</figure>
<h1 id="è‡ªå®šä¹‰ç™»å½•">è‡ªå®šä¹‰ç™»å½•</h1>
<p>è‡ªå®šä¹‰ç™»å½•å¦‚ä¸‹ï¼Œåœ¨ç™»å½•ä¹‹å<code>StpUtil.getTokenSession().set(LOGIN_USER_KEY, loginUser);</code>è¡¨ç¤ºåœ¨å½“å‰<code>tokenSession</code>ä¸­å­˜å‚¨<code>LoginUser</code>ç™»å½•ä¿¡æ¯ï¼Œæ–¹ä¾¿åé¢ç›´æ¥é€šè¿‡ç¼“å­˜è·å–ç”¨æˆ·æƒé™ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(LoginUser loginUser, DeviceTypeEnum deviceEnum)</span> &#123;</span><br><span class="line">    <span class="type">SaLoginModel</span> <span class="variable">model</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaLoginModel</span>();</span><br><span class="line">    <span class="keyword">if</span> (ObjectUtil.isNotNull(deviceEnum)) &#123;</span><br><span class="line">        model.setDevice(deviceEnum.getDevice());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰åˆ†é… ä¸åŒç”¨æˆ·ä½“ç³» ä¸åŒ token æˆæƒæ—¶é—´ ä¸è®¾ç½®é»˜è®¤èµ°å…¨å±€ yml é…ç½®</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚: åå°ç”¨æˆ·30åˆ†é’Ÿè¿‡æœŸ appç”¨æˆ·1å¤©è¿‡æœŸ</span></span><br><span class="line">    <span class="type">UserTypeEnum</span> <span class="variable">userType</span> <span class="operator">=</span> UserTypeEnum.valueOf(loginUser.getType());</span><br><span class="line">    <span class="keyword">if</span> (userType == UserTypeEnum.PC) &#123;</span><br><span class="line">        model.setTimeout(<span class="number">1800</span>).setActiveTimeout(<span class="number">600</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userType == UserTypeEnum.APP) &#123;</span><br><span class="line">        model.setTimeout(<span class="number">86400</span>).setActiveTimeout(<span class="number">1800</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    StpUtil.login(loginUser.getId(), model);</span><br><span class="line">    StpUtil.getTokenSession().set(LOGIN_USER_KEY, loginUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç¼“å­˜æƒé™æ•°æ®">ç¼“å­˜æƒé™æ•°æ®</h1>
<p>å‰æï¼šç³»ç»Ÿçš„æƒé™æ¶æ„æ˜¯RBACæ¨¡å‹ã€‚å»ºè®®æŸ¥çœ‹<a
href="https://sa-token.cc/doc.html#/fun/jur-cache">å‚è€ƒï¼šå°†æƒé™æ•°æ®æ”¾åœ¨ç¼“å­˜é‡Œ</a>ï¼Œä¸çœ‹å®˜ç½‘çœ‹ä¸‹é¢ä¹Ÿè¡ŒğŸ§ã€‚</p>
<h2 id="æ€è·¯ä¸€ç¼“å­˜-ç™»å½•ç”¨æˆ·id-æƒé™é›†åˆ">æ€è·¯ä¸€ï¼šç¼“å­˜
ç™»å½•ç”¨æˆ·id-æƒé™é›†åˆ</h2>
<p>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œç¼“å­˜ç™»å½•ç”¨æˆ·çš„æƒé™é›†åˆã€‚ä¸Šé¢è‡ªå®šä¹‰ç™»å½•çš„<code>LoginUser</code>å°±æ˜¯å®ç°å¦‚ä¸‹çš„<code>Login</code>æ¥å£æ¥ç¼“å­˜ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«è§’è‰²ã€æƒé™ï¼‰çš„ã€‚</p>
<p>è·å–ç™»å½•ç”¨æˆ·æƒé™ç›´æ¥æŸ¥ç¼“å­˜å°±å¥½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024/1/5</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Login</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·ID</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Long <span class="title function_">getId</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·è´¦å·</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·è´¦å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">getUsername</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·ç±»å‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer <span class="title function_">getType</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·è§’è‰²</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·è§’è‰²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Set&lt;String&gt; <span class="title function_">getRoleValues</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·æƒé™</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·æƒé™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Set&lt;String&gt; <span class="title function_">getPermissions</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ€è·¯äºŒç¼“å­˜-ç™»å½•ç”¨æˆ·id-è§’è‰²é›†åˆ-æƒé™é›†åˆ">æ€è·¯äºŒï¼šç¼“å­˜
ç™»å½•ç”¨æˆ·id-è§’è‰²é›†åˆ-æƒé™é›†åˆ</h2>
<p>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œç¼“å­˜ç™»å½•ç”¨æˆ·çš„è§’è‰²é›†åˆã€‚</p>
<p>è·å–ç™»å½•ç”¨æˆ·æƒé™éœ€è¦ï¼š1ã€æŸ¥ç¼“å­˜è·å–ç™»å½•ç”¨æˆ·è§’è‰²ï¼›2ã€é€šè¿‡è§’è‰²ç¼“å­˜è·å–è§’è‰²å¯¹åº”çš„æƒé™é›†åˆã€‚</p>
<p>é‚£ä¹ˆè§’è‰²ç¼“å­˜å¦‚ä½•ç®¡ç†å‘¢ï¼Ÿä»¥ä¸‹ä»…ä¾›å‚è€ƒï¼Œå†™ä»£ç æ—¶å†æ€è€ƒä¸€ä¸‹å¦‚ä½•ä¿è¯ç¼“å­˜ä¸€è‡´æ€§å§ï¼Ÿ</p>
<p><code>set</code>è§’è‰²-æƒé™é›†åˆ</p>
<p>aã€ç™»å½•ä»»ä½•ç”¨æˆ·æ—¶ï¼Œ<code>set</code>è§’è‰²-æƒé™é›†åˆ</p>
<p>bã€é¡¹ç›®å¯åŠ¨ï¼Œ<code>set</code>æ‰€æœ‰è§’è‰²-æƒé™é›†åˆï¼Œå¤šæœåŠ¡æƒ…å†µä¸‹é¿å…å¤šæ¬¡é‡å¤<code>set</code>å°±è¡Œ</p>
<p>cã€å…¶ä»–æ—¶åˆ»ï¼Œå¦‚ç®¡ç†è§’è‰²æ—¶</p>
<p><code>update</code>è§’è‰²-æƒé™é›†åˆ</p>
<p>aã€é€šå¸¸åœ¨ä¿®æ”¹æˆ–åˆ é™¤è§’è‰²å¯¹åº”æƒé™ï¼Œåˆ é™¤ç¼“å­˜/æ›´æ–°ç¼“å­˜</p>
<p>æ€è·¯äºŒåŒæ ·å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ¥å£ï¼Œåªä¸è¿‡ï¼Œ<code>getPermissions</code>ä¸å†æ˜¯ç›´æ¥ä»ç™»å½•ç”¨æˆ·idçš„ç¼“å­˜å–äº†ï¼Œè€Œæ˜¯é€šè¿‡è§’è‰²ç¼“å­˜ä¸­è·å–ã€‚</p>
<h2 id="åŒºåˆ«">åŒºåˆ«</h2>
<ul>
<li>ç”¨æˆ·ï¼šU1ï¼ŒU2ï¼ŒU3ã€‚ã€‚ã€‚</li>
<li>è§’è‰²ï¼šR1ï¼ŒR2ï¼ŒR3ã€‚ã€‚ã€‚</li>
<li>æƒé™ï¼šP1ï¼ŒP2ï¼ŒP3ã€‚ã€‚ã€‚</li>
</ul>
<p>æ€è·¯ä¸€ï¼Œç›´æ¥å–ç”¨æˆ·æƒé™ç¼“å­˜</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç›´æ¥ç®€å•ï¼›</li>
<li>ç¼ºç‚¹ï¼šåœ¨<code>RABC</code>æ¨¡å‹ä¸‹ä¸å­˜åœ¨<code>ç”¨æˆ·-æƒé™</code>ç›´æ¥å…³è”ï¼Œåªå­˜åœ¨<code>ç”¨æˆ·-è§’è‰²-æƒé™</code>å…³è”ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨<code>è§’è‰²-æƒé™</code>å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚1ã€æ›´æ–°æƒé™ä¿è¯æœ€æ–°ï¼Œé‡æ–°æŸ¥è¯¢<code>ç”¨æˆ·-è§’è‰²-æƒé™</code>ï¼Œæ›´æ–°ç¼“å­˜ã€‚ä½†è¿™ä¸ªæœ‰å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜é›ªå´©ï¼Œå› ä¸º<code>è§’è‰²-æƒé™</code>æ›´æ”¹äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰ç™»å½•ç”¨æˆ·ä»¬æ˜¯è¢«æ›´æ”¹çš„è§’è‰²æ—¶ï¼Œéƒ½éœ€è¦æ›´æ–°ç¼“å­˜ï¼Œè¿™æ˜¯æœ‰ä¸€å®šé£é™©çš„ã€‚2ã€æƒé™ä¸å®æ—¶æ›´æ–°ï¼Œåªæœ‰ä¸‹æ¬¡ç™»å½•æƒé™æ‰å˜åŒ–ï¼›</li>
</ul>
<p>æ€è·¯äºŒï¼Œé€šè¿‡è§’è‰²é—´æ¥å–æƒé™ç¼“å­˜</p>
<ul>
<li>ä¼˜ç‚¹ï¼šä¸åŒäºæ€è·¯ä¸€ï¼Œåœ¨<code>è§’è‰²-æƒé™</code>å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œåªéœ€è¦æ›´æ–°<code>è§’è‰²-æƒé™</code>ç¼“å­˜å°±è¡Œã€‚</li>
<li>ç¼ºç‚¹ï¼šæŸ¥æƒé™ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œç»´æŠ¤<code>ç”¨æˆ·-è§’è‰²</code>ã€<code>è§’è‰²-æƒé™</code>ç¼“å­˜éœ€è¦ä¸€å®šè®¾è®¡ã€‚</li>
</ul>
<p>å‰©ä¸‹çš„ç•™ç»™ä¸‹ç¯‡æ–‡ç« å§ï¼</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>é¡¹ç›®</tag>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>Sa-Tokenä»‹ç»ä¸SpringBootç¯å¢ƒä¸‹ä½¿ç”¨</title>
    <url>/article/bf2c89b7.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>å®˜ç½‘ï¼š<a href="https://sa-token.cc/doc.html#/">Sa-Token</a></p>
<p>ä¸€ä¸ªè½»é‡çº§ Java æƒé™è®¤è¯æ¡†æ¶ï¼Œè®©é‰´æƒå˜å¾—ç®€å•ã€ä¼˜é›…ï¼</p>
<h1 id="ä»‹ç»">ä»‹ç»</h1>
<p><strong>Sa-Token</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§ Java
æƒé™è®¤è¯æ¡†æ¶ï¼Œä¸»è¦è§£å†³ï¼š<strong>ç™»å½•è®¤è¯</strong>ã€<strong>æƒé™è®¤è¯</strong>ã€<strong>å•ç‚¹ç™»å½•</strong>ã€<strong>OAuth2.0</strong>ã€<strong>åˆ†å¸ƒå¼Sessionä¼šè¯</strong>ã€<strong>å¾®æœåŠ¡ç½‘å…³é‰´æƒ</strong>
ç­‰ä¸€ç³»åˆ—æƒé™ç›¸å…³é—®é¢˜ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£å†™çš„å·²ç»éå¸¸å¥½äº†ã€‚å¼•ç”¨å®˜æ–¹æ–‡æ¡£å¼€å¤´çš„ä¸€æ®µè¯ï¼š</p>
<p>æœ¬æ–‡æ¡£å°†ä¼šå°½åŠ›è®²è§£æ¯ä¸ªåŠŸèƒ½çš„è®¾è®¡åŸå› ã€åº”ç”¨åœºæ™¯ï¼Œç”¨å¿ƒé˜…è¯»æ–‡æ¡£ï¼Œä½ å­¦ä¹ åˆ°çš„å°†ä¸æ­¢æ˜¯
Sa-Token æ¡†æ¶æœ¬èº«ï¼Œæ›´æ˜¯ç»å¤§å¤šæ•°åœºæ™¯ä¸‹æƒé™è®¾è®¡çš„æœ€ä½³å®è·µã€‚</p>
<p>ç¡®å®ï¼Œé€šè¿‡é˜…è¯»å®˜æ–¹æ–‡æ¡£æœ‰å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œæ”¶è·æ›´å¤§çš„æ˜¯ç»“åˆæˆ‘çš„ä½¿ç”¨ä½“éªŒï¼Œä¸‹è½½å¹¶é˜…è¯»æºç åæœ‰å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿æƒ³å’Œå¤§å®¶åˆ†äº«ï¼è¿™ç¯‡æ–‡ç« åªæ˜¯å¼€å¤´ã€‚</p>
<span id="more"></span>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<h2 id="å‡†å¤‡å·¥ä½œ">1ã€å‡†å¤‡å·¥ä½œ</h2>
<p>ç¯å¢ƒï¼š</p>
<p>Spring Boot2.7.3</p>
<p>Sa-Token1.37.0</p>
<h2 id="é…ç½®æ–‡ä»¶">2ã€é…ç½®æ–‡ä»¶</h2>
<p>å…³äºsa-tokençš„é…ç½®æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">############## Sa-Token é…ç½® (æ–‡æ¡£: https://sa-token.cc) ##############</span></span><br><span class="line"><span class="attr">sa-token:</span></span><br><span class="line">  <span class="comment"># token åç§°ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ cookie åç§°ï¼‰</span></span><br><span class="line">  <span class="attr">token-name:</span> <span class="string">Authorization</span></span><br><span class="line">  <span class="comment"># token æœ‰æ•ˆæœŸï¼ˆå•ä½ï¼šç§’ï¼‰ é»˜è®¤30å¤©ï¼Œ-1 ä»£è¡¨æ°¸ä¹…æœ‰æ•ˆ</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">3600</span></span><br><span class="line">  <span class="comment"># token æœ€ä½æ´»è·ƒé¢‘ç‡ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œå¦‚æœ token è¶…è¿‡æ­¤æ—¶é—´æ²¡æœ‰è®¿é—®ç³»ç»Ÿå°±ä¼šè¢«å†»ç»“ï¼Œé»˜è®¤-1 ä»£è¡¨ä¸é™åˆ¶ï¼Œæ°¸ä¸å†»ç»“</span></span><br><span class="line">  <span class="attr">active-timeout:</span> <span class="number">1800</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦å…è®¸åŒä¸€è´¦å·å¤šåœ°åŒæ—¶ç™»å½• ï¼ˆä¸º true æ—¶å…è®¸ä¸€èµ·ç™»å½•, ä¸º false æ—¶æ–°ç™»å½•æŒ¤æ‰æ—§ç™»å½•ï¼‰</span></span><br><span class="line">  <span class="attr">is-concurrent:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># åœ¨å¤šäººç™»å½•åŒä¸€è´¦å·æ—¶ï¼Œæ˜¯å¦å…±ç”¨ä¸€ä¸ª token ï¼ˆä¸º true æ—¶æ‰€æœ‰ç™»å½•å…±ç”¨ä¸€ä¸ª token, ä¸º false æ—¶æ¯æ¬¡ç™»å½•æ–°å»ºä¸€ä¸ª tokenï¼‰</span></span><br><span class="line">  <span class="attr">is-share:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦å°è¯•ä»headeré‡Œè¯»å–token</span></span><br><span class="line">  <span class="attr">is-read-header:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦å°è¯•ä»cookieé‡Œè¯»å–token</span></span><br><span class="line">  <span class="attr">is-read-cookie:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># tokenå‰ç¼€</span></span><br><span class="line">  <span class="attr">token-prefix:</span> <span class="string">&quot;Bearer&quot;</span></span><br><span class="line">  <span class="comment"># token é£æ ¼ï¼ˆé»˜è®¤å¯å–å€¼ï¼šuuidã€simple-uuidã€random-32ã€random-64ã€random-128ã€tikï¼‰</span></span><br><span class="line">  <span class="attr">token-style:</span> <span class="string">tik</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦è¾“å‡ºæ“ä½œæ—¥å¿—</span></span><br><span class="line">  <span class="attr">is-log:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰æƒé™è®¤è¯">3ã€è‡ªå®šä¹‰æƒé™è®¤è¯</h2>
<p>å®˜æ–¹æ–‡æ¡£ï¼šå› ä¸ºæ¯ä¸ªé¡¹ç›®çš„éœ€æ±‚ä¸åŒï¼Œå…¶æƒé™è®¾è®¡ä¹Ÿåƒå˜ä¸‡åŒ–ï¼Œå› æ­¤ [
è·å–å½“å‰è´¦å·æƒé™ç é›†åˆ ] è¿™ä¸€æ“ä½œä¸å¯èƒ½å†…ç½®åˆ°æ¡†æ¶ä¸­ï¼Œ æ‰€ä»¥ Sa-Token
å°†æ­¤æ“ä½œä»¥æ¥å£çš„æ–¹å¼æš´éœ²ç»™ä½ ï¼Œä»¥æ–¹ä¾¿ä½ æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œé‡å†™ã€‚</p>
<p>æ‰€ä»¥æ ¹æ®è‡ªå·±çš„ä¸åŒä¸šåŠ¡è®¾è®¡éœ€è¦çš„æƒé™è®¤è¯æ–¹æ³•å°±å¥½ã€‚ä¸‹é¢æ˜¯æˆ‘é¡¹ç›®ä¸­çš„å†™æ³•ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StpInterfaceImpl</span> <span class="keyword">implements</span> <span class="title class_">StpInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç™»å½•æœåŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> LoginService loginService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æŒ‡å®šè´¦å·idæ‰€æ‹¥æœ‰çš„æƒé™ç é›†åˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginId   è´¦å·id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginType è´¦å·ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¯¥è´¦å·idå…·æœ‰çš„æƒé™ç é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getPermissionList</span><span class="params">(Object loginId, String loginType)</span> &#123;</span><br><span class="line">        <span class="type">Login</span> <span class="variable">loginUser</span> <span class="operator">=</span> loginService.getLoginUser();</span><br><span class="line">        <span class="type">UserTypeEnum</span> <span class="variable">userType</span> <span class="operator">=</span> UserTypeEnum.valueOf(loginUser.getType());</span><br><span class="line">        <span class="keyword">if</span> (userType == UserTypeEnum.PC) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(loginUser.getPermissions());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æŒ‡å®šè´¦å·idæ‰€æ‹¥æœ‰çš„è§’è‰²æ ‡è¯†é›†åˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginId   è´¦å·id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginType è´¦å·ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¯¥è´¦å·idå…·æœ‰çš„è§’è‰²æ ‡è¯†é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getRoleList</span><span class="params">(Object loginId, String loginType)</span> &#123;</span><br><span class="line">        <span class="type">Login</span> <span class="variable">loginUser</span> <span class="operator">=</span> loginService.getLoginUser();</span><br><span class="line">        <span class="type">UserTypeEnum</span> <span class="variable">userType</span> <span class="operator">=</span> UserTypeEnum.valueOf(loginUser.getType());</span><br><span class="line">        <span class="keyword">if</span> (userType == UserTypeEnum.PC) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(loginUser.getRoleValues());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ç€æ³¨å†ŒStpInterfaceImpl</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaTokenConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> LoginService <span class="title function_">loginService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LoginServiceImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> StpInterface <span class="title function_">stpInterface</span><span class="params">(LoginService loginService)</span> &#123;</span><br><span class="line">        <span class="type">StpInterfaceImpl</span> <span class="variable">stpInterface</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StpInterfaceImpl</span>();</span><br><span class="line">        stpInterface.setLoginService(loginService);</span><br><span class="line">        <span class="keyword">return</span> stpInterface;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="controller">4ã€Controller</h2>
<h3 id="å·¥å…·ç±»é‰´æƒ">4.1ã€å·¥å…·ç±»é‰´æƒ</h3>
<p>satokenæä¾›äº†StpUtillé‰´æƒå·¥å…·ç±»ï¼Œå…¶ä¸­åŒ…å«éå¸¸å¤šçš„é™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼š<a
href="https://sa-token.cc/doc.html#/api/stp-util">Sa-Token</a>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¼šè¯ç™»å½•ï¼Œå‚æ•°å¡«ç™»å½•äººçš„è´¦å·id </span></span><br><span class="line">StpUtil.login(<span class="number">10001</span>);</span><br><span class="line"><span class="comment">// æ ¡éªŒå½“å‰å®¢æˆ·ç«¯æ˜¯å¦å·²ç»ç™»å½•ï¼Œå¦‚æœæœªç™»å½•åˆ™æŠ›å‡º `NotLoginException` å¼‚å¸¸</span></span><br><span class="line">StpUtil.checkLogin();</span><br><span class="line"><span class="comment">// å°†è´¦å·idä¸º 10077 çš„ä¼šè¯è¸¢ä¸‹çº¿ </span></span><br><span class="line">StpUtil.kickout(<span class="number">10077</span>);</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨è§£é‰´æƒ">4.2ã€æ³¨è§£é‰´æƒ</h3>
<p>å°½ç®¡StpUtillé‰´æƒå·¥å…·ç±»å·²ç»éå¸¸æ–¹ä¾¿ä½†è¿˜æ˜¯æœ‰åŒå­¦é’Ÿçˆ±æ³¨è§£é‰´æƒï¼Œsatokenä¹Ÿæ˜¯æä¾›äº†è¿™ç§æ–¹å¼çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨è§£é‰´æƒï¼šåªæœ‰å…·å¤‡ `user:add` æƒé™çš„ä¼šè¯æ‰å¯ä»¥è¿›å…¥æ–¹æ³•</span></span><br><span class="line"><span class="meta">@SaCheckPermission(&quot;user:add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">insert</span><span class="params">(SysUser user)</span> &#123;</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ç”¨æˆ·å¢åŠ &quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£é‰´æƒé»˜è®¤æ˜¯å…³é—­çš„ï¼Œè¦ä½¿ç”¨çš„è¯éœ€è¦å°†satokenå…¨å±€æ‹¦æˆªå™¨æ³¨å…¥åˆ°é¡¹ç›®ä¸­ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œsa-tokençš„æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// æ³¨å†Œè·¯ç”±æ‹¦æˆªå™¨ï¼Œè‡ªå®šä¹‰éªŒè¯è§„åˆ™</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">SaInterceptor</span>()).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šå°±æ³¨å†Œäº†satokençš„å…¨å±€æ‹¦æˆªå™¨ï¼Œå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨æ³¨è§£æƒé™äº†ã€‚å®˜æ–¹æ–‡æ¡£ï¼š<a
href="https://sa-token.cc/doc.html#/use/at-check">Sa-Token</a>ã€‚</p>
<p>æ³¨æ„ï¼šè¿™é‡Œé…ç½®çš„æ˜¯<code>â€œ/**â€</code>ï¼Œä¹Ÿå°±æ˜¯å…¨è·¯å¾„ï¼Œæ‰€æœ‰åé¢è¦åœ¨ä¸éœ€è¦é‰´æƒçš„æ¥å£ä¸ŠåŠ ä¸Š<code>@SaIgnore</code>ç”¨äºå¿½ç•¥é‰´æƒã€‚</p>
<p>å¦‚ä¸‹é…ç½®äº†<code>/auth</code>å¼€å¤´çš„æ¥å£ä¸ç”¨é‰´æƒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/auth&quot;)</span></span><br><span class="line"><span class="meta">@SaIgnore</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AuthService authService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç™»å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> reqVO ç™»å½•è¯·æ±‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;LoginRespVO&gt; <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> LoginReqVO reqVO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(authService.login(reqVO));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„éœ€è¦é‰´æƒçš„ç¤ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/system/role&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoleController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RoleService roleService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºè§’è‰²</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> reqVO è§’è‰²ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/create&quot;)</span></span><br><span class="line">    <span class="meta">@SaCheckPermission(&quot;system:role:create&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;Long&gt; <span class="title function_">createRole</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> RoleCreateReqVO reqVO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(roleService.createRole(reqVO));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°è§’è‰²</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> reqVO è§’è‰²ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="meta">@SaCheckPermission(&quot;system:role:update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;Boolean&gt; <span class="title function_">updateRole</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> RoleUpdateReqVO reqVO)</span> &#123;</span><br><span class="line">        roleService.updateRole(reqVO);</span><br><span class="line">        <span class="keyword">return</span> success(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…¨å±€å¼‚å¸¸">5ã€å…¨å±€å¼‚å¸¸</h2>
<p>é€šè¿‡å®šä¹‰å…¨å±€å¼‚å¸¸æ‹¦æˆªå™¨å¯ä»¥è¿”å›å‰ç«¯ç»Ÿä¸€çš„æ ¼å¼ï¼Œä»¥ä¸‹ä»…ä¾›å‚è€ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æƒé™ç å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(NotPermissionException.class)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;Void&gt; <span class="title function_">handleNotPermissionException</span><span class="params">(NotPermissionException e, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.error(<span class="string">&quot;è¯·æ±‚åœ°å€&#x27;&#123;&#125;&#x27;,æƒé™ç æ ¡éªŒå¤±è´¥&#x27;&#123;&#125;&#x27;&quot;</span>, requestUri, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> CommonResult.error(FORBIDDEN);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§’è‰²æƒé™å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(NotRoleException.class)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;Void&gt; <span class="title function_">handleNotRoleException</span><span class="params">(NotRoleException e, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.error(<span class="string">&quot;è¯·æ±‚åœ°å€&#x27;&#123;&#125;&#x27;,è§’è‰²æƒé™æ ¡éªŒå¤±è´¥&#x27;&#123;&#125;&#x27;&quot;</span>, requestUri, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> CommonResult.error(FORBIDDEN);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¤è¯å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(NotLoginException.class)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;Void&gt; <span class="title function_">handleNotLoginException</span><span class="params">(NotLoginException e, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.error(<span class="string">&quot;è¯·æ±‚åœ°å€&#x27;&#123;&#125;&#x27;,è®¤è¯å¤±è´¥&#x27;&#123;&#125;&#x27;,æ— æ³•è®¿é—®ç³»ç»Ÿèµ„æº&quot;</span>, requestUri, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> CommonResult.error(UNAUTHORIZED);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ— æ•ˆè®¤è¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(SameTokenInvalidException.class)</span></span><br><span class="line">    <span class="keyword">public</span> CommonResult&lt;Void&gt; <span class="title function_">handleSameTokenInvalidException</span><span class="params">(SameTokenInvalidException e, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.error(<span class="string">&quot;è¯·æ±‚åœ°å€&#x27;&#123;&#125;&#x27;,å†…ç½‘è®¤è¯å¤±è´¥&#x27;&#123;&#125;&#x27;,æ— æ³•è®¿é—®ç³»ç»Ÿèµ„æº&quot;</span>, requestUri, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> CommonResult.error(UNAUTHORIZED);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è·¨åŸŸå¯é€‰">6ã€è·¨åŸŸï¼ˆå¯é€‰ï¼‰</h2>
<p>å®˜ç½‘ä¹Ÿæœ‰æä¾›è§£å†³æ–¹æ³•<a
href="https://sa-token.cc/doc.html#/fun/cors-filter">Sa-Token</a>ï¼Œæˆ‘éå¸¸å»ºè®®ä½ çœ‹å®Œè¿™ç¯‡æ–‡ç« åå†å†³å®šä½¿ç”¨ä»€ä¹ˆæ–¹å¼<a
href="https://sa-token.cc/doc.html#/up/global-filter">Sa-Token</a>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240118/1705585033448.webp"
alt="ç»„å»ºç®€è¿°" />
<figcaption aria-hidden="true">ç»„å»ºç®€è¿°</figcaption>
</figure>
<p>çœ‹ä¸ªäººé€‰æ‹©å§ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯satokenæ‹¦æˆªå™¨+æ™®é€šcorsFilterçš„æ–¹å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OkayWebAutoConfiguration</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·¨åŸŸé…ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        config.setAllowCredentials(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è®¿é—®æºåœ°å€</span></span><br><span class="line">        config.addAllowedOriginPattern(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è®¿é—®æºè¯·æ±‚å¤´</span></span><br><span class="line">        config.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è®¿é—®æºè¯·æ±‚æ–¹æ³•</span></span><br><span class="line">        config.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">// æœ‰æ•ˆæœŸ 1800ç§’</span></span><br><span class="line">        config.setMaxAge(<span class="number">1800L</span>);</span><br><span class="line">        <span class="comment">// æ·»åŠ æ˜ å°„è·¯å¾„ï¼Œæ‹¦æˆªä¸€åˆ‡è¯·æ±‚</span></span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, config);</span><br><span class="line">        <span class="comment">// è¿”å›æ–°çš„CorsFilter</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨ç±»">7ã€å¯åŠ¨ç±»</h2>
<p>å¯åŠ¨ç±»ç¡®ä¿ä»¥ä¸Šéœ€è¦çš„ç»„ä»¶è¢«æ‰«ææ³¨å†Œå°±å¥½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(AdminApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨æµ‹è¯•">8ã€å¯åŠ¨æµ‹è¯•</h2>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†redisï¼Œå¯ä»¥å…ˆå¿½ç•¥ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240118/1705585190334.webp"
alt="æ­£å¸¸å¯åŠ¨" />
<figcaption aria-hidden="true">æ­£å¸¸å¯åŠ¨</figcaption>
</figure>
<p>å› ä¸ºæˆ‘çš„å‰ç«¯æ˜¯ä¸€æ•´ä¸ªé¡¹ç›®ï¼Œä¸å¥½æ‹†å‡ºæ¥è´´ä»£ç ï¼Œæ‰€ä»¥ç›´æ¥å±•ç¤ºç™»å½•ç»“æœäº†ï¼</p>
<p>å°è¯•ç™»å½•</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240118/1705585513432.webp"
alt="æˆåŠŸç™»å½•" />
<figcaption aria-hidden="true">æˆåŠŸç™»å½•</figcaption>
</figure>
<p>å‘èµ·ä¸€ä¸ªåˆ›å»ºè¯·æ±‚ï¼Œå› ä¸ºå‰ç«¯é¡¹ç›®å·²ç»é…ç½®äº†å‘è¯·æ±‚çš„headerï¼Œæ‰€ä»¥è¯·æ±‚å°±ä¼šå¸¦ä¸Šå‰é¢çš„tokenäº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240118/1705585192409.webp"
alt="è¯·æ±‚" />
<figcaption aria-hidden="true">è¯·æ±‚</figcaption>
</figure>
<p>ç„¶åsatokenæ‹¦æˆªå™¨å‘æŒ¥ä½œç”¨è¿›è¡Œé‰´æƒï¼Œå…³äºæ‹¦æˆªå™¨å¦‚ä½•é‰´æƒçš„ï¼Œæˆ‘ä¹‹åè¿˜ä¼šå†è®²çš„ã€‚è¿™æ¬¡å…ˆåˆ°è¿™å§ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>é¡¹ç›®</tag>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>Shiroå­¦ä¹ </title>
    <url>/article/c0a48af9.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>Bç«™ï¼š<a
href="https://www.bilibili.com/video/BV16C4y187S9">https://www.bilibili.com/video/BV16C4y187S9</a></p>
<p>å®˜ç½‘ï¼šhttps://shiro.apache.org/</p>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æ˜¯ä¸€æ¬¾ä¸»æµçš„ Java å®‰å…¨æ¡†æ¶ï¼Œä¸ä¾èµ–ä»»ä½•å®¹å™¨ï¼Œå¯ä»¥è¿è¡Œåœ¨ Java SE å’Œ
Java EE
é¡¹ç›®ä¸­ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å¯¹è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯ã€æˆæƒã€ä¼šè¯ç®¡ç†ã€åŠ å¯†ç­‰æ“ä½œã€‚</p>
<p>Shiro å°±æ˜¯ç”¨æ¥è§£å†³å®‰å…¨ç®¡ç†çš„ç³»ç»ŸåŒ–æ¡†æ¶ã€‚</p>
<span id="more"></span>
<h1 id="shiro-æ ¸å¿ƒç»„ä»¶">Shiro æ ¸å¿ƒç»„ä»¶</h1>
<p>ç”¨æˆ·ã€è§’è‰²ã€æƒé™</p>
<p>ä¼šç»™è§’è‰²èµ‹äºˆæƒé™ï¼Œç»™ç”¨æˆ·èµ‹äºˆè§’è‰²</p>
<p>1ã€UsernamePasswordTokenï¼ŒShiro
ç”¨æ¥å°è£…ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œä½¿ç”¨ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯æ¥åˆ›å»ºä»¤ç‰Œ Tokenã€‚</p>
<p>2ã€SecurityManagerï¼ŒShiro çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£å®‰å…¨è®¤è¯å’Œæˆæƒã€‚</p>
<p>3ã€Sujectï¼ŒShiro çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼ŒåŒ…å«äº†ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<p>4ã€Realmï¼Œå¼€å‘è€…è‡ªå®šä¹‰çš„æ¨¡å—ï¼Œæ ¹æ®é¡¹ç›®çš„éœ€æ±‚ï¼ŒéªŒè¯å’Œæˆæƒçš„é€»è¾‘å…¨éƒ¨å†™åœ¨
Realm ä¸­ã€‚</p>
<p>5ã€AuthenticationInfoï¼Œç”¨æˆ·çš„è§’è‰²ä¿¡æ¯é›†åˆï¼Œè®¤è¯æ—¶ä½¿ç”¨ã€‚</p>
<p>6ã€AuthorzationInfoï¼Œè§’è‰²çš„æƒé™ä¿¡æ¯é›†åˆï¼Œæˆæƒæ—¶ä½¿ç”¨ã€‚</p>
<p>7ã€DefaultWebSecurityManagerï¼Œå®‰å…¨ç®¡ç†å™¨ï¼Œå¼€å‘è€…è‡ªå®šä¹‰çš„ Realm
éœ€è¦æ³¨å…¥åˆ° DefaultWebSecurityManager è¿›è¡Œç®¡ç†æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<p>8ã€ShiroFilterFactoryBeanï¼Œè¿‡æ»¤å™¨å·¥å‚ï¼ŒShiro
çš„åŸºæœ¬è¿è¡Œæœºåˆ¶æ˜¯å¼€å‘è€…å®šåˆ¶è§„åˆ™ï¼ŒShiro å»æ‰§è¡Œï¼Œå…·ä½“çš„æ‰§è¡Œæ“ä½œå°±æ˜¯ç”±
ShiroFilterFactoryBean åˆ›å»ºçš„ä¸€ä¸ªä¸ª Filter å¯¹è±¡æ¥å®Œæˆã€‚</p>
<h1 id="spring-boot-æ•´åˆ-shiro">Spring Boot æ•´åˆ Shiro</h1>
<h2 id="pom.xml">pom.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®åº“å‡†å¤‡">æ•°æ®åº“å‡†å¤‡</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `account` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `perms` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `role` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">4</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<p>ä¸ºæ–¹ä¾¿åªæœ‰ä¸€å¼ è¡¨ï¼Œæ­£å¸¸åº”æœ‰ç”¨æˆ·è¡¨ã€æƒé™è¡¨ã€è§’è‰²è¡¨ã€‚ã€‚</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>username</th>
<th>password</th>
<th>perms</th>
<th>role</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>zs</td>
<td>123</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>ls</td>
<td>123</td>
<td>manage</td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>ww</td>
<td>123</td>
<td>manage</td>
<td>administrator</td>
</tr>
</tbody>
</table>
<h2 id="application.yml">application.yml</h2>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/shiro</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>
<h2 id="entity">entity</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String perms;</span><br><span class="line">    <span class="keyword">private</span> String role;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="mapper">mapper</h2>
<p>ä½¿ç”¨äº†Mybatis-plus</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Account&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="service">Service</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AccountMapper accountMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="type">QueryWrapper</span> <span class="variable">wrapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">        <span class="keyword">return</span> accountMapper.selectOne(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å…ˆtestæµ‹è¯•ä¸€ä¸‹</p>
<p>ç¼–å†™è®¤è¯å’Œæˆæƒè§„åˆ™ï¼š</p>
<blockquote>
<p>è®¤è¯è¿‡æ»¤å™¨</p>
</blockquote>
<p>anonï¼šæ— éœ€è®¤è¯ã€‚</p>
<p>authcï¼šå¿…é¡»è®¤è¯ã€‚</p>
<p>authcBasicï¼šéœ€è¦é€šè¿‡ HTTPBasic è®¤è¯ã€‚</p>
<p>userï¼šä¸ä¸€å®šé€šè¿‡è®¤è¯ï¼Œåªè¦æ›¾ç»è¢« Shiro è®°å½•å³å¯ï¼Œæ¯”å¦‚ï¼šè®°ä½æˆ‘ã€‚</p>
<blockquote>
<p>æˆæƒè¿‡æ»¤å™¨</p>
</blockquote>
<p>permsï¼šå¿…é¡»æ‹¥æœ‰æŸä¸ªæƒé™æ‰èƒ½è®¿é—®ã€‚</p>
<p>roleï¼šå¿…é¡»æ‹¥æœ‰æŸä¸ªè§’è‰²æ‰èƒ½è®¿é—®ã€‚</p>
<p>portï¼šè¯·æ±‚çš„ç«¯å£å¿…é¡»æ˜¯æŒ‡å®šå€¼æ‰å¯ä»¥ã€‚</p>
<p>restï¼šè¯·æ±‚å¿…é¡»åŸºäº RESTfulï¼ŒPOSTã€PUTã€GETã€DELETEã€‚</p>
<p>sslï¼šå¿…é¡»æ˜¯å®‰å…¨çš„ URL è¯·æ±‚ï¼Œåè®® HTTPSã€‚</p>
<p>åˆ›å»º 3 ä¸ªé¡µé¢ï¼Œmain.htmlã€manage.htmlã€administrator.html</p>
<p>è®¿é—®æƒé™å¦‚ä¸‹ï¼š</p>
<p>1ã€å¿…é¡»ç™»å½•æ‰èƒ½è®¿é—® main.html</p>
<p>2ã€å½“å‰ç”¨æˆ·å¿…é¡»æ‹¥æœ‰ manage æˆæƒæ‰èƒ½è®¿é—® manage.html</p>
<p>3ã€å½“å‰ç”¨æˆ·å¿…é¡»æ‹¥æœ‰ administrator è§’è‰²æ‰èƒ½è®¿é—® administrator.html</p>
<h2 id="realm">Realm</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆæƒ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> principalCollection</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> (Account) subject.getPrincipal();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®è§’è‰²</span></span><br><span class="line">        Set&lt;String&gt; roles = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        roles.add(account.getRole());</span><br><span class="line">        <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>(roles);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®æƒé™</span></span><br><span class="line">        info.addStringPermission(account.getPerms());</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¤è¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> authenticationToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> (UsernamePasswordToken) authenticationToken;</span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> accountService.findByUsername(token.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (account != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(account, account.getPassword(), getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="shiroconfig">ShiroConfig</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">shiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager securityManager)</span> &#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">factoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        factoryBean.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æƒé™è®¾ç½®</span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;/main&quot;</span>, <span class="string">&quot;authc&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;/manage&quot;</span>, <span class="string">&quot;perms[manage]&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;/administrator&quot;</span>, <span class="string">&quot;roles[administrator]&quot;</span>);</span><br><span class="line">        factoryBean.setFilterChainDefinitionMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®ç™»å½•ç•Œé¢</span></span><br><span class="line">        factoryBean.setLoginUrl(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®æœªæˆæƒé¡µé¢</span></span><br><span class="line">        factoryBean.setUnauthorizedUrl(<span class="string">&quot;/unauth&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> factoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">securityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;accountRealm&quot;)</span> AccountRealm accountRealm)</span> &#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">manager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        manager.setRealm(accountRealm);</span><br><span class="line">        <span class="keyword">return</span> manager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AccountRealm <span class="title function_">accountRealm</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AccountRealm</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroDialect <span class="title function_">shiroDialect</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ShiroDialect</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="shiroæ•´åˆthymeleaf">Shiroæ•´åˆThymeleaf</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span> <span class="attr">xmlns:shiro</span>=<span class="string">&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>index<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;session.account!=null&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.account.username&#125;+&#x27;æ¬¢è¿å›æ¥ï¼&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/logout&quot;</span>&gt;</span>é€€å‡º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;manage&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/manage&quot;</span>&gt;</span>manage<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasRole</span>=<span class="string">&quot;administrator&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/administrator&quot;</span>&gt;</span>administrator<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>main.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>main<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>manage.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>manage<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>administrator.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>administrator<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>login.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å½•&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡¹ç›®ç»“æ„ä¸€è§ˆ</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/60caf4d4844ef46bb20aa0ff.jpg"
alt="é¡¹ç›®ç»“æ„" />
<figcaption aria-hidden="true">é¡¹ç›®ç»“æ„</figcaption>
</figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æœ‰ç‚¹ä¹±ï¼Œä½†ä¹Ÿæ²¡åŠæ³•ï¼Œæ¯•ç«Ÿè§†é¢‘è®²è§£æ˜¯åŠ¨æ€çš„ï¼Œæœ€ç»ˆçš„åšå®¢æ–‡å­—ä»…ä»…åªé™æ€çš„ï¼Œæ‰€ä»¥æ•ˆæœä¸å¥½</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Mybatis/Mybatis-plus</tag>
        <tag>Shiro</tag>
      </tags>
  </entry>
  <entry>
    <title>Sa-Tokenç»„ä»¶ä»‹ç»</title>
    <url>/article/617190b0.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>å‰æ–‡è®²äº†<a href="https://www.yuque.com/wnh/share/swon1eb8t5v1bny1"
title="Sa-Tokenä»‹ç»ä¸SpringBootç¯å¢ƒä¸‹ä½¿ç”¨">Sa-Tokenä»‹ç»ä¸SpringBootç¯å¢ƒä¸‹ä½¿ç”¨</a>ï¼Œä½†æ˜¯<code>satoken</code>æœ€é‡è¦çš„ç™»å½•é‰´æƒç›´æ¥ç•¥è¿‡äº†ï¼Œé‚£è¿™ç¯‡æ–‡ç« å°±å¼€è®²ï¼ŒğŸ˜‚å½“ç„¶ä¸æ˜¯å•¦ã€‚çœ‹æ ‡é¢˜å°±çŸ¥é“è¿™æ¬¡è¦è®²çš„æ˜¯<code>satoken</code>ç»„ä»¶ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå®‰æ’å‘¢ï¼Œæ˜¯å› ä¸ºæˆ‘åœ¨ç»†è‡´äº†è§£<code>satoken</code>æºç åï¼Œè¿˜æ˜¯éå¸¸æƒ³æŠŠ<code>satoken</code>è®²çš„æ¯”è¾ƒæ¸…æ¥šç»†è‡´çš„ï¼ŒåŒ…å«å…¶ä¸­ä¸€äº›è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ã€å‡½æ•°å¼æ¥å£çš„åº”ç”¨ã€ç»„ä»¶æ³¨å†Œçš„æ–¹æ³•ç­‰ï¼Œè€Œè¦è®²å¥½è¿™äº›ï¼Œ<code>satoken</code>çš„ç»„ä»¶ä¸€å®šè¦è®²ä¸€ä¸‹å§ï¼ŒåºŸè¯ä¸å¤šè¯´äº†ï¼Œä¸‹é¢å¼€å§‹ã€‚</p>
<p>å¿…è¦å£°æ˜ï¼šæ–‡ç« åŸºäº<a
href="https://sa-token.cc/">Sa-Token</a>ï¼Œç‰ˆæœ¬1.37.0</p>
<h1 id="satokené¡¹ç›®ç»“æ„">satokené¡¹ç›®ç»“æ„</h1>
<h2 id="ä¸‹è½½æºç ">ä¸‹è½½æºç </h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/dromara/Sa-Token.git</span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®ç»“æ„ä»‹ç»">é¡¹ç›®ç»“æ„ä»‹ç»</h2>
<p>é¡¹ç›®ç»“æ„ç»„ç»‡å¦‚ä¸‹ï¼Œç»“æ„è¿˜æ˜¯ç›¸å½“æ¸…æ™°æ˜äº†çš„ã€‚æˆ‘ä¹Ÿä¸å¯èƒ½æŠŠæ‰€æœ‰å·¥ç¨‹ä»£ç è¯¦ç»†éƒ½è®²ä¸€ä¸‹ï¼Œåªèƒ½æ ¹æ®<code>satoken</code>æœ€é‡è¦çš„æ¨¡å—æŒ‘ä¸€éƒ¨åˆ†ç»†è‡´è®²ä¸€ä¸‹ã€‚</p>
<span id="more"></span>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705731688354.webp"
alt="1705731688354" />
<figcaption aria-hidden="true">1705731688354</figcaption>
</figure>
<h1 id="satokenæ ¸å¿ƒ">satokenæ ¸å¿ƒ</h1>
<p>ç®€å•ä»‹ç»ä¸€ä¸‹<code>satoken</code>çš„é¡¹ç›®ç»“æ„ï¼Œå°±å¯ä»¥æ­¥å…¥æœ¬ç¯‡æ–‡ç« çš„æ­£é¢˜äº†â€”â€”<code>satoken</code>ç»„ä»¶ã€‚</p>
<p><code>sa-token-core</code>çš„ç»„ç»‡ç»“æ„å¦‚ä¸‹ï¼ŒåŒ…çš„å‘½åå·²ç»èƒ½è¯´æ˜ä¸€äº›ä»€ä¹ˆäº†ï¼Œæ¥ä¸‹æ¥åˆ°äº†å“ªå—å°±ç»†è‡´æ¥è¯´å“ªå—ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705732202969.webp"
alt="1705732202969" />
<figcaption aria-hidden="true">1705732202969</figcaption>
</figure>
<h2 id="samanager">SaManager</h2>
<p>å…¨ç±»åè·¯å¾„ï¼š<code>cn.dev33.satoken.SaManager</code></p>
<p>ä»¥ä¸Šç»“æ„ä¸­æœ€çªå‡ºçš„å°±æ˜¯<code>SaManager</code>äº†ï¼Œå®˜æ–¹ç»™ä»–çš„å®šä¹‰å¦‚ä¸‹ï¼Œå¯è§å…¶é‡è¦æ€§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ç®¡ç† Sa-Token æ‰€æœ‰å…¨å±€ç»„ä»¶ï¼Œå¯é€šè¿‡æ­¤ç±»å¿«é€Ÿè·å–ã€å†™å…¥å„ç§å…¨å±€ç»„ä»¶å¯¹è±¡</span><br><span class="line"> *</span><br><span class="line"> * @author click33</span><br><span class="line"> * @since 1.18.0</span><br><span class="line"> */</span><br><span class="line">public class SaManager &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>SaManager</code>çš„ç»“æ„å¦‚ä¸‹ï¼Œå…¶ä¸­è¿™äº›å±æ€§å°±æ˜¯<code>satoken</code>æœ€é‡è¦çš„ç»„ä»¶äº†ï¼Œä¸‹é¢æŒ‘å‡ºå‡ ä¸ªç»†è®²ä¸€ä¸‹ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705732665549.webp"
alt="1705732665549" />
<figcaption aria-hidden="true">1705732665549</figcaption>
</figure>
<h2 id="satokenconfig">SaTokenConfig</h2>
<p>å…¨ç±»åè·¯å¾„ï¼š<code>cn.dev33.satoken.config.SaTokenConfig</code></p>
<p><code>config</code>åŒ…ä¸‹é™¤äº†<code>SaTokenConfig</code>è¿˜æœ‰<code>SaSignConfig</code>ã€<code>SaCookieConfig</code>ã€<code>SaTokenConfigFactory</code>ã€‚å‰ä¸‰ä¸ªå±äºé…ç½®ç±»ï¼Œæœ€åä¸€ä¸ª<code>Factory</code>æ˜¯ç”¨äºé<code>IOC</code>ç¯å¢ƒä¸‹ä½¿ç”¨çš„ç±»ã€‚</p>
<p><code>satoken</code>çš„é…ç½®å‚è€ƒè¿™ä¸€èŠ‚å°±å¥½<a
href="https://sa-token.cc/doc.html#/use/config">Sa-Token</a>ï¼Œå½“ç„¶è¿™é‡Œå®Œå…¨å’Œæºç ç›¸å¯¹åº”çš„ã€‚</p>
<p>å¦‚å‰æ–‡æ‰€é…ç½®çš„ï¼Œéƒ½å¯¹åº”ç€ç±»å±æ€§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">############## Sa-Token é…ç½® (æ–‡æ¡£: https://sa-token.cc) ##############</span><br><span class="line">sa-token:</span><br><span class="line">  # token åç§°ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ cookie åç§°ï¼‰</span><br><span class="line">  token-name: Authorization</span><br><span class="line">  # token æœ‰æ•ˆæœŸï¼ˆå•ä½ï¼šç§’ï¼‰ é»˜è®¤30å¤©ï¼Œ-1 ä»£è¡¨æ°¸ä¹…æœ‰æ•ˆ</span><br><span class="line">  timeout: 3600</span><br><span class="line">  # token æœ€ä½æ´»è·ƒé¢‘ç‡ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œå¦‚æœ token è¶…è¿‡æ­¤æ—¶é—´æ²¡æœ‰è®¿é—®ç³»ç»Ÿå°±ä¼šè¢«å†»ç»“ï¼Œé»˜è®¤-1 ä»£è¡¨ä¸é™åˆ¶ï¼Œæ°¸ä¸å†»ç»“</span><br><span class="line">  active-timeout: 1800</span><br><span class="line">  # æ˜¯å¦å…è®¸åŒä¸€è´¦å·å¤šåœ°åŒæ—¶ç™»å½• ï¼ˆä¸º true æ—¶å…è®¸ä¸€èµ·ç™»å½•, ä¸º false æ—¶æ–°ç™»å½•æŒ¤æ‰æ—§ç™»å½•ï¼‰</span><br><span class="line">  is-concurrent: false</span><br><span class="line">  # åœ¨å¤šäººç™»å½•åŒä¸€è´¦å·æ—¶ï¼Œæ˜¯å¦å…±ç”¨ä¸€ä¸ª token ï¼ˆä¸º true æ—¶æ‰€æœ‰ç™»å½•å…±ç”¨ä¸€ä¸ª token, ä¸º false æ—¶æ¯æ¬¡ç™»å½•æ–°å»ºä¸€ä¸ª tokenï¼‰</span><br><span class="line">  is-share: true</span><br><span class="line">  # æ˜¯å¦å°è¯•ä»headeré‡Œè¯»å–token</span><br><span class="line">  is-read-header: true</span><br><span class="line">  # æ˜¯å¦å°è¯•ä»cookieé‡Œè¯»å–token</span><br><span class="line">  is-read-cookie: false</span><br><span class="line">  # tokenå‰ç¼€</span><br><span class="line">  token-prefix: &quot;Bearer&quot;</span><br><span class="line">  # token é£æ ¼ï¼ˆé»˜è®¤å¯å–å€¼ï¼šuuidã€simple-uuidã€random-32ã€random-64ã€random-128ã€tikï¼‰</span><br><span class="line">  token-style: tik</span><br><span class="line">  # æ˜¯å¦è¾“å‡ºæ“ä½œæ—¥å¿—</span><br><span class="line">  is-log: true</span><br></pre></td></tr></table></figure>
<p><code>SaTokenConfig</code>éƒ¨åˆ†æˆªå›¾å¦‚ä¸‹ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705746281775.webp"
alt="1705746281775" />
<figcaption aria-hidden="true">1705746281775</figcaption>
</figure>
<h2 id="satokendao">SaTokenDao</h2>
<p>å…¨ç±»åè·¯å¾„ï¼š<code>cn.dev33.satoken.dao.SaTokenDao</code></p>
<p><a
href="https://sa-token.cc/doc.html#/api/sa-token-dao">Sa-Token</a>ï¼Œå®˜æ–¹ç»™ä»–çš„æè¿°æ˜¯ï¼š<code>SaTokenDao</code>
æ˜¯æ•°æ®æŒä¹…å±‚æ¥å£ï¼Œè´Ÿè´£æ‰€æœ‰ä¼šè¯æ•°æ®çš„åº•å±‚å†™å…¥å’Œè¯»å–ã€‚</p>
<p>æ­£å¦‚æ¬¡ï¼Œæ­¤æ¥å£è®¾è®¡äº†å¦‚ä¸‹ä¸€äº›æ“ä½œæ•°æ®è¯»å–ä¸å†™å…¥çš„æ–¹æ³•ï¼Œæ³¨æ„å…¶ä¸­åŒ…å«æŠ½è±¡æ–¹æ³•ã€é»˜è®¤å®ç°æ–¹æ³•å’Œé»˜è®¤ç©ºå®ç°æ–¹æ³•ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705733902615.webp"
alt="1705733902615" />
<figcaption aria-hidden="true">1705733902615</figcaption>
</figure>
<p>ä¸<code>SaTokenDao</code>åŒ<code>dao</code>åŒ…ä¸‹è¿˜æœ‰ä¸€ä¸ªé»˜è®¤å®ç°ç±»<code>SaTokenDaoDefaultImpl</code>ï¼Œå½“ç„¶é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šå…¶ä»–å®ç°åœ¨æ’ä»¶å·¥ç¨‹é‡Œã€‚</p>
<p>é»˜è®¤å®ç°<code>SaTokenDaoDefaultImpl</code>ï¼šSa-Token
æŒä¹…å±‚æ¥å£ï¼Œé»˜è®¤å®ç°ç±»ï¼ˆåŸºäºå†…å­˜
Mapï¼Œç³»ç»Ÿé‡å¯åæ•°æ®ä¸¢å¤±ï¼‰ã€‚æ‰€ä»¥åœ¨ä¸å¼•å…¥å…¶ä»–å¦‚<code>Redis</code>éœ€è¦æ³¨æ„é‡å¯ä¸¢å¤±çš„é—®é¢˜ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705734145821.webp"
alt="1705734145821" />
<figcaption aria-hidden="true">1705734145821</figcaption>
</figure>
<h2 id="stpinterface">StpInterface</h2>
<p>å…¨ç±»åè·¯å¾„ï¼š<code>cn.dev33.satoken.stp.StpInterface</code></p>
<p>å‰æ–‡è®²åˆ°è‡ªå®šä¹‰æƒé™è®¤è¯æ—¶æœ‰è®²åˆ°ï¼Œè¿™ä¸ªæ¥å£éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°æ¥æ»¡è¶³ä¸šåŠ¡è¦æ±‚ã€‚</p>
<p>é»˜è®¤å®ç°ç±»<code>StpInterfaceDefaultImpl</code>ä¹Ÿæœ‰è¯´æ˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å¯¹ &#123;@link StpInterface&#125; æ¥å£é»˜è®¤çš„å®ç°ç±»</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * å¦‚æœå¼€å‘è€…æ²¡æœ‰å®ç° StpInterface æ¥å£ï¼Œåˆ™æ¡†æ¶ä¼šä½¿ç”¨æ­¤é»˜è®¤å®ç°ç±»ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½è¿”å›ç©ºé›†åˆï¼Œå³ï¼šç”¨æˆ·ä¸å…·æœ‰ä»»ä½•æƒé™å’Œè§’è‰²ã€‚</span><br><span class="line"> * </span><br><span class="line"> * @author click33</span><br><span class="line"> * @since 1.10.0</span><br><span class="line"> */</span><br><span class="line">public class StpInterfaceDefaultImpl implements StpInterface &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;String&gt; getPermissionList(Object loginId, String loginType) &#123;</span><br><span class="line">        return new ArrayList&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;String&gt; getRoleList(Object loginId, String loginType) &#123;</span><br><span class="line">        return new ArrayList&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒ<code>stp</code>åŒ…ä¸‹è¿˜æœ‰å¾ˆé‡è¦çš„<code>StpUtil</code>ã€<code>StpLogic</code>ã€<code>SaTokenInfo</code>è¿™æ¬¡å°±å…ˆä¸è®²äº†ã€‚</p>
<h2
id="satokencontextä¸satokensecondcontext">SaTokenContextä¸SaTokenSecondContext</h2>
<p>å…¨ç±»åè·¯å¾„ï¼š<code>cn.dev33.satoken.context.SaTokenContext/SaTokenSecondContext</code></p>
<p><a
href="https://sa-token.cc/doc.html#/fun/sa-token-context">Sa-Token</a>ï¼Œå®˜æ–¹æè¿°ï¼šä¸Šä¸‹æ–‡å¤„ç†å™¨å°è£…äº†å½“å‰åº”ç”¨ç¯å¢ƒçš„åº•å±‚æ“ä½œï¼Œæ˜¯
Sa-Token å¯¹æ¥ä¸åŒ web æ¡†æ¶çš„å…³é”®ã€‚ç›®å‰ Sa-Token ä»…å¯¹
SpringBootã€SpringMVCã€WebFluxã€Solon ç­‰éƒ¨åˆ† Web æ¡†æ¶åˆ¶ä½œäº† Starter
é›†æˆåŒ…ï¼Œ å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„ Web æ¡†æ¶ä¸åœ¨ä¸Šè¿°åˆ—è¡¨ä¹‹ä¸­ï¼Œåˆ™éœ€è¦è‡ªå®šä¹‰
SaTokenContext æ¥å£çš„å®ç°å®Œæˆæ•´åˆå·¥ä½œã€‚</p>
<p><code>core</code>å·¥ç¨‹<code>context</code>åŒ…ä¸‹çš„ç»“æ„æ˜¯è¿™æ ·çš„ï¼Œå…¶ä¸­<code>SaHolder</code>æ˜¯Sa-Token
ä¸Šä¸‹æ–‡æŒæœ‰ç±»ï¼Œä½ å¯ä»¥é€šè¿‡æ­¤ç±»å¿«é€Ÿè·å–å½“å‰ç¯å¢ƒä¸‹çš„
SaRequestã€SaResponseã€SaStorageã€SaApplication
å¯¹è±¡ã€‚å…³äºsatokençš„ä¸‰å¤§ä½œç”¨åŸŸå‚è€ƒå®˜ç½‘è¿™ç¯‡æ–‡ç« <a
href="https://sa-token.cc/doc.html#/fun/three-scope">Sa-Token</a>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705736482090.webp"
alt="1705736482090" />
<figcaption aria-hidden="true">1705736482090</figcaption>
</figure>
<p>å¯¹åº”ä¸Šå®˜æ–¹æ‰€è¯´å¯¹æ¥ä¸åŒ<code>web</code>æ¡†æ¶ï¼Œ<code>SaTokenContext</code>çš„å®ç°æœ‰ä¸‹ï¼Œå½“ç„¶å¯¹äºæˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„å¯èƒ½å°±æ˜¯<code>SaTokenContextForString</code>äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/image.png"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h2 id="salog">SaLog</h2>
<p>å…¨ç±»åè·¯å¾„ï¼š<code>cn.dev33.satoken.log.SaLog</code></p>
<p>Sa-Token
æ—¥å¿—è¾“å‡ºæ¥å£ï¼Œåªæœ‰ä¸€ä¸ªå®ç°ç±»å°±åœ¨åŒ<code>log</code>åŒ…ä¸‹<code>SaLogForConsole</code>ã€‚åœ¨çœ‹å®ç°ç±»çš„æºç æ—¶çœ‹åˆ°è¿™ä¸ªå€’æ˜¯æ¶¨ä¸€ç‚¹çŸ¥è¯†ğŸ˜‚ã€‚æŒºæœ‰æ„æ€çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line">    // ä¸‰ç§å†™æ³•é€Ÿåº¦å¯¹æ¯”</span><br><span class="line">    // if( config.getIsColorLog() != null &amp;&amp; config.getIsColorLog() )  10äº¿æ¬¡ï¼Œ2058ms</span><br><span class="line">    // if( config.getIsColorLog() == Boolean.TRUE ) 	10äº¿æ¬¡ï¼Œ1050ms   æœ€å¿«</span><br><span class="line">    // if( Objects.equals(config.getIsColorLog(), Boolean.TRUE) )  	10äº¿æ¬¡ï¼Œ1543ms</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<h2 id="å°ç»“">å°ç»“</h2>
<p>å…³äº<code>SaManager</code>çš„ç»„ä»¶å°±æŒ‘ä¸Šé¢å‡ ä¸ªä»‹ç»äº†ä¸€ä¸‹ã€‚</p>
<p>å‰©ä¸‹çš„<code>SaTempInterface</code>ï¼ˆä¸´æ—¶ <code>token</code>
è®¤è¯æ¨¡å—ï¼‰ã€<code>SaJsonTemplate</code>ï¼ˆ<code>JSON</code>
è½¬æ¢å™¨ï¼‰ã€<code>SaSignTemplate</code>ï¼ˆ<code>API</code>
å‚æ•°ç­¾åï¼‰ã€<code>SaSameTemplate</code>ï¼ˆ<code>Same-Token</code>
åŒæºç³»ç»Ÿè®¤è¯æ¨¡å—ï¼‰å°±è‡ªå·±å­¦ä¹ å§ã€‚</p>
<h1 id="satokenç»„ä»¶æ³¨å†Œ">satokenç»„ä»¶æ³¨å†Œ</h1>
<p>ç®€å•ä»‹ç»äº†<code>satoken</code>çš„ç»„ä»¶ï¼Œå°±è¦æ€è€ƒè¿™äº›ç»„ä»¶åœ¨é¡¹ç›®ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿå¦‚ä½•ç®¡ç†çš„ï¼Ÿ</p>
<h2 id="ç¯å¢ƒå£°æ˜">ç¯å¢ƒå£°æ˜</h2>
<p>è¿™é‡Œé’ˆå¯¹å¦‚ä¸‹ç¯å¢ƒæ¥è®²ä¸€ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Sa-Token æƒé™è®¤è¯, åœ¨çº¿æ–‡æ¡£ï¼šhttp://sa-token.dev33.cn/ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;cn.dev33&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;sa-token-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;cn.dev33&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;sa-token-redisson-jackson&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ä¾èµ–å…³ç³»">ä¾èµ–å…³ç³»</h2>
<p>ä»–ä»¬åˆ†åˆ«å¯¹åº”æœ‰å¦‚ä¸‹ä¾èµ–ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705737345050.webp"
alt="1705737345050" />
<figcaption aria-hidden="true">1705737345050</figcaption>
</figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705737357897.webp"
alt="1705737357897" />
<figcaption aria-hidden="true">1705737357897</figcaption>
</figure>
<h2 id="sa-token-servlet">sa-token-servlet</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705737871211.webp"
alt="1705737871211" />
<figcaption aria-hidden="true">1705737871211</figcaption>
</figure>
<p><code>sa-token-servlet</code>ä»…ä»…æ˜¯å®ç°äº†å‰é¢<code>context</code>ç« èŠ‚çš„<code>SaStorage</code>ã€<code>SaRequest</code>ã€<code>SaResponse</code>æ¥å£ï¼Œå¹¶å®šä¹‰äº†ä¸€äº›é”™è¯¯ç ã€‚</p>
<h2 id="sa-token-spring-boot-starter">sa-token-spring-boot-starter</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705746565625.webp"
alt="1705746565625" />
<figcaption aria-hidden="true">1705746565625</figcaption>
</figure>
<p><code>sa-token-spring-boot-starter</code>ä¹Ÿå¾ˆç®€å•ï¼Œå…³äº<code>SpringBoot</code>çš„è‡ªåŠ¨è£…é…åŸç†å°±ä¸å¤šè®²äº†ï¼Œè¿™é‡Œçœ‹<code>resource/META-INF/spring.factories</code>æ–‡ä»¶ï¼Œå…¶å®<code>SpringBoot2.7</code>ä¹‹åå°±æ¢äº†ï¼Œä¸‹é¢ä¼šæåˆ°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">cn.dev33.satoken.spring.SaTokenContextRegister</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¡¨ç¤ºè‡ªåŠ¨æ³¨å…¥çš„æ˜¯<code>SaTokenContextRegister</code>ã€‚</p>
<p>1ã€æ³¨å…¥äº†<code>SaTokenContextForSpring</code>å‰é¢ä¹Ÿæœ‰æåˆ°ï¼Œå…¶å°±æ˜¯åœ¨SpringMVCç¯å¢ƒä¸‹çš„ä¸Šä¸‹æ–‡å¤„ç†å™¨ï¼Œé’ˆå¯¹å¤„ç†<code>sa-token-servlet</code>å®ç°çš„<code>context</code>ï¼›</p>
<p>2ã€æ³¨å…¥äº†<code>SaPathCheckFilterForServlet</code>è·¯å¾„æ£€æŸ¥è¿‡æ»¤å™¨ï¼Œè‡ªå·±å¯æŸ¥çœ‹å…¶ä»£ç ï¼Œè¿™é‡Œç•¥è¿‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ³¨å†Œ Sa-Token æ¡†æ¶æ‰€éœ€è¦çš„ Bean</span><br><span class="line"> *</span><br><span class="line"> * @author click33</span><br><span class="line"> * @since 1.34.0</span><br><span class="line"> */</span><br><span class="line">public class SaTokenContextRegister &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">	 * è·å–ä¸Šä¸‹æ–‡å¤„ç†å™¨ç»„ä»¶ (Springç‰ˆ)</span><br><span class="line">	 * </span><br><span class="line">	 * @return /</span><br><span class="line">	 */</span><br><span class="line">    @Bean</span><br><span class="line">    public SaTokenContext getSaTokenContextForSpring() &#123;</span><br><span class="line">        return new SaTokenContextForSpring();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">	 * è¯·æ±‚ path æ ¡éªŒè¿‡æ»¤å™¨</span><br><span class="line">	 *</span><br><span class="line">	 * @return /</span><br><span class="line">	 */</span><br><span class="line">    @Bean</span><br><span class="line">    public SaPathCheckFilterForServlet saPathCheckFilterForServlet() &#123;</span><br><span class="line">        return new SaPathCheckFilterForServlet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="sa-token-redisson-jackson">sa-token-redisson-jackson</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705739632857.webp"
alt="1705739632857" />
<figcaption aria-hidden="true">1705739632857</figcaption>
</figure>
<p>å¥½äº†ï¼Œ<code>sa-token-spring-boot-starter</code>è§£å†³äº†ç¡®å®š<code>context</code>çš„é—®é¢˜ã€‚</p>
<p><code>sa-token-redisson-jackson</code>è¦è§£å†³<code>SaTokenDao</code>æŒä¹…å±‚å®ç°çš„é—®é¢˜ã€‚å‰é¢æåˆ°<code>SaTokenDao</code>æœ‰å¾ˆå¤šå®ç°ï¼Œé»˜è®¤å®ç°åœ¨å†…å­˜ä¸­å­˜å‚¨æ•°æ®ï¼Œè¿™é‡Œä½¿ç”¨äº†<code>redisson</code>ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°<code>resource/META-INF/</code>ä¸ä»…æœ‰<code>spring.factories</code>è¿˜æœ‰<code>spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ï¼Œè¿™å°±æ˜¯<code>SpringBoot2.7</code>å‰åè‡ªåŠ¨è£…é…çš„å·®åˆ«ï¼Œæœ‰æœºä¼šå¯ä»¥å†æ¢è®¨ä¸€ä¸‹ã€‚</p>
<p><code>resource/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cn.dev33.satoken.dao.SaTokenDaoRedissonJackson</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ³¨å…¥çš„æ˜¯<code>SaTokenDaoRedissonJackson</code>ï¼Œæ˜¯<code>SaTokenDao</code>çš„ä¸€ä¸ªå®ç°ç±»ï¼Œå…·ä½“æ–¹æ³•å®ç°è‡ªå·±å­¦ä¹ å§ğŸ˜‚ã€‚å…¶ä¸­<code>SaSessionForJacksonCustomized</code>æ˜¯<code>SaSession</code>çš„<code>Jackson</code>åºåˆ—åŒ–å®ç°ç±»ã€‚</p>
<h2
id="sa-token-spring-boot-autoconfig">sa-token-spring-boot-autoconfig</h2>
<p>é‡å¤´æˆæ¥äº†ï¼ï¼ï¼</p>
<p>å‰é¢é‚£ä¹ˆå¤šä¸œè¥¿éƒ½è¦åœ¨è¿™é‡Œä¸²èµ·æ¥äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705740261393.webp"
alt="1705740261393" />
<figcaption aria-hidden="true">1705740261393</figcaption>
</figure>
<p>ç›´æ¥å¼€å§‹ï¼</p>
<p><code>resource/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cn.dev33.satoken.spring.SaBeanRegister</span><br><span class="line">cn.dev33.satoken.spring.SaBeanInject</span><br><span class="line">cn.dev33.satoken.spring.sso.SaSsoBeanRegister</span><br><span class="line">cn.dev33.satoken.spring.sso.SaSsoBeanInject</span><br><span class="line">cn.dev33.satoken.spring.oauth2.SaOAuth2BeanRegister</span><br><span class="line">cn.dev33.satoken.spring.oauth2.SaOAuth2BeanInject</span><br></pre></td></tr></table></figure>
<p>è¿™æ¬¡å…ˆä¸çœ‹<code>SSO</code>å’Œ<code>OAuth2</code>çš„ç»„ä»¶ã€‚åªçœ‹<code>SaBeanRegister</code>å’Œ<code>SaBeanInject</code>æœ€åŸºç¡€çš„éƒ¨åˆ†ã€‚</p>
<h3 id="sabeanregister">SaBeanRegister</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ³¨å†ŒSa-Tokenæ‰€éœ€è¦çš„Bean </span><br><span class="line"> * &lt;p&gt; Bean çš„æ³¨å†Œä¸æ³¨å…¥åº”è¯¥åˆ†å¼€åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼Œå¦åˆ™åœ¨æŸäº›åœºæ™¯ä¸‹ä¼šé€ æˆå¾ªç¯ä¾èµ– </span><br><span class="line"> * @author click33</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class SaBeanRegister &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">	 * è·å–é…ç½®Bean</span><br><span class="line">	 * </span><br><span class="line">	 * @return é…ç½®å¯¹è±¡</span><br><span class="line">	 */</span><br><span class="line">    @Bean</span><br><span class="line">    @ConfigurationProperties(prefix = &quot;sa-token&quot;)</span><br><span class="line">    public SaTokenConfig getSaTokenConfig() &#123;</span><br><span class="line">        return new SaTokenConfig();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">	 * è·å– json è½¬æ¢å™¨ Bean (Jacksonç‰ˆ)</span><br><span class="line">	 * </span><br><span class="line">	 * @return json è½¬æ¢å™¨ Bean (Jacksonç‰ˆ)</span><br><span class="line">	 */</span><br><span class="line">    @Bean</span><br><span class="line">    public SaJsonTemplate getSaJsonTemplateForJackson() &#123;</span><br><span class="line">        return new SaJsonTemplateForJackson();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">	 * åº”ç”¨ä¸Šä¸‹æ–‡è·¯å¾„åŠ è½½å™¨</span><br><span class="line">	 * @return /</span><br><span class="line">	 */</span><br><span class="line">    @Bean</span><br><span class="line">    public ApplicationContextPathLoading getApplicationContextPathLoading() &#123;</span><br><span class="line">        return new ApplicationContextPathLoading();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1ã€é€šè¿‡<code>spring</code>é…ç½®æ–‡ä»¶å‰ç¼€ä¸º<code>sa-token</code>è¯»å–<code>SaTokenConfig</code>å±æ€§æ³¨å…¥</p>
<p>2å’Œ3ç•¥è¿‡ã€‚å“ˆå“ˆå“ˆå“ˆå“ˆ</p>
<h3 id="sabeaninject">SaBeanInject</h3>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240119/1705746281775.webp"
alt="1705746281775" />
<figcaption aria-hidden="true">1705746281775</figcaption>
</figure>
<p>è§‚å¯Ÿ<code>SaBeanInject</code>çš„ç»“æ„ï¼Œæ³¨æ„åˆ°å…¶åªæœ‰ä¸€ä¸ªæ„é€ å™¨ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯ç©ºè¿”å›çš„<code>set</code>æ–¹æ³•è€Œè¿™äº›æ–¹æ³•å…¥å‚éƒ½ä¸å‰é¢çš„<code>SaManager</code>é‡Œçš„ç»„ä»¶å‡ ä¹å®Œå…¨å¯¹åº”ã€‚</p>
<p>é¦–å…ˆçœ‹è¿™ä¸ªæ„é€ å™¨ï¼Œé€šè¿‡è°ƒç”¨<code>SaManager</code>çš„é™æ€æ–¹æ³•æ¥è®¾ç½®çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ç»„ä»¶æ³¨å…¥ </span><br><span class="line"> * &lt;p&gt; ä¸ºç¡®ä¿ Log ç»„ä»¶æ­£å¸¸æ‰“å°ï¼Œå¿…é¡»å°† SaLog å’Œ SaTokenConfig ç‡å…ˆåˆå§‹åŒ– &lt;/p&gt; </span><br><span class="line"> * </span><br><span class="line"> * @param log log å¯¹è±¡</span><br><span class="line"> * @param saTokenConfig é…ç½®å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">public SaBeanInject(</span><br><span class="line">        @Autowired(required = false) SaLog log, </span><br><span class="line">        @Autowired(required = false) SaTokenConfig saTokenConfig</span><br><span class="line">        )&#123;</span><br><span class="line">    if(log != null) &#123;</span><br><span class="line">        SaManager.setLog(log);</span><br><span class="line">    &#125;</span><br><span class="line">    if(saTokenConfig != null) &#123;</span><br><span class="line">        SaManager.setConfig(saTokenConfig);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸çŸ¥é“ä½ è¿˜è®°å¾—å‰é¢æœ‰è´´å®˜æ–¹ç»™<code>SaManager</code>çš„å®šä¹‰ï¼šç®¡ç†
Sa-Token æ‰€æœ‰å…¨å±€ç»„ä»¶ï¼Œå¯é€šè¿‡æ­¤ç±»å¿«é€Ÿè·å–ã€å†™å…¥å„ç§å…¨å±€ç»„ä»¶å¯¹è±¡ã€‚</p>
<p>å›è¿‡å¤´æ¥çœ‹<code>SaManager</code>çš„å±æ€§æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼Œ<code>public volatile static SaTokenConfig config;</code>ä¿è¯äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§å’Œæœ‰åºæ€§ã€‚ä¹Ÿå°±æ˜¯<code>SaTokenConfig</code>è¢«æ›´æ–°åï¼Œå…¶ä»–çº¿ç¨‹èƒ½ç«‹åˆ»çœ‹åˆ°å˜é‡æ›´æ–°ã€‚å¦å¤–åœ¨<code>getConfig</code>æ–¹æ³•ä¹Ÿä½¿ç”¨äº†åŒæ­¥å—ç¡®ä¿çº¿ç¨‹å®‰å…¨åœ°è·å–<code>config</code>å¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å…¨å±€é…ç½®å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">public volatile static SaTokenConfig config;	</span><br><span class="line">public static void setConfig(SaTokenConfig config) &#123;</span><br><span class="line">    setConfigMethod(config);</span><br><span class="line">    </span><br><span class="line">    // æ‰“å° banner </span><br><span class="line">    if(config !=null &amp;&amp; config.getIsPrint()) &#123;</span><br><span class="line">        SaFoxUtil.printSaToken();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å¦‚æœæ­¤ config å¯¹è±¡æ²¡æœ‰é…ç½® isColorLog çš„å€¼ï¼Œåˆ™æ¡†æ¶ä¸ºå®ƒè‡ªåŠ¨åˆ¤æ–­ä¸€ä¸‹</span><br><span class="line">    if(config != null &amp;&amp; config.getIsLog() != null &amp;&amp; config.getIsLog() &amp;&amp; config.getIsColorLog() == null) &#123;</span><br><span class="line">        config.setIsColorLog(SaFoxUtil.isCanColorLog());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // $$ å…¨å±€äº‹ä»¶ </span><br><span class="line">    SaTokenEventCenter.doSetConfig(config);</span><br><span class="line">    </span><br><span class="line">    // è°ƒç”¨ä¸€æ¬¡ StpUtil ä¸­çš„æ–¹æ³•ï¼Œä¿è¯å…¶å¯ä»¥å°½æ—©çš„åˆå§‹åŒ– StpLogic</span><br><span class="line">    StpUtil.getLoginType();</span><br><span class="line">&#125;</span><br><span class="line">private static void setConfigMethod(SaTokenConfig config) &#123;</span><br><span class="line">    SaManager.config = config;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * è·å– Sa-Token çš„å…¨å±€é…ç½®ä¿¡æ¯</span><br><span class="line"> * @return å…¨å±€é…ç½®ä¿¡æ¯</span><br><span class="line"> */</span><br><span class="line">public static SaTokenConfig getConfig() &#123;</span><br><span class="line">    if (config == null) &#123;</span><br><span class="line">        synchronized (SaManager.class) &#123;</span><br><span class="line">            if (config == null) &#123;</span><br><span class="line">                setConfigMethod(SaTokenConfigFactory.createConfig());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return config;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>SaBeanInject</code>çš„å…¶ä»–æ–¹æ³•ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œè‡ªå·±çœ‹å°±è¡Œäº†ã€‚</p>
<p>å¯ä»¥è¯´<code>SaBeanInject</code>æ˜¯å¸®åŠ©<code>SaManager</code>è®¾ç½®å±æ€§çš„é‡è¦ç±»ï¼Œæ˜¯ä¹‹åç›´æ¥ä½¿ç”¨<code>StpUtil</code>ã€<code>StpLogic</code>ç­‰é™æ€ç±»çš„é™æ€æ–¹æ³•çš„åŸºç¡€ã€‚</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>é¡¹ç›®</tag>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootæ•´åˆAdminç›‘æ§</title>
    <url>/article/5959cb50.html</url>
    <content><![CDATA[<p>#Spring Boot Admin</p>
<p>ä¹Ÿè®¸ä½ åœ¨å­¦ä¹ <code>SpringBoot</code>çš„æ—¶å€™æœ‰æ¥è§¦<code>Admin</code>ç›‘æ§ï¼Œä½†æ˜¯å› ä¸ºæ˜¯è‡ªå­¦æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šè·‘çš„é¡¹ç›®ï¼Œåªæ˜¯æ¯æ¬¡å¯åŠ¨åè°ƒè¯•ä¸€ä¸‹ç„¶åå°±å…³é—­äº†ï¼Œæ‰€ä»¥ç›‘æ§çš„æ„ä¹‰å…¶å®ä¸å¤§ã€‚å†µä¸”ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šéƒ½æ˜¯æœ¬åœ°è·‘çš„é¡¹ç›®ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šæœ‰ä»€ä¹ˆå‹åŠ›ï¼Œä¹Ÿå¾ˆå°‘å»åˆ†ææ¥å£è€—æ—¶ã€Jvmå †æ ˆã€çº¿ç¨‹ã€CPUã€å†…å­˜ç­‰ï¼Œä¹Ÿæ˜¯å› æ­¤æˆ‘ä»¬ä¸€ç›´éƒ½æœ‰å¿½ç•¥ç›‘æ§çš„é‡è¦æ€§ã€‚å…¶å®ä¹Ÿéƒ½å¯ä»¥ç†è§£ï¼Œæ²¡æœ‰è¿™æ ·çš„éœ€æ±‚æ€ä¹ˆä¼šå»æ¢ç´¢å‘¢ã€‚å°±åƒç°åœ¨å·¥ä½œäº†ï¼Œè‡ªå·±ä¹Ÿæœ‰ä¹°æœåŠ¡å™¨è·‘é¡¹ç›®ï¼Œå°±ä¼šä¸è‡ªè§‰åœ°å»åšè¿™äº›äº‹æƒ…ï¼Œé©±åŠ¨åŠ›æ¥æºå°±æ˜¯è‡ªå·±äº†ï¼Œå®Œå…¨ä¸ç”¨å€ŸåŠ©ä»–åŠ›ã€‚å¾ˆå¤šäº‹æƒ…ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç°åœ¨åšé‚£äº›æ²¡å¿…è¦çš„äº‹æƒ…æˆ‘è§‰å¾—å¾ˆçƒ¦ï¼Œæ²¡æœ‰æ„æ€ï¼Œä¹Ÿç”¨ä¸åˆ°ï¼Œä½†æ˜¯ä¸€æ—¦ä¸æˆ‘æ¯æ¯ç›¸å…³ï¼Œç‰µæ‰¯åˆ°åˆ©ç›Šä¸Šï¼Œå¯¹ä¸èµ·ï¼Œæˆ‘ç»ä¸æ”¾å¼ƒã€‚</p>
<h1 id="ç›‘æ§ç³»ç»Ÿä»‹ç»">ç›‘æ§ç³»ç»Ÿä»‹ç»</h1>
<p>äºæˆ‘è€Œè¨€ï¼Œè§è¿‡çš„ç›‘æ§ç³»ç»Ÿä¹Ÿå¹¶ä¸å¤šï¼Œä»…ä»…çŸ¥é“<code>Zabbix</code>å’Œ<code>Prometheus</code>+<code>Grafana</code>ä»…æ­¤è€Œå·²ï¼Œ</p>
<p>https://blog.csdn.net/liu320yj/article/details/123554297</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>Sa-Tokenäº‹ä»¶å‘å¸ƒï¼Œè§‚å¯Ÿè€…æ¨¡å¼</title>
    <url>/article/cf08a8bf.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>å‰æ–‡æåˆ°å¾ˆå¤šæ¬¡<code>satoken</code>çš„äº‹ä»¶å‘å¸ƒï¼Œä½¿ç”¨çš„æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¿™æ¬¡å°±æ¥æ¢ç©¶ä¸€ä¸‹ï¼Œå¾ˆç®€å•çš„ã€‚</p>
<p>å‚è€ƒå®˜ç½‘ï¼š<a
href="https://sa-token.cc/doc.html#/up/global-listener?id=%e5%85%a8%e5%b1%80%e4%be%a6%e5%90%ac%e5%99%a8">å…¨å±€ä¾¦å¬å™¨</a></p>
<h1 id="è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</h1>
<p>ç®€ä»‹ï¼šè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>åœ¨<code>sa-token-core</code>çš„<code>cn.dev33.satoken.listener</code>åŒ…ä¸‹æœ‰</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240222/image.54xhmc4ak1.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<span id="more"></span>
<h2 id="satokenlistener">SaTokenListener</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240222/image.pf2h35e6x.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>ä¸Šé¢å°±æ˜¯å®ƒçš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¦‚æ³¨é‡Šæè¿°çš„é‚£æ ·ï¼šä½ å¯ä»¥é€šè¿‡å®ç°æ­¤æ¥å£åœ¨ç”¨æˆ·ç™»å½•ã€é€€å‡ºç­‰å…³é”®æ€§æ“ä½œæ—¶è¿›è¡Œä¸€äº›<code>AOP</code>åˆ‡é¢æ“ä½œã€‚</p>
<h2 id="satokenlistenerforlog">SaTokenListenerForLog</h2>
<p>æ¡†æ¶ä¸­å”¯äºŒå®ç°<code>SaTokenListener</code>æ¥å£çš„ç±»ã€‚</p>
<p>ä¹‹å‰è´´å›¾çš„<code>satoken</code>æ—¥å¿—éƒ½æ˜¯ç”±æ­¤ç±»å®ç°çš„ã€‚</p>
<h2 id="satokenlistenerforsimple">SaTokenListenerForSimple</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Sa-Token ä¾¦å¬å™¨ï¼Œé»˜è®¤ç©ºå®ç° </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt; å¯¹æ‰€æœ‰äº‹ä»¶æ–¹æ³•æä¾›ç©ºå®ç°ï¼Œæ–¹ä¾¿å¼€å‘è€…é€šè¿‡ç»§æ‰¿æ­¤ç±»å¿«é€Ÿå®ç°ä¸€ä¸ªå¯ç”¨çš„ä¾¦å¬å™¨ &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> click33</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.31.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaTokenListenerForSimple</span> <span class="keyword">implements</span> <span class="title class_">SaTokenListener</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="satokeneventcenter">SaTokenEventCenter</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Sa-Token äº‹ä»¶ä¸­å¿ƒ äº‹ä»¶å‘å¸ƒå™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt; æä¾›ä¾¦å¬å™¨æ³¨å†Œã€äº‹ä»¶å‘å¸ƒèƒ½åŠ› &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> click33</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.31.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaTokenEventCenter</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// --------- æ³¨å†Œä¾¦å¬å™¨ </span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> List&lt;SaTokenListener&gt; listenerList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		<span class="comment">// é»˜è®¤æ·»åŠ æ§åˆ¶å°æ—¥å¿—ä¾¦å¬å™¨ </span></span><br><span class="line">		listenerList.add(<span class="keyword">new</span> <span class="title class_">SaTokenListenerForLog</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>SaTokenEventCenter</code>ä»å‘½åå°±å¯ä»¥çŸ¥é“è¿™æ˜¯<code>satoken</code>çš„äº‹ä»¶å‘å¸ƒä¸­å¿ƒç±»ã€‚ä¸»è¦å±æ€§å°±æ˜¯<code>List&lt;SaTokenListener&gt; listenerList</code>ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ä¾¦å¬å™¨ï¼Œå…¶æ–¹æ³•ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯ç®¡ç†ä¾¦å¬å™¨ï¼Œå¦ä¸€ç±»å°±æ˜¯äº‹ä»¶å‘å¸ƒï¼Œè€Œä¸”æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ã€‚</p>
<h1 id="è‡ªåŠ¨æ³¨å†Œä¾¦å¬å™¨">è‡ªåŠ¨æ³¨å†Œä¾¦å¬å™¨</h1>
<p>åœ¨<code>Spring</code>ç¯å¢ƒä¸­ï¼Œä½¿ç”¨<code>Spring Boot</code>è‡ªåŠ¨æ³¨å…¥ï¼Œè¿˜æ˜¯è¦å›åˆ°<code>sa-token-spring-boot-autoconfig</code>ï¼Œ<code>SaBeanInject</code>ä¸­æœ‰å¦‚ä¸‹æ–¹æ³•å¸®åŠ©å®Œæˆä¾¦å¬å™¨çš„æ³¨å†Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨å…¥ä¾¦å¬å™¨Bean</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> listenerList ä¾¦å¬å™¨é›†åˆ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Autowired(required = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSaTokenListener</span><span class="params">(List&lt;SaTokenListener&gt; listenerList)</span> &#123;</span><br><span class="line">    SaTokenEventCenter.registerListenerList(listenerList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="äº‹ä»¶å‘å¸ƒ">äº‹ä»¶å‘å¸ƒ</h1>
<p>å®Œæˆä¾¦å¬å™¨çš„æ³¨å†Œåï¼Œå°±å¯ä»¥æ„‰å¿«çš„äº‹ä»¶å‘å¸ƒäº†ã€‚å³è°ƒç”¨<code>SaTokenEventCenter.doXxx</code>æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº‹ä»¶å‘å¸ƒï¼šxx è´¦å·ç™»å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginType è´¦å·ç±»åˆ«</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginId è´¦å·id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tokenValue æœ¬æ¬¡ç™»å½•äº§ç”Ÿçš„ token å€¼ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginModel ç™»å½•å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doLogin</span><span class="params">(String loginType, Object loginId, String tokenValue, SaLoginModel loginModel)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (SaTokenListener listener : listenerList) &#123;</span><br><span class="line">        listener.doLogin(loginType, loginId, tokenValue, loginModel);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™é‡Œæ˜¯åŒæ­¥äº‹ä»¶å‘å¸ƒï¼Œéå¼‚æ­¥ã€‚</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
  </entry>
  <entry>
    <title>SpringMVC</title>
    <url>/article/ae0f95e0.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a
href="https://docs.spring.io/spring-framework/docs/5.3.5-SNAPSHOT/reference/html/web.html#spring-web">https://docs.spring.io/spring-framework/docs/5.3.5-SNAPSHOT/reference/html/web.html#spring-web</a></p>
<p>å…¶ä»–ï¼š<a
href="https://blog.csdn.net/litianxiang_kaola/article/details/79169148">https://blog.csdn.net/litianxiang_kaola/article/details/79169148</a></p>
<p><a
href="https://www.bilibili.com/video/BV1aE41167Tu">ã€ç‹‚ç¥è¯´Javaã€‘SpringMVCæœ€æ–°æ•™ç¨‹IDEAç‰ˆé€šä¿—æ˜“æ‡‚</a></p>
<span id="more"></span>
<h1 id="é…ç½®">é…ç½®</h1>
<p><del>ç»§æ‰¿ Controlleræ–¹å¼</del></p>
<p>æ³¨è§£æ–¹å¼</p>
<h2 id="web.xml">web.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® DispatcherServletï¼šè¿™æ˜¯ SpringMVC çš„æ ¸å¿ƒï¼š è¯·æ±‚åˆ†å‘å™¨ï¼Œå‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯åŠ¨çº§åˆ« --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- /ï¼šåŒ¹é…æ‰€æœ‰è¯·æ±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="spring-servlet.xml">spring-servlet.xml</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Springæ‰«ææœºåˆ¶ï¼Œæ­¤å¤„æ‰«æSpringMVCæ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wnh.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®é™æ€èµ„æºæ˜ å°„,é˜²æ­¢é™æ€èµ„æºè¢«æ‹¦æˆª --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--&amp;lt;!&amp;ndash; å¤„ç†å™¨æ˜ å°„å™¨ &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&amp;lt;!&amp;ndash; å¤„ç†å™¨é€‚é…å™¨ &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ›¿ä»£äº†ä¸Šé¢æ³¨é‡Šçš„é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/module/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;helloSpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¹±ç é—®é¢˜">ä¹±ç é—®é¢˜</h2>
<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="requestmapping"><span class="citation"
data-cites="RequestMapping">@RequestMapping</span></h1>
<p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>
<p>RequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼Œä¸‹é¢æˆ‘ä»¬æŠŠè¿™äº›å±æ€§åˆ†æˆä¸‰ç±»è¿›è¡Œè¯´æ˜ã€‚</p>
<p><strong>1ã€valueå±æ€§ã€methodå±æ€§</strong></p>
<p>valueï¼šæŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Templateæ¨¡å¼</p>
<p>methodï¼šæŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œä¾‹å¦‚GETã€POSTã€PUTã€DELETEç­‰ï¼›</p>
<p><strong>2ã€consumeså±æ€§ã€produceså±æ€§</strong></p>
<p>consumesï¼šæŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application/jsonã€text/htmlç­‰</p>
<p>producesï¼šæŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“Requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›</p>
<p><strong>3ã€paramså±æ€§ã€headerså±æ€§</strong></p>
<p>paramsï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†</p>
<p>headersï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚</p>
<h2 id="restfulé£æ ¼">RestFulé£æ ¼</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b,Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,a+b+<span class="string">&quot;çš„ç»“æœä¸º&quot;</span>+(a+b));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RequestMapping(&quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">add0</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> a,<span class="meta">@PathVariable</span> <span class="type">int</span> b, Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç»“æœä¸º&quot;</span>+(a+b));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸæœ¬urlï¼š<code>http://localhost:8080/springmvc/add?a=1&amp;b=2</code></p>
<p>RestFulï¼š<code>http://localhost:8080/springmvc/add/3/4</code></p>
<h2 id="requestparam"><span class="citation"
data-cites="RequestParam">@RequestParam</span></h2>
<p>æ¥å—å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼Œåªæœ‰ç¬¦åˆ@RequestParam()é…ç½®æ‰æ¥æ”¶ï¼Œè‹¥æ˜¯å¯¹è±¡å¯ç›´æ¥ä¼ å…¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name)</span> &#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è½¬å‘ä¸é‡å®šå‘">è½¬å‘ä¸é‡å®šå‘</h1>
<p>é…ç½®è§†å›¾è§£æå™¨é»˜è®¤è½¬å‘</p>
<ul>
<li>forward: //è¯·æ±‚è½¬å‘</li>
<li>redirect: //é‡å®šå‘</li>
</ul>
<p>é‡å®šå‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;redirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">redirect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:must.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ajax-ä¸-json">AJAX ä¸ JSON</h1>
<h2 id="jackson">jackson</h2>
<p><strong>å¯¼åŒ…</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å®ä½“ç±»å¯¹è±¡">å®ä½“ç±»å¯¹è±¡</h3>
<p><strong>Controller</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line">@RequestMapping(value = &quot;j1&quot;,produces = &quot;text/json;charset=UTF-8&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public String json1() throws JsonProcessingException &#123;</span><br><span class="line">    // jackson ObjectMapper</span><br><span class="line">    ObjectMapper mapper=new ObjectMapper();</span><br><span class="line"></span><br><span class="line">    User user=new User(1,&quot;å°ç‹&quot;,&quot;dbfd&quot;);</span><br><span class="line"></span><br><span class="line">    return mapper.writeValueAsString(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>SpringMVC é…ç½®è§£å†³</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jacksonMessageConverter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<p><code>&#123;"id":1,"name":"å°ç‹","pwd":"dbfd"&#125;</code></p>
<h3 id="ç®€å•é›†åˆ">ç®€å•é›†åˆ</h3>
<p><strong>Controller</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;j1&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="comment">// jackson ObjectMapper</span></span><br><span class="line">    ObjectMapper mapper=<span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">    List&lt;User&gt; userList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    User user1=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;å°ç‹&quot;</span>,<span class="string">&quot;dbfd&quot;</span>);</span><br><span class="line">    User user2=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">2</span>,<span class="string">&quot;å¤§ç‹&quot;</span>,<span class="string">&quot;55vgh&quot;</span>);</span><br><span class="line">    User user3=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">3</span>,<span class="string">&quot;è€ç‹&quot;</span>,<span class="string">&quot;d785d&quot;</span>);</span><br><span class="line">    User user4=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>,<span class="string">&quot;å°‘ç‹&quot;</span>,<span class="string">&quot;86fd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    userList.add(user1);</span><br><span class="line">    userList.add(user2);</span><br><span class="line">    userList.add(user3);</span><br><span class="line">    userList.add(user4);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mapper.writeValueAsString(userList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<p><code>[&#123;"id":1,"name":"å°ç‹","pwd":"dbfd"&#125;,&#123;"id":2,"name":"å¤§ç‹","pwd":"55vgh"&#125;,&#123;"id":3,"name":"è€ç‹","pwd":"d785d"&#125;,&#123;"id":4,"name":"å°‘ç‹","pwd":"86fd"&#125;]</code></p>
<h3 id="æ—¶é—´å¯¹è±¡">æ—¶é—´å¯¹è±¡</h3>
<p><strong>Controller</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;j2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json2</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    Date data=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<p><code>1613656289365</code></p>
<p>ObjectMapper æ—¶é—´è§£æé»˜è®¤æ ¼å¼ä¸ºï¼šTimetampï¼šæ—¶é—´æˆ³</p>
<p><strong>æ ¼å¼åŒ–</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;j2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json2</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    Date data=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">    SimpleDateFormat sdf=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(sdf.format(data));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<p><code>"2021-02-18 21:55:51"</code></p>
<p><strong>ObjectMapper è§£å†³</strong></p>
<p>.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,false)
å…³é—­é»˜è®¤æ—¶é—´æˆ³æ–¹å¼</p>
<p>.setDateFormat(sdf) è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@RequestMapping(value = &quot;j2&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public String json2() throws JsonProcessingException &#123;</span><br><span class="line">    Date data=new Date();</span><br><span class="line"></span><br><span class="line">    // SimpleDateFormat sdf=new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line">    //</span><br><span class="line">    // return new ObjectMapper().writeValueAsString(sdf.format(data));</span><br><span class="line"></span><br><span class="line">    return new ObjectMapper().configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,false).writeValueAsString(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<p><code>"2021-02-18T14:00:26.890+0000"</code></p>
<p><strong>JsonUtil</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getJson(object, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object, String dataFormat)</span> &#123;</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…³é—­é»˜è®¤æ—¶é—´æˆ³æ–¹å¼</span></span><br><span class="line">        mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(dataFormat);</span><br><span class="line">        mapper.setDateFormat(sdf);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mapper.writeValueAsString(object);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="fastjson">fastjson</h2>
<p><strong>å¯¼åŒ…</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æµ‹è¯•"><strong>æµ‹è¯•</strong></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;j4&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json4</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;å°ç‹&quot;</span>, <span class="string">&quot;dbfd&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">2</span>, <span class="string">&quot;å¤§ç‹&quot;</span>, <span class="string">&quot;55vgh&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">3</span>, <span class="string">&quot;è€ç‹&quot;</span>, <span class="string">&quot;d785d&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>, <span class="string">&quot;å°‘ç‹&quot;</span>, <span class="string">&quot;86fd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    userList.add(user1);</span><br><span class="line">    userList.add(user2);</span><br><span class="line">    userList.add(user3);</span><br><span class="line">    userList.add(user4);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦*******&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> JSON.toJSONString(userList);</span><br><span class="line">    System.out.println(<span class="string">&quot;JSON.toJS0NString(list)==&gt;&quot;</span> + str1);</span><br><span class="line">    <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> JSON.toJSONString(user1);</span><br><span class="line">    System.out.println(<span class="string">&quot;JSON.toJS0NString(user1)==&gt;&quot;</span> + str2);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">jp_user1</span> <span class="operator">=</span> JSON.parseObject(str2, User.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;JSON. parseObject(str2,User.class)==&gt;&quot;</span> + jp_user1);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡*****&quot;</span>);</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> (JSONObject) JSON.toJSON(user2);</span><br><span class="line">    System.out.println(<span class="string">&quot;(JSONObject) JSON. toJSON(user2)==&gt; &quot;</span> + jsonObject1.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡*****&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">to_java_user</span> <span class="operator">=</span> JSON.toJavaObject(jsonObject1, User.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;JSON. toJavaObject(jsonObject1, User.class)==&gt;&quot;</span> + to_java_user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦*******</span><br><span class="line">JSON.toJS0NString(list)==&gt;[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;å°ç‹&quot;,&quot;pwd&quot;:&quot;dbfd&quot;&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;å¤§ç‹&quot;,&quot;pwd&quot;:&quot;55vgh&quot;&#125;,&#123;&quot;id&quot;:3,&quot;name&quot;:&quot;è€ç‹&quot;,&quot;pwd&quot;:&quot;d785d&quot;&#125;,&#123;&quot;id&quot;:4,&quot;name&quot;:&quot;å°‘ç‹&quot;,&quot;pwd&quot;:&quot;86fd&quot;&#125;]</span><br><span class="line">JSON.toJS0NString(user1)==&gt;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;å°ç‹&quot;,&quot;pwd&quot;:&quot;dbfd&quot;&#125;</span><br><span class="line"></span><br><span class="line">****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******</span><br><span class="line">JSON. parseObject(str2,User.class)==&gt;User(id=1, name=å°ç‹, pwd=dbfd)</span><br><span class="line"></span><br><span class="line">****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡*****</span><br><span class="line">(JSONObject) JSON. toJSON(user2)==&gt; å¤§ç‹</span><br><span class="line"></span><br><span class="line">****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡*****</span><br><span class="line">JSON. toJavaObject(jsonObject1, User.class)==&gt;User(id=2, name=å¤§ç‹, pwd=55vgh)</span><br></pre></td></tr></table></figure>
<h3 id="å®ä¾‹">å®ä¾‹</h3>
<p><strong>åç«¯</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;addComment&quot;, produces = &quot;text/json;charset=UTF-8&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addComment</span><span class="params">(Comment comment)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> frontService.AddComment(comment);</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    <span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">LastId</span> <span class="operator">=</span> comment.getComment_id();</span><br><span class="line">        map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;cid&quot;</span>, LastId);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯„è®ºæˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        map.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;fail&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯„è®ºå¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å‰ç«¯</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> css = &#123;</span><br><span class="line">        <span class="attr">marginLeft</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">        <span class="attr">marginRight</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">        <span class="attr">width</span>: <span class="string">&#x27;70%&#x27;</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    $(<span class="string">&quot;#show&quot;</span>).<span class="title function_">css</span>(css);</span><br><span class="line">    $(<span class="string">&quot;#sendTo&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//è·å–å€¼</span></span><br><span class="line">        <span class="keyword">var</span> uid = <span class="string">&#x27;$&#123;sessionScope.userS.userId&#125;&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> uname = <span class="string">&#x27;$&#123;sessionScope.userS.userName&#125;&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> nid = <span class="string">&#x27;$&#123;news.newsId&#125;&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> content = $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">        <span class="keyword">var</span> uIcon = <span class="string">&#x27;$&#123;sessionScope.userS.userIcon&#125;&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (content !== <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/addComment&quot;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">                <span class="comment">//æ³¨æ„åºåˆ—åŒ–çš„å€¼ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢,å¹¶ä¸”ä¸éœ€è¦å¤´éƒ¨å˜é‡,ä¸ç„¶è·å–çš„å€¼å¾—æ ¼å¼ä¼šæœ‰é—®é¢˜</span></span><br><span class="line">                <span class="attr">data</span>: &#123;<span class="attr">user_id</span>: uid, <span class="attr">news_id</span>: nid, <span class="attr">content</span>: content&#125;,</span><br><span class="line">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (data.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span><br><span class="line">                        <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºæˆåŠŸ&quot;</span>);</span><br><span class="line">                        <span class="keyword">var</span> iconSrc=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/img/userIcon.png&quot;</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">&quot;&quot;</span> !== uIcon)&#123;</span><br><span class="line">                            iconSrc=uIcon;</span><br><span class="line">                        &#125;</span><br><span class="line">                        $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">                        <span class="keyword">var</span> s = <span class="string">&#x27;&lt;div class=&quot;layui-card&quot; id=&quot;div_&#x27;</span> + data.<span class="property">cid</span> + <span class="string">&#x27;&quot;&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;div class=&quot;layui-card-body&quot;&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;div align=&quot;left&quot;&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/queryUserById?uid=&#x27;</span>+uid+<span class="string">&#x27;&quot;&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;img class=&quot;layui-nav-img&quot; src=&quot;&#x27;</span> + iconSrc + <span class="string">&#x27;&quot;/&gt;&#x27;</span> +</span><br><span class="line">                            uname + <span class="string">&#x27;&lt;/a&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27; &lt;/div&gt;&#x27;</span> +</span><br><span class="line">                            content +</span><br><span class="line">                            <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;delComment(&#x27;</span> + data.<span class="property">cid</span> + <span class="string">&#x27;)&quot;&gt;åˆ é™¤&lt;/a&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;div align=&quot;right&quot;&gt;&#x27;</span> +</span><br><span class="line">                            <span class="title function_">getCurrentDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()) +</span><br><span class="line">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span><br><span class="line">                            <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">                        $(<span class="string">&quot;#newComment&quot;</span>).<span class="title function_">prepend</span>(s);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºå¤±è´¥&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;è¯„è®ºä¸èƒ½ä¸ºç©ºï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="æ‹¦æˆªå™¨">æ‹¦æˆªå™¨</h1>
<p>Spring
MVCä¸­çš„æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ç±»ä¼¼äºServletä¸­çš„è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼Œå®ƒä¸»è¦ç”¨äºæ‹¦æˆªç”¨æˆ·è¯·æ±‚å¹¶ä½œç›¸åº”çš„å¤„ç†ã€‚ä¾‹å¦‚é€šè¿‡æ‹¦æˆªå™¨å¯ä»¥è¿›è¡Œæƒé™éªŒè¯ã€è®°å½•è¯·æ±‚ä¿¡æ¯çš„æ—¥å¿—ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ç­‰ã€‚
è¦ä½¿ç”¨Spring MVCä¸­çš„æ‹¦æˆªå™¨ï¼Œå°±éœ€è¦å¯¹æ‹¦æˆªå™¨ç±»è¿›è¡Œå®šä¹‰å’Œé…ç½®ã€‚</p>
<p><strong>é€šè¿‡å®ç°HandlerInterceptoræ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// return true æ”¾è¡Œ</span></span><br><span class="line">    <span class="comment">// return false æ‹¦æˆª</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰æ‹¦æˆªå™¨å®ç°äº†HandlerInterceptoræ¥å£ï¼Œå¹¶å®ç°äº†æ¥å£ä¸­çš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>preHandle()
æ–¹æ³•ï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ§åˆ¶å™¨æ–¹æ³•å‰æ‰§è¡Œï¼Œå…¶è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦ä¸­æ–­åç»­æ“ä½œã€‚å½“å…¶è¿”å›å€¼ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºç»§ç»­å‘ä¸‹æ‰§è¡Œï¼›
å½“å…¶è¿”å›å€¼ä¸ºfalseæ—¶ï¼Œä¼šä¸­æ–­åç»­çš„æ‰€æœ‰æ“ä½œï¼ˆåŒ…æ‹¬è°ƒç”¨ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨å’Œæ§åˆ¶å™¨ç±»ä¸­çš„æ–¹æ³•æ‰§è¡Œç­‰ï¼‰ã€‚</li>
<li>postHandle()æ–¹æ³•ï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨ä¹‹åï¼Œä¸”è§£æè§†å›¾ä¹‹å‰æ‰§è¡Œã€‚å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å¯¹è¯·æ±‚åŸŸä¸­çš„æ¨¡å‹å’Œè§†å›¾åšå‡ºè¿›ä¸€æ­¥çš„ä¿®æ”¹ã€‚</li>
<li>afterCompletion()æ–¹æ³•ï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ•´ä¸ªè¯·æ±‚å®Œæˆï¼Œå³è§†å›¾æ¸²æŸ“ç»“æŸä¹‹åæ‰§è¡Œã€‚å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å®ç°ä¸€äº›èµ„æºæ¸…ç†ã€è®°å½•æ—¥å¿—ä¿¡æ¯ç­‰å·¥ä½œã€‚</li>
</ul>
<p><strong>é…ç½®</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ä½œç”¨çš„è·¯å¾„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>path çš„å±æ€§å€¼â€œ/**â€ è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è·¯å¾„ï¼Œâ€œ/helloâ€ è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰ä»¥ â€œ/helloâ€
ç»“å°¾çš„è·¯å¾„ã€‚</p>
<p><strong>æ³¨æ„ï¼š<mvc:interceptor>ä¸­çš„å­å…ƒç´ å¿…é¡»æŒ‰ç…§ä¸Šè¿°ä»£ç ä¸­çš„é…ç½®é¡ºåºè¿›è¡Œç¼–å†™ï¼Œå³<mvc:mapping>
<mvc:exclude-mapping> <bean>ï¼Œå¦åˆ™æ–‡ä»¶ä¼šæŠ¥é”™ã€‚</strong></p>
<h1 id="æ–‡ä»¶ä¸Šä¼ ä¸‹è½½">æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</h1>
<h2 id="ä¸Šä¼ ">ä¸Šä¼ </h2>
<p><strong>å¯¼åŒ…</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>é…ç½®</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–‡ä»¶ä¸Šä¼  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼–ç æ ¼å¼ä¸ JSP çš„ PageEncoding å±æ€§ä¸€è‡´ é»˜è®¤ä¸º ISO-8859-1 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSizePerFile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242880&quot;</span>/&gt;</span><span class="comment">&lt;!--5M--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>å‰ç«¯</strong></p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;h3&gt;æ–‡ä»¶ä¸Šä¼ &lt;/h3&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/upload&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span> method=<span class="string">&quot;post&quot;</span>  &gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span> /&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p><strong>åç«¯</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">if</span> (file.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;failed&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·å–åŸæ–‡ä»¶å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">    System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶åï¼š&quot;</span>+fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ä¸Šä¼ çš„ç›®å½•è·¯å¾„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getSession().getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">File</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">    <span class="keyword">if</span> (!filePath.exists())&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºç›®å½•æˆ–å­ç›®å½•</span></span><br><span class="line">        filePath.mkdirs();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;ä¸Šä¼ ä¿å­˜åœ°å€ï¼š&quot;</span>+filePath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// InputStream in = file.getInputStream() ;</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// OutputStream out = new FileOutputStream(new File(filePath,fileName)) ;</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// byte[] bs = new byte[1024];</span></span><br><span class="line">    <span class="comment">// int len = -1;</span></span><br><span class="line">    <span class="comment">// while(( len = in.read(bs)) !=-1 ) &#123;</span></span><br><span class="line">    <span class="comment">//     out.write(bs, 0, len);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// out.close();</span></span><br><span class="line">    <span class="comment">// in.close();</span></span><br><span class="line"></span><br><span class="line">    file.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(filePath+<span class="string">&quot;/&quot;</span>+fileName));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‹è½½">ä¸‹è½½</h2>
<p><strong>å‰ç«¯</strong></p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;h3&gt;æ–‡ä»¶ä¸‹è½½&lt;/h3&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/download&quot;</span>&gt;ä¸‹è½½&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<p><strong>åç«¯</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">download</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">    String fileName=<span class="string">&quot;wnhyang.jpg&quot;</span>;</span><br><span class="line">    <span class="comment">//1ã€è®¾ç½®response å“åº”å¤´</span></span><br><span class="line">    response.reset();</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    response.setContentType(<span class="string">&quot;multipart/form-data&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,</span><br><span class="line">            <span class="string">&quot;attachment;fileName=&quot;</span>+ URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path,fileName);</span><br><span class="line">    <span class="comment">//2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span></span><br><span class="line">    InputStream in=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">    <span class="comment">//3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line"></span><br><span class="line">    <span class="type">byte</span>[] bs = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(( len = in.read(bs)) !=-<span class="number">1</span> ) &#123;</span><br><span class="line">        out.write(bs, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    out.close();</span><br><span class="line">    in.close();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„">æ³¨æ„</h2>
<p>å°†ä¹‹å‰ä¾èµ–æ”¹äº†ï¼Œå› ä¸ºåªæœ‰ servlet-api 3ä»¥ä¸Šæ‰æœ‰
getServletContext()æ–¹æ³•</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>Sa-Tokenç™»å½•è¯¦è§£</title>
    <url>/article/883fd0a4.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>ç»§ç»­ä¸Šæ–‡<a
href="https://www.yuque.com/wnh/share/tcn3k9nizk9u7855">Sa-Tokenç™»å½•pre</a>ï¼Œæœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œå°±å¯ä»¥å®Œæ•´çš„äº†è§£<code>satoken</code>çš„ç™»å½•æµç¨‹äº†ã€‚</p>
<h1 id="é¡¹ç›®å¯åŠ¨">é¡¹ç›®å¯åŠ¨</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706270541534.webp"
alt="1706270541534" />
<figcaption aria-hidden="true">1706270541534</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°<code>satoken</code>çš„ä¸€äº›é…ç½®å’Œç»„ä»¶éƒ½å·²ç»æ³¨å…¥ï¼Œè¿™ä¸ªæ—¥å¿—æ˜¯æ€ä¹ˆåšçš„ï¼Ÿä¸‹æ¬¡å¯ä»¥è®²ä¸€ä¸‹ï¼Œä½¿ç”¨çš„æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
<h1 id="login">login</h1>
<p>ä¸€å¼€å§‹æˆ‘è¿˜æƒ³ç›´æ¥ä»æºç è§’åº¦æ¥çš„ï¼Œå‘ç°ä¸å¤ªåˆé€‚ï¼Œè¿˜æ˜¯ç»“åˆé¡¹ç›®<code>debug</code>å§ï¼</p>
<p>å‰é¢ä¸šåŠ¡ç™»å½•ç›´æ¥è¿‡ï¼Œåˆ°<code>satoken</code>ç™»å½•ã€‚</p>
<span id="more"></span>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706430133588.webp"
alt="1706430133588" />
<figcaption aria-hidden="true">1706430133588</figcaption>
</figure>
<p><code>StpUtil</code>çš„æ‰€æœ‰<code>login</code>é‡è½½æ–¹æ³•æœ€åå½’ç»“äº<code>StpLogic</code>çš„<code>public void login(Object id, SaLoginModel loginModel)</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706430214464.webp"
alt="1706430214464" />
<figcaption aria-hidden="true">1706430214464</figcaption>
</figure>
<p><code>SaLoginModel</code>å†³å®šç™»å½•çš„ä¸€äº›ç»†èŠ‚ï¼Œç™»å½•è®¾å¤‡ã€æ˜¯å¦æŒä¹…åŒ–<code>Cookie</code>ã€æŒ‡å®šæ­¤æ¬¡ç™»å½•<code>token</code>æœ‰æ•ˆæœŸã€æ­¤æ¬¡<code>token</code>æœ€ä½æ´»è·ƒé¢‘ç‡ç­‰ç­‰ã€‚</p>
<h1 id="åˆ›å»ºä¼šè¯">1ã€åˆ›å»ºä¼šè¯</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºæŒ‡å®šè´¦å· id çš„ç™»å½•ä¼šè¯æ•°æ®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id è´¦å·idï¼Œå»ºè®®çš„ç±»å‹ï¼šï¼ˆlong | int | Stringï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginModel æ­¤æ¬¡ç™»å½•çš„å‚æ•°Model </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¿”å›ä¼šè¯ä»¤ç‰Œ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">createLoginSession</span><span class="params">(Object id, SaLoginModel loginModel)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€å…ˆæ£€æŸ¥ä¸€ä¸‹ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">    checkLoginArgs(id, loginModel);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2ã€åˆå§‹åŒ– loginModel ï¼Œç»™ä¸€äº›å‚æ•°è¡¥ä¸Šé»˜è®¤å€¼</span></span><br><span class="line">    <span class="type">SaTokenConfig</span> <span class="variable">config</span> <span class="operator">=</span> getConfigOrGlobal();</span><br><span class="line">    loginModel.build(config);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3ã€ç»™è¿™ä¸ªè´¦å·åˆ†é…ä¸€ä¸ªå¯ç”¨çš„ token</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">tokenValue</span> <span class="operator">=</span> distUsableToken(id, loginModel);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4ã€è·å–æ­¤è´¦å·çš„ Account-Session , ç»­æœŸ</span></span><br><span class="line">    <span class="type">SaSession</span> <span class="variable">session</span> <span class="operator">=</span> getSessionByLoginId(id, <span class="literal">true</span>);</span><br><span class="line">    session.updateMinTimeout(loginModel.getTimeout());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 5ã€åœ¨ Account-Session ä¸Šè®°å½•æœ¬æ¬¡ç™»å½•çš„ token ç­¾å</span></span><br><span class="line">    <span class="type">TokenSign</span> <span class="variable">tokenSign</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TokenSign</span>(tokenValue, loginModel.getDeviceOrDefault(), loginModel.getTokenSignTag());</span><br><span class="line">    session.addTokenSign(tokenSign);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6ã€ä¿å­˜ token -&gt; id çš„æ˜ å°„å…³ç³»ï¼Œæ–¹ä¾¿æ—¥åæ ¹æ® token æ‰¾è´¦å· id</span></span><br><span class="line">    saveTokenToIdMapping(tokenValue, id, loginModel.getTimeout());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7ã€å†™å…¥è¿™ä¸ª token çš„æœ€åæ´»è·ƒæ—¶é—´ token-last-active</span></span><br><span class="line">    <span class="keyword">if</span>(isOpenCheckActiveTimeout()) &#123;</span><br><span class="line">        setLastActiveToNow(tokenValue, loginModel.getActiveTimeout(), loginModel.getTimeoutOrGlobalConfig());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 8ã€$$ å‘å¸ƒå…¨å±€äº‹ä»¶ï¼šè´¦å· xxx ç™»å½•æˆåŠŸ</span></span><br><span class="line">    SaTokenEventCenter.doLogin(loginType, id, tokenValue, loginModel);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 9ã€æ£€æŸ¥æ­¤è´¦å·ä¼šè¯æ•°é‡æ˜¯å¦è¶…å‡ºæœ€å¤§å€¼ï¼Œå¦‚æœè¶…è¿‡ï¼Œåˆ™æŒ‰ç…§ç™»å½•æ—¶é—´é¡ºåºï¼ŒæŠŠæœ€å¼€å§‹ç™»å½•çš„ç»™æ³¨é”€æ‰</span></span><br><span class="line">    <span class="keyword">if</span>(config.getMaxLoginCount() != -<span class="number">1</span>) &#123;</span><br><span class="line">        logoutByMaxLoginCount(id, session, <span class="literal">null</span>, config.getMaxLoginCount());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 10ã€ä¸€åˆ‡å¤„ç†å®Œæ¯•ï¼Œè¿”å›ä¼šè¯å‡­è¯ token</span></span><br><span class="line">    <span class="keyword">return</span> tokenValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç æ³¨é‡Šå·²ç»ç›¸å½“æ¸…æ™°äº†ï¼Œæ¥ä¸‹æ¥å°±ä¾æ­¤æ¥å§ã€‚</p>
<h2 id="æ£€æŸ¥å‚æ•°">1.1ã€æ£€æŸ¥å‚æ•°</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">checkLoginArgs</span><span class="params">(Object id, SaLoginModel loginModel)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€è´¦å· id ä¸èƒ½ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(SaFoxUtil.isEmpty(id)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SaTokenException</span>(<span class="string">&quot;loginId ä¸èƒ½ä¸ºç©º&quot;</span>).setCode(SaErrorCode.CODE_11002);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€è´¦å· id ä¸èƒ½æ˜¯å¼‚å¸¸æ ‡è®°å€¼</span></span><br><span class="line">    <span class="keyword">if</span>(NotLoginException.ABNORMAL_LIST.contains(id.toString())) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SaTokenException</span>(<span class="string">&quot;loginId ä¸èƒ½ä¸ºä»¥ä¸‹å€¼ï¼š&quot;</span> + NotLoginException.ABNORMAL_LIST);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3ã€è´¦å· id ä¸èƒ½æ˜¯å¤æ‚ç±»å‹</span></span><br><span class="line">    <span class="keyword">if</span>( ! SaFoxUtil.isBasicType(id.getClass())) &#123;</span><br><span class="line">        SaManager.log.warn(<span class="string">&quot;loginId åº”è¯¥ä¸ºç®€å•ç±»å‹ï¼Œä¾‹å¦‚ï¼šString | int | longï¼Œä¸æ¨èä½¿ç”¨å¤æ‚ç±»å‹ï¼š&quot;</span> + id.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4ã€åˆ¤æ–­å½“å‰ StpLogic æ˜¯å¦æ”¯æŒ extra æ‰©å±•å‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span>( ! isSupportExtra()) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸æ”¯æŒï¼Œå¼€å‘è€…å´ä¼ å…¥äº† extra æ‰©å±•å‚æ•°ï¼Œé‚£ä¹ˆå°±æ‰“å°è­¦å‘Šä¿¡æ¯</span></span><br><span class="line">        Map&lt;String, Object&gt; extraData = loginModel.getExtraData();</span><br><span class="line">        <span class="keyword">if</span>(extraData != <span class="literal">null</span> &amp;&amp; extraData.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            SaManager.log.warn(<span class="string">&quot;å½“å‰ StpLogic ä¸æ”¯æŒ extra æ‰©å±•å‚æ•°æ¨¡å¼ï¼Œä¼ å…¥çš„ extra å‚æ•°å°†è¢«å¿½ç•¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5ã€å¦‚æœå…¨å±€é…ç½®æœªå¯åŠ¨åŠ¨æ€ activeTimeout åŠŸèƒ½ï¼Œä½†æ˜¯æ­¤æ¬¡ç™»å½•å´ä¼ å…¥äº† activeTimeout å‚æ•°ï¼Œé‚£ä¹ˆå°±æ‰“å°è­¦å‘Šä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span>( ! getConfigOrGlobal().getDynamicActiveTimeout() &amp;&amp; loginModel.getActiveTimeout() != <span class="literal">null</span>) &#123;</span><br><span class="line">        SaManager.log.warn(<span class="string">&quot;å½“å‰å…¨å±€é…ç½®æœªå¼€å¯åŠ¨æ€ activeTimeout åŠŸèƒ½ï¼Œä¼ å…¥çš„ activeTimeout å‚æ•°å°†è¢«å¿½ç•¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1ã€æ£€æŸ¥ç©º</p>
<p>2ã€å¯¹è´¦å·<code>id</code>æ£€æŸ¥ï¼Œå¼‚å¸¸æƒ…å†µæœ‰ä¸‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706365480421.webp"
alt="1706365480421" />
<figcaption aria-hidden="true">1706365480421</figcaption>
</figure>
<p>3ã€è´¦å·<code>id</code>ä¸èƒ½æ˜¯é™¤<code>8</code>å¤§åŸºæœ¬åŸºæœ¬æ•°æ®ç±»å‹ã€<code>8</code>å¤§åŒ…è£…ç±»ã€<code>String</code>ä¹‹å¤–çš„å¤æ‚ç±»å‹ã€‚</p>
<p>4ã€æ˜¯å¦æ”¯æŒæ‰©å±•å‚æ•°æ˜¯åœ¨<code>StpLogic</code>å±‚é¢çš„ï¼Œä¸æ˜¯å…¨å±€é…ç½®ï¼Œé»˜è®¤ä¸é›†æˆ<code>jwt</code>æ—¶æ˜¯ä¸æ”¯æŒæ‰©å±•å‚æ•°çš„ã€‚</p>
<p>5ã€é¡¹ç›®å¯åŠ¨æ—¥å¿—æ‰“å°çš„å…¨å±€é…ç½®<code>dynamicActiveTimeout=false</code>ï¼Œæ‰€ä»¥ç™»å½•æ—¶ä¼šæœ‰ä»¥ä¸‹æ—¥å¿—ã€‚</p>
<p>SA [WARN] --&gt;: å½“å‰å…¨å±€é…ç½®æœªå¼€å¯åŠ¨æ€ activeTimeout åŠŸèƒ½ï¼Œä¼ å…¥çš„
activeTimeout å‚æ•°å°†è¢«å¿½ç•¥</p>
<h2 id="åˆå§‹åŒ–loginmodel">1.2ã€åˆå§‹åŒ–loginModel</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2ã€åˆå§‹åŒ– loginModel ï¼Œç»™ä¸€äº›å‚æ•°è¡¥ä¸Šé»˜è®¤å€¼</span></span><br><span class="line"><span class="type">SaTokenConfig</span> <span class="variable">config</span> <span class="operator">=</span> getConfigOrGlobal();</span><br><span class="line">loginModel.build(config);</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å…¨å±€é…ç½®è¡¥å……<code>loginModel</code>ï¼Œå¦‚ï¼š<code>token</code>æœ‰æ•ˆæœŸï¼Œç™»å½•åæ˜¯å¦å†™å…¥å“åº”å¤´ã€‚</p>
<p>æ ¹æ®å°±è¿‘åŸåˆ™ï¼Œå…¨å±€é…ç½®ä¼˜å…ˆçº§ä¸å¦‚è‡ªå®šä¹‰<code>loginModel</code>ï¼Œè¿™ä¸ªè¦çŸ¥é“ã€‚</p>
<p>å½“ä¸‹é…ç½®ï¼Œé»˜è®¤<code>token</code>æœ‰æ•ˆæœŸ1å°æ—¶ï¼Œä¸å†™å…¥å“åº”å¤´ã€‚</p>
<h2 id="è´¦å·åˆ†é…å¯ç”¨token">1.3ã€è´¦å·åˆ†é…å¯ç”¨token</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3ã€ç»™è¿™ä¸ªè´¦å·åˆ†é…ä¸€ä¸ªå¯ç”¨çš„ token</span></span><br><span class="line"><span class="type">String</span> <span class="variable">tokenValue</span> <span class="operator">=</span> distUsableToken(id, loginModel);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ³¨é‡Šç›¸å½“ä¸¥è°¨ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> String <span class="title function_">distUsableToken</span><span class="params">(Object id, SaLoginModel loginModel)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€è·å–å…¨å±€é…ç½®çš„ isConcurrent å‚æ•°</span></span><br><span class="line">    <span class="comment">//    å¦‚æœé…ç½®ä¸ºï¼šä¸å…è®¸ä¸€ä¸ªè´¦å·å¤šåœ°åŒæ—¶ç™»å½•ï¼Œåˆ™éœ€è¦å…ˆå°†è¿™ä¸ªè´¦å·çš„å†å²ç™»å½•ä¼šè¯æ ‡è®°ä¸ºï¼šè¢«é¡¶ä¸‹çº¿</span></span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">isConcurrent</span> <span class="operator">=</span> getConfigOrGlobal().getIsConcurrent();</span><br><span class="line">    <span class="keyword">if</span>( ! isConcurrent) &#123;</span><br><span class="line">        replaced(id, loginModel.getDevice());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2ã€å¦‚æœè°ƒç”¨è€…é¢„å®šäº†è¦ç”Ÿæˆçš„ tokenï¼Œåˆ™ç›´æ¥è¿”å›è¿™ä¸ªé¢„å®šçš„å€¼ï¼Œæ¡†æ¶æ— éœ€å†æ“å¿ƒäº†</span></span><br><span class="line">    <span class="keyword">if</span>(SaFoxUtil.isNotEmpty(loginModel.getToken())) &#123;</span><br><span class="line">        <span class="keyword">return</span> loginModel.getToken();</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3ã€åªæœ‰åœ¨é…ç½®äº† [ å…è®¸ä¸€ä¸ªè´¦å·å¤šåœ°åŒæ—¶ç™»å½• ] æ—¶ï¼Œæ‰å°è¯•å¤ç”¨æ—§ tokenï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦åœ°æŸ¥è¯¢ï¼ŒèŠ‚çœå¼€é”€</span></span><br><span class="line">    <span class="keyword">if</span>(isConcurrent) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.1ã€çœ‹çœ‹å…¨å±€é…ç½®çš„ IsShare å‚æ•°ï¼Œé…ç½®ä¸º true æ‰æ˜¯å…è®¸å¤ç”¨æ—§ token</span></span><br><span class="line">        <span class="keyword">if</span>(getConfigOfIsShare()) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ ¹æ® è´¦å·id + è®¾å¤‡ç±»å‹ï¼Œå°è¯•è·å–æ—§çš„ token</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenValue</span> <span class="operator">=</span> getTokenValueByLoginId(id, loginModel.getDeviceOrDefault());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœæœ‰å€¼ï¼Œé‚£å°±ç›´æ¥å¤ç”¨</span></span><br><span class="line">            <span class="keyword">if</span>(SaFoxUtil.isNotEmpty(tokenValue)) &#123;</span><br><span class="line">                <span class="keyword">return</span> tokenValue;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡å€¼ï¼Œé‚£è¿˜æ˜¯è¦ç»§ç»­å¾€ä¸‹èµ°ï¼Œå°è¯•æ–°å»º token</span></span><br><span class="line">            <span class="comment">// â†“â†“â†“</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4ã€å¦‚æœä»£ç èµ°åˆ°æ­¤å¤„ï¼Œè¯´æ˜æœªèƒ½æˆåŠŸå¤ç”¨æ—§ tokenï¼Œéœ€è¦æ ¹æ®ç®—æ³•æ–°å»º token</span></span><br><span class="line">    <span class="keyword">return</span> SaStrategy.instance.generateUniqueToken.execute(</span><br><span class="line">            <span class="string">&quot;token&quot;</span>,</span><br><span class="line">            getConfigOfMaxTryTimes(),</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> createTokenValue(id, loginModel.getDeviceOrDefault(), loginModel.getTimeout(), loginModel.getExtraData());</span><br><span class="line">            &#125;,</span><br><span class="line">            tokenValue -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> getLoginIdNotHandle(tokenValue) == <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŒç«¯äº’æ–¥ç™»å½•">åŒç«¯äº’æ–¥ç™»å½•</h3>
<p>å…¨å±€é…ç½®çš„æ˜¯ä¸å…è®¸åŒä¸€ç”¨æˆ·å¹¶å‘ç™»å½•ï¼ˆæŒ¤æ‰æ—§ç™»å½•ï¼‰ï¼Œæ³¨æ„ï¼æŒ¤æ‰æ—§ç™»å½•åªèƒ½æŒ¤æ‰åŒè®¾å¤‡ç™»å½•ï¼Œå°±æ˜¯æ‰‹æœºæŒ¤æ‰æ‰‹æœºç™»å½•ï¼Œä¸ä¼šæŒ¤æ‰PCç™»å½•ã€‚æ‰€ä»¥æ–¹æ³•æ˜¯è¿™æ ·çš„<code>replaced(Object loginId, String device)</code>ã€‚è¿™ä¹Ÿå°±æ˜¯å®˜ç½‘çš„<a
href="https://sa-token.cc/doc.html#/up/mutex-login">åŒç«¯äº’æ–¥ç™»å½•</a>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706430463435.webp"
alt="1706430463435" />
<figcaption aria-hidden="true">1706430463435</figcaption>
</figure>
<p>å› ä¸ºæˆ‘æ˜¯é…ç½®äº†ä¸å…è®¸åŒç«¯ç™»å½•<code>is-concurrent: false</code>ï¼Œé‚£ä¹ˆè¿›å…¥<code>replaced</code>æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¡¶äººä¸‹çº¿ï¼Œæ ¹æ®è´¦å·id å’Œ è®¾å¤‡ç±»å‹ </span></span><br><span class="line"><span class="comment"> * &lt;p&gt; å½“å¯¹æ–¹å†æ¬¡è®¿é—®ç³»ç»Ÿæ—¶ï¼Œä¼šæŠ›å‡º NotLoginException å¼‚å¸¸ï¼Œåœºæ™¯å€¼=-4 &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginId è´¦å·id </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> device è®¾å¤‡ç±»å‹ ï¼ˆå¡« null ä»£è¡¨é¡¶æ›¿è¯¥è´¦å·çš„æ‰€æœ‰è®¾å¤‡ç±»å‹ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replaced</span><span class="params">(Object loginId, String device)</span> &#123;</span><br><span class="line">    <span class="comment">// 1ã€è·å–æ­¤è´¦å·çš„ Account-Sessionï¼Œä¸Šé¢è®°å½•äº†æ­¤è´¦å·çš„æ‰€æœ‰ç™»å½•å®¢æˆ·ç«¯æ•°æ®</span></span><br><span class="line">    <span class="type">SaSession</span> <span class="variable">session</span> <span class="operator">=</span> getSessionByLoginId(loginId, <span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">if</span>(session != <span class="literal">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2ã€éå†æ­¤è´¦å·æ‰€æœ‰ä»è¿™ä¸ª device è®¾å¤‡ä¸Šç™»å½•çš„å®¢æˆ·ç«¯ï¼Œæ¸…é™¤ç›¸å…³æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (TokenSign tokenSign: session.getTokenSignListByDevice(device)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.1ã€è·å–æ­¤å®¢æˆ·ç«¯çš„ token å€¼</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenValue</span> <span class="operator">=</span> tokenSign.getValue();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.2ã€ä» Account-Session ä¸Šæ¸…é™¤ token ç­¾å</span></span><br><span class="line">            session.removeTokenSign(tokenValue);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.3ã€æ¸…é™¤è¿™ä¸ª token çš„æœ€åæ´»è·ƒæ—¶é—´è®°å½•</span></span><br><span class="line">            <span class="keyword">if</span>(isOpenCheckActiveTimeout()) &#123;</span><br><span class="line">                clearLastActive(tokenValue);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.4ã€å°†æ­¤ token æ ‡è®°ä¸ºï¼šå·²è¢«é¡¶ä¸‹çº¿</span></span><br><span class="line">            updateTokenToIdMapping(tokenValue, NotLoginException.BE_REPLACED);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.5ã€æ­¤å¤„ä¸éœ€è¦æ¸…é™¤å®ƒçš„ Token-Session å¯¹è±¡</span></span><br><span class="line">            <span class="comment">// deleteTokenSession(tokenValue);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.6ã€$$ å‘å¸ƒäº‹ä»¶ï¼šxx è´¦å·çš„ xx å®¢æˆ·ç«¯æ³¨é”€äº†</span></span><br><span class="line">            SaTokenEventCenter.doReplaced(loginType, loginId, tokenValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3ã€å› ä¸ºè°ƒç”¨é¡¶æ›¿ä¸‹çº¿æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨æ–°å®¢æˆ·ç«¯æ­£åœ¨ç™»å½•ï¼Œæ‰€ä»¥æ­¤å¤„ä¸éœ€è¦æ¸…é™¤è¯¥è´¦å·çš„ Account-Session</span></span><br><span class="line">        <span class="comment">// session.logoutByTokenSignCountToZero();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>getSessionByLoginId</code>æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹æ³•ï¼Œæœ‰å¾ˆå¤šå¼•ç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * è·å–æŒ‡å®šè´¦å· id çš„ Account-Session, å¦‚æœè¯¥ SaSession å°šæœªåˆ›å»ºï¼ŒisCreate=æ˜¯å¦æ–°å»ºå¹¶è¿”å›</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginId è´¦å·id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> isCreate æ˜¯å¦æ–°å»º</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> SaSession å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> SaSession <span class="title function_">getSessionByLoginId</span><span class="params">(Object loginId, <span class="type">boolean</span> isCreate)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getSessionBySessionId(splicingKeySession(loginId), isCreate, session -&gt; &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œæ˜¯è¯¥ Account-Session é¦–æ¬¡åˆ›å»ºæ—¶æ‰ä¼šè¢«æ‰§è¡Œçš„æ–¹æ³•ï¼š</span></span><br><span class="line">        <span class="comment">// 		è®¾å®šè¿™ä¸ª SaSession çš„å„ç§åŸºç¡€ä¿¡æ¯ï¼šç±»å‹ã€è´¦å·ä½“ç³»ã€è´¦å·id</span></span><br><span class="line">        session.setType(SaTokenConsts.SESSION_TYPE__ACCOUNT);</span><br><span class="line">        session.setLoginType(getLoginType());</span><br><span class="line">        session.setLoginId(loginId);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šé‡è¦çš„æ˜¯å…¶é‡è½½æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * è·å–æŒ‡å®š key çš„ SaSession, å¦‚æœè¯¥ SaSession å°šæœªåˆ›å»ºï¼ŒisCreate = æ˜¯å¦ç«‹å³æ–°å»ºå¹¶è¿”å›</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sessionId SessionId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> isCreate æ˜¯å¦æ–°å»º</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> appendOperation å¦‚æœè¿™ä¸ª SaSession æ˜¯æ–°å»ºçš„ï¼Œåˆ™è¦è¿½åŠ æ‰§è¡Œçš„åŠ¨ä½œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Sessionå¯¹è±¡ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> SaSession <span class="title function_">getSessionBySessionId</span><span class="params">(String sessionId, <span class="type">boolean</span> isCreate, Consumer&lt;SaSession&gt; appendOperation)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæä¾›çš„ sessionId ä¸º nullï¼Œåˆ™ç›´æ¥è¿”å› null</span></span><br><span class="line">    <span class="keyword">if</span>(SaFoxUtil.isEmpty(sessionId)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ˆæ£€æŸ¥è¿™ä¸ª SaSession æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ä¸” isCreate=trueï¼Œåˆ™æ–°å»ºå¹¶è¿”å›</span></span><br><span class="line">    <span class="type">SaSession</span> <span class="variable">session</span> <span class="operator">=</span> getSaTokenDao().getSession(sessionId);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(session == <span class="literal">null</span> &amp;&amp; isCreate) &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè¿™ä¸ª SaSession</span></span><br><span class="line">        session = SaStrategy.instance.createSession.apply(sessionId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿½åŠ æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span>(appendOperation != <span class="literal">null</span>) &#123;</span><br><span class="line">            appendOperation.accept(session);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†è¿™ä¸ª SaSession å…¥åº“</span></span><br><span class="line">        getSaTokenDao().setSession(session, getConfigOrGlobal().getTimeout());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> session;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•è®¾è®¡çš„å°±æŒºæœ‰æ„æ€ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥å†³å®šæ˜¯å¦åˆ›å»ºæ–°çš„<code>session</code>ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å››å¤§å‡½æ•°å¼æ¥å£ä¹‹ä¸€çš„æ¶ˆè´¹è€…ã€‚<code>Java8</code>å‡½æ•°å¼æ¥å£ã€<code>lambada</code>ã€<code>stream</code>éƒ½åº”è¯¥äº†è§£çš„ã€‚</p>
<p>å¦‚ä¸‹æ–¹æ³•å¯çŸ¥ï¼Œåœ¨æŸ¥ä¸åˆ°<code>sessionId</code>çš„<code>session</code>æ—¶ä½¿ç”¨<code>SaStrategy</code>ç±»æ¥åˆ›å»º<code>session</code>ï¼Œè¿™ä¸ª<code>SaStrategy</code>ç±»å®é™…ä¸Šæ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šç­–ç•¥æ–¹æ³•ï¼Œè¿™ä¸ªå¯ä»¥ä¸‹æ¬¡å•ç‹¬æ‹å‡ºæ¥è®²çš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706430845654.webp"
alt="1706430845654" />
<figcaption aria-hidden="true">1706430845654</figcaption>
</figure>
<p>å› ä¸ºè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ç™»å½•ï¼Œ<code>sessionKey</code>æ˜¯è¿™æ ·çš„<code>Authorization:login:session:1</code>å¹¶æ²¡æœ‰åœ¨<code>redis</code>ï¼Œè€Œä¸”è¿™æ¬¡ä»…ä»…æ˜¯æŸ¥çœ‹æ˜¯å¦å·²æœ‰<code>session</code>ï¼Œæ‰€ä»¥ä¸ç”¨åˆ›å»ºã€‚</p>
<p>é‚£ä¹ˆ<code>replaced</code>å°±è¿‡äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240124/1706431274485.webp"
alt="1706431274485" />
<figcaption aria-hidden="true">1706431274485</figcaption>
</figure>
<h3 id="æ–°å»ºtoken">æ–°å»ºtoken</h3>
<p>æœ¬æ¬¡æœªé¢„å®š<code>token</code>å€¼ï¼Œè€Œä¸”æ˜¯åŒç«¯äº’æ–¥ç™»å½•ï¼Œæ‰€ä»¥ç›´æ¥åˆ°æ–°å»º<code>token</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706431701776.webp"
alt="1706431701776" />
<figcaption aria-hidden="true">1706431701776</figcaption>
</figure>
<p><code>createTokenValue</code>åˆæ˜¯<code>SaStrategy</code>çš„ä¸€ä¸ªç­–ç•¥ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706432438324.webp"
alt="1706432438324" />
<figcaption aria-hidden="true">1706432438324</figcaption>
</figure>
<p>è¿˜è®°å¾—satoken<a
href="https://sa-token.cc/doc.html#/up/token-style?id=%e8%87%aa%e5%ae%9a%e4%b9%89-token-%e9%a3%8e%e6%a0%bc">è‡ªå®šä¹‰
Token é£æ ¼</a>å—ï¼Ÿå°±ä½“ç°åœ¨è¿™é‡Œäº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240201/1706756081342.webp"
alt="1706756081342" />
<figcaption aria-hidden="true">1706756081342</figcaption>
</figure>
<p><code>getLoginIdNotHandle</code>è¿™é‡Œé€šè¿‡æ‹¼æ¥<code>tokenKey</code>ï¼ŒæŸ¥<code>redis</code>æ£€æŸ¥<code>token</code>æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œæ¥ä¿è¯å”¯ä¸€çš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240201/1706756265354.webp"
alt="1706756265354" />
<figcaption aria-hidden="true">1706756265354</figcaption>
</figure>
<p><code>generateUniqueToken</code>ä¹Ÿæ˜¯<code>SaStrategy</code>çš„ä¸€ä¸ªç­–ç•¥ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706432183757.webp"
alt="1706432183757" />
<figcaption aria-hidden="true">1706432183757</figcaption>
</figure>
<p>å…¶å‡½æ•°å¼å®šä¹‰æ˜¯è¿™æ ·çš„</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706431807597.webp"
alt="1706431807597" />
<figcaption aria-hidden="true">1706431807597</figcaption>
</figure>
<p>æ ¹æ®ä¼ å…¥çš„å‚æ•°ç”Ÿæˆå¦‚ä¸‹ä¸€ä¸ª<code>token</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706432183757.webp"
alt="1706432183757" />
<figcaption aria-hidden="true">1706432183757</figcaption>
</figure>
<h2 id="è·å–account-sessionç»­æœŸ">1.4ã€è·å–Account-Sessionï¼Œç»­æœŸ</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4ã€è·å–æ­¤è´¦å·çš„ Account-Session , ç»­æœŸ</span></span><br><span class="line"><span class="type">SaSession</span> <span class="variable">session</span> <span class="operator">=</span> getSessionByLoginId(id, <span class="literal">true</span>);</span><br><span class="line">session.updateMinTimeout(loginModel.getTimeout());</span><br></pre></td></tr></table></figure>
<p>å‘ç°æ²¡ï¼Ÿåˆæ˜¯<code>getSessionByLoginId</code>ï¼Œä¸è¿‡è¿™æ¬¡ä¼ å…¥<code>isCreate=true</code>ã€‚</p>
<h3 id="åˆ›å»ºsession">åˆ›å»ºsession</h3>
<p>è¿™æ¬¡éœ€è¦åˆ›å»º<code>session</code>äº†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706433791024.webp"
alt="1706433791024" />
<figcaption aria-hidden="true">1706433791024</figcaption>
</figure>
<p>åˆ›å»º<code>session</code>ç­–ç•¥å¦‚ä¸‹ï¼Œå…¶å®å…¶ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ªå‘å¸ƒäº‹ä»¶çš„åŠ¨ä½œ</p>
<p>SA [INFO] --&gt;: SaSession [Authorization:login:session:1]
åˆ›å»ºæˆåŠŸ</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706433888100.webp"
alt="1706433888100" />
<figcaption aria-hidden="true">1706433888100</figcaption>
</figure>
<h3 id="ç»­æœŸ">ç»­æœŸ</h3>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706434158075.webp"
alt="1706434158075" />
<figcaption aria-hidden="true">1706434158075</figcaption>
</figure>
<h2
id="åœ¨account-sessionä¸Šè®°å½•æœ¬æ¬¡ç™»å½•token">1.5ã€åœ¨Account-Sessionä¸Šè®°å½•æœ¬æ¬¡ç™»å½•token</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 5ã€åœ¨ Account-Session ä¸Šè®°å½•æœ¬æ¬¡ç™»å½•çš„ token ç­¾å</span></span><br><span class="line"><span class="type">TokenSign</span> <span class="variable">tokenSign</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TokenSign</span>(tokenValue, loginModel.getDeviceOrDefault(), loginModel.getTokenSignTag());</span><br><span class="line">session.addTokenSign(tokenSign);</span><br></pre></td></tr></table></figure>
<p>å‰é¢è®²è¿‡äº†<a
href="https://sa-token.cc/doc.html#/fun/session-model">Sa-Token ä¸­çš„
Sessionä¼šè¯
æ¨¡å‹è¯¦è§£</a>ï¼Œ<code>Account-Session</code>å½’å±è´¦å·çš„ï¼Œä¸€ä¸ªè´¦å·å¯ä»¥å­˜åœ¨å¤šä¸ª<code>token</code>ï¼Œè€Œæœ¬æ¬¡<code>token</code>å½“ç„¶ä¹Ÿæ˜¯å±äºè¿™ä¸ªè´¦å·ï¼Œæ‰€ä»¥å°†æ­¤<code>tokenSign</code>åŠ å…¥<code>Account-Session</code>ä¸­ï¼Œè¡¨ç¤ºè¿™ä¸ª<code>token</code>å½’å±äºåŒä¸€è´¦å·ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706434300989.webp"
alt="1706434300989" />
<figcaption aria-hidden="true">1706434300989</figcaption>
</figure>
<h2 id="ä¿å­˜token-idæ˜ å°„">1.6ã€ä¿å­˜token-idæ˜ å°„</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 6ã€ä¿å­˜ token -&gt; id çš„æ˜ å°„å…³ç³»ï¼Œæ–¹ä¾¿æ—¥åæ ¹æ® token æ‰¾è´¦å· id</span></span><br><span class="line">saveTokenToIdMapping(tokenValue, id, loginModel.getTimeout());</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹æ‹¼æ¥<code>redisKey</code>å­˜å…¥è´¦å·<code>id</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706435142961.webp"
alt="1706435142961" />
<figcaption aria-hidden="true">1706435142961</figcaption>
</figure>
<h2 id="å†™å…¥tokenæœ€åæ´»è·ƒæ—¶é—´">1.7ã€å†™å…¥tokenæœ€åæ´»è·ƒæ—¶é—´</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 7ã€å†™å…¥è¿™ä¸ª token çš„æœ€åæ´»è·ƒæ—¶é—´ token-last-active</span></span><br><span class="line"><span class="keyword">if</span>(isOpenCheckActiveTimeout()) &#123;</span><br><span class="line">    setLastActiveToNow(tokenValue, loginModel.getActiveTimeout(), loginModel.getTimeoutOrGlobalConfig());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706435233957.webp"
alt="1706435233957" />
<figcaption aria-hidden="true">1706435233957</figcaption>
</figure>
<h2 id="å‘å¸ƒå…¨å±€äº‹ä»¶">1.8ã€å‘å¸ƒå…¨å±€äº‹ä»¶</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 8ã€$$ å‘å¸ƒå…¨å±€äº‹ä»¶ï¼šè´¦å· xxx ç™»å½•æˆåŠŸ</span></span><br><span class="line">SaTokenEventCenter.doLogin(loginType, id, tokenValue, loginModel);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå¯ä»¥å†å¼€ä¸€ç¯‡ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
<h2 id="æ£€æŸ¥ä¼šè¯æ•°é‡">1.9ã€æ£€æŸ¥ä¼šè¯æ•°é‡</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 9ã€æ£€æŸ¥æ­¤è´¦å·ä¼šè¯æ•°é‡æ˜¯å¦è¶…å‡ºæœ€å¤§å€¼ï¼Œå¦‚æœè¶…è¿‡ï¼Œåˆ™æŒ‰ç…§ç™»å½•æ—¶é—´é¡ºåºï¼ŒæŠŠæœ€å¼€å§‹ç™»å½•çš„ç»™æ³¨é”€æ‰</span></span><br><span class="line"><span class="keyword">if</span>(config.getMaxLoginCount() != -<span class="number">1</span>) &#123;</span><br><span class="line">    logoutByMaxLoginCount(id, session, <span class="literal">null</span>, config.getMaxLoginCount());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•æ³¨è§£å¾ˆæ¸…æ™°äº†ï¼</p>
<p>å½“æˆ‘ä»¬è¦æ¸…é™¤ä¸€ä¸ª<code>token</code>æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥åšäº›ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logoutByMaxLoginCount</span><span class="params">(Object loginId, SaSession session, String device, <span class="type">int</span> maxLoginCount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€å¦‚æœè°ƒç”¨è€…æä¾›çš„  Account-Session å¯¹è±¡ä¸ºç©ºï¼Œåˆ™æˆ‘ä»¬å…ˆæ‰‹åŠ¨è·å–ä¸€ä¸‹</span></span><br><span class="line">    <span class="keyword">if</span>(session == <span class="literal">null</span>) &#123;</span><br><span class="line">        session = getSessionByLoginId(loginId, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(session == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€è·å–è¿™ä¸ªè´¦å·æŒ‡å®šè®¾å¤‡ç±»å‹ä¸‹çš„æ‰€æœ‰ç™»å½•å®¢æˆ·ç«¯</span></span><br><span class="line">    List&lt;TokenSign&gt; list = session.getTokenSignListByDevice(device);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3ã€æŒ‰ç…§ç™»å½•æ—¶é—´å€’å™ï¼Œè¶…è¿‡ maxLoginCount æ•°é‡çš„ï¼Œå…¨éƒ¨æ³¨é”€æ‰</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size() - maxLoginCount; i++) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.1ã€è·å–æ­¤å®¢æˆ·ç«¯çš„ token å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">tokenValue</span> <span class="operator">=</span> list.get(i).getValue();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.2ã€ä» Account-Session ä¸Šæ¸…é™¤ token ç­¾å</span></span><br><span class="line">        session.removeTokenSign(tokenValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.3ã€æ¸…é™¤è¿™ä¸ª token çš„æœ€åæ´»è·ƒæ—¶é—´è®°å½•</span></span><br><span class="line">        <span class="keyword">if</span>(isOpenCheckActiveTimeout()) &#123;</span><br><span class="line">            clearLastActive(tokenValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.4ã€æ¸…é™¤ token -&gt; id çš„æ˜ å°„å…³ç³»</span></span><br><span class="line">        deleteTokenToIdMapping(tokenValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.5ã€æ¸…é™¤è¿™ä¸ª token çš„ Token-Session å¯¹è±¡</span></span><br><span class="line">        deleteTokenSession(tokenValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.6ã€$$ å‘å¸ƒäº‹ä»¶ï¼šxx è´¦å·çš„ xx å®¢æˆ·ç«¯æ³¨é”€äº†</span></span><br><span class="line">        SaTokenEventCenter.doLogout(loginType, loginId, tokenValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4ã€å¦‚æœä»£ç èµ°åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œæ­¤è´¦å·å·²ç»æ²¡æœ‰å®¢æˆ·ç«¯åœ¨ç™»å½•äº†ï¼Œåˆ™ç›´æ¥æ³¨é”€æ‰è¿™ä¸ª Account-Session</span></span><br><span class="line">    session.logoutByTokenSignCountToZero();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿”å›ä¼šè¯å‡­è¯token">1.10ã€è¿”å›ä¼šè¯å‡­è¯token</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 10ã€ä¸€åˆ‡å¤„ç†å®Œæ¯•ï¼Œè¿”å›ä¼šè¯å‡­è¯ token</span></span><br><span class="line"><span class="keyword">return</span> tokenValue;</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ç»ˆäºåˆ›å»ºä¼šè¯ç»“æŸã€‚ã€‚ã€‚</p>
<h1 id="åœ¨å½“å‰å®¢æˆ·ç«¯æ³¨å…¥-token">2ã€åœ¨å½“å‰å®¢æˆ·ç«¯æ³¨å…¥ token</h1>
<p>å›åˆ°<code>login</code>çš„ç¬¬äºŒæ­¥<code>setTokenValue</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(Object id, SaLoginModel loginModel)</span> &#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºä¼šè¯ </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> createLoginSession(id, loginModel);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€åœ¨å½“å‰å®¢æˆ·ç«¯æ³¨å…¥ token</span></span><br><span class="line">    setTokenValue(token, loginModel);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹ï¼Œæ ¹æ®é…ç½®ï¼Œè®²<code>token</code>å†™å…¥<code>Storage</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706436634411.webp"
alt="1706436634411" />
<figcaption aria-hidden="true">1706436634411</figcaption>
</figure>
<p><code>SpringMVC</code>ç¯å¢ƒä¸‹ï¼Œå°±æ˜¯<code>SaStorageForServlet</code>ï¼Œå®é™…æ“ä½œçš„æ˜¯<code>HttpServletRequest</code>ï¼Œç‚¹å¼€å°±çœ‹åˆ°äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706436847528.webp"
alt="1706436847528" />
<figcaption aria-hidden="true">1706436847528</figcaption>
</figure>
<p>è‡³äº<code>Cookie</code>ï¼Œå°±æ˜¯ç‰¹æ®Šçš„å¤´ä¿¡æ¯ï¼Œè¿™äº›éƒ½ç±»ä¼¼çš„ã€‚</p>
<p>é‚£ä¹ˆè‡³æ­¤ä¸€æ¬¡ç™»å½•çœŸçš„å°±å®Œæˆäº†ã€‚</p>
<h1 id="åˆ†ææ€»ç»“">åˆ†ææ€»ç»“</h1>
<h2 id="ç™»å½•æ—¥å¿—">ç™»å½•æ—¥å¿—</h2>
<p>ç™»å½•æˆåŠŸåæ§åˆ¶å°ä¼šæ‰“å°å¦‚ä¸‹æ—¥å¿—ï¼Œè¿™å°±æ˜¯æåˆ°ä½†åˆæ²¡ç»†è¯´çš„äº‹ä»¶å‘å¸ƒæœºåˆ¶åšåˆ°çš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706438403332.webp"
alt="1706438403332" />
<figcaption aria-hidden="true">1706438403332</figcaption>
</figure>
<h2 id="redisæ•°æ®">Redisæ•°æ®</h2>
<p>æŸ¥çœ‹<code>redis</code>æ•°æ®æœ‰ä¸‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706437218015.webp"
alt="1706437218015" />
<figcaption aria-hidden="true">1706437218015</figcaption>
</figure>
<h3 id="session">session</h3>
<p><code>splicingKeySession</code>ï¼š<code>$&#123;tokenName&#125;:login:session:$&#123;loginId&#125;</code></p>
<p><code>Authorization:login:session:1</code>å­˜å‚¨å€¼å¦‚ä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯è´¦å·<code>id</code>å¯¹åº”çš„<code>Account-Session</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706437940996.webp"
alt="1706437940996" />
<figcaption aria-hidden="true">1706437940996</figcaption>
</figure>
<h3 id="tokenæ˜ å°„id">tokenæ˜ å°„id</h3>
<p><code>splicingKeySession</code>ï¼š<code>$&#123;tokenName&#125;:login:token:$&#123;tokenValue&#125;</code></p>
<p>å¯¹åº”å‰é¢1.6ä¿å­˜<code>token-id</code>æ˜ å°„</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706438624034.webp"
alt="1706438624034" />
<figcaption aria-hidden="true">1706438624034</figcaption>
</figure>
<h3 id="last-active">last-active</h3>
<p><code>splicingKeySession</code>ï¼š<code>$&#123;tokenName&#125;:login:last-active:$&#123;tokenValue&#125;</code></p>
<p>å¯¹åº”å‰é¢1.7å†™å…¥<code>token</code>æœ€åæ´»è·ƒæ—¶é—´</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706438716381.webp"
alt="1706438716381" />
<figcaption aria-hidden="true">1706438716381</figcaption>
</figure>
<h3 id="token-session">token-session</h3>
<p><code>splicingKeySession</code>ï¼š<code>$&#123;tokenName&#125;:login:token-session:$&#123;tokenValue&#125;</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706439023184.webp"
alt="1706439023184" />
<figcaption aria-hidden="true">1706439023184</figcaption>
</figure>
<p>è¿™é‡Œçš„<code>dataMap</code>é‡Œçš„<code>login_user</code>ä¿ç•™ç€å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œå¯¹åº”ä¸Šç¯‡æ–‡ç« çš„â€œç¼“å­˜æƒé™æ•°æ®â€ç« èŠ‚ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706439108099.webp"
alt="1706439108099" />
<figcaption aria-hidden="true">1706439108099</figcaption>
</figure>
<p>è·å–ç¼“å­˜ä¸­çš„ç™»å½•ç”¨æˆ·ä¿¡æ¯å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•äº†ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">SaSession</span> <span class="variable">session</span> <span class="operator">=</span> StpUtil.getTokenSession();</span><br><span class="line"><span class="keyword">if</span> (ObjectUtil.isNull(session)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) session.get(LOGIN_USER_KEY);</span><br></pre></td></tr></table></figure>
<h2 id="é¡¶äººä¸‹çº¿">é¡¶äººä¸‹çº¿</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706439683479.webp"
alt="1706439683479" />
<figcaption aria-hidden="true">1706439683479</figcaption>
</figure>
<p>ä¹Ÿå°±æ˜¯è¯´é‡å¤è°ƒç”¨<code>login</code>ç™»å½•ï¼Œä¼šæœ‰ä»€ä¹ˆæ•ˆæœï¼Œ<code>redis</code>ä¼šæœ‰ä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿ</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240128/1706439905503.webp"
alt="1706439905503" />
<figcaption aria-hidden="true">1706439905503</figcaption>
</figure>
<p>å› ä¸ºè¿™æ¬¡æ˜¯åŒç«¯ç™»å½•ï¼Œå¯ä»¥çœ‹åˆ°<code>session</code>çš„<code>tokenSign</code>å˜ä¸ºæœ€æ–°çš„ï¼Œ<code>token</code>è™½ç„¶è¿˜æœ‰ä¸¤æ¡ï¼Œä½†å…¶ä¸­ä¸€æ¡æŒ‡å‘çš„ä¸å†æ˜¯è´¦å·<code>id</code>ï¼Œè€Œæ˜¯<code>-4</code>ï¼Œè¡¨ç¤ºè¢«é¡¶ä¸‹çº¿ï¼ŒæŒ‰ç†è®²è¿™é‡Œçš„<code>token-session</code>åº”è¯¥æ˜¯è¦è¢«æ¸…é™¤äº†çš„ï¼Œæºç é‡Œè¿™é‡Œä¸ªæ­¥éª¤è¢«æ³¨é‡Šäº†ï¼Œä¸å¤ªç†è§£ã€‚ä¿ç•™ç–‘é—®ã€‚</p>
<h2 id="è¿‡æœŸç™»å½•">è¿‡æœŸç™»å½•</h2>
<p>å†™ä¸åŠ¨äº†ğŸ˜‚</p>
<p>åœºæ™¯å¤ªå¤šäº†ï¼Œè‡ªå·±å®è·µå§ï¼</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>é¡¹ç›®</tag>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurityå­¦ä¹ </title>
    <url>/article/330297af.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>Bç«™ï¼š<a
href="https://www.bilibili.com/video/BV15a411A7kP">https://www.bilibili.com/video/BV15a411A7kP</a></p>
<p>å®˜ç½‘ï¼š<a
href="https://spring.io/projects/spring-security">https://spring.io/projects/spring-security</a></p>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>Spring æ˜¯éå¸¸æµè¡Œå’ŒæˆåŠŸçš„ Java åº”ç”¨å¼€å‘æ¡†æ¶ï¼ŒSpring Security æ­£æ˜¯
Spring å®¶æ—ä¸­çš„ æˆå‘˜ã€‚Spring Security åŸºäº Spring æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥— Web
åº”ç”¨å®‰å…¨æ€§çš„å®Œæ•´è§£å†³æ–¹ æ¡ˆã€‚</p>
<p>æ­£å¦‚ä½ å¯èƒ½çŸ¥é“çš„å…³äºå®‰å…¨æ–¹é¢çš„ä¸¤ä¸ªä¸»è¦åŒºåŸŸæ˜¯â€œè®¤è¯â€å’Œâ€œæˆæƒâ€ï¼ˆæˆ–è€…è®¿é—®æ§
åˆ¶ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒWeb åº”ç”¨çš„å®‰å…¨æ€§åŒ…æ‹¬ç”¨æˆ·è®¤è¯ï¼ˆAuthenticationï¼‰å’Œç”¨æˆ·æˆæƒ
ï¼ˆAuthorizationï¼‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œè¿™ä¸¤ç‚¹ä¹Ÿæ˜¯ Spring Security é‡è¦æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>ï¼ˆ1ï¼‰ç”¨æˆ·è®¤è¯æŒ‡çš„æ˜¯ï¼šéªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦ä¸ºç³»ç»Ÿä¸­çš„åˆæ³•ä¸»ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·èƒ½å¦è®¿é—®
è¯¥ç³»ç»Ÿã€‚ç”¨æˆ·è®¤è¯ä¸€èˆ¬è¦æ±‚ç”¨æˆ·æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚ç³»ç»Ÿé€šè¿‡æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ¥å®Œæˆè®¤
è¯è¿‡ç¨‹ã€‚é€šä¿—ç‚¹è¯´å°±æ˜¯ç³»ç»Ÿè®¤ä¸ºç”¨æˆ·æ˜¯å¦èƒ½ç™»å½•</p>
<p>ï¼ˆ2ï¼‰ç”¨æˆ·æˆæƒæŒ‡çš„æ˜¯éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒæŸä¸ªæ“ä½œã€‚åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œä¸åŒç”¨æˆ·
æ‰€å…·æœ‰çš„æƒé™æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚å¯¹ä¸€ä¸ªæ–‡ä»¶æ¥è¯´ï¼Œæœ‰çš„ç”¨æˆ·åªèƒ½è¿›è¡Œè¯»å–ï¼Œè€Œæœ‰çš„ç”¨æˆ·å¯ä»¥
è¿›è¡Œä¿®æ”¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿä¼šä¸ºä¸åŒçš„ç”¨æˆ·åˆ†é…ä¸åŒçš„è§’è‰²ï¼Œè€Œæ¯ä¸ªè§’è‰²åˆ™å¯¹åº”ä¸€ç³»åˆ—çš„
æƒé™ã€‚é€šä¿—ç‚¹è®²å°±æ˜¯ç³»ç»Ÿåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å»åšæŸäº›äº‹æƒ…ã€‚</p>
<p>SpringSecurity ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å’Œ Spring æ— ç¼æ•´åˆã€‚</li>
<li>å…¨é¢çš„æƒé™æ§åˆ¶ã€‚</li>
<li>ä¸“é—¨ä¸º Web å¼€å‘è€Œè®¾è®¡ã€‚
<ul>
<li>æ—§ç‰ˆæœ¬ä¸èƒ½è„±ç¦» Web ç¯å¢ƒä½¿ç”¨ã€‚</li>
<li>æ–°ç‰ˆæœ¬å¯¹æ•´ä¸ªæ¡†æ¶è¿›è¡Œäº†åˆ†å±‚æŠ½å–ï¼Œåˆ†æˆäº†æ ¸å¿ƒæ¨¡å—å’Œ Web æ¨¡å—ã€‚å•ç‹¬
å¼•å…¥æ ¸å¿ƒæ¨¡å—å°±å¯ä»¥è„±ç¦» Web ç¯å¢ƒã€‚</li>
</ul></li>
<li>é‡é‡çº§ã€‚</li>
</ul>
<span id="more"></span>
<h1 id="å…¥é—¨ç¤ºä¾‹">å…¥é—¨ç¤ºä¾‹</h1>
<p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Controlleræµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello security&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æµ‹è¯•ï¼Œéœ€è¦å¯†ç ç™»å½•ï¼Œé»˜è®¤usernameä¸ºuserï¼Œå¯†ç ä¸ºæ§åˆ¶å°æ‰“å°çš„å†…å®¹</p>
<h1 id="å¯åŠ¨æµç¨‹åŸç†">å¯åŠ¨æµç¨‹åŸç†</h1>
<p>UserDetailsService</p>
<p>PasswordEncoder</p>
<h1 id="web">Web</h1>
<p>è®¾ç½®ç™»å½•ç³»ç»Ÿçš„è´¦å·ã€å¯†ç </p>
<p>æ–¹å¼ä¸€</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">security:</span></span><br><span class="line">    <span class="attr">user:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure>
<p>æ–¹å¼äºŒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">BCryptPasswordEncoder</span> <span class="variable">encoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> encoder.encode(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">        auth.inMemoryAuthentication().withUser(<span class="string">&quot;root&quot;</span>).password(password).roles(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼ä¸‰</p>
<p>step1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfigTest</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>step2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userDetailsService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyUserDetailsService</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String s)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        List&lt;GrantedAuthority&gt; auths= AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;role&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;root&quot;</span>,<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;456&quot;</span>),auths);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åŠ å…¥æ•°æ®åº“">åŠ å…¥æ•°æ®åº“</h1>
<p>å»ºç«‹æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> users(</span><br><span class="line"> id <span class="type">bigint</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">password <span class="type">varchar</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- å¯†ç  atguigu</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;å¼ </span></span><br><span class="line"><span class="string">san&#x27;</span>,<span class="string">&#x27;$2a$10$2R/M6iU3mCZt3ByG7kwYTeeW0w7/UqdeXrb27zkBIizBvAven0/na&#x27;</span>);</span><br><span class="line"><span class="comment">-- å¯†ç  atguigu</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;æ</span></span><br><span class="line"><span class="string">si&#x27;</span>,<span class="string">&#x27;$2a$10$2R/M6iU3mCZt3ByG7kwYTeeW0w7/UqdeXrb27zkBIizBvAven0/na&#x27;</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> role(</span><br><span class="line">id <span class="type">bigint</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);<span class="keyword">insert</span> <span class="keyword">into</span> role <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;ç®¡ç†å‘˜&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> role <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;æ™®é€šç”¨æˆ·&#x27;</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> role_user(</span><br><span class="line">uid <span class="type">bigint</span>,</span><br><span class="line">rid <span class="type">bigint</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> role_user <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> role_user <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> menu(</span><br><span class="line">id <span class="type">bigint</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">url <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">parentid <span class="type">bigint</span>,</span><br><span class="line">permission <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> menu <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;ç³»ç»Ÿç®¡ç†&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;menu:system&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> menu <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;menu:user&#x27;</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> role_menu(</span><br><span class="line">mid <span class="type">bigint</span>,</span><br><span class="line">rid <span class="type">bigint</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> role_menu <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>);<span class="keyword">insert</span> <span class="keyword">into</span> role_menu <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> role_menu <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>application.yml</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/demo</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure>
<p>entity</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Users</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UsersMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Users&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>useré…ç½®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userDetailsService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyUserDetailsService</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UsersMapper usersMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String s)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨usersMapperæ–¹æ³•æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;Users&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// where username = ?</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;username&quot;</span>, s);</span><br><span class="line">        <span class="type">Users</span> <span class="variable">users</span> <span class="operator">=</span> usersMapper.selectOne(wrapper);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (users == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;ç”¨æˆ·åä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;GrantedAuthority&gt; auths = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;role&quot;</span>);</span><br><span class="line">        <span class="comment">// ä»æ•°æ®åº“è¿”å›userså¯¹è±¡ï¼Œå¾—åˆ°ç”¨æˆ·åã€å¯†ç ï¼Œè¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(users.getUsername(), <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(users.getPassword()), auths);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰ç™»å½•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰ç™»é™†é¡µé¢</span></span><br><span class="line">    http.formLogin()</span><br><span class="line">            .loginPage(<span class="string">&quot;/login.html&quot;</span>) <span class="comment">// ç™»å½•é¡µé¢è®¾ç½®</span></span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/user/login&quot;</span>) <span class="comment">// ç™»å½•è®¿é—®è·¯å¾„</span></span><br><span class="line">            .defaultSuccessUrl(<span class="string">&quot;/test/index&quot;</span>).permitAll() <span class="comment">// ç™»å½•æˆåŠŸè·³è½¬è·¯å¾„</span></span><br><span class="line">            .and().authorizeRequests()</span><br><span class="line">            .antMatchers(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;/test/hello&quot;</span>).permitAll() <span class="comment">//è®¾ç½®å“ªäº›è·¯å¾„å¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦è®¤è¯</span></span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and().csrf().disable();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åŸºäºè§’è‰²æˆ–æƒé™è¿›è¡Œè®¿é—®æ§åˆ¶">åŸºäºè§’è‰²æˆ–æƒé™è¿›è¡Œè®¿é—®æ§åˆ¶</h1>
<p>hasAuthority</p>
<p>hasAnyAuthority</p>
<p>hasRole</p>
<p>hasAnyRole</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰ç™»é™†é¡µé¢</span></span><br><span class="line">    http.formLogin()</span><br><span class="line">            .loginPage(<span class="string">&quot;/login.html&quot;</span>) <span class="comment">// ç™»å½•é¡µé¢è®¾ç½®</span></span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/user/login&quot;</span>) <span class="comment">// ç™»å½•è®¿é—®è·¯å¾„</span></span><br><span class="line">            .defaultSuccessUrl(<span class="string">&quot;/test/index&quot;</span>).permitAll() <span class="comment">// ç™»å½•æˆåŠŸè·³è½¬è·¯å¾„</span></span><br><span class="line">            .and().authorizeRequests()</span><br><span class="line">            .antMatchers(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;/test/hello&quot;</span>).permitAll() <span class="comment">//è®¾ç½®å“ªäº›è·¯å¾„å¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦è®¤è¯</span></span><br><span class="line">            <span class="comment">// 1.hasAuthority()</span></span><br><span class="line">            <span class="comment">// .antMatchers(&quot;/test/index&quot;).hasAuthority(&quot;admins&quot;)</span></span><br><span class="line">            <span class="comment">// 2.hasAnyAuthority()</span></span><br><span class="line">            <span class="comment">// .antMatchers(&quot;/test/index&quot;).hasAnyAuthority(&quot;admins,manager&quot;)</span></span><br><span class="line">            <span class="comment">// 3.hasRole() ROLE_</span></span><br><span class="line">            .antMatchers(<span class="string">&quot;/test/index&quot;</span>).hasRole(<span class="string">&quot;sale&quot;</span>)</span><br><span class="line">            <span class="comment">// 4.hasAnyRole()</span></span><br><span class="line">            .antMatchers(<span class="string">&quot;/test/index&quot;</span>).hasAnyRole(<span class="string">&quot;sale,dba&quot;</span>)</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and().csrf().disable();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String s)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨usersMapperæ–¹æ³•æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line">    QueryWrapper&lt;Users&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// where username = ?</span></span><br><span class="line">    wrapper.eq(<span class="string">&quot;username&quot;</span>, s);</span><br><span class="line">    <span class="type">Users</span> <span class="variable">users</span> <span class="operator">=</span> usersMapper.selectOne(wrapper);</span><br><span class="line">    <span class="comment">// åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (users == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;ç”¨æˆ·åä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    List&lt;GrantedAuthority&gt; auths = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;admins&quot;</span>);</span><br><span class="line">    <span class="comment">// ä»æ•°æ®åº“è¿”å›userså¯¹è±¡ï¼Œå¾—åˆ°ç”¨æˆ·åã€å¯†ç ï¼Œè¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(users.getUsername(), <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(users.getPassword()), auths);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é¡µé¢">403é¡µé¢</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é…ç½®403é¡µé¢</span></span><br><span class="line">http.exceptionHandling().accessDeniedPage(<span class="string">&quot;/unauth.html&quot;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="æ³¨è§£">æ³¨è§£</h1>
<p><span class="citation" data-cites="Secured">@Secured</span></p>
<p>åˆ¤æ–­æ˜¯å¦å…·æœ‰è§’è‰²ï¼Œå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡ŒåŒ¹é…çš„å­—ç¬¦ä¸²éœ€è¦æ·»åŠ å‰ç¼€â€œROLE_â€œã€‚</p>
<p>ä½¿ç”¨æ³¨è§£å…ˆè¦å¼€å¯æ³¨è§£åŠŸèƒ½ï¼</p>
<blockquote>
<p><span class="citation"
data-cites="EnableGlobalMethodSecurity">@EnableGlobalMethodSecurity</span>(securedEnabled=true)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="meta">@Secured(&#123;&quot;ROLE_sale&quot;,&quot;ROLE_manager&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="citation"
data-cites="PreAuthorize">@PreAuthorize</span></p>
<p>æ³¨è§£é€‚åˆè¿›å…¥æ–¹æ³•å‰çš„æƒé™éªŒè¯ï¼Œ <span class="citation"
data-cites="PreAuthorize">@PreAuthorize</span> å¯ä»¥å°†ç™»å½•ç”¨ æˆ·çš„
roles/permissions å‚æ•°ä¼ åˆ°æ–¹æ³•ä¸­ã€‚</p>
<p>å…ˆå¼€å¯æ³¨è§£åŠŸèƒ½ï¼š</p>
<blockquote>
<p><span class="citation"
data-cites="EnableGlobalMethodSecurity">@EnableGlobalMethodSecurity</span>(prePostEnabled
= true)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="comment">// @Secured(&#123;&quot;ROLE_sale&quot;,&quot;ROLE_manager&quot;&#125;)</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;hasAnyAuthority(&#x27;admins&#x27;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="citation"
data-cites="PostAuthorize">@PostAuthorize</span></p>
<p>ä½¿ç”¨å¹¶ä¸å¤šï¼Œåœ¨æ–¹æ³•æ‰§è¡Œåå†è¿›è¡Œæƒé™éªŒè¯ï¼Œé€‚åˆéªŒè¯å¸¦æœ‰è¿”å›å€¼
çš„æƒé™.</p>
<p>å…ˆå¼€å¯æ³¨è§£åŠŸèƒ½ï¼š</p>
<blockquote>
<p><span class="citation"
data-cites="EnableGlobalMethodSecurity">@EnableGlobalMethodSecurity</span>(prePostEnabled
= true)</p>
</blockquote>
<p>å…ˆæ‰§è¡Œï¼ŒåéªŒè¯æƒé™ï¼Œè™½æ— æƒé™ï¼Œä½†è¿˜æ˜¯è¾“å‡ºäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="comment">// @Secured(&#123;&quot;ROLE_sale&quot;,&quot;ROLE_manager&quot;&#125;)</span></span><br><span class="line"><span class="comment">// @PreAuthorize(&quot;hasAnyAuthority(&#x27;admins&#x27;)&quot;)</span></span><br><span class="line"><span class="meta">@PostAuthorize(&quot;hasAnyAuthority(&#x27;admin&#x27;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;update...&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="citation" data-cites="PostFilter">@PostFilter</span></p>
<p>æƒé™éªŒè¯ä¹‹åå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ ç•™ä¸‹ç”¨æˆ·åæ˜¯ admin1 çš„æ•°æ® è¡¨è¾¾å¼ä¸­çš„
filterObject å¼•ç”¨çš„æ˜¯æ–¹æ³•è¿”å›å€¼ List ä¸­çš„æŸä¸€ä¸ªå…ƒç´ </p>
<p><span class="citation" data-cites="PreFilter">@PreFilter</span></p>
<p>è¿›å…¥æ§åˆ¶å™¨ä¹‹å‰å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤</p>
<h1 id="æ³¨é”€">æ³¨é”€</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// logout</span></span><br><span class="line">http.logout().logoutUrl(<span class="string">&quot;/logout&quot;</span>).logoutSuccessUrl(<span class="string">&quot;/test/hello&quot;</span>).permitAll();</span><br></pre></td></tr></table></figure>
<h1 id="è®°ä½æˆ‘">è®°ä½æˆ‘</h1>
<p>åŸç†</p>
<p>å»ºè¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `persistent_logins` (</span><br><span class="line"> `username` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"> `series` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"> `token` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"> `last_used` <span class="type">timestamp</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> </span><br><span class="line"><span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line"> <span class="keyword">PRIMARY</span> KEY (`series`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> PersistentTokenRepository <span class="title function_">persistentTokenRepository</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">JdbcTokenRepositoryImpl</span> <span class="variable">jdbcTokenRepository</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTokenRepositoryImpl</span>();</span><br><span class="line">    jdbcTokenRepository.setDataSource(dataSource);</span><br><span class="line">    <span class="comment">// å¯è‡ªåŠ¨å»ºè¡¨</span></span><br><span class="line">    <span class="comment">// jdbcTokenRepository.setCreateTableOnStartup(true);</span></span><br><span class="line">    <span class="keyword">return</span> jdbcTokenRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®°ä½æˆ‘</span></span><br><span class="line">.and().rememberMe().tokenRepository(persistentTokenRepository())</span><br><span class="line">.tokenValiditySeconds(<span class="number">60</span>)</span><br><span class="line">.userDetailsService(userDetailsService)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember-me&quot;</span>/&gt;</span>è‡ªåŠ¨ç™»å½•<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;login&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="csrf">CSRF</h1>
<p>CSRF ç†è§£</p>
<p><strong>è·¨ç«™è¯·æ±‚ä¼ªé€ </strong>ï¼ˆè‹±è¯­ï¼šCross-site request
forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º
CSRF æˆ–è€… XSRFï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·² ç™»å½•çš„ Web
åº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚è·Ÿè·¨ç½‘ç«™è„šæœ¬ï¼ˆXSSï¼‰ç›¸æ¯”ï¼ŒXSS
åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF
åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚</p>
<p>è·¨ç«™è¯·æ±‚æ”»å‡»ï¼Œç®€å•åœ°è¯´ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ª
è‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶è¿è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°
å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»è¿è¡Œã€‚
è¿™åˆ©ç”¨äº† web
ä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼š<strong>ç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„
æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚</strong></p>
<p>ä» Spring Security 4.0 å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¯ç”¨ CSRF ä¿æŠ¤ï¼Œä»¥é˜²æ­¢ CSRF
æ”»å‡»åº”ç”¨ ç¨‹åºï¼ŒSpring Security CSRF ä¼šé’ˆå¯¹ PATCHï¼ŒPOSTï¼ŒPUT å’Œ DELETE
æ–¹æ³•è¿›è¡Œé˜²æŠ¤ã€‚</p>
<p>é»˜è®¤æ˜¯å¼€å¯çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// http.csrf().disable();</span></span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ç®€å•çš„å­¦ä¹ ï¼ŒåŸç†éƒ¨åˆ†æ²¡æœ‰æ·±ç©¶ï¼Œè¿˜æœ‰éƒ¨åˆ†ä¸å®Œæ•´ï¼Œå¦‚ç»“åˆæ•°æ®åº“æƒé™ï¼Œå½“ç„¶è¿˜æœ‰åˆ†å¸ƒå¼æ²¡æœ‰å­¦ä¹ ï¼Œç›®å‰åˆ†å¸ƒå¼è¿˜æœ‰å¤ªå¤šå‰æœŸçŸ¥è¯†ä¸ºå‡†å¤‡ï¼Œæ‰€ä»¥æ²¡æœ‰å¤ªæ³¨é‡è¿™æ–¹é¢</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Mybatis/Mybatis-plus</tag>
        <tag>Spring Security</tag>
      </tags>
  </entry>
  <entry>
    <title>ThreadLocalç†è§£</title>
    <url>/article/362db54f.html</url>
    <content><![CDATA[<p>ç›¸ä¿¡ç†Ÿæ‚‰<code>JUC</code>ï¼ˆ<code>java.util.concurrent</code>ï¼‰çš„ï¼Œéƒ½åº”è¯¥çŸ¥é“<code>ThreadLocal</code>ï¼Œå°¤å…¶æ˜¯åœ¨å„ç§é¢è¯•é¢˜åº“ä¸­ç»å¸¸é‡åˆ°ã€‚è°ˆèµ·è¿™ä¸ªçš„ä¸»è¦åŸå› è¿˜æ˜¯åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†â€œåˆ©ç”¨<code>ThreadLocal</code>ä¼ é€’å‚æ•°â€çš„æ¡ˆä¾‹ï¼Œæœ‰ç‚¹å¥½å¥‡ã€‚æ‰€ä»¥å°±æ­¤æŸ¥çœ‹äº†ä¸€äº›èµ„æ–™ã€‚äººå®¶å†™çš„å·²ç»å¾ˆæ£’äº†ï¼Œè¿™é‡Œåšä¸ªè®°å½•å§ï¼ğŸ¥±</p>
<p><a
href="https://blog.csdn.net/z394642048/article/details/105382603">ThreadLocalç”¨äºä¼ é€’å‚æ•°åŠä¼˜åŠ¿</a></p>
<p><a
href="https://www.pdai.tech/md/java/thread/java-thread-x-threadlocal.html">Java
å¹¶å‘ - ThreadLocalè¯¦è§£</a></p>
<p>å°±æ­¤ä¸€æï¼Œä¸ç®¡æ˜¯å†™ä»£ç è¿˜æ˜¯æ—¥å¸¸ç”Ÿæ´»å·¥ä½œï¼Œå¾ˆå¤šäº‹æƒ…å¯ä»¥å¤šæƒ³æƒ³ï¼š</p>
<ul>
<li><p>XXXä¸ºä»€ä¹ˆå‡ºç°ï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p></li>
<li><p>XXXæ˜¯æ€ä¹ˆå—åšåˆ°äº†ï¼Ÿ</p></li>
<li><p>XXXæœ‰ä»€ä¹ˆç¼ºé™·å—ï¼Ÿ</p></li>
<li><p>è”æƒ³ã€‚ã€‚ã€‚</p></li>
</ul>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Springï¼ˆä¸€ï¼‰</title>
    <url>/article/1d2ccb18.html</url>
    <content><![CDATA[<p>å…±ä¸¤éƒ¨åˆ†</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/1d2ccb18.html">Springï¼ˆä¸€ï¼‰ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/2d3a27c0.html">Springï¼ˆäºŒï¼‰</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1WE411d7Dv">https://www.bilibili.com/video/BV1WE411d7Dv</a></p>
<p><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core</a></p>
<span id="more"></span>
<h1 id="spring">Spring</h1>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>Springæ¡†æ¶æ˜¯ç”±äº<a
href="https://baike.baidu.com/item/è½¯ä»¶å¼€å‘/3448966">è½¯ä»¶å¼€å‘</a>çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ã€‚Springä½¿ç”¨çš„æ˜¯åŸºæœ¬çš„JavaBeanæ¥å®Œæˆä»¥å‰åªå¯èƒ½ç”±<a
href="https://baike.baidu.com/item/EJB/144195">EJB</a>å®Œæˆçš„äº‹æƒ…ã€‚ç„¶è€Œï¼ŒSpringçš„ç”¨é€”ä¸ä»…ä»…é™äºæœåŠ¡å™¨ç«¯çš„å¼€å‘ã€‚ä»ç®€å•æ€§ã€å¯æµ‹è¯•æ€§å’Œæ¾è€¦åˆæ€§è§’åº¦è€Œè¨€ï¼Œç»å¤§éƒ¨åˆ†Javaåº”ç”¨éƒ½å¯ä»¥ä»Springä¸­å—ç›Šã€‚</p>
<p>â—†ç›®çš„ï¼šè§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§</p>
<p>â—†åŠŸèƒ½ï¼šä½¿ç”¨åŸºæœ¬çš„JavaBeanä»£æ›¿EJBï¼Œå¹¶æä¾›äº†æ›´å¤šçš„ä¼ä¸šåº”ç”¨åŠŸèƒ½</p>
<p>â—†èŒƒå›´ï¼šä»»ä½•Javaåº”ç”¨</p>
<p>Springæ˜¯ä¸€ä¸ªè½»é‡çº§æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨æ¡†æ¶ã€‚</p>
<p>å®˜ç½‘ï¼šhttps://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core</p>
<p>ä¸‹è½½ï¼šhttps://repo.spring.io/release/org/springframework/spring/</p>
<p>Githubï¼šhttps://github.com/spring-projects/spring-framework</p>
<p>Springæ€»ç»“èµ·æ¥ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä½ä¾µå…¥å¼è®¾è®¡ï¼Œä»£ç çš„æ±¡æŸ“æä½ã€‚</li>
<li>ç‹¬ç«‹äºå„ç§åº”ç”¨æœåŠ¡å™¨ï¼ŒåŸºäºSpringæ¡†æ¶çš„åº”ç”¨ï¼Œå¯ä»¥çœŸæ­£å®ç°Write
Onceï¼ŒRun Anywhereçš„æ‰¿è¯ºã€‚</li>
<li>Springçš„IoCå®¹å™¨é™ä½äº†ä¸šåŠ¡å¯¹è±¡æ›¿æ¢çš„å¤æ‚æ€§ï¼Œæé«˜äº†ç»„ä»¶ä¹‹é—´çš„è§£è€¦ã€‚</li>
<li>Springçš„AOPæ”¯æŒå…è®¸å°†ä¸€äº›é€šç”¨ä»»åŠ¡å¦‚å®‰å…¨ã€äº‹åŠ¡ã€æ—¥å¿—ç­‰è¿›è¡Œé›†ä¸­å¼ç®¡ç†ï¼Œä»è€Œæä¾›äº†æ›´å¥½çš„å¤ç”¨ã€‚</li>
<li>Springçš„ORMå’ŒDAOæä¾›äº†ä¸ç¬¬ä¸‰æ–¹æŒä¹…å±‚æ¡†æ¶çš„è‰¯å¥½æ•´åˆï¼Œå¹¶ç®€åŒ–äº†åº•å±‚çš„æ•°æ®åº“è®¿é—®ã€‚</li>
<li>Springçš„é«˜åº¦å¼€æ”¾æ€§ï¼Œå¹¶ä¸å¼ºåˆ¶åº”ç”¨å®Œå…¨ä¾èµ–äºSpringï¼Œå¼€å‘è€…å¯è‡ªç”±é€‰ç”¨Springæ¡†æ¶çš„éƒ¨åˆ†æˆ–å…¨éƒ¨ã€‚</li>
</ul>
<h1 id="springé…ç½®">Springé…ç½®</h1>
<p><strong>åˆ«å</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ«å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;dgsdfgfdg&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Bean é…ç½®</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	id å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment">	class bean å¯¹è±¡çš„å…¨é™å®šåŒ… åŒ…å + ç±»å</span></span><br><span class="line"><span class="comment">	name åˆ«åï¼Œå¯ä»¥æœ‰å¤šä¸ª</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.User&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user1,user2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è€æ¨&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>import</strong></p>
<p>ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œå°†å¤šä¸ªé…ç½®æ–‡ä»¶å¯¼å…¥åˆå¹¶</p>
<h1 id="ioc">IOC</h1>
<p>IoCä¹Ÿç§°ä¸ºä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡ä»…é€šè¿‡æ„é€ å‡½æ•°å‚æ•°ï¼Œå·¥å‚æ–¹æ³•çš„å‚æ•°æˆ–åœ¨æ„é€ æˆ–ä»å·¥å‚æ–¹æ³•è¿”å›ååœ¨å¯¹è±¡å®ä¾‹ä¸Šè®¾ç½®çš„å±æ€§æ¥å®šä¹‰å…¶ä¾èµ–é¡¹ï¼ˆå³ï¼Œä¸å®ƒä»¬ä¸€èµ·ä½¿ç”¨çš„å…¶ä»–å¯¹è±¡ï¼‰
ã€‚ç„¶åï¼Œå®¹å™¨åœ¨åˆ›å»ºbeanæ—¶æ³¨å…¥é‚£äº›ä¾èµ–é¡¹ã€‚æ­¤è¿‡ç¨‹ä»æ ¹æœ¬ä¸Šè®²æ˜¯é€šè¿‡ä½¿ç”¨ç±»çš„ç›´æ¥æ„é€ æˆ–è¯¸å¦‚æœåŠ¡å®šä½å™¨æ¨¡å¼ä¹‹ç±»çš„æ§ä»¶æ¥æ§åˆ¶å…¶ä¾èµ–é¡¹çš„å®ä¾‹åŒ–æˆ–ä½ç½®çš„beanæœ¬èº«çš„é€†è¿‡ç¨‹ï¼ˆå› æ­¤ç§°ä¸ºControl
Inversionï¼‰ã€‚</p>
<p>Springçš„å·¥ä½œåŸç†çš„é«˜çº§è§†å›¾</p>
<figure>
<img data-src="https://docs.spring.io/spring-framework/docs/current/reference/html/images/container-magic.png"
alt="Springçš„å·¥ä½œåŸç†çš„é«˜çº§è§†å›¾" />
<figcaption aria-hidden="true">Springçš„å·¥ä½œåŸç†çš„é«˜çº§è§†å›¾</figcaption>
</figure>
<h2 id="æ„Ÿå—ioc">æ„Ÿå—IOC</h2>
<p>å¯¼å…¥ä¸‹é¢è¿™ä¸ªä¼šä¾èµ–åœ°å¯¼å…¥ä¸€äº›å¿…è¦åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¼ ç»Ÿå¼€å‘è¿‡ç¨‹</p>
<ul>
<li>UserDaoæ¥å£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>UserImplå®ç°</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤è·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>UserServiceæ¥å£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>UserServiceå®ç°</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        userDao.getUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">        userService.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‹¥è¿™æ—¶åŠ å…¥æ–°çš„ dao å®ç°ç±»</p>
<p>UserMysqlImpl</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMysqlImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MySQLè·å–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserOracleImpl</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserOracleImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Oracleè·å–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¿…é¡»ä¿®æ”¹ Service æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// private UserDao userDao = new UserDaoImpl();</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMysqlImpl</span>();</span><br><span class="line">    <span class="comment">// private UserDao userDao = new UserOracleImpl();</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        userDao.getUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†è¿™æ ·ä¼šåŠ å¤§å¼€å‘éš¾åº¦ï¼Œè€Œä¸”ä¸èƒ½ä¸“å¿ƒçš„åœ¨ä¸€æ–¹é¢æä¸‹å»</p>
<p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡ SET åŠ¨æ€å®ç°å€¼çš„æ³¨å…¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        userDao.getUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹åæµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">        userService.setUserDao(<span class="keyword">new</span> <span class="title class_">UserOracleImpl</span>());</span><br><span class="line"></span><br><span class="line">        userService.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥åŠ¨æ€å®ç°å€¼çš„æ³¨å…¥</p>
<h2 id="é…ç½®å…ƒæ•°æ®">é…ç½®å…ƒæ•°æ®</h2>
<p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®çš„åŸºæœ¬ç»“æ„ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;...&quot;</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>IOCå®¹å™¨èµ‹å€¼ï¼šå¦‚æœæ˜¯ç®€å•ç±»å‹ï¼ˆ8ä¸ªåŸºæœ¬+Stringï¼‰ï¼Œvalueï¼›å¦‚æœæ˜¯å¯¹è±¡ï¼Œref=â€œéœ€è¦å¼•å…¥çš„idå€¼â€</p>
<p>è¯¥<code>id</code>å±æ€§æ˜¯æ ‡è¯†å•ä¸ªbeanå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚</p>
<p>è¯¥<code>class</code>å±æ€§å®šä¹‰Beançš„ç±»å‹ï¼Œå¹¶ä½¿ç”¨å®Œå…¨é™å®šçš„ç±»åã€‚</p>
<h2 id="å®ä¾‹åŒ–å®¹å™¨">å®ä¾‹åŒ–å®¹å™¨</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// create and configure beans</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;services.xml&quot;</span>, <span class="string">&quot;daos.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// retrieve configured instance</span></span><br><span class="line"><span class="type">PetStoreService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;petStore&quot;</span>, PetStoreService.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// use configured instance</span></span><br><span class="line">List&lt;String&gt; userList = service.getUsernameList();</span><br></pre></td></tr></table></figure>
<h2 id="beanå‘½åçº¦å®š">Beanå‘½åçº¦å®š</h2>
<p>çº¦å®šæ˜¯åœ¨å‘½åbeanæ—¶å°†æ ‡å‡†Javaçº¦å®šç”¨äºå®ä¾‹å­—æ®µåç§°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œbeanåç§°ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå¹¶ä»é‚£é‡Œç”¨é©¼å³°å¼å¤§å°å†™ã€‚è¿™æ ·çš„åå­—çš„ä¾‹å­åŒ…æ‹¬<code>accountManager</code>ï¼Œ
<code>accountService</code>ï¼Œ<code>userDao</code>ï¼Œ<code>loginController</code>ï¼Œç­‰ç­‰ã€‚</p>
<p>ä¸€è‡´åœ°å‘½åBeanä½¿æ‚¨çš„é…ç½®æ›´æ˜“äºé˜…è¯»å’Œç†è§£ã€‚å¦å¤–ï¼Œå¦‚æœæ‚¨ä½¿ç”¨Spring
AOPï¼Œåˆ™åœ¨å°†å»ºè®®åº”ç”¨äºåç§°ç›¸å…³çš„ä¸€ç»„beanæ—¶ï¼Œå®ƒä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<p>pojo.Hello.class</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStr</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;str=&#x27;&quot;</span> + str + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  ä½¿ç”¨ Spring æ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨ Spring ä¸­è¿™äº›éƒ½æˆä¸º Bean  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å– Spring ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯¹è±¡éƒ½äº¤ç”± Spring ç®¡ç†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å»å–</span></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">hello</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(hello.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†ä¸Šé¢ User dao Service ä¿®æ”¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  ä½¿ç”¨ Spring æ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨ Spring ä¸­è¿™äº›éƒ½æˆä¸º Bean  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mysqlImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.dao.UserMysqlImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;oracleImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.dao.UserOracleImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.service.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;mysqlImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å– Spring ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯¹è±¡éƒ½äº¤ç”± Spring ç®¡ç†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å»å–</span></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">hello</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(hello.toString());</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userServiceImpl</span> <span class="operator">=</span> (UserServiceImpl) context.getBean(<span class="string">&quot;userServiceImpl&quot;</span>);</span><br><span class="line">        userServiceImpl.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¾èµ–æ³¨å…¥">ä¾èµ–æ³¨å…¥</h1>
<h2 id="åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥">åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥</h2>
<p>1ã€æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤</p>
<p>2ã€æœ‰å‚æ„é€ æ–¹å¼</p>
<p>Springæ— æ³•ç¡®å®šå€¼çš„ç±»å‹ï¼Œå› æ­¤åœ¨æ²¡æœ‰å¸®åŠ©çš„æƒ…å†µä¸‹æ— æ³•æŒ‰ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚è€ƒè™‘ä»¥ä¸‹ç±»åˆ«ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> examples;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Number of years to calculate the Ultimate Answer</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> years;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The Answer to Life, the Universe, and Everything</span></span><br><span class="line">    <span class="keyword">private</span> String ultimateAnswer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ExampleBean</span><span class="params">(<span class="type">int</span> years, String ultimateAnswer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.years = years;</span><br><span class="line">        <span class="built_in">this</span>.ultimateAnswer = ultimateAnswer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ„é€ å‡½æ•°å‚æ•°ç±»å‹åŒ¹é…</strong></p>
<p>åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œå¦‚æœé€šè¿‡ä½¿ç”¨<code>type</code>å±æ€§æ˜¾å¼æŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç±»å‹ï¼Œåˆ™å®¹å™¨å¯ä»¥ä½¿ç”¨ç®€å•ç±»å‹çš„ç±»å‹åŒ¹é…ã€‚å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;exampleBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;examples.ExampleBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;7500000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;42&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ„é€ å‡½æ•°å‚æ•°ç´¢å¼•</strong></p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨è¯¥<code>index</code>å±æ€§æ¥æ˜ç¡®æŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç´¢å¼•ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;exampleBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;examples.ExampleBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;7500000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;42&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é™¤äº†è§£å†³å¤šä¸ªç®€å•å€¼çš„æ­§ä¹‰æ€§ä¹‹å¤–ï¼ŒæŒ‡å®šç´¢å¼•è¿˜å¯ä»¥è§£å†³æ­§ä¹‰ï¼Œå…¶ä¸­æ„é€ å‡½æ•°å…·æœ‰ä¸¤ä¸ªç›¸åŒç±»å‹çš„å‚æ•°ã€‚</p>
<p><strong>æ„é€ å‡½æ•°å‚æ•°åç§°</strong></p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°å‚æ•°åç§°æ¥æ¶ˆé™¤æ­§ä¹‰ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;exampleBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;examples.ExampleBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;years&quot;</span> <span class="attr">value</span>=<span class="string">&quot;7500000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;ultimateAnswer&quot;</span> <span class="attr">value</span>=<span class="string">&quot;42&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¯·è®°ä½ï¼Œè¦ç«‹å³ä½¿ç”¨è¯¥åŠŸèƒ½ï¼Œå¿…é¡»åœ¨å¯ç”¨è°ƒè¯•æ ‡å¿—çš„æƒ…å†µä¸‹ç¼–è¯‘ä»£ç ï¼Œä»¥ä¾¿Springå¯ä»¥ä»æ„é€ å‡½æ•°ä¸­æŸ¥æ‰¾å‚æ•°åç§°ã€‚å¦‚æœæ‚¨ä¸èƒ½æˆ–ä¸æƒ³ä½¿ç”¨debugæ ‡å¿—ç¼–è¯‘ä»£ç ï¼Œåˆ™å¯ä»¥ä½¿ç”¨
<a
href="https://download.oracle.com/javase/8/docs/api/java/beans/ConstructorProperties.html"><span
class="citation"
data-cites="ConstructorProperties">@ConstructorProperties</span></a>
JDKæ‰¹æ³¨æ˜¾å¼å‘½åæ„é€ å‡½æ•°å‚æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> examples;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Fields omitted</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConstructorProperties(&#123;&quot;years&quot;, &quot;ultimateAnswer&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ExampleBean</span><span class="params">(<span class="type">int</span> years, String ultimateAnswer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.years = years;</span><br><span class="line">        <span class="built_in">this</span>.ultimateAnswer = ultimateAnswer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŸºäºsetterçš„ä¾èµ–æ³¨å…¥">åŸºäºSetterçš„ä¾èµ–æ³¨å…¥</h2>
<p>å¤æ‚ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; cards;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    </span><br><span class="line">    ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>beans.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Address&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ™®é€šæ³¨å…¥ value --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è€æ¨&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Bean æ³¨å…¥ ref --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ•°ç»„æ³¨å…¥ array --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’ä¼ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- listæ³¨å…¥ list --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ç©æ¸¸æˆ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çœ‹æ‰‹æœº<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¬éŸ³ä¹<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çœ‹ç”µå½±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mapæ³¨å…¥ map --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cards&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;èº«ä»½è¯&quot;</span> <span class="attr">value</span>=<span class="string">&quot;124&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;æ ¡å›­å¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;125&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;æ‰‹æœºå¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;126&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;é“¶è¡Œå¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;127&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- setæ³¨å…¥ set --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;games&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>CS<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>CF<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç©ºå€¼æ³¨å…¥ null --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å±æ€§æ³¨å…¥ props --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å­¦å·&quot;</span>&gt;</span>112<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;æ€§åˆ«&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å®¿èˆ&quot;</span>&gt;</span>101<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ‰©å±•æ–¹å¼æ³¨å…¥">æ‰©å±•æ–¹å¼æ³¨å…¥</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:c</span>=<span class="string">&quot;http://www.springframework.org/schema/c&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- på‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§å€¼ property --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Hello&quot;</span> <span class="attr">p:str</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- cå‘½åç©ºé—´æ³¨å…¥ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ constructor-args --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Hello&quot;</span> <span class="attr">c:str</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å– Spring ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯¹è±¡éƒ½äº¤ç”± Spring ç®¡ç†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å»å–</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">hello</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="type">Hello</span> <span class="variable">hello0</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello0&quot;</span>);</span><br><span class="line">        System.out.println(hello);</span><br><span class="line">        System.out.println(hello0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦å¯¼å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br></pre></td></tr></table></figure>
<p>å…±ä¸¤éƒ¨åˆ†</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/1d2ccb18.html">Springï¼ˆä¸€ï¼‰ï¼ˆå½“å‰ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/2d3a27c0.html">Springï¼ˆäºŒï¼‰</a></li>
</ul>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Springï¼ˆäºŒï¼‰</title>
    <url>/article/2d3a27c0.html</url>
    <content><![CDATA[<p>å…±ä¸¤éƒ¨åˆ†</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/1d2ccb18.html">Springï¼ˆä¸€ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/2d3a27c0.html">Springï¼ˆäºŒï¼‰ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1WE411d7Dv">https://www.bilibili.com/video/BV1WE411d7Dv</a></p>
<p><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core</a></p>
<span id="more"></span>
<h1 id="beanä½œç”¨åŸŸ">Beanä½œç”¨åŸŸ</h1>
<p>he following table describes the supported scopes:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Scope</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-singleton">singleton</a></td>
<td style="text-align: left;">(Default) Scopes a single bean definition
to a single object instance for each Spring IoC container.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-prototype">prototype</a></td>
<td style="text-align: left;">Scopes a single bean definition to any
number of object instances.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request">request</a></td>
<td style="text-align: left;">Scopes a single bean definition to the
lifecycle of a single HTTP request. That is, each HTTP request has its
own instance of a bean created off the back of a single bean definition.
Only valid in the context of a web-aware Spring
<code>ApplicationContext</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-session">session</a></td>
<td style="text-align: left;">Scopes a single bean definition to the
lifecycle of an HTTP <code>Session</code>. Only valid in the context of
a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-application">application</a></td>
<td style="text-align: left;">Scopes a single bean definition to the
lifecycle of a <code>ServletContext</code>. Only valid in the context of
a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket-stomp-websocket-scope">websocket</a></td>
<td style="text-align: left;">Scopes a single bean definition to the
lifecycle of a <code>WebSocket</code>. Only valid in the context of a
web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
</tbody>
</table>
<p>1ã€å•ä¾‹æ¨¡å¼</p>
<figure>
<img data-src="https://docs.spring.io/spring-framework/docs/current/reference/html/images/singleton.png"
alt="å•ä¾‹æ¨¡å¼" />
<figcaption aria-hidden="true">å•ä¾‹æ¨¡å¼</figcaption>
</figure>
<p>2ã€åŸå‹æ¨¡å¼</p>
<figure>
<img data-src="https://docs.spring.io/spring-framework/docs/current/reference/html/images/prototype.png"
alt="åŸå‹æ¨¡å¼" />
<figcaption aria-hidden="true">åŸå‹æ¨¡å¼</figcaption>
</figure>
<p>3ã€å…¶ä½™ requestã€sessionã€application åœ¨ web å¼€å‘ä½¿ç”¨</p>
<h1 id="beanè‡ªåŠ¨è£…é…">Beanè‡ªåŠ¨è£…é…</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    </span><br><span class="line">    ã€‚ã€‚ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="bynameè‡ªåŠ¨è£…é…">ByNameè‡ªåŠ¨è£…é…</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å±æ€§ä¸ bean ä¸­å·²é…ç½®idä¸€è‡´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°æ¨&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="bytypeè‡ªåŠ¨è£…é…">ByTypeè‡ªåŠ¨è£…é…</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å±æ€§ä¸ bean ä¸­å·²é…ç½®ç±»å‹ä¸€è‡´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°æ¨&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="noconstructor">no/constructor</h2>
<h2 id="æ³¨è§£å®ç°è‡ªåŠ¨è£…é…">æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h2>
<p>JDK1.5æ”¯æŒæ³¨è§£ï¼ŒSpring2.5æ”¯æŒæ³¨è§£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="autowried"><span class="citation"
data-cites="Autowried">@Autowried</span></h3>
<p>ç›´æ¥åœ¨å±æ€§å‰ä½¿ç”¨ï¼Œä¹Ÿå¯åœ¨ set æ–¹æ³•ä¸Šä½¿ç”¨</p>
<p>ä½¿ç”¨ Autowried å°±ä¸ç”¨ç¼–å†™ set æ–¹æ³•äº†ï¼Œå‰ææ˜¯è¿™ä¸ªè£…é…çš„å±æ€§åœ¨ IOC
å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆ ByName</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Nullable</span> è¡¨æ˜å­—æ®µå¯ä¸ºç©º</span><br></pre></td></tr></table></figure>
<p>Autowired é»˜è®¤requiredä¸º trueï¼ˆéç©ºï¼Œä¸æ¥å—ç©ºï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Autowired &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½® false åˆ™å¯ç©º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false)</span></span><br></pre></td></tr></table></figure>
<p><code>@Primary</code></p>
<p><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-autowired-annotation-primary">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-autowired-annotation-primary</a></p>
<p><code>@Qualifier</code></p>
<p>é™å®šç¬¦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieRecommender</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;main&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-autowired-annotation-qualifiers">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-autowired-annotation-qualifiers</a></p>
<p><strong><span class="citation"
data-cites="Resourceæ³¨è§£">@Resourceæ³¨è§£</span></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;dog2&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    </span><br><span class="line">    ã€‚ã€‚ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><span class="citation" data-cites="Resource">@Resource</span>
å’Œ@Autowried åŒºåˆ«ï¼š</strong></p>
<ul>
<li>éƒ½ç”¨æ¥è‡ªåŠ¨è£…é…ï¼Œéƒ½ç”¨åœ¨å±æ€§å­—æ®µä¸Š</li>
<li><span class="citation" data-cites="Autowried">@Autowried</span> é€šè¿‡
ByName çš„æ–¹å¼å®ç°</li>
<li><span class="citation" data-cites="Resource">@Resource</span>
é»˜è®¤é€šè¿‡ ByName çš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡ ByType
å®ç°ï¼Œå¦‚æœéƒ½æ‰¾ä¸åˆ°æŠ¥é”™</li>
</ul>
<h1 id="æ³¨è§£å¼€å‘">æ³¨è§£å¼€å‘</h1>
<p>å¿…é¡»ä¿è¯ aop çš„åŒ…å¯¼å…¥</p>
<p>ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥ context çº¦æŸï¼Œå¢åŠ æ³¨è§£æ”¯æŒ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="åŒ…æ‰«æ">åŒ…æ‰«æ</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wnh.pojo&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>å±æ€§æ³¨å…¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç­‰ä»·äº &lt;property name=&quot;name&quot; value=&quot;è€æ¨&quot;/&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Value(&quot;è€æ¨&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><span class="citation"
data-cites="Component">@Component</span> è¡ç”Ÿæ³¨è§£ï¼Œæ ¹æ® web
åˆ†å±‚ï¼š</strong></p>
<ul>
<li><p>daoå±‚æ³¨è§£ï¼š<span class="citation"
data-cites="Repository">@Repository</span></p></li>
<li><p>serviceå±‚æ³¨è§£ï¼š<span class="citation"
data-cites="Service">@Service</span></p></li>
<li><p>æ§åˆ¶å™¨å±‚æ³¨è§£ï¼š<span class="citation"
data-cites="Controller">@Controller</span></p></li>
</ul>
<h2 id="ä½œç”¨åŸŸ">ä½œç”¨åŸŸ</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç­‰ä»·äº &lt;property name=&quot;name&quot; value=&quot;è€æ¨&quot;/&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Value(&quot;è€æ¨&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="xml-ä¸æ³¨è§£">xml ä¸æ³¨è§£</h2>
<ul>
<li>xml æ›´ä¸‡èƒ½ï¼Œä½¿ç”¨ä»»ä½•åœºåˆï¼Œç»´æŠ¤æ–¹ä¾¿</li>
<li>æ³¨è§£ç»´æŠ¤å¤æ‚</li>
</ul>
<h1 id="java-æ–¹å¼é…ç½®-spring">Java æ–¹å¼é…ç½® Spring</h1>
<p><a
href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java</a></p>
<h1 id="aop">AOP</h1>
<h2 id="ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</h2>
<p><a
href="https://www.cnblogs.com/daniels/p/8242592.html">https://www.cnblogs.com/daniels/p/8242592.html</a></p>
<p><a
href="http://c.biancheng.net/view/1359.html">http://c.biancheng.net/view/1359.html</a></p>
<p>ä»£ç†æ¨¡å¼çš„å®šä¹‰ï¼šç”±äºæŸäº›åŸå› éœ€è¦ç»™æŸå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®ã€‚è¿™æ—¶ï¼Œè®¿é—®å¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ç›®æ ‡å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡ä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´çš„ä¸­ä»‹ã€‚</p>
<p>ä»£ç†æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æœ‰ï¼š</p>
<ul>
<li>ä»£ç†æ¨¡å¼åœ¨å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸€ä¸ªä¸­ä»‹ä½œç”¨å’Œä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œç”¨ï¼›</li>
<li>ä»£ç†å¯¹è±¡å¯ä»¥æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼›</li>
<li>ä»£ç†æ¨¡å¼èƒ½å°†å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œå¢åŠ äº†ç¨‹åºçš„å¯æ‰©å±•æ€§</li>
</ul>
<p>å…¶ä¸»è¦ç¼ºç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä»£ç†æ¨¡å¼ä¼šé€ æˆç³»ç»Ÿè®¾è®¡ä¸­ç±»çš„æ•°é‡å¢åŠ </li>
<li>åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´å¢åŠ ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¼šé€ æˆè¯·æ±‚å¤„ç†é€Ÿåº¦å˜æ…¢ï¼›</li>
<li>å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼›</li>
</ul>
<p><strong>é™æ€ä»£ç†</strong></p>
<p><strong>é™æ€ä»£ç†æ€»ç»“ï¼š</strong></p>
<p>ä¼˜ç‚¹ï¼šå¯ä»¥åšåˆ°åœ¨ç¬¦åˆå¼€é—­åŸåˆ™çš„æƒ…å†µä¸‹å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚</p>
<p>ç¼ºç‚¹ï¼šæˆ‘ä»¬å¾—ä¸ºæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¾—åˆ›å»ºä»£ç†ç±»ï¼Œå·¥ä½œé‡å¤ªå¤§ï¼Œä¸æ˜“ç®¡ç†ã€‚åŒæ—¶æ¥å£ä¸€æ—¦å‘ç”Ÿæ”¹å˜ï¼Œä»£ç†ç±»ä¹Ÿå¾—ç›¸åº”ä¿®æ”¹ã€‚</p>
<p><strong>åŠ¨æ€ä»£ç†</strong></p>
<p>éœ€è¦ä¸¤ä¸ªç±»ï¼šProxyï¼šä»£ç†ï¼ŒInvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åº</p>
<p><strong>æ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BuyHouse</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">buyHouse</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å®ç°ç±»</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class BuyHouseImpl implements BuyHouse&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void buyHouse() &#123;</span><br><span class="line">        System.out.println(&quot;buyHouse&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åŠ¨æ€ä»£ç†</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicProxyHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object object;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DynamicProxyHandler</span><span class="params">(<span class="keyword">final</span> Object object)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.object=object;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;before&quot;</span>);</span><br><span class="line">        Object result=method.invoke(object,args);</span><br><span class="line">        System.out.println(<span class="string">&quot;after&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BuyHouse</span> <span class="variable">buyHouse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BuyHouseImpl</span>();</span><br><span class="line">        <span class="type">BuyHouse</span> <span class="variable">proxyBuyHouse</span> <span class="operator">=</span> (BuyHouse) Proxy.newProxyInstance(BuyHouse.class.getClassLoader(), <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;BuyHouse.class&#125;, <span class="keyword">new</span> <span class="title class_">DynamicProxyHandler</span>(buyHouse));</span><br><span class="line">        proxyBuyHouse.buyHouse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="aopå®ç°">AOPå®ç°</h2>
<p>å¯¼å…¥ä¾èµ–åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–¹å¼ä¸€">æ–¹å¼ä¸€</h3>
<p>åŸç”Ÿ Spring APIæ¥å£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;beforeLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.log.BeforeLog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ–¹å¼ä¸€ï¼šä½¿ç”¨åŸç”Ÿ Spring API æ¥å£ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® aop éœ€è¦å¯¼å…¥ aop çš„çº¦æŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹ executionï¼šè¡¨è¾¾å¼ execution(è¦æ‰§è¡Œçš„ä½ç½® ä¿®é¥°è¯ è¿”å›å€¼ ç±»å æ–¹æ³•å å‚æ•°)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.wnh.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ‰§è¡Œç¯ç»• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;beforeLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>UserService æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserServiceImpl å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;select&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>BeforeLog</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeforeLog</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(target.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AfterLog</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AfterLog</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> returnValue è¿”å›å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+ method.getName()+<span class="string">&quot;æ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºï¼š&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">    userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹å¼äºŒ">æ–¹å¼äºŒ</h3>
<p>è‡ªå®šä¹‰ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiyPointCut</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼äºŒï¼šè‡ªå®šä¹‰ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.diy.DiyPointCut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå®šä¹‰åˆ‡é¢ï¼Œref è¦å¼•ç”¨çš„ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.wnh.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é€šçŸ¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•åŒä¸Š</p>
<h3 id="æ–¹å¼ä¸‰">æ–¹å¼ä¸‰</h3>
<p>æ³¨è§£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼ä¸‰ï¼šæ³¨è§£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPoint&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.diy.AnnotationPoint&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯æ³¨è§£æ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç±»æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span> <span class="comment">// æ ‡æ³¨ä¸ºåˆ‡é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationPoint</span> &#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.wnh.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.wnh.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦è·å–çš„åˆ‡å…¥ç‚¹</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.wnh.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;be-around&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> jp.getSignature();</span><br><span class="line">        System.out.println(<span class="string">&quot;signatureï¼š&quot;</span>+signature);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> jp.proceed();</span><br><span class="line"></span><br><span class="line">        System.out.println(proceed);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;af-around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•åŒä¸Š</p>
<h1 id="æ•´åˆ-mybatis">æ•´åˆ Mybatis</h1>
<p><a
href="https://mybatis.org/spring/zh/index.html">https://mybatis.org/spring/zh/index.html</a></p>
<h2 id="mybatis-spring">Mybatis-Spring</h2>
<p>åœ¨å¼€å§‹ä½¿ç”¨ MyBatis-Spring ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆç†Ÿæ‚‰ Spring å’Œ MyBatis
è¿™ä¸¤ä¸ªæ¡†æ¶å’Œæœ‰å…³å®ƒä»¬çš„æœ¯è¯­ã€‚è¿™å¾ˆé‡è¦â€”â€”å› ä¸ºæœ¬æ‰‹å†Œä¸­ä¸ä¼šæä¾›äºŒè€…çš„åŸºæœ¬å†…å®¹ï¼Œå®‰è£…å’Œé…ç½®æ•™ç¨‹ã€‚</p>
<p>MyBatis-Spring éœ€è¦ä»¥ä¸‹ç‰ˆæœ¬ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">MyBatis-Spring</th>
<th style="text-align: left;">MyBatis</th>
<th style="text-align: left;">Spring Framework</th>
<th style="text-align: left;">Spring Batch</th>
<th style="text-align: left;">Java</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>2.0</strong></td>
<td style="text-align: left;">3.5+</td>
<td style="text-align: left;">5.0+</td>
<td style="text-align: left;">4.0+</td>
<td style="text-align: left;">Java 8+</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>1.3</strong></td>
<td style="text-align: left;">3.4+</td>
<td style="text-align: left;">3.2.2+</td>
<td style="text-align: left;">2.1+</td>
<td style="text-align: left;">Java 6+</td>
</tr>
</tbody>
</table>
<p><strong>å®‰è£…</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>mybatis-config.xml åªç•™ä¸‹ typeAliases å’Œ setting å³å¯</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wnh.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="sqlsessiontemplate">SqlSessionTemplate</h2>
<p>1ã€ç¼–å†™æ•°æ®æº</p>
<p>2ã€sqlSessionFactory</p>
<p>3ã€sqlSessionTemplate</p>
<p>4ã€æ¥å£å®ç°ç±»</p>
<p>UserMapperImpl</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨åŸæ¥æ‰€æœ‰æ“ä½œéƒ½ä½¿ç”¨ sqlSession æ¥æ“ä½œï¼Œç°åœ¨ä½¿ç”¨ SqlSessionTemplate</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlSession</span><span class="params">(SqlSessionTemplate sqlSession)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSession = sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5ã€å°†å®ç°ç±»æ³¨å…¥ Spring</p>
<p>spring-dao.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- DataSourceï¼šä½¿ç”¨ spring çš„æ•°æ®æºæ›¿æ¢ mybatis çš„é…ç½® cp30 dbcp druid --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»‘å®š Mybatis é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/wnh/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- SqlSessionTemplate å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„ SqlSession --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>applicationConext.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-dao.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>6ã€æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; users = mapper.selectUser();</span><br><span class="line">    <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>  &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-dao.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>,UserMapper.class);</span><br><span class="line">    List&lt;User&gt; users = mapper.selectUser();</span><br><span class="line">    <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>  &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>,UserMapper.class);</span><br><span class="line">    List&lt;User&gt; users = mapper.selectUser();</span><br><span class="line">    <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="sqlsessiondaosupport">SqlSessionDaoSupport</h2>
<p>UserMapperImpl2 ç»§æ‰¿ SqlSessionDaoSupport</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl2</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wnh.mapper.UserMapperImpl2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>  &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper2&quot;</span>,UserMapper.class);</span><br><span class="line">    List&lt;User&gt; users = mapper.selectUser();</span><br><span class="line">    <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="äº‹åŠ¡transaction">äº‹åŠ¡ï¼ˆtransactionï¼‰</h1>
<h2 id="æ ‡å‡†é…ç½®">æ ‡å‡†é…ç½®</h2>
<p>è¦å¼€å¯ Spring çš„äº‹åŠ¡å¤„ç†åŠŸèƒ½ï¼Œåœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ª
<code>DataSourceTransactionManager</code> å¯¹è±¡ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…±ä¸¤éƒ¨åˆ†</p>
<ul>
<li><a
href="https://wnhyang.github.io/article/1d2ccb18.html">Springï¼ˆä¸€ï¼‰</a></li>
<li><a
href="https://wnhyang.github.io/article/2d3a27c0.html">Springï¼ˆäºŒï¼‰ï¼ˆå½“å‰ï¼‰</a></li>
</ul>
]]></content>
      <tags>
        <tag>Spring Framework</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå…¥é—¨</title>
    <url>/article/df7b5028.html</url>
    <content><![CDATA[<p>ä¸€å¿ƒæƒ³åšåç«¯ï¼Œå¯¹äºå‰ç«¯æ˜¯ä¸å¤ªä¹æ„å»åšçš„ï¼Œä½†åŸºæœ¬çš„äº†è§£è¿˜æ˜¯éœ€è¦çš„ã€‚å»å¹´<code>Java Web</code>è¯¾ç¨‹ä½œä¸šé¡¹ç›®ï¼Œå°±æ˜¯å‰åç«¯å…¨åŒ…ï¼Œä¸è¿‡é‚£æ—¶å‰ç«¯ç”¨çš„è¿˜æ˜¯ä¼ ç»Ÿçš„<code>JSP</code>ï¼Œç€å®æ„Ÿè§‰ä¸å¤ªèˆ’æœï¼Œå­¦è¿‡<code>SpringBoot</code>äº†ï¼Œä½¿ç”¨äº†<code>Thymeleaf</code>ï¼Œä½“ä¼šåˆ°å¼€å‘çš„ä¾¿æ·ï¼Œè®¤è¯†åˆ°äº†å‰åç«¯åˆ†ç¦»ï¼Œè¶Šå‘æ„Ÿåˆ°ä¹‹å‰çš„å¼€å‘æ¨¡å¼æ˜¯è¯¥è¢«å–ä»£äº†ã€‚</p>
<p>ç»ˆäºæœ‰æœºä¼šè®¤è¯†å‰ç«¯çš„ä¸€äº›ä¸œè¥¿äº†ï¼Œæœ¬æ¥æˆ‘çš„è¿™ä¸ªåšå®¢æ¡†æ¶å°±ä¸å‰ç«¯è„±ä¸å¼€å…³ç³»ï¼Œ<code>Node.js</code>ã€<code>npm</code>è¿™äº›éƒ½æ˜¯æˆ‘åšå®¢æ­å»ºçš„åŸºç¡€ï¼Œè¿™æ¬¡æ¥ç®€å•å…¥é—¨<code>Vue</code>ã€‚</p>
<span id="more"></span>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li>Bç«™è§†é¢‘ï¼š<a
href="https://www.bilibili.com/video/BV12J411m7MG">https://www.bilibili.com/video/BV12J411m7MG</a></li>
<li>Vueå®˜ç½‘ï¼š<a
href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></li>
<li>axiosä¸­æ–‡æ–‡æ¡£ï¼š<a
href="http://axios-js.com/zh-cn/docs/">http://axios-js.com/zh-cn/docs/</a></li>
</ul>
<h1 id="æè¦">æè¦</h1>
<p>å¿…è¦çŸ¥è¯†ï¼šå‰ç«¯ä¸‰å‰‘å®¢ï¼ˆHTMLã€CSSã€JSï¼‰+ Ajax</p>
<p>å¼€å‘ç¯å¢ƒï¼šVSCode + Live Serverã€Chrome</p>
<p>æ¨èVSCodeæ’ä»¶ï¼šAuto Close Tagã€Auto Rename Tagã€Veturã€æ ¹æ®éœ€è¦å‚è€ƒ
<a
href="https://www.jianshu.com/p/3eebde5748a6">VScodeæ’ä»¶æ¨èï¼ˆå…¨é¢ï¼‰</a></p>
<p>Live Server ç®€å•ä½¿ç”¨è¯´æ˜ï¼šä½¿ç”¨Live
Serverä¸»è¦åŸå› æ˜¯å¼€å¯æœ¬åœ°æœåŠ¡å¹¶åœ¨ä¿å­˜æ—¶åˆ·æ–°é¡µé¢ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œåœ¨VSCodeéœ€è¦ä½¿ç”¨Live
Server
é¡µé¢å³é”®é€‰æ‹©<code>Open with Live Server</code>æˆ–<code>Stop Live Server</code>ã€‚</p>
<p>æœ€åä¼šæ”¾ä¸Šæˆ‘çš„å…¨éƒ¨æºç é“¾æ¥ï¼Œå¸Œæœ›æœ‰å¸®åŠ©ã€‚</p>
<h1 id="å®‰è£…">å®‰è£…</h1>
<p>å®˜æ–¹è¯´çš„éå¸¸æ¸…æ¥šäº†æ–°æ‰‹å…¥é—¨ä½¿ç”¨</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="è®¤è¯†vue">è®¤è¯†Vue</h1>
<p>Vue.js çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå…è®¸é‡‡ç”¨ç®€æ´çš„æ¨¡æ¿è¯­æ³•æ¥å£°æ˜å¼åœ°å°†æ•°æ®æ¸²æŸ“è¿› DOM
çš„ç³»ç»Ÿï¼š</p>
<p>å®˜æ–¹ç¤ºä¾‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr />
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ä¸Šé¢æ˜¯åœ¨htmlä¸­ï¼Œä¸‹é¢åœ¨jsä¸­</p>
<p>ç®€å•ç†è§£ï¼Œå£°æ˜<code>app</code>é€šè¿‡<code>el</code>ä¸<code>div-app</code>ç»‘å®šï¼Œè¿™æ—¶<code>div-app</code>ä¸<code>app-Vue</code>åŒå±äºä¸€ä¸ªåŸŸï¼Œ<code>data</code>ç±»ä¼¼å£°æ˜æ•°æ®ï¼ˆkey-valueï¼‰ï¼Œé€šè¿‡<code>&#123;&#123;x&#125;&#125;</code>ï¼Œå–å€¼</p>
<h1 id="åŸºæœ¬">åŸºæœ¬</h1>
<p><strong>v-textï¼š</strong>æ˜¾ç¤ºæ–‡æœ¬ï¼Œæ›¿æ¢é—®é¢˜</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;message+&#x27;!&#x27;&quot;</span>&gt;</span>æµ‹è¯•æ‹¼æ¥<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="comment">&lt;!-- ç»“æœï¼šmessageï¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;info+&#x27;?&#x27;&quot;</span>&gt;</span>æµ‹è¯•æ‹¼æ¥<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>	<span class="comment">&lt;!-- ç»“æœï¼šinfoï¼Ÿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æ‹¼æ¥&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="comment">&lt;!-- ç»“æœï¼šæ‹¼æ¥message --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> text=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#text&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>:<span class="string">&quot;textæ˜¾ç¤º&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">info</span>:<span class="string">&quot;ä¿¡æ¯å±•ç¤º&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-htmlï¼š</strong>æ˜¾ç¤ºæ–‡æœ¬ï¼Œè‹¥æ˜¯htmlå…ƒç´ åˆ™è§£æ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;html&quot;</span>&gt;</span>	<span class="comment">&lt;!-- contentä¸º&lt;a&gt;è¶…é“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>	<span class="comment">&lt;!-- è§£ææˆè¶…é“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>	<span class="comment">&lt;!-- è§£ææˆè¶…é“¾æ¥æ–‡æœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> html=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#html&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">content</span>:<span class="string">&quot;&lt;a href=&#x27;https:/wnhyang.github.io&#x27;&gt;åšå®¢&lt;/a&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-onï¼š</strong>äº‹ä»¶å¤„ç†ï¼Œå¯ç”¨@ä»£æ›¿ï¼Œå‡½æ•°å¦‚ä¸‹methodséƒ¨åˆ†ï¼Œåœ¨Chromeæ£€æŸ¥æ§åˆ¶å°æŸ¥çœ‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;on&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;v-onæŒ‡ä»¤&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doIt&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;@æŒ‡ä»¤&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doIt&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŒå‡»&quot;</span> @<span class="attr">dblclick</span>=<span class="string">&quot;doIt&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> @<span class="attr">click</span>=<span class="string">&quot;changeFood&quot;</span>&gt;</span>&#123;&#123;food&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> on=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#on&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">food</span>:<span class="string">&quot;è¥¿çº¢æŸ¿&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">doIt</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&quot;doit&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">changeFood</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">food</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">food</span>+=<span class="string">&quot;å¦‚æœï¼&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-showï¼š</strong>çŠ¶æ€ï¼Œæœ¬è´¨æ”¹å˜äº†æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeIsShow&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç´¯åŠ å¹´é¾„&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addAge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./img/123.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-show</span>=<span class="string">&quot;age&gt;=18&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./img/123.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> show=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#show&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">isShow</span>:<span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>:<span class="number">17</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">changeIsShow</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">isShow</span>=!<span class="variable language_">this</span>.<span class="property">isShow</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">addAge</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">age</span>++;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-ifï¼š</strong>çŠ¶æ€ï¼Œç›´æ¥åœ¨æˆ–ä¸åœ¨ï¼ŒåŒºåˆ†ä¸v-showï¼Œå‘ç°v-ifç›´æ¥å½±å“æ•´ä¸ªå…ƒç´ ï¼Œä¸æ˜¯v-showæ”¹å˜çŠ¶æ€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;ifapp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åˆ‡æ¢æ˜¾ç¤º&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toggleIsShow&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>v-ifå¥½å—<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>v-showå¥½å—<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;temperature&gt;=35&quot;</span>&gt;</span>çƒ­æ­»äº†<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ifapp=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#ifapp&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">isShow</span>:<span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">temperature</span>:<span class="number">40</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">toggleIsShow</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">isShow</span>=!<span class="variable language_">this</span>.<span class="property">isShow</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-bindï¼š</strong>ç»‘å®šï¼Œä½œç”¨äºå…ƒç´ å±æ€§ï¼Œå¯ç®€å†™ä¸º:å±æ€§ï¼Œä¸‰å…ƒè¡¨è¾¾å¼æˆ–"{active:isActive}"ï¼Œæ¨èåè€…</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.active</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bind&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgSrc&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;imgSrc&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;imgTitle+&#x27;!!!&#x27;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;isActive?&#x27;active&#x27;:&#x27;&#x27;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toggleActive&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;imgSrc&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;imgTitle+&#x27;!!!&#x27;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:isActive&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toggleActive&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> bind=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#bind&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">imgSrc</span>:<span class="string">&quot;https://cn.vuejs.org/images/logo.png&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">imgTitle</span>:<span class="string">&quot;Vue&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">isActive</span>:<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">toggleActive</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">isActive</span>=!<span class="variable language_">this</span>.<span class="property">isActive</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-forï¼š</strong>å¾ªç¯ï¼Œçœ‹ä¸‹ç¤ºä¾‹å³å¯</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;forapp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ·»åŠ æ•°æ®&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç§»é™¤æ•°æ®&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;remove&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in arr&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;index&#125;&#125;Vue:&#123;&#123;item&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-for</span>=<span class="string">&quot;item in vegetables&quot;</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;item.name&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;item.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> forapp=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#forapp&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">arr</span>:[<span class="string">&quot;åŒ—äº¬&quot;</span>,<span class="string">&quot;ä¸Šæµ·&quot;</span>,<span class="string">&quot;å¹¿å·&quot;</span>,<span class="string">&quot;æ·±åœ³&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">vegetables</span>:[</span></span><br><span class="line"><span class="language-javascript">                    &#123;<span class="attr">name</span>:<span class="string">&quot;è¥¿çº¢æŸ¿ç‚’é¸¡è›‹&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123;<span class="attr">name</span>:<span class="string">&quot;å‡‰æ‹Œé»„ç“œ&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">vegetables</span>.<span class="title function_">push</span>(&#123;<span class="attr">name</span>:<span class="string">&quot;ç‚’åœŸè±†ä¸&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">remove</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">vegetables</span>.<span class="title function_">shift</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-modelï¼š</strong>åŒå‘ç»‘å®šï¼Œå¦‚ä¸‹ï¼Œdiv-modelappä¸modelapp-VueåŸŸåŒæ­¥æ”¹å˜</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">modelapp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¿®æ”¹message&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;setM&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;getM&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> modelapp=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#modelapp&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>:<span class="string">&quot;Vue&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">getM</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">message</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">setM</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">message</span>=<span class="string">&quot;VueDemo&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å®ä¾‹">å®ä¾‹</h1>
<h2 id="è®¡æ•°å™¨">è®¡æ•°å™¨</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sub&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> counter=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#counter&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">num</span>:<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;add&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">num</span>&lt;<span class="number">10</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">num</span>++;</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&#x27;åˆ«ç‚¹äº†ï¼Œæœ€å¤§äº†&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">sub</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sub&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">num</span>&gt;<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">num</span>--;</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&#x27;åˆ«ç‚¹äº†ï¼Œæœ€å°äº†&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è®°äº‹æœ¬">è®°äº‹æœ¬</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;todoapp&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">               Vueè®°äº‹æœ¬</span><br><span class="line">           <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;inputValue&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;add&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in list&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;index+1&#125;&#125;.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;remove(index)&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                   </span><br><span class="line">               <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;list.length!=0&quot;</span>&gt;</span>æ€»æ•°ï¼š&#123;&#123;list.length&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;clear&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;list.length!=0&quot;</span>&gt;</span>Clear<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> todoapp=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">el</span>:<span class="string">&quot;#todoapp&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">list</span>:[<span class="string">&quot;å†™ä»£ç &quot;</span>,<span class="string">&quot;åƒé¥­&quot;</span>,<span class="string">&quot;ç¡è§‰&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">inputValue</span>:<span class="string">&quot;content&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">           &#125;,</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">inputValue</span>);</span></span><br><span class="line"><span class="language-javascript">               &#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">remove</span>:<span class="keyword">function</span>(<span class="params">index</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">splice</span>(index,<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">               &#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">clear</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">this</span>.<span class="property">list</span>=[];</span></span><br><span class="line"><span class="language-javascript">               &#125;</span></span><br><span class="line"><span class="language-javascript">           &#125;</span></span><br><span class="line"><span class="language-javascript">       &#125;)</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="axios">axios</h1>
<p>ç®€å•çš„è¯´ï¼šAjaxçš„å°è£…ç‰ˆï¼Œç®€å•å®ç”¨</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;get&quot;</span> <span class="attr">class</span>=<span class="string">&quot;get&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;post&quot;</span> <span class="attr">class</span>=<span class="string">&quot;post&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ç”¨çš„æ˜¯jså‘¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.get&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/api/joke/list?num=6&#x27;</span>).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>); <span class="comment">//å¥½åƒæ˜¯dataå§</span></span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.post&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">post</span>(<span class="string">&#x27;https://autumnfish.cn/api/user/reg&#x27;</span>,&#123;<span class="attr">username</span>:<span class="string">&quot;è¥¿å…°èŠ±10&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span></span><br><span class="line"><span class="language-javascript">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç”¨åˆ°åœ¨çº¿APIï¼šhttps://autumnfish.cn/api/joke/list?num=6
è·å–6æ¡ç¬‘è¯ï¼Œhttps://autumnfish.cn/api/user/reg æ³¨å†Œç”¨æˆ·</p>
<h1 id="vue-axios">vue-axios</h1>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è·å–ç¬‘è¯&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;getJoke&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;joke&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> app=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">joke</span>:<span class="string">&quot;ç¬‘è¯&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">getJoke</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">joke</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> that=<span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/api/joke&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                        that.<span class="property">joke</span>=response.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// this.joke=response.data;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»”ç»†çœ‹ï¼šthisï¼Œthat</p>
<h1 id="å®ä¾‹-1">å®ä¾‹</h1>
<h2 id="æŸ¥å¤©æ°”">æŸ¥å¤©æ°”</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;searchWeather&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;city&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥åœ°åŒºæŸ¥å¤©æ°”&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;searchWeather&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCity(&#x27;åŒ—äº¬&#x27;)&quot;</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCity(&#x27;ä¸Šæµ·&#x27;)&quot;</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCity(&#x27;å¹¿å·&#x27;)&quot;</span>&gt;</span>å¹¿å·<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeCity(&#x27;æ·±åœ³&#x27;)&quot;</span>&gt;</span>æ·±åœ³<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in weatherList&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;item.type&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123;item.low&#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">            ~</span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123;item.high&#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;item.date&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue-weather.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr />
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> app=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">city</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">weatherList</span>:[],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="attr">searchWeather</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">// console.log(&#x27;å¤©æ°”æŸ¥è¯¢&#x27;);</span></span><br><span class="line">            <span class="comment">// console.log(this.city);</span></span><br><span class="line">            <span class="keyword">var</span> that=<span class="variable language_">this</span>;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;http://wthrcdn.etouch.cn/weather_mini?city=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">city</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>.<span class="property">data</span>.<span class="property">forecast</span>);</span><br><span class="line">                that.<span class="property">weatherList</span>=response.<span class="property">data</span>.<span class="property">data</span>.<span class="property">forecast</span>;</span><br><span class="line">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">changeCity</span>:<span class="keyword">function</span>(<span class="params">city</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">city</span>=city;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">searchWeather</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç”¨åˆ°APIï¼šhttp://wthrcdn.etouch.cn/weather_mini?city=
æŸ¥æŸåœ°è¿‘å‡ å¤©å¤©æ°”ï¼Œé€šè¿‡console.log()ï¼ŒæŸ¥çœ‹è¿”å›æ•°æ®ï¼Œæ‰¾åˆ°éœ€è¦çš„æ•°æ®</p>
<h2 id="éŸ³ä¹æ’­æ”¾å™¨">éŸ³ä¹æ’­æ”¾å™¨</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;!isShow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;searchMusic&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;query&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;searchMusic&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in musicList&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;playMusic(item.id)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;item.mvid!=0&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;playMV(item.mvid)&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>mv<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;playing:isPlaying&#125;&quot;</span>&gt;</span>æ’­æ”¾ä¸­<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;musicCover&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">audio</span> <span class="attr">ref</span>=<span class="string">&#x27;audio&#x27;</span> <span class="attr">:src</span>=<span class="string">&quot;musicUrl&quot;</span> @<span class="attr">play</span>=<span class="string">&quot;play&quot;</span> @<span class="attr">pause</span>=<span class="string">&quot;pause&quot;</span> <span class="attr">controls</span> <span class="attr">autoplay</span> <span class="attr">loop</span> &gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dl</span> <span class="attr">v-for</span>=<span class="string">&quot;item in hotComments&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;50&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.user.avatarUrl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123;item.user.nickname&#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">:src</span>=<span class="string">&quot;mvUrl&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;hide&quot;</span>&gt;</span>hide<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticaly.com/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue-music.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr />
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> app=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢å…³é”®å­—</span></span><br><span class="line">        <span class="attr">query</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="comment">// æ­Œæ›²æ•°æ®</span></span><br><span class="line">        <span class="attr">musicList</span>:[],</span><br><span class="line">        <span class="comment">// æ­Œæ›²åœ°å€</span></span><br><span class="line">        <span class="attr">musicUrl</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="comment">// æ­Œæ›²å›¾ç‰‡</span></span><br><span class="line">        <span class="attr">musicCover</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="comment">// æ­Œæ›²è¯„è®º</span></span><br><span class="line">        <span class="attr">hotComments</span>:[],</span><br><span class="line">        <span class="comment">// åŠ¨ç”»æ’­æ”¾çŠ¶æ€</span></span><br><span class="line">        <span class="attr">isPlaying</span>:<span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// é®ç½©å±‚æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line">        <span class="attr">isShow</span>:<span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// MVåœ°å€</span></span><br><span class="line">        <span class="attr">mvUrl</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="attr">searchMusic</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">// console.log(this.query);</span></span><br><span class="line">            <span class="keyword">var</span> that=<span class="variable language_">this</span>;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/search?keywords=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">query</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                that.<span class="property">musicList</span>=response.<span class="property">data</span>.<span class="property">result</span>.<span class="property">songs</span>;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>.<span class="property">result</span>.<span class="property">songs</span>)</span><br><span class="line">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">playMusic</span>:<span class="keyword">function</span>(<span class="params">musicId</span>)&#123;</span><br><span class="line">            <span class="comment">// console.log(musicId);</span></span><br><span class="line">            <span class="keyword">var</span> that=<span class="variable language_">this</span>;</span><br><span class="line">            <span class="comment">// æ­Œæ›²åœ°å€</span></span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/song/url?id=&#x27;</span>+musicId)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span>);</span><br><span class="line">                that.<span class="property">musicUrl</span>=response.<span class="property">data</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span>;</span><br><span class="line">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// æ­Œæ›²å›¾ç‰‡</span></span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/song/detail?ids=&#x27;</span>+musicId)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>.<span class="property">songs</span>[<span class="number">0</span>].<span class="property">al</span>.<span class="property">picUrl</span>);</span><br><span class="line">                that.<span class="property">musicCover</span>=response.<span class="property">data</span>.<span class="property">songs</span>[<span class="number">0</span>].<span class="property">al</span>.<span class="property">picUrl</span>;</span><br><span class="line">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// æ­Œæ›²è¯„è®º</span></span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/comment/hot?type=0&amp;id=&#x27;</span>+musicId)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>.<span class="property">hotComments</span>);</span><br><span class="line">                that.<span class="property">hotComments</span>=response.<span class="property">data</span>.<span class="property">hotComments</span>;</span><br><span class="line">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">play</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;play&quot;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isPlaying</span>=<span class="literal">true</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pause</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isPlaying</span>=<span class="literal">false</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">playMV</span>:<span class="keyword">function</span>(<span class="params">mvid</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> that=<span class="variable language_">this</span>;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;https://autumnfish.cn/mv/url?id=&#x27;</span>+mvid)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>.<span class="property">data</span>.<span class="property">url</span>);</span><br><span class="line">                that.<span class="property">isShow</span>=<span class="literal">true</span>;</span><br><span class="line">                that.<span class="property">mvUrl</span>=response.<span class="property">data</span>.<span class="property">data</span>.<span class="property">url</span>;</span><br><span class="line">            &#125;,<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">hide</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isShow</span>=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç”¨åˆ°APIï¼š</p>
<ul>
<li>https://autumnfish.cn/search?keywords= æ ¹æ®å…³é”®è¯æŸ¥è¯¢</li>
<li>https://autumnfish.cn/song/url?id= æ ¹æ®æ­Œæ›²idæŸ¥è¯¢å…·ä½“æ­Œæ›²Url</li>
<li>https://autumnfish.cn/song/detail?ids=
æ ¹æ®æ­Œæ›²idæŸ¥è¯¢å…·ä½“æ­Œæ›²ä¿¡æ¯</li>
<li>https://autumnfish.cn/comment/hot?type=0&amp;id=
æ ¹æ®æ­Œæ›²idæŸ¥è¯¢å…·ä½“æ­Œæ›²çƒ­é—¨è¯„è®º</li>
<li>https://autumnfish.cn/mv/url?id= æ ¹æ®æ­Œæ›²mvidæŸ¥è¯¢å…·ä½“æ­Œæ›²mvUrl</li>
</ul>
<p>ä»¥ä¸Šçš†ä¸ºç½‘æ˜“äº‘æä¾›çš„APIï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆå¥‡å¦™çš„ï¼Œä½¿ç”¨é‚£äº›åœ¨çº¿å¼€æ”¾çš„APIå³å¯å®ç°çœ‹ä¼¼å¾ˆå¤æ‚çš„ä¸œè¥¿ï¼Œè®©æˆ‘å¯¹å‰ç«¯çš„å°è±¡æœ‰ç‚¹æ”¹è§‚</p>
<h1 id="æºç é“¾æ¥">æºç é“¾æ¥</h1>
<ul>
<li><a
href="https://gitee.com/wnhyang/vue-demo">https://gitee.com/wnhyang/vue-demo</a></li>
<li><a
href="https://github.com/wnhyang/vueDemo">https://github.com/wnhyang/vueDemo</a></li>
</ul>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å­¦äº†å°±æ˜¯ä¸ºäº†ç”¨ï¼Œç›®å‰å‡ ä¹æ‰€æœ‰å¼€æºçš„ä¼˜ç§€é¡¹ç›®ï¼Œæ€»æ˜¯åœ¨readmeä¸­å†™æ˜è‡ªå·±ç”¨åˆ°äº†é‚£äº›æŠ€æœ¯ï¼Œå‰åç«¯åˆ†ç¦»é¡¹ç›®ä¹Ÿå¤šçš„å¾ˆï¼Œå¾€å¾€éƒ½ä¼šçœ‹åˆ°è‡ªå·±æ²¡æœ‰å­¦è¿‡ç”šè‡³æ˜¯æ²¡æœ‰äº†è§£å’Œå¬è¯´çš„ï¼Œå¯¹äºå­¦ä¹ é‚£äº›ä¼˜ç§€é¡¹ç›®é˜»ç¢è¿˜æ˜¯å¾ˆå¤§äº†ï¼Œç»ˆäºç®—æ˜¯å…¥é—¨Vueäº†å§ï¼Œæ¥ä¸‹æ¥å¯èƒ½ä¼šåšä¸€äº›æœ‰è¶£çš„é¡¹ç›®ã€‚</p>
]]></content>
      <tags>
        <tag>Vue</tag>
        <tag>Git/GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowsæ›´æ–°Gitï¼ˆè½¬è½½ï¼‰</title>
    <url>/article/52936e2c.html</url>
    <content><![CDATA[<p><a
href="https://blog.csdn.net/RedaTao/article/details/104398408">è½¬è½½åŸæ–‡</a></p>
<h1 id="å…ˆæŸ¥çœ‹å½“å‰å®‰è£…çš„gitç‰ˆæœ¬">1ã€å…ˆæŸ¥çœ‹å½“å‰å®‰è£…çš„gitç‰ˆæœ¬</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure>
<h1 id="æ›´æ–°">2ã€æ›´æ–°</h1>
<p>gitç‰ˆæœ¬æ˜¯2.17.1ä¹‹å‰çš„ï¼Œä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git update</span><br></pre></td></tr></table></figure>
<p>gitç‰ˆæœ¬æ˜¯2.17.1ä¹‹åçš„ï¼Œä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git update-git-for-windows</span><br></pre></td></tr></table></figure>
<h1 id="ç‰ˆæœ¬æ˜¯2.14.1çš„ä¼šæç¤º">3ã€ç‰ˆæœ¬æ˜¯2.14.1çš„ï¼Œä¼šæç¤º</h1>
<p><strong>git: 'update' is not a git command</strong></p>
<p><strong>git: 'update-git-for-windows' is not a git
command</strong></p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼šé‡æ–°ä¸‹è½½æ–°ç‰ˆæœ¬å®‰è£…åŒ…ï¼Œè¦†ç›–å®‰è£…å³å¯</p>
<p>gitå®˜ç½‘ä¸‹è½½ï¼šhttps://git-scm.com/download/win ï¼ˆç‰¹åˆ«æ…¢ï¼ï¼ï¼‰</p>
<p>å¿«é€Ÿä¸‹è½½åœ°å€ï¼š<a
href="https://blog.csdn.net/RedaTao/article/details/104398525">ç‚¹è¿™é‡Œ</a></p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Git/GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/article/4a17b156.html</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very
first post. Check <a href="https://hexo.io/docs/">documentation</a> for
more info. If you get any problems when using Hexo, you can find the
answer in <a
href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or
you can ask me on <a
href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h1 id="quick-start">Quick Start</h1>
<h1 id="create-a-new-post">Create a new post</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a
href="https://hexo.io/docs/writing.html">Writing</a></p>
<h1 id="run-server">Run server</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h1 id="generate-static-files">Generate static files</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a
href="https://hexo.io/docs/generating.html">Generating</a></p>
<h1 id="deploy-to-remote-sites">Deploy to remote sites</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a
href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <tags>
        <tag>Node&amp;NPM</tag>
        <tag>åšå®¢</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Win11åˆä½“éªŒ</title>
    <url>/article/176feceb.html</url>
    <content><![CDATA[<h1 id="å£°æ˜">å£°æ˜</h1>
<p>2021/11/17æˆ‘çš„ç¬”è®°æœ¬å‘æˆ‘æ¨é€äº†Win11ï¼Œæ—©ä¹‹å‰Win10å·²ç»æç¤ºæˆ‘çš„ç¡¬ä»¶æ»¡è¶³å‡çº§Win11çš„è¦æ±‚ï¼Œæœç„¶å‡çº§æ¨é€é©¬ä¸Šå°±åˆ°äº†ã€‚</p>
<p>æˆ‘è¿˜æ˜¯ç®—æ¯”è¾ƒå…³å¿ƒè¿™ç§ç§‘æŠ€çš„æ–°é—»çš„ï¼ŒWin11åˆšåˆšå‘å¸ƒæ—¶ï¼Œä¹Ÿçœ‹è¿‡ä¸€äº›ä½“éªŒåˆ†äº«è§†é¢‘ï¼Œäº†è§£åˆ°ä¸€äº›ã€‚æ‰€ä»¥å½“å¤©è¿˜æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼ŒæœŸå¾…Win11èƒ½ç»™æˆ‘å¸¦æ¥ä¸€äº›æƒŠå–œã€‚ä»æˆ‘çœ‹åˆ°çš„ä¸€äº›ä½“éªŒè§†é¢‘æ¥è¯´Win11çš„å˜åŒ–è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¸ä»…ä»…æ˜¯UIçš„å˜åŒ–ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–ï¼ˆéä¸“ä¸šæˆ‘çš„ä¹Ÿè¯´ä¸æ¸…æ¥šï¼‰ã€‚æˆ‘æ˜¯å±äºé‚£ç§æ¿€è¿›åˆä¸å†’è¿›çš„é‚£ç§ï¼Œå¾ˆæƒ³ä½“éªŒå‡çº§ç»™æˆ‘å¸¦æ¥çš„æ–°é²œæ„Ÿï¼Œä½†åˆæ€•å‡çº§å¸¦æ¥çš„ä¸ç¨³å®šæ€§ã€‚æ‰€ä»¥æˆ‘æ€»æ˜¯ç­‰å¾…æ­£å¼ç‰ˆï¼ˆç¨³å®šç‰ˆï¼‰æ‰ä¼šå°è¯•ï¼Œä¸ä¼šç›´æ¥ä½¿ç”¨å°æ–°ç‰ˆï¼ˆæµ‹è¯•ç‰ˆï¼‰ã€‚å—åˆ°ä¸€éƒ¨åˆ†ä½“éªŒè§†é¢‘çš„å½±å“ï¼Œæœ‰äº›èƒ†æ€¯ä¸æ•¢å°è¯•ï¼Œä½†åˆ°ç¬¬äºŒå¤©è¿˜æ˜¯å¿ä¸ä½å‡çº§äº†ï¼Œæ¯•ç«Ÿå°é©¬è¿‡æ²³å˜›ï¼Œä½ ä¸è¯•è¯•æ€ä¹ˆçŸ¥é“æ°´æ·±ä¸æ·±å‘¢ï¼Ÿ</p>
<p>åœ¨è¿™é‡Œå£°æ˜ï¼šæ­¤ä½“éªŒæ„Ÿå—å®Œå…¨æ˜¯éä¸“ä¸šä½“éªŒåˆ†äº«ï¼Œåˆ‡å‹¿è®¤çœŸï¼Œæˆ‘æ˜¯æƒ³ä»ä¸€ä¸ªæ™®é€šçš„ç”¨æˆ·è§’åº¦å±•ç¤ºWin11å¸¦ç»™æˆ‘çš„æ„Ÿå—ï¼Œæˆ‘ä¼šå°½é‡ä»æˆ‘çš„æ—¥å¸¸ä½¿ç”¨è§’åº¦å‡ºå‘ï¼Œä¸ä¼šé‚£ä¹ˆå…¨é¢è¯¦ç»†ï¼Œä½“éªŒæ—¶é—´è¾ƒçŸ­å¯èƒ½ä¹‹åä¼šå†è¡¥å……</p>
<span id="more"></span>
<h1 id="å‡çº§">å‡çº§</h1>
<h2 id="ä»»åŠ¡æ ">ä»»åŠ¡æ </h2>
<p>ä¸‹é¢å±•ç¤ºå‡çº§win11åï¼Œè‡ªå·±æ•´ç†è¿‡åçš„ç•Œé¢</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6tt9ryf3adk0.png" alt="æ¡Œé¢" style="zoom:80%;" /></p>
<p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç¥ä¼¼MacOSï¼Œçš„ç¡®å¤ªåƒäº†ã€‚</p>
<p>å±…ä¸­çš„ä»»åŠ¡æ +æ–°å‡çº§çš„UI+iTunesï¼ˆå¾®è½¯å•†åº—ä¸‹è½½çš„ï¼‰ï¼Œç®€ç›´äº†</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1p2aouh5q5j.png" alt="æ¡Œé¢å¸¦é€šçŸ¥å’Œæ—¥å†" style="zoom: 80%;" /></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.70u4krk1k440.png"
alt="æ§åˆ¶ä¸­å¿ƒ" />
<figcaption aria-hidden="true">æ§åˆ¶ä¸­å¿ƒ</figcaption>
</figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.5ndss495muw0.png"
alt="è¾“å…¥æ³•" />
<figcaption aria-hidden="true">è¾“å…¥æ³•</figcaption>
</figure>
<p>ä»»åŠ¡æ æœ€å³è¾¹ï¼ˆå³ä¸‹è§’ï¼‰åˆ†å—äº†ï¼ŒåŒ…æ‹¬æ—¶é—´æ—¥æœŸ+é€šçŸ¥+ä¸“æ³¨åŠ©æ‰‹è®¾ç½®ä¸ºä¸€å—å¦‚ä¸Šå±•ç¤ºï¼Œè¿™é‡Œåº”è¯¥æ˜¯æ˜¯æ˜¾ç¤ºé—®é¢˜ï¼Œä½¿å¾—æ—¥æœŸæ˜¾ç¤ºåœ¨ä»»åŠ¡æ ä¸Šå¯¼è‡´é®æŒ¡é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘è®¾ç½®çš„ä»»åŠ¡æ é»˜è®¤éšè—ï¼Œå¦‚æœè®¾ç½®ä»»åŠ¡æ å¸¸åœ¨çš„è¯å°±ä¸ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼›å¦å¤–ç½‘ç»œ+éŸ³é‡+ç”µæ± ä¸ºä¸€å—ï¼Œç‚¹å…¥å¯ä»¥è®¾ç½®è“ç‰™ã€é£è¡Œæ¨¡å¼ã€èŠ‚ç”µæ¨¡å¼ç­‰ï¼Œæœ€åä¸€å—å°±æ˜¯è¾“å…¥æ³•äº†ï¼ˆæˆ‘ä½¿ç”¨çš„å°±æ˜¯é»˜è®¤çš„å¾®è½¯è¾“å…¥æ³•ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°æœ€å³è¾¹å¤šäº†ä¸€ä¸ªå›¾æ ‡ï¼Œç‚¹å¼€åå¦‚ä¸‹ï¼Œä¹Ÿå¯ä»¥ä¹‹é—´ç”¨å¿«æ·é”®<code>Win+.</code>ç›´æ¥è°ƒå‡ºï¼Œå®ƒåŒ…æ‹¬è¡¨æƒ…ç¬¦å·ï¼ŒGIFï¼Œé¢œæ–‡å­—ï¼Œç¬¦å·ï¼Œå‰ªåˆ‡æ¿å†å²è®°å½•ï¼Œé‡Œé¢çš„å†…å®¹å¾ˆä¸°å¯Œï¼Œå¯ä»¥è‡ªå·±æ¢ç´¢ä¸€ä¸‹ï¼Œä¸ªäººæ„Ÿè§‰å‰ªåˆ‡æ¿å†å²å¾ˆæœ‰ç”¨</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3u2rvoj8kuq0.png"
alt="è¡¨æƒ…" />
<figcaption aria-hidden="true">è¡¨æƒ…</figcaption>
</figure>
<p>æ¥ç€æˆ‘ä»¬æ¥å…³æ³¨ä»»åŠ¡æ ä¸­å¤®</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.4ug1t78l5ew0.png"
alt="ä»»åŠ¡æ " />
<figcaption aria-hidden="true">ä»»åŠ¡æ </figcaption>
</figure>
<p>å·¦è¾¹çš„å››ä¸ªæ˜¯é»˜è®¤å›ºå®šçš„ï¼Œåˆ†åˆ«æ˜¯å¼€å§‹ï¼ˆæ‰€æœ‰Winå¿…å¤‡çš„ï¼‰ï¼Œæœç´¢ï¼ˆå¯ä»¥å¿«é€Ÿæ‰¾åˆ°ä¸€äº›åº”ç”¨ã€æ–‡æ¡£ã€ç½‘é¡µç­‰ï¼‰ï¼Œä»»åŠ¡è§†å›¾ï¼ˆåŒ…æ‹¬è¿›è¡Œä¸­åº”ç”¨å’Œå…¶ä»–æ¡Œé¢ï¼‰ï¼Œå°ç»„ä»¶ï¼ˆWin11æ–°åŠ å…¥çš„ï¼Œä¸è¿‡æˆ‘æ²¡æœ‰å›ºå®šï¼ŒåŸå› å°±æ˜¯è‡ªå®šä¹‰æ€§å¤ªå·®ï¼Œåé¢è¯´ï¼‰</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2xb6bob181o0.png" alt="ä»»åŠ¡æ è®¾ç½®" style="zoom:80%;" /></p>
<p>å…¶å®å‡çº§å®Œç³»ç»Ÿï¼Œæˆ‘é¦–å…ˆæ‰“å¼€çš„å°±æ˜¯è®¾ç½®ï¼Œå¤§è‡´å°†æ€»ä½“æŒ‰è‡ªå·±çš„æƒ³æ³•è®¾ç½®å¥½ï¼Œè¿™é‡Œå…ˆå°†ä»»åŠ¡æ ï¼Œåé¢è®¾ç½®ä¼šå†è¯´</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.5ib1t5yo2zk0.png"
alt="å¼€å§‹èœå•" />
<figcaption aria-hidden="true">å¼€å§‹èœå•</figcaption>
</figure>
<p>å¼€å§‹ï¼Œä¸»è¦æœ‰æœç´¢ï¼ˆä¼šç›´æ¥è·³åˆ°æœç´¢ï¼‰ã€å›ºå®šåº”ç”¨ï¼ˆéœ€è¦è‡ªå·±è®¾ç½®ï¼Œé»˜è®¤çš„éƒ½æ˜¯å¾®è½¯çš„ä¸€å †åº”ç”¨ï¼Œåƒæ˜¯è¿‡å»çš„ç£è´´ï¼Œéƒ½æ˜¯ä¸ºäº†å¿«é€Ÿå¯åŠ¨ï¼Œå¯ä»¥ä»å³è¾¹çš„æ‰€æœ‰åº”ç”¨æŸ¥çœ‹å…¶å®ƒï¼‰ã€æ¨èé¡¹ç›®ï¼ˆé€šå¸¸å°±æ˜¯æœ€è¿‘å®‰è£…çš„åº”ç”¨å’Œç»å¸¸ä½¿ç”¨çš„ï¼‰</p>
<p>æœç´¢ã€ä»»åŠ¡è§†å›¾å°±ä¸ç”¨æ€ä¹ˆè®²äº†ï¼Œæ²¡ä»€ä¹ˆå˜åŒ–</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3ubxjcmy4eo0.png" alt="å°ç»„ä»¶" style="zoom:80%;" /></p>
<p>è¿™æ¬¡é‡ç‚¹æ›´æ–°çš„æ˜¯è¿™ä¸ªå°ç»„ä»¶ï¼Œç›®å‰å¯ä»¥è‡ªå®šä¹‰çš„ç»„ä»¶éå¸¸å°‘ï¼Œç»„ä»¶ä¸‹æ˜¯ä¸€äº›èµ„è®¯æ–°é—»ï¼Œå¯ä»¥è®¾ç½®è‡ªå·±çš„åå¥½</p>
<p>ç›®å‰æœ€å¤§çš„é—®é¢˜çš„å°±æ˜¯è¿™éƒ¨åˆ†ä¸ªæ€§åŒ–ä¸è¶³ï¼Œæ²¡æœ‰ä¸€äº›æ›´åŠ å®ç”¨çš„åŠŸèƒ½ï¼Œè€Œä¸”ä¸‹é¢çš„èµ„è®¯æ–°é—»ä¸èƒ½è‡ªå®šä¹‰æ¥æºæ»¡è¶³æˆ‘ä»¬çš„å–œå¥½çš„è¯ï¼Œå°±ä¼šæˆä¸ºåƒåœ¾å¹¿å‘Šï¼Œå°±ç›®å‰æ¥è¯´ï¼Œæˆ‘æ˜¯é€‰æ‹©å…³é—­çš„âœ•</p>
<p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œä»…ä»ä»»åŠ¡æ å‡ºå‘ï¼Œå°±ä¼šå‘ç°è¿™æ¬¡å‡çº§å˜åŒ–è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¸ç®¡æ˜¯UIçš„åœ†è§’åŒ–ï¼Œè¿˜æ˜¯ç»„ä»¶çš„æ¨¡å—åŒ–ï¼Œè¿˜åŒ…æ‹¬åŠ¨ç”»(è¿™é‡Œå±•ç¤ºä¸å‡ºæ¥)ï¼Œéƒ½èƒ½å¾ˆæ˜æ˜¾æ„Ÿå—åˆ°æœå‘³åè¶³ï¼Œä¸ï¼Œå¼€ç©ç¬‘çš„ğŸ˜‚ï¼Œæ­£ç»çš„è¯´ï¼Œèƒ½æ„Ÿå—åˆ°å¾®è½¯åœ¨å‘è§¦å±äº¤äº’æ–¹å‘çš„åŠªåŠ›ï¼Œè¿™æ¬¡å¸¦æ¥çš„å‡çº§æ”¹å˜å¾ˆåƒæˆ‘ä»¬ä½¿ç”¨çš„å¹³æ¿ä¸æ‰‹æœºäº†ï¼Œåªèƒ½è¯´æœŸå¾…å¾®è½¯çš„æ–°åŠ¨ä½œå§</p>
<h2 id="è®¾ç½®">è®¾ç½®</h2>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.5q9z2t5orao0.png" alt="è®¾ç½®" style="zoom:80%;" /></p>
<p>ç›¸æ¯”äºWin10ï¼Œè®¾ç½®å˜åŒ–çš„å¾ˆå¤§</p>
<p>åŸæ¥çš„Win10ï¼Œè®¾ç½®åˆ†ä¸ºå‡ å¤§æ¨¡å—æ”¾åœ¨ä¸€ä¸ªé¡µé¢ï¼Œæ¯ç‚¹è¿›ä¸€ä¸ªå°±åªèƒ½å›é€€æ‰¾å›å¦ä¸€ä¸ªæ¨¡å—çš„è®¾ç½®ï¼Œç®€ç›´ä¸å ªå…¶å¿§</p>
<p>ç°åœ¨çš„Win11ï¼Œä»¥å·¦å³ä¸¤å—æ¥å±•ç¤ºï¼Œå·¦è¾¹æ˜¯ä¸»è¦åˆ†ç±»æ¨¡å—ï¼Œå³è¾¹æ˜¯å…·ä½“å†…å®¹ï¼Œæ¸…æ–°è‡ªç„¶ï¼Œçœ‹èµ·æ¥å°±æ˜¯å¾ˆæ˜å¿«çš„ã€‚è¿˜æœ‰å½“è·³å…¥æŸä¸ªå…·ä½“çš„è®¾ç½®ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸Šé¢è·³è½¬ï¼Œéå¸¸æ–¹ä¾¿</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.5e21c8ioids0.png" alt="è®¾ç½®å¤šçº§æ˜¾ç¤º" style="zoom:80%;" /></p>
<p>è®¾ç½®é‡Œçš„å†…å®¹å¤ªå¤šï¼Œè€Œæˆ‘çš„å…³æ³¨ç‚¹æ²¡é‚£ä¹ˆå¤šï¼Œå¯èƒ½åŸæ¥å°±æœ‰çš„è®¾ç½®ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯æ–°å‡çº§çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæˆ‘ä¸ä¼šé‚£ä¹ˆç»†è‡´æ¯ä¸ªéƒ½è¯´ï¼Œæˆ‘ä»…ä»ä¸ªæ€§åŒ–è®¾ç½®å‡ºå‘è¯´ä¸€ä¸‹UIçš„å˜åŒ–å§</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.32yb1rh1aua0.png" alt="ä¸ªæ€§åŒ–è®¾ç½®" style="zoom:80%;" /></p>
<p>è¿™æ¬¡Win11æœ‰äº†6ä¸­ä¸»é¢˜å¯é€‰ï¼Œåˆ†åˆ«æ˜¯æµ…è‰²ã€æ·±è‰²ã€æ—¥å‡ºã€æµç•…ã€å‘å…‰ã€æ•è·çš„åŠ¨ä½œï¼Ÿ</p>
<p>ä¸»è¦å…³æ³¨ä¸€ä¸‹æ·±è‰²å’Œæµ…è‰²å³å¯ï¼Œå…¶ä»–çš„å°±æ˜¯è¿™ä¸¤ä¸ªçš„å˜ç§</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/æˆªå±2.62nfbi8vqgw0.jpg" alt="æ¡Œé¢å³é”®" style="zoom:80%;" /></p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/æˆªå±1.ivpo8dqozf4.jpg" alt="æ–‡ä»¶å³é”®" style="zoom:80%;" /></p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.40sel0wk6bk0.png" alt="èµ„æºç®¡ç†å™¨" style="zoom:80%;" /></p>
<p>å¯ä»¥çœ‹åˆ°è¿™æ¬¡UIçš„æ•´ä½“å˜åŒ–ï¼Œå³é”®å˜åŒ–ï¼Œç®€ä»‹å¥½çœ‹ï¼Œç¼ºå°‘çš„å†…å®¹éƒ½åŒ…å«åœ¨â€œæ˜¾ç¤ºæ›´å¤šé€‰é¡¹â€ä¸­ï¼Œè¿˜æœ‰æ–‡ä»¶UIå˜åŒ–ï¼Œä¹Ÿæ›´åŠ å¥½çœ‹äº†ï¼Œè¿™æ¬¡æ‰€æœ‰çš„UIéƒ½å˜ä¸ºè¿™ä¸ªé£æ ¼ï¼ŒåŒ…æ‹¬winç»å…¸éŸ³æ•ˆéƒ½å˜å¾—æ›´åŠ æ‚¦è€³äº†</p>
<p>è¿™é‡Œè¦è°ˆä¸€è°ˆæ·±è‰²ä¸»é¢˜äº†ï¼Œå› ä¸ºæˆ‘ç›®å‰å±•ç¤ºéƒ½æ˜¯æµ…è‰²ä¸»é¢˜</p>
<p>æˆ‘ä¹‹æ‰€ä»¥ä¸é€‰æ‹©æ·±è‰²ä¸»é¢˜çš„åŸå› å°±æ˜¯</p>
<p>1ã€æ·±è‰²ä¼šåŒæ—¶æ”¹å˜ä¸€äº›åº”ç”¨ï¼ˆå½“ç„¶ä¸æ˜¯å…¨éƒ¨ï¼Œä½†å…¶ä¸­åŒ…æ‹¬Edgeå’ŒChromeï¼‰ï¼Œè¿™ä¼šæœ‰ä»€ä¹ˆç»“æœå‘¢ï¼Ÿç¥è‰²ä¸»é¢˜ä¸‹ï¼Œæµè§ˆå™¨é¡¶éƒ¨è½¯ä»¶æœ¬èº«æ˜¯æ·±è‰²ï¼Œç„¶è€Œå¤§éƒ¨åˆ†ç½‘é¡µè¿˜æ˜¯æµ…è‰²ï¼Œè¿™æ ·å¯¹æ¯”èµ·æ¥æˆ‘å—ä¸äº†</p>
<p>2ã€ä¸Šå›¾æ–‡ä»¶åœ¨æ·±è‰²ä¸»é¢˜ä¸‹ï¼Œé¢œè‰²è¿‡äºæ·±ï¼Œä½¿å¾—ä¸€äº›å›¾ç‰‡ç­‰å†…å®¹å±•ç¤ºæ•ˆæœä¸å¥½</p>
<p>3ã€å¯èƒ½è¿˜æœ‰å…¶ä»–åŸå› å§ã€‚ã€‚ã€‚</p>
<h2 id="å•†åº—">å•†åº—</h2>
<p>æåˆ°å¾®è½¯å•†åº—ï¼Œä¸çŸ¥é“æ˜¯å¦è¿˜æœ‰äººè®°å¾—æˆ‘ä»¬çš„Windowsç”µè„‘ä¸­è¿˜æœ‰ä¸€ä¸ªè¿™æ ·çš„ä¸€ä¸ªåº”ç”¨å•†åº—å‘¢ï¼Ÿ</p>
<p>å¾®è½¯å•†åº—å­˜åœ¨æ„Ÿä¸€ç›´å¾ˆä½ï¼Œéå¸¸ä½ã€‚æ‰€ä»¥è¿™æ¬¡å¾®è½¯ä¹Ÿæ˜¯åšå‡ºäº†æ”¹å˜ï¼Œæ²¡æœ‰å…·ä½“äº†è§£è¿‡çš„æˆ‘åªèƒ½ç®€å•æè¿°ä¸€ä¸‹ã€‚</p>
<p>å‡çº§åŒ…æ‹¬ï¼ŒUIã€è½¯ä»¶åº“ã€æ€§èƒ½ç­‰</p>
<p>å‰é¢çš„iTuneså°±æ˜¯é€šè¿‡å¾®è½¯å•†åº—ä¸‹è½½å®‰è£…çš„ï¼Œå¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œæ²¡æƒ³åˆ°Windowsè¿˜èƒ½è£…è¿™ä¸ªï¼Œå½“æ—¶è¿˜ç‰¹åˆ«æ¿€åŠ¨ã€‚</p>
<p>é¡ºä¾¿æä¸€ä¸‹ï¼Œè¿™æ¬¡Win11å¯ä»¥å®‰è£…Androidåº”ç”¨ï¼Œè€Œä¸”æ€§èƒ½ç”±äºä¼ ç»Ÿçš„æ¨¡æ‹Ÿå™¨ï¼Œä¸è¿‡ç°åœ¨æˆ‘è¿˜ä¸ä¼šæğŸ¤”</p>
<h2 id="wt">WT</h2>
<p><a href="https://docs.microsoft.com/zh-cn/windows/terminal/">Windows
Terminalï¼ˆWTï¼‰</a>ï¼Œè¿™ä¸ªåº”è¯¥ä¸æ˜¯Win11å‡çº§å¸¦çš„å§ï¼Œå¥½åƒä¹‹å‰å°±æœ‰ï¼Œä¸è¿‡è¿™æ¬¡å‡çº§è®©æˆ‘è®¤è¯†åˆ°äº†</p>
<div class="embeddedvideo">
<iframe src="https://www.microsoft.com/zh-cn/videoplayer/embed/RWHAdS?autoCaptions=zh-cn&amp;autoplay=false" frameborder="0" allowfullscreen="true" data-linktype="external">
</iframe>
</div>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.7sfwbju3hb8.png" alt="terminal" style="zoom:80%;" /></p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6y07t3785kc0.png" alt="terminalè®¾ç½®" style="zoom:80%;" /></p>
<p>åœ¨wtä¸­å¯ä»¥è¿›è¡Œå¾ˆå¤šè®¾ç½®ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆã€æ–°çš„ç»ˆç«¯ç­‰ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹JSONæ–‡ä»¶è¿›è¡Œæ·±åº¦è‡ªå®šä¹‰ã€‚</p>
<p>åœ¨å®˜æ–¹å±•ç¤ºä¸­è¿˜åŒ…æ‹¬å…¶ä»–åŸºäºLinuxçš„ç»ˆç«¯ï¼Œä¸è¿‡æˆ‘è¿˜æ²¡æœ‰æ‘¸ç´¢åˆ°</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æœ‰æ—¶å€™æˆ‘ä»¬é¢ä¸´å‡çº§ï¼Œä¼šå‡ºç°ä¸€äº›å°´å°¬çš„åœºæ™¯ï¼Œä¸€äº›ä¹‹å‰ç‰ˆæœ¬å°±æœ‰æˆ‘ä»¬æ‰å‘ç°ï¼Œä¸€äº›æ–°å‡çº§çš„æˆ‘ä»¬è§†è€Œä¸è§</p>
<p>ç©¶å…¶åŸå› </p>
<p>1ã€åŸæœ‰çš„ï¼Œä¸æˆ‘ä»¬å…³ç³»ä¸å¤§ï¼Œæ ¹æœ¬æ„Ÿå—ä¸åˆ°</p>
<p>2ã€åŸæœ‰çš„ï¼Œéš¾ç”¨ï¼Œæˆ‘ä»¬æ— æ³•ä»ä¸­ä¼˜åŒ–æˆ‘ä»¬ä½¿ç”¨ä½“éªŒï¼ˆå¦‚å¾®è½¯å•†åº—ï¼‰</p>
<p>3ã€åŒ1ï¼Œæ¢æˆå‡çº§çš„</p>
<p>4ã€åŒ2ï¼Œæ¢æˆå‡çº§çš„ï¼ˆç›®å‰å¦‚å°ç»„ä»¶ï¼‰</p>
<p>æ€»ç»“æ¥è¯´å°±æ˜¯å‡çº§è¦ä½“ç°å‡ºå‡çº§ï¼Œä¸èƒ½è¯´ç¨å¾®ä¸€æ”¹å°±ç®—å‡çº§äº†ï¼Œé‚£æ ·çš„è¯è¿˜ä¸å¦‚å«Win10
åºå·xxxå‘¢ï¼Ÿ</p>
<p>å°±æˆ‘ç›®å‰çš„ä½“éªŒæ¥è¯´ï¼Œå‡çº§çš„è¿˜æ˜¯å¾ˆæˆåŠŸçš„ï¼</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>ruoyi-vueå­¦ä¹ 01</title>
    <url>/article/59eb73a4.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æ¯•è®¾ç”¨çš„<code>ruoyi</code>ï¼Œå¯ä»¥ç®—æ˜¯ä¸€è¾¹å­¦ä¹ ï¼Œä¸€è¾¹åšæ¯•è®¾ï¼Œå­¦åˆ°ä¸å°‘ï¼Œè¿™é‡Œåˆ†äº«ä¸€ä¸‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3mb1dnhij2y0.webp"
alt="ruoyié¡¹ç›®ä¾èµ–å…³ç³»" />
<figcaption aria-hidden="true">ruoyié¡¹ç›®ä¾èµ–å…³ç³»</figcaption>
</figure>
<span id="more"></span>
<h1 id="å†…å®¹">å†…å®¹</h1>
<p>ä¸Šé¢å±•ç¤ºäº†<code>ruoyi</code>é¡¹ç›®ä¹‹é—´çš„å…³ç³»</p>
<p>é¦–å…ˆå°±æ¥è¯´ä¸€ä¸‹ï¼Œ<code>ruoyi</code>æ˜¯æ€ä¹ˆåšåˆ†é¡µçš„å§</p>
<p>é¦–å…ˆ<code>ruoyi</code>ä½¿ç”¨çš„æ˜¯<code>PageHelper</code>å¾ˆæ¸…æ¥šäº†</p>
<p>é¦–å…ˆç‚¹å¼€ä¸€ä¸ª<code>SysUserController extends BaseController</code>ï¼Œçœ‹åˆ°å¦‚ä¸‹è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œä»å‰ç«¯çœ‹ç¡®å®æ˜¯åˆ†é¡µå®ç°çš„</p>
<p>ä½†æ˜¯æˆ‘ä»¬å´åœ¨è¯·æ±‚çš„<code>SysUser</code>æ‰¾ä¸åˆ°åˆ†é¡µç›¸å…³çš„å‚æ•°ä¿¡æ¯ï¼Œå¥‡æ€ªï¼Ÿæ€ä¹ˆåšçš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;system:user:list&#x27;)&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> TableDataInfo <span class="title function_">list</span><span class="params">(SysUser user)</span> &#123;</span><br><span class="line">    startPage();</span><br><span class="line">    List&lt;SysUser&gt; list = userService.selectUserList(user);</span><br><span class="line">    <span class="keyword">return</span> getDataTable(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå°±ç ”ç©¶ä¸€ä¸‹å§</p>
<p>é¦–å…ˆè¿™ä¸ª<code>@PreAuthorize("@ss.hasPermi('system:user:list')")</code>æ˜¯<code>ruoyi</code>çš„ä¸€å¥—æƒé™æ§åˆ¶ï¼Œæš‚ä¸”ä¸è°ˆ</p>
<p>é‚£ä¹ˆå°±çœ‹è¿™ä¸ª<code>startPage();</code>ï¼Œè¿™æ˜¯çˆ¶ç±»<code>BaseController</code>çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®è¯·æ±‚åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">startPage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">PageDomain</span> <span class="variable">pageDomain</span> <span class="operator">=</span> TableSupport.buildPageRequest();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> pageDomain.getPageNum();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> pageDomain.getPageSize();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNotNull(pageNum) &amp;&amp; StringUtils.isNotNull(pageSize)) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">orderBy</span> <span class="operator">=</span> SqlUtil.escapeOrderBySql(pageDomain.getOrderBy());</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">reasonable</span> <span class="operator">=</span> pageDomain.getReasonable();</span><br><span class="line">        PageHelper.startPage(pageNum, pageSize, orderBy).setReasonable(reasonable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…³æ³¨ç¬¬ä¸€è¡Œ<code>PageDomain pageDomain = TableSupport.buildPageRequest();</code></p>
<p>è¿™é‡Œå°±æ˜¯åˆ†é¡µå‚æ•°çš„æ¥æºï¼Œç›´æ¥ç‚¹è¿›<code>TableSupport.buildPageRequest();</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> PageDomain <span class="title function_">getPageDomain</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">PageDomain</span> <span class="variable">pageDomain</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageDomain</span>();</span><br><span class="line">    pageDomain.setPageNum(ServletUtils.getParameterToInt(PAGE_NUM));</span><br><span class="line">    pageDomain.setPageSize(ServletUtils.getParameterToInt(PAGE_SIZE));</span><br><span class="line">    pageDomain.setOrderByColumn(ServletUtils.getParameter(ORDER_BY_COLUMN));</span><br><span class="line">    pageDomain.setIsAsc(ServletUtils.getParameter(IS_ASC));</span><br><span class="line">    pageDomain.setReasonable(ServletUtils.getParameterToBool(REASONABLE));</span><br><span class="line">    <span class="keyword">return</span> pageDomain;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> PageDomain <span class="title function_">buildPageRequest</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getPageDomain();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°åˆ†é¡µå‚æ•°éƒ½æ¥æºäº<code>ServletUtils</code>è¿™ä¸ªç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–Integerå‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">getParameterToInt</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Convert.toInt(getRequest().getParameter(name));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è·å–request</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> HttpServletRequest <span class="title function_">getRequest</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> getRequestAttributes().getRequest();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯<code>ruoyi</code>çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå°±å»è·å–<code>request</code>è¯·æ±‚ä¸­<code>int</code>ç±»å‹çš„æ–¹æ³•</p>
<p><code>getRequest()</code>è·å–è¯·æ±‚çš„<code>request</code>ï¼Œç„¶åè·å–å¯¹åº”çš„ç›¸å…³åˆ†é¡µå‚æ•°ï¼Œè¿™æ ·å°±å®Œæˆäº†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// æŸ¥è¯¢å‚æ•°</span><br><span class="line">queryParams: &#123;</span><br><span class="line">  pageNum: 1,</span><br><span class="line">  pageSize: 10,</span><br><span class="line">  userName: undefined,</span><br><span class="line">  phonenumber: undefined,</span><br><span class="line">  status: undefined,</span><br><span class="line">  deptId: undefined</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°å‰ç«¯å‘é€è¯·æ±‚æ‰€å¸¦çš„å‚æ•°ï¼Œå°±ä¸€æ¸…äºŒæ¥šäº†ï¼Œå½“ç„¶è¿™ä¸ªåç§°ä¸€å®šè¦å®Œå…¨ä¸€è‡´æ‰è¡Œ</p>
<p>å›åˆ°<code>startPage();</code>ï¼Œå°±åœ¨è¿™å¼€å¯çš„<code>PageHelper</code>åˆ†é¡µ</p>
<p>çœ‹è¿™ä¸ª<code>TableDataInfo</code>çš„è¿”å›å¯¹è±¡ï¼Œè¿™ä¸ªæ˜¯çœŸæ­£çš„å“åº”å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TableDataInfo</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;?&gt; rows;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆæ¯çŠ¶æ€ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆæ¯å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„è®¾ç½®æ˜¯åœ¨<code>BaseController</code>çš„<code>getDataTable</code>æ–¹æ³•ä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”è¯·æ±‚åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;, &quot;unchecked&quot;&#125;)</span></span><br><span class="line"><span class="keyword">protected</span> TableDataInfo <span class="title function_">getDataTable</span><span class="params">(List&lt;?&gt; list)</span> &#123;</span><br><span class="line">    <span class="type">TableDataInfo</span> <span class="variable">rspData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TableDataInfo</span>();</span><br><span class="line">    rspData.setCode(HttpStatus.SUCCESS);</span><br><span class="line">    rspData.setMsg(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>);</span><br><span class="line">    rspData.setRows(list);</span><br><span class="line">    rspData.setTotal(<span class="keyword">new</span> <span class="title class_">PageInfo</span>(list).getTotal());</span><br><span class="line">    <span class="keyword">return</span> rspData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦å…³æ³¨<code>total</code>å³å¯ï¼Œä½†å…³äºè¿™ä¸ªè¿˜è¦å¦è®²ï¼Œå…¶ä¸­ç‰µæ‰¯åˆ°ä¸€ä¸ªæˆ‘é‡åˆ°çš„é—®é¢˜</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œåªè®²äº†å…³äºåˆ†é¡µè¯·æ±‚çš„ç›¸å…³å®ç°ï¼Œä¹‹åç»§ç»­åˆ†äº«</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>ruoyi</tag>
      </tags>
  </entry>
  <entry>
    <title>ruoyiä»£ç ç”Ÿæˆ</title>
    <url>/article/cc4237ac.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æ¯•è®¾ç”¨çš„<a
href="https://gitee.com/y_project/RuoYi-Vue">RuoYi-Vue</a>ï¼Œå…¶ä¸­è¿˜å­¦åˆ°ä¸å°‘ä¸œè¥¿ï¼Œè¿™æ¬¡åˆ†äº«ä¸€ä¸‹å…³äº<code>ruoyi</code>çš„ä»£ç ç”Ÿæˆçš„ä½¿ç”¨</p>
<p>å®˜æ–¹æ–‡æ¡£é“¾æ¥å¦‚ä¸‹<a
href="http://doc.ruoyi.vip/ruoyi-vue/document/htsc.html#ä»£ç ç”Ÿæˆ">åå°æ‰‹å†Œ
| RuoYi</a></p>
<span id="more"></span>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<p>1ã€è®¾è®¡æ•°æ®è¡¨ç»“æ„</p>
<p>ä»£ç ç”Ÿæˆè‡ªç„¶å°‘ä¸äº†æ•°æ®åº“è¡¨çš„è®¾è®¡ï¼Œå®Œæˆäº†æ•°æ®åº“è¡¨è®¾è®¡ï¼Œå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­åˆ©ç”¨<code>ruoyi</code>ç”Ÿæˆä»£ç äº†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.64s4nbm408k0.webp"
alt="å¯¼å…¥è¡¨" />
<figcaption aria-hidden="true">å¯¼å…¥è¡¨</figcaption>
</figure>
<p>è¿™é‡Œæ˜¯ä¼šæ˜¾ç¤ºè¿æ¥çš„æ•°æ®åº“å¯¹åº”çš„è¡¨</p>
<p>å¯¼å…¥åå°±å¯ä»¥é¢„è§ˆã€ç¼–è¾‘ã€åˆ é™¤ï¼Œæœ€åç”Ÿæˆä»£ç </p>
<p>2ã€ç‚¹è¿›ç¼–è¾‘</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2shadp2wg3o0.webp"
alt="ä¿®æ”¹ç”Ÿæˆé…ç½®" />
<figcaption aria-hidden="true">ä¿®æ”¹ç”Ÿæˆé…ç½®</figcaption>
</figure>
<p>åœ¨è¿™å°±å¯ä»¥ç¼–è¾‘åŸºæœ¬ä¿¡æ¯ã€å­—æ®µä¿¡æ¯ã€ç”Ÿæˆä¿¡æ¯</p>
<p>åŸºæœ¬ä¿¡æ¯ï¼Œä¸»è¦åŒ…æ‹¬è¡¨åã€æè¿°ã€å®ä½“ç±»åã€ä½œè€…ç­‰</p>
<p>å­—æ®µä¿¡æ¯ï¼Œå¦‚ä¸Šå±•ç¤ºï¼Œè¿™é‡Œå¾ˆå¤šéƒ½å¯ä»¥ç¼–è¾‘ï¼Œé‡ç‚¹å¯ä»¥å…³æ³¨ä¸Šé¢çº¢æ¡†å†…çš„</p>
<ul>
<li>Javaç±»å‹ï¼Œå¯¹åº”ç”Ÿæˆå®ä½“ç±»å±æ€§ç±»å‹</li>
<li>æ’å…¥ã€ç¼–è¾‘å¯ä»¥çœ‹ä½œä¸€ç±»ï¼Œå°±æ˜¯æ˜¯å¦åŒ…å«åœ¨å¼¹å‡ºç¼–è¾‘æ¡†å†…</li>
<li>åˆ—è¡¨ï¼Œè¡¨ç¤ºæ˜¯å¦ç›´æ¥å±•ç¤ºåœ¨<code>index</code>åˆ—è¡¨ä¸­</li>
<li>æŸ¥è¯¢ï¼Œå°±æ˜¯æ˜¯å¦åŒ…å«åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ï¼Œè¿˜å¯ä»¥è®¾ç½®æŸ¥è¯¢æ–¹å¼ï¼Œå½“ç„¶ä¸»è¦å…³å¿ƒæ˜¯å¦æ˜¯<code>like</code>å³å¯</li>
<li>æ˜¾ç¤ºç±»å‹ã€å­—å…¸ç±»å‹ï¼Œä¹Ÿåœ¨ä¸€å—ï¼Œå­—å…¸æ˜¯<code>ruoyi</code>å¦ä¸€ä¸ªå¯ä»¥å­¦ä¹ ä¸€ä¸‹çš„åœ°æ–¹</li>
</ul>
<p>3ã€ç”Ÿæˆä»£ç </p>
<p>åœ¨ç”Ÿæˆä»£ç ä¹‹å‰å¯ä»¥å…ˆé¢„è§ˆä¸€ä¸‹</p>
<p>ç”Ÿæˆçš„ä»£ç ä¼šä»¥å‹ç¼©åŒ…å­˜åœ¨</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.7k15bb90r000.webp"
alt="ç”Ÿæˆä»£ç " />
<figcaption aria-hidden="true">ç”Ÿæˆä»£ç </figcaption>
</figure>
<p>å…¶ä¸­ä¸»è¦æœ‰ä¸‰ç±»æ–‡ä»¶</p>
<ul>
<li><code>sql</code></li>
<li>åç«¯ä»£ç ï¼ˆ<code>Java</code>ã€<code>mybatis</code>ï¼‰</li>
<li>å‰ç«¯ä»£ç ï¼ˆ<code>api</code>ï¼Œ<code>views</code>ï¼‰</li>
</ul>
<p>é¦–å…ˆæ‰§è¡Œ<code>sql</code>æ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯åœ¨ä»£ç ç”Ÿæˆä¸­è®¾ç½®çš„ç”Ÿæˆä¿¡æ¯ç›¸å…³çš„èœå•<code>sql</code></p>
<p>åç«¯ä»£ç æˆ‘è¿˜æ˜¯å¾ˆæ¨èå†å¦å»ºä¸€ä¸ª<code>module</code>ï¼Œæ²¡æœ‰å…¶ä»–éœ€æ±‚çš„è¯åªéœ€è¦å¼•å…¥<code>ruoyi-common</code>å³å¯</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é€šç”¨å·¥å…·--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.ruoyi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ruoyi-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„<code>Java</code>ä»£ç å’Œ<code>mybatis</code>å°±ä¸åºŸè¯äº†</p>
<p>å‰ç«¯çš„è¯ï¼Œå‹ç¼©åŒ…æ˜¾ç¤ºçš„ä½ç½®å·²ç»å¾ˆæ˜æ˜¾äº†ï¼Œæ”¾åœ¨å¯¹åº”ä½ç½®å³å¯</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p><code>ruoyi</code>ä»£ç ç”Ÿæˆç¡®å®æ˜¯éå¸¸å¥½ç”¨ï¼Œä½†æ˜¯ä½ å¿…é¡»è¦é…åˆä½¿ç”¨<code>ruoyi</code>æ‰æœ‰åŠŸæ•ˆï¼Œå»ºè®®è¿˜æ˜¯å­¦ä¹ ä¸€ä¸‹ï¼Œé‚£æ ·å°±å¯ä»¥è‡ªå·±å®šåˆ¶ä¸€å¥—å±äºè‡ªå·±çš„ä»£ç ç”Ÿæˆæ–¹æ¡ˆäº†ã€‚</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>ruoyi</tag>
      </tags>
  </entry>
  <entry>
    <title>XXL-JOBå‘é€è¿‡æœŸé‚®ä»¶æé†’</title>
    <url>/article/ee1e3834.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ‰äº†å‰é¢<a
href="https://wnhyang.github.io/article/abbb8dbb.html">åˆæ¬¡ä½¿ç”¨
XXL-JOB</a>è¿™ç¯‡æ–‡ç« å°±å¯é¡ºç€å¾€ä¸‹è®²äº†</p>
<p>æˆ‘çš„éœ€æ±‚ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡ä¸€ç§æ–¹å¼å‘é€å³å°†è¿‡æœŸçš„æé†’ï¼Œå½“ç„¶å…è´¹æ–¹å¼ä¸­æœ€å¥½çš„å°±æ˜¯é‚®ä»¶å•¦ï¼</p>
<p>æˆ‘è¿™é‡Œé€‰æ‹©çš„æ–¹å¼å°±æ˜¯åˆ©ç”¨<code>XXL-JOB</code>æ¥æŸ¥è¯¢ç„¶ååˆ†ç»„å‘é€ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–æ–¹å¼ï¼Œæˆ‘ä¹Ÿéå¸¸ä¹æ„å°è¯•è€ƒè™‘å…¶ä»–æ–¹æ³•ï¼Œåˆé€‚çš„è¯ã€‚</p>
<p>ç•™åœ¨æœ€åè®¨è®ºå§ï¼</p>
<span id="more"></span>
<h1 id="è°ƒåº¦ä¸­å¿ƒ">è°ƒåº¦ä¸­å¿ƒ</h1>
<p>é¦–å…ˆéœ€è¦æœ‰XXL-JOBè°ƒåº¦ä¸­å¿ƒï¼Œæˆ‘å‰é¢å·²ç»æ­å»ºè¿‡äº†ï¼Œä¸å¤šæäº†ã€‚</p>
<p>å¯ä»¥å‚è€ƒä¸€ä¸‹<a
href="https://www.xuxueli.com/xxl-job/">å®˜ç½‘</a>æˆ–æˆ‘ä¹‹å‰çš„<a
href="https://wnhyang.github.io/article/abbb8dbb.html">åˆæ¬¡ä½¿ç”¨
XXL-JOB</a>ã€‚</p>
<h1 id="æ‰§è¡Œå™¨">æ‰§è¡Œå™¨</h1>
<h2 id="ä¾èµ–">ä¾èµ–</h2>
<p>é™¤äº†å¿…è¦çš„<code>xxl-job-core</code>ï¼Œè¿˜æœ‰<code>springboot</code>ä¸­<code>mail</code>å’Œ<code>thymeleaf</code>ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;xxl-job.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®">é…ç½®</h2>
<p>æ‰§è¡Œå™¨æŒ‰è‡ªå·±éœ€è¦é…ç½®ï¼Œè°ƒåº¦ä¸­å¿ƒä¸€å®šè¦å¯¹åº”ä¸Š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ ¹åœ°å€ [é€‰å¡«]ï¼šå¦‚è°ƒåº¦ä¸­å¿ƒé›†ç¾¤éƒ¨ç½²å­˜åœ¨å¤šä¸ªåœ°å€åˆ™ç”¨é€—å·åˆ†éš”ã€‚æ‰§è¡Œå™¨å°†ä¼šä½¿ç”¨è¯¥åœ°å€è¿›è¡Œ&quot;æ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œ&quot;å’Œ&quot;ä»»åŠ¡ç»“æœå›è°ƒ&quot;ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œï¼›</span></span><br><span class="line"><span class="attr">xxl.job.admin.addresses</span>=<span class="string">http://ip:port/xxl-job-admin</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨é€šè®¯TOKEN [é€‰å¡«]ï¼šéç©ºæ—¶å¯ç”¨ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.accessToken</span>=<span class="string">default_token</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨AppName [é€‰å¡«]ï¼šæ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œåˆ†ç»„ä¾æ®ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œ</span></span><br><span class="line"><span class="attr">xxl.job.executor.appname</span>=<span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ³¨å†Œ [é€‰å¡«]ï¼šä¼˜å…ˆä½¿ç”¨è¯¥é…ç½®ä½œä¸ºæ³¨å†Œåœ°å€ï¼Œä¸ºç©ºæ—¶ä½¿ç”¨å†…åµŒæœåŠ¡ â€IP:PORTâ€œ ä½œä¸ºæ³¨å†Œåœ°å€ã€‚ä»è€Œæ›´çµæ´»çš„æ”¯æŒå®¹å™¨ç±»å‹æ‰§è¡Œå™¨åŠ¨æ€IPå’ŒåŠ¨æ€æ˜ å°„ç«¯å£é—®é¢˜ã€‚</span></span><br><span class="line"><span class="attr">xxl.job.executor.address</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨IP [é€‰å¡«]ï¼šé»˜è®¤ä¸ºç©ºè¡¨ç¤ºè‡ªåŠ¨è·å–IPï¼Œå¤šç½‘å¡æ—¶å¯æ‰‹åŠ¨è®¾ç½®æŒ‡å®šIPï¼Œè¯¥IPä¸ä¼šç»‘å®šHostä»…ä½œä¸ºé€šè®¯å®ç”¨ï¼›åœ°å€ä¿¡æ¯ç”¨äº &quot;æ‰§è¡Œå™¨æ³¨å†Œ&quot; å’Œ &quot;è°ƒåº¦ä¸­å¿ƒè¯·æ±‚å¹¶è§¦å‘ä»»åŠ¡&quot;ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.ip</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨ç«¯å£å· [é€‰å¡«]ï¼šå°äºç­‰äº0åˆ™è‡ªåŠ¨è·å–ï¼›é»˜è®¤ç«¯å£ä¸º9999ï¼Œå•æœºéƒ¨ç½²å¤šä¸ªæ‰§è¡Œå™¨æ—¶ï¼Œæ³¨æ„è¦é…ç½®ä¸åŒæ‰§è¡Œå™¨ç«¯å£ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.port</span>=<span class="string">9999</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨è¿è¡Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç£ç›˜è·¯å¾„ [é€‰å¡«] ï¼šéœ€è¦å¯¹è¯¥è·¯å¾„æ‹¥æœ‰è¯»å†™æƒé™ï¼›ä¸ºç©ºåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.logpath</span>=<span class="string">logs/xxl-job/jobhandler</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ—¥å¿—æ–‡ä»¶ä¿å­˜å¤©æ•° [é€‰å¡«] ï¼š è¿‡æœŸæ—¥å¿—è‡ªåŠ¨æ¸…ç†, é™åˆ¶å€¼å¤§äºç­‰äº3æ—¶ç”Ÿæ•ˆ; å¦åˆ™, å¦‚-1, å…³é—­è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.logretentiondays</span>=<span class="string">30</span></span><br></pre></td></tr></table></figure>
<p>é¡ºå¸¦ä¸Šæˆ‘ä½¿ç”¨<code>naocs</code>çš„ä¸»è¦é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">3301</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">@artifactId@</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">$&#123;NACOS_HOST:nacos&#125;:$&#123;NACOS_PORT:8848&#125;</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">@nacosNamespace@</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">@nacos.group@</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">$&#123;spring.cloud.nacos.discovery.server-addr&#125;</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">@nacosNamespace@</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">@nacos.group@</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">import:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">optional:nacos:$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">optional:nacos:$&#123;spring.application.name&#125;-xxl-job-$&#123;spring.profiles.active&#125;.properties</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">@profiles.active@</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">config:</span> <span class="string">classpath:log4j2-$&#123;spring.profiles.active&#125;.xml</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»„ä»¶é…ç½®">ç»„ä»¶é…ç½®</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxl.job.core.executor.impl.XxlJobSpringExecutor;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * xxl-job config</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xuxueli 2017-04-28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XxlJobConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(XxlJobConfig.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.admin.addresses&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String adminAddresses;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.accessToken&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessToken;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.appname&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appname;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.address&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.ip&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String ip;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.logpath&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String logPath;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.logretentiondays&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> logRetentionDays;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> XxlJobSpringExecutor <span class="title function_">xxlJobExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.&quot;</span>);</span><br><span class="line">        <span class="type">XxlJobSpringExecutor</span> <span class="variable">xxlJobSpringExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XxlJobSpringExecutor</span>();</span><br><span class="line">        xxlJobSpringExecutor.setAdminAddresses(adminAddresses);</span><br><span class="line">        xxlJobSpringExecutor.setAppname(appname);</span><br><span class="line">        xxlJobSpringExecutor.setAddress(address);</span><br><span class="line">        xxlJobSpringExecutor.setIp(ip);</span><br><span class="line">        xxlJobSpringExecutor.setPort(port);</span><br><span class="line">        xxlJobSpringExecutor.setAccessToken(accessToken);</span><br><span class="line">        xxlJobSpringExecutor.setLogPath(logPath);</span><br><span class="line">        xxlJobSpringExecutor.setLogRetentionDays(logRetentionDays);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> xxlJobSpringExecutor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é’ˆå¯¹å¤šç½‘å¡ã€å®¹å™¨å†…éƒ¨ç½²ç­‰æƒ…å†µï¼Œå¯å€ŸåŠ© &quot;spring-cloud-commons&quot; æä¾›çš„ &quot;InetUtils&quot; ç»„ä»¶çµæ´»å®šåˆ¶æ³¨å†ŒIPï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      1ã€å¼•å…¥ä¾èµ–ï¼š</span></span><br><span class="line"><span class="comment">     *          &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">     *             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">     *             &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">     *             &lt;version&gt;$&#123;version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="comment">     *         &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      2ã€é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…å®¹å™¨å¯åŠ¨å˜é‡</span></span><br><span class="line"><span class="comment">     *          spring.cloud.inetutils.preferred-networks: &#x27;xxx.xxx.xxx.&#x27;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      3ã€è·å–IP</span></span><br><span class="line"><span class="comment">     *          String ip_ = inetUtils.findFirstNonLoopbackHostInfo().getIpAddress();</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿‡æœŸé‚®ä»¶æé†’æ‰§è¡Œå™¨">è¿‡æœŸé‚®ä»¶æé†’æ‰§è¡Œå™¨</h2>
<p>è¿‡æœŸé‚®ä»¶ä¾èµ–äºä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯çŸ­é“¾æ¥<code>mapper</code>ï¼Œå¦ä¸€ä¸ªæ˜¯é‚®ä»¶æœåŠ¡ï¼Œåœ¨åé¢ï¼Œåˆ«æ€¥</p>
<p>è¿™é‡Œè¦æ³¨æ„ï¼Œ<code>XxlJobHelper</code>æ˜¯<code>XXL-JOB</code>æä¾›çš„æ—¥å¿—å·¥å…·ï¼Œé€šè¿‡å®ƒæ‰“å°çš„æ—¥å¿—å¯ä»¥åœ¨<code>admin</code>ç®¡ç†å°ä¸­ç›´æ¥çœ‹åˆ°çš„ï¼Œæ‰€ä»¥ä¸ºæ–¹ä¾¿è°ƒè¯•ï¼Œé€‰æ‹©æ‰“å°éœ€è¦çš„ä¿¡æ¯å“¦</p>
<p>è¿™ä¸ªè¿‡æœŸé‚®ä»¶æé†’é€»è¾‘ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼ŒæŸ¥è¯¢è¿‡æœŸæ—¶é—´åœ¨ä»Šå¤©å’Œ3å¤©åè¿™æ®µæ—¶é—´å†…çš„æ•°æ®ï¼Œç„¶åé€šè¿‡å¼ºå¤§çš„<code>stream</code>å°†å…¶æŒ‰é‚®ç®±åˆ†ç»„å‘é€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.hutool.core.collection.CollUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.xxl.job.core.context.XxlJobHelper;</span><br><span class="line"><span class="keyword">import</span> com.xxl.job.core.handler.annotation.XxlJob;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.okay4cloud.okay.shortlink.api.entity.LinkMap;</span><br><span class="line"><span class="keyword">import</span> org.okay4cloud.okay.shortlink.email.EmailService;</span><br><span class="line"><span class="keyword">import</span> org.okay4cloud.okay.shortlink.mapper.LinkMapMapper;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/24</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyXxlJob</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(MyXxlJob.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LinkMapMapper linkMapMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> EmailService emailService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰«è¡¨ï¼Œ3å¤©å†…è¿‡æœŸçš„è¿›è¡Œé‚®ä»¶é€šçŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@XxlJob(&quot;emailJobHandler&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">emailJobHandler</span><span class="params">()</span> &#123;</span><br><span class="line">        LOGGER.info(<span class="string">&quot;emailJobHandler exec......&quot;</span>);</span><br><span class="line">        XxlJobHelper.log(<span class="string">&quot;XXL-JOB, emailJobHandler.&quot;</span>);</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">now</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">now3</span> <span class="operator">=</span> now.plusDays(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">// ç”¨æˆ·åˆ†ç»„å‘é‚®ä»¶</span></span><br><span class="line">        List&lt;LinkMap&gt; linkMaps = linkMapMapper.selectList(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;LinkMap&gt;()</span><br><span class="line">                .ge(LinkMap::getExpireTime, now)</span><br><span class="line">                .le(LinkMap::getExpireTime, now3));</span><br><span class="line">        LOGGER.info(<span class="string">&quot;å³å°†è¿‡æœŸçš„çŸ­é“¾æ¥æ•°é‡&#123;&#125;&quot;</span>, linkMaps.size());</span><br><span class="line">        XxlJobHelper.log(<span class="string">&quot;å³å°†è¿‡æœŸçš„çŸ­é“¾æ¥æ•°é‡&#123;&#125;&quot;</span>, linkMaps.size());</span><br><span class="line">        <span class="keyword">if</span> (!CollUtil.isEmpty(linkMaps)) &#123;</span><br><span class="line">            Map&lt;String, List&lt;LinkMap&gt;&gt; collect = linkMaps.stream().collect(Collectors.groupingBy(LinkMap::getEmail));</span><br><span class="line">            LOGGER.info(<span class="string">&quot;åˆ†ç»„å&#123;&#125;&quot;</span>, collect);</span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;String, List&lt;LinkMap&gt;&gt; entry : collect.entrySet()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">to</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">                <span class="keyword">if</span> (StrUtil.isNotBlank(to)) &#123;</span><br><span class="line">                    Map&lt;String, Object&gt; model = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">8</span>);</span><br><span class="line">                    model.put(<span class="string">&quot;subject&quot;</span>, <span class="string">&quot;çŸ­é“¾æ¥å³å°†è¿‡æœŸæé†’&quot;</span>);</span><br><span class="line">                    model.put(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;æ‚¨çš„çŸ­é“¾æ¥å°†åœ¨ä¸‰å¤©å†…å¤±æ•ˆï¼Œè¯·åŠ¡å¿…ç¡®è®¤æ˜¯å¦è¿˜éœ€è¦ï¼Œè¿‡æœŸçš„å‰ä¸‰å¤©æˆ‘ä»¬éƒ½ä¼šå‘é€æ­¤é‚®ä»¶æ¥å‘æ‚¨ç¡®è®¤ï¼Œå³å°†è¿‡æœŸçš„çŸ­é“¾æ¥å¦‚ä¸‹ï¼š&quot;</span>);</span><br><span class="line">                    List&lt;LinkMap&gt; list = entry.getValue();</span><br><span class="line">                    model.put(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">                    model.put(<span class="string">&quot;instance&quot;</span>, UUID.randomUUID().toString());</span><br><span class="line">                    emailService.sendHtmlMail(to, <span class="string">&quot;çŸ­é“¾æ¥å³å°†è¿‡æœŸæé†’&quot;</span>, model);</span><br><span class="line">                    LOGGER.info(<span class="string">&quot;å‘ç»™ &#123;&#125; æ•°é‡&#123;&#125;&quot;</span>, to, list.size());</span><br><span class="line">                    XxlJobHelper.log(<span class="string">&quot;å‘ç»™ &#123;&#125; æ•°é‡&#123;&#125;&quot;</span>, to, list.size());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é‚®ä»¶å‘é€">é‚®ä»¶å‘é€</h1>
<h2 id="é…ç½®-1">é…ç½®</h2>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">default-encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.xxx.qq.com</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">xxxxx</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxx</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">mail:</span></span><br><span class="line">        <span class="attr">smtp:</span></span><br><span class="line">          <span class="attr">auth:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">ssl:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">starttls:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">required:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="é‚®ä»¶æœåŠ¡">é‚®ä»¶æœåŠ¡</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSenderImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/25</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmailService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(EmailService.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JavaMailSenderImpl javaMailSender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TemplateEngine templateEngine;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendHtmlMail</span><span class="params">(String to, String subject, Map&lt;String, Object&gt; model)</span> &#123;</span><br><span class="line">        MimeMessage mimeMailMessage;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mimeMailMessage = javaMailSender.createMimeMessage();</span><br><span class="line">            <span class="type">MimeMessageHelper</span> <span class="variable">mimeMessageHelper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMailMessage,</span><br><span class="line">                    MimeMessageHelper.MULTIPART_MODE_MIXED_RELATED, StandardCharsets.UTF_8.name());</span><br><span class="line">            mimeMessageHelper.setFrom(sender);</span><br><span class="line">            mimeMessageHelper.setTo(to);</span><br><span class="line">            mimeMessageHelper.setSubject(subject);</span><br><span class="line">            <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">            context.setVariables(model);</span><br><span class="line">            <span class="type">String</span> <span class="variable">html</span> <span class="operator">=</span> templateEngine.process(<span class="string">&quot;expire_mail&quot;</span>, context);</span><br><span class="line">            mimeMessageHelper.setText(html, <span class="literal">true</span>);</span><br><span class="line">            javaMailSender.send(mimeMailMessage);</span><br><span class="line">            LOGGER.info(<span class="string">&quot;sendHtmlMailé‚®ä»¶å‘é€æˆåŠŸ &#123;&#125;;&#123;&#125;;&#123;&#125;&quot;</span>, to, subject, model);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            LOGGER.error(<span class="string">&quot;sendHtmlMailé‚®ä»¶å‘é€æˆåŠŸ &#123;&#125;;&#123;&#125;;&#123;&#125;&quot;</span>, to, subject, model);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿‡æœŸé‚®ä»¶æ¨¡ç‰ˆ">è¿‡æœŸé‚®ä»¶æ¨¡ç‰ˆ</h2>
<p>ä½¿ç”¨<code>thymeleaf</code>çš„åŸå› å°±æ˜¯éœ€è¦èƒ½æ ¹æ®æ¨¡ç‰ˆæ•°æ®åŠ¨æ€ç”Ÿæˆé‚®ä»¶å†…å®¹ï¼Œå¦‚ä¸‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>$&#123;subject&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;title&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-collapse:collapse; width:80%;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold;color: #ffffff;background-color: #ff8c00;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width: auto&quot;</span>&gt;</span>çŸ­é“¾æ¥<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width: auto&quot;</span>&gt;</span>é“¾æ¥<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width: auto&quot;</span>&gt;</span>æè¿°<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width: auto&quot;</span>&gt;</span>è¿‡æœŸæ—¶é—´<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--/*@thymesVar id=&quot;list&quot; type=&quot;List&lt;org.okay4cloud.okay.shortlink.api.entity.LinkMap&gt;&quot;*/--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;item : $&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.code&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.link&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.remark&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.expireTime&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="ç®€å•çš„å¼‚æ­¥">ç®€å•çš„å¼‚æ­¥</h1>
<p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„ä¸Šé¢é‚®ä»¶æœåŠ¡æœ‰ä¸€ä¸ªæ³¨è§£<code>@Async</code>ï¼Œè¿™ä¸ªæ˜¯SpringBootæä¾›ä¸€ç§å¾ˆç®€å•çš„å¼‚æ­¥æ–¹æ³•è°ƒç”¨ï¼Œè¢«<code>@Async</code>æ³¨è§£çš„æ–¹æ³•ä¼šåœ¨è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œæ–¹æ³•ä½“ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚</p>
<h2 id="é…ç½®-2">é…ç½®</h2>
<p>ä¸éœ€è¦é¢å¤–çš„ä¾èµ–</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">task:</span></span><br><span class="line">    <span class="attr">execution:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">core-size:</span> <span class="number">8</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="number">20</span></span><br><span class="line">        <span class="attr">queue-capacity:</span> <span class="number">100</span></span><br><span class="line">        <span class="attr">keep-alive:</span> <span class="number">60</span>  </span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®ç±»">é…ç½®ç±»</h2>
<p>è¿™é‡Œå°±åˆ›å»ºäº†å¹¶å¼€å¯äº†å¼‚æ­¥é…ç½®ï¼Œä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º10ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º20ï¼Œé˜Ÿåˆ—å®¹é‡ä¸º100ï¼Œæ´»åŠ¨ç§’æ•°ä¸º60ï¼Œç›´æ¥æ‹’ç»çš„çº¿ç¨‹æ± ã€‚</p>
<p>ä½¿ç”¨çš„è¯å°±åŠ ä¸Š<code>@Async</code>æ³¨è§£å³å¯ï¼ŒéªŒè¯çš„è¯å¯ä»¥æŸ¥çœ‹æ—¥å¿—ä¸­çº¿ç¨‹åæ˜¯ä¸æ˜¯æˆ‘ä»¬é…ç½®çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.AsyncConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/25</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncConfig</span> <span class="keyword">implements</span> <span class="title class_">AsyncConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.task.execution.pool.core-size&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> corePoolSize;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.task.execution.pool.max-size&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxPoolSize;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.task.execution.pool.queue-capacity&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> queueCapacity;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.task.execution.pool.keep-alive&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> keepAliveSeconds;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;asyncThreadPool&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ThreadPoolTaskExecutor <span class="title function_">threadPoolTaskExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolTaskExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskExecutor</span>();</span><br><span class="line">        executor.setCorePoolSize(corePoolSize);</span><br><span class="line">        executor.setMaxPoolSize(maxPoolSize);</span><br><span class="line">        executor.setQueueCapacity(queueCapacity);</span><br><span class="line">        executor.setKeepAliveSeconds(keepAliveSeconds);</span><br><span class="line">        executor.setRejectedExecutionHandler(<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è°ƒåº¦ä¸­å¿ƒé…ç½®ä¸æ—¥å¿—">è°ƒåº¦ä¸­å¿ƒé…ç½®ä¸æ—¥å¿—</h1>
<p>è¿™ä¸ªåŒä¸Šå§ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹<a
href="https://www.xuxueli.com/xxl-job/">å®˜ç½‘</a>æˆ–æˆ‘ä¹‹å‰çš„<a
href="https://wnhyang.github.io/article/abbb8dbb.html">åˆæ¬¡ä½¿ç”¨
XXL-JOB</a>ã€‚</p>
<p>é‡å¤è¯´åŒä¸€ä»¶äº‹å®åœ¨æ²¡å¿…è¦ã€‚</p>
<p>æˆ‘ç›®å‰é…ç½®çš„æ˜¯æ¯å¤©8ç‚¹<code>0 0 8 * * ?</code></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å…³äºåšè¿™ä¸ªè¿‡æœŸé‚®ä»¶æé†’çš„æ–¹æ¡ˆæˆ‘ä¹Ÿæƒ³è¿‡å¾ˆå¤šï¼š</p>
<p>1ã€æ–°å»º/ä¿®æ”¹æ•°æ®æ—¶åˆ›å»º/æ›´æ–°å®šæ—¶é€šçŸ¥ä»»åŠ¡</p>
<ul>
<li>ç›´è§‚é€»è¾‘ä¸Šä¹Ÿå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œæˆ‘è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±åœ¨è¿‡æœŸæ—¶é—´æé†’æˆ‘å˜›ï¼Œä½†æ˜¯ï¼Œè¿™æ˜¯è¦ç»´æŠ¤å¥½å¤šçš„æ‰§è¡Œå™¨å—ï¼Ÿè¿˜æ˜¯æ€ä¹ˆåšï¼Œæˆ‘æ˜¯æ²¡æƒ³æ˜ç™½ã€‚</li>
</ul>
<p>2ã€æ¶ˆæ¯é˜Ÿåˆ—å»¶æ—¶æ¶ˆæ¯</p>
<ul>
<li>æ¶ˆæ¯é˜Ÿåˆ—åˆå¯ä»¥å‰Šå³°è§£è€¦ï¼Œè¿˜æ˜¯å¼‚æ­¥ï¼Œå¾ˆé€‚åˆå‘€ï¼Œä½†ï¼Œæ¶ˆæ¯ç”Ÿäº§æ˜¯åˆ›å»ºå’Œä¿®æ”¹çš„åŠ¨ä½œå—ï¼Œç„¶åæ¶ˆè´¹è€…å‘é€æ—¶å†æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦éœ€è¦å‘é€å—ï¼Ÿå¦å¤–æœ‰è¿™ä¹ˆä¹…çš„å»¶æ—¶æ¶ˆæ¯å•Šï¼Œé¢ã€‚ã€‚ã€‚</li>
</ul>
<p>3ã€å®šæ—¶æ‰«è¡¨</p>
<ul>
<li>è¿™ä¸ªåœ¨æˆ‘çœ‹æ¥è¿˜æ˜¯æ¯”è¾ƒèƒ½æ¥å—çš„ï¼Œç¼ºç‚¹å¯èƒ½å°±æ˜¯æ•°æ®é‡è¿‡å¤§æ—¶çš„æŸ¥è¡¨é—®é¢˜å§</li>
</ul>
<p>å–é•¿è¡¥çŸ­ï¼Œä¼˜åŒ–ä¸€ä¸‹ï¼š</p>
<p>å®šæ—¶æ‰«è¡¨+æ¶ˆæ¯é˜Ÿåˆ—</p>
<p>å®šæ—¶æ‰«è¡¨éœ€è¦è§£å†³çš„æ˜¯æ‹†åˆ†ï¼Œä¸ç®¡æ˜¯é€šè¿‡åº•å±‚çš„æ‹†è¡¨è¿˜æ˜¯ä¸Šå±‚<code>sql</code>å’Œæ‰§è¡Œå™¨éƒ½æœ‰å¯æ“ä½œçš„ç©ºé—´</p>
<p>é€šè¿‡å®šæ—¶æ‰«è¡¨å°†ä»»åŠ¡ç»†åŒ–é€ç»™æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…å‘é€å‰å†æ¬¡æ£€æŸ¥ï¼Œä½“éªŒæ„Ÿä¼šæ›´å¼º</p>
<p>æŠ›ç –å¼•ç‰äº†ã€‚ã€‚ã€‚</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
        <tag>å®šæ—¶ä»»åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title>ruoyiåˆ†é¡µé—®é¢˜</title>
    <url>/article/488e4344.html</url>
    <content><![CDATA[<h1 id="æ°”æ­»äº†">æ°”æ­»äº†</h1>
<p>æ°”å¾—æˆ‘ç›´æ¥åˆšåˆšè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±é©¬ä¸Šæ¥å†™è¿™ç¯‡æ–‡ç« äº†</p>
<p>è¿™æ ·ä¹Ÿå¥½ï¼Œæˆ‘èƒ½æŠŠæ•´ä¸ªè¿‡ç¨‹å®Œæ•´è®°å½•ä¸‹æ¥</p>
<p>é‚£å¼€å§‹å§</p>
<span id="more"></span>
<h1 id="è¿‡ç¨‹">è¿‡ç¨‹</h1>
<p>æœ€è¿‘åœ¨åšæ¯•è®¾å˜›ï¼Œç”¨çš„æ˜¯<a
href="https://gitee.com/y_project/RuoYi-Vue">RuoYi-Vue</a>ï¼Œç”¨èµ·æ¥çœŸçš„éå¸¸æ–¹ä¾¿ï¼Œæå¤§çš„æé«˜äº†å¼€å‘æ•ˆç‡ã€‚åšèµ·æ¯•è®¾æˆ–å…¶ä»–å°é¡¹ç›®çœŸçš„éå¸¸å®¹æ˜“ï¼Œå°¤å…¶åŠ ä¸Šå®ƒçš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œéå¸¸æ–¹ä¾¿ã€‚è€Œä¸”æˆ‘ä¸å…‰æ˜¯åœ¨ç”¨ï¼ŒåŒæ—¶å…¶å®ä¹Ÿæ˜¯åœ¨å­¦ä¹ ï¼Œä»ä¸­è¿˜æ˜¯èƒ½å­¦åˆ°å¾ˆå¤šä¸œè¥¿çš„ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ„Ÿè§¦å°±æ˜¯å¯¹äºé•¿æœŸè¢«ä¸šåŠ¡æŠ˜è…¾åˆ°åŠæ­»ï¼Œå¯¹ä»£ç å¤±å»ä¿¡å¿ƒçš„ç¨‹åºå‘˜ï¼Œä»–ä»¬çœ‹åˆ°è¿™æ ·çš„å¼€æºé¡¹ç›®ï¼Œæˆ‘ç›¸ä¿¡ä»–ä»¬è‚¯å®šæ˜¯å¼€å¿ƒï¼Œå› ä¸ºè¿™ç§å¼€æºé¡¹ç›®ä»£ç é£æ ¼ä¸Šå¾ˆç»Ÿä¸€ã€è§„èŒƒæ ‡å‡†æ‰§è¡Œçš„å¾ˆåˆ°ä½ï¼Œçœ‹èµ·æ¥çœŸçš„èµå¿ƒæ‚¦ç›®ã€‚</p>
<h2 id="é—®é¢˜ç®€è¿°">é—®é¢˜ç®€è¿°</h2>
<p>å¥½äº†ï¼Œå›åˆ°æ­£é¢˜ï¼</p>
<p>ä»Šå¤©åšæ¯•è®¾ï¼Œé€ æ•°æ®æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°åˆ†é¡µåŠŸèƒ½å¤±æ•ˆäº†ï¼Œå‰ç«¯è°ƒç”¨åç«¯åˆ†é¡µæ¥å£è¿”å›çš„<code>total</code>æœ‰é—®é¢˜</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>total<span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span>â€¦<span class="punctuation">&#125;</span></span><br><span class="line">	code<span class="punctuation">:</span> <span class="number">200</span></span><br><span class="line">	msg<span class="punctuation">:</span> <span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span></span><br><span class="line">	rows<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span>searchValue<span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span> createBy<span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span> createTime<span class="punctuation">:</span> <span class="string">&quot;2022-03-18 20:36:55&quot;</span><span class="punctuation">,</span> updateBy<span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span>â€¦<span class="punctuation">&#125;</span><span class="punctuation">,</span>â€¦<span class="punctuation">]</span></span><br><span class="line">	total<span class="punctuation">:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p><code>total</code>æ€»æ˜¯è¿”å›å½“å‰æ•°æ®çš„<code>size</code></p>
<p>æˆ‘å¾ˆæ˜¯ä¸è§£ï¼Œè‡ªè®¤ä¸ºå¯¹äº<code>ruoyi</code>åˆ†é¡µæµç¨‹å¾ˆæ˜¯ç†Ÿæ‚‰ï¼Œå¯¹ç…§å®˜ç½‘æ‰¾é—®é¢˜ï¼Œæ„£æ˜¯æ‰¾äº†åŠå¤©æ²¡å‘ç°é—®é¢˜</p>
<p>å®˜ç½‘ï¼š<a
href="http://doc.ruoyi.vip/ruoyi-vue/document/htsc.html#åˆ†é¡µå®ç°">åå°æ‰‹å†Œ
| RuoYi</a></p>
<p>æ£€æŸ¥äº†åŠå¤©æ²¡å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œåªå¥½å…ˆå»æ‰¾æ‰¾æœ‰æ²¡æœ‰é‡åˆ°åŒæ ·é—®é¢˜çš„ï¼Œæœç„¶ï¼Œæœ‰ä¸å°‘</p>
<ul>
<li>https://cloud.tencent.com/developer/article/1786290</li>
<li>https://zhuanlan.zhihu.com/p/159199627</li>
<li>https://blog.csdn.net/qq_40942359/article/details/121429234</li>
<li>https://www.cnblogs.com/mantishell/p/13674818.html</li>
<li>https://blog.csdn.net/BADAO_LIUMANG_QIZHI/article/details/108017635</li>
</ul>
<p>çœ‹å®Œåï¼Œå¤§è‡´æ˜ç™½æ˜¯æ€ä¹ˆå›äº‹ï¼Œè¿™å…¶å®æ˜¯<code>PageHelper</code>çš„é—®é¢˜</p>
<h2 id="æ¢³ç†æµç¨‹">æ¢³ç†æµç¨‹</h2>
<p>æŒ‰ç…§<code>ruoyi</code>çš„æµç¨‹ç†ä¸€é</p>
<p>1ã€åç«¯åˆ†é¡µæ¥å£<code>SysUserController extends BaseController</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è·å–ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;system:user:list&#x27;)&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> TableDataInfo <span class="title function_">list</span><span class="params">(SysUser user)</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯åˆ†é¡µï¼Œè¦ç´§æ¥ç€åˆ†é¡µï¼ˆservice/mapperï¼‰ï¼Œè¿™é‡Œruoyiè¿›è¡Œäº†å°è£…</span></span><br><span class="line">    startPage();</span><br><span class="line">    List&lt;SysUser&gt; list = userService.selectUserList(user);</span><br><span class="line">    <span class="keyword">return</span> getDataTable(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç‚¹å¼€<code>startPage();</code>ï¼Œè¿™æ˜¯çˆ¶ç±»<code>BaseController</code>çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">startPage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–requestä¸­å…³äºåˆ†é¡µçš„è¯·æ±‚ï¼Œå…·ä½“æœ‰å…³äºä¸€ä¸ªServletUtilsçš„ç±»ï¼Œå¯ä»¥è‡ªè¡Œäº†è§£</span></span><br><span class="line">    <span class="type">PageDomain</span> <span class="variable">pageDomain</span> <span class="operator">=</span> TableSupport.buildPageRequest();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> pageDomain.getPageNum();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> pageDomain.getPageSize();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNotNull(pageNum) &amp;&amp; StringUtils.isNotNull(pageSize)) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">orderBy</span> <span class="operator">=</span> SqlUtil.escapeOrderBySql(pageDomain.getOrderBy());</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">reasonable</span> <span class="operator">=</span> pageDomain.getReasonable();</span><br><span class="line">        <span class="comment">// çœŸæ­£çš„å¼€å§‹åˆ†é¡µ</span></span><br><span class="line">        PageHelper.startPage(pageNum, pageSize, orderBy).setReasonable(reasonable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2ã€æ¥åˆ°<code>SysUserServiceImpl</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®æ¡ä»¶åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç”¨æˆ·ä¿¡æ¯é›†åˆä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@DataScope(deptAlias = &quot;d&quot;, userAlias = &quot;u&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;SysUser&gt; <span class="title function_">selectUserList</span><span class="params">(SysUser user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> userMapper.selectUserList(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘ç°è¿™é‡Œçš„<code>service</code>å°±ä¸€è¡Œï¼Ÿ</p>
<p><code>PageHelper</code>å°±æ˜¯åœ¨è¿™å‘æŒ¥äº†ä½œç”¨ï¼Œè¿›è¡Œäº†åˆ†é¡µ</p>
<p>å…¶å®æˆ‘çš„é—®é¢˜å°±åœ¨è¿™é‡Œï¼Œä¸è¿‡æˆ‘è¦å…ˆæŠŠåé¢çš„æµç¨‹èµ°å®Œ</p>
<p>3ã€æŸ¥åˆ°æ•°æ®æˆ‘ä»¬å›åˆ°<code>SysUserController</code>ï¼Œè¿™æ¬¡å…³æ³¨ä»–çš„<code>return getDataTable(list);</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”è¯·æ±‚åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;, &quot;unchecked&quot;&#125;)</span></span><br><span class="line"><span class="keyword">protected</span> TableDataInfo <span class="title function_">getDataTable</span><span class="params">(List&lt;?&gt; list)</span> &#123;</span><br><span class="line">    <span class="type">TableDataInfo</span> <span class="variable">rspData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TableDataInfo</span>();</span><br><span class="line">    rspData.setCode(HttpStatus.SUCCESS);</span><br><span class="line">    rspData.setMsg(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>);</span><br><span class="line">    rspData.setRows(list);</span><br><span class="line">    rspData.setTotal(<span class="keyword">new</span> <span class="title class_">PageInfo</span>(list).getTotal());</span><br><span class="line">    <span class="keyword">return</span> rspData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯æœ€ç»ˆçš„ç›¸åº”ç»“æœï¼Œæ—¢ç„¶æ˜¯<code>total</code>å‡ºé—®é¢˜ï¼Œé‚£å°±é‡ç‚¹å…³æ³¨<code>setTotal</code>æ–¹æ³•ï¼Œç›´æ¥ç‚¹è¿›<code>new PageInfo(list).getTotal()</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">PageInfo</span><span class="params">(List&lt;T&gt; list)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(list, <span class="number">8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">PageInfo</span><span class="params">(List&lt;T&gt; list, <span class="type">int</span> navigatePages)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(list);</span><br><span class="line">    <span class="built_in">this</span>.isFirstPage = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.isLastPage = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.hasPreviousPage = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.hasNextPage = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (list <span class="keyword">instanceof</span> Page) &#123;</span><br><span class="line">        <span class="type">Page</span> <span class="variable">page</span> <span class="operator">=</span> (Page)list;</span><br><span class="line">        <span class="built_in">this</span>.pageNum = page.getPageNum();</span><br><span class="line">        <span class="built_in">this</span>.pageSize = page.getPageSize();</span><br><span class="line">        <span class="built_in">this</span>.pages = page.getPages();</span><br><span class="line">        <span class="built_in">this</span>.size = page.size();</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.startRow = <span class="number">0L</span>;</span><br><span class="line">            <span class="built_in">this</span>.endRow = <span class="number">0L</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.startRow = page.getStartRow() + <span class="number">1L</span>;</span><br><span class="line">            <span class="built_in">this</span>.endRow = <span class="built_in">this</span>.startRow - <span class="number">1L</span> + (<span class="type">long</span>)<span class="built_in">this</span>.size;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (list <span class="keyword">instanceof</span> Collection) &#123;</span><br><span class="line">        <span class="built_in">this</span>.pageNum = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">this</span>.pageSize = list.size();</span><br><span class="line">        <span class="built_in">this</span>.pages = <span class="built_in">this</span>.pageSize &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.size = list.size();</span><br><span class="line">        <span class="built_in">this</span>.startRow = <span class="number">0L</span>;</span><br><span class="line">        <span class="built_in">this</span>.endRow = list.size() &gt; <span class="number">0</span> ? (<span class="type">long</span>)(list.size() - <span class="number">1</span>) : <span class="number">0L</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (list <span class="keyword">instanceof</span> Collection) &#123;</span><br><span class="line">        <span class="built_in">this</span>.calcByNavigatePages(navigatePages);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆè°ƒç”¨çš„æ˜¯ä¸‹é¢çš„æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆå°±è¿›åˆ°<code>super(list);</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">PageSerializable</span><span class="params">(List&lt;T&gt; list)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.list = list;</span><br><span class="line">    <span class="comment">// æ˜¯å¦æ˜¯Pageå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (list <span class="keyword">instanceof</span> Page) &#123;</span><br><span class="line">        <span class="built_in">this</span>.total = ((Page)list).getTotal();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.total = (<span class="type">long</span>)list.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯<code>com.github.pagehelper</code>åŒ…ä¸‹çš„ï¼Œå°±æ˜¯åœ¨è¿™é‡Œä¸º<code>PageInfo</code>è®¾ç½®äº†<code>total</code>ï¼Œå½“ç„¶ä¹Ÿæ˜¯ä¸ºæˆ‘ä»¬æœ€ç»ˆç›¸åº”è®¾ç½®äº†</p>
<p>ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>Pageå“ªé‡Œæ¥çš„</p>
<p>4ã€Page</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.github.pagehelper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Page</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Closeable</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡º<code>Page</code>ç»§æ‰¿äº†<code>ArrayList</code>ä¹Ÿæ˜¯å°±å®ç°äº†<code>List</code></p>
<p><code>debug</code>ç»“æœå¦‚ä¸‹ï¼Œå‘ç°åœ¨æ‰§è¡Œå®Œ<code>service</code>ä»£ç åï¼Œ<code>PageHelper</code>å°±å·²ç»å®Œæˆè¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆè‡ªç„¶å°±è®¾ç½®å¥½äº†<code>total</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2n0r5fmnpj80.webp"
alt="æ­£å¸¸åˆ†é¡µdebug-PageHelper" />
<figcaption aria-hidden="true">æ­£å¸¸åˆ†é¡µdebug-PageHelper</figcaption>
</figure>
<p>ä¸Šé¢æ˜¯æ­£å¸¸æµç¨‹æ¢³ç†ï¼Œæ¥ä¸‹çœ‹æˆ‘çš„ä»£ç ï¼Œå“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œå¯¼è‡´<code>total</code>æ€»æ˜¯é”™çš„</p>
<h2 id="é—®é¢˜ä¸è§£å†³">é—®é¢˜ä¸è§£å†³</h2>
<p>ä¸Šé¢æ˜¯ä¸¾å¾—<code>ruoyi</code>åŸæœ¬çš„ä¾‹å­ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰æ”¹åŠ¨ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰é—®é¢˜</p>
<p>åœ¨æˆ‘çš„æ¨¡å—ä¸Šï¼Œæˆ‘å…¶ä»–çš„ä»£ç å®ç°ä¹Ÿç›¸åŒï¼Œå°±æ˜¯åœ¨<code>service</code>ä¸Šåˆå¤„ç†äº†ä¸€æ¬¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> task ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Task&gt; <span class="title function_">selectTaskList</span><span class="params">(Task task)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> taskMapper.selectTaskList(task).stream().map(<span class="built_in">this</span>::fill).collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>fill</code>å°±æ˜¯åˆä¸€ä¸ªå¡«å……æ•°æ®çš„æµç¨‹</p>
<p>æ‰“å°sqlæ—¥å¿—æ²¡æœ‰é—®é¢˜ï¼Œæ˜¯æœ‰åˆ†é¡µæµç¨‹çš„ï¼ˆæŸ¥æ€»æ•°ï¼Œç„¶å<code>limit</code>ï¼‰</p>
<p><code>debug</code>å‘ç°è¿™é‡Œ<code>list</code>å˜æˆäº†ArrayListï¼Œå¹¶é<code>Page</code>ï¼Œä¹Ÿå°±æŠŠ<code>total</code>è®¾ç½®ä¸º<code>list.size()</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1oocatztyvxc.webp"
alt="å¼‚å¸¸åˆ†é¡µdebug-PageHelper" />
<figcaption aria-hidden="true">å¼‚å¸¸åˆ†é¡µdebug-PageHelper</figcaption>
</figure>
<p>å…¶å®é—®é¢˜æ—©å°±åœ¨æŸ¥åˆ°èµ„æ–™åå‘ç°äº†ï¼Œä½†æ˜¯å¤§å¤šæ•°å¤„ç†æ–¹æ³•æˆ‘éƒ½çœ‹ä¸ä¸Šï¼Œä»€ä¹ˆå†è°ƒç”¨<code>PageHelper.startPage</code>ï¼Œè½¬æ¢æˆ<code>PageInfo</code>ä¹‹ç±»çš„ï¼Œéƒ½ä¼šè®©æˆ‘æ€€ç–‘æˆ‘æ˜¯å¦æœ‰å¿…è¦ç”¨äº†</p>
<p>å°¤å…¶æ˜¯åœ¨å·²ç»ä½¿ç”¨äº†<code>ruoyi</code>ä¹‹åï¼Œé‡æ–°åœ¨serviceåšé‚£ç®€ç›´å¤ªéº»çƒ¦äº†ï¼Œå› ä¸ºé‚£æ ·æˆ‘è¿˜éœ€è¦æŠŠ<code>ruoyi</code>å°è£…åœ¨<code>Controller</code>ä¸Šçš„ä¸€äº›ä¸œè¥¿æ‹¿è¿‡å»ï¼ŒæŠ˜è…¾ä¸äº†</p>
<p>æœ€åï¼Œæ‰¾åˆ°ä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•è§£å†³äº†</p>
<p>å°±æ˜¯ï¼Œçœ‹ä¸Šé¢çš„ä»£ç å…¶æ˜¯åˆè°ƒç”¨äº†<code>stream</code>çš„è½¬æ¢æµç¨‹çš„ï¼Œå¯èƒ½å°±æ˜¯åœ¨è¿™é‡Œ<code>PageHelper</code>å‡ºç°äº†é—®é¢˜</p>
<p>é‚£ä¹ˆè¯•ç€å°†<code>fill</code>æ–¹æ³•å˜æˆ<code>void</code>ï¼Œåæ­£ä¹Ÿæ˜¯å¡«å……æ•°æ®ï¼Œæ²¡æœ‰å½±å“çš„ï¼Œæ”¹åŠ¨åå¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Task&gt; <span class="title function_">selectTaskList</span><span class="params">(Task task)</span> &#123;</span><br><span class="line">    List&lt;Task&gt; taskList = taskMapper.selectTaskList(task);</span><br><span class="line">    taskList.forEach(<span class="built_in">this</span>::fill);</span><br><span class="line">    <span class="keyword">return</span> taskList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ¬¡<code>debug</code>å°±æ˜¯<code>Page</code>å¯¹è±¡äº†ï¼Œä¸€åˆ‡éƒ½æ­£å¸¸äº†</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¦‚æœä½ æˆåŠŸå¸¦å…¥æˆ‘çš„èŠ‚å¥ï¼Œé‚£å¾ˆå¥½ï¼Œä½ è®¤çœŸçœ‹äº†ï¼›å¦‚æœä½ å‘ç°å…¶ä¸­é—®é¢˜äº†ï¼Œé‚£æ›´å¥½äº†ï¼Œæ¬¢è¿æŒ‡æ­£ï¼›å¦‚æœä½ è¿˜èƒ½å‘ç°æˆ‘å¦ä¸€ä¸ªæƒ³è®¨è®ºçš„é—®é¢˜ï¼Œé‚£æˆ‘æ›´å¼€å¿ƒäº†</p>
<p>æˆ‘æƒ³è®¨è®ºçš„å°±è—åœ¨</p>
<blockquote>
<p>å‘ç°è¿™é‡Œçš„<code>service</code>å°±ä¸€è¡Œï¼Ÿ</p>
</blockquote>
<p>è¿™å¥è¯é‡Œäº†</p>
<p>å¾ˆå¥‡æ€ªæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç ä¸éƒ½æ˜¯å‡ åè¡Œï¼Œä¸Šç™¾è¡Œçš„å—ï¼ŸğŸ¤”</p>
<p>ä¸ºä»€ä¹ˆ<code>service</code>å°±ä¸€è¡Œ<code>mapper</code>ï¼Ÿ</p>
<p>ç¯‡å¹…é—®é¢˜ï¼Œä¸€ä¸‹åœ¨è®¨è®ºå§ï¼ï¼ï¼ğŸ˜</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>ruoyi</tag>
      </tags>
  </entry>
  <entry>
    <title>ruoyiå­¦ä¹ Quartz</title>
    <url>/article/796c508a.html</url>
    <content><![CDATA[<p>ä¾æ—§æ˜¯ä»<code>ruoyi</code>å­¦ä¹ ï¼Œè¿™æ¬¡æ˜¯ä»»åŠ¡è°ƒåº¦æ¡†æ¶<code>Quartz</code></p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://www.w3cschool.cn/quartz_doc/">Quartzå®˜æ–¹æ–‡æ¡£</a></p>
<p><a
href="https://blog.csdn.net/lkl_csdn/article/details/73613033">quartz
ï¼ˆä»åŸç†åˆ°åº”ç”¨ï¼‰è¯¦è§£ç¯‡</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/306591082">Quartz
æ˜¯ä»€ä¹ˆï¼Ÿä¸€æ–‡å¸¦ä½ å…¥å‘ - çŸ¥ä¹</a></p>
<p>ä»»åŠ¡è°ƒåº¦ï¼Œä¹Ÿå¯è¯´æ˜¯å®šæ—¶ä»»åŠ¡ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¸¸è§çš„åœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­ï¼Œæœ€å¸¸è§çš„è«è¿‡äºé—¹é’Ÿäº†ï¼Œè¿™å°±æ˜¯ä¸€ç§å®šæ—¶ä»»åŠ¡ï¼Œå…¶ä»–è¿˜æœ‰æé†’äº‹é¡¹ï¼Œæ¶ˆæ¯è®¢é˜…ç­‰ç­‰</p>
<span id="more"></span>
<h1 id="å…¥é—¨">å…¥é—¨</h1>
<p>å…³äº<code>Quartz</code>ï¼Œé¦–å…ˆè¦çŸ¥é“<code>Job</code>ã€<code>JobDetail</code>ã€<code>Trigger</code>ã€<code>Scheduler</code></p>
<p>æˆ‘ç®€å•çš„ç”¨éå®˜æ–¹çš„è¯­è¨€ï¼Œæˆ‘çš„ç†è§£ï¼Œè®²ä¸€ä¸‹</p>
<ul>
<li><p><code>Job</code>ï¼šå…·ä½“çš„è°ƒç”¨æ¥å£ï¼Œå…³é”®æ˜¯è¦å®ç°å…¶ä¸­çš„<code>execute</code>æ–¹æ³•</p></li>
<li><p><code>JobDetail</code>ï¼šåŒºåˆ«ä¸åŒç±»å‹çš„ä»»åŠ¡ï¼Œè¿˜åŒ…æ‹¬<code>Job</code>å®ä¾‹çš„å±æ€§</p></li>
<li><p><code>Trigger</code>ï¼šè§¦å‘å™¨ï¼Œé…ç½®ä¸åŒä»»åŠ¡çš„æ‰§è¡Œç­–ç•¥</p></li>
<li><p><code>Scheduler</code>ï¼šè°ƒåº¦å™¨ï¼Œè°ƒåº¦ä»»åŠ¡</p></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="scheduler">Scheduler</h1>
<p><code>Scheduler</code>ä½œä¸ºçœŸæ­£çš„ä»»åŠ¡è°ƒåº¦å™¨ï¼Œè‚¯å®šæ˜¯éœ€è¦é…ç½®å„ç§å‚æ•°çš„ï¼Œæ‹¿<code>ruoyi</code>é…ç½®æ¥çœ‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šæ—¶ä»»åŠ¡é…ç½®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduleConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SchedulerFactoryBean <span class="title function_">schedulerFactoryBean</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">SchedulerFactoryBean</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchedulerFactoryBean</span>();</span><br><span class="line">        factory.setDataSource(dataSource);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// quartzå‚æ•°</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.scheduler.instanceName&quot;</span>, <span class="string">&quot;RuoyiScheduler&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.scheduler.instanceId&quot;</span>, <span class="string">&quot;AUTO&quot;</span>);</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ± é…ç½®</span></span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.threadPool.class&quot;</span>, <span class="string">&quot;org.quartz.simpl.SimpleThreadPool&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.threadPool.threadCount&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.threadPool.threadPriority&quot;</span>, <span class="string">&quot;5&quot;</span>);</span><br><span class="line">        <span class="comment">// JobStoreé…ç½®</span></span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.class&quot;</span>, <span class="string">&quot;org.quartz.impl.jdbcjobstore.JobStoreTX&quot;</span>);</span><br><span class="line">        <span class="comment">// é›†ç¾¤é…ç½®</span></span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.isClustered&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.clusterCheckinInterval&quot;</span>, <span class="string">&quot;15000&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.maxMisfiresToHandleAtATime&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.txIsolationLevelSerializable&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// sqlserver å¯ç”¨</span></span><br><span class="line">        <span class="comment">// prop.put(&quot;org.quartz.jobStore.selectWithLockSQL&quot;, &quot;SELECT * FROM &#123;0&#125;LOCKS UPDLOCK WHERE LOCK_NAME = ?&quot;);</span></span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.misfireThreshold&quot;</span>, <span class="string">&quot;12000&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;org.quartz.jobStore.tablePrefix&quot;</span>, <span class="string">&quot;QRTZ_&quot;</span>);</span><br><span class="line">        factory.setQuartzProperties(prop);</span><br><span class="line"></span><br><span class="line">        factory.setSchedulerName(<span class="string">&quot;RuoyiScheduler&quot;</span>);</span><br><span class="line">        <span class="comment">// å»¶æ—¶å¯åŠ¨</span></span><br><span class="line">        factory.setStartupDelay(<span class="number">1</span>);</span><br><span class="line">        factory.setApplicationContextSchedulerContextKey(<span class="string">&quot;applicationContextKey&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯é€‰ï¼ŒQuartzScheduler</span></span><br><span class="line">        <span class="comment">// å¯åŠ¨æ—¶æ›´æ–°å·±å­˜åœ¨çš„Jobï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡ä¿®æ”¹targetObjectååˆ é™¤qrtz_job_detailsè¡¨å¯¹åº”è®°å½•äº†</span></span><br><span class="line">        factory.setOverwriteExistingJobs(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è‡ªåŠ¨å¯åŠ¨ï¼Œé»˜è®¤ä¸ºtrue</span></span><br><span class="line">        factory.setAutoStartup(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ruoyi</code>çš„é…ç½®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®æˆ˜å‚è€ƒï¼Œå…¶ä¸Šçš„æ³¨è§£ä¹Ÿå†™çš„éå¸¸æ˜ç™½äº†</p>
<h2 id="ä¸»å‚æ•°é…ç½®">ä¸»å‚æ•°é…ç½®</h2>
<p><code>Quartz</code>ä¸»å‚æ•°é…ç½®ï¼Œå¯å‚è€ƒ<a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-ml8e2d9m.html">Quartzä¸»é…ç½®</a>ï¼Œ<code>ruoyi</code>é…ç½®åªæœ‰ä¸¤é¡¹</p>
<ul>
<li><p><code>org.quartz.scheduler.instanceName</code>ï¼šæœ¬èº«å¯¹äºè°ƒåº¦ç¨‹åºæ²¡æœ‰æ„ä¹‰ï¼Œå¦‚æ˜¯é›†ç¾¤æ¨¡å¼éœ€è¦åŒä¸€é€»è¾‘è°ƒåº¦ç¨‹åºä½¿ç”¨ç›¸åŒåç§°</p></li>
<li><p><code>org.quartz.scheduler.instanceId</code>ï¼šè°ƒåº¦ç¨‹åº<code>id</code>æ–¹æ³•ï¼Œé…ç½®ä¸º<code>Auto</code>åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰</p></li>
</ul>
<h2 id="çº¿ç¨‹æ± é…ç½®">çº¿ç¨‹æ± é…ç½®</h2>
<p><code>ThreadPool</code>é…ç½®ï¼Œå¯å‚è€ƒ<a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-7vix2d9n.html">Quartzé…ç½®ThreadPoolè®¾ç½®</a></p>
<ul>
<li><p><code>org.quartz.threadPool.class</code>ï¼š<code>ThreadPool</code>çš„å®ç°ç±»ï¼Œ<code>Quartz</code>è‡ªå¸¦çš„<code>org.quartz.simpl.SimpleThreadPool</code>å·²ç»å¯ä»¥äº†</p></li>
<li><p><code>org.quartz.threadPool.threadCount</code>ï¼šçº¿ç¨‹æ•°ï¼Œæ ¹æ®åœºæ™¯éœ€è¦è€Œé…ç½®</p></li>
<li><p><code>org.quartz.threadPool.threadPriority</code>ï¼šçº¿ç¨‹ä¼˜å…ˆçº§</p></li>
</ul>
<h2 id="jobstoreé…ç½®">JobStoreé…ç½®</h2>
<p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è¯´<code>Job</code>è¿™äº›ä»»åŠ¡çš„å­˜å‚¨æ–¹å¼ï¼Œä¸€å…±æœ‰ä¸‰ç§æ–¹å¼</p>
<ul>
<li><p><code>RAMJobStore</code>ï¼šå†…å­˜å­˜å‚¨ï¼Œå¿«é€Ÿæ–¹ä¾¿ï¼Œæ˜“ä¸¢å¤±</p></li>
<li><p><code>JDBC-JobStoreTX</code>ã€<code>JDBC-JobStoreCMT</code>ï¼šè¿™ä¸¤ä¸ªå¯¹æ¯”ç€è¯´æœ€å¥½ï¼Œä»–ä»¬éƒ½æ˜¯é€šè¿‡<code>JDBC</code>æ¥å­˜å‚¨ï¼Œå› æ­¤ä¸æ˜“å¤±ï¼Œä¸¤è€…ä¸»è¦åŒºåˆ«æ˜¯äº‹åŠ¡ç”±è°ç®¡ç†ï¼Œ<code>TX</code>è¡¨ç¤ºè‡ªå·±æ¥ç®¡ç†äº‹åŠ¡ï¼Œ<code>CMT</code>è¡¨ç¤ºåŠ å…¥å…¨å±€äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºä½¿ç”¨<code>Spring</code>äº‹åŠ¡ç®¡ç†çš„åŸå› ï¼Œåº”è¯¥å¤§å¤šæ•°éƒ½æ˜¯ç”¨å‰è€…å§</p></li>
</ul>
<p>å‚è€ƒï¼š</p>
<p><a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-ib1j2d6x.html">Job
Stores</a></p>
<p><a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-hm9x2dki.html">Quartzé…ç½®RAMJobStore</a></p>
<p><a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-zjc52dkj.html">Quartzé…ç½®JDBC-JobStoreTX</a></p>
<p><a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-hsek2dnq.html">Quartzé…ç½®JDBC-JobStoreCMT</a></p>
<h2 id="æ•°æ®æºé…ç½®">æ•°æ®æºé…ç½®</h2>
<p>è¯¦ç»†è¯·å‚è€ƒï¼Œ<a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-d8pn2do9.html">Quartzé…ç½®DataSources</a></p>
<p>ä¸€æ—¦å‰é¢ä½¿ç”¨äº†<code>JDBC</code>çš„å­˜å‚¨æ–¹å¼ï¼Œå°±ä¸€å®šè¦é…ç½®æ•°æ®æºçš„ï¼Œ<code>ruoyi</code>ä½¿ç”¨çš„æ˜¯é…ç½®æ³¨å…¥çš„æ–¹å¼ï¼Œå°±æ˜¯å°†<code>ruoyi-framework</code>é…ç½®çš„æ•°æ®æºä»¥æ³¨å…¥çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œè¿™é‡Œä¸ç»†è¯´äº†ï¼Œæœ‰æœºä¼šå†™<code>ruoyi</code>æ•°æ®æºè®¾è®¡å†è®²å§</p>
<p>Quartzæä¾›äº†æ•°æ®åº“æ–‡ä»¶ï¼Œ<a
href="/download/quartz.sql">quartz.sqlä¸‹è½½</a></p>
<h2 id="é›†ç¾¤é…ç½®">é›†ç¾¤é…ç½®</h2>
<p>å‚è€ƒ<a
href="https://www.w3cschool.cn/quartz_doc/quartz_doc-3x7u2doc.html">ä½¿ç”¨JDBC-JobStoreé…ç½®ç¾¤é›†</a></p>
<ul>
<li><p><code>org.quartz.jobStore.isClustered</code>ï¼šè®¾ç½®ä¸ºâ€œ<code>true</code>â€æ‰“å¼€é›†ç¾¤åŠŸèƒ½</p></li>
<li><p><code>org.quartz.jobStore.clusterCheckinInterval</code>ï¼šæ£€æµ‹é›†ç¾¤é—´é¢‘ç‡ï¼Œå•ä½æ¯«ç§’</p></li>
<li><p><code>org.quartz.jobStore.maxMisfiresToHandleAtATime</code>ï¼šåœ¨ç»™å®šçš„é€šè¡Œè¯ä¸­ï¼Œå·¥ä½œåŒºå°†å¤„ç†çš„æœ€å¤§é”™è¯¯æ¬¡æ•°è§¦å‘ã€‚</p></li>
<li><p><code>org.quartz.jobStore.txIsolationLevelSerializable</code>ï¼šâ€œ<code>true</code>â€è¡¨ç¤º<code>Quartz</code>ï¼ˆä½¿ç”¨<code>JobStoreTX</code>æˆ–<code>CMT</code>ï¼‰åœ¨<code>JDBC</code>è¿æ¥ä¸Šè°ƒç”¨<code>setTransactionIsolation</code>ï¼ˆ<code>Connection.TRANSACTION_SERIALIZABLE</code>ï¼‰ã€‚è¿™å¯ä»¥æœ‰åŠ©äºé˜²æ­¢åœ¨é«˜è´Ÿè½½ä¸‹çš„æŸäº›æ•°æ®åº“çš„é”å®šè¶…æ—¶ä»¥åŠâ€œæŒä¹…â€äº‹åŠ¡ã€‚</p></li>
<li><p><code>org.quartz.jobStore.misfireThreshold</code>ï¼šåœ¨è¢«è®¤ä¸ºâ€œå¤±ç«â€ä¹‹å‰ï¼Œè°ƒåº¦ç¨‹åºå°†â€œå®¹å¿â€ä¸€ä¸ª<code>Triggers</code>å°†å…¶ä¸‹ä¸€ä¸ªå¯åŠ¨æ—¶é—´é€šè¿‡çš„æ¯«ç§’æ•°ã€‚</p></li>
<li><p><code>org.quartz.jobStore.tablePrefix</code>ï¼šè¡¨å‰ç¼€</p></li>
</ul>
<h2 id="å…¶ä»–">å…¶ä»–</h2>
<p>ruoyiå‰©ä¸‹çš„é…ç½®å°±ä¸å¤šè®²äº†ï¼Œçœ‹æ³¨é‡Šï¼ŒæŸ¥æºç å³å¯</p>
<h1 id="job">Job</h1>
<p>å…³äº<code>Job</code>ï¼Œå‰é¢å·²ç»è¯´è¿‡ï¼Œéœ€è¦å®ç°<code>Job</code>æ¥å£ï¼Œå®ç°<code>execute</code>æ–¹æ³•ï¼Œçœ‹çœ‹<code>ruoyi</code>æ˜¯æ€ä¹ˆåšçš„å§ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ½è±¡quartzè°ƒç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractQuartzJob</span> <span class="keyword">implements</span> <span class="title class_">Job</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(AbstractQuartzJob.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çº¿ç¨‹æœ¬åœ°å˜é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Date&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException &#123;</span><br><span class="line">        <span class="type">SysJob</span> <span class="variable">sysJob</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysJob</span>();</span><br><span class="line">        BeanUtils.copyBeanProp(sysJob, context.getMergedJobDataMap().get(ScheduleConstants.TASK_PROPERTIES));</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            before(context, sysJob);</span><br><span class="line">            <span class="keyword">if</span> (sysJob != <span class="literal">null</span>) &#123;</span><br><span class="line">                doExecute(context, sysJob);</span><br><span class="line">            &#125;</span><br><span class="line">            after(context, sysJob, <span class="literal">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸  - ï¼š&quot;</span>, e);</span><br><span class="line">            after(context, sysJob, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œå‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context å·¥ä½œæ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysJob  ç³»ç»Ÿè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JobExecutionContext context, SysJob sysJob)</span> &#123;</span><br><span class="line">        threadLocal.set(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œå</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context å·¥ä½œæ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysJob  ç³»ç»Ÿè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">(JobExecutionContext context, SysJob sysJob, Exception e)</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">startTime</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">        threadLocal.remove();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">SysJobLog</span> <span class="variable">sysJobLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysJobLog</span>();</span><br><span class="line">        sysJobLog.setJobName(sysJob.getJobName());</span><br><span class="line">        sysJobLog.setJobGroup(sysJob.getJobGroup());</span><br><span class="line">        sysJobLog.setInvokeTarget(sysJob.getInvokeTarget());</span><br><span class="line">        sysJobLog.setStartTime(startTime);</span><br><span class="line">        sysJobLog.setStopTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="type">long</span> <span class="variable">runMs</span> <span class="operator">=</span> sysJobLog.getStopTime().getTime() - sysJobLog.getStartTime().getTime();</span><br><span class="line">        sysJobLog.setJobMessage(sysJobLog.getJobName() + <span class="string">&quot; æ€»å…±è€—æ—¶ï¼š&quot;</span> + runMs + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            sysJobLog.setStatus(Constants.FAIL);</span><br><span class="line">            <span class="type">String</span> <span class="variable">errorMsg</span> <span class="operator">=</span> StringUtils.substring(ExceptionUtil.getExceptionMessage(e), <span class="number">0</span>, <span class="number">2000</span>);</span><br><span class="line">            sysJobLog.setExceptionInfo(errorMsg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sysJobLog.setStatus(Constants.SUCCESS);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†™å…¥æ•°æ®åº“å½“ä¸­</span></span><br><span class="line">        SpringUtils.getBean(ISysJobLogService.class).addJobLog(sysJobLog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œæ–¹æ³•ï¼Œç”±å­ç±»é‡è½½</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context å·¥ä½œæ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysJob  ç³»ç»Ÿè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">doExecute</span><span class="params">(JobExecutionContext context, SysJob sysJob)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰çš„æ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡æ–¹æ³•ä¸º<code>doExecute</code>ï¼Œä»<code>@Override</code>çš„<code>execute</code>å¯çŸ¥ï¼Œ<code>doExecute</code>æ–¹æ³•ä½œä¸º<code>execute</code>çš„ä¸­é—´éƒ¨åˆ†è¢«æ‰§è¡Œï¼Œå¤¹åœ¨<code>before</code>å’Œ<code>after</code>æ–¹æ³•ä¹‹ä¸­ã€‚è¯´åˆ°è¿™ä¸ªå¿…é¡»è¦æä¸€ä¸‹è¿™ä¸ªçº¿ç¨‹æœ¬åœ°å˜é‡<code>ThreadLocal</code>ï¼Œä¹‹å‰åªæ˜¯è§‰å¾—é¢è¯•é¢˜ä¸­è§å¾—å¤šï¼Œç°åœ¨çœ‹çš„ä»£ç å¤šäº†ï¼Œå°±çŸ¥é“äº†å®é™…ç”Ÿäº§ä¸­ç”¨çš„çœŸä¸å°‘ã€‚è¿™é‡Œ<code>ThreadLocal</code>å°±ä¸å¿…è¿‡å¤šä»‹ç»äº†ï¼Œä¿å­˜çº¿ç¨‹çº§å˜é‡ï¼Œäº’ä¸å¹²æ‰°ã€‚è¿™é‡Œä¿å­˜çš„æ˜¯<code>Date</code>æ•°æ®ï¼Œåœ¨<code>before</code>æ–¹æ³•ä¸­è®¾ç½®ï¼Œåœ¨<code>after</code>ä¸­è·å–ï¼Œå¹¶è®°å½•<code>job</code>æ—¥å¿—ï¼Œå†™å…¥æ•°æ®åº“ã€‚</p>
<p>æŠ½è±¡ç±»çœ‹å®Œäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å…·ä½“å®ç°ç±»äº†ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šæ—¶ä»»åŠ¡å¤„ç†ï¼ˆç¦æ­¢å¹¶å‘æ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DisallowConcurrentExecution</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuartzDisallowConcurrentExecution</span> <span class="keyword">extends</span> <span class="title class_">AbstractQuartzJob</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doExecute</span><span class="params">(JobExecutionContext context, SysJob sysJob)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        JobInvokeUtil.invokeMethod(sysJob);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šæ—¶ä»»åŠ¡å¤„ç†ï¼ˆå…è®¸å¹¶å‘æ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuartzJobExecution</span> <span class="keyword">extends</span> <span class="title class_">AbstractQuartzJob</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doExecute</span><span class="params">(JobExecutionContext context, SysJob sysJob)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        JobInvokeUtil.invokeMethod(sysJob);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»å‘½åå’Œæœ‰æ— <code>@DisallowConcurrentExecution</code>æ³¨è§£å°±å¯åŒºåˆ†ï¼Œå…³é”®æ˜¯æ˜¯å¦å…è®¸å¹¶å‘æ‰§è¡Œï¼ï¼Ÿ</p>
<p>å¯ä»¥çœ‹åˆ°å®ƒä»¬éƒ½æ˜¯è°ƒç”¨äº†<code>JobInvokeUtil</code>å·¥å…·ï¼Œå¦‚ä¸‹ï¼ˆå› ä¸ºä»£ç è¿‡å¤šï¼Œæœ‰äº›æ–¹æ³•çœç•¥æ‰äº†ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»»åŠ¡æ‰§è¡Œå·¥å…·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JobInvokeUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysJob ç³»ç»Ÿä»»åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">invokeMethod</span><span class="params">(SysJob sysJob)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">invokeTarget</span> <span class="operator">=</span> sysJob.getInvokeTarget();</span><br><span class="line">        <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> getBeanName(invokeTarget);</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> getMethodName(invokeTarget);</span><br><span class="line">        List&lt;Object[]&gt; methodParams = getMethodParams(invokeTarget);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!isValidClassName(beanName)) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> SpringUtils.getBean(beanName);</span><br><span class="line">            invokeMethod(bean, methodName, methodParams);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> Class.forName(beanName).newInstance();</span><br><span class="line">            invokeMethod(bean, methodName, methodParams);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨ä»»åŠ¡æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bean         ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> methodName   æ–¹æ³•åç§°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> methodParams æ–¹æ³•å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">invokeMethod</span><span class="params">(Object bean, String methodName, List&lt;Object[]&gt; methodParams)</span></span><br><span class="line">            <span class="keyword">throws</span> NoSuchMethodException, SecurityException, IllegalAccessException, IllegalArgumentException,</span><br><span class="line">            InvocationTargetException &#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull(methodParams) &amp;&amp; methodParams.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> bean.getClass().getDeclaredMethod(methodName, getMethodParamsType(methodParams));</span><br><span class="line">            method.invoke(bean, getMethodParamsValue(methodParams));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> bean.getClass().getDeclaredMethod(methodName);</span><br><span class="line">            method.invoke(bean);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¡éªŒæ˜¯å¦ä¸ºä¸ºclassåŒ…å</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str åç§°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæ˜¯ falseå¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isValidClassName</span><span class="params">(String invokeTarget)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> StringUtils.countMatches(invokeTarget, <span class="string">&quot;.&quot;</span>) &gt; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–beanåç§°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> invokeTarget ç›®æ ‡å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> beanåç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getBeanName</span><span class="params">(String invokeTarget)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> StringUtils.substringBefore(invokeTarget, <span class="string">&quot;(&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> StringUtils.substringBeforeLast(beanName, <span class="string">&quot;.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–beanæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> invokeTarget ç›®æ ‡å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> methodæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getMethodName</span><span class="params">(String invokeTarget)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> StringUtils.substringBefore(invokeTarget, <span class="string">&quot;(&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> StringUtils.substringAfterLast(methodName, <span class="string">&quot;.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–methodæ–¹æ³•å‚æ•°ç›¸å…³åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> invokeTarget ç›®æ ‡å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> methodæ–¹æ³•ç›¸å…³å‚æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Object[]&gt; getMethodParams(String invokeTarget) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å‚æ•°ç±»å‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> methodParams å‚æ•°ç›¸å…³åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‚æ•°ç±»å‹åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt;[] getMethodParamsType(List&lt;Object[]&gt; methodParams) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å‚æ•°å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> methodParams å‚æ•°ç›¸å…³åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‚æ•°å€¼åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object[] getMethodParamsValue(List&lt;Object[]&gt; methodParams) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»<code>invokeMethod(SysJob sysJob)</code>æ–¹æ³•æ¥çœ‹ï¼Œå…ˆä»<code>SysJob</code>è·å–ç›®æ ‡å­—ç¬¦ä¸²ï¼ˆå¤§æ¦‚å°±æ˜¯â€œç±»å.æ–¹æ³•å(å‚æ•°...)â€è¿™æ ·çš„ï¼‰ï¼›ç„¶ååˆ†åˆ«è·å–ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ï¼›åœ¨Springå®¹å™¨ä¸­æœ‰çš„äº¤äºˆbeanæ‰§è¡Œï¼Œæ²¡æœ‰çš„ç”¨åå°„çš„æ–¹å¼å®ä¾‹åŒ–ä¸€ä¸ªã€‚æœ€ååœ¨<code>invokeMethod(Object bean, String methodName, List&lt;Object[]&gt; methodParams)</code>çš„æ–¹æ³•ä¸­å®ç°ã€‚æœ¬ç±»ä¸­å…¶ä»–çš„æ–¹æ³•éƒ½æ˜¯è¾…åŠ©åšéªŒè¯ï¼Œè§£æçš„ï¼Œä¸åœ¨å¤šæã€‚</p>
<h1 id="trigger">Trigger</h1>
<p>å‰é¢ä¹Ÿæåˆ°äº†ï¼Œ<code>Trigger</code>è§¦å‘å™¨ï¼Œå…³ç³»åˆ°<code>Job</code>çš„æ‰§è¡Œç­–ç•¥ï¼Œå…³è”<code>Scheduler</code>å’Œ<code>Job</code>ã€‚ä¸‹é¢ä¾¿æ˜¯å…³é”®çš„åˆ›å»º<code>Scheduler</code>ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šæ—¶ä»»åŠ¡å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduleUtils</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¾—åˆ°quartzä»»åŠ¡ç±»</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysJob æ‰§è¡Œè®¡åˆ’</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å…·ä½“æ‰§è¡Œä»»åŠ¡ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Job</span>&gt; getQuartzJobClass(SysJob sysJob) &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isConcurrent</span> <span class="operator">=</span> <span class="string">&quot;0&quot;</span>.equals(sysJob.getConcurrent());</span><br><span class="line">        <span class="keyword">return</span> isConcurrent ? QuartzJobExecution.class : QuartzDisallowConcurrentExecution.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„å»ºä»»åŠ¡è§¦å‘å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> TriggerKey <span class="title function_">getTriggerKey</span><span class="params">(Long jobId, String jobGroup)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> TriggerKey.triggerKey(ScheduleConstants.TASK_CLASS_NAME + jobId, jobGroup);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„å»ºä»»åŠ¡é”®å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JobKey <span class="title function_">getJobKey</span><span class="params">(Long jobId, String jobGroup)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> JobKey.jobKey(ScheduleConstants.TASK_CLASS_NAME + jobId, jobGroup);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºå®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">createScheduleJob</span><span class="params">(Scheduler scheduler, SysJob job)</span> <span class="keyword">throws</span> SchedulerException, TaskException &#123;</span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">Job</span>&gt; jobClass = getQuartzJobClass(job);</span><br><span class="line">        <span class="comment">// æ„å»ºjobä¿¡æ¯</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">jobId</span> <span class="operator">=</span> job.getJobId();</span><br><span class="line">        <span class="type">String</span> <span class="variable">jobGroup</span> <span class="operator">=</span> job.getJobGroup();</span><br><span class="line">        <span class="type">JobDetail</span> <span class="variable">jobDetail</span> <span class="operator">=</span> JobBuilder.newJob(jobClass).withIdentity(getJobKey(jobId, jobGroup)).build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¡¨è¾¾å¼è°ƒåº¦æ„å»ºå™¨</span></span><br><span class="line">        <span class="type">CronScheduleBuilder</span> <span class="variable">cronScheduleBuilder</span> <span class="operator">=</span> CronScheduleBuilder.cronSchedule(job.getCronExpression());</span><br><span class="line">        cronScheduleBuilder = handleCronScheduleMisfirePolicy(job, cronScheduleBuilder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŒ‰æ–°çš„cronExpressionè¡¨è¾¾å¼æ„å»ºä¸€ä¸ªæ–°çš„trigger</span></span><br><span class="line">        <span class="type">CronTrigger</span> <span class="variable">trigger</span> <span class="operator">=</span> TriggerBuilder.newTrigger().withIdentity(getTriggerKey(jobId, jobGroup))</span><br><span class="line">                .withSchedule(cronScheduleBuilder).build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ”¾å…¥å‚æ•°ï¼Œè¿è¡Œæ—¶çš„æ–¹æ³•å¯ä»¥è·å–</span></span><br><span class="line">        jobDetail.getJobDataMap().put(ScheduleConstants.TASK_PROPERTIES, job);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (scheduler.checkExists(getJobKey(jobId, jobGroup))) &#123;</span><br><span class="line">            <span class="comment">// é˜²æ­¢åˆ›å»ºæ—¶å­˜åœ¨æ•°æ®é—®é¢˜ å…ˆç§»é™¤ï¼Œç„¶ååœ¨æ‰§è¡Œåˆ›å»ºæ“ä½œ</span></span><br><span class="line">            scheduler.deleteJob(getJobKey(jobId, jobGroup));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        scheduler.scheduleJob(jobDetail, trigger);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æš‚åœä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">if</span> (job.getStatus().equals(ScheduleConstants.Status.PAUSE.getValue())) &#123;</span><br><span class="line">            scheduler.pauseJob(ScheduleUtils.getJobKey(jobId, jobGroup));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®å®šæ—¶ä»»åŠ¡ç­–ç•¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CronScheduleBuilder <span class="title function_">handleCronScheduleMisfirePolicy</span><span class="params">(SysJob job, CronScheduleBuilder cb)</span></span><br><span class="line">            <span class="keyword">throws</span> TaskException &#123;</span><br><span class="line">        <span class="keyword">switch</span> (job.getMisfirePolicy()) &#123;</span><br><span class="line">            <span class="keyword">case</span> ScheduleConstants.MISFIRE_DEFAULT:</span><br><span class="line">                <span class="keyword">return</span> cb;</span><br><span class="line">            <span class="keyword">case</span> ScheduleConstants.MISFIRE_IGNORE_MISFIRES:</span><br><span class="line">                <span class="keyword">return</span> cb.withMisfireHandlingInstructionIgnoreMisfires();</span><br><span class="line">            <span class="keyword">case</span> ScheduleConstants.MISFIRE_FIRE_AND_PROCEED:</span><br><span class="line">                <span class="keyword">return</span> cb.withMisfireHandlingInstructionFireAndProceed();</span><br><span class="line">            <span class="keyword">case</span> ScheduleConstants.MISFIRE_DO_NOTHING:</span><br><span class="line">                <span class="keyword">return</span> cb.withMisfireHandlingInstructionDoNothing();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TaskException</span>(<span class="string">&quot;The task misfire policy &#x27;&quot;</span> + job.getMisfirePolicy()</span><br><span class="line">                        + <span class="string">&quot;&#x27; cannot be used in cron schedule tasks&quot;</span>, Code.CONFIG_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ruoyi</code>ä»£ç å†™çš„å¾ˆæ¼‚äº®çš„ï¼Œæ³¨é‡Šä¹Ÿéå¸¸æ¸…æ¥šã€‚ç›´æ¥ä»<code>createScheduleJob</code>æ–¹æ³•æ¥çœ‹ï¼Œé¦–å…ˆæ ¹æ®<code>job</code>æ˜¯å¦æ”¯æŒå¹¶å‘ç¡®å®š<code>class</code>ä¿¡æ¯ï¼›ç„¶åæ ¹æ®<code>Job</code>åˆ›å»º<code>JobDetail</code>ï¼Œç”¨<code>getJobKey(Long jobId, String jobGroup)</code>åŒºåˆ«æ ‡è¯†ï¼›ç„¶ååˆ›å»ºè¡¨è¾¾å¼æ„å»ºå™¨ï¼Œ<code>ruoyi</code>åªä½¿ç”¨<code>cron</code>è¡¨è¾¾å¼çš„æ–¹å¼ï¼ˆæœ¬èº«<code>cron</code>è¡¨è¾¾å¼å°±å¾ˆæœ‰ä¼˜åŠ¿ï¼‰ï¼ŒåŒæ—¶æ ¹æ®<code>MisfirePolicy</code>ä½¿ç”¨ä¸åŒç­–ç•¥ï¼›ç„¶åæ ¹æ®è¡¨è¾¾å¼æ„å»ºå™¨åˆ›å»º<code>Trigger</code>ï¼Œç±»ä¼¼äºä¸Šçš„<code>getTriggerKey(Long jobId, String jobGroup)</code>æ–¹æ³•åŒºåˆ«æ ‡è¯†ï¼›<code>JobDetail</code>æ”¾å…¥<code>Job</code>å¯¹è±¡ï¼Œæ–¹ä¾¿éšæ—¶è·å–ï¼›æœ€åå°±æ˜¯å°†å¯¹åº”çš„<code>JobDetail</code>å’Œ<code>Trigger</code>åŠ å…¥ä»»åŠ¡è°ƒåº¦å™¨ä¸­ã€‚</p>
<p>æœ€ååï¼Œé€šè¿‡<code>IDE</code>æ‰¾åˆ°è°ƒç”¨<code>createScheduleJob</code>æ–¹æ³•çš„åœ°æ–¹ï¼Œå°±ä¸‰ä¸ªï¼Œä¸€ä¸ª<code>SysJobServiceImpl</code>çš„<code>init</code>æ–¹æ³•ï¼Œå¦å¤–å°±æ˜¯æ–°å¢å’Œä¿®æ”¹<code>Job</code>æ–¹æ³•ä¸­äº†ã€‚</p>
<h1 id="è‡³æ­¤">è‡³æ­¤</h1>
<p>è‡³æ­¤ï¼Œ<code>ruoyi</code>æœ‰å…³äº<code>quartz</code>çš„ä½¿ç”¨å‡ ä¹å°±è®²å®Œäº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ¥å£å’Œä¸šåŠ¡è®¾è®¡çš„é—®é¢˜äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹ï¼Œåº”è¯¥å¯åŠ¨ä½“éªŒä¸€ä¸‹<code>ruoyi</code>è®¾è®¡è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿™ä¸ªç•™åˆ°ä¸‹æ¬¡æƒ³èµ·æ¥å†è¡¥å……å§ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<h1 id="æ€è€ƒ">æ€è€ƒ</h1>
<blockquote>
<p>æ˜¯å¦å¯ä»¥å¤ç”¨<code>job</code>ï¼Œå¤šä¸ª<code>trigger</code>å…±åŒè°ƒåº¦ï¼Ÿ</p>
</blockquote>
<p>å°±æ˜¯è¯´å¦‚æœåŒä¸€ä¸ª<code>job</code>ï¼Œå®ƒçš„æ‰§è¡Œç­–ç•¥æ¯”è¾ƒå¤æ‚ï¼Œä¸€ä¸ª<code>cron</code>è¡¨è¾¾å¼ä¸å¤Ÿç”¨ï¼Œæ€æ ·èƒ½åœ¨å¤ç”¨è¿™ä¸ª<code>job</code>çš„æƒ…å†µä¸‹ï¼Œå°†å®ƒè®¾ç½®å¤šä¸ª<code>Trigger</code>å‘¢ï¼Ÿ</p>
<blockquote>
<p>è¿˜æœ‰ã€‚ã€‚ã€‚</p>
</blockquote>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>ruoyi</tag>
        <tag>å®šæ—¶ä»»åŠ¡</tag>
        <tag>Quartz</tag>
      </tags>
  </entry>
  <entry>
    <title>ruoyiå­¦ä¹ AOP</title>
    <url>/article/5a136e9d.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ä»è‹¥ä¾é¡¹ç›®å­¦ä¹ <code>AOP</code>ã€‚</p>
<p>é¦–å…ˆï¼Œ<code>ruoyi</code>å¯¹äºä¸€ä¸ªé¡¹ç›®çš„è§„åˆ’å·²ç»åšå¾—éå¸¸å¥½äº†ï¼Œæˆ‘æ‰€è¯´çš„é¡¹ç›®è§„åˆ’æ˜¯æŒ‡<code>ruoyi-vue</code>ä¸­<code>pom</code>é¡¹ç›®çš„è§„åˆ’ï¼ŒåŒ…æ‹¬çˆ¶é¡¹ç›®ã€å­é¡¹ç›®ã€åŒ…ç®¡ç†ã€ç±»ç®¡ç†ç­‰ç­‰ã€‚<code>ruoyi</code>é¡¹ç›®çš„è§„èŒƒæ˜¯è®©äººå¾ˆèˆ’æœï¼Œæ¯ä¸ªæ¨¡å—çš„èŒè´£å°±å¾ˆæ˜æ™°ï¼Œæ˜¯éå¸¸å€¼å¾—å­¦ä¹ çš„ã€‚<code>ruoyi</code>ä¸­æœ‰å¾ˆå¤šå°è£…ï¼Œä¸ç®¡æ˜¯å·¥å…·ç±»çš„ï¼Œè¿˜æ˜¯é…ç½®ç±»çš„ï¼ŒæŒºå¤šçš„ã€‚å¯¹äºé¡¹ç›®ç»éªŒä¸è¶³çš„åˆå­¦è€…è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p>
<p>ä¸‹é¢æˆ‘ç®€å•ä»<code>ruoyi</code>é¡¹ç›®å‡ºå‘å­¦ä¹ ä¸€ä¸‹<code>ruoyi</code>æ˜¯å¦‚ä½•åš<code>AOP</code>çš„ã€‚</p>
<span id="more"></span>
<h1 id="aopæ¦‚å¿µ">AOPæ¦‚å¿µ</h1>
<p><code>AOP</code>çš„æ¦‚å¿µå¯¹äºæœ‰ä¸€å®šé¡¹ç›®åŸºç¡€çš„ä¸€å®šä¸é™Œç”Ÿã€‚</p>
<p>â€œé¢å‘åˆ‡é¢ç¼–ç¨‹å˜›â€ğŸ¤“ğŸ¤“ğŸ¤“</p>
<p>é¢å‘å¯¹è±¡å°†ç¨‹åºæŠ½è±¡ï¼Œåˆ†ä¸ºä¸åŒæ¨¡å—ï¼Œå„å¸å…¶èŒï¼Œèƒ½æœ‰åŠ›ä¿ƒè¿›å·¥ç¨‹å¼€å‘åˆ†å·¥åä½œï¼Œä½†æ˜¯ä¸åŒæ¨¡å—æœ‰æ—¶ä¼šæœ‰å…¬å…±è¡Œä¸ºï¼Œè¿™ç§è¡Œä¸ºä¸é€‚åˆç”¨ç»§æ‰¿æ¥å®ç°ï¼Œç»´æŠ¤ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚åˆ‡é¢ï¼ˆ<code>AOP</code>ï¼‰çš„å¼•å…¥å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œè¦è¾¾åˆ°ç›®çš„å°±æ˜¯ï¼Œåœ¨ä¸æ”¹å˜æºç çš„æƒ…å†µä¸‹ï¼Œä¸ºä¸åŒç»„ä»¶æ·»åŠ å…¬ç”¨åŠŸèƒ½ã€‚</p>
<h1 id="ruoyiåšæ³•">ruoyiåšæ³•</h1>
<p>å…¶å®<code>ruoyi</code>æœ‰å¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº†<code>AOP</code>ï¼ŒåŒ…æ‹¬æ•°æ®æºç¡®è®¤ã€æ•°æ®èŒƒå›´ç¡®è®¤ã€æƒé™è®¤è¯ã€é™æµã€é˜²é‡å¤æäº¤ã€<code>Excel</code>è¡¨æ ¼å¤„ç†ç­‰ç­‰ï¼Œå¾ˆå¤šçš„ã€‚</p>
<p>å®ƒä»¬çš„åŸç†åšæ³•å‡ ä¹ä¸€æ ·ï¼Œè¿™æ¬¡å°±<code>log</code>ï¼ˆæ—¥å¿—ï¼‰å­¦ä¹ ä¸€ä¸‹ã€‚</p>
<h1 id="åˆ‡é¢å…¥å£">åˆ‡é¢å…¥å£</h1>
<p>å¯ä»¥åœ¨<code>ruoyi-admin</code>é¡¹ç›®ä¸­<code>com.ruoyi.web.controller.system.SysDeptController</code>çœ‹åˆ°<code>@Log</code></p>
<p>å¾ˆæ˜æ˜¾<code>ruoyi</code>æ˜¯é€šè¿‡è‡ªå®šä¹‰æ³¨è§£çš„æ–¹å¼å®ç°<code>AOP</code>çš„ï¼Œå½“ç„¶è¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼šæ­£åˆ™ã€‚æ¯”è¾ƒæ³¨è§£å’Œæ­£åˆ™æ¥è¯´ï¼Œæ³¨è§£çš„æ–¹å¼æ›´åŠ æ–¹ä¾¿ä¸€äº›ï¼Œå“ªé‡Œéœ€è¦å°±åœ¨å“ªé‡Œæ·»åŠ å°±å¥½ï¼›æ­£åˆ™çš„è¯ï¼Œé¦–å…ˆå¯¹äºè§„èŒƒçš„æ­£åˆ™è¦ç†Ÿæ‚‰ï¼Œç„¶ååŒ…ç»“æ„è¦æ˜æ™°ï¼Œéšæ„ä¿®æ”¹å¾ˆå¯èƒ½å‡ºç°é—®é¢˜ã€‚</p>
<p>è¿™é‡Œå°±ä¸åšè¿‡å¤šè®¨è®ºäº†ï¼Œæ¥çœ‹<code>ruoyi</code>çš„å®ç°å§ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/system/dept&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysDeptController</span> <span class="keyword">extends</span> <span class="title class_">BaseController</span> &#123;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ–°å¢éƒ¨é—¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;system:dept:add&#x27;)&quot;)</span></span><br><span class="line">  <span class="meta">@Log(title = &quot;éƒ¨é—¨ç®¡ç†&quot;, businessType = BusinessType.INSERT)</span></span><br><span class="line">  <span class="meta">@PostMapping</span></span><br><span class="line">  <span class="keyword">public</span> AjaxResult <span class="title function_">add</span><span class="params">(<span class="meta">@Validated</span> <span class="meta">@RequestBody</span> SysDept dept)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (UserConstants.NOT_UNIQUE.equals(deptService.checkDeptNameUnique(dept))) &#123;</span><br><span class="line">          <span class="keyword">return</span> AjaxResult.error(<span class="string">&quot;æ–°å¢éƒ¨é—¨&#x27;&quot;</span> + dept.getDeptName() + <span class="string">&quot;&#x27;å¤±è´¥ï¼Œéƒ¨é—¨åç§°å·²å­˜åœ¨&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      dept.setCreateBy(getUsername());</span><br><span class="line">      <span class="keyword">return</span> toAjax(deptService.insertDept(dept));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ‡é¢æ³¨è§£">åˆ‡é¢æ³¨è§£</h1>
<p>è¿™ä¸ª<code>@Log</code>å°±æ˜¯æ—¥å¿—åˆ‡é¢çš„æ ‡è®°</p>
<blockquote>
<p><span class="citation" data-cites="Log">@Log</span>(title =
"éƒ¨é—¨ç®¡ç†", businessType = BusinessType.INSERT)</p>
</blockquote>
<p>ç‚¹è¿›å»ï¼Œåˆ°è¾¾<code>ruoyi-common</code>ä¸­<code>com.ruoyi.common.annotation.Log</code>ï¼Œè¿™é‡Œå®šä¹‰äº†<code>Log</code>æ³¨è§£ï¼Œæ³¨é‡Šä¹Ÿå†™å¾—éå¸¸æ˜ç™½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.PARAMETER, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Log &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¨¡å—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">title</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠŸèƒ½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> BusinessType <span class="title function_">businessType</span><span class="params">()</span> <span class="keyword">default</span> BusinessType.OTHER;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œäººç±»åˆ«</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> OperatorType <span class="title function_">operatorType</span><span class="params">()</span> <span class="keyword">default</span> OperatorType.MANAGE;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦ä¿å­˜è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSaveRequestData</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¥å¿—çš„åŸºæœ¬ä¿¡æ¯éƒ½æœ‰äº†ï¼Œå¯¹äºåæœŸå‘ç°å®šä½é—®é¢˜å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å…¶ä¸­ï¼ŒåŠŸèƒ½å’Œæ“ä½œäººç±»åˆ«éƒ½æ˜¯<code>com.ruoyi.common.enums</code>ä¸‹å®šä¹‰çš„æšä¸¾ã€‚</p>
<h1 id="åˆ‡é¢advices">åˆ‡é¢Advices</h1>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯<code>Ultimate</code>ç‰ˆçš„<code>IDEA</code>ï¼Œå°±å¯ä»¥åœ¨å‰é¢â€œæ–°å¢éƒ¨é—¨â€çš„addæ–¹æ³•ä¸Šè¿›è¡Œæ™ºèƒ½è·³è½¬ï¼Œç›´æ¥è·³åˆ°å¯¹åº”çš„åˆ‡é¢å¤„ç†æ–¹æ³•</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/62f10bfb16f2c2beb1cf3531.jpg"
alt="åˆ‡é¢å¤„ç†" />
<figcaption aria-hidden="true">åˆ‡é¢å¤„ç†</figcaption>
</figure>
<p><code>ruoyi-framework</code>é¡¹ç›®çš„<code>com.ruoyi.framework.aspectj.LogAspect</code>å°±æ˜¯æ—¥å¿—åˆ‡é¢çš„å…·ä½“å¤„ç†ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ“ä½œæ—¥å¿—è®°å½•å¤„ç†</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(LogAspect.class);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é…ç½®ç»‡å…¥ç‚¹</span></span><br><span class="line">  <span class="meta">@Pointcut(&quot;@annotation(com.ruoyi.common.annotation.Log)&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * å¤„ç†å®Œè¯·æ±‚åæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> joinPoint åˆ‡ç‚¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@AfterReturning(pointcut = &quot;logPointCut()&quot;, returning = &quot;jsonResult&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterReturning</span><span class="params">(JoinPoint joinPoint, Object jsonResult)</span> &#123;</span><br><span class="line">      handleLog(joinPoint, <span class="literal">null</span>, jsonResult);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Pointcut</code>é…ç½®ç»‡å…¥ç‚¹ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰æ³¨è§£ï¼Œæ‰€ä»¥æ˜¯<code>("@annotation(com.ruoyi.common.annotation.Log)")</code>ï¼Œæ˜¯<code>Log</code>æ³¨è§£çš„å®Œæ•´ç±»è·¯å¾„ã€‚</p>
<p>å¯¹äºåˆ‡é¢å¦‚ä½•å¤„ç†ï¼ŒAOPæœ¬èº«æœ‰å¾ˆå¤šç§å®ç°ï¼ŒåŒ…æ‹¬å‰ç½®ã€ä¸­ç½®ã€åç½®ã€ç¯ç»•ç­‰ä¹‹ç±»çš„ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åšä¸åŒçš„å¤„ç†ï¼Œè¿™é‡Œæ˜¯åšæ—¥å¿—è®°å½•ï¼Œæ‰€ä»¥æ˜¯åç½®å¤„ç†ã€‚é™¤äº†æ­£å¸¸çš„å¤„ç†å¤–ï¼Œè¿™é‡Œè¿˜åŒ…æ‹¬æ‹¦æˆªå¼‚å¸¸çš„æ“ä½œã€‚å¯ä»¥çœ‹åˆ°éƒ½æ˜¯é€šè¿‡<code>handleLog</code>æ–¹æ³•æ¥åšçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">handleLog</span><span class="params">(<span class="keyword">final</span> JoinPoint joinPoint, <span class="keyword">final</span> Exception e, Object jsonResult)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è·å¾—æ³¨è§£</span></span><br><span class="line">        <span class="type">Log</span> <span class="variable">controllerLog</span> <span class="operator">=</span> getAnnotationLog(joinPoint);</span><br><span class="line">        <span class="keyword">if</span> (controllerLog == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> SecurityUtils.getLoginUser();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// *========æ•°æ®åº“æ—¥å¿—=========*//</span></span><br><span class="line">        <span class="type">SysOperLog</span> <span class="variable">operLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysOperLog</span>();</span><br><span class="line">        operLog.setStatus(BusinessStatus.SUCCESS.ordinal());</span><br><span class="line">        <span class="comment">// è¯·æ±‚çš„åœ°å€</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> IpUtils.getIpAddr(ServletUtils.getRequest());</span><br><span class="line">        operLog.setOperIp(ip);</span><br><span class="line">        <span class="comment">// è¿”å›å‚æ•°</span></span><br><span class="line">        operLog.setJsonResult(JSON.toJSONString(jsonResult));</span><br><span class="line"></span><br><span class="line">        operLog.setOperUrl(ServletUtils.getRequest().getRequestURI());</span><br><span class="line">        <span class="keyword">if</span> (loginUser != <span class="literal">null</span>) &#123;</span><br><span class="line">            operLog.setOperName(loginUser.getUsername());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            operLog.setStatus(BusinessStatus.FAIL.ordinal());</span><br><span class="line">            operLog.setErrorMsg(StringUtils.substring(e.getMessage(), <span class="number">0</span>, <span class="number">2000</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®¾ç½®æ–¹æ³•åç§°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> joinPoint.getTarget().getClass().getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> joinPoint.getSignature().getName();</span><br><span class="line">        operLog.setMethod(className + <span class="string">&quot;.&quot;</span> + methodName + <span class="string">&quot;()&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è¯·æ±‚æ–¹å¼</span></span><br><span class="line">        operLog.setRequestMethod(ServletUtils.getRequest().getMethod());</span><br><span class="line">        <span class="comment">// å¤„ç†è®¾ç½®æ³¨è§£ä¸Šçš„å‚æ•°</span></span><br><span class="line">        getControllerMethodDescription(joinPoint, controllerLog, operLog);</span><br><span class="line">        <span class="comment">// ä¿å­˜æ•°æ®åº“</span></span><br><span class="line">        AsyncManager.me().execute(AsyncFactory.recordOper(operLog));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception exp) &#123;</span><br><span class="line">        <span class="comment">// è®°å½•æœ¬åœ°å¼‚å¸¸æ—¥å¿—</span></span><br><span class="line">        log.error(<span class="string">&quot;==å‰ç½®é€šçŸ¥å¼‚å¸¸==&quot;</span>);</span><br><span class="line">        log.error(<span class="string">&quot;å¼‚å¸¸ä¿¡æ¯:&#123;&#125;&quot;</span>, exp.getMessage());</span><br><span class="line">        exp.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æ¯ä¸€æ­¥éƒ½æœ‰æ³¨é‡Šï¼Œéå¸¸æ¸…æ™°ï¼Œå¾ˆå®¹æ˜“çœ‹æ˜ç™½ã€‚</p>
<ol type="1">
<li><p>è·å–æ³¨è§£ï¼Œè¿™ä¸€æ­¥æˆ‘æ˜¯æœ‰ç‚¹ç–‘é—®çš„ï¼Œæ—¢ç„¶é€šè¿‡<code>AOP</code>è¿›å…¥è¯¥æ–¹æ³•ï¼Œè¿˜éœ€è¦éªŒè¯æ˜¯å¦æœ‰è¿™ä¸ªæ³¨è§£å—ï¼Ÿæœ‰å¿…è¦å—ï¼Œæ˜¯æˆ‘å¤ªæµ…è–„äº†å—ï¼Ÿæœ‰æ‡‚çš„å¤§ä½¬å¯ä»¥è·Ÿæˆ‘è¯´æ˜ä¸€ä¸‹ğŸ˜‚</p></li>
<li><p>è·å–å½“å‰ç”¨æˆ·ï¼Œé€šè¿‡å°è£…çš„<code>Spring Security</code>å·¥å…·ç±»è·å–åˆ°ã€‚</p></li>
<li><p>å®Œå–„æ—¥å¿—æ•°æ®ï¼ŒåŒ…æ‹¬è¯·æ±‚åœ°å€ã€ç”¨æˆ·åã€è¿”å›å‚æ•°ã€<code>URL</code>ã€çŠ¶æ€ã€é”™è¯¯ä¿¡æ¯ã€ç±»åã€æ–¹æ³•åã€å‚æ•°ä¿¡æ¯ã€æ³¨è§£ä¸šåŠ¡æ•°æ®ç­‰ã€‚</p></li>
<li><p>å¼‚æ­¥æ’å…¥æ•°æ®åº“ã€‚</p></li>
</ol>
<p>éœ€è¦çŸ¥é“<code>getControllerMethodDescription</code>ã€<code>setRequestValue</code>ã€<code>getAnnotationLog</code>ã€<code>argsArrayToString</code>ã€<code>isFilterObject</code>è¿™äº›æ–¹æ³•æ²¡æœ‰ç»†è¯´ï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤§å¿…è¦ï¼Œè¿™äº›éƒ½æ˜¯è¾…åŠ©åŠŸèƒ½çš„ã€‚</p>
<p>å¦å¤–ä¸€æï¼Œæˆ‘è¿™ä¸ªç‰ˆæœ¬çš„<code>ruoyi</code>ä»£ç ä¹Ÿæ˜¯æœ‰ç‚¹å°é—®é¢˜çš„ï¼Œæ¯”å¦‚è¿™é‡Œæœ‰ä¸€ä¸ª<code>String</code>æ‹¼æ¥å¯ä»¥ç”¨<code>StringBuilder</code>ä¼˜åŒ–çš„é—®é¢˜ï¼Œå¯èƒ½è¿˜æœ‰ã€‚æˆ‘å¸Œæœ›æ‰€æœ‰äººåœ¨åœ¨çœ‹ä»–äººä»£ç å­¦ä¹ æ—¶ï¼Œéƒ½åº”è¯¥å¸¦ç€æ€è€ƒï¼Œå¸¦ç€è´¨ç–‘å»çœ‹ï¼Œèƒ½å‘ç°å¹¶æå‡ºé—®é¢˜å°±å¾ˆå¥½ã€‚</p>
<p>æœ€åï¼Œè¿™é‡Œå¼‚æ­¥æ’å…¥æ•°æ®åº“å¾ˆå€¼å¾—å…³æ³¨ï¼Œè¿™ç§æ—¥å¿—æ•°æ®è½åº“åšæˆå¼‚æ­¥å¯¹äºä¸šåŠ¡æ¥è¯´æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå®ƒæœ¬èº«å¹¶ä¸å±äºä¸šåŠ¡ï¼Œå¦‚æœåšæˆåŒæ­¥ä¼šå½±å“ä¸šåŠ¡<code>RT</code>ï¼Œæ²¡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå¼‚æ­¥çš„è¯ä¸ä»…èƒ½å……åˆ†åˆ©ç”¨<code>CPU</code>ï¼Œè€Œä¸”è¿˜ä¸å½±å“ä¸šåŠ¡ï¼Œæ˜¯å¾ˆæ£’çš„ğŸ¥°</p>
<h1 id="ç»“">ç»“</h1>
<p><code>ruoyi</code>è®¾è®¡çš„<code>AOP</code>é£æ ¼å¤§å·®ä¸å·®ï¼Œå…¶ä»–çš„ä¹Ÿå¯ä»¥æ¯”è¾ƒç€å­¦ä¹ ï¼Œèƒ½å¤Ÿå­¦åˆ°ç²¾é«“ï¼Œå¹¶æœ‰ä¸€å®šå®è·µå°±æ›´å¥½äº†ã€‚</p>
]]></content>
      <tags>
        <tag>AOP</tag>
        <tag>Spring Boot</tag>
        <tag>ruoyi</tag>
      </tags>
  </entry>
  <entry>
    <title>ruoyiå­¦ä¹ å¤šæ•°æ®æº</title>
    <url>/article/9a440dda.html</url>
    <content><![CDATA[<p>è¿™å‡ å¤©çœ‹äº†ä¸€äº›å…³äº<code>MySQL</code>ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»çš„æ–‡ç« ï¼Œå¯¹äºæ•°æ®åº“è¿™æ–¹é¢çš„çŸ¥è¯†å¾ˆæœ‰å…´è¶£ã€‚ä¸»è¦è¿˜æ˜¯ä¹‹å‰çœŸçš„æ²¡æœ‰åšè¿‡ï¼Œæƒ³å­¦ä¹ ä¸€ä¸‹ã€‚è¿™ä¸‹å¥½äº†ï¼Œ<code>ruoyi</code>å…¥æ‰‹å§ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li><p>https://zhuanlan.zhihu.com/p/199217698</p></li>
<li><p>https://blog.csdn.net/qq_37502106/article/details/91044952</p></li>
</ul>
<span id="more"></span>
<h1 id="è‡ªå®šä¹‰æ³¨è§£">è‡ªå®šä¹‰æ³¨è§£</h1>
<p>è¿˜æ˜¯ä»<code>ruoyi-common</code>æ¥çœ‹ï¼Œå…¶ä¸­valueæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œé»˜è®¤ä¸º<code>MASTER</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å¤šæ•°æ®æºåˆ‡æ¢æ³¨è§£</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ä¼˜å…ˆçº§ï¼šå…ˆæ–¹æ³•ï¼Œåç±»ï¼Œå¦‚æœæ–¹æ³•è¦†ç›–äº†ç±»ä¸Šçš„æ•°æ®æºç±»å‹ï¼Œä»¥æ–¹æ³•çš„ä¸ºå‡†ï¼Œå¦åˆ™ä»¥ç±»ä¸Šçš„ä¸ºå‡†</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> DataSource &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ‡æ¢æ•°æ®æºåç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceType <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> DataSourceType.MASTER;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æšä¸¾">æšä¸¾</h1>
<p>æšä¸¾ç±»å‹å¦‚ä¸‹ï¼ŒæŒ‡æ˜äº†æ˜¯ä¸»åº“ï¼ˆMASTERï¼‰è¿˜æ˜¯ä»åº“ï¼ˆSLAVEï¼‰ï¼Œè¿™å°†ä¸ä¹‹åçš„é…ç½®å¯¹åº”</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®æº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">DataSourceType</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MASTER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SLAVE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ‡é¢">åˆ‡é¢</h1>
<p>æ—¢ç„¶åˆæ˜¯æ³¨è§£å½¢å¼ï¼Œåœ¨ruoyi-frameworkæ‰¾åˆ°åˆ‡é¢å¤„ç†ï¼Œä»£ç ä¹Ÿä¸ç®—å¤š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤šæ•°æ®æºå¤„ç†</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceAspect</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.ruoyi.common.annotation.DataSource)&quot;</span></span><br><span class="line"><span class="meta">            + &quot;|| @within(com.ruoyi.common.annotation.DataSource)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dsPointCut</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;dsPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint point)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> getDataSource(point);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull(dataSource)) &#123;</span><br><span class="line">            DynamicDataSourceContextHolder.setDataSourceType(dataSource.value().name());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> point.proceed();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// é”€æ¯æ•°æ®æº åœ¨æ‰§è¡Œæ–¹æ³•ä¹‹å</span></span><br><span class="line">            DynamicDataSourceContextHolder.clearDataSourceType();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–éœ€è¦åˆ‡æ¢çš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">getDataSource</span><span class="params">(ProceedingJoinPoint point)</span> &#123;</span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) point.getSignature();</span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> AnnotationUtils.findAnnotation(signature.getMethod(), DataSource.class);</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(dataSource)) &#123;</span><br><span class="line">            <span class="keyword">return</span> dataSource;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> AnnotationUtils.findAnnotation(signature.getDeclaringType(), DataSource.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å€¼å¾—æ³¨æ„">å€¼å¾—æ³¨æ„</h2>
<blockquote>
<p><span class="citation" data-cites="withinå’Œ">@withinå’Œ</span><span
class="citation"
data-cites="annotationçš„åŒºåˆ«">@annotationçš„åŒºåˆ«</span>ï¼š<br />
<span class="citation" data-cites="within">@within</span> å¯¹è±¡çº§åˆ«<br />
<span class="citation" data-cites="annotation">@annotation</span>
æ–¹æ³•çº§åˆ«</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;@within(org.springframework.web.bind.annotation.RestController&quot;) </span></span><br><span class="line"><span class="meta">        è¿™ä¸ªç”¨äºæ‹¦æˆªæ ‡æ³¨åœ¨ç±»ä¸Šé¢çš„@RestControlleræ³¨è§£</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">@Around(&quot;@annotation(org.springframework.web.bind.annotation.RestController&quot;) </span></span><br><span class="line"><span class="meta">         è¿™ä¸ªç”¨äºæ‹¦æˆªæ ‡æ³¨åœ¨æ–¹æ³•ä¸Šé¢çš„@RestControlleræ³¨è§£</span></span><br></pre></td></tr></table></figure>
<p>å¯è§<code>DataSource</code>æ³¨è§£ä»£ç ä¸Šæ³¨é‡Šçš„æ²¡æœ‰é—®é¢˜ï¼Œè¯¥æ³¨è§£èƒ½åœ¨æ–¹æ³•ä¸Šä¹Ÿèƒ½åœ¨ç±»ä¸Šï¼Œè€Œä¸”â€œä¼˜å…ˆçº§ï¼šå…ˆæ–¹æ³•ï¼Œåç±»ï¼Œå¦‚æœæ–¹æ³•è¦†ç›–äº†ç±»ä¸Šçš„æ•°æ®æºç±»å‹ï¼Œä»¥æ–¹æ³•çš„ä¸ºå‡†ï¼Œå¦åˆ™ä»¥ç±»ä¸Šçš„ä¸ºå‡†â€ã€‚</p>
<p>åˆ‡é¢ä»£ç ä¹Ÿä¸å¤æ‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯è·å–æ³¨è§£ï¼Œæ ¹æ®æ³¨è§£åˆ‡æ¢åŠ¨æ€æ•°æ®æºã€‚</p>
<h2 id="æ•°æ®æºåˆ‡æ¢">æ•°æ®æºåˆ‡æ¢</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®æºåˆ‡æ¢å¤„ç†</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicDataSourceContextHolder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(DynamicDataSourceContextHolder.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ThreadLocalç»´æŠ¤å˜é‡ï¼ŒThreadLocalä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œ</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“å…¶å®ƒçº¿ç¨‹æ‰€å¯¹åº”çš„å‰¯æœ¬ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;String&gt; CONTEXT_HOLDER = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æ•°æ®æºçš„å˜é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setDataSourceType</span><span class="params">(String dsType)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;åˆ‡æ¢åˆ°&#123;&#125;æ•°æ®æº&quot;</span>, dsType);</span><br><span class="line">        CONTEXT_HOLDER.set(dsType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—æ•°æ®æºçš„å˜é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getDataSourceType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CONTEXT_HOLDER.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…ç©ºæ•°æ®æºå˜é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">clearDataSourceType</span><span class="params">()</span> &#123;</span><br><span class="line">        CONTEXT_HOLDER.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä¸¤ä¸ªæ–¹æ³•<code>setDataSourceType</code>å’Œ<code>clearDataSourceType</code>ï¼Œå°±æ˜¯åœ¨å‰é¢çš„åˆ‡é¢ä¸­è°ƒç”¨äº†ï¼Œè¿™é‡Œè¿˜æ˜¯ç”¨äº†<code>ThreadLocal</code>ç”¨äºçº¿ç¨‹éš”ç¦»ã€‚è€Œ<code>getDataSourceType</code>æ–¹æ³•ï¼Œåˆ™åœ¨<code>DynamicDataSource</code>ç±»å®ç°çš„<code>AbstractRoutingDataSource</code>æŠ½è±¡ç±»æ–¹æ³•ä¸­è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠ¨æ€æ•°æ®æº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicDataSource</span> <span class="keyword">extends</span> <span class="title class_">AbstractRoutingDataSource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DynamicDataSource</span><span class="params">(DataSource defaultTargetDataSource, Map&lt;Object, Object&gt; targetDataSources)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setDefaultTargetDataSource(defaultTargetDataSource);</span><br><span class="line">        <span class="built_in">super</span>.setTargetDataSources(targetDataSources);</span><br><span class="line">        <span class="built_in">super</span>.afterPropertiesSet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">determineCurrentLookupKey</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> DynamicDataSourceContextHolder.getDataSourceType();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæŠ½è±¡ç±»<code>AbstractRoutingDataSource</code>ï¼Œæ˜¯<code>Spring Boot</code>æä¾›çš„ï¼Œå¯æ ¹æ®ç”¨æˆ·å®šä¹‰çš„è§„åˆ™é€‰æ‹©å½“å‰æ•°æ®æºã€‚ä½¿ç”¨æ–¹æ³•å‚è€ƒä¸Šé¢çš„ç¬¬äºŒæ¡é“¾æ¥å³å¯ã€‚</p>
<h2 id="é…ç½®">é…ç½®</h2>
<p>æ—¢ç„¶æ˜¯<code>ruoyi</code>è‡ªå·±åšçš„æ¡†æ¶ï¼Œå¿…ç„¶ä¹Ÿè¦æ”¯æŒé…ç½®ã€‚è™½ç„¶ä»…ä»…ä¹Ÿæ˜¯å¯¹äºå·²æœ‰æ¡†æ¶çš„å°è£…ï¼Œä½†ä¹Ÿæ˜¯å€¼å¾—å­¦ä¹ çš„ã€‚<code>ruoyi</code>æ•°æ®æºé…ç½®ç±»<code>DruidProperties</code>å¯¹åº”ç€æ•°æ®æºé…ç½®æ–‡ä»¶<code>application-druid.yml</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * druid é…ç½®å±æ€§</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidProperties</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.initialSize&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> initialSize;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.minIdle&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> minIdle;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.maxActive&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxActive;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.maxWait&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxWait;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.timeBetweenEvictionRunsMillis&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> timeBetweenEvictionRunsMillis;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.minEvictableIdleTimeMillis&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> minEvictableIdleTimeMillis;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.maxEvictableIdleTimeMillis&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxEvictableIdleTimeMillis;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.validationQuery&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String validationQuery;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.testWhileIdle&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> testWhileIdle;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.testOnBorrow&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> testOnBorrow;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.druid.testOnReturn&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> testOnReturn;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">dataSource</span><span class="params">(DruidDataSource datasource)</span> &#123;</span><br><span class="line">        <span class="comment">/** é…ç½®åˆå§‹åŒ–å¤§å°ã€æœ€å°ã€æœ€å¤§ */</span></span><br><span class="line">        datasource.setInitialSize(initialSize);</span><br><span class="line">        datasource.setMaxActive(maxActive);</span><br><span class="line">        datasource.setMinIdle(minIdle);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´ */</span></span><br><span class="line">        datasource.setMaxWait(maxWait);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’ */</span></span><br><span class="line">        datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ã€æœ€å¤§ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ */</span></span><br><span class="line">        datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);</span><br><span class="line">        datasource.setMaxEvictableIdleTimeMillis(maxEvictableIdleTimeMillis);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œå¸¸ç”¨select &#x27;x&#x27;ã€‚å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€testWhileIdleéƒ½ä¸ä¼šèµ·ä½œç”¨ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        datasource.setValidationQuery(validationQuery);</span><br><span class="line">        <span class="comment">/** å»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚ */</span></span><br><span class="line">        datasource.setTestWhileIdle(testWhileIdle);</span><br><span class="line">        <span class="comment">/** ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚ */</span></span><br><span class="line">        datasource.setTestOnBorrow(testOnBorrow);</span><br><span class="line">        <span class="comment">/** å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚ */</span></span><br><span class="line">        datasource.setTestOnReturn(testOnReturn);</span><br><span class="line">        <span class="keyword">return</span> datasource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®çš„è¯»å–å°±ä¸ç”¨å¤šè¯´äº†ï¼Œ<code>@Value("$&#123;spring.datasource.druid.initialSize&#125;")</code>ï¼Œéœ€è¦çš„åŠ ä¸Šæ³¨è§£å³å¯ã€‚</p>
<p>è‡³äºæ•°æ®æºé…ç½®æ–‡ä»¶<code>application-druid.yml</code>å¦‚ä¸‹</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®æºé…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="comment"># ä¸»åº“æ•°æ®æº</span></span><br><span class="line">      <span class="attr">master:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ry-vue?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="comment"># ä»åº“æ•°æ®æº</span></span><br><span class="line">      <span class="attr">slave:</span></span><br><span class="line">        <span class="comment"># ä»æ•°æ®æºå¼€å…³/é»˜è®¤å…³é—­</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">url:</span></span><br><span class="line">        <span class="attr">username:</span></span><br><span class="line">        <span class="attr">password:</span></span><br><span class="line">      <span class="comment"># åˆå§‹è¿æ¥æ•°</span></span><br><span class="line">      <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">      <span class="comment"># æœ€å°è¿æ¥æ± æ•°é‡</span></span><br><span class="line">      <span class="attr">minIdle:</span> <span class="number">10</span></span><br><span class="line">      <span class="comment"># æœ€å¤§è¿æ¥æ± æ•°é‡</span></span><br><span class="line">      <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´</span></span><br><span class="line">      <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">      <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å¤§ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">maxEvictableIdleTimeMillis:</span> <span class="number">900000</span></span><br><span class="line">      <span class="comment"># é…ç½®æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">      <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">      <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">webStatFilter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">statViewServlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># è®¾ç½®ç™½åå•ï¼Œä¸å¡«åˆ™å…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">        <span class="attr">allow:</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="comment"># æ§åˆ¶å°ç®¡ç†ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">ruoyi</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="number">123456</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="comment"># æ…¢SQLè®°å½•</span></span><br><span class="line">          <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">          <span class="attr">merge-sql:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">config:</span></span><br><span class="line">            <span class="attr">multi-statement-allow:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>è¿™äº›é…ç½®é¡¹ç»å¤§å¤šæ•°éƒ½å±äº<code>druid</code>çš„é…ç½®ã€‚ä¸åŒçš„æ˜¯è¿™é‡Œçš„<code>master</code>å’Œ<code>slave</code>æ˜¯<code>ruoyi</code>è‡ªå®šä¹‰çš„ï¼Œä»£è¡¨ä¸»ä»åº“ï¼Œä¸åŒæ•°æ®æºå˜›ï¼Œè¿™ä¸ªè¦ç»“åˆ<code>DruidConfig</code>æ¥çœ‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * druid é…ç½®å¤šæ•°æ®æº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(&quot;spring.datasource.druid.master&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">masterDataSource</span><span class="params">(DruidProperties druidProperties)</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceBuilder.create().build();</span><br><span class="line">        <span class="keyword">return</span> druidProperties.dataSource(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(&quot;spring.datasource.druid.slave&quot;)</span></span><br><span class="line">    <span class="meta">@ConditionalOnProperty(prefix = &quot;spring.datasource.druid.slave&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">slaveDataSource</span><span class="params">(DruidProperties druidProperties)</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceBuilder.create().build();</span><br><span class="line">        <span class="keyword">return</span> druidProperties.dataSource(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = &quot;dynamicDataSource&quot;)</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="keyword">public</span> DynamicDataSource <span class="title function_">dataSource</span><span class="params">(DataSource masterDataSource)</span> &#123;</span><br><span class="line">        Map&lt;Object, Object&gt; targetDataSources = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        targetDataSources.put(DataSourceType.MASTER.name(), masterDataSource);</span><br><span class="line">        setDataSource(targetDataSources, DataSourceType.SLAVE.name(), <span class="string">&quot;slaveDataSource&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DynamicDataSource</span>(masterDataSource, targetDataSources);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æ•°æ®æº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetDataSources å¤‡é€‰æ•°æ®æºé›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sourceName        æ•°æ®æºåç§°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beanName          beanåç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDataSource</span><span class="params">(Map&lt;Object, Object&gt; targetDataSources, String sourceName, String beanName)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> SpringUtils.getBean(beanName);</span><br><span class="line">            targetDataSources.put(sourceName, dataSource);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å»é™¤ç›‘æ§é¡µé¢åº•éƒ¨çš„å¹¿å‘Š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ‡å‡†çš„é…ç½®ç±»ï¼Œé€šè¿‡<code>@ConfigurationProperties("spring.datasource.druid.master")</code>å’Œ<code>@Bean</code>æ¥å®Œæˆçš„ã€‚è¿™é‡Œå¯¹åº”ç€<code>application-druid.yml</code>ä¸­çš„<code>spring.datasource.druid.master</code>é…ç½®ï¼›<code>@Bean</code>å’Œ<code>@ConfigurationProperties("spring.datasource.druid.slave")</code>å’Œ<code>@ConditionalOnProperty(prefix = "spring.datasource.druid.slave", name = "enabled", havingValue = "true")</code>ä¹Ÿæ˜¯å®Œæˆbeanæ³¨å…¥çš„ï¼Œä¸åŒçš„æ˜¯<code>@ConditionalOnProperty</code>ï¼Œè¿™ä¸ªä»£è¡¨æ ¹æ®æƒ…å†µæ³¨å…¥<code>Bean</code>ï¼Œå…³äºè¿™ä¸ªçš„å…·ä½“å«ä¹‰æ˜¯<code>application-druid.yml</code>ä¸­çš„ä»¥<code>spring.datasource.druid.slave</code>ä¸ºå‰ç¼€ï¼Œé…ç½®æœ‰åä¸º<code>enabled</code>ä¸”å€¼ä¸º<code>true</code>çš„æƒ…å†µä¸‹æ¥åš<code>Bean</code>çš„æ³¨å…¥ã€‚</p>
<p>ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ç»“åˆç€è®²</p>
<p>è¿™ä¸‰ä¸ª<code>Bean</code>éƒ½æ˜¯ç”¨æ¥é…ç½®<code>dataSource</code>ï¼Œç¬¬ä¸‰ä¸ªæ³¨è§£<code>@Bean(name = "dynamicDataSource")</code>å’Œ<code>@Primary</code>å¾ˆèƒ½è¯´æ˜è¿™ä¸ªæ–¹æ³•çš„é‡è¦æ€§äº†ã€‚ç¬¬ä¸€ä¸ª<code>masterDataSource</code>çš„é…ç½®ä¸ç”¨å¤šè¯´ï¼Œè€Œç¬¬äºŒä¸ª<code>slaveDataSource</code>çš„é…ç½®å°±å¾ˆæœ‰æ„æ€äº†ï¼Œä¸åŒäºä¸»æ•°æ®æºé…ç½®ï¼Œä»æ•°æ®æºéœ€è¦é€šè¿‡<code>Spring</code>å·¥å…·ç±»æ‰¾åˆ°<code>Bean</code>æ‰å¯æ³¨å…¥ï¼Œè¿™ä¹Ÿå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œæ¯•ç«Ÿæœ‰æ—¶å…¶å®ä¹Ÿå°±ä¸€ä¸ªæ•°æ®æºï¼Œæ‰€ä»¥ä¸ºäº†é¿å…æœªè®¾ç½®ä»æ•°æ®æºå¯¼è‡´çš„å¼‚å¸¸ã€‚</p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>ä½¿ç”¨çš„ç›¸å¯¹ç®€å•äº†ï¼Œä¸Šæ³¨è§£å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å‚æ•°é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> configId å‚æ•°é…ç½®ID</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> å‚æ•°é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@DataSource(DataSourceType.MASTER)</span></span><br><span class="line"><span class="keyword">public</span> SysConfig <span class="title function_">selectConfigById</span><span class="params">(Long configId)</span> &#123;</span><br><span class="line">    <span class="type">SysConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysConfig</span>();</span><br><span class="line">    config.setConfigId(configId);</span><br><span class="line">    <span class="keyword">return</span> configMapper.selectConfig(config);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>ruoyi</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ªäººå…è´¹Githubå›¾åºŠPicXä»‹ç»ä¸ä½¿ç”¨</title>
    <url>/article/f74e4826.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<h1 id="å‰è¨€">å‰è¨€</h1>
<p>å€Ÿç”¨<code>AI</code>å›ç­”â€œå›¾åºŠæ˜¯ä»€ä¹ˆï¼Ÿâ€</p>
<p>å›¾åºŠæ˜¯ä¸€ç§ç½‘ç»œæœåŠ¡ï¼Œå®ƒæä¾›åœ¨çº¿å­˜å‚¨å›¾ç‰‡çš„ç©ºé—´ï¼Œç”¨æˆ·å¯ä»¥å°†è‡ªå·±çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠæœåŠ¡å™¨ä¸Šï¼Œå¹¶è·å–è¯¥å›¾ç‰‡çš„ç½‘ç»œé“¾æ¥ï¼ˆURLï¼‰ã€‚è¿™ä¸ªé“¾æ¥å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µã€è®ºå›ã€åšå®¢ã€ç¤¾äº¤åª’ä½“ç­‰åœ°æ–¹ä½¿ç”¨ï¼Œå½“è®¿é—®è€…æ‰“å¼€å«æœ‰è¯¥é“¾æ¥çš„é¡µé¢æ—¶ï¼Œæµè§ˆå™¨ä¼šä»å›¾åºŠæœåŠ¡å™¨åŠ è½½å›¾ç‰‡å¹¶æ˜¾ç¤ºåœ¨å¯¹åº”ä½ç½®ã€‚é€šè¿‡ä½¿ç”¨å›¾åºŠï¼Œç”¨æˆ·å¯ä»¥å‡è½»è‡ªå·±ç½‘ç«™æœåŠ¡å™¨çš„å­˜å‚¨å’Œå¸¦å®½å‹åŠ›ï¼ŒåŒæ—¶æé«˜å†…å®¹åŠ è½½é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›å¸Œæœ›å¿«é€Ÿå±•ç¤ºå¤§é‡å›¾ç‰‡ä½†è‡ªèº«æœåŠ¡å™¨èµ„æºæœ‰é™çš„æƒ…å†µã€‚</p>
<p>å›¾åºŠé€šå¸¸å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æä¾›ä¸Šä¼ æ¥å£ï¼šå¯ä»¥é€šè¿‡ç½‘é¡µç«¯ã€å®¢æˆ·ç«¯å·¥å…·æˆ–APIè¿›è¡Œå›¾ç‰‡ä¸Šä¼ ã€‚</li>
<li>é“¾æ¥ç”Ÿæˆä¸ç®¡ç†ï¼šä¸Šä¼ æˆåŠŸåè‡ªåŠ¨ç”Ÿæˆå¯å…¬å¼€è®¿é—®çš„é“¾æ¥ï¼Œæœ‰çš„è¿˜æ”¯æŒé˜²ç›—é“¾ã€é“¾æ¥æœ‰æ•ˆæœŸç­‰åŠŸèƒ½ã€‚</li>
<li>å­˜å‚¨ç©ºé—´å¤§å°é™åˆ¶ï¼šå…è´¹å›¾åºŠå¯èƒ½æœ‰å­˜å‚¨ç©ºé—´æˆ–æµé‡çš„é™åˆ¶ï¼Œä»˜è´¹å›¾åºŠåˆ™é€šå¸¸æä¾›æ›´å¤šå­˜å‚¨å’Œæ›´å¿«çš„è®¿é—®é€Ÿåº¦ã€‚</li>
<li>å¯èƒ½æä¾›çš„é¢å¤–æœåŠ¡ï¼šå¦‚ç¼©ç•¥å›¾ç”Ÿæˆã€å›¾ç‰‡å¤„ç†ï¼ˆè£å‰ªã€å‹ç¼©ç­‰ï¼‰ã€CDNåŠ é€Ÿä»¥ä¼˜åŒ–å…¨çƒè®¿é—®é€Ÿåº¦ç­‰ã€‚</li>
</ul>
<p>å¸¸è§çš„å›¾åºŠæœåŠ¡å•†åŒ…æ‹¬ä½†ä¸é™äºæ–°æµªå›¾åºŠã€SM.MSã€Imgurã€ä¸ƒç‰›äº‘ã€è…¾è®¯äº‘COSã€é˜¿é‡Œäº‘OSSã€åˆæ‹äº‘ç­‰ã€‚</p>
<p>å¯¹äºæˆ‘è€Œè¨€ï¼Œä½¿ç”¨å›¾åºŠçš„æœ€å¤§ç›®çš„å°±æ˜¯åº”ç”¨äº<a
href="https://wnhyang.github.io/">ä¸ªäººåšå®¢</a>ã€‚å¯¹äºä¸ªäººéœ€æ±‚ä¸å¤§çš„ï¼Œä¸”å‡ ä¹æ— å•†ä¸šæ€§è´¨çš„ï¼Œè¯‰æ±‚è¿˜æ˜¯å¸Œæœ›æ˜¯å…è´¹ã€ç®€å•ã€ç¨³å®šçš„ã€‚ä¸‹é¢å°±æ­¤è¦æ±‚ä»‹ç»å’Œä½¿ç”¨<a
href="https://github.com/XPoet/picx">PicX</a>å›¾åºŠã€‚</p>
<span id="more"></span>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>PicX Githubï¼š<a href="https://github.com/XPoet/picx"
class="uri">https://github.com/XPoet/picx</a></p>
<p><a
href="https://picx-docs.xpoet.cn/docs/usage-guide/get-start.html">å¿«é€Ÿå¼€å§‹
| PicX å›¾åºŠä½¿ç”¨æŒ‡å—</a></p>
<p><a href="https://picx.xpoet.cn/#/upload">PicX å›¾åºŠç¥å™¨</a></p>
<p><code>PicX</code>çš„<code>Github</code>ã€ä½¿ç”¨è¯´æ˜ã€å®˜ç½‘å¦‚ä¸Šï¼Œæˆ‘ç®€å•æ€»ç»“ä¸€ä¸‹ã€‚</p>
<p><code>PicX</code>æ˜¯åŸºäº<code>Github</code>ä»“åº“å’Œ<code>cdn</code>åŠ é€Ÿçš„å…è´¹å›¾åºŠå·¥å…·ã€‚é€šè¿‡<code>Github</code>æˆæƒ<code>PicX</code>ä»“åº“ç®¡ç†æƒé™ï¼ˆåŒ…å«<code>GitHub OAuth</code>
æˆæƒç™»å½• å’Œ å¡«å†™ <code>GitHub Token</code> ç™»å½•
è¿™ä¸¤ç§æ–¹å¼ï¼‰ï¼Œ<code>PicX</code>é€šè¿‡<code>Github Api</code>ç®¡ç†<code>Github</code>ä»“åº“ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å›¾åº“ï¼‰ï¼Œæä¾›äº†å›¾ç‰‡å‹ç¼©ã€è‡ªå®šä¹‰å‘½åã€è‡ªå®šä¹‰æ°´å°ç­‰åŠŸèƒ½ï¼Œç®€å•ä¸”å…è´¹ã€‚</p>
<h1 id="å…¶ä»–å›¾åºŠ">å…¶ä»–å›¾åºŠ</h1>
<h2 id="èšåˆå›¾åºŠ">èšåˆå›¾åºŠ</h2>
<p><a href="https://www.superbed.cn/">èšåˆå›¾åºŠ -
å…è´¹æ— é™å›¾ç‰‡ä¸Šä¼ </a>äº†ï¼Œç›¸æ¯”äº<code>PicX</code>æ›´ä¸ºç®€å•ï¼Œåªéœ€è¦ç™»å½•ç¤¾äº¤è´¦å·å°±å¥½ï¼Œå…¶æ”¶è´¹æ ‡å‡†å¦‚ä¸‹ï¼Œå¯¹äºè·Ÿäººç”¨æˆ·ä¹Ÿæ˜¯å®Œå…¨å¤Ÿç”¨çš„ã€‚</p>
<p>ä½†æ˜¯èšåˆå›¾åºŠä¸<code>PicX</code>æœ‰ç€æ˜æ˜¾çš„åŒºåˆ«ï¼Œ<code>PicX</code>åŸºäº<code>Github</code>ï¼Œå®Œå…¨å¼€æºå…è´¹ï¼Œè¯´ç™½äº†åªæ˜¯ä¸€ä¸ªå›¾åºŠç®¡ç†å·¥å…·ã€‚è€Œèšåˆå›¾åºŠæ˜¯æ•´å¥—æœåŠ¡ï¼Œä¸<code>PicX</code>è¿™ç§<code>cdn</code>åŠ é€Ÿæœ‰æ˜æ˜¾åŒºåˆ«çš„ï¼Œè‡³äºé€‰æ‹©å—ï¼Ÿè¯´å®è¯ï¼Œåè§åœ°è®²ç¨‹åºå‘˜å¿…ç„¶åå‘<code>PicX</code>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240120/1706004568980.webp"
alt="èšåˆå›¾åºŠ" />
<figcaption aria-hidden="true">èšåˆå›¾åºŠ</figcaption>
</figure>
<h2 id="picgo">PicGo</h2>
<p>ç›¸æ¯”äº<code>PicX</code>æ›´åŠ å‡ºåï¼Œç½‘ä¸Šæ•™ç¨‹è¯´æ˜æ›´å¤šï¼ŒåŠŸèƒ½æ›´ä¸°å¯Œï¼Œæ”¯æŒçš„å­˜å‚¨æºç›¸å½“ä¸°å¯Œï¼Œä¸ä»…æ˜¯<code>Github</code>ã€<code>Gitee</code>ï¼Œé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ç­‰OSSä¹Ÿæ˜¯æ”¯æŒçš„ã€‚</p>
<p>æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±æ¢ç´¢ä¸€ä¸‹ã€‚</p>
<p>æˆ‘èˆå¼ƒ<code>PicGo</code>å¯èƒ½ä¹Ÿå’Œä»–ä¼—æ‰€å‘¨çŸ¥çš„ä¼˜ç‚¹æœ‰å…³å§ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç®€å•å…è´¹ï¼Œè‡ªä¸»å¯æ§çš„ï¼Œæˆ‘è§‰å¾—<code>PicX</code>å°±æ˜¯è¿™æ ·çš„ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚</p>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<p><a
href="https://picx-docs.xpoet.cn/docs/usage-guide/get-start.html">å¿«é€Ÿå¼€å§‹
| PicX å›¾åºŠä½¿ç”¨æŒ‡å—</a></p>
<p>å»ºè®®ç›´æ¥çœ‹å®˜ç½‘ï¼Œæˆ‘æ¢³ç†ä¸€ä¸‹å¿…è¦çš„é…ç½®å¦‚ä¸‹ã€‚</p>
<h2 id="githubè´¦å·">Githubè´¦å·</h2>
<p><code>Github</code>è´¦å·ï¼Œè¿™æ˜¯å¿…è¦çš„ï¼Œå¯èƒ½æœ‰åŒå­¦æƒ³ç”¨<code>Gitee</code>ï¼Œå…ˆæŠ›å¼€å…¶æ”¯æŒä¸æ”¯æŒçš„ï¼Œå°±è¯´<code>Gitee</code>è™½ç„¶é€Ÿåº¦æ˜¯å¿«ï¼Œä½†å¾€å¾€ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ã€‚å°±æ‹¿æˆ‘çš„ä¸ªäººåšå®¢ä»<code>Github</code>åˆ°<code>Gitee</code>ï¼Œæœ€åå†åˆ°<code>Github</code>æ¥è®²ã€‚å…ˆå‰ä¹Ÿæ˜¯çœ‹ä¸­äº†<code>Gitee</code>çš„å›½å†…é«˜é€Ÿï¼Œä½†åæ¥<code>Gitee</code>å‡ºç°è«åå…¶å¦™çš„æ•æ„Ÿè¯é™åˆ¶ï¼Œå¯¼è‡´ä¸ªäººåšå®¢ä¸å¯æ›´æ–°ï¼Œæ‰€ä»¥ä¹‹åå°±æ”¾å¼ƒäº†ï¼Œè½¬Githubäº†ã€‚</p>
<h2 id="ç™»å½•picx">ç™»å½•PicX</h2>
<p><code>PicX</code>æ”¯æŒ <code>GitHub OAuth</code> æˆæƒç™»å½• å’Œ å¡«å†™
<code>GitHub Token</code> ç™»å½•
è¿™ä¸¤ç§æ–¹å¼ã€‚æˆ‘ä¸ªäººæ¯”è¾ƒå»ºè®®<code>Token</code>çš„æ–¹å¼ï¼Œåˆ›å»º<code>Token</code>éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œåªåˆ†é…<code>repo</code>ï¼ˆä»“åº“ï¼‰å°±å¤Ÿäº†ã€‚æ³¨æ„ï¼ï¼ï¼æ–°ç”Ÿæˆçš„<code>Token</code>åªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸€å®šè¦ä¿å­˜å¥½ã€‚</p>
<h2 id="é…ç½®å›¾åºŠ">é…ç½®å›¾åºŠ</h2>
<p>è¿™ä¸€æ­¥å°±æ˜¯åˆ©ç”¨ä¸Šä¸€æ­¥æˆäºˆ<code>PicX</code>çš„ä»“åº“ç®¡ç†æƒé™ï¼Œåˆ›å»ºå›¾åºŠå­˜å‚¨ä»“åº“ã€‚</p>
<p>å»ºè®®ä¸€é”®è‡ªåŠ¨é…ç½®ï¼Œé…ç½®æ•ˆæœå¦‚ä¸‹å›¾ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240123/1706006468690.webp"
alt="picxå›¾åºŠé…ç½®" />
<figcaption aria-hidden="true">picxå›¾åºŠé…ç½®</figcaption>
</figure>
<h2 id="å›¾åºŠé…ç½®">å›¾åºŠé…ç½®</h2>
<p>å›¾ç‰‡åç§°ã€æ°´å°é…ç½®å¦‚ä¸‹ï¼ŒæŒ‰éœ€è‡ªå®šä¹‰å³å¯ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240123/1706006659794.webp"
alt="picxæˆ‘çš„è®¾ç½®" />
<figcaption aria-hidden="true">picxæˆ‘çš„è®¾ç½®</figcaption>
</figure>
<p>å…¶ä»–è¿˜æœ‰å›¾ç‰‡å‹ç¼©ç®—æ³•é…ç½®ï¼Œå›¾ç‰‡é“¾æ¥æ ¼å¼é…ç½®ï¼ˆå›¾ç‰‡é“¾æ¥å’ŒMarkdownå›¾ç‰‡é“¾æ¥ï¼‰ï¼Œ<code>Github Pages</code>éƒ¨ç½²é…ç½®ï¼Œä¸»é¢˜é…ç½®ï¼Œè¿™äº›è‡ªå·±çœ‹å°±è¡Œäº†ã€‚</p>
<p>å›¾ç‰‡é“¾æ¥è§„åˆ™å¯ä»¥æä¸€å˜´ï¼Œ<code>PicX</code>æä¾›äº†å¦‚ä¸‹å¤šä¸ªå›¾ç‰‡é“¾æ¥è§„åˆ™ï¼Œæˆ‘ä»¥å‰ä»¥ä¸ºè¿™ä¸ªå•é€‰é¢˜ï¼Œåæ¥æ‰å‘ç°åªæ˜¯é€‰æ‹©é¦–é€‰å•Šã€‚æˆ‘äº†è§£åˆ°çš„<code>cdn</code>æ˜¯<strong>æ›´æ™ºèƒ½çš„é•œåƒ+ç¼“å­˜+æµé‡å¯¼æµï¼Œ</strong>
å°±è¿™ä¸ªæ€è·¯æ¥è®²ï¼Œä½¿ç”¨ä¸åŒçš„<code>cdn</code>æœåŠ¡ï¼ŒåŒºåˆ«å°±åœ¨æœåŠ¡æä¾›è€…çš„<strong>é•œåƒ+ç¼“å­˜+æµé‡å¯¼æµã€‚</strong>
åœ¨æˆ‘ä½¿ç”¨çš„ä½“éªŒä¸­ï¼Œ<code>ChinaJsDelivr</code>è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæ¯”è¾ƒæ¨èã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240123/1706007069227.webp"
alt="picxå›¾ç‰‡é“¾æ¥è§„åˆ™" />
<figcaption aria-hidden="true">picxå›¾ç‰‡é“¾æ¥è§„åˆ™</figcaption>
</figure>
<h2 id="ä¸Šä¼ å›¾ç‰‡å’Œå›¾åºŠç®¡ç†">ä¸Šä¼ å›¾ç‰‡å’Œå›¾åºŠç®¡ç†</h2>
<p>ç›´æ¥çœ‹<a
href="https://picx-docs.xpoet.cn/docs/usage-guide/upload.html">å®˜ç½‘</a>å°±å¤Ÿäº†ã€‚</p>
<p>å…¶ä»–çš„å¥½åƒä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½è®²çš„ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<h1 id="ç»“è¯­">ç»“è¯­</h1>
<p>è¿˜æ˜¯å¸¸è¯´çš„ï¼Œå¼€æºè‡ªè´¹ä¸ºå¤§å®¶æœåŠ¡çš„é¡¹ç›®éƒ½ä¸å®¹æ˜“ï¼Œæœ‰èƒ½åŠ›çš„å»æ”¯æŒä¸€ä¸‹å§ğŸ˜‚</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‰çº§åˆ†ç±»ä¹‹Streamçš„ä½¿ç”¨</title>
    <url>/article/684ce5.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li><a
href="https://www.bilibili.com/video/BV1np4y1C7Yf?p=45">https://www.bilibili.com/video/BV1np4y1C7Yf?p=45</a></li>
</ul>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>åœ¨è·Ÿç€å°šç¡…è°·å­¦ä¹ è°·ç²’å•†åŸä¸­é‡åˆ°è¿™ä¸ªä¸‰çº§åˆ†ç±»é—®é¢˜ï¼Œä½¿ç”¨äº†Stream
Apiï¼Œè®°å½•ä¸€ä¸‹</p>
<span id="more"></span>
<h1 id="è¿‡ç¨‹">è¿‡ç¨‹</h1>
<p>ä¸»è¦å†…å®¹å°±æ˜¯å¯¹å•†å“ç±»åˆ«è¡¨è¿›è¡Œä¸‰çº§åˆ†ç±»ï¼Œcategoryè¡¨è®¾è®¡å¦‚ä¸‹ï¼Œä¸»è¦å…³æ³¨ï¼Œåˆ†ç±»idï¼Œçˆ¶åˆ†ç±»idï¼Œæ’åºè¿™å‡ ä¸ªå­—æ®µ</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.65f2k1z7b0w0.png"
alt="categoryè¡¨" />
<figcaption aria-hidden="true">categoryè¡¨</figcaption>
</figure>
<p>æ•°æ®å†…å®¹ï¼Œè¿™é‡Œåªè´´äº†30æ¡ï¼Œæ€»1000æ¡ï¼Œéšååœ¨webä¸Šå±•ç¤º</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.34un2jdep2g0.png"
alt="è¡¨æ•°æ®" />
<figcaption aria-hidden="true">è¡¨æ•°æ®</figcaption>
</figure>
<p>äº†è§£äº†éœ€æ±‚ï¼Œ<code>CategoryEntity</code>å¦‚ä¸‹ï¼Œå…³æ³¨æ–°åŠ å…¥çš„éæ•°æ®åº“å­—æ®µå±æ€§<code>List&lt;CategoryEntity&gt; children</code>ï¼Œç”¨äºå­˜æ”¾è¯¥åˆ†ç±»ä¸‹çš„å­åˆ†ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;pms_category&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CategoryEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†ç±»id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long catId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†ç±»åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çˆ¶åˆ†ç±»id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long parentCid;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å±‚çº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer catLevel;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æ˜¾ç¤º[0-ä¸æ˜¾ç¤ºï¼Œ1æ˜¾ç¤º]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer showStatus;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’åº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer sort;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›¾æ ‡åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String icon;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡é‡å•ä½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String productUnit;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•†å“æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer productCount;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­åˆ†ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;CategoryEntity&gt; children;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é‡ç‚¹å…³æ³¨ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä½¿ç”¨çš„æ˜¯Mybatis-Plusï¼Œä¸å¤šä»‹ç»</p>
<p>å°±æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†Streamå¤„ç†äº†ä»æ•°æ®åº“æŸ¥åˆ°çš„æ‰€æœ‰åˆ†ç±»ä¿¡æ¯</p>
<p>å¤„ç†è¿‡ç¨‹ï¼š</p>
<ul>
<li>ä»æ•°æ®åº“æŸ¥åˆ°æ‰€æœ‰åˆ†ç±»ä¿¡æ¯<code>List&lt;CategoryEntity&gt;</code></li>
<li>å…ˆæŸ¥åˆ°æ‰€æœ‰çš„ä¸€çº§åˆ†ç±»ï¼ˆ<code>parentCid</code>ä¸º0çš„ï¼Œä»ä¸Šé¢çš„æ•°æ®å†…å®¹ä¹Ÿå¯çœ‹å‡ºæ¥ï¼‰</li>
<li>æ¥ç€ä»è¿™äº›çˆ¶åˆ†ç±»ï¼Œæ‰¾åˆ°å±äºä»–çš„å­åˆ†ç±»ï¼ˆé€šè¿‡<code>getChildren</code>å‡½æ•°ï¼‰</li>
<li><code>sorted</code>æ ¹æ®sortå­—æ®µå‡åºæ’åˆ—</li>
<li><code>collect</code>å½¢æˆé›†åˆ</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;categoryService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CategoryServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;CategoryDao, CategoryEntity&gt; <span class="keyword">implements</span> <span class="title class_">CategoryService</span> &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;CategoryEntity&gt; <span class="title function_">listWithTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1ã€æŸ¥å‡ºæ‰€æœ‰åˆ†ç±»</span></span><br><span class="line">        List&lt;CategoryEntity&gt; entities = baseMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// 2ã€ç»„è£…æ ‘å½¢ç»“æ„</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.1ã€ä¸€çº§åˆ†ç±»</span></span><br><span class="line">        List&lt;CategoryEntity&gt; level1Menu = entities.stream().filter((categoryEntity) -&gt;</span><br><span class="line">                categoryEntity.getParentCid() == <span class="number">0</span></span><br><span class="line">        ).peek((menu) -&gt;</span><br><span class="line">                menu.setChildren(getChildren(menu, entities))</span><br><span class="line">        ).sorted(</span><br><span class="line">                Comparator.comparingInt(CategoryEntity::getSort)</span><br><span class="line">        ).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> level1Menu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å½’æŸ¥æ‰¾æ‰€æœ‰èœå•çš„å­èœå•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> all</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;CategoryEntity&gt; <span class="title function_">getChildren</span><span class="params">(CategoryEntity root, List&lt;CategoryEntity&gt; all)</span> &#123;</span><br><span class="line">        List&lt;CategoryEntity&gt; children = all.stream().filter((categoryEntity -&gt;</span><br><span class="line">                categoryEntity.getParentCid().equals(root.getCatId()))</span><br><span class="line">        ).peek((categoryEntity -&gt;</span><br><span class="line">                categoryEntity.setChildren(getChildren(categoryEntity, all)))</span><br><span class="line">        ).sorted(</span><br><span class="line">                Comparator.comparingInt(CategoryEntity::getSort)</span><br><span class="line">        ).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> children;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åwebæ˜¾ç¤ºå¦‚ä¸‹ï¼Œæˆ‘ä½¿ç”¨çš„<code>JSONView</code>æ’ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨F12æŸ¥çœ‹ç›¸å…³ä¿¡æ¯</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image-20210808171639929.5b6crh7qq8s0.png"
alt="è¿”å›çš„JSONæ•°æ®" />
<figcaption aria-hidden="true">è¿”å›çš„JSONæ•°æ®</figcaption>
</figure>
<p>ç»“æœå°±æ˜¯æˆ‘ä»¬æœŸæœ›çš„ç»“æœï¼Œè§‚å¯Ÿå‘ç°æ’åºä¹Ÿæ­£ç¡®ï¼Œâ€œæ‰‹æœºâ€æ’åœ¨é¦–ä½</p>
<h1 id="æ€è€ƒ">æ€è€ƒ</h1>
<p>å¦‚æœè¿™ä¸ªä¸šåŠ¡ä¸ä½¿ç”¨Streamè¯¥æ€ä¹ˆåšï¼Œä¼šæœ‰å¤šå¤æ‚ï¼Œä»è¿™é‡Œå°±å¯ä½“ä¼šåˆ°Streamçš„å¼ºå¤§</p>
<p>ä½¿ç”¨Streamï¼Œéœ€è¦å“ªäº›çŸ¥è¯†ï¼Ÿ</p>
<p>é¦–å…ˆä½œä¸ºJDK1.8çš„é‡ç‚¹å‡çº§ï¼ŒJDK1.8çš„lambdaè¡¨è¾¾å¼ã€å‡½æ•°å¼æ¥å£ã€é“¾å¼ç¼–ç¨‹éƒ½æ˜¯é‡ç‚¹</p>
<h2 id="å››å¤§å‡½æ•°å¼æ¥å£">å››å¤§å‡½æ•°å¼æ¥å£</h2>
<p>è¿™äº›éƒ½å¯ä»¥ç›´æ¥æœæºç çœ‹æ¥å£æ€æ ·è®¾è®¡çš„å°±æ˜ç™½æ€ä¹ˆç”¨äº†ï¼Œä¸‹é¢æˆ‘ç”¨ç™½è¯æ¦‚æ‹¬ä¸€ä¸‹</p>
<blockquote>
<p>Function å‡½æ•°å¼æ¥å£</p>
</blockquote>
<p>ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œç”±è¿™ä¸ªå‚æ•°è¿”å›å€¼</p>
<blockquote>
<p>Predicate æ–­è¨€å‹æ¥å£</p>
</blockquote>
<p>ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œç”±è¿™ä¸ªå‚æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å›å¸ƒå°”å€¼</p>
<blockquote>
<p>Consumer æ¶ˆè´¹å‹æ¥å£</p>
</blockquote>
<p>ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œç”±è¿™ä¸ªå‚æ•°è¿›è¡Œå¤„ç†ï¼Œæ— è¿”å›</p>
<blockquote>
<p>Supplier ä¾›ç»™å‹æ¥å£</p>
</blockquote>
<p>æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼</p>
<h2 id="å›æƒ³">å›æƒ³</h2>
<p>åœ¨ä½¿ç”¨Streamå…¶å®å°±æ˜¯ä¼ å…¥ä¸€äº›å‡½æ•°å¼æ¥å£ï¼Œå†ç»“åˆä½¿ç”¨lambdaè¡¨è¾¾å¼å°±å˜å¾—éå¸¸ç®€ä¾¿</p>
<p>æƒ³æƒ³ä½†æ˜¯å­¦çš„ä½¿ç”¨ä½“ä¼šè¿˜æ²¡æœ‰è¿™ä¹ˆå¤§ï¼Œç›´åˆ°é‡è§äº†çœŸçš„ä¸šåŠ¡ï¼Œæ„Ÿå—å°±é©¬ä¸Šä¸åŒäº†</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æ­¤åï¼Œæˆ‘ç»ˆäºèƒ½ä½“ä¼šåˆ°ä¸€äº›ç®—æ³•é¢˜çš„ä¸šåŠ¡åœºæ™¯äº†ï¼Œè¿˜æœ‰JavaSEåŸºç¡€çœŸçš„å¾ˆé‡è¦ï¼Œæ›´å¤šçš„å¾—æ…¢æ…¢æ„Ÿå—äº†</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹ æƒ¯è¯´æ˜ä¹¦</title>
    <url>/article/7b04ce94.html</url>
    <content><![CDATA[<p>ä¹ æƒ¯è¯´æ˜ä¹¦ï¼Œå¬èµ·æ¥å¥½åƒå¾ˆå¥‡æ€ªï¼Œæ˜¯ä¹ æƒ¯ï¼ˆçš„ï¼‰è¯´æ˜ä¹¦ï¼Ÿè¿˜æ˜¯ä¹ æƒ¯ï¼ˆç”¨ï¼‰è¯´æ˜ä¹¦ï¼Ÿ</p>
<p>ä¹ æƒ¯çš„è¯´æ˜è¯´ï¼Œæ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿä¹ æƒ¯è¿˜æœ‰è¯´æ˜è¯´çš„ï¼Ÿ</p>
<p>å°½é‡æ¥å—é»˜è®¤è®¾ç½®</p>
<p>å­¦ä¹ ç¼–ç¨‹ä»¥æ¥ï¼Œè¶Šæ¥è¶Šä¹ æƒ¯åŒºä»å®˜ç½‘ä¸Šæ‰¾èµ„æ–™ã€æŸ¥é—®é¢˜ï¼Œè¿™æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œå¯ä»¥è‚¯å®šã€‚è¿™ä¸ªä¹ æƒ¯ä¹Ÿæ¸æ¸å¸¦å…¥åˆ°ç”Ÿæ´»ä¸­äº†ï¼Œå°¤å…¶æ˜¯æ›´ä¹ æƒ¯çœ‹è¯´æ˜ä¹¦ï¼Œè¿™</p>
<p>ç°åœ¨æ¯å½“æˆ‘ä¹°ä¸œè¥¿æ—¶ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯å»çœ‹å•†å“è¯´æ˜ï¼Œå°½é‡æŠŠè¿™ä¸ªå•†å“äº†è§£åˆ°ä¸€å®šç¨‹åº¦ï¼Œåå¤æ€è€ƒè‡ªå·±æ˜¯ä¸æ˜¯éœ€è¦æ‰ä¼šå»è´­ä¹°ã€‚
è¿˜æœ‰å°±æ˜¯ä¸‹è½½appæ—¶ï¼Œè£…ä¸Šä¹‹åï¼Œç¬¬ä¸€æ­¥ä¸€å®šæ˜¯æ‰“å¼€è®¾ç½®ï¼Œä»¥å°½é‡æ¥å—é»˜è®¤è®¾ç½®ä¸ºç›®æ ‡ï¼Œä¿®æ”¹å¿…è¦çš„è®¾ç½®ï¼Œä¹Ÿè®¸æ˜¯æˆ‘ç°åœ¨çš„ç²¾åŠ›ä¸å¤šäº†ï¼Œä¸æ„¿æ„å»æŠ˜è…¾è¿™äº›ç©æ„äº†ï¼Œä¸å†ä»¥â€œæ‰€æœ‰appå¾—é€‚åº”æˆ‘çš„ä½¿ç”¨ä¹ æƒ¯â€ä¸ºç›®æ ‡ï¼Œæ›´å¤šçš„æ˜¯å»æ¥å—å®ƒä»¬æƒ³è¦ç»™æˆ‘çœ‹åˆ°çš„ã€å¬åˆ°çš„ã€‚</p>
<p>æ›´æ–°ing</p>
<span id="more"></span>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹¦å•</title>
    <url>/article/e8a1470d.html</url>
    <content><![CDATA[<h1 id="æ¨èä¸€äº›ä¹¦ç±å§">æ¨èä¸€äº›ä¹¦ç±å§</h1>
<p>ç›®å‰åˆ†ç±»ï¼šäººæ–‡å†å²ã€å°è¯´ã€ç¼–ç¨‹</p>
<span id="more"></span>
<h1 id="äººæ–‡å†å²">äººæ–‡å†å²</h1>
<p>è¿™ä¸ªæš‚æ—¶æ²¡æœ‰çœ‹è¿‡ä»€ä¹ˆçš„ï¼Œæˆ‘éƒ½æ˜¯çœ‹å½±è§†å‰§äº†è§£çš„ğŸ¶ï¼Œè¿˜æ˜¯å¯¹å†å²æŒºæ„Ÿå…´è¶£çš„ã€‚</p>
<h1 id="å°è¯´">å°è¯´</h1>
<h2 id="è¥¿æ¸¸è®°">ã€Šè¥¿æ¸¸è®°ã€‹</h2>
<p>å›½äººæœ€æœ€æœ€ç†Ÿæ‚‰çš„æ•…äº‹ï¼Œä¾æ®ã€Šè¥¿æ¸¸è®°ã€‹çš„åˆ›ä½œæ›´æ˜¯æ•°ä¸èƒœæ•°ã€‚åœ¨æˆ‘å¿ƒä¸­å®ƒä¹Ÿæ˜¯é¦–å±ˆä¸€æŒ‡çš„å­˜åœ¨ã€‚æˆ‘æ¨èçš„ä¸æ˜¯å½±è§†ã€æ¸¸æˆç­‰ä½œå“ï¼Œæ˜¯åŸè‘—ï¼åŸè‘—ï¼åŸè‘—ï¼</p>
<h2 id="æ‚Ÿç©ºä¼ ">ã€Šæ‚Ÿç©ºä¼ ã€‹</h2>
<p>è¿™å¯èƒ½æ˜¯æˆ‘å”¯ä¸€è®¤è®¤çœŸçœŸçœ‹å®Œçš„ä¸€æœ¬å°è¯´ï¼Œåœ¨é«˜ä¸­èŠ±äº†ä¸¤å¤©ï¼ˆè¯¾ä½™æ—¶é—´ï¼‰ã€‚æˆ‘ä»æ¥ä¸é€‚åˆçœ‹é•¿ç¯‡æ–‡ç« ï¼Œä¸€æ—¦æ–‡ç« è¿‡é•¿æˆ‘éƒ½ä¼šåˆ†å¿ƒï¼Œçœ‹ä¸ä¸‹å»ï¼Œæˆ‘ä¹‹æ‰€ä»¥èƒ½çœ‹ä¸‹ã€Šæ‚Ÿç©ºä¼ ã€‹ï¼Œå°±æ˜¯å› ä¸ºå®ƒæ˜¯åˆ†å°èŠ‚è®²è¿°çš„ï¼Œä¸€ç‚¹ç‚¹å°±çœ‹å®Œäº†ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<p>ã€Šæ‚Ÿç©ºä¼ ã€‹å¯¹åŸæœ‰çš„è¥¿æ¸¸å®‡å®™æ˜¯æœ‰äº›é¢ è¦†ã€‚</p>
<h1 id="ç¼–ç¨‹">ç¼–ç¨‹</h1>
<h2 id="å¤§è¯æ•°æ®ç»“æ„">ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹</h2>
<figure>
<img data-src="https://img2.doubanio.com/view/subject/l/public/s6382631.jpg"
alt="ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹" />
<figcaption aria-hidden="true">ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹</figcaption>
</figure>
<p>ç”ŸåŠ¨å½¢è±¡åœ°è®²è§£æ•°æ®ç»“æ„ï¼Œé…å›¾å’Œè®²è§£æ–¹å¼éƒ½å¾ˆæœ‰è¶£ã€‚</p>
<h2 id="ç®—æ³•">ã€Šç®—æ³•ã€‹</h2>
<figure>
<img data-src="https://img2.doubanio.com/view/subject/l/public/s29107491.jpg"
alt="ã€Šç®—æ³•ã€‹" />
<figcaption aria-hidden="true">ã€Šç®—æ³•ã€‹</figcaption>
</figure>
<p>Javaè¯­è¨€è®²è§£ç®—æ³•ï¼Œæœ‰ä¸€å®šéš¾åº¦ã€‚</p>
<h2 id="å‰‘æŒ‡offer">ã€Šå‰‘æŒ‡Offerã€‹</h2>
<figure>
<img data-src="https://img9.doubanio.com/view/subject/l/public/s7038106.jpg"
alt="ã€Šå‰‘æŒ‡Offerã€‹" />
<figcaption aria-hidden="true">ã€Šå‰‘æŒ‡Offerã€‹</figcaption>
</figure>
<p>ä¸ä»…ä»…æ˜¯é¢è¯•å¿…å¤‡ï¼Œè€Œä¸”å¯¹äºæ•°æ®ç»“æ„çš„ç†è§£ã€ç®—æ³•å®è·µå’Œä»£ç ç¼–å†™éƒ½å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h2 id="mysqlå¿…çŸ¥å¿…ä¼š">ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹</h2>
<figure>
<img data-src="https://img9.doubanio.com/view/subject/m/public/s5968156.jpg"
alt="ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹" />
<figcaption aria-hidden="true">ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹</figcaption>
</figure>
<p>å¾ˆåŸºç¡€çš„MySQLä¹¦ç±ï¼Œå¾ˆå…¨é¢ã€‚</p>
<h2 id="mysqlæŠ€æœ¯å†…å¹•">ã€ŠMySQLæŠ€æœ¯å†…å¹•ã€‹</h2>
<figure>
<img data-src="https://img1.doubanio.com/view/subject/s/public/s29731159.jpg"
alt="ã€ŠMySQLæŠ€æœ¯å†…å¹•ã€‹" />
<figcaption aria-hidden="true">ã€ŠMySQLæŠ€æœ¯å†…å¹•ã€‹</figcaption>
</figure>
<p>æ·±å…¥äº†è§£MySQLæŠ€æœ¯ã€‚</p>
<h2 id="redisè®¾è®¡ä¸å®ç°">ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹</h2>
<figure>
<img data-src="https://img1.doubanio.com/view/subject/m/public/s27297117.jpg"
alt="ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹" />
<figcaption aria-hidden="true">ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹</figcaption>
</figure>
<h2 id="javaç¼–ç¨‹æ€æƒ³">ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹</h2>
<figure>
<img data-src="https://img9.doubanio.com/view/subject/l/public/s27243455.jpg"
alt="ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹" />
<figcaption aria-hidden="true">ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹</figcaption>
</figure>
<p>éå¸¸å…¨é¢çš„Javaç¼–ç¨‹ä¹¦ç±ï¼Œç¨å¾®æœ‰äº›æ™¦æ¶©ï¼Œæ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘äººå‘˜éƒ½å€¼å¾—åå¤çœ‹ã€‚</p>
<h2 id="springå®æˆ˜">ã€ŠSpringå®æˆ˜ã€‹</h2>
<figure>
<img data-src="https://img9.doubanio.com/view/subject/s/public/s33601406.jpg"
alt="ã€ŠSpringå®æˆ˜ã€‹" />
<figcaption aria-hidden="true">ã€ŠSpringå®æˆ˜ã€‹</figcaption>
</figure>
<p>Springå®¶æ—éƒ½æœ‰äº›æ¶‰åŠã€‚</p>
<h2 id="javaå¹¶å‘ç¼–ç¨‹å®æˆ˜">ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</h2>
<figure>
<img data-src="https://img2.doubanio.com/view/subject/m/public/s7663093.jpg"
alt="ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹" />
<figcaption aria-hidden="true">ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</figcaption>
</figure>
<p>å¦‚ä¹¦åï¼šJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜</p>
<h2 id="æ·±å…¥ç†è§£javaè™šæ‹Ÿæœº">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</h2>
<figure>
<img data-src="https://img9.doubanio.com/view/subject/m/public/s33531736.jpg"
alt="ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹" />
<figcaption aria-hidden="true">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</figcaption>
</figure>
<p>æ›´é€‚åˆæœ‰ç»éªŒçš„å¼€å‘è€…</p>
<p>æš‚æ—¶åˆ°è¿™å§ï¼Œä¹‹åä¼šè¡¥å……çš„ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>è¯»ä¹¦</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘</title>
    <url>/article/e85d694a.html</url>
    <content><![CDATA[<p>æ ‘çš„åŸºæœ¬æ¦‚å¿µå’Œå­˜å‚¨ç»“æ„å·²ç»ä»‹ç»è¿‡äº†ï¼Œç°åœ¨ä»‹ç»æ•°æ®ç»“æ„ä¸­æå…¶é‡è¦çš„äºŒå‰æ ‘ã€‚</p>
<p><a
href="https://www.jianshu.com/p/3a8aee2ce593">éƒ¨åˆ†æ˜¾ç¤ºé—®é¢˜ï¼Œè¯·å‚è€ƒ</a></p>
<span id="more"></span>
<h1 id="å®šä¹‰">å®šä¹‰</h1>
<p>äºŒå‰æ ‘ï¼ˆBinary
Treeï¼‰æ˜¯nï¼ˆn&gt;=0ï¼‰ä¸ªç»“ç‚¹çš„æœ‰é™é›†åˆï¼Œè¯¥é›†åˆæˆ–è€…ä¸ºç©ºé›†ï¼ˆç§°ä¸ºç©ºäºŒå‰æ ‘ï¼‰ï¼Œæˆ–è€…ç”±ä¸€ä¸ªæ ¹ç»“ç‚¹å’Œä¸¤æ£µäº’ä¸ç›¸äº¤çš„ï¼Œåˆ†åˆ«ç§°ä¸ºæ ¹ç»“ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„äºŒå‰æ ‘ç»„æˆã€‚</p>
<h2 id="äºŒå‰æ ‘çš„ç‰¹ç‚¹æœ‰">äºŒå‰æ ‘çš„ç‰¹ç‚¹æœ‰:</h2>
<p>æ¯ä¸ªç»“ç‚¹æœ€å¤šæœ‰ä¸¤æ£µå­æ ‘ï¼Œæ‰€ä»¥äºŒåˆæ ‘ä¸­ä¸å­˜åœ¨åº¦å¤§äº2çš„ç»“ç‚¹ã€‚æ³¨æ„ä¸æ˜¯åªæœ‰ä¸¤æ£µå­æ ‘ï¼Œè€Œæ˜¯æœ€å¤šæœ‰ã€‚æ²¡æœ‰å­æ ‘æˆ–è€…æœ‰æ£µå­æ ‘éƒ½æ˜¯å¯ä»¥çš„ã€‚</p>
<p>å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯æœ‰é¡ºåºçš„ï¼Œæ¬¡åºä¸èƒ½ä»»æ„é¢ å€’ã€‚å°±åƒäººæ˜¯åŒæ‰‹ã€åŒè„šï¼Œä½†æ˜¾ç„¶å·¦æ‰‹ã€å·¦è„šå’Œå³æ‰‹ã€å³è„šæ˜¯ä¸ä¸€æ ·çš„ï¼Œå³æ‰‹æˆ´å·¦æ‰‹å¥—ã€å³è„šç©¿å·¦é‹éƒ½ä¼šæå…¶åˆ«æ‰­å’Œéš¾å—ã€‚</p>
<p>å³ä½¿æ ‘ä¸­æŸç»“ç‚¹åªæœ‰ä¸€æ£µå­æ ‘ï¼Œä¹Ÿè¦åŒºåˆ†å®ƒæ˜¯å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘ã€‚å›¾6-5-3ä¸­ï¼Œæ ‘1å’Œæ ‘2æ˜¯åŒä¸€æ£µæ ‘ï¼Œä½†å®ƒä»¬å´æ˜¯ä¸åŒçš„äºŒå‰æ ‘ã€‚å°±å¥½åƒä½ ä¸€ä¸å°å¿ƒï¼Œæ‘”ä¼¤äº†æ‰‹ï¼Œä¼¤çš„æ˜¯å·¦æ‰‹è¿˜æ˜¯å³æ‰‹ï¼Œå¯¹ä½ çš„ç”Ÿæ´»å½±å“åº¦æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p>
<h2 id="äºŒå‰æ ‘å…·æœ‰äº”ç§åŸºæœ¬å½¢æ€">äºŒå‰æ ‘å…·æœ‰äº”ç§åŸºæœ¬å½¢æ€:</h2>
<p>1.ç©ºäºŒå‰æ ‘ã€‚</p>
<p>2.åªæœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹ã€‚</p>
<p>3.æ ¹ç»“ç‚¹åªæœ‰å·¦å­æ ‘ã€‚</p>
<p>4.æ ¹ç»“ç‚¹åªæœ‰å³å­æ ‘ã€‚</p>
<p>5.æ ¹ç»“ç‚¹æ—¢æœ‰å·¦å­æ ‘åˆæœ‰å³å­æ ‘ã€‚</p>
<h2 id="ç‰¹æ®ŠäºŒå‰æ ‘">ç‰¹æ®ŠäºŒå‰æ ‘</h2>
<h3 id="æ–œæ ‘">æ–œæ ‘</h3>
<p>æ‰€æœ‰çš„ç»“ç‚¹éƒ½åªæœ‰å·¦å­æ ‘çš„äºŒå‰æ ‘å«å·¦æ–œæ ‘ã€‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½åªæœ‰å³å­æ ‘çš„äºŒå‰æ ‘å«å³æ–œæ ‘ã€‚è¿™ä¸¤è€…ç»Ÿç§°ä¸ºæ–œæ ‘ã€‚</p>
<h3 id="æ»¡äºŒå‰æ ‘">æ»¡äºŒå‰æ ‘</h3>
<p>åœ¨ä¸€æ£µäºŒå‰æ ‘ä¸­ï¼Œå¦‚æœæ‰€æœ‰åˆ†æ”¯ç»“ç‚¹éƒ½å­˜åœ¨å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå¹¶ä¸”æ‰€æœ‰å¶å­éƒ½åœ¨åŒä¸€å±‚ä¸Šï¼Œè¿™æ ·çš„äºŒå‰æ ‘ç§°ä¸ºæ»¡äºŒå‰æ ‘ã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>(1)å¶å­åªèƒ½å‡ºç°åœ¨æœ€ä¸‹ä¸€å±‚ã€‚å‡ºç°åœ¨å…¶ä»–å±‚å°±ä¸å¯èƒ½è¾¾æˆå¹³è¡¡ã€‚</p>
<p>(2)éå¶å­ç»“ç‚¹çš„åº¦ä¸€-å®šæ˜¯ 2ã€‚å¦åˆ™å°±æ˜¯â€œç¼ºèƒ³è†Šå°‘è…¿â€äº†ã€‚</p>
<p>(3)åœ¨åŒæ ·æ·±åº¦çš„äºŒå‰æ ‘ä¸­ï¼Œæ»¡äºŒå‰æ ‘çš„ç»“ç‚¹ä¸ªæ•°æœ€å¤šï¼Œå¶å­æ•°æœ€å¤šã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/æ»¡äºŒå‰æ ‘.png"
alt="æ»¡äºŒå‰æ ‘" />
<figcaption aria-hidden="true">æ»¡äºŒå‰æ ‘</figcaption>
</figure>
<h3 id="å®Œå…¨äºŒå‰æ ‘">å®Œå…¨äºŒå‰æ ‘</h3>
<p>å¯¹ä¸€æ£µå…·æœ‰nä¸ªç»“ç‚¹çš„äºŒå‰æ ‘æŒ‰å±‚åºç¼–å·ï¼Œå¦‚æœç¼–å·ä¸ºiï¼ˆ1â‰¤iâ‰¤nï¼‰çš„ç»“ç‚¹ä¸åŒç¥¥æ·±åº¦çš„æ»¡äºŒå‰æ ‘ä¸­ç¼–å·ä¸ºiçš„ç»“ç‚¹åœ¨äºŒå‰æ ‘ä¸­ä½ç½®å®Œå…¨ç›¸åŒï¼Œåˆ™è¿™æ£µäºŒå‰æ ‘ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>(1)å¶å­ç»“ç‚¹åªèƒ½å‡ºç°åœ¨æœ€ä¸‹ä¸¤å±‚ã€‚</p>
<p>(2)æœ€ä¸‹å±‚çš„å¶å­ä¸€å®šé›†ä¸­åœ¨å·¦éƒ¨è¿ç»­ä½ç½®ã€‚</p>
<p>(3)å€’æ•°äºŒå±‚ï¼Œè‹¥æœ‰å¶å­ç»“ç‚¹ï¼Œä¸€å®šéƒ½åœ¨å³éƒ¨è¿ç»­ä½ç½®ã€‚</p>
<p>(4)å¦‚æœç»“ç‚¹åº¦ä¸º1ï¼Œåˆ™è¯¥ç»“ç‚¹åªæœ‰å·¦å­©å­ï¼Œå³ä¸å­˜åœ¨åªæœ‰å³å­æ ‘çš„æƒ…å†µã€‚</p>
<p>(5)åŒæ ·ç»“ç‚¹æ•°çš„äºŒå‰æ ‘ï¼Œå®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦æœ€å°ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/å®Œå…¨äºŒå‰æ ‘.png"
alt="å®Œå…¨äºŒå‰æ ‘" />
<figcaption aria-hidden="true">å®Œå…¨äºŒå‰æ ‘</figcaption>
</figure>
<h2 id="äºŒå‰æ ‘çš„æ€§è´¨">äºŒå‰æ ‘çš„æ€§è´¨</h2>
<h2 id="æ€§è´¨ä¸€">æ€§è´¨ä¸€</h2>
<p>åœ¨äºŒå‰æ ‘çš„ç¬¬iå±‚ä¸Šè‡³å¤šæœ‰<span
class="math inline">\(2^{i-1}\)</span>ä¸ªç»“ç‚¹ï¼ˆi&gt;=1ï¼‰ã€‚</p>
<h2 id="æ€§è´¨äºŒ">æ€§è´¨äºŒ</h2>
<p>æ·±åº¦ä¸ºkçš„äºŒå‰æ ‘è‡³å¤šæœ‰<span
class="math inline">\(2^k-1\)</span>ä¸ªç»“ç‚¹ï¼ˆk&gt;=1ï¼‰ã€‚</p>
<h2 id="æ€§è´¨ä¸‰">æ€§è´¨ä¸‰</h2>
<p>å¯¹ä»»ä½•ä¸€æ£µäºŒå‰æ ‘Tï¼Œå¦‚æœå…¶ç»ˆç«¯ç»“ç‚¹æ•°ä¸º<span
class="math inline">\(n_0\)</span>ï¼Œåº¦ä¸º2çš„ç»“ç‚¹æ•°ä¸º<span
class="math inline">\(n_2\)</span>ï¼Œåˆ™<span
class="math inline">\(n_0=n_2+1\)</span>ã€‚</p>
<h2 id="æ€§è´¨å››">æ€§è´¨å››</h2>
<p>å…·æœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸º<span
class="math inline">\([log_2n]\)</span>+1ï¼ˆ[x]è¡¨ç¤ºä¸å¤§äºxçš„æœ€å¤§æ•´æ•°ï¼‰ã€‚</p>
<h2 id="æ€§è´¨äº”">æ€§è´¨äº”</h2>
<p>å¯¹äºå®Œå…¨äºŒå‰æ ‘ï¼Œè‹¥ä»ä¸Šè‡³ä¸‹ã€ä»å·¦è‡³å³ç¼–å·ï¼Œåˆ™ç¼–å·ä¸º<span
class="math inline">\(i\)</span>çš„ç»“ç‚¹ï¼Œå…¶å·¦å­©å­ç¼–å·å¿…ä¸º<span
class="math inline">\(2i\)</span>ï¼Œå³å­©å­ç¼–å·å¿…ä¸º<span
class="math inline">\(2iï¼‹1\)</span>ï¼ŒåŒäº²çš„ç¼–å·å¿…ä¸º<span
class="math inline">\(i/2\)</span>ã€‚</p>
<h2 id="äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„">äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„</h2>
<h2 id="äºŒå‰æ ‘é¡ºåºå­˜å‚¨ç»“æ„">äºŒå‰æ ‘é¡ºåºå­˜å‚¨ç»“æ„</h2>
<p>ä¸€èˆ¬åªç”¨äºå®Œå…¨äºŒå‰æ ‘ï¼Œä¸è¯¦è§£ã€‚</p>
<h2 id="äºŒå‰é“¾è¡¨">äºŒå‰é“¾è¡¨</h2>
<p>äºŒå‰æ ‘æ¯ä¸ªç»“ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­©å­ï¼Œæ‰€ä»¥ä¸ºä»–è®¾è®¡ä¸€ä¸ªæ•°æ®ä¸å’Œä¸¤ä¸ªæŒ‡é’ˆåŸŸï¼Œç§°è¿™æ ·çš„é“¾è¡¨å«åšäºŒå‰é“¾è¡¨ã€‚</p>
<div class="line-block">lchild | data | rchild |</div>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">BiTNode</span></span><br><span class="line">&#123;</span><br><span class="line">    TElemType data;     <span class="comment">/*æ•°æ®*/</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">BiTNode</span>* lchild, * rchild;   <span class="comment">/*å·¦å³å­©å­æŒ‡é’ˆ*/</span></span><br><span class="line">&#125;BiTNode, * BiTree;</span><br></pre></td></tr></table></figure>
<h2 id="éå†äºŒå‰æ ‘">éå†äºŒå‰æ ‘</h2>
<h2 id="åŸç†">åŸç†</h2>
<p>äºŒå‰æ ‘çš„éå†( traversing binary tree
)æ˜¯æŒ‡ä»æ ¹ç»“ç‚¹å‡ºå‘ï¼ŒæŒ‰ç…§æŸç§æ¬¡åºä¾æ¬¡è®¿é—®äºŒå‰æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹ï¼Œä½¿å¾—æ¯ä¸ªç»“ç‚¹è¢«è®¿é—®ä¸€æ¬¡ä¸”ä»…è¢«è®¿é—®ä¸€æ¬¡ã€‚</p>
<h2 id="éå†æ–¹æ³•">éå†æ–¹æ³•</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/éå†.png"
alt="éå†" />
<figcaption aria-hidden="true">éå†</figcaption>
</figure>
<h3 id="å‰åºéå†å³å…ˆæ ¹åºçš„éå†ç®—æ³•">å‰åºéå†å³å…ˆï¼ˆæ ¹ï¼‰åºçš„éå†ç®—æ³•</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">PreOrderTraverse</span><span class="params">(BiTree T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (T == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    cout &lt;&lt; T-&gt;data;</span><br><span class="line">    <span class="built_in">PreOrderTraverse</span>(T-&gt;lchild);</span><br><span class="line">    <span class="built_in">PreOrderTraverse</span>(T-&gt;rchild);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šå›¾å‰åºéå†ï¼šA BDG CEF</p>
<h3 id="ä¸­åºéå†å³ä¸­æ ¹åºçš„éå†ç®—æ³•">ä¸­åºéå†å³ä¸­ï¼ˆæ ¹ï¼‰åºçš„éå†ç®—æ³•</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InOrderTraverse</span><span class="params">(BiTree T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (T == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">InOrderTraverse</span>(T-&gt;lchild);</span><br><span class="line">    cout &lt;&lt; T-&gt;data;</span><br><span class="line">    <span class="built_in">InOrderTraverse</span>(T-&gt;rchild);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šå›¾ä¸­åºéå†ï¼šDGB A ECF</p>
<h3 id="ååºéå†å³åæ ¹åºçš„éå†ç®—æ³•">ååºéå†å³åï¼ˆæ ¹ï¼‰åºçš„éå†ç®—æ³•</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">PostOrderTraverse</span><span class="params">(BiTree T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (T == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">PostOrderTraverse</span>(T-&gt;lchild);</span><br><span class="line">    <span class="built_in">PostOrderTraverse</span>(T-&gt;rchild);</span><br><span class="line">    cout &lt;&lt; T-&gt;data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šå›¾ååºéå†ï¼šGDB EFC A</p>
<h3 id="å±‚åºéå†å³é€å±‚éå†">å±‚åºéå†å³é€å±‚éå†</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">FloorPrint</span><span class="params">(BiTree T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    BiTree temp[<span class="number">100</span>];   <span class="comment">//åˆ›å»ºpTreeNodeæŒ‡é’ˆç±»å‹çš„æŒ‡é’ˆæ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> in = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> out = <span class="number">0</span>;</span><br><span class="line">    temp[in++] = T;  <span class="comment">//å…ˆä¿å­˜äºŒå‰æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (in &gt; out)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (temp[out])</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; temp[out]-&gt;data;</span><br><span class="line">            temp[in++] = temp[out]-&gt;lchild;</span><br><span class="line">            temp[in++] = temp[out]-&gt;rchild;</span><br><span class="line">        &#125;</span><br><span class="line">        out++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šå›¾å±‚åºéå†ï¼šA BC DEF G</p>
<h2 id="äºŒå‰æ ‘å»ºç«‹">äºŒå‰æ ‘å»ºç«‹</h2>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateBiTree</span><span class="params">(BiTree&amp; T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TElemType c;</span><br><span class="line">    cin &gt;&gt; c;</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">        T = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        T = <span class="keyword">new</span> BiTNode;</span><br><span class="line">        <span class="keyword">if</span> (!T)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;åˆ†é…ç©ºé—´å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            T-&gt;data = c;</span><br><span class="line">            <span class="built_in">CreateBiTree</span>(T-&gt;lchild);</span><br><span class="line">            <span class="built_in">CreateBiTree</span>(T-&gt;rchild);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çº¿ç´¢äºŒå‰æ ‘">çº¿ç´¢äºŒå‰æ ‘</h2>
<p>æŠŠæŒ‡å‘å‰é©±å’Œåç»§çš„æŒ‡é’ˆç§°ä¸ºçº¿ç´¢ï¼ŒåŠ ä¸Šçº¿ç´¢çš„äºŒå‰é“¾è¡¨ç§°ä¸ºçº¿ç´¢é“¾è¡¨ï¼Œç›¸åº”çš„äºŒå‰æ ‘å°±ç§°ä¸ºçº¿ç´¢äºŒå‰æ ‘ï¼ˆThreaded
Binary Treeï¼‰ã€‚</p>
<div class="line-block">lchild | ltag | data | rtag | rchild |</div>
<p>å…¶ä¸­ï¼š</p>
<p>ltagä¸º0æ—¶æŒ‡å‘è¯¥ç»“ç‚¹çš„å·¦å­©å­ï¼Œä¸º1æ—¶æŒ‡å‘è¯¥ç»“ç‚¹çš„å‰é©±ã€‚</p>
<p>rtagä¸º0æ—¶æŒ‡å‘è¯¥ç»“ç‚¹çš„å³å­©å­ï¼Œä¸º1æ—¶æŒ‡å‘è¯¥ç»“ç‚¹çš„åç»§ã€‚</p>
<h2 id="çº¿ç´¢äºŒå‰æ ‘ç»“æ„å®ç°">çº¿ç´¢äºŒå‰æ ‘ç»“æ„å®ç°</h2>
<h3 id="å­˜å‚¨ç»“æ„å®šä¹‰">å­˜å‚¨ç»“æ„å®šä¹‰</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">BiThrNode</span></span><br><span class="line">&#123;</span><br><span class="line">    TElemType data;</span><br><span class="line">    <span class="keyword">struct</span>  <span class="title class_">BiThrNode</span>* lchild, * rchild;</span><br><span class="line">    <span class="type">int</span> LTag, RTag; <span class="comment">//LTag(RTag)=0è¡¨ç¤ºæŒ‡å‘å­©å­ï¼ŒLTag(RTag)=1è¡¨ç¤ºåªæ˜¯å‰é©±æˆ–åç»§</span></span><br><span class="line">&#125;BiThrNode, * BiThrTree;</span><br><span class="line">BiThrTree pre;<span class="comment">//å…¨å±€å˜é‡ï¼Œå§‹ç»ˆæŒ‡å‘åˆšåˆšè®¿é—®è¿‡çš„èŠ‚ç‚¹</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸­åºéå†è¿›è¡Œä¸­åºçº¿ç´¢åŒ–">ä¸­åºéå†è¿›è¡Œä¸­åºçº¿ç´¢åŒ–</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InThreading</span><span class="params">(BiThrTree p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">InThreading</span>(p-&gt;lchild);<span class="comment">/* é€’å½’å·¦å­æ ‘çº¿ç´¢åŒ– */</span></span><br><span class="line">        <span class="keyword">if</span> (!p-&gt;lchild)<span class="comment">/* æ²¡æœ‰å·¦å­©å­ */</span></span><br><span class="line">        &#123;</span><br><span class="line">            p-&gt;LTag = <span class="number">1</span>;<span class="comment">/* å‰é©±çº¿ç´¢ */</span></span><br><span class="line">            p-&gt;lchild = pre; <span class="comment">/* å·¦å­©å­æŒ‡é’ˆæŒ‡å‘å‰é©± */</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p-&gt;LTag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (!pre-&gt;rchild) <span class="comment">/* å‰é©±æ²¡æœ‰å³å­©å­ */</span></span><br><span class="line">        &#123;</span><br><span class="line">            pre-&gt;RTag = <span class="number">1</span>;<span class="comment">/* åç»§çº¿ç´¢ */</span></span><br><span class="line">            pre-&gt;rchild = p;<span class="comment">/* å‰é©±å³å­©å­æŒ‡é’ˆæŒ‡å‘åç»§(å½“å‰ç»“ç‚¹p) */</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p-&gt;RTag = <span class="number">0</span>;</span><br><span class="line">        pre = p;<span class="comment">/* ä¿æŒpreæŒ‡å‘pçš„å‰é©± */</span></span><br><span class="line">        <span class="built_in">InThreading</span>(p-&gt;rchild);<span class="comment">/* é€’å½’å³å­æ ‘çº¿ç´¢åŒ– */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3
id="ä¸­åºçº¿ç´¢äºŒå‰æ ‘éå†å¸¦æœ‰å¤´èŠ‚ç‚¹">ä¸­åºçº¿ç´¢äºŒå‰æ ‘éå†ï¼ˆå¸¦æœ‰å¤´èŠ‚ç‚¹ï¼‰</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InOrderTraverse_Thr</span><span class="params">(BiThrTree T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    BiThrTree p;</span><br><span class="line">    p = T-&gt;lchild; <span class="comment">/* pæŒ‡å‘æ ¹ç»“ç‚¹ */</span></span><br><span class="line">    <span class="keyword">while</span> (p != T)<span class="comment">/* ç©ºæ ‘æˆ–éå†ç»“æŸæ—¶,p==T */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (p-&gt;LTag == <span class="number">0</span>)</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        cout &lt;&lt; p-&gt;data;</span><br><span class="line">        <span class="keyword">while</span> (p-&gt;RTag == <span class="number">1</span> &amp;&amp; p-&gt;rchild != T)</span><br><span class="line">        &#123;</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">            cout &lt;&lt; p-&gt;data;</span><br><span class="line">        &#125;</span><br><span class="line">        p = p-&gt;rchild;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ ‘æ£®æ—ä¸äºŒå‰æ ‘çš„è½¬æ¢">æ ‘ã€æ£®æ—ä¸äºŒå‰æ ‘çš„è½¬æ¢</h2>
<h2 id="æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘">æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘</h2>
<p>1.åŠ çº¿ã€‚åœ¨æ‰€æœ‰å…„å¼Ÿç»“ç‚¹ä¹‹é—´åŠ ä¸€æ¡è¿çº¿ã€‚</p>
<p>2.å»çº¿ã€‚å¯¹æ ‘ä¸­æ¯ä¸ªç»“ç‚¹ï¼Œåªä¿ç•™å®ƒä¸ç¬¬ä¸€ä¸€ä¸ªå­©å­ç»“ç‚¹çš„è¿çº¿ï¼Œ
åˆ é™¤å®ƒä¸å…¶ä»–å­©å­ç»“ç‚¹ä¹‹é—´çš„è¿çº¿ã€‚</p>
<p>3.å±‚æ¬¡è°ƒæ•´ã€‚ä»¥æ ‘çš„æ ¹ç»“ç‚¹ä¸ºè½´å¿ƒï¼Œå°†æ•´æ£µæ ‘é¡ºæ—¶é’ˆæ—‹è½¬å®šçš„è§’åº¦ï¼Œ
ä½¿ä¹‹ç»“æ„å±‚æ¬¡åˆ†æ˜ã€‚æ³¨æ„ç¬¬ä¸€ä¸ªå­©å­æ˜¯äºŒå‰æ ‘ç»“ç‚¹çš„å·¦å­©å­ï¼Œå…„å¼Ÿè½¬æ¢è¿‡æ¥çš„å­©å­æ˜¯ç»“ç‚¹çš„å³å­©å­ã€‚</p>
<h2 id="æ£®æ—è½¬æ¢ä¸ºäºŒå‰æ ‘">æ£®æ—è½¬æ¢ä¸ºäºŒå‰æ ‘</h2>
<p>æ£®æ—æ˜¯ç”±è‹¥å¹²æ£µæ ‘ç»„æˆçš„ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥ç†è§£ä¸ºï¼Œæ£®æ—ä¸­çš„æ¯ä¸€æ£µæ ‘éƒ½æ˜¯å…„å¼Ÿï¼Œå¯ä»¥æŒ‰ç…§å…„å¼Ÿçš„å¤„ç†åŠæ³•æ¥æ“ä½œã€‚æ­¥éª¤å¦‚ä¸‹:</p>
<p>1.æŠŠæ¯ä¸ªæ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘ã€‚</p>
<p>2.ç¬¬ä¸€æ£µäºŒåˆæ ‘ä¸åŠ¨ï¼Œä»ç¬¬äºŒæ£µäºŒå‰æ ‘å¼€å§‹ï¼Œä¾æ¬¡æŠŠåä¸€æ£µäºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ä½œä¸ºå‰ä¸€æ£µäºŒå‰æ ‘çš„æ ¹ç»“ç‚¹çš„å³å­©å­ç”¨çº¿è¿æ¥èµ·æ¥ã€‚å½“æ‰€æœ‰çš„äºŒå‰æ ‘è¿æ¥èµ·æ¥åå°±å¾—åˆ°äº†ç”±æ£®æ—è½¬æ¢æ¥çš„äºŒå‰æ ‘ã€‚</p>
<h2 id="äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘">äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘</h2>
<p>äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘æ˜¯æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘çš„é€†è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯åè¿‡æ¥åšè€Œå·²ã€‚æ­¥éª¤å¦‚ä¸‹:</p>
<p>1.åŠ çº¿ã€‚è‹¥æŸç»“ç‚¹çš„å·¦å­©å­ç»“ç‚¹å­˜åœ¨ï¼Œåˆ™å°†è¿™ä¸ªå·¦å­©å­çš„å³å­©å­ç»“ç‚¹ã€å³å­©å­çš„å³å­©å­ç»“ç‚¹ã€å³å­©å­çš„å³å­©å­çš„å³å­©å­ç»“....å“ˆï¼Œåæ­£å°±æ˜¯å·¦å­©å­çš„nä¸ªå³å­©å­ç»“ç‚¹éƒ½ä½œä¸ºæ­¤ç»“ç‚¹çš„å­©å­ã€‚å°†è¯¥ç»“ç‚¹ä¸è¿™äº›å³å­©å­ç»“ç‚¹ç”¨çº¿è¿æ¥èµ·æ¥ã€‚</p>
<p>2.å»çº¿ã€‚åˆ é™¤åŸäºŒå‰æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹ä¸å…¶å³å­©å­ç»“ç‚¹çš„è¿çº¿ã€‚</p>
<p>3.å±‚æ¬¡è°ƒæ•´ã€‚ä½¿ä¹‹ç»“æ„å±‚æ¬¡åˆ†æ˜ã€‚</p>
<h2 id="äºŒå‰æ ‘è½¬æ¢ä¸ºæ£®æ—">äºŒå‰æ ‘è½¬æ¢ä¸ºæ£®æ—</h2>
<p>åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘èƒ½å¤Ÿè½¬æ¢æˆæ£µæ ‘è¿˜æ˜¯æ£®æ—ï¼Œ
æ ‡å‡†å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯åªè¦çœ‹è¿™æ£µäºŒå‰æ ‘çš„æ ¹ç»“ç‚¹æœ‰æ²¡æœ‰å³å­©å­ï¼Œæœ‰å°±æ˜¯æ£®æ—ï¼Œæ²¡æœ‰å°±æ˜¯ä¸€æ£µæ ‘ã€‚é‚£ä¹ˆå¦‚æœæ˜¯è½¬æ¢æˆæ£®æ—ï¼Œæ­¥éª¤å¦‚ä¸‹:</p>
<p>1.ä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œè‹¥å³å­©å­å­˜åœ¨ï¼Œåˆ™æŠŠä¸å³å­©å­ç»“ç‚¹çš„è¿çº¿åˆ é™¤ï¼Œå†æŸ¥çœ‹åˆ†ç¦»åçš„äºŒå‰æ ‘ï¼Œè‹¥å³å­©å­å­˜åœ¨ï¼Œåˆ™è¿çº¿åˆ é™¤....ç›´åˆ°æ‰€æœ‰å³å­©å­è¿çº¿éƒ½åˆ é™¤ä¸ºæ­¢ï¼Œå¾—åˆ°åˆ†ç¦»çš„äºŒå‰æ ‘ã€‚</p>
<p>2.å†å°†æ¯æ£µåˆ†ç¦»åçš„äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘å³å¯ã€‚</p>
<h2 id="æ ‘ä¸æ£®æ—çš„éå†">æ ‘ä¸æ£®æ—çš„éå†</h2>
<p>æœ€åæˆ‘ä»¬å†è°ˆè°ˆå…³äºæ ‘å’Œæ£®æ—çš„éå†é—®é¢˜ã€‚</p>
<p>æ ‘çš„éå†åˆ†ä¸ºä¸¤ç§æ–¹å¼ã€‚</p>
<p>1.ä¸€ç§æ˜¯å…ˆæ ¹éå†æ ‘ï¼Œ
å³å…ˆè®¿é—®æ ‘çš„æ ¹ç»“ç‚¹ï¼Œç„¶åä¾æ¬¡å…ˆæ ¹éå†æ ¹çš„æ¯æ£µå­æ ‘ã€‚</p>
<p>2.å¦ä¸€ç§æ˜¯åæ ¹éå†ã€‹å³å…ˆä¾æ¬¡åæ ¹éå†æ¯æ£µå­æ ‘ï¼Œç„¶åå†è®¿é—®æ ¹ç»“ç‚¹ã€‚</p>
<p>æ£®æ—çš„éå†ä¹Ÿåˆ†ä¸ºä¸¤ç§æ–¹å¼:</p>
<p>1.å‰åºéå†:å…ˆè®¿é—®æ£®æ—ä¸­ç¬¬ä¸€æ£µæ ‘çš„æ ¹ç»“ç‚¹ï¼Œç„¶åå†ä¾æ¬¡å…ˆæ ¹éå†æ ¹çš„æ¯æ£µå­æ ‘ï¼Œå†ä¾æ¬¡ç”¨åŒæ ·æ–¹å¼éå†é™¤å»ç¬¬ä¸€æ£µæ ‘çš„å‰©ä½™æ ‘æ„æˆçš„æ£®æ—ã€‚</p>
<p>2.ååºéå†:æ˜¯å…ˆè®¿é—®æ£®æ—ä¸­ç¬¬ä¸€æ£µæ ‘ï¼Œåæ ¹éå†çš„æ–¹å¼éå†æ¯æ£µå­æ ‘ï¼Œç„¶åå†è®¿é—®æ ¹ç»“ç‚¹ï¼Œå†ä¾æ¬¡åŒæ ·æ–¹å¼éå†é™¤å»ç¬¬ä¸€æ£µæ ‘çš„å‰©ä½™æ ‘æ„æˆçš„æ£®æ—ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>äºŒå‰æ ‘åº”ç”¨å¾ˆå¹¿çš„ã€‚</p>
<p><a
href="https://www.jianshu.com/p/3a8aee2ce593">éƒ¨åˆ†æ˜¾ç¤ºé—®é¢˜ï¼Œè¯·å‚è€ƒ</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‘æœåŠ¡å™¨ä½¿ç”¨æŒ‡å—</title>
    <url>/article/4e5a8380.html</url>
    <content><![CDATA[<p>éšç€äº‘è®¡ç®—æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå’Œä¸ªäººå¼€å§‹ä½¿ç”¨äº‘æœåŠ¡å™¨æ¥æ‰˜ç®¡ç½‘ç«™ã€åº”ç”¨ç¨‹åºå’Œå…¶ä»–åœ¨çº¿æœåŠ¡ã€‚äº‘æœåŠ¡å™¨æä¾›äº†ä¸€ç§çµæ´»ã€å¯æ‰©å±•ä¸”æˆæœ¬æ•ˆç›Šé«˜çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥è½»æ¾åœ°éƒ¨ç½²å’Œç®¡ç†è‡ªå·±çš„åœ¨çº¿ä¸šåŠ¡ã€‚æœ¬æ–‡å°†ä¸ºæ‚¨æä¾›ä¸€ä»½è¯¦ç»†çš„äº‘æœåŠ¡å™¨ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°åˆ©ç”¨äº‘æœåŠ¡å™¨ã€‚</p>
<h1 id="ä¸€é€‰æ‹©åˆé€‚çš„äº‘æœåŠ¡å™¨æä¾›å•†">ä¸€ã€é€‰æ‹©åˆé€‚çš„äº‘æœåŠ¡å™¨æä¾›å•†</h1>
<p>å¸‚åœºä¸Šæœ‰è®¸å¤šäº‘æœåŠ¡å™¨æä¾›å•†ï¼Œå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€äºšé©¬é€ŠAWSç­‰ã€‚åœ¨é€‰æ‹©äº‘æœåŠ¡å™¨æä¾›å•†æ—¶ï¼Œæ‚¨éœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š</p>
<ul>
<li>ä»·æ ¼ï¼šæ¯”è¾ƒä¸åŒæä¾›å•†çš„ä»·æ ¼ï¼Œé€‰æ‹©æ€§ä»·æ¯”æœ€é«˜çš„æ–¹æ¡ˆã€‚</li>
<li>æ€§èƒ½ï¼šæ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„CPUã€å†…å­˜å’Œå­˜å‚¨é…ç½®ã€‚</li>
<li>å¯é æ€§ï¼šäº†è§£æä¾›å•†çš„æ•°æ®ä¸­å¿ƒåˆ†å¸ƒå’Œç½‘ç»œè¿æ¥è´¨é‡ï¼Œç¡®ä¿æ‚¨çš„æœåŠ¡ç¨³å®šå¯é ã€‚</li>
<li>æŠ€æœ¯æ”¯æŒï¼šé€‰æ‹©æä¾›è‰¯å¥½æŠ€æœ¯æ”¯æŒçš„æä¾›å•†ï¼Œä»¥ä¾¿åœ¨é‡åˆ°é—®é¢˜æ—¶èƒ½å¤Ÿå¾—åˆ°åŠæ—¶çš„å¸®åŠ©ã€‚</li>
</ul>
<p>è¿™äº›äº‘æœåŠ¡å™¨æä¾›å•†é’ˆå¯¹ä¸ªäººå’Œä¼ä¸šç”¨æˆ·æœ‰éå¸¸å¤šçš„äº§å“å¯ä¾›æŒ‘é€‰ï¼Œå°¤å…¶æ˜¯å¯¹äºæ–°ç”¨æˆ·ã€å­¦ç”Ÿæ›´æ˜¯æœ‰å¾ˆå¤šä¼˜æƒ ã€‚</p>
<span id="more"></span>
<h1 id="äºŒæ³¨å†Œå’Œè´­ä¹°äº‘æœåŠ¡å™¨">äºŒã€æ³¨å†Œå’Œè´­ä¹°äº‘æœåŠ¡å™¨</h1>
<p>åœ¨é€‰æ‹©å¥½äº‘æœåŠ¡å™¨æä¾›å•†åï¼Œæ‚¨éœ€è¦åœ¨å…¶å®˜æ–¹ç½‘ç«™ä¸Šæ³¨å†Œä¸€ä¸ªè´¦æˆ·å¹¶è´­ä¹°ç›¸åº”çš„äº‘æœåŠ¡å™¨å¥—é¤ã€‚è´­ä¹°è¿‡ç¨‹ä¸­ï¼Œæ‚¨éœ€è¦é€‰æ‹©åˆé€‚çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚Windows
Serveræˆ–Linuxå‘è¡Œç‰ˆï¼‰å’Œæ‰€éœ€çš„ç¡¬ä»¶é…ç½®ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜éœ€è¦è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„ç™»å½•å‡­æ®ï¼ˆå¦‚SSHå¯†é’¥ï¼‰ï¼Œä»¥ä¾¿æ—¥åè¿œç¨‹ç™»å½•å’Œç®¡ç†æœåŠ¡å™¨ã€‚</p>
<p>éœ€è¦çŸ¥é“çš„æ˜¯äº‘æœåŠ¡æä¾›å•†ï¼Œä¸»è¦ç›®æ ‡ç¾¤ä½“è¿˜æ˜¯ä¼ä¸šç”¨æˆ·ï¼Œä¸ªäººç”¨æˆ·ä¸æ€ä¹ˆèµšé’±çš„ã€‚æ‰€ä»¥ä¸ç®¡æ˜¯é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ç­‰ï¼Œä¸ä»…äº§å“ç§ç±»ä¸°å¯Œï¼Œè€Œä¸”ç®¡ç†èµ·æ¥ç›¸å½“å¤æ‚ã€‚å°¤å…¶æ˜¯ç›®å‰å¸¸è§çš„ç§Ÿæˆ·æ¨¡å¼ï¼Œé’ˆå¯¹ä¼ä¸šå’Œç»„ç»‡æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä½†æ˜¯å¯¹äºä¸ªäººæ¥è®²ï¼Œç¡®å®æ²¡ä»€ä¹ˆç”¨ï¼Œè€Œä¸”çœŸçš„å¾ˆéš¾ç”¨ã€‚æˆ‘çš„å»ºè®®æ˜¯åªç”¨ä¸»è´¦å·å°±è¡Œï¼Œä¸€å®šè¦è®¾ç½®å¥½è´¦å·çš„å®‰å…¨è®¾ç½®ï¼Œç»‘å®šå¥½æ‰‹æœºã€é‚®ç®±ç­‰é‡è¦ä¿¡æ¯ã€‚</p>
<h1 id="ä¸‰è¿æ¥åˆ°äº‘æœåŠ¡å™¨">ä¸‰ã€è¿æ¥åˆ°äº‘æœåŠ¡å™¨</h1>
<p>è´­ä¹°æˆåŠŸåï¼Œæ‚¨å¯ä»¥é€šè¿‡äº‘æœåŠ¡å™¨æä¾›å•†æä¾›çš„ç®¡ç†æ§åˆ¶å°è¿æ¥åˆ°æ‚¨çš„äº‘æœåŠ¡å™¨ã€‚å¤§å¤šæ•°æä¾›å•†éƒ½æä¾›äº†å›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼Œæ–¹ä¾¿æ‚¨è½»æ¾åœ°ç®¡ç†å’Œç›‘æ§æœåŠ¡å™¨çŠ¶æ€ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨SSHå®¢æˆ·ç«¯ï¼ˆå¦‚PuTTYï¼‰é€šè¿‡å‘½ä»¤è¡Œæ–¹å¼è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</p>
<h1 id="å››å®‰è£…å’Œé…ç½®è½¯ä»¶">å››ã€å®‰è£…å’Œé…ç½®è½¯ä»¶</h1>
<p>åœ¨è¿æ¥åˆ°äº‘æœåŠ¡å™¨åï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦å®‰è£…å’Œé…ç½®å„ç§è½¯ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦æ‰˜ç®¡ä¸€ä¸ªç½‘ç«™ï¼Œæ‚¨å¯ä»¥å®‰è£…WebæœåŠ¡å™¨ï¼ˆå¦‚Apacheæˆ–Nginxï¼‰å’Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚MySQLæˆ–PostgreSQLï¼‰ã€‚åœ¨å®‰è£…è½¯ä»¶æ—¶ï¼Œè¯·ç¡®ä¿éµå¾ªæœ€ä½³å®è·µï¼Œä»¥ä¿éšœç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚</p>
<h1 id="äº”éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åº">äº”ã€éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åº</h1>
<p>å°†æ‚¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šåï¼Œæ‚¨éœ€è¦å¯¹å…¶è¿›è¡ŒæŒç»­çš„ç®¡ç†å’Œç›‘æ§ã€‚è¿™åŒ…æ‹¬å®šæœŸæ›´æ–°è½¯ä»¶ã€ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µã€å¤‡ä»½æ•°æ®ä»¥åŠå¤„ç†å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚ä¸ºäº†æé«˜è¿ç»´æ•ˆç‡ï¼Œæ‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚Ansibleæˆ–Dockerï¼‰æ¥ç®€åŒ–éƒ¨ç½²å’Œç®¡ç†è¿‡ç¨‹ã€‚</p>
<h1 id="ç¤ºä¾‹">ç¤ºä¾‹</h1>
<p>ä¸‹é¢å°±ä»¥æˆ‘ä»åä¸ºäº‘æœåŠ¡å™¨HECSåˆ°æœŸåˆ°æ–°è´­é˜¿é‡Œäº‘æœåŠ¡å™¨åšäº†å“ªäº›äº‹æƒ…ä¸ºä¾‹å§ã€‚</p>
<p>é¦–å…ˆè®²ä¸€ä¸‹æˆ‘ä½¿ç”¨çš„ç›®çš„ï¼Œä½œä¸ºä¸ªäººå¼€å‘è€…ï¼ŒåŸºç¡€çš„å¼€å‘ç¯å¢ƒæ€»ä¸èƒ½æ˜¯ä¸€ç›´æœ¬åœ°å¯åŠ¨å§ï¼Œå¦‚ï¼šMySQLã€Redisã€Nacosã€RocketMQï¼Œä¹‹åå¯èƒ½è¿˜éœ€è¦Kafkaã€Esï¼Œè¦è¿è¡Œçš„åç«¯æœåŠ¡ä¹Ÿä¸èƒ½æ€»æ˜¯åœ¨æœ¬åœ°å§ï¼Œå‰ç«¯è°ƒè¯•å¥½ï¼Œè¦å¯¹å¤–éœ€è¦æœåŠ¡å™¨å§ï¼æ€»ä¹‹äº‘æœåŠ¡å™¨è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p>
<h2 id="ä¸€å¤‡ä»½">ä¸€ã€å¤‡ä»½</h2>
<p>é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼ï¼ï¼</p>
<p>è®°å¾—å¤‡ä»½ï¼è®°å¾—å¤‡ä»½ï¼è®°å¾—å¤‡ä»½ï¼</p>
<p>å¯¹äºæŒä¹…åŒ–ä¿å­˜çš„é‡è¦æ•°æ®ä¸€å®šè¦è®°å¾—å¤‡ä»½ï¼Œæœ¬äººæœ¬èº«å°±æœ‰äº›å¼ºè¿«ç—‡ï¼Œçˆ±æ•´ç†ä¸œè¥¿ï¼Œæ‚ä¹±çš„ç¯å¢ƒæœ‰ç‚¹è®©äººå´©æºƒï¼Œæˆ‘ä¸æ˜¯å»ºè®®æ‰€æœ‰äººéƒ½æœ‰å¼ºè¿«ç—‡ï¼Œè€Œæ˜¯å»ºè®®æ‰€æœ‰äººéƒ½è¦å­¦ä¼šæ€»ç»“ç»éªŒæ•™è®­ã€‚</p>
<p>å½“æˆ‘çš„åä¸ºäº‘æœåŠ¡å™¨åˆ°æœŸçš„å‰ä¸€å‘¨è¿˜æ˜¯ä¸€ä¸ªæœˆï¼Œåä¸ºå°±ä¼šé€šè¿‡çŸ­ä¿¡å’Œé‚®ç®±çš„æ–¹å¼å‘é€åˆ°æœŸæé†’ï¼Œè®°å¾—å»æŸ¥çœ‹ä¸€ä¸‹ï¼Œçœ‹è‡ªå·±æ˜¯å¦æœ‰ç»­æœŸçš„å¿…è¦ï¼Œç„¶åå°±æ˜¯æ•´ç†ä¸€ä¸‹è¦å¤‡ä»½çš„ä¸œè¥¿ã€‚</p>
<p>å¯¹äºæˆ‘å°±æ˜¯ä¸€ä¸‹å†…å®¹äº†ï¼š</p>
<h3 id="nacosé…ç½®">Nacosé…ç½®</h3>
<p>ç™»å½•nacosæ§åˆ¶å°ï¼Œé…ç½®ç®¡ç†/é…ç½®åˆ—è¡¨/éœ€è¦å¯¼å‡ºçš„å‘½åç©ºé—´ï¼Œé€‰ä¸­éœ€è¦çš„é…ç½®ï¼Œå¯¼å‡ºå³å¯</p>
<h3 id="mysqlæ•°æ®åº“è¡¨ç»“æ„">MySQLæ•°æ®åº“/è¡¨ç»“æ„</h3>
<p>è¿™ä¸ªæ ¹æ®ä½ ä½¿ç”¨çš„MySQLå¯è§†åŒ–å·¥å…·ï¼Œæˆ–ç›´æ¥ä½¿ç”¨mysql
dumpéƒ½è¡Œï¼Œçœ‹è‡ªå·±æ›´ç†Ÿæ‚‰å“ªç§æ–¹å¼å§ï¼Œå¦å¤–ï¼Œæ¨èåœ¨è‡ªå·±åšé¡¹ç›®æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªsqlæ–‡ä»¶å¤¹ï¼Œç”¨æ¥æ”¾æœ¬é¡¹ç›®éœ€è¦çš„SQL
DDL</p>
<h3 id="dockeré•œåƒ">Dockeré•œåƒ</h3>
<p>é™¤äº†å¯¼å‡ºé…ç½®ã€ç»“æ„ã€æ•°æ®çš„æ–¹å¼å¤–ï¼Œå¦‚æœæ­£å¥½ä½ ä½¿ç”¨çš„æ˜¯Dockeré•œåƒçš„æ–¹å¼ï¼Œå¯ä»¥ä¾æ­¤ç”Ÿæˆè‡ªå·±çš„Dockeré•œåƒè¿™æ ·Dockerä¼˜åŠ¿å°±ä½“ç°å‡ºæ¥äº†ï¼Œæ²¡é”™ï¼Œå¾ˆæ£’</p>
<h3 id="ç™»å½•æœåŠ¡å™¨">ç™»å½•æœåŠ¡å™¨</h3>
<p>æœ€åç™»å½•æœåŠ¡å™¨çœ‹æ˜¯å¦è¿˜æœ‰ä»€ä¹ˆé‡è¦çš„æ–‡ä»¶æœ‰é—å¿˜ï¼Œå¾ˆé‡è¦</p>
<h2 id="äºŒåˆ›å»ºæ–°çš„äº‘æœåŠ¡å™¨">äºŒã€åˆ›å»ºæ–°çš„äº‘æœåŠ¡å™¨</h2>
<p><img data-src="https://pic.imgdb.cn/item/65a2547d871b83018a294ab8.png" /></p>
<p>åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸­é€‰æ‹©éœ€è¦çš„äº§å“ï¼Œé…ç½®å¥½éœ€è¦çš„è§„æ ¼åå°±å¯ä»¥ä¸‹å•è´­ä¹°äº†ã€‚</p>
<p>è´­ä¹°å®Œæˆåå¯ä»¥æŸ¥çœ‹è®¢å•ç¡®è®¤æ˜¯å¦æœ‰è¯¯ï¼Œä¹‹ååœ¨æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°å·²è´­ä¹°çš„èµ„æºäº†</p>
<p><img data-src="https://pic.imgdb.cn/item/65a2547e871b83018a294e44.png" /></p>
<p>åœ¨ECSç®¡ç†å°å¯ä»¥ç®¡ç†ECSæœåŠ¡å™¨çš„æ‰€æœ‰ä¸œè¥¿ï¼Œåˆå§‹åŒ–çš„ECSæœåŠ¡å™¨æ˜¯éœ€è¦é‡ç½®å¯†ç çš„ï¼Œé‡è¦æé†’ï¼ï¼ï¼å¯†ç ä¸€å®šè¦å¤æ‚çš„ï¼Œæœ€å¥½æ˜¯åŒ…å«å¤§å°å†™å­—æ¯+æ•°å­—+ç‰¹æ®Šå­—ç¬¦çš„ï¼Œä¸€å®šè¦å¤æ‚ï¼Œä¹‹åæˆ‘ä¼šä»æˆ‘çš„è¡€æ³ªæ•™è®­å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆã€‚å¦å¤–ä¹Ÿå¯ä»¥è®¾ç½®é€šè¿‡å¯†é’¥çš„æ–¹å¼è¿æ¥ï¼Œä¹Ÿæ˜¯å¾ˆä¸é”™çš„ã€‚äº‘æœåŠ¡å™¨-ç½‘ç»œä¸å®‰å…¨-å¯†é’¥å¯¹ï¼Œåˆ›å»ºå¯†é’¥-å…³è”èµ„æº-ä¸‹è½½å°±å¥½äº†ï¼Œä¹‹ååœ¨SSHè¿æ¥æ—¶ä½¿ç”¨å°±å¥½ã€‚</p>
<h2 id="ä¸‰è¿æ¥åˆ°äº‘æœåŠ¡å™¨-1">ä¸‰ã€è¿æ¥åˆ°äº‘æœåŠ¡å™¨</h2>
<p>å‰é¢éƒ½åšå¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿æ¥åˆ°äº‘æœåŠ¡å™¨äº†ï¼Œå½“ç„¶é˜¿é‡Œäº‘æœ¬èº«ä¹Ÿæä¾›äº†webç«¯è¿æ¥æ–¹å¼ï¼Œä¸è¿‡æˆ‘æ˜¯ä¹ æƒ¯äº†ä½¿ç”¨æœ¬åœ°çš„SSHå·¥å…·ï¼Œå·¥å…·ä¸Šä¸å¿…çº ç»“ï¼Œé¡ºæ‰‹ä¹ æƒ¯å°±è¡Œã€‚</p>
<p>æˆ‘Macç”µè„‘ä½¿ç”¨çš„Tabbyï¼Œè¿æ¥ä¸ŠæœåŠ¡å™¨æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯å°±ä¸å¤šè®²äº†ï¼Œä¸‹é¢æ‰æ˜¯é‡ç‚¹ã€‚</p>
<h2 id="å››å®‰è£…å’Œé…ç½®è½¯ä»¶-1">å››ã€å®‰è£…å’Œé…ç½®è½¯ä»¶</h2>
<p>ç®€å•çš„ç›´æ¥æ ¹æ®ECSæä¾›çš„å®‰è£…Dockerçš„æ–‡æ¡£ä¸€æ­¥æ­¥æ“ä½œå°±å¥½äº†</p>
<h3 id="å®‰è£…jdk">å®‰è£…JDK</h3>
<p><a
href="https://help.aliyun.com/zh/ecs/use-cases/manually-deploy-a-java-web-environment-on-an-instance-that-runs-alibaba-cloud-linux?spm=a2c4g.11186623.0.i7">å¦‚ä½•éƒ¨ç½²Java
Webç¯å¢ƒ_äº‘æœåŠ¡å™¨ ECS(ECS)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ</a></p>
<h3 id="å®‰è£…docker">å®‰è£…Docker</h3>
<p><a
href="https://help.aliyun.com/zh/ecs/use-cases/deploy-and-use-docker-on-alibaba-cloud-linux-2-instances">å®‰è£…Dockerå¹¶ä½¿ç”¨_äº‘æœåŠ¡å™¨
ECS(ECS)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ</a></p>
<h3 id="å®‰è£…mysql">å®‰è£…MySQL</h3>
<p>è¿™é‡Œå†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œä¸€å®šè¦é‡è§†rootç”¨æˆ·ï¼Œè¿™æ˜¯æ‰€æœ‰è½¯ä»¶ä¸­æœ€é‡è¦çš„ç”¨æˆ·ï¼Œå¯¹äºrootç”¨æˆ·ä¸èƒ½æœ‰åŠç‚¹ä¿¡æ¯æ³„æ¼ã€‚éå¸¸å»ºè®®åˆ›å»ºä¸“é—¨çš„æ•°æ®åº“ç”¨æˆ·ï¼Œå¯†ç ä¹Ÿæ˜¯è¦ç²¾å¿ƒè®¾ç½®çš„ï¼Œåªå…è®¸érootç”¨æˆ·è¿œç¨‹è¿æ¥æ•°æ®åº“ï¼Œrootç”¨æˆ·åªèƒ½åœ¨æœåŠ¡å™¨ä¸Šæ“ä½œæ•°æ®åº“ï¼Œè¿™å¾ˆé‡è¦ï¼ï¼ï¼</p>
<p><a
href="https://help.aliyun.com/zh/ecs/use-cases/manually-deploy-mysql-on-an-ecs-instance-that-runs-centos">å®‰è£…MySQLæ•°æ®åº“_äº‘æœåŠ¡å™¨
ECS(ECS)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ</a></p>
<h3 id="å®‰è£…redis">å®‰è£…Redis</h3>
<p><a
href="https://help.aliyun.com/zh/ecs/user-guide/deploy-redis-on-persistent-memory-optimized-instances">å¦‚ä½•åœ¨é…å¤‡æŒä¹…å†…å­˜çš„å®ä¾‹ä¸Šéƒ¨ç½²Redisåº”ç”¨_äº‘æœåŠ¡å™¨
ECS(ECS)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ</a></p>
<p>è¿™é‡Œæˆ‘å®‰è£…çš„æ—¶å€™å¥½åƒæ˜¯æœ‰ç‚¹é—®é¢˜çš„ï¼Œå…¶ä»–çš„å®‰è£…æ–¹å¼æˆ‘ä¹Ÿä¼šå†™åšå®¢è¡¥å……çš„ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<h3 id="å®‰è£…nacos">å®‰è£…Nacos</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run --name nacos2.2 -e MODE=standalone -e JVM_XMS=128m -e JVM_XMX=128m  -p 8848:8848 -p 9848:9848 -d nacos/nacos-server:v2.2.0</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘å¯¹Nacosçš„è¦æ±‚æ¯”è¾ƒä½ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯Dockeræ–¹å¼å•æœºéƒ¨ç½²è€Œä¸”è®¾ç½®çš„å†…å­˜å¾ˆå°ï¼Œå¤§å®¶æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥ã€‚</p>
<h2 id="äº”åº”ç”¨ç¨‹åº">äº”ã€åº”ç”¨ç¨‹åº</h2>
<p>æœ‰äº†éœ€è¦çš„è½¯ä»¶ç¯å¢ƒï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†ã€‚</p>
<p>æœ‰devopséœ€è¦çš„å¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€‚</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‘æœåŠ¡å¼€å¹´ç¦åˆ©</title>
    <url>/article/acbbcd77.html</url>
    <content><![CDATA[<h1 id="èµ·å› ">èµ·å› </h1>
<p>å› ä¸ºä¹‹å‰ç”¨è¿‡åä¸ºäº‘å˜›ï¼Œç™½å«–çš„ä¸€ä¸ªæœˆğŸ¶</p>
<p>ä½¿ç”¨äº†åä¸ºäº‘çš„æœåŠ¡å™¨ï¼Œé€‰çš„<code>CentOS7</code>ï¼Œé‚£æ—¶å€™ä¸»è¦ç”¨æ¥å­¦ä¹ <code>Linux</code></p>
<p>æ‰€ä»¥å‰ä¸ä¹…æ”¶åˆ°äº†åä¸ºäº‘å¼€å¹´äº‘ç¦åˆ©çš„é‚®ä»¶å’ŒçŸ­ä¿¡</p>
<span id="more"></span>
<h1 id="å¯ä»¥ä¸€è¯•">å¯ä»¥ä¸€è¯•</h1>
<p>https://activity.huaweicloud.com/newyear_promotion/index.html</p>
<p>ç‚¹å¼€ï¼Œç¬¬ä¸€çœ¼å°±çœ‹åˆ°äº†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.1xwr7zuivzi8.webp"
alt="1C2Gäº‘æœåŠ¡å™¨" />
<figcaption aria-hidden="true">1C2Gäº‘æœåŠ¡å™¨</figcaption>
</figure>
<p>è¿™ä¸ª<code>1C2G</code>çš„äº‘æœåŠ¡å™¨å¯¹æˆ‘æ¥è¯´æ˜¯æ¯”è¾ƒæœ‰å¸å¼•åŠ›çš„ï¼Œè€Œä¸”é¦–å¹´35/å¹´ï¼ï¼ï¼</p>
<p>ç®€ç›´äº†ï¼Œ35å—ç”¨ä¸€å¹´ï¼Œé‚£å¯å¤ªçˆ½äº†</p>
<p>ç¬¬ä¸€å¤©ç‚¹è¿›å»å·²ç»æŠ¢æ²¡äº†ï¼Œä¸è¿‡æ¯å¤©éƒ½æœ‰æœºä¼š</p>
<p>ç„¶åï¼Œæˆ‘å°±æƒ³æ‰¾ä¸ªæœºä¼šæ‹¿ä¸‹ä¸€ä¸ªï¼Œä¸è¿‡å¯èƒ½éœ€è¦ä¸€ä¸ªæ—¶æœºï¼Œå› ä¸ºç°åœ¨ç¡®å®ä¸é€‚åˆå…¥æ‰‹ï¼Œæ²¡æœ‰æƒ³å¥½æ‹¿ä¸‹ååšä»€ä¹ˆ</p>
<p>ä¹‹ååˆæœ‰ä¸€ä¸ªå¶ç„¶çš„æœºä¼šï¼ŒæŸ¥äº†æŸ¥é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€ç™¾åº¦äº‘ç­‰</p>
<p>å‘ç°ï¼ŒåŸæ¥è¿™äº›å¤§å‚è¿™ä¸ªæ—¶é—´éƒ½æ¨å‡ºäº‘æœåŠ¡å¼€å¹´ç¦åˆ©</p>
<p>å¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œåº”è¯¥æ¯å¹´éƒ½æœ‰</p>
<p>ä¸è¿‡è¿™æ¬¡å› ä¸ºæˆ‘å‚ä¸æ‰€ä»¥å®ƒå­˜åœ¨äº†</p>
<h1 id="ç»“">ç»“</h1>
<p>å¦‚æœæœ‰å…´è¶£çš„è¯ï¼Œéå¸¸æ¨èè¿™ä¸ªå¼€å¹´ç¦åˆ©ï¼Œé¦–å¹´æ‰ä¸åˆ°40ï¼ŒçœŸçš„å¾ˆå€¼</p>
<p>æœ€åå¦‚æœç¼ºå°‘<code>SSH</code>å·¥å…·ï¼ˆ<code>Windows</code>å¹³å°ï¼‰ï¼Œéå¸¸æ¨èhttps://mobaxterm.mobatek.net/</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>äººç±»ç¡®å®ä¸å¦‚åŠ¨ç‰©æœ‰è¡€æ€§</title>
    <url>/article/7b6feb78.html</url>
    <content><![CDATA[<p>æœ€è¿‘çœ‹åˆ°ä¸€åˆ™æœ‰å…³å¤§è±¡ğŸ˜å› è¢«è¿«å·¥ä½œæ€’å°†å…¶ä¸»äººæ€æ­»çš„æ–°é—»ï¼Œæƒ³å°±æ­¤è°ˆä¸€è°ˆã€‚</p>
<p>ç‚¹å¼€æ–°é—»ï¼ŒåŸæ¥æ˜¯ç‚ç‚å¤æ—¥ä¸‹ï¼Œä¸»äººå¼ºè¿«å¤§è±¡ğŸ˜åœ¨æ©¡èƒ¶å›­å†…æ¬è¿æœ¨æå¯¼è‡´å¤§è±¡ä¸å ªå¿å—ï¼Œâ€œå‘ç–¯â€ï¼Œç”¨è±¡ç‰™å°†å…¶ä¸»äººæ€æ­»ã€‚</p>
<p>å½“æ—¶æ„Ÿæ…¨çš„ä¸€å¥ï¼Œâ€œäººç±»ç¡®å®ä¸å¦‚åŠ¨ç‰©æœ‰è¡€æ€§â€ã€‚æ—¢æ˜¯è¯´åŠ¨ç‰©æ¯”äººç±»è±å¾—å‡ºå»ï¼Œèƒ½åœ¨é‡å‹ä¸‹ç›´æ¥è¿›è¡ŒåæŠ—ï¼Œä¸åƒäººç±»ï¼Œåœ¨ç”Ÿæ´»çš„é‡å‹ä¸‹ï¼Œè¿˜è¦æƒ³ä¸€æƒ³å®¶äººæœ‹å‹ï¼Œæˆ–æ˜¯å…¶ä»–çš„ä»€ä¹ˆç‰µæŒ‚ï¼Œæ˜¯å°‘ä¸€äº›è¡€æ€§ï¼›åˆæ˜¯è¯´äººç±»å’ŒåŠ¨ç‰©å¥½åƒæ˜¯æ¢äº†èº«ä»½ï¼ŒåŠ¨ç‰©ä¸å†æ˜¯æˆ‘ä»¬å°è±¡ä¸­å‡¶æ®‹å†·è¡€çš„åŠ¨ç‰©ï¼Œæ›´åƒæ˜¯æˆ‘ä»¬è‡ªè®¤ä¸ºé«˜è´µçš„è‡ªå·±ï¼Œä»–ï¼Œè¢«æŸç¼šï¼Œè¢«è¦æ±‚ä¸ºå®ƒä»¬å·¥ä½œï¼ŒåŒæ—¶æˆ‘ä»¬äººç±»ä¹Ÿä¸æ˜¯é«˜è´µçš„è‡ªå·±ï¼Œæ›´åƒæ˜¯çœ¼é‡Œç§ä¸èµ·çš„ä½çº§ç”Ÿç‰©ï¼Œå®ƒï¼Œå¼ºè¿«ä»–ä»¬å·¥ä½œï¼Œä¸ºäº†ä¸ªäººåˆ©ç›Šï¼Œè¿™æ ·ä¸€æƒ³ï¼ŒåŠ¨ç‰©è¿˜æ˜¯æœ‰æ¸©å­˜çš„è¡€æ€§ï¼Œå¿å—æˆ‘ä»¬çš„å‹è¿«ï¼Œè€Œæˆ‘ä»¬å´æ²¡æœ‰è¯¥æœ‰çš„è¡€æ€§ï¼Œåªä¼šä¸ºè‡ªå·±æƒ³ã€‚</p>
<span id="more"></span>
<p>ç°åœ¨è¯´æ˜¯ä¿æŠ¤ç¯å¢ƒï¼Œä¿æŠ¤åœ°çƒç”Ÿç‰©ï¼Œç»´æŠ¤ç”Ÿæ€å¹³è¡¡ï¼Œç¢³å¹³è¡¡ã€‚åˆ°ç°åœ¨éƒ½æˆäº†æ”¿æ²»ã€èˆ†è®ºã€é“å¾·æ“ä½œæ‰‹æ®µäº†ã€‚å’Œè°åœ°çƒï¼Œç”Ÿç‰©å…±å­˜ï¼Œä¹Ÿæœ‰ç‚¹åªæ˜¯å£å·çš„æ„å‘³äº†ã€‚äººç±»å°±æ˜¯å¤©æ€§è¶Šæ¥è¶Šå°‘äº†ï¼Œâ€œäººæ€§â€è¶Šæ¥è¶Šé‡äº†ã€‚</p>
<p>ç»“åˆæœ€è¿‘é…·æš‘ç‚ç‚çš„å¤©æ°”ï¼Œæƒ³æƒ³äººç±»ç–¯ç‹‚å‘å±•çš„è¿›ç¨‹ï¼Œåœ°çƒã€åœ°çƒçš„ç”Ÿç‰©éƒ½åœ¨æ¥å—ä¸¥å³»çš„è€ƒéªŒã€‚å¦‚æœç¡¬è¯´è¿™å°±æ˜¯â€œç‰©ç«å¤©æ‹©ï¼Œé€‚è€…ç”Ÿå­˜â€ï¼Œåœ°çƒå†å²å‘å±•çš„å¿…ç„¶ï¼Œé‚£æˆ‘ä¹Ÿæ²¡ä»€ä¹ˆå¯è¯´äº†ã€‚</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=38018486&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¼˜å…ˆé˜Ÿåˆ—</title>
    <url>/article/602ee0a8.html</url>
    <content><![CDATA[<p>è®¸å¤šåº”ç”¨ç¨‹åºéƒ½éœ€è¦å¤„ç†æœ‰åºçš„å…ƒç´ ï¼Œä½†ä¸ä¸€å®šè¦æ±‚å®ƒä»¬å…¨éƒ¨æœ‰åºï¼Œæˆ–æ˜¯ä¸ä¸€å®šè¦ä¸€æ¬¡å°±å°†å®ƒä»¬æ’åºã€‚å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¼šæ”¶é›†äº›å…ƒç´ ï¼Œå¤„ç†å½“å‰é”®å€¼æœ€å¤§çš„å…ƒç´ ï¼Œç„¶åå†æ”¶é›†æ›´å¤šçš„å…ƒç´ ï¼Œå†å¤„ç†å½“å‰é”®å€¼æœ€å¤§çš„å…ƒç´ ï¼Œå¦‚æ­¤è¿™èˆ¬ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€å°èƒ½å¤ŸåŒæ—¶è¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºçš„ç”µè„‘(æˆ–è€…æ‰‹æœº)ã€‚è¿™æ˜¯é€šè¿‡ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºçš„äº‹ä»¶åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œå¹¶æ€»æ˜¯å¤„ç†ä¸‹ä¸€ä¸ªä¼˜å…ˆçº§æœ€é«˜çš„äº‹ä»¶æ¥å®ç°çš„ã€‚ä¾‹å¦‚ï¼Œç»å¤§å¤šæ•°æ‰‹æœºåˆ†é…ç»™æ¥ç”µçš„ä¼˜å…ˆçº§éƒ½ä¼šæ¯”æ¸¸æˆç¨‹åºçš„é«˜ã€‚</p>
<span id="more"></span>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåˆé€‚çš„æ•°æ®ç»“æ„åº”è¯¥æ”¯æŒä¸¤ç§æ“ä½œ:
åˆ é™¤æœ€å¤§å…ƒç´ å’Œæ’å…¥å…ƒç´ ã€‚è¿™ç§æ•°æ®ç±»å‹å«åšä¼˜å…ˆé˜Ÿåˆ—ã€‚ä¼˜å…ˆé˜Ÿåˆ—çš„ä½¿ç”¨å’Œé˜Ÿåˆ—ï¼ˆåˆ é™¤æœ€è€çš„å…ƒç´ ï¼‰ä»¥åŠæ ˆï¼ˆåˆ é™¤æœ€æ–°çš„å…ƒç´ ï¼‰ç±»ä¼¼ï¼Œä½†é«˜æ•ˆåœ°å®ç°å®ƒåˆ™æ›´æœ‰æŒ‘æˆ˜æ€§ã€‚</p>
<p><a
href="https://wnhyang.github.io/article/a444b428.html">ç›®å½•</a></p>
<h1 id="api">API</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/pq-api.png"
alt="æ³›å‹ä¼˜å…ˆé˜Ÿåˆ—çš„API" />
<figcaption aria-hidden="true">æ³›å‹ä¼˜å…ˆé˜Ÿåˆ—çš„API</figcaption>
</figure>
<h1 id="åˆçº§å®ç°">åˆçº§å®ç°</h1>
<h1 id="æ•°ç»„å®ç°æ— åº">æ•°ç»„å®ç°ï¼ˆæ— åºï¼‰</h1>
<h1 id="æ•°ç»„å®ç°æœ‰åº">æ•°ç»„å®ç°ï¼ˆæœ‰åºï¼‰</h1>
<h1 id="é“¾è¡¨è¡¨ç¤ºæ³•">é“¾è¡¨è¡¨ç¤ºæ³•</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/pq-array.png"
alt="åœ¨ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸Šæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œ" />
<figcaption
aria-hidden="true">åœ¨ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸Šæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œ</figcaption>
</figure>
<h1 id="å †çš„å®šä¹‰">å †çš„å®šä¹‰</h1>
<p>æ•°æ®ç»“æ„äºŒå‰å †èƒ½å¤Ÿå¾ˆå¥½åœ°å®ç°ä¼˜å…ˆé˜Ÿåˆ—çš„åŸºæœ¬æ“ä½œã€‚åœ¨äºŒå‰å †çš„æ•°ç»„ä¸­ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è¦ä¿è¯å¤§äºç­‰äºå¦ä¸¤ä¸ªç‰¹å®šä½ç½®çš„å…ƒç´ ã€‚ç›¸åº”åœ°ï¼Œè¿™äº›ä½ç½®çš„å…ƒç´ åˆè‡³å°‘è¦å¤§äºç­‰äºæ•°ç»„ä¸­çš„å¦ä¸¤ä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰å…ƒç´ ç”»æˆä¸€æ£µäºŒå‰æ ‘ï¼Œå°†æ¯ä¸ªè¾ƒå¤§å…ƒç´ å’Œä¸¤ä¸ªè¾ƒå°çš„å…ƒç´ ç”¨è¾¹è¿æ¥å°±å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºè¿™ç§ç»“æ„ã€‚</p>
<p>å®šä¹‰ã€‚å½“ä¸€æ£µäºŒåˆæ ‘çš„æ¯ä¸ªç»“ç‚¹éƒ½å¤§äºç­‰äºå®ƒçš„ä¸¤ä¸ªå­ç»“ç‚¹æ—¶ï¼Œå®ƒè¢«ç§°ä¸ºå †æœ‰åºã€‚</p>
<p>ç›¸åº”åœ°ï¼Œåœ¨å †æœ‰åºçš„äºŒå‰æ ‘ä¸­ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½å°äºç­‰äºå®ƒçš„çˆ¶ç»“ç‚¹(å¦‚æœæœ‰çš„è¯)ã€‚ä»ä»»æ„ç»“ç‚¹å‘ä¸Šï¼Œæˆ‘ä»¬éƒ½èƒ½å¾—åˆ°ä¸€åˆ—éé€’å‡çš„å…ƒç´ ;ä»ä»»æ„ç»“ç‚¹å‘ä¸‹ï¼Œæˆ‘ä»¬éƒ½èƒ½å¾—åˆ°ä¸€åˆ—éé€’å¢çš„å…ƒç´ ã€‚
ç‰¹åˆ«åœ°:æ ¹ç»“ç‚¹æ˜¯å †æœ‰åºçš„äºŒå‰æ ‘ä¸­çš„æœ€å¤§ç»“ç‚¹ã€‚</p>
<h1 id="äºŒå‰å †è¡¨ç¤ºæ³•">äºŒå‰å †è¡¨ç¤ºæ³•</h1>
<p>å¦‚æœæˆ‘ä»¬ç”¨æŒ‡é’ˆæ¥è¡¨ç¤ºå †æœ‰åºçš„äºŒå‰æ ‘ï¼Œé‚£ä¹ˆæ¯ä¸ªå…ƒç´ éƒ½éœ€è¦ä¸‰ä¸ªæŒ‡é’ˆæ¥æ‰¾åˆ°å®ƒçš„ä¸Šä¸‹ç»“ç‚¹ï¼ˆçˆ¶ç»“ç‚¹å’Œä¸¤ä¸ªå­ç»“ç‚¹å„éœ€è¦ä¸€ä¸ªï¼‰ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/heap.png"
alt="ä¸€é¢—å †æœ‰åºçš„å®Œå…¨äºŒå‰æ ‘" />
<figcaption aria-hidden="true">ä¸€é¢—å †æœ‰åºçš„å®Œå…¨äºŒå‰æ ‘</figcaption>
</figure>
<p>äºŒå‰å †æ˜¯ä¸€ç»„èƒ½å¤Ÿç”¨å †æœ‰åºçš„å®Œå…¨äºŒåˆæ ‘æ’åºçš„å…ƒç´ ï¼Œå¹¶åœ¨æ•°ç»„ä¸­æŒ‰ç…§å±‚çº§å‚¨å­˜(ä¸ä½¿ç”¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®)ã€‚</p>
<p>ä¸€æ£µå¤§å°ä¸º<span
class="math inline">\(N\)</span>çš„å®Œå…¨äºŒå‰æ ‘çš„é«˜åº¦ä¸º<span
class="math inline">\([LgN]\)</span>ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/heap-representations.png"
alt="å †çš„è¡¨ç¤º" />
<figcaption aria-hidden="true">å †çš„è¡¨ç¤º</figcaption>
</figure>
<h1 id="å †çš„ç®—æ³•">å †çš„ç®—æ³•</h1>
<p>å †å®ç°çš„æ¯”è¾ƒå’Œäº¤æ¢æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">less</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> pq[i].compareTo(pq[j]) &lt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">exch</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="type">Key</span> <span class="variable">t</span> <span class="operator">=</span> pq[i];</span><br><span class="line">    pq[i] = pq[j];</span><br><span class="line">    pq[j] = t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç”±ä¸‹è‡³ä¸Šçš„å †æœ‰åºåŒ–ä¸Šæµ®">ç”±ä¸‹è‡³ä¸Šçš„å †æœ‰åºåŒ–ï¼ˆä¸Šæµ®ï¼‰</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swin</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k / <span class="number">2</span>, k)) &#123;</span><br><span class="line">        exch(k / <span class="number">2</span>, k);</span><br><span class="line">        k = k / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/swim.png"
alt="ç”±ä¸‹è‡³ä¸Šçš„å †æœ‰åºåŒ–ï¼ˆä¸Šæµ®ï¼‰" />
<figcaption aria-hidden="true">ç”±ä¸‹è‡³ä¸Šçš„å †æœ‰åºåŒ–ï¼ˆä¸Šæµ®ï¼‰</figcaption>
</figure>
<h1 id="ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ä¸‹æ²‰">ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sink</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">2</span> * k &lt;= n) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span> * k;</span><br><span class="line">        <span class="keyword">if</span> (j &lt; n &amp;&amp; less(j, j + <span class="number">1</span>)) j++;</span><br><span class="line">        <span class="keyword">if</span> (!less(k, j)) <span class="keyword">break</span>;</span><br><span class="line">        exch(k, j);</span><br><span class="line">        k = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/sink.png"
alt="ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰" />
<figcaption aria-hidden="true">ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰</figcaption>
</figure>
<h1 id="åŸºäºå †çš„ä¼˜å…ˆé˜Ÿåˆ—">åŸºäºå †çš„ä¼˜å…ˆé˜Ÿåˆ—</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/heap-ops.png"
alt="å †çš„æ“ä½œ" />
<figcaption aria-hidden="true">å †çš„æ“ä½œ</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxPQ</span>&lt;Key <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;Key&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Key[] pq;   <span class="comment">//åŸºäºå †çš„å®Œå…¨äºŒå‰æ ‘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">//å­˜å‚¨äºpq[1..n]ä¸­ï¼Œpq[0]æ²¡æœ‰ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxPQ</span><span class="params">(<span class="type">int</span> maxn)</span> &#123;</span><br><span class="line">        pq = (Key[]) <span class="keyword">new</span> <span class="title class_">Comparable</span>[maxn + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Key v)</span> &#123;</span><br><span class="line">        pq[++n] = v;</span><br><span class="line">        swin(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Key <span class="title function_">delMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Key</span> <span class="variable">max</span> <span class="operator">=</span> pq[<span class="number">1</span>];</span><br><span class="line">        exch(<span class="number">1</span>, n--);</span><br><span class="line">        pq[n + <span class="number">1</span>] = <span class="literal">null</span>;</span><br><span class="line">        sink(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¾…åŠ©æ–¹æ³•çš„å®ç°è§å‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">less</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">exch</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swin</span><span class="params">(<span class="type">int</span> k)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sink</span><span class="params">(<span class="type">int</span> k)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/heap-pq.png"
alt="ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰" />
<figcaption aria-hidden="true">ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰</figcaption>
</figure>
<h1 id="å¤šå‰å †">å¤šå‰å †</h1>
<h1 id="è°ƒæ•´æ•°ç»„å¤§å°">è°ƒæ•´æ•°ç»„å¤§å°</h1>
<h1 id="å…ƒç´ çš„ä¸å¯å˜æ€§">å…ƒç´ çš„ä¸å¯å˜æ€§</h1>
<h1 id="ç´¢å¼•ä¼˜å…ˆé˜Ÿåˆ—">ç´¢å¼•ä¼˜å…ˆé˜Ÿåˆ—</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/indexpq-api.png"
alt="ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰" />
<figcaption aria-hidden="true">ç”±ä¸Šè‡³ä¸‹çš„å †æœ‰åºåŒ–ï¼ˆä¸‹æ²‰ï¼‰</figcaption>
</figure>
<h1 id="ç´¢å¼•ä¼˜å…ˆé˜Ÿåˆ—ç”¨ä¾‹">ç´¢å¼•ä¼˜å…ˆé˜Ÿåˆ—ç”¨ä¾‹</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Multiway</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(In[] streams)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> streams.length;</span><br><span class="line">        IndexMinPQ&lt;String&gt; pq = <span class="keyword">new</span> <span class="title class_">IndexMinPQ</span>&lt;String&gt;(n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">if</span> (!streams[i].isEmpty())</span><br><span class="line">                pq.insert(i, streams[i].readString());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!pq.isEmpty()) &#123;</span><br><span class="line">            StdOut.print(pq.minKey() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> pq.delMin();</span><br><span class="line">            <span class="keyword">if</span> (!streams[i].isEmpty())</span><br><span class="line">                pq.insert(i, streams[i].readString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> args.length;</span><br><span class="line">        In[] streams = <span class="keyword">new</span> <span class="title class_">In</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            streams[i] = <span class="keyword">new</span> <span class="title class_">In</span>(args[i]);</span><br><span class="line">        merge(streams);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å †æ’åº">å †æ’åº</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span>&#123;</span><br><span class="line">    <span class="type">int</span> n=a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k=n/<span class="number">2</span>;k&gt;=<span class="number">1</span>;k--)</span><br><span class="line">        sink(a,k,n);</span><br><span class="line">    <span class="keyword">while</span> (n&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        exch(a,<span class="number">1</span>,n--);</span><br><span class="line">        sink(a,<span class="number">1</span>,n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ç”¨sink()æ–¹æ³•å°†a[1]åˆ°a[N]çš„å…ƒç´ æ’åº(sink()è¢«ä¿®æ”¹è¿‡ï¼Œä»¥a[]å’ŒNä½œä¸ºå‚æ•°)ã€‚forå¾ªç¯æ„é€ äº†å †ï¼Œç„¶åwhileå¾ªç¯å°†æœ€å¤§çš„å…ƒç´ a[1]å’Œa[N]äº¤æ¢å¹¶ä¿®å¤äº†å †ï¼Œå¦‚æ­¤é‡å¤ç›´åˆ°å †å˜ç©ºã€‚å°†exch()å’Œless()çš„å®ç°ä¸­çš„ç´¢å¼•å‡ä¸€å³å¯å¾—åˆ°å’Œå…¶ä»–æ’åºç®—æ³•ä¸€è‡´çš„å®ç°(å°†a[0]è‡³a[N-1]æ’åº)ã€‚å †æ’åºå…·ä½“æµç¨‹ç¤ºæ„å›¾æ˜¾ç¤ºåœ¨ä¸‹å›¾ä¸­ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/heapsort.png"
alt="å †æ’åºçš„è½¨è¿¹ï¼ˆæ¯æ¬¡ä¸‹æ²‰åæ•°ç»„å†…å®¹ï¼‰" />
<figcaption
aria-hidden="true">å †æ’åºçš„è½¨è¿¹ï¼ˆæ¯æ¬¡ä¸‹æ²‰åæ•°ç»„å†…å®¹ï¼‰</figcaption>
</figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/heapsort-trace.png"
alt="å †æ’åºï¼šå †çš„æ„é€ ï¼ˆå·¦ï¼‰å’Œä¸‹æ²‰æ’åºï¼ˆå³ï¼‰" />
<figcaption
aria-hidden="true">å †æ’åºï¼šå †çš„æ„é€ ï¼ˆå·¦ï¼‰å’Œä¸‹æ²‰æ’åºï¼ˆå³ï¼‰</figcaption>
</figure>
<h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1>
<p>ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ç¬¬äºŒç« æ’åº2.3å¿«é€Ÿæ’åº</p>
<p><a href="https://algs4.cs.princeton.edu/">æœ¬ä¹¦ç½‘ç«™</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨äº†æ™ºèƒ½è¡¨æ ¼åï¼Œä¸ç¦æ„Ÿå¹ç°åœ¨çš„ç”Ÿäº§åŠ›å·¥å…·çœŸç‰›ï¼</title>
    <url>/article/a2229281.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>åŠå…¬ä¸‰ä»¶å¥—ï¼Œæˆ‘æƒ³ä¸ä¼šæœ‰äººæ²¡ç”¨è¿‡å§ï¼Œå¦‚æœä½ è¿˜åœç•™åœ¨ç®€å•ç¼–è¾‘ã€å¥—æ¨¡ç‰ˆçš„çš„åŠå…¬ä¸‰ä»¶å¥—æ—¶ä»£ï¼Œé‚£åªèƒ½è¯´ä½ çœŸçš„outäº†ï¼</p>
<p>è¿™å‘¨å› ä¸ºä¸€äº›å·¥ä½œä¸Šçš„éœ€è¦ï¼Œæ‰“å¼€WPSåˆ›å»ºå¹¶ä½¿ç”¨äº†ä¸€ä¸‹æ™ºèƒ½è¡¨æ ¼ï¼Œä¸ç”¨ä¸çŸ¥é“ï¼Œä½¿ç”¨åå±å®æ˜¯æŠŠæˆ‘æƒŠåˆ°äº†ã€‚</p>
<h1 id="æ™ºèƒ½è¡¨æ ¼">æ™ºèƒ½è¡¨æ ¼</h1>
<p>ç‰¹æ€§ï¼š</p>
<ul>
<li>å¤šäººåä½œï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®ä¸ç®—æ˜¯ç‰¹æ€§çš„ï¼Œå› ä¸ºç»å¤§å¤šæ•°è¡¨æ ¼éƒ½å¯ä»¥åšåˆ°</li>
<li>ç®€å•çš„åœ¨çº¿æ•°æ®åº“ï¼Œé«˜æ•ˆçš„ç®¡ç†æ•°æ®</li>
<li>æ­ç§¯æœ¨ä¸€æ ·å»ºåº”ç”¨ï¼Œæ¯ä¸ªäººéƒ½ä¼šç”¨</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šä»æ¨¡ç‰ˆå’Œè‡ªå·±çš„å®è·µä¸Šé‡ç‚¹ä»‹ç»åä¸¤ç‚¹ï¼</p>
<span id="more"></span>
<h1 id="æ¨¡ç‰ˆåˆ›å»º">æ¨¡ç‰ˆåˆ›å»º</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.pf2vii0bx.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>åºŸè¯ä¸å¤šè®²ï¼Œç›´æ¥ä»æ¨¡ç‰ˆæ¥çœ‹ï¼Œè¿™é‡Œé€‰æ‹©â€œå›¢é˜Ÿä»»åŠ¡é¡¹ç›®ç®¡ç†çœ‹æ¿â€ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.9gwb8bnu3n.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°ä¸‹é¢æœ‰5ä¸ª<code>sheet</code>ï¼Œæ ¹æ®å›¾æ ‡å¯çŸ¥å…¶å®æœ‰åŒºåˆ«çš„ï¼Œå¯ä»¥é€šè¿‡æœ€å³è¾¹çš„æ–°å»º<code>sheet</code>çœ‹å‡ºï¼Œæ¨¡ç‰ˆé‡Œæ˜¯ç”±1ä¸ªæ•°æ®è¡¨å’Œ4ä¸ªåº”ç”¨æ„æˆçš„ã€‚æ­¤æ•°æ®è¡¨å’Œåº”ç”¨å°±æ˜¯å‰é¢æåˆ°çš„â€œç®€å•çš„åœ¨çº¿æ•°æ®åº“ï¼Œé«˜æ•ˆçš„ç®¡ç†æ•°æ®â€å’Œâ€œæ­ç§¯æœ¨ä¸€æ ·å»ºåº”ç”¨ï¼Œæ¯ä¸ªäººéƒ½ä¼šç”¨â€ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.8s31ob2l4c.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h1 id="æ•°æ®è¡¨">æ•°æ®è¡¨</h1>
<p>é¦–å…ˆä»æ¨¡ç‰ˆç¬¬ä¸€ä¸ª<code>sheet</code>æ¥çœ‹ï¼Œä¹Ÿå°±æ˜¯æ•°æ®è¡¨ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.58h3yi5fmi.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>å…¶å®å®ƒå’Œæ™®é€šçš„è¡¨æ ¼åŒºåˆ«ä¸æ˜¯éå¸¸å¤§ï¼Œä¸€çœ¼çœ‹å»æ„Ÿè§‰å°±æ˜¯æ™®é€šè¡¨æ ¼ç¾åŒ–äº†è€Œå·²ã€‚å…¶å®ä¸ç„¶ï¼Œæ™ºèƒ½è¡¨æ ¼ä¸­ï¼Œæ¯ä¸€åˆ—å«åšâ€œå­—æ®µâ€ï¼Œå­—æ®µå¯ä»¥å…ˆé™åˆ¶å…¶ç±»å‹ï¼Œå¦‚ä¸Šå›¾å¼€å§‹æ—¥æœŸæ¨¡ç‰ˆä¸­è®¾ç½®çš„æ˜¯æ—¥æœŸï¼Œåœ¨è¾“å…¥æ—¶å°±å¯ä»¥ç›´æ¥é€šè¿‡æ—¥å†æ¥é€‰æ‹©ï¼Œæ‰€æœ‰è¾“å…¥æœ€ç»ˆéƒ½ä¼šè§„èŒƒæˆæˆ‘ä»¬è®¾ç½®çš„æ ¼å¼ï¼Œè¿™ç›¸æ¯”äºæ™®é€šçš„è¡¨æ ¼å¥½å¤ªå¤šäº†ã€‚å­—æ®µç±»å‹éå¸¸ä¸°å¯Œï¼Œå¦‚æœä¸æ˜¯è‡ªå·±æ‘¸ç´¢ç€ç©ï¼Œå¯èƒ½æ°¸è¿œä¸ç”¨äº†è¿™ä¹ˆå¤šæ ¼å¼ï¼Œæ‰€ä»¥å…¶ä»–çš„è‡ªå·±æ¢ç´¢å§ï¼</p>
<p>å°±è¿™ï¼ï¼ï¼å°±æ•¢è¯´æ˜¯â€œæ™ºèƒ½è¡¨æ ¼â€ã€‚</p>
<p>ç¨å®‰å‹¿èºï¼Œç»§ç»­çœ‹ã€‚</p>
<p>ä»å‰ä¸€å¼ å›¾å¯ä»¥çœ‹åˆ°ï¼Œæ™ºèƒ½è¡¨æ ¼å·¥å…·æ æ’åˆ—åœ¨å¤´éƒ¨äº†ï¼Œä¸€èˆ¬çš„å¦‚ï¼šå­—ä½“é¢œè‰²ã€å¡«å……è‰²ã€ç­›é€‰ã€æ’åºã€åˆ†ç»„ç­‰ï¼Œè‡ªæ˜¯ä¸å¿…å¤šè®²ã€‚æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯åé¢å‡ ä¸ªï¼Œè¿™ä¹Ÿæ˜¯â€œæ™ºèƒ½è¡¨æ ¼â€æ™ºèƒ½çš„ä½“ç°ã€‚</p>
<h1 id="è‡ªåŠ¨åŒ–æµç¨‹">è‡ªåŠ¨åŒ–æµç¨‹</h1>
<p>ä¸çŸ¥é“ä½ ä»¬ä¹‹å‰æ˜¯å¦è§è¿‡è¿™ä¸ªåŠŸèƒ½çš„ï¼Œåæ­£å¯¹æˆ‘æ¥è®²æ˜¯ç¬¬ä¸€æ¬¡ï¼ŒæŒºéœ‡æƒŠçš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.9nzj3rssj6.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>ç‚¹å¼€è‡ªåŠ¨åŒ–æµç¨‹ï¼Œæ˜¾ç¤ºå‡ºæ¥çš„ä¹Ÿåªæ˜¯æ¨¡ç‰ˆï¼Œæƒ³è¦è‡ªå®šä¹‰å°±å¯ä»¥è‡ªå·±ç¼–è¾‘ã€‚</p>
<p>å¦‚ä¸‹ï¼Œè®¾ç½®è§¦å‘æ¡ä»¶å’Œåç»­æ“ä½œï¼Œç›¸å½“ç®€å•ï¼Œæ›´å¤šè¯¦ç»†çš„å¯ä»¥æŸ¥çœ‹è‡ªåŠ¨åŒ–æµç¨‹å¸®åŠ©ä¸­å¿ƒã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.1aoqhudjve.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h1 id="é«˜çº§åŠŸèƒ½">é«˜çº§åŠŸèƒ½</h1>
<p>é«˜çº§åŠŸèƒ½ä¸»è¦æ˜¯ä¸¤å—ï¼šè‡ªå®šä¹‰æ‰“å°å’Œé«˜çº§å¼€å‘ï¼ˆè„šæœ¬å’Œå®šæ—¶ä»»åŠ¡ï¼‰ã€‚</p>
<p>ç›®å‰æ²¡æœ‰éœ€è¦ï¼Œè¿˜æ²¡å°è¯•è¿‡ï¼Œä½†ä¸€å®šä¹Ÿå¾ˆæœ‰è¶£ã€‚</p>
<h1 id="åº”ç”¨">åº”ç”¨</h1>
<p>ä»å‰é¢çš„å›¾ç‰‡å’Œä»‹ç»ï¼Œâ€œæ™ºèƒ½è¡¨æ ¼â€æœ€æœ‰è¶£çš„åœ°æ–¹è¿˜æ˜¯ä½¿ç”¨â€œåº”ç”¨â€ã€‚</p>
<p>å°±ä»æ­¤æ¬¡â€œå›¢é˜Ÿä»»åŠ¡é¡¹ç›®ç®¡ç†çœ‹æ¿â€æ¨¡ç‰ˆæ¥çœ‹å§ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.2yy3f1d2se.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>â€œğŸ“Œå›¢é˜Ÿä»»åŠ¡æ±‡æ€»â€åº”ç”¨å¦‚ä¸Šå›¾ï¼Œæœ¬è´¨ä¸Šæ˜¯å…³è”äº†â€œå›¢é˜Ÿä»»åŠ¡ç®¡ç†çœ‹æ¿â€æ•°æ®è¡¨ï¼Œç„¶åé€šè¿‡â€œçŠ¶æ€â€å­—æ®µåˆ†ç»„å®ç°çš„ï¼Œä¸è¦è§‰å¾—è¿™ä¸ªæ¯«æ— æ„ä¹‰ï¼Œé¦–å…ˆæ•°æ®è¡¨å’Œåº”ç”¨çš„æ•°æ®æ˜¯åŒå‘ç»‘å®šçš„ï¼Œå…¶æ¬¡æ•°æ®è¡¨å¯¹åº”ç”¨æ˜¯1å¯¹å¤šçš„å…³ç³»ï¼Œä¹Ÿæ˜¯è¯´ï¼Œé€šè¿‡ä¸€ä»½æ•°æ®è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸åŒè§’åº¦åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„çš„æ•°æ®ï¼Œè€Œè¿™äº›åº”ç”¨å› ä¸ºä¸æ•°æ®è¡¨æœ¬èº«å°±æ˜¯ç»‘å®šçš„ï¼Œæ‰€ä»¥æ‰€æœ‰åº”ç”¨å…¶å®ä¹Ÿæ˜¯ç»Ÿä¸€çš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.4qr29y58eq.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>æ¥çœ‹ç¬¬ä¸‰å¼ è¡¨â€œğŸ‘¥è´Ÿè´£äººçœ‹æ¿â€åº”ç”¨ï¼Œå®ƒä¸ä¸Šä¸€å¼ â€œğŸ“Œå›¢é˜Ÿä»»åŠ¡æ±‡æ€»â€åº”ç”¨åŒºåˆ«å…¶å®åªæ˜¯åˆ†ç»„å­—æ®µä¸åŒï¼Œä½†å…¶å®è¿™æ˜¯ä¸¤ä¸ªè§’åº¦ã€‚ä½œä¸ºé¡¹ç›®ç®¡ç†å‘˜ï¼Œæˆ‘è‚¯å®šæ—¢å¸Œæœ›é€šè¿‡äººç‰©çŠ¶æ€æ¥çœ‹é‚£äº›ä»»åŠ¡å·²å®Œæˆ/æœªå®Œæˆ/å»¶æœŸï¼Œåˆå¸Œæœ›é€šè¿‡ä»»åŠ¡è´Ÿè´£äººäº†è§£åˆ°æ¯ä¸ªäººçš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µï¼Œæ–¹ä¾¿æˆ‘è¿›è¡Œäººå‘˜/ä»»åŠ¡åˆ†é…ã€‚</p>
<p>â€œå»¶æœŸä»»åŠ¡é¢„è­¦â€åº”ç”¨ä¹Ÿå·®ä¸å¤šï¼Œä¸‹é¢çš„æ˜¯â€œä»»åŠ¡ç”˜ç‰¹å›¾â€åº”ç”¨ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240226/image.8vmnm29cj3.webp"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>ä»å‰é¢åˆ›å»ºæ–°sheetçš„æˆªå›¾å¯ä»¥çœ‹å‡ºï¼Œåº”ç”¨å…¶å®æœ‰å¾ˆå¤šåˆ†ç±»çš„ï¼Œå…¶ä¸­ç”˜ç‰¹å›¾ç®—æ˜¯æ¯”è¾ƒå¸¸è§çš„å§ï¼Œæ¨¡ç‰ˆé€šè¿‡é…ç½®ç”˜ç‰¹å›¾æ—¶é—´çº¿çš„å¼€å§‹/ç»“æŸæ—¶é—´å°±å®ç°äº†ä¸Šå›¾çš„æ•ˆæœï¼Œéå¸¸ç®€å•æ–¹ä¾¿ã€‚çœŸå°±æ˜¯â€œæ­ç§¯æœ¨ä¸€æ ·å»ºåº”ç”¨ï¼Œæ¯ä¸ªäººéƒ½ä¼šç”¨â€ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æœ€åçš„æœ€åï¼Œæˆ‘è¿˜æ˜¯è¡¨è¾¾æˆ‘çš„æ„Ÿå—ï¼Œæ™ºèƒ½è¡¨æ ¼çœŸç‰›ï¼Œç°åœ¨çš„ç”Ÿäº§åŠ›å·¥å…·çœŸä¸é”™ï¼</p>
<p>é¢˜å¤–è¯ï¼Œä»ç¨‹åºå‘˜çš„è§’åº¦æ¥çœ‹ï¼Œæ”¶é›†æ•°æ®-å­˜å‚¨æ•°æ®-å¤„ç†æ•°æ®-å±•ç¤ºæ•°æ®ã€‚ã€‚ã€‚</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>å‚…å›­æ…§åŒ…è½¦è¢«å‹’ç´¢2å°æ—¶é—®é¢˜è§£å†³ï½œæµæµªåœ°çƒä¸­ä¸ºä»€ä¹ˆè¦å…³é—­äº’è”ç½‘ï¼Ÿ</title>
    <url>/article/d5e01b07.html</url>
    <content><![CDATA[<h1 id="äº‹ä»¶å›é¡¾">äº‹ä»¶å›é¡¾</h1>
<p>2æœˆ18æ—¥ï¼ŒèŠ‚åç¬¬ä¸€å¤©ï¼Œæˆ‘æ­£åœ¨â€œåŠªåŠ›å·¥ä½œâ€ï¼Œè½¬çœ¼çœ‹åˆ°å…¬ä¼—å·æ¨é€çš„æ¶ˆæ¯<a
href="https://mp.weixin.qq.com/s/H_yw4C1Ie3WzTmMv8ksLyQ">å‚…å›­æ…§åŒ…è½¦è¢«å‹’ç´¢ï¼å®˜æ–¹é€šæŠ¥â€¦</a></p>
<p>äº‹æƒ…å¾ˆç®€å•ï¼Œæ¸¸æ³³è¿åŠ¨å‘˜å‚…å›­æ…§åœ¨é•¿ç™½å±±åŒ…è½¦è¢«å‹’ç´¢åŠ é’±åœ¨å¾®åšæ±‚åŠ©ã€‚</p>
<figure>
<img data-src="https://cdn.jsdelivr.net/gh/wnhyang/picx-images-hosting@master/20240219/1708482603293.webp"
alt="1708482603293" />
<figcaption aria-hidden="true">1708482603293</figcaption>
</figure>
<p>å¾®åšå‘å¸ƒä¸ä¹…é©¬ä¸Šå¼•èµ·ç½‘å‹çš„å…³æ³¨ï¼Œæœç„¶å¤§å®¶èŠ‚åéƒ½åœ¨è®¤çœŸä¸Šç­çš„ã€‚</p>
<p>ä¸åªæ˜¯ç½‘å‹ï¼Œç›¸å…³éƒ¨é—¨å“åº”çš„ä¹Ÿå¾ˆåŠæ—¶ï¼Œå‰æ—æ–‡æ—…é©¬ä¸Šå°±ä»‹å…¥ï¼Œä¸å‡º2ä¸ªå°æ—¶é—®é¢˜å°±å·²ç»è§£å†³ã€‚çœ‹çœ‹è¿™æ•ˆç‡ï¼ï¼ï¼<a
href="https://mp.weixin.qq.com/s/eoCvnNCrUWv8ag1-2loOEw">å¸æœºè¢«ç½š3ä¸‡å…ƒï¼å®˜æ–¹é€šæŠ¥â€œå‚…å›­æ…§åŒ…è½¦è¢«å‹’ç´¢â€å¤„ç½šç»“æœ</a></p>
<figure>
<img data-src="https://cdn.jsdelivr.net/gh/wnhyang/picx-images-hosting@master/20240219/1708482603223.webp"
alt="1708482603223" />
<figcaption aria-hidden="true">1708482603223</figcaption>
</figure>
<p>ç´§æ¥ç€â€œé•¿ç™½å±±å‘å¸ƒâ€å®˜å¾®å‘å¸ƒã€Šé•¿ç™½å±±ä¸¥å‰æ‰“å‡»éæ³•è¥è¿ç­‰è¡Œä¸ºåšå†³ç»´æŠ¤æ¯ä¸€åæ¸¸å®¢çš„åˆæ³•æƒç›Šã€‹ã€‚</p>
<figure>
<img data-src="https://cdn.jsdelivr.net/gh/wnhyang/picx-images-hosting@master/20240219/1708346918648.webp"
alt="1708346918648" />
<figcaption aria-hidden="true">1708346918648</figcaption>
</figure>
<span id="more"></span>
<h1 id="è‡ªåª’ä½“">è‡ªåª’ä½“</h1>
<p><strong>å¤®è§†ç½‘ï¼šå‡å¦‚ä¸æ˜¯å‚…å›­æ…§å‘¢ï¼Ÿ</strong></p>
<p>å‚…å›­æ…§çš„é­é‡ä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹å„¿ï¼Œæ‰€ä¸åŒçš„æ˜¯ï¼Œå‚…å›­æ…§ä¸æ˜¯â€œæ™®é€šçš„æ¸¸å®¢â€ã€‚å¥¹å‡­å€Ÿå¼ºå¤§çš„â€œåäººæ•ˆåº”â€è¿…é€Ÿè§£å†³äº†é—®é¢˜ã€‚ä½†åœ¨è¿™èƒŒåï¼Œå¤§å®¶ä¸€ä¸ªå…±åŒçš„è¿½é—®æ˜¯ï¼šå‡å¦‚ï¼ˆè¢«å‹’ç´¢çš„ï¼‰ä¸æ˜¯å‚…å›­æ…§å‘¢ï¼Ÿ</p>
<p>æ›¾ç»ï¼Œå¤šåª’ä½“çš„èˆå°ä¸­å¤®ï¼Œç”µè§†å°ã€ä¼ åª’å·¨å¤´ç‹¬é¢†é£éªšï¼Œä»–ä»¬æ˜¯ä¿¡æ¯æµ·æ´‹çš„ä¸»å®°è€…ã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¸ªå´­æ–°çš„è‡ªåª’ä½“æ—¶ä»£ï¼Œä¸€åˆ‡è§„åˆ™æ­£åœ¨è¢«æ”¹å†™ï¼ï¼Ÿæ­¤åˆ»ï¼Œæˆ‘ä»¬æ¯ä¸ªäººï¼Œéƒ½æ¡ä½äº†éº¦å…‹é£ï¼Œç«™åœ¨äº†èšå…‰ç¯ä¸‹ã€‚æˆ‘ä»¬ä¸å†æ˜¯è¢«åŠ¨çš„ä¿¡æ¯æ¥æ”¶è€…ï¼Œè€Œæ˜¯å†…å®¹åˆ›é€ çš„ä¸»äººç¿ï¼ç„¶è€Œæ­£å¦‚ã€Šä¸€äººä¹‹ä¸‹ã€‹ä¸­ç‹ä¹Ÿè®²çš„â€œå‘½è¿çš„æƒé‡â€ï¼Œä¸ªä½“å˜åŒ–å½±å“ä¸–ç•Œå˜åŒ–çš„ç¨‹åº¦æ˜¯ä¸ä¸€æ ·çš„ã€‚å¯¹äºå…¬ä¼—äººç‰©è€Œè¨€ï¼Œå…¶åœ¨ç¤¾ä¼šä¸­äº§ç”Ÿçš„å½±å“åŠ›æ— ç–‘è¶…è¶Šäº†æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æ™®é€šä¸ªä½“ã€‚</p>
<iframe src="//player.bilibili.com/player.html?aid=1150011998&amp;bvid=BV1NZ421r7Ji&amp;cid=1428817428&amp;p=1&amp;autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<h1
id="è„‘æ´æµæµªåœ°çƒä¸­ä¸ºä»€ä¹ˆè¦å…³é—­äº’è”ç½‘">è„‘æ´ï¼šæµæµªåœ°çƒä¸­ä¸ºä»€ä¹ˆè¦å…³é—­äº’è”ç½‘ï¼Ÿ</h1>
<p>å¦‚æœä½ çœ‹è¿‡ã€Šæµæµªåœ°çƒ2ã€‹ï¼Œé‚£ä¹ˆä½ ä¸€å®šè®°å¾—ååŠæ®µé«˜æ½®æƒ…èŠ‚â€”â€”ç‚¸æœˆäº®ã€‚</p>
<p>æ€ä¹ˆç‚¸å‘¢ï¼Ÿæœˆçƒéƒ¨ç½²ç›¸æ§é˜µæ ¸å¼¹å¼•çˆ†ï¼ŒåŒæ—¶åœ¨åˆ°è¾¾æ´›å¸Œæé™ä¹‹å‰åˆ©ç”¨é‡å¯çš„å…¨çƒäº’è”ç½‘ï¼Œå¯åŠ¨å…¨çƒè¡Œæ˜Ÿå‘åŠ¨æœºï¼Œé€ƒç¦»æœˆçƒæ®‹éª¸ã€‚</p>
<p>å•Šï¼Ÿå…¨çƒäº’è”ç½‘ä¸ºä»€ä¹ˆè¦å…³é—­å‘¢ï¼Ÿ</p>
<p>æˆ‘è®°å¾—æ²¡é”™çš„è¯ç”µå½±é‡Œç»™å‡ºçš„è¯´æ³•æ˜¯</p>
<p>1ã€å‡å°‘æ•°å­—æ´¾å½±å“å’Œæ§åˆ¶èˆ†è®ºã€‚å› ä¸ºUEGï¼ˆç±»æ¯”è”åˆå›½ï¼‰å·²ç»ç¡®è®¤æµæµªåœ°çƒè®¡åˆ’ï¼Œæ­¤æ—¶å·²æ˜¯å±æœºå…³é”®æ—¶åˆ»éœ€è¦ç ´é‡œæ²‰èˆŸï¼Œä¸ºäº†æ§åˆ¶èˆ†è®ºï¼Œä¸ºäº†å›¢ç»“ä¸€å¿ƒå…±èµ´æœªæ¥ç¾å¥½çš„å®¶å›­ã€‚</p>
<p>2ã€äº’è”ç½‘å¯¹äºäººç±»çš„å¨èƒï¼Œæœªæ¥äººå·¥æ™ºèƒ½å‘å±•å·²ä¸å¯æ§ï¼Œåœ°çƒçš„ä¸»å¯¼å·²ç»ä¸æ˜¯ä¸‰ç»´ä¸–ç•Œçš„äººç±»ã€‚</p>
<p>åœ¨Bç«™çœ‹äº†ä¸€ä¸ªè§†é¢‘æŒºæœ‰æ„æ€çš„ã€Šå…¨çƒç§©åºæ¨å€’é‡å»ºï¼ä¸‹ä¸€ä¸ªè¶…çº§å¤§å›½è¶…å‡ºä½ çš„æƒ³è±¡ï¼ã€‹</p>
<p>æˆ‘ä¹Ÿæ˜¯è¢«æ ‡é¢˜å¸å¼•è¿‡å»çš„ï¼Œè¿˜åœ¨æƒ³ä¸­å›½ï¼Ÿç¾å›½ï¼Ÿä¿„ç½—æ–¯ï¼Ÿè¥¿æ¬§å“ªä¸ªå‘è¾¾å›½å®¶ï¼Ÿä¸‰å“¥ï¼Ÿå®‡å®™å›½ï¼Ÿ</p>
<p>ä¸å‡ºæ„å¤–çš„æ„å¤–ï¼Œè§†é¢‘ä¸­æå‡ºçš„è§‚ç‚¹æ˜¯ä¸‹ä¸€ä¸ªè¶…çº§å¤§å›½å¯èƒ½ä¸æ˜¯ç‰©ç†æ„ä¹‰ä¸Šçš„ï¼Œè€Œæ˜¯æŒæ¡äº†æµ·é‡æ•°æ®å¹¶æ‹¥æœ‰ç»å¯¹ç®—åŠ›çš„ç§‘æŠ€ä¼ä¸šã€‚</p>
<p>å¤è¯­æœ‰è¨€ï¼šå¾—æ°‘å¿ƒè€…å¾—å¤©ä¸‹ã€‚è€Œä»Šï¼Œåœ¨ä¿¡æ¯å¦‚æ½®çš„æ—¶ä»£æ´ªæµä¸­ï¼Œå¦‚ä½•æŠŠæ¡æ°‘å¿ƒæ‰€å‘ï¼Œæ´æ‚‰ä¸–æ€ç‚å‡‰ï¼Ÿç­”æ¡ˆï¼Œå°±åœ¨äºåª’ä½“çš„åŠ›é‡ã€‚åª’ä½“å¦‚æœä¸å¯æ§é‚£ä¹ˆã€‚ã€‚ã€‚</p>
<iframe src="//player.bilibili.com/player.html?aid=1900453649&amp;bvid=BV1Lm411X7hg&amp;cid=1434210772&amp;p=1&amp;autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥åº·ç”Ÿæ´»</title>
    <url>/article/3b29100a.html</url>
    <content><![CDATA[<p>åœ¨æœªå·¥ä½œä¹‹å‰ï¼Œæ€»æ˜¯å¯¹å·¥ä½œå……æ»¡ç¾å¥½çš„ç•…æƒ³ï¼Œæƒ³è±¡é‚£æ—¶æˆ‘å°±å¯ä»¥å®Œå…¨ç‹¬ç«‹ï¼Œèƒ½å¾ˆå¥½åœ°å¤„ç†å·¥ä½œå’Œç”Ÿæ´»ã€‚ç­‰åˆ°çœŸçš„å·¥ä½œåå°±å‘ç°çœŸçš„å¾ˆéš¾çš„å•¦ğŸ¤§</p>
<p>work life balance æ²¡é‚£ä¹ˆå®¹æ˜“çš„ã€‚</p>
<p>å½“ä»£å¹´è½»äººï¼ˆè¿™ä¸ªå®šè¯­å¯èƒ½ä¸å¯¹ï¼‰ï¼Œå¯¹äºå·¥ä½œç”Ÿæ´»ç¡®å®æ˜¯ï¼šè‡ªå·±å—¨ã€è‡ªå·±ç©ï¼Œå†æ™šä¹Ÿä¸ç´¯ï¼Œä¸€æ—¦å·¥ä½œä¸Šç­å°±é©¬ä¸Šç„‰äº†ã€‚è¿™æ²¡æœ‰å¤¸å¤§å…¶è°ˆï¼Œç¡®å®å¦‚æ­¤å•Šï¼åªè¦åˆ°äº†å·¥ä½œåœºåœ°ï¼Œè§„å®šæ—¶é—´å†…ï¼Œå°±ç®—ä»»åŠ¡å¾ˆè½»æ¾ï¼Œè¿˜æ˜¯ä¼šæ„Ÿåˆ°ç´¯ğŸ¥±å¯ä¸€æ—¦ä¸‹ç­å’Œæœ‹å‹èšåœ¨ä¸€èµ·ï¼Œå°±å¾ˆå¿«ä¹ï¼Œä¸çŸ¥ç–²å€¦ğŸ¥°</p>
<span id="more"></span>
<p>å·¥ä½œä¹‹åï¼Œæˆ‘çš„èº«ä½“çŠ¶å†µå°±å˜å¾—å¾ˆå·®ï¼Œä¸»è¦åŸå› è¿˜æ˜¯ä¹…åã€ä¸è¿åŠ¨ã€ä½œæ¯ä¸è§„å¾‹ã€é¥®é£Ÿä¸å¥åº·ã€‚è¿™ä¸ªç¡®å®å¾ˆéš¾æï¼Œå› ä¸ºä¸€å¤©çš„å·¥ä½œå·²ç»å¾ˆç´¯äº†ï¼Œå›åˆ°å®¶å·²ç»å¾ˆæ™šäº†ï¼Œåªèƒ½èººåœ¨åºŠä¸Šç©ï¼Œæ²¡æœ‰è‡ªå¾‹çš„å¿ƒæ€äº†ã€‚è¦è¯´è‡ªå·±èº«ä½“æœ€æ£’çš„æ—¶å€™ï¼Œå¤§æ¦‚å°±æ˜¯åˆä¸­äº†ï¼Œä½œæ¯é¥®é£Ÿéƒ½å¾ˆè§„å¾‹ï¼Œæ—¥å¸¸å­¦ä¹ çš„å‹åŠ›ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œæ¯å¤©è¿˜æœ‰è¦è·‘æ“ã€è¯¾ä»¶é”»ç‚¼ï¼Œèº«ä½“å€æ£’ğŸ˜</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/127090A0AB70734AB51B83BE792C7DEA.6b7iphaa86g0.webp"
alt="127090A0AB70734AB51B83BE792C7DEA" />
<figcaption
aria-hidden="true">127090A0AB70734AB51B83BE792C7DEA</figcaption>
</figure>
<p>ç°åœ¨ç›¸æ¯”è¿‡å»åœ¨äº’è”ç½‘ï¼Œå‹åŠ›å°äº†å¾ˆå¤šï¼Œæ—¶é—´ä¹Ÿå……è£•å¤šäº†ï¼Œæ˜¯æ—¶å€™è‡ªå¾‹èµ·æ¥ï¼ŒæŠŠèº«ä½“æå¥½äº†ï¼ä¹‹å‰åœ¨ä¸Šæµ·å°é—­äº†ä¸‰ä¸ªæœˆï¼Œè¢«è¿«è‡ªå·±åšé¥­ï¼ˆç°åœ¨ä¹Ÿèƒ½ç‚’ä¸€äº›èœäº†ğŸ˜‚ï¼‰ï¼Œå¯æ˜¯å°±æ˜¯é‚£æ®µå°é—­çš„æ—¥å­æ²¡æœ‰é”»ç‚¼ï¼Œèƒ–äº†ä¸€äº›ï¼Œè¿é”ååº”ï¼Œç°åœ¨ä¹Ÿä¸æƒ³åŠ¨å¼¹äº†ğŸ˜–æ›´å¯æ€•çš„æ˜¯ï¼Œç°åœ¨ç¨å¾®è¿åŠ¨ä¸€ä¸‹ï¼Œè‚Œè‚‰éƒ½èƒ½é…¸ç—›å¥½å‡ å¤©ï¼Œå¤ªç—›è‹¦äº†ğŸ¶</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/735C707F8E4927853648C12E51C2F9EB.1f8n2rjfd880.webp"
alt="735C707F8E4927853648C12E51C2F9EB" />
<figcaption
aria-hidden="true">735C707F8E4927853648C12E51C2F9EB</figcaption>
</figure>
<p>ä»å°æˆ‘å°±è¢«è¯´æ˜¯â€œä¸‰åˆ†é’Ÿçƒ­åº¦â€ï¼Œæ€»æ˜¯æƒ³ä¸€å‡ºï¼Œæ˜¯ä¸€å‡ºã€‚æ²¡æœ‰ä»€ä¹ˆèƒ½ä¸€ç›´åšæŒçƒ­çˆ±ä¸‹å»çš„ğŸ˜”æˆ‘è¿˜è€æ˜¯çŠŸï¼Œè§‰å¾—è‡ªå·±ä¸æ˜¯çš„ï¼Œä½†äº‹å®å¾€å¾€è¯æ˜æˆ‘æ˜¯ã€‚</p>
<p>è¿™æ¬¡ï¼Œæˆ‘ä¸€å®šè¦åšæŒã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/E72C523E1D710821636728E26E06A5D0.57g8vz5q7i00.webp"
alt="E72C523E1D710821636728E26E06A5D0" />
<figcaption
aria-hidden="true">E72C523E1D710821636728E26E06A5D0</figcaption>
</figure>
<p>ç›®å‰è§„åˆ’æ˜¯ï¼Œæ¯å¤©é”»ç‚¼ä¸€å°æ—¶ï¼Œè·‘æ­¥ã€ä¿¯å§æ’‘ã€æ·±è¹²ã€ç»ƒèƒ³è†Šã€è·³ã€æ‹‰ä¼¸ç­‰</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/FC3CFA36A1B0678E4DBAF3820AD0BDDE.lyvni9dvssw.webp"
alt="FC3CFA36A1B0678E4DBAF3820AD0BDDE" />
<figcaption
aria-hidden="true">FC3CFA36A1B0678E4DBAF3820AD0BDDE</figcaption>
</figure>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>å…è´¹ç”³è¯·JetBrainså…¨å®¶æ¡¶Licenseï¼Œ5ç§æ–¹å¼</title>
    <url>/article/c43aa7dd.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚å…³äºå¼€å‘è€…<code>IDE</code>ï¼ˆ<code>Integrated Development Environment</code>ï¼‰ï¼Œæˆ‘ä»¬ç†ŸçŸ¥<code>IDEA</code>ã€<code>PyCharm</code>ã€<code>GoLand</code>ã€<code>WebStorm</code>è¿™äº›<code>IDE</code>éƒ½å±äºåŒä¸€å®¶å…¬å¸çš„äº§å“ï¼Œé‚£å°±æ˜¯<code>JetBrains</code>ã€‚è¿™äº›<code>IDE</code>æœ‰å¤šå¥½ç”¨å°±ä¸ç”¨æˆ‘å†å¹äº†ã€‚</p>
<p>åºŸè¯ä¸å¤šè®²ï¼Œç›´æ¥æ¥è¯´å¦‚ä½•ç”³è¯·<code>JetBrains</code>å…¨å®¶æ¡¶<code>License</code>ã€‚</p>
<p>å®˜ç½‘ï¼š<a
href="https://www.jetbrains.com.cn/community/user-groups/">https://www.jetbrains.com.cn</a></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240131/1706705875038.webp"
alt="1706705875038" />
<figcaption aria-hidden="true">1706705875038</figcaption>
</figure>
<span id="more"></span>
<h1 id="æœ‰å“ª5ç§æ–¹å¼">æœ‰å“ª5ç§æ–¹å¼</h1>
<p>å®˜ç½‘ï¼š<a
href="https://www.jetbrains.com.cn/community/user-groups/">https://www.jetbrains.com.cn</a></p>
<p>åœ¨å®˜ç½‘åº•éƒ¨â€œç¤¾åŒºâ€ä¸€åˆ—å±•ç¤ºäº†è¿™5ç§æ–¹å¼ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240131/1706706229237.webp"
alt="1706706229237" />
<figcaption aria-hidden="true">1706706229237</figcaption>
</figure>
<h1 id="å­¦æœ¯è®¸å¯">å­¦æœ¯è®¸å¯</h1>
<p><a href="https://www.jetbrains.com.cn/community/education/#students"
class="uri">https://www.jetbrains.com.cn/community/education/#students</a></p>
<p>å­¦æœ¯è®¸å¯é€‚ç”¨äºå­¦ç”Ÿå’Œæ•™å¸ˆã€å­¦æ ¡å’Œå¤§å­¦ã€åŸ¹è®­è¯¾ç¨‹å’Œè®­ç»ƒè¥ï¼Œè¦æ±‚çš„è¯å®˜ç½‘è¯´æ˜å¾—æ›´æ¸…æ¥šã€‚</p>
<p>å¯¹äºè¿˜åœ¨ä¸Šå­¦çš„åŒå­¦ï¼Œè¿™ä¸ªæ˜¯æœ€å®¹æ˜“è·å¾—çš„ï¼Œç°åœ¨å®¡æ ¸è¦æ¯”è¿‡å»ä¸¥æ ¼ä¸€äº›ï¼Œä½†æœ€å·®æä¾›ä¸€ä¸‹å­¦ä¿¡ç½‘è¯æ˜å¯ä»¥é€šè¿‡äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240131/1706706638666.webp"
alt="1706706638666" />
<figcaption aria-hidden="true">1706706638666</figcaption>
</figure>
<h1 id="å¼€æº">å¼€æº</h1>
<p><a href="https://www.jetbrains.com.cn/community/opensource/#support"
class="uri">https://www.jetbrains.com.cn/community/opensource/#support</a></p>
<p>å¼€æºå¼€å‘è®¸å¯è¯ï¼ŒJetBrains
é€šè¿‡ä¸ºæ ¸å¿ƒé¡¹ç›®è´¡çŒ®è€…å…è´¹æä¾›ä¸€å¥—ä¸€æµçš„å¼€å‘è€…å·¥å…·æ¥æ”¯æŒéå•†ä¸šå¼€æºé¡¹ç›®ã€‚</p>
<p>å¯¹äºå¼€æºé¡¹ç›®çš„è¦æ±‚å¦‚ä¸‹ï¼Œè¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¥½è·å¾—çš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240201/1706756812773.webp"
alt="1706756812773" />
<figcaption aria-hidden="true">1706756812773</figcaption>
</figure>
<h1 id="ç”¨æˆ·å°ç»„">ç”¨æˆ·å°ç»„</h1>
<p><a href="https://www.jetbrains.com.cn/community/user-groups/"
class="uri">https://www.jetbrains.com.cn/community/user-groups/</a></p>
<p>ç”¨æˆ·å°ç»„é€‚åˆæŠ€æœ¯ç¤¾åŒºï¼Œæ„Ÿè§‰åƒæ˜¯CSDNã€æ˜é‡‘è¿™ç§ï¼Œæˆ–æ˜¯<a
href="https://gitee.com/dromara">dromara</a>è¿™ç§ï¼Œè¿™ä¸ªè¿˜ä¸å¤ªæ¸…æ¥šã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240131/1706707053138.webp"
alt="1706707053138" />
<figcaption aria-hidden="true">1706707053138</figcaption>
</figure>
<h1 id="æ´»åŠ¨åˆä½œ">æ´»åŠ¨åˆä½œ</h1>
<p><a
href="https://www.jetbrains.com.cn/community/events-partnership/#developers"
class="uri">https://www.jetbrains.com.cn/community/events-partnership/#developers</a></p>
<p>è¿™ä¸ªé€‚åˆå¼€å‘è€…æˆ–å­¦ç”Ÿä¸¾åŠä»€ä¹ˆç¼–ç¨‹æ´»åŠ¨ã€æ¯”èµ›ï¼Œå°±å¯ä»¥ç”³è¯·<code>JetBrains</code>è®¸å¯è¯ä½œä¸ºå¥–å“è¿™æ ·çš„ã€‚</p>
<p>å¦‚ä»€ä¹ˆå¤§å­¦ã€<code>LeetCode</code>ã€ç§‘æŠ€å…¬å¸ä¸¾åŠç¼–ç¨‹æ¯”èµ›ï¼Œå°±å¯ä»¥ä¸<code>JetBrains</code>åˆä½œï¼Œæ‹¿<code>License</code>ä½œä¸ºå¥–å“ã€‚</p>
<h1 id="å¼€å‘è€…è®¤å¯">å¼€å‘è€…è®¤å¯</h1>
<p><a href="https://www.jetbrains.com.cn/community/dev-recognition/"
class="uri">https://www.jetbrains.com.cn/community/dev-recognition/</a></p>
<p>JetBrains é€šè¿‡å‘æ´»è·ƒçš„ Google Developer Expertã€Java Championã€Docker
Captainã€Microsoft MVPã€Gradle Fellowã€Embarcadero Most Valuable
Professionalã€Nx Champion å’Œ ASPInsider æä¾›å…è´¹çš„ All Products
Packï¼Œè¡¨å½°æŠ€æœ¯å“è¶Šå’Œç¤¾åŒºé¢†å¯¼åœ°ä½ã€‚</p>
<p>è¿™ä¸ªé€‚åˆå¤§ä½¬ï¼</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240131/1706707646400.webp"
alt="1706707646400" />
<figcaption aria-hidden="true">1706707646400</figcaption>
</figure>
<p>å¦‚æœè¯´å‰é¢çš„æ˜¯<code>JetBrains</code>ä¸ºäº†æ¨å¹¿è‡ªå·±å’Œæ‹…èµ·ç¤¾ä¼šè´£ä»»ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼€å‘è€…è®¤å¯æ›´åƒæ˜¯å¸Œæœ›å¤§ä½¬èƒ½ä¸ºè‡ªå·±èƒŒä¹¦ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¦‚ä¸‹ï¼Œæˆ‘è‡ªå·±æœ‰é€šè¿‡å­¦ç”Ÿå’Œå¼€æºé¡¹ç›®ä¸¤ç§æ–¹å¼æˆåŠŸç”³è¯·<code>JetBrains</code>çš„<code>License</code>ã€‚</p>
<p>æœ¬æ¥å­¦ç”Ÿç”³è¯·æŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯åæ¥å®¡æ ¸ä¸¥æ ¼äº†ï¼Œä»–çŸ¥é“æˆ‘æ¯•ä¸šäº†ğŸ˜‚ï¼Œå°±ä¸ç»™æˆ‘å»¶æœŸäº†ã€‚</p>
<p>å¦‚ä»Šåˆšåˆšé€šè¿‡å¼€æºé¡¹ç›®ç”³è¯·æˆåŠŸï¼å¦‚æœå¯¹æ­¤è¿‡ç¨‹æ„Ÿå…´è¶£çš„ï¼Œæˆ‘å°±å†å‡ºä¸€ç¯‡æ–‡ç« è®²ä¸€ä¸‹è¿™ä¸ªä¸é¡ºåˆ©ç”³è¯·ä¹‹è·¯å§ï¼</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240131/1706708095302.webp"
alt="1706708095302" />
<figcaption aria-hidden="true">1706708095302</figcaption>
</figure>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>å…è´¹è¯•ç”¨åä¸ºäº‘æœåŠ¡å™¨</title>
    <url>/article/e4e09754.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>æœ€è¿‘åœ¨å­¦Linuxï¼Œè™½ç„¶å®‰è£…äº†Linuxè™šæ‹Ÿæœºï¼Œä½†è¿˜æ˜¯å¾ˆæƒ³ä½“éªŒä¸€ä¸‹äº‘æœåŠ¡å™¨Linuxï¼Œè¿™ä¸æœèµ„æ–™ï¼Œé€›ç½‘ç«™</p>
<p>è¿‘å‡ å¹´â€äº‘â€œå¯å¤ªç«äº†ï¼Œä»€ä¹ˆéƒ½è¦ä¸Šäº‘ï¼Œè¿‘æ—¥é˜¿é‡Œäº‘ç›˜ä¹Ÿæ­£å¼å…¬æµ‹äº†ï¼Œç›´é¢å¯¹æŠ—ç™¾åº¦äº‘ç›˜ï¼Œè¿™å°±æœ‰è¶£äº†ï¼Œå› ä¸ºæ­£é¢ç«äº‰æ˜¯å¥½äº‹ï¼Œä¸ä»…å¯¹äºç™¾åº¦æˆ–æ˜¯é˜¿é‡Œï¼Œæˆ‘ä»¬æ¶ˆè´¹è€…æ›´èƒ½ä»ä¸­å¾—åˆ°å¥½å¤„ï¼Œç›¸åä¸€å®¶ç‹¬å¤§æ—¶å¾€å¾€å¯¹æ•´ä¸ªè¡Œä¸šä¸å¤ªå¥½ï¼Œå› ä¸ºç«™ä¸Šæœ€é«˜å¤„æ—¶å¾€å¾€ä¼šè¿·èŒ«ã€åŒæ—¶é‡å¿ƒä¹Ÿæ›´å¤§ï¼Œæƒ³è¦å„æ–­æ•´ä¸ªå¸‚åœºï¼Œç”šè‡³ã€‚ã€‚ã€‚</p>
<p>äº‘ï¼Œç°åœ¨å¤§å‚éƒ½åœ¨åšï¼Œä¸­å›½å°±æœ‰<a
href="https://cn.aliyun.com/">é˜¿é‡Œäº‘</a>ï¼Œ<a
href="https://cloud.tencent.com/">è…¾è®¯äº‘</a>ï¼Œ<a
href="https://cloud.baidu.com/">ç™¾åº¦äº‘</a>ï¼Œ<a
href="https://www.huaweicloud.com/">åä¸ºäº‘</a>ï¼Œ<a
href="https://www.didiyun.com/">æ»´æ»´äº‘</a>ï¼Œ<a
href="https://www.mtyun.com/">ç¾å›¢äº‘</a>ã€‚ã€‚ã€‚</p>
<h1 id="å…è´¹è¯•ç”¨">å…è´¹è¯•ç”¨</h1>
<p>è¿™æ¬¡å…è´¹è¯•ç”¨äº†åä¸ºäº‘ï¼Œå› ä¸ºåä¸ºäº‘é¦–é¡µæœ€æ˜¾çœ¼çš„åœ°æ–¹å±•ç¤ºç€â€å…è´¹è¯•ç”¨â€œå››ä¸ªå¤§å­—ï¼Œç‚¹å¼€åæœ‰å¾ˆå¤šäº§å“å¯ä»¥é€‰æ‹©ï¼Œæ­£å¥½æˆ‘ç°åœ¨éœ€è¦Linuxäº‘æœåŠ¡å™¨ï¼Œäºæ˜¯9ï¼š30èŠ±è´¹0å…ƒæŠ¢è´­äº†1æ ¸2Gçš„Linuxäº‘æœåŠ¡å™¨ï¼Œå…¶ä»–è¿˜æœ‰äº‘æ•°æ®åº“ï¼Œäº‘è®¡ç®—ï¼Œäº‘ã€‚ã€‚ç­‰ç­‰ç§ç±»å¯ä»¥å…è´¹ä½“éªŒã€‚</p>
<p>æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ä½“éªŒäº‘æœåŠ¡å™¨ï¼Œæ­£å¥½é…åˆSSHç»ˆç«¯å­¦ä¹ Linuxï¼Œè¯´ä¸å®šè¿˜èƒ½éƒ¨ç½²é¡¹ç›®ç©å‘¢</p>
<p>ç›®å‰è¿˜åœ¨ä½“éªŒä¸­ï¼Œç”¨ç€è¿˜æ˜¯æŒºå¥½çš„ï¼Œæˆ‘çš„éœ€æ±‚ä¹Ÿä¸å¤§ï¼Œæœ€å°çš„å·²å¤Ÿç”¨äº†</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>å†…å·æ—¶ä»£</title>
    <url>/article/14f1450b.html</url>
    <content><![CDATA[<h1 id="ç®€å•èŠä¸€èŠ">ç®€å•èŠä¸€èŠ</h1>
<p>éƒ½å¹´åº•äº†ï¼Œ2021éƒ½è¦è¿‡å»äº†ï¼Œä¸ä¼šè¿˜æœ‰äººä¸çŸ¥é“å•¥æ˜¯å†…å·å§ï¼Ÿ
å†…å·ä½œä¸ºä»Šå¹´æœ€ç«çš„è¯é¢˜ä¹‹ä¸€ï¼Œæˆ‘ä¹Ÿæ¥ç®€å•èŠä¸€èŠã€‚</p>
<span id="more"></span>
<h1 id="å†…å·æ—¶ä»£">å†…å·æ—¶ä»£</h1>
<h2 id="å®šä¹‰">å®šä¹‰</h2>
<p>å¯ä»¥è¯´ä»Šå¹´ï¼Œä¸ï¼Œåº”è¯¥æ˜¯è¿‘å¹´ï¼Œå…¨ç¤¾ä¼šã€å…¨è¡Œä¸šéƒ½åœ¨å†…å·ã€‚å¦‚æœè¿˜æœ‰äººå¯¹å†…å·çš„å«ä¹‰ä¸æ¸…æ¥šï¼Œæˆ‘å†å¼•ç”¨ç™¾ç§‘é‡Œçš„è§£é‡Šï¼šâ€œå†…å·ï¼Œç½‘ç»œæµè¡Œè¯­ï¼ŒåŸæŒ‡ä¸€ç±»æ–‡åŒ–æ¨¡å¼è¾¾åˆ°äº†æŸç§æœ€ç»ˆçš„å½¢æ€ä»¥åï¼Œæ—¢æ²¡æœ‰åŠæ³•ç¨³å®šä¸‹æ¥ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•è½¬å˜ä¸ºæ–°çš„å½¢æ€ï¼Œè€Œåªèƒ½ä¸æ–­åœ°åœ¨å†…éƒ¨å˜å¾—æ›´åŠ å¤æ‚çš„ç°è±¡ã€‚â€ä»€ä¹ˆæ„æ€ï¼Ÿçœ‹å®Œæ›´æ‡µäº†ï¼Œæœ‰äººè¯´ç§‘å­¦å°±æ˜¯æŠŠä½ åŸæœ¬èƒ½çœ‹æ‡‚çš„ï¼Œè§£é‡Šæˆ–å®šä¹‰æˆä½ çœ‹ä¸æ‡‚çš„ï¼Œè¿™è¯´æ³•ä¸æ˜¯å®Œå…¨æ²¡æœ‰é“ç†çš„ã€‚å†è§£é‡Šä¸€éï¼Œâ€œå†…å·æŒ‡çš„æ˜¯åŒè¡Œé—´ç«ç›¸ä»˜å‡ºæ›´å¤šåŠªåŠ›ä»¥äº‰å¤ºæœ‰é™èµ„æºï¼Œä»è€Œå¯¼è‡´ä¸ªä½“â€œæ”¶ç›ŠåŠªåŠ›æ¯”â€ä¸‹é™çš„ç°è±¡ã€‚â€æ›´ç®€å•çš„è¯´å°±æ˜¯åŠªåŠ›çš„â€œé€šè´§è†¨èƒ€â€ï¼Œä¹Ÿå°±æ˜¯åŠªåŠ›æ²¡é‚£ä¹ˆâ€œå€¼é’±äº†â€ã€‚è¦æƒ³å–å¾—ä¸å¤šçš„èµ„æºï¼Œéœ€è¦æ›´å¤šçš„åŠªåŠ›äº†ã€‚</p>
<h2 id="æˆ‘ä»¬">æˆ‘ä»¬</h2>
<p>å‰é¢è§£é‡Šäº†ä»€ä¹ˆæ˜¯å†…å·ï¼Œè¿™é‡Œæˆ‘ä¸æ·±ç©¶å…¶åŸå› ã€‚åªç®€å•è°ˆè°ˆï¼Œå†…å·æ—¶ä»£ä¸‹çš„æˆ‘ä»¬ã€‚</p>
<p>å†…å·æ—¶ä»£ä¸‹çš„æˆ‘ä»¬éƒ½ä¼šå› æ­¤å—åˆ°ä¸å°‘çš„å½±å“ï¼Œä½ è¯´ä½ åªæƒ³èººå¹³ï¼Œå“¦ï¼Œé‚£æ²¡äº‹äº†ã€‚å‰é¢æåˆ°äº†ï¼Œæˆ‘ä»¬çš„åŠªåŠ›åœ¨å†…å·çš„å¤§ç¯å¢ƒä¸‹ä¸å€¼é’±äº†ï¼Œåªæœ‰å·ç‹æ‰èƒ½è·å¾—â€œæˆåŠŸâ€ï¼Œä¸è¿‡ä¸æ˜¯äººäººéƒ½èƒ½åšå·ç‹çš„ï¼Œä¹Ÿå¹¶éæ‰€æœ‰äººéƒ½æƒ³åšå·ç‹å•Šï¼ä¸¾ä¸ªä¾‹å­å§ï¼Œç®—æ˜¯ç¦»æˆ‘æ¯”è¾ƒè¿‘çš„ï¼Œå°±é‚£æ‰¾å·¥ä½œæ¥è¯´å§ã€‚å…ˆè¯´ç»“è®ºï¼šå¯¹æ¯”ä¹‹å‰ï¼Œæ‰¾å·¥ä½œæ›´éš¾äº†ã€‚å¤§ç¯å¢ƒæ˜¯ï¼šå¤§å­¦æ‰©æ‹›ï¼Œæœ¬ç§‘å­¦å†ä¸€æŠ“ä¸€å¤§æŠŠï¼Œæ›´å¤šäººé€‰æ‹©è€ƒç ”æ·±é€ ï¼Œäººæ•°ä¹Ÿæ˜¯åœ¨ä¸æ–­å¢åŠ ï¼Œå› æ­¤æ•´ä½“å­¦å†ä¸Šå‡ï¼Œç„¶è€Œå·¥ä½œå²—ä½æ•°é‡ä¹Ÿæ²¡æœ‰å¾ˆå¤§å˜åŒ–ï¼Œè€Œä¸”åŠ ä¸Šç–«æƒ…åŸå› ï¼Œç”šè‡³è¿˜æœ‰å¾ˆå¤šå…¬å¸åœ¨è£å‘˜èŠ‚æµã€‚æ‰€ä»¥è¯´è¦å†…å·äº†ï¼Œæ­£å¯¹äº†å®ƒçš„å®šä¹‰ï¼šèµ„æºä¸å¤šï¼Œå¤§å®¶éƒ½è¿˜å·®ä¸å¤šï¼Œæ‰€ä»¥å·¥ä½œå•ä½çš„è¦æ±‚æ›´å¤šäº†ï¼Œå¯¹äºæˆ‘ä»¬çš„è¦æ±‚æ›´åŠ ä¸¥æ ¼äº†ã€‚åŸæœ¬å¯èƒ½è¾¾åˆ°6å°±èƒ½è¾¾åˆ°å…¬å¸æ‹›è˜æ ‡å‡†ï¼Œä½†æ˜¯ç°åœ¨å¤§æ‰¹å·®åˆ«ä¸å¤§çš„å­¦ç”Ÿè¿›å…¥äººæ‰å¸‚åœºï¼Œç«äº‰ä¸ºæ•°ä¸å¤šçš„èµ„æºï¼Œè¿™æ—¶å…¬å¸åªèƒ½æé«˜æ ‡å‡†ï¼Œ6å·²ç»æ— æ³•æ»¡è¶³äº†ï¼Œå› æ­¤æˆ‘ä»¬è¦åšçš„æ›´å¤šäº†ï¼Œè¢«è¿«çš„é™·å…¥å†…å·ã€‚è¿˜æœ‰æ‹¿è€ƒç ”è€ƒå…¬æ¥è¯´ï¼Œè€ƒç ”æ˜¯å¤§å¤§å¤§å¤§è¶‹åŠ¿ï¼Œæ€ä¹ˆè¯´ï¼Ÿä»…ä»…ä»è¿‘å¹´è€ƒç ”æŠ¥åäººæ•°å°±èƒ½çœ‹å‡ºæ¥ï¼Œå†åŠ ä¸Šå„ç§å·²ç»å·¥ä½œä¸€äº›å¹´çš„åŒå¿—ä»¬ä¹ŸåŠ å…¥äº†è€ƒç ”å¤§å†›ï¼Œè€ƒç ”å·²ç»å¼€å§‹æŒ‘æˆ˜é«˜è€ƒçš„åœ°ä½äº†ã€‚è€Œä¸”ç›®å‰çš„å°±ä¸šå½¢åŠ¿ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œè¿™ä¸ªåˆæ€ä¹ˆè¯´å‘¢ï¼Ÿå¤§æ—¶ä»£ä¸‹æ¯ä¸ªå¿…é¡»æœ‰ä¸å¯æ›¿ä»£æ€§ï¼ˆåœ¨å·¥ä½œä¸­ï¼‰ï¼Œå¦åˆ™ä½ ä¸æ•¢æƒ³è±¡ä»€ä¹ˆæ—¶å€™å„è¿ä¼šé™ä¸´åœ¨ä½ å¤´ä¸Šã€‚è€Œä¸”æ•´ä¸ªç¤¾ä¼šèŠ‚å¥éå¸¸å¿«ï¼ˆå°¤å…¶æ˜¯å¤§åŸå¸‚ï¼‰ï¼Œæ‰“å·¥äººçœŸçš„æ²¡æœ‰é‚£ä¹ˆå¤šé€€è·¯ï¼ŒçœŸçš„å°±æ˜¯æ‰“å·¥äººã€‚å·¥ä½œå‹åŠ›ã€ä½æˆ¿å‹åŠ›ã€å©šè‚²å‹åŠ›å…¨é¢è¢­æ¥ï¼Œä¸æ˜¯äººäººéƒ½èƒ½é¡¶å¾—ä½çš„ã€‚è¿™æ—¶äººä»¬æ¸æ¸å‘ç°ï¼Œå…¬åŠ¡å‘˜ã€äº‹ä¸šå•ä½è¿™ç§å·¥ä½œç¨³å®šè½»æ¾ï¼Œè™½ç„¶å¯èƒ½èµšçš„ä¸å¤šçš„å²—ä½è¿˜æ˜¯æŒºèˆ’æœçš„ã€‚æ‰€ä»¥å‘¢ï¼Œç°åœ¨è€ƒå…¬è€ƒç¼–çš„ä¹Ÿæ˜¯ä¸€å¤§å †ã€‚å½“ç„¶å†…å·çš„èŒƒå›´ä¸æ­¢è¿™äº›ï¼Œå„ç§åª’ä½“æ–°é—»éƒ½èƒ½çœ‹å¾—åˆ°çš„ã€‚</p>
<p>æˆ‘ä»¬æ€æ ·é¢å¯¹å†…å·å‘¢ï¼Ÿè¿˜æ˜¯ä»æºå¤´æ¥çœ‹ï¼Œå¾€ä¸Šçœ‹å†…å·çš„å®šä¹‰ï¼Œçœ‹è§å†…å·å‰æäº†å—ï¼Ÿåœ¨è¿™ï¼šâ€œä¸€ç±»æ–‡åŒ–æ¨¡å¼è¾¾åˆ°äº†æŸç§æœ€ç»ˆçš„å½¢æ€ä»¥åâ€ï¼Œæ˜ç™½äº†å—ï¼Ÿä¸€äº›ã€‚ã€‚ã€‚ä¸€äº›ã€‚ã€‚ã€‚ä¸€äº›ï¼ŒæŒ‡çš„æ˜¯ä¸€äº›å•Šï¼Œæ‰€æœ‰äººéƒ½æƒ³é€‰æ‹©é“è·¯Aï¼Œå¯¼è‡´é“è·¯Aè·¯ä¸Šå¡æ»¡äº†äººï¼Œéƒ½åªèƒ½ç”Ÿå­˜åœ¨å¤¹ç¼ä¸­ï¼Œå–˜æ¯éƒ½æ˜¯å›°éš¾çš„ï¼ŒåŒæ—¶å…¶ä»–é“è·¯Bï¼Œé“è·¯Cï¼Œé“è·¯ã€‚è¡Œäººå¯¥å¯¥æ— å‡ ï¼Œè¿™æ¡è·¯å¯èƒ½æ²¡æœ‰é“è·¯Aé‚£ä¹ˆå®½æ•ï¼Œé‚£ä¹ˆå¹³å¦ï¼Œé‚£ä¹ˆçš„â€œé«˜é«˜åœ¨ä¸Šâ€ï¼Œä¸è¿‡éš¾é“ä¸æ˜¯â€œæ¡æ¡é“è·¯é€šç½—é©¬å—â€ã€‚ä¸Šé¢æˆ‘å·²ç»è¯´çš„å¾ˆæ¸…æ¥šäº†ï¼Œç°åœ¨æ²¡äººæˆ–è€…è¯´å¾ˆå°‘äººæ„¿æ„å»èµ°å…¶ä»–è·¯é€”è‰°è¾›ï¼Œé“è·¯æ›²æŠ˜ï¼Œæ¼«é•¿ä¸”çœ‹ä¸åˆ°å°½å¤´çš„å°è·¯ï¼Œéƒ½æŒ¤ç ´äº†çš®çš„å†²å‘é“è·¯Aï¼Œé‚£èƒ½ä¸å·å—ï¼Ÿ</p>
<p>è¿™é‡Œæˆ‘ä¹Ÿä¸æ•¢è¯´éƒ½å‘ç€å…¶ä»–é“è·¯åŠªåŠ›å§ï¼Œæ¯•ç«Ÿæˆ‘ä¹Ÿæ˜¯é€‰çš„é“è·¯Aå•Šï¼ä½†è¿˜æ˜¯æƒ³è¯´ï¼Œå‹‡æ•¢åŠªåŠ›ã€æ€è€ƒä½ æ´»ç€çš„æ„ä¹‰ä¸ä»·å€¼ï¼Œæ‰¾åˆ°å±äºä½ é“è·¯ï¼Œåšå®šåœ°ã€æ˜‚æ‰¬æŒºèƒ¸åœ°èµ°ä¸‹å»ï¼Œè‡³å°‘è‡ªå·±è§‰å¾—æˆ‘åšçš„æ²¡é”™ï¼Œæˆ‘ä¸ºæˆ‘çš„é€‰æ‹©è‡ªè±ªï¼</p>
<h1 id="æœ€å">æœ€å</h1>
<p>ä¸–ç•Œæ˜¯å‚å·®ä¸é½çš„ï¼Œè´«å¯Œå·®è·éšç€æ—¶é—´å¼€å§‹é€æ¸æ˜¾ç°ã€‚è¿˜æœ‰å¹¸å­˜è€…åå·®çš„å­˜åœ¨ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°çš„éƒ½æ˜¯ä¸€äº›â€œå¹¸å­˜è€…â€ï¼Œä¹Ÿå› æ­¤æˆ‘ä»¬å¯¹ä¸€äº›ä¸œè¥¿çš„è®¤çŸ¥å…¶å®æ˜¯å­˜åœ¨é—®é¢˜çš„ã€‚</p>
<p>æœ€åé€æ‰€æœ‰äºº</p>
<p>ä¸ºä½•å­¤ç‹¬ä¸å¯å…‰è£ äººåªæœ‰ä¸å®Œç¾å€¼å¾—æ­Œé¢‚ è°è¯´æ±¡æ³¥æ»¡èº«çš„ä¸ç®—è‹±é›„
â€”â€”ã€Šå­¤å‹‡è€…ã€‹</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆå­¦Linux</title>
    <url>/article/4416a69b.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li><a
href="https://www.bilibili.com/video/BV1dW411M7xL">https://www.bilibili.com/video/BV1dW411M7xL</a></li>
<li><a
href="https://www.runoob.com/linux/linux-tutorial.html">https://www.runoob.com/linux/linux-tutorial.html</a></li>
</ul>
<h1 id="linux">Linux</h1>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>Linux å†…æ ¸æœ€åˆåªæ˜¯ç”±èŠ¬å…°äººæ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼ˆLinus
Torvaldsï¼‰åœ¨èµ«å°”è¾›åŸºå¤§å­¦ä¸Šå­¦æ—¶å‡ºäºä¸ªäººçˆ±å¥½è€Œç¼–å†™çš„ã€‚</p>
<p>Linux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäº POSIX å’Œ
UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚</p>
<p>Linux èƒ½è¿è¡Œä¸»è¦çš„ UNIX å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ 32 ä½å’Œ
64 ä½ç¡¬ä»¶ã€‚Linux ç»§æ‰¿äº† Unix
ä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚</p>
<h2 id="linux-çš„å‘è¡Œç‰ˆ">Linux çš„å‘è¡Œç‰ˆ</h2>
<p>Linux çš„å‘è¡Œç‰ˆè¯´ç®€å•ç‚¹å°±æ˜¯å°† Linux å†…æ ¸ä¸åº”ç”¨è½¯ä»¶åšä¸€ä¸ªæ‰“åŒ…ã€‚</p>
<p>ç›®å‰å¸‚é¢ä¸Šè¾ƒçŸ¥åçš„å‘è¡Œç‰ˆæœ‰ï¼šUbuntuã€RedHatã€CentOSã€Debianã€Fedoraã€SuSEã€OpenSUSEã€Arch
Linuxã€SolusOS ç­‰ã€‚</p>
<h2 id="linux-åº”ç”¨é¢†åŸŸ">Linux åº”ç”¨é¢†åŸŸ</h2>
<p>ä»Šå¤©å„ç§åœºåˆéƒ½æœ‰ä½¿ç”¨å„ç§ Linux
å‘è¡Œç‰ˆï¼Œä»åµŒå…¥å¼è®¾å¤‡åˆ°è¶…çº§è®¡ç®—æœºï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨é¢†åŸŸç¡®å®šäº†åœ°ä½ï¼Œé€šå¸¸æœåŠ¡å™¨ä½¿ç”¨
LAMPï¼ˆLinux + Apache + MySQL + PHPï¼‰æˆ– LNMPï¼ˆLinux + Nginx+ MySQL +
PHPï¼‰ç»„åˆã€‚</p>
<span id="more"></span>
<h1 id="linux-ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹"><a
href="https://www.runoob.com/linux/linux-system-boot.html">Linux
ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</a></h1>
<h2 id="è¿è¡Œçº§åˆ«">è¿è¡Œçº§åˆ«</h2>
<p>Linuxç³»ç»Ÿæœ‰7ä¸ªè¿è¡Œçº§åˆ«(runlevel)ï¼š</p>
<ul>
<li>è¿è¡Œçº§åˆ«0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</li>
<li>è¿è¡Œçº§åˆ«1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™†</li>
<li>è¿è¡Œçº§åˆ«2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS)</li>
<li>è¿è¡Œçº§åˆ«3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼</li>
<li>è¿è¡Œçº§åˆ«4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™</li>
<li>è¿è¡Œçº§åˆ«5ï¼šX11æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢GUIæ¨¡å¼</li>
<li>è¿è¡Œçº§åˆ«6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</li>
</ul>
<p><strong>åˆ‡æ¢è¿è¡Œçº§åˆ«</strong></p>
<p><code>init n</code></p>
<p><strong>æ‰¾å›rootå¯†ç </strong></p>
<p>é‡å¯ -&gt; 3 ç§’ä¹‹å†…è¦æŒ‰ä¸€ä¸‹å›è½¦ï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢ -&gt; ç„¶åè¾“å…¥e -&gt;
çœ‹åˆ°æ–°ç•Œé¢ï¼Œé€‰ä¸­ç¬¬äºŒè¡Œï¼ˆç¼–è¾‘å†…æ ¸ï¼‰ -&gt; åœ¨è¿™è¾“å…¥<code>1</code>å›è½¦
-&gt; å†æ¬¡è¾“å…¥bï¼Œè¿›å…¥å•ç”¨æˆ·æ¨¡å¼</p>
<p>ä½¿ç”¨passwdä¿®æ”¹å¯†ç </p>
<h1 id="å®‰è£…">å®‰è£…</h1>
<p>å®¿ä¸»æœºç³»ç»Ÿï¼š<code>Windows 10</code></p>
<p>è™šæ‹Ÿæœºè½¯ä»¶ï¼š<a
href="https://my.vmware.com/cn/web/vmware/downloads/info/slug/desktop_end_user_computing/vmware_workstation_pro/16_0"><code>VMware Workstation 16</code></a></p>
<p><code>CentOS</code> æ“ä½œç³»ç»Ÿ <code>ISO</code> é•œåƒï¼š<a
href="http://mirrors.aliyun.com/centos/7/isos/x86_64/">CentOS 7</a></p>
<p>SSHç»ˆç«¯è½¯ä»¶ï¼š<a
href="https://mobaxterm.mobatek.net/"><code>MobaXterm</code></a></p>
<h2 id="å‚è€ƒ-1">å‚è€ƒ</h2>
<p>Bç«™è§†é¢‘ï¼š<a
href="https://www.bilibili.com/video/BV1bA411b7vs">https://www.bilibili.com/video/BV1bA411b7vs</a></p>
<p>è§†é¢‘é…å¥—ï¼ˆwindowså®‰è£…ï¼‰ï¼š<a
href="https://mp.weixin.qq.com/s/onVwwEQ1DAwbvK7qS2YNxg">https://mp.weixin.qq.com/s/onVwwEQ1DAwbvK7qS2YNxg</a></p>
<p>csdnï¼š<a
href="https://blog.csdn.net/java_xinshou1/article/details/100010099">https://blog.csdn.net/java_xinshou1/article/details/100010099</a>ã€<a
href="https://blog.csdn.net/qq_40950957/article/details/80467513">https://blog.csdn.net/qq_40950957/article/details/80467513</a></p>
<p>èœé¸Ÿæ•™ç¨‹ï¼š<a
href="https://www.runoob.com/linux/linux-install.html">https://www.runoob.com/linux/linux-install.html</a></p>
<p>CentOSï¼šhttp://mirrors.aliyun.com/centos/7/isos/x86_64/</p>
<h1 id="vmtools">VMTools</h1>
<p>å¯ä»¥å»ºç«‹å…±äº«ç›®å½•ï¼Œå‰ªåˆ‡æ¿å…±äº«</p>
<h1 id="linuxç›®å½•ç»“æ„">Linuxç›®å½•ç»“æ„</h1>
<figure>
<img data-src="https://www.runoob.com/wp-content/uploads/2014/06/d0c50-linux2bfile2bsystem2bhierarchy.jpg"
alt="Linuxç›®å½•ç»“æ„" />
<figcaption aria-hidden="true">Linuxç›®å½•ç»“æ„</figcaption>
</figure>
<p><a
href="https://www.runoob.com/linux/linux-system-contents.html">https://www.runoob.com/linux/linux-system-contents.html</a></p>
<h1 id="linux-vivim">Linux vi/vim</h1>
<p>æ‰€æœ‰çš„ Unix Like ç³»ç»Ÿéƒ½ä¼šå†…å»º vi
æ–‡ä¹¦ç¼–è¾‘å™¨ï¼Œå…¶ä»–çš„æ–‡ä¹¦ç¼–è¾‘å™¨åˆ™ä¸ä¸€å®šä¼šå­˜åœ¨ã€‚</p>
<p>ä½†æ˜¯ç›®å‰æˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯ vim ç¼–è¾‘å™¨ã€‚</p>
<p>vim
å…·æœ‰ç¨‹åºç¼–è¾‘çš„èƒ½åŠ›ï¼Œå¯ä»¥ä¸»åŠ¨çš„ä»¥å­—ä½“é¢œè‰²è¾¨åˆ«è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œæ–¹ä¾¿ç¨‹åºè®¾è®¡ã€‚</p>
<h2 id="vivim-çš„ä½¿ç”¨">vi/vim çš„ä½¿ç”¨</h2>
<p>åŸºæœ¬ä¸Š vi/vim å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å‘½ä»¤æ¨¡å¼ï¼ˆCommand
modeï¼‰</strong>ï¼Œ<strong>è¾“å…¥æ¨¡å¼ï¼ˆInsert
modeï¼‰</strong>å’Œ<strong>åº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰</strong>ã€‚
è¿™ä¸‰ç§æ¨¡å¼çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p>
<h2 id="å‘½ä»¤æ¨¡å¼">å‘½ä»¤æ¨¡å¼ï¼š</h2>
<p>ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi/vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ã€‚</p>
<p>æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶æŒ‰ä¸‹iï¼Œå¹¶ä¸ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œiè¢«å½“ä½œäº†ä¸€ä¸ªå‘½ä»¤ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ï¼š</p>
<ul>
<li><strong>i</strong> åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œä»¥è¾“å…¥å­—ç¬¦ã€‚</li>
<li><strong>x</strong> åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚</li>
<li><strong>:</strong> åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œä»¥åœ¨æœ€åº•ä¸€è¡Œè¾“å…¥å‘½ä»¤ã€‚</li>
</ul>
<p>è‹¥æƒ³è¦ç¼–è¾‘æ–‡æœ¬ï¼šå¯åŠ¨Vimï¼Œè¿›å…¥äº†å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰ä¸‹iï¼Œåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ã€‚</p>
<p>å‘½ä»¤æ¨¡å¼åªæœ‰ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå› æ­¤ä»è¦ä¾é åº•çº¿å‘½ä»¤æ¨¡å¼è¾“å…¥æ›´å¤šå‘½ä»¤ã€‚</p>
<h2 id="è¾“å…¥æ¨¡å¼">è¾“å…¥æ¨¡å¼</h2>
<p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹iå°±è¿›å…¥äº†è¾“å…¥æ¨¡å¼ã€‚</p>
<p>åœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”®ï¼š</p>
<ul>
<li><strong>å­—ç¬¦æŒ‰é”®ä»¥åŠShiftç»„åˆ</strong>ï¼Œè¾“å…¥å­—ç¬¦</li>
<li><strong>ENTER</strong>ï¼Œå›è½¦é”®ï¼Œæ¢è¡Œ</li>
<li><strong>BACK SPACE</strong>ï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦</li>
<li><strong>DEL</strong>ï¼Œåˆ é™¤é”®ï¼Œåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦</li>
<li><strong>æ–¹å‘é”®</strong>ï¼Œåœ¨æ–‡æœ¬ä¸­ç§»åŠ¨å…‰æ ‡</li>
<li><strong>HOME</strong>/<strong>END</strong>ï¼Œç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–/è¡Œå°¾</li>
<li><strong>Page Up</strong>/<strong>Page Down</strong>ï¼Œä¸Š/ä¸‹ç¿»é¡µ</li>
<li><strong>Insert</strong>ï¼Œåˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿</li>
<li><strong>ESC</strong>ï¼Œé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼</li>
</ul>
<h2 id="åº•çº¿å‘½ä»¤æ¨¡å¼">åº•çº¿å‘½ä»¤æ¨¡å¼</h2>
<p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹:ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</p>
<p>åº•çº¿å‘½ä»¤æ¨¡å¼å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼Œå¯ç”¨çš„å‘½ä»¤éå¸¸å¤šã€‚</p>
<p>åœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒåŸºæœ¬çš„å‘½ä»¤æœ‰ï¼ˆå·²ç»çœç•¥äº†å†’å·ï¼‰ï¼š</p>
<ul>
<li>q é€€å‡ºç¨‹åº</li>
<li>w ä¿å­˜æ–‡ä»¶</li>
</ul>
<p>æŒ‰ESCé”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</p>
<h2 id="å¿«æ·é”®">å¿«æ·é”®</h2>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th>å¿«æ·é”®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸‹ä¸€è¡Œ</td>
</tr>
<tr class="even">
<td>-</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸Šä¸€è¡Œ</td>
</tr>
<tr class="odd">
<td>dd</td>
<td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€æ•´è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr class="even">
<td>ndd</td>
<td>n ä¸ºæ•°å­—ã€‚åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 5dd åˆ™æ˜¯åˆ é™¤ 5 è¡Œ
(å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>yy</td>
<td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr class="even">
<td>nyy</td>
<td>n ä¸ºæ•°å­—ã€‚å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 5yy åˆ™æ˜¯å¤åˆ¶ 5 è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>p</td>
<td>ç²˜è´´</td>
</tr>
<tr class="even">
<td>/word</td>
<td>å‘å…‰æ ‡ä¹‹ä¸‹æœç´¢</td>
</tr>
<tr class="odd">
<td>?/word</td>
<td>å‘å…‰æ ‡ä¹‹ä¸Šæœç´¢</td>
</tr>
<tr class="even">
<td>n</td>
<td>å‘ä¸‹æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…</td>
</tr>
<tr class="odd">
<td>N</td>
<td>å‘ä¸‹æ‰¾ä¸Šä¸€ä¸ªåŒ¹é…</td>
</tr>
<tr class="even">
<td>:set nu</td>
<td>æ˜¾ç¤ºè¡Œå·</td>
</tr>
<tr class="odd">
<td>:set nonu</td>
<td>ä¸ set nu ç›¸åï¼Œä¸ºå–æ¶ˆè¡Œå·ï¼</td>
</tr>
<tr class="even">
<td>G</td>
<td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„æœ€åä¸€è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>nG</td>
<td>n ä¸ºæ•°å­—ã€‚ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ n è¡Œã€‚å¯é…åˆ :set nu</td>
</tr>
<tr class="even">
<td>gg</td>
<td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ä¸€è¡Œï¼Œç›¸å½“äº 1G å•Šï¼ (å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>n<Enter></td>
<td>n ä¸ºæ•°å­—ã€‚å…‰æ ‡å‘ä¸‹ç§»åŠ¨ n è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr class="even">
<td>u</td>
<td>å¤åŸå‰ä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>[Ctrl]+r</td>
<td>é‡åšä¸Šä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td>
</tr>
<tr class="even">
<td>[Ctrl] + [f]</td>
<td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Down]æŒ‰é”® (å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>[Ctrl] + [b]</td>
<td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Up] æŒ‰é”® (å¸¸ç”¨)</td>
</tr>
<tr class="even">
<td>0 æˆ–åŠŸèƒ½é”®[Home]</td>
<td>è¿™æ˜¯æ•°å­—ã€ 0 ã€ï¼šç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€å‰é¢å­—ç¬¦å¤„ (å¸¸ç”¨)</td>
</tr>
<tr class="odd">
<td>$ æˆ–åŠŸèƒ½é”®[End]</td>
<td>ç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€åé¢å­—ç¬¦å¤„(å¸¸ç”¨)</td>
</tr>
</tbody>
</table>
<h1 id="å…³æœºé‡å¯å‘½ä»¤">å…³æœºé‡å¯å‘½ä»¤</h1>
<p><strong>shutdown</strong></p>
<ul>
<li>shutdown -h now ç«‹å³å…³æœº</li>
<li>shutdown -h 1 ä¸€åˆ†é’Ÿåå…³æœº</li>
<li>shutdown -r now ç«‹å³é‡å¯</li>
</ul>
<p><strong>halt</strong></p>
<p>â€‹ ç­‰åŒäºç›´æ¥å…³æœº</p>
<p><strong>reboot</strong></p>
<p>â€‹ é‡å¯ç³»ç»Ÿ</p>
<p><strong>sync</strong></p>
<p>â€‹ æŠŠå†…å­˜æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­</p>
<h1 id="å¸®åŠ©æŒ‡ä»¤">å¸®åŠ©æŒ‡ä»¤</h1>
<p><code>man æŒ‡ä»¤</code></p>
<p><code>help æŒ‡ä»¤</code></p>
<h1 id="ç”¨æˆ·ç®¡ç†">ç”¨æˆ·ç®¡ç†</h1>
<p><strong>ç”¨æˆ·æ³¨é”€</strong></p>
<p><code>logout</code></p>
<p><a
href="https://www.runoob.com/linux/linux-user-manage.html">https://www.runoob.com/linux/linux-user-manage.html</a></p>
<p><strong>æ·»åŠ ç”¨æˆ·</strong></p>
<p><code>useradd é€‰é¡¹ ç”¨æˆ·å</code></p>
<p><code>-d</code>æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•</p>
<p><code>-g</code>æŒ‡å®šç”¨æˆ·ç»„</p>
<p><strong>æŒ‡å®š/ä¿®æ”¹å¯†ç </strong></p>
<p><code>passwd é€‰é¡¹ ç”¨æˆ·å</code></p>
<p><strong>åˆ é™¤ç”¨æˆ·</strong></p>
<p><code>userdel é€‰é¡¹ ç”¨æˆ·å</code></p>
<p>å¸¦é€‰é¡¹<code>-r</code>åˆ™æŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤</p>
<p><strong>ä¿®æ”¹ç”¨æˆ·</strong></p>
<p><code>usermod é€‰é¡¹ ç”¨æˆ·å</code></p>
<p>é€‰é¡¹ä¸<code>useradd</code>ä¸€æ ·</p>
<p><strong>æŸ¥è¯¢ç”¨æˆ·</strong></p>
<p><code>id ç”¨æˆ·å</code></p>
<p><strong>åˆ‡æ¢ç”¨æˆ·</strong></p>
<p><code>su ç”¨æˆ·å</code></p>
<p>é«˜æƒé™åˆ‡æ¢ä½æƒé™ä¸ç”¨è¾“å¯†ç </p>
<p>å½“éœ€è¦è¿”å›åŸæ¥ç”¨æˆ·æ—¶ä½¿ç”¨<code>exit</code></p>
<p><strong>æŸ¥çœ‹å½“å‰ç”¨æˆ·</strong></p>
<p><code>who am i</code></p>
<h2 id="ç”¨æˆ·ç»„">ç”¨æˆ·ç»„</h2>
<p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚</p>
<p><strong>åˆ›å»ºç»„</strong></p>
<p><code>groupadd é€‰é¡¹ ç»„å</code></p>
<p><strong>åˆ é™¤ç»„</strong></p>
<p><code>groupdel ç»„å</code></p>
<p><strong>ä¿®æ”¹ç”¨æˆ·ç»„</strong></p>
<p><code>usermod -g ç»„å ç”¨æˆ·å</code></p>
<h1 id="ä¸ç”¨æˆ·æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶">ä¸ç”¨æˆ·æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶</h1>
<p>/etc/passwd, /etc/shadow, /etc/group</p>
<p><strong>/etc/passwd</strong></p>
<p>Linuxç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·éƒ½åœ¨/etc/passwdæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„è®°å½•è¡Œï¼Œå®ƒè®°å½•äº†è¿™ä¸ªç”¨æˆ·çš„ä¸€äº›åŸºæœ¬å±æ€§ã€‚</p>
<p>è¿™ä¸ªæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å¯è¯»çš„ã€‚</p>
<p><code>ç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</code></p>
<p><strong>/etc/shadow</strong></p>
<p>å­˜æ”¾åŠ å¯†åçš„å¯†ç ã€‚</p>
<p><code>ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿—</code></p>
<p><strong>/etc/group</strong></p>
<p>å­˜æ”¾ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯.</p>
<p><code>ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨</code></p>
<h1 id="æ–‡ä»¶åŸºæœ¬å±æ€§ç±»">æ–‡ä»¶åŸºæœ¬å±æ€§ç±»</h1>
<p>åœ¨ Linux ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨è¿™ä¸ªæ–‡ä»¶æ˜¯ç›®å½•ã€æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶ç­‰ç­‰ã€‚</p>
<ul>
<li>å½“ä¸º <strong>d</strong> åˆ™æ˜¯ç›®å½•</li>
<li>å½“ä¸º <strong>-</strong> åˆ™æ˜¯æ–‡ä»¶ï¼›</li>
<li>è‹¥æ˜¯ <strong>l</strong> åˆ™è¡¨ç¤ºä¸ºé“¾æ¥æ–‡æ¡£(link file)ï¼›</li>
<li>è‹¥æ˜¯ <strong>b</strong>
åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æ¥å£è®¾å¤‡(å¯éšæœºå­˜å–è£…ç½®)ï¼›</li>
<li>è‹¥æ˜¯ <strong>c</strong>
åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡(ä¸€æ¬¡æ€§è¯»å–è£…ç½®)ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ï¼Œä»¥ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡ä¸º <strong>rwx</strong>
çš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆã€‚å…¶ä¸­ï¼Œ <strong>r</strong> ä»£è¡¨å¯è¯»(read)ã€
<strong>w</strong> ä»£è¡¨å¯å†™(write)ã€ <strong>x</strong>
ä»£è¡¨å¯æ‰§è¡Œ(execute)ã€‚
è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªæƒé™çš„ä½ç½®ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºç°å‡å·
<strong>-</strong> è€Œå·²ã€‚</p>
<figure>
<img data-src="https://www.runoob.com/wp-content/uploads/2014/06/file-llls22.jpg"
alt="æ–‡ä»¶åŸºæœ¬å±æ€§" />
<figcaption aria-hidden="true">æ–‡ä»¶åŸºæœ¬å±æ€§</figcaption>
</figure>
<p>æ¯ä¸ªæ–‡ä»¶çš„å±æ€§ç”±å·¦è¾¹ç¬¬ä¸€éƒ¨åˆ†çš„ 10 ä¸ªå­—ç¬¦æ¥ç¡®å®šï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p>
<figure>
<img data-src="https://www.runoob.com/wp-content/uploads/2014/06/363003_1227493859FdXT.png"
alt="åŸºæœ¬è¯´æ˜" />
<figcaption aria-hidden="true">åŸºæœ¬è¯´æ˜</figcaption>
</figure>
<p>ä»å·¦è‡³å³ç”¨ <strong>0-9</strong> è¿™äº›æ•°å­—æ¥è¡¨ç¤ºã€‚</p>
<p>ç¬¬ <strong>0</strong> ä½ç¡®å®šæ–‡ä»¶ç±»å‹ï¼Œç¬¬ <strong>1-3</strong>
ä½ç¡®å®šå±ä¸»ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚</p>
<p>ç¬¬4-6ä½ç¡®å®šå±ç»„ï¼ˆæ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œç¬¬7-9ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚</p>
<p>ç›®å½•æ˜¾ç¤º4096</p>
<h1 id="æƒé™ç®¡ç†">æƒé™ç®¡ç†</h1>
<p><strong>æ–‡ä»¶ç›®å½•æ‰€æœ‰è€…</strong></p>
<p>é»˜è®¤ç”¨æˆ·åˆ›å»ºæ–‡ä»¶åï¼Œæ–‡ä»¶æ‰€æœ‰ç»„å³ä¸ºç”¨æˆ·æ‰€åœ¨ç»„</p>
<p><strong>æŸ¥çœ‹æ‰€æœ‰è€…</strong></p>
<ul>
<li><p>groupadd policeï¼šåˆ›å»ºpoliceç»„</p></li>
<li><p>useradd tom -g police tomï¼šåˆ›å»ºtomè¿›policeç»„</p></li>
<li><p>passwd tomï¼šä¿®æ”¹/è®¾ç½®tomå¯†ç </p></li>
<li><p>åˆ‡æ¢åˆ°tomç”¨æˆ·</p></li>
<li><p>touch ok.txtï¼šåˆ›å»ºok.txtæ–‡ä»¶</p></li>
<li><p>ls -ahlï¼šæŸ¥çœ‹å½“å‰ç›®å½•æ‰€æœ‰è€…</p></li>
</ul>
<p><strong>ä¿®æ”¹æ‰€æœ‰è€…</strong></p>
<ul>
<li>chown tom apple.txtï¼šä¿®æ”¹apple.txtæ–‡ä»¶æ‰€æœ‰è€…ä¸ºtomï¼Œä½†ç»„æ²¡å˜</li>
<li>chown -R tom kkkï¼šå°†kkkç›®å½•ä¸‹æ‰€æœ‰é€’å½’æ‰€æœ‰è€…æ”¹ä¸ºtom</li>
<li>chown user/group ï¼šåŒæ—¶ä¿®æ”¹æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„</li>
</ul>
<p><strong>ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„</strong></p>
<ul>
<li>chgrp police orange.txtï¼šå°†orange.txtæ–‡ä»¶æ‰€åœ¨ç»„ä¿®æ”¹ä¸ºpoliceç»„</li>
<li>chgrp -R police kkkï¼šå°†kkkç›®å½•ä¸‹æ‰€æœ‰é€’å½’æ‰€åœ¨ç»„æ”¹ä¸ºpolice</li>
</ul>
<p><strong>å…¶ä»–ç»„</strong></p>
<p>é™¤æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„çš„ç”¨æˆ·å¤–ï¼Œç³»ç»Ÿçš„å…¶ä»–ç”¨æˆ·éƒ½æ˜¯æ–‡ä»¶çš„å…¶ä»–ç»„</p>
<p><strong>ä¿®æ”¹æƒé™</strong></p>
<p><strong>chmodç¬¦å·</strong></p>
<ul>
<li>uï¼šæ‰€æœ‰è€…ï¼›gï¼šæ‰€åœ¨ç»„ï¼›oï¼šå…¶ä»–äººï¼›aï¼šæ‰€æœ‰äºº</li>
<li>chmod u=rwx,g=rx,o=rw
abc.txtï¼šå¯¹äºabc.txtï¼Œæ‰€æœ‰è€…rwxï¼Œæ‰€åœ¨ç»„rxï¼Œå…¶ä»–äººrw</li>
<li>chmod u-x,g+w abc.txtï¼šå¯¹äºabc.txtï¼Œæ‰€æœ‰è€…å‡å»xï¼Œæ‰€åœ¨ç»„åŠ ä¸Šw</li>
<li>chmod a+wï¼šå¯¹æ‰€æœ‰äººåŠ ä¸Šw</li>
</ul>
<p><strong>chmodæ•°å­—</strong></p>
<p>å„æƒé™çš„åˆ†æ•°å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>r:4</li>
<li>w:2</li>
<li>x:1</li>
</ul>
<p>chmod 754 abc.txtï¼šä¿®æ”¹æƒé™ä¸ºrwx r-x r--</p>
<p>æƒé™ä¿®æ”¹åéœ€è¦é‡æ–°ç™»å½•æ‰èƒ½ç”Ÿæ•ˆ</p>
<h1 id="æ–‡ä»¶ç›®å½•ç±»æŒ‡ä»¤">æ–‡ä»¶ç›®å½•ç±»æŒ‡ä»¤</h1>
<h2 id="å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤">å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹å‡ ä¸ªå¸¸è§çš„å¤„ç†ç›®å½•çš„å‘½ä»¤å§ï¼š</p>
<ul>
<li>lsï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlist filesï¼‰: åˆ—å‡ºç›®å½•åŠæ–‡ä»¶å
<ul>
<li>-a ï¼šå…¨éƒ¨çš„æ–‡ä»¶ï¼Œè¿åŒéšè—æ–‡ä»¶( å¼€å¤´ä¸º . çš„æ–‡ä»¶)
ä¸€èµ·åˆ—å‡ºæ¥(å¸¸ç”¨)</li>
<li>-d ï¼šä»…åˆ—å‡ºç›®å½•æœ¬èº«ï¼Œè€Œä¸æ˜¯åˆ—å‡ºç›®å½•å†…çš„æ–‡ä»¶æ•°æ®(å¸¸ç”¨)</li>
<li>-l ï¼šé•¿æ•°æ®ä¸²åˆ—å‡ºï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™ç­‰ç­‰æ•°æ®ï¼›(å¸¸ç”¨)</li>
<li>-al ~ï¼šå°†å®¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ—å‡ºæ¥(å«å±æ€§ä¸éšè—æ¡£)</li>
</ul></li>
<li>cdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šchange directoryï¼‰ï¼šåˆ‡æ¢ç›®å½•
<ul>
<li>cd ~ï¼šå›åˆ°å®¶ç›®å½•</li>
<li>cd ..ï¼šå›åˆ°ä¸Šçº§ç›®å½•</li>
<li>cd ./ï¼šå½“å‰ç›®å½•ä¸‹çš„</li>
</ul></li>
<li>pwdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šprint work directoryï¼‰ï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•</li>
<li>mkdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmake directoryï¼‰ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•
<ul>
<li>é»˜è®¤åªèƒ½ä¸€çº§ä¸€çº§åˆ›å»º</li>
<li>-p ï¼šå¸®åŠ©ä½ ç›´æ¥å°†æ‰€éœ€è¦çš„ç›®å½•(åŒ…å«ä¸Šä¸€çº§ç›®å½•)é€’å½’åˆ›å»ºèµ·æ¥ï¼</li>
</ul></li>
<li>rmdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremove directoryï¼‰ï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•
<ul>
<li>ä¸èƒ½åˆ é™¤éç©ºç›®å½•</li>
<li>rm -rf åˆ é™¤éç©ºç›®å½•</li>
</ul></li>
<li>cpï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šcopy fileï¼‰: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•
<ul>
<li>cp æ¥æºæ¡£(source) ç›®æ ‡æ¡£(destination)</li>
<li>cp -rï¼šé€’å½’å¤åˆ¶</li>
<li>ï¼šå¼ºåˆ¶è¦†ç›–ï¼Œä¸ä¼šæç¤º</li>
</ul></li>
<li>rmï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremoveï¼‰: åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•
<ul>
<li>rm -rfï¼šåˆ é™¤ç›®å½•</li>
<li>rm -rï¼šé€’å½’åˆ é™¤</li>
<li>rm -fï¼šåˆ é™¤æ–‡ä»¶ä¸æç¤º</li>
<li>rm -iï¼šæç¤º</li>
</ul></li>
<li>mvï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmove fileï¼‰: ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§°
<ul>
<li>mv source destinationï¼šç§»åŠ¨/é‡å‘½å</li>
<li>mv -fï¼šå¼ºåˆ¶ç§»åŠ¨ï¼Œä¸æç¤º</li>
<li>mv -iï¼šæç¤º</li>
<li>mv -uï¼šæ›´æ–°åˆ™æ›´æ–°</li>
</ul></li>
<li>touch ï¼šLinux
touchå‘½ä»¤ç”¨äºä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æ—¶é—´å±æ€§ï¼ŒåŒ…æ‹¬å­˜å–æ—¶é—´å’Œæ›´æ”¹æ—¶é—´ã€‚è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚ï¼ˆå¯ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæ–‡ä»¶ï¼‰</li>
</ul>
<h2 id="æ–‡ä»¶å†…å®¹æŸ¥çœ‹">æ–‡ä»¶å†…å®¹æŸ¥çœ‹</h2>
<p>Linuxç³»ç»Ÿä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼š</p>
<ul>
<li>cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹
<ul>
<li>åªè¯»æ–¹å¼æ‰“å¼€</li>
<li>cat -nï¼šæŸ¥çœ‹æ˜¾ç¤ºè¡Œå·</li>
<li>cat file | moreï¼šåˆ†é¡µæµè§ˆï¼Œç©ºæ ¼ä¸‹ä¸€é¡µ</li>
</ul></li>
<li>tac ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼
<ul>
<li></li>
</ul></li>
<li>nl æ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºé“è¾“å‡ºè¡Œå·ï¼</li>
<li>more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹
<ul>
<li>ç©ºæ ¼ï¼šä¸‹ä¸€é¡µ</li>
<li>enterï¼šä¸‹ä¸€è¡Œ</li>
<li>bï¼šä¸Šä¸€é¡µ</li>
<li>qï¼šç«‹å³ç»“æŸæµè§ˆ</li>
</ul></li>
<li>less ä¸ more ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥å¾€å‰ç¿»é¡µï¼
<ul>
<li>å¿«æ·é”®ä¸moreç±»ä¼¼</li>
</ul></li>
<li>head åªçœ‹å¤´å‡ è¡Œ
<ul>
<li>head -nï¼šå¤´nè¡Œ</li>
</ul></li>
<li>tail åªçœ‹å°¾å·´å‡ è¡Œ
<ul>
<li>tail -nï¼šå°¾nè¡Œ</li>
</ul></li>
</ul>
<p><strong>"&gt;"æŒ‡ä»¤ä¸"&gt;&gt;"æŒ‡ä»¤</strong></p>
<ul>
<li>"&gt;"è¦†ç›–ï¼Œä¸å­˜åœ¨å°±åˆ›å»º</li>
<li>ls -l &gt; a.txt</li>
<li>"&gt;&gt;"è¿½åŠ </li>
<li>ls -l &gt;&gt; b.txt</li>
</ul>
<p><strong>echo</strong></p>
<ul>
<li>å­—ç¬¦ä¸²è¾“å‡º</li>
<li>echo $PATHï¼šè¾“å‡ºç¯å¢ƒå˜é‡</li>
</ul>
<p><strong>ln</strong></p>
<ul>
<li>è¿æ¥ï¼šç¡¬è¿æ¥ï¼›è½¯è¿æ¥ï¼ˆå¿«æ·æ–¹å¼ï¼‰</li>
<li>ln -s æ–‡ä»¶æˆ–ç›®å½• é“¾æ¥</li>
<li>åˆ é™¤é“¾æ¥ rm -rf é“¾æ¥</li>
<li>pwdæŸ¥çœ‹æ—¶ä»æ˜¯å½“å‰ç›®å½•</li>
</ul>
<p><strong>history</strong></p>
<ul>
<li>æŸ¥çœ‹å·²æ‰§è¡Œçš„æŒ‡ä»¤</li>
<li>history nï¼šæœ€è¿‘næ¡</li>
<li>!nï¼šæ‰§è¡Œå†å²ç¼–å·nçš„æŒ‡ä»¤</li>
</ul>
<h1 id="æ—¶é—´æ—¥æœŸç±»">æ—¶é—´æ—¥æœŸç±»</h1>
<p><strong>date</strong></p>
<ul>
<li>dataï¼šå½“å‰å¹´æœˆæ—¥ æ˜ŸæœŸ æ—¶åˆ†ç§’</li>
<li>data "+%Y-%m-%d"ï¼šå½“å‰å¹´æœˆæ—¥</li>
<li>date "+%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S"ï¼šå½“å‰å¹´æœˆæ—¥æ—¶åˆ†ç§’</li>
<li>data -sï¼šè®¾ç½®æ—¶é—´</li>
</ul>
<p><strong>cal</strong></p>
<ul>
<li>calï¼šå½“æœˆæ—¥å†</li>
<li>cal å¹´ï¼šæŸå¹´æ—¥å†</li>
</ul>
<h1 id="æœç´¢æŸ¥æ‰¾ç±»">æœç´¢æŸ¥æ‰¾ç±»</h1>
<p><strong>find</strong></p>
<ul>
<li>find /home -name hello.txtï¼šåœ¨homeç›®å½•æŸ¥æ‰¾åå­—ä¸ºhello.txtæ–‡ä»¶</li>
<li>find /opt -user nobodyï¼šåœ¨optç›®å½•ä¸‹æŸ¥æ‰¾ç”¨æˆ·åä¸ºnobodyæ–‡ä»¶</li>
<li>find / -size +20Mï¼šæ ¹ç›®å½•ä¸‹æŸ¥æ‰¾å¤§äº20Mçš„æ–‡ä»¶</li>
<li>find /home *.txtï¼šæŸ¥æ‰¾homeç›®å½•ä¸‹txtæ–‡ä»¶</li>
</ul>
<p><strong>locate</strong></p>
<p>ocate ä¸ find ä¸åŒ: find æ˜¯å»ç¡¬ç›˜æ‰¾ï¼Œlocate åªåœ¨ /var/lib/slocate
èµ„æ–™åº“ä¸­æ‰¾ã€‚</p>
<p>locate çš„é€Ÿåº¦æ¯” find
å¿«ï¼Œå®ƒå¹¶ä¸æ˜¯çœŸçš„æŸ¥æ‰¾ï¼Œè€Œæ˜¯æŸ¥æ•°æ®åº“ï¼Œä¸€èˆ¬æ–‡ä»¶æ•°æ®åº“åœ¨
/var/lib/slocate/slocate.db ä¸­ï¼Œæ‰€ä»¥ locate
çš„æŸ¥æ‰¾å¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œè€Œæ˜¯ä»¥æ•°æ®åº“çš„æ›´æ–°ä¸ºå‡†ï¼Œä¸€èˆ¬æ˜¯ç³»ç»Ÿè‡ªå·±ç»´æŠ¤ï¼Œä¹Ÿå¯ä»¥æ‰‹å·¥å‡çº§æ•°æ®åº“
ï¼Œå‘½ä»¤ä¸ºï¼šupdatedb</p>
<ul>
<li>locate æ–‡ä»¶åï¼šæŸ¥æ‰¾æ–‡ä»¶</li>
</ul>
<p><strong>grep</strong></p>
<p>grep å‘½ä»¤ç”¨äºæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li>ä¸|ä¸€èµ·ä½¿ç”¨</li>
<li>cat hello.txt | grep helloï¼šæŸ¥æ‰¾</li>
<li>cat hello.txt | grep -n helloï¼šæŸ¥æ‰¾å¹¶æ˜¾ç¤ºè¡Œå·</li>
</ul>
<h1 id="å‹ç¼©å’Œè§£å‹ç¼©ç±»">å‹ç¼©å’Œè§£å‹ç¼©ç±»</h1>
<p><strong>gzip</strong></p>
<ul>
<li>å‹ç¼©ï¼Œä¸ä¿ç•™åŸæ–‡ä»¶</li>
</ul>
<p><strong>gunzip</strong></p>
<ul>
<li>è§£å‹</li>
</ul>
<p><strong>zip</strong></p>
<ul>
<li>zip -r mypackage.zip ./test/ï¼šå°†/test/ç›®å½•è§£å‹åˆ° mypackage.zip</li>
</ul>
<p><strong>unzip</strong></p>
<ul>
<li>unzip -d ./xm/mypackage.zipï¼šå°†mypackage.zipè§£å‹åˆ°xmç›®å½•ä¸‹</li>
</ul>
<p><strong>tar</strong></p>
<ul>
<li>tar -zcvf a.tar.gz a.txt b.txtï¼šå°†a.txtå’Œb.txtå‹ç¼©åˆ°a.tar.gz</li>
<li>tar -zcvf myhome.tar.gz /home/ï¼šå¯¹æ•´ä¸ªæ–‡ä»¶/ç›®å½•å‹ç¼©</li>
<li>tar -zxvf a.tar.gzï¼šè§£å‹åˆ°å½“å‰ç›®å½•</li>
<li>tar -zxvf myhome.tar -C /opt/ï¼šè§£å‹æŒ‡å®šç›®å½•ï¼Œç›®å½•è¦å­˜åœ¨</li>
</ul>
<h1 id="ä»»åŠ¡è°ƒåº¦">ä»»åŠ¡è°ƒåº¦</h1>
<p>Linux crontabæ˜¯ç”¨æ¥å®šæœŸæ‰§è¡Œç¨‹åºçš„å‘½ä»¤ã€‚</p>
<p>å½“å®‰è£…å®Œæˆæ“ä½œç³»ç»Ÿä¹‹åï¼Œé»˜è®¤ä¾¿ä¼šå¯åŠ¨æ­¤ä»»åŠ¡è°ƒåº¦å‘½ä»¤ã€‚</p>
<p>crond
å‘½ä»¤æ¯åˆ†é”ºä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„å·¥ä½œä¾¿ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥å·¥ä½œã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong>æ–°åˆ›å»ºçš„ cron ä»»åŠ¡ï¼Œä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè‡³å°‘è¦è¿‡ 2
åˆ†é’Ÿåæ‰å¯ä»¥ï¼Œå½“ç„¶ä½ å¯ä»¥é‡å¯ cron æ¥é©¬ä¸Šæ‰§è¡Œã€‚</p>
<p>è€Œ linux ä»»åŠ¡è°ƒåº¦çš„å·¥ä½œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š</p>
<ul>
<li>1ã€ç³»ç»Ÿæ‰§è¡Œçš„å·¥ä½œï¼šç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚å¤‡ä»½ç³»ç»Ÿæ•°æ®ã€æ¸…ç†ç¼“å­˜</li>
<li>2ã€ä¸ªäººæ‰§è¡Œçš„å·¥ä½œï¼šæŸä¸ªç”¨æˆ·å®šæœŸè¦åšçš„å·¥ä½œï¼Œä¾‹å¦‚æ¯éš”10åˆ†é’Ÿæ£€æŸ¥é‚®ä»¶æœåŠ¡å™¨æ˜¯å¦æœ‰æ–°ä¿¡ï¼Œè¿™äº›å·¥ä½œå¯ç”±æ¯ä¸ªç”¨æˆ·è‡ªè¡Œè®¾ç½®</li>
</ul>
<p>å¦‚æœæ˜¯ç®€å•çš„ä»»åŠ¡ï¼Œå¯ä»¥ä¸ç”¨å†™è„šæœ¬ï¼Œç›´æ¥åœ¨crontabä¸­åŠ å…¥ä»»åŠ¡å³å¯</p>
<p>å¦‚æœä»»åŠ¡å¤æ‚ï¼Œéœ€è¦å†™è„šæœ¬</p>
<p><strong>è¯­æ³•</strong></p>
<p>crontab [é€‰é¡¹]</p>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li>-e : æ‰§è¡Œæ–‡å­—ç¼–è¾‘å™¨æ¥è®¾å®šæ—¶ç¨‹è¡¨</li>
<li>-r : åˆ é™¤ç›®å‰çš„æ—¶ç¨‹è¡¨</li>
<li>-l : åˆ—å‡ºç›®å‰çš„æ—¶ç¨‹è¡¨</li>
</ul>
<p><strong>æ—¶é—´æ ¼å¼å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*    *    *    *    *</span><br><span class="line">-    -    -    -    -</span><br><span class="line">|    |    |    |    |</span><br><span class="line">|    |    |    |    +----- æ˜ŸæœŸä¸­æ˜ŸæœŸå‡  (0 - 6) (æ˜ŸæœŸå¤© ä¸º0)</span><br><span class="line">|    |    |    +---------- æœˆä»½ (1 - 12) </span><br><span class="line">|    |    +--------------- ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤© (1 - 31)</span><br><span class="line">|    +-------------------- å°æ—¶ (0 - 23)</span><br><span class="line">+------------------------- åˆ†é’Ÿ (0 - 59)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾‹ï¼š</strong></p>
<ul>
<li><p>crontab -e</p></li>
<li><p><em>/1 </em> * * * ls -l /etc &gt;&gt; /tmp/to.txt</p></li>
<li><p>ä¿å­˜é€€å‡º</p></li>
<li><p>æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡è¿½åŠ åˆ°/tmp/to.txt</p></li>
<li><p>cd /home/</p></li>
<li><p>vim mytask.shï¼šç¼–è¾‘è„šæœ¬mytask.sh</p></li>
<li><p>date &gt;&gt; /tmp/mydate</p></li>
<li><p>chmod 744 mytask.shï¼šç»™mytask.shæ‰§è¡Œæƒé™</p></li>
<li><p>crontab -e</p></li>
<li><p>åŠ ä¸Š <em>/1 </em> * * * /home/mytask.sh</p></li>
<li><p>cd /home/</p></li>
<li><p>vim mytask2.shï¼šç¼–è¾‘è„šæœ¬mytask2.sh</p></li>
<li><p>date &gt;&gt; /tmp/mycal</p></li>
<li><p>cal &gt;&gt;/tmp/mycal</p></li>
<li><p>chmod 744 mytask2.shï¼šç»™mytask2.shæ‰§è¡Œæƒé™</p></li>
<li><p>crontab -e</p></li>
<li><p>åŠ ä¸Š <em>/1 </em> * * * /home/mytask2.sh</p></li>
<li><p>å®Œæˆ</p></li>
</ul>
<p>ä¸‹é¢å†çœ‹çœ‹å‡ ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0 */2 * * * /sbin/service httpd restart  æ„æ€æ˜¯æ¯ä¸¤ä¸ªå°æ—¶é‡å¯ä¸€æ¬¡apache </span><br><span class="line"></span><br><span class="line">50 7 * * * /sbin/service sshd start  æ„æ€æ˜¯æ¯å¤©7ï¼š50å¼€å¯sshæœåŠ¡ </span><br><span class="line"></span><br><span class="line">50 22 * * * /sbin/service sshd stop  æ„æ€æ˜¯æ¯å¤©22ï¼š50å…³é—­sshæœåŠ¡ </span><br><span class="line"></span><br><span class="line">0 0 1,15 * * fsck /home  æ¯æœˆ1å·å’Œ15å·æ£€æŸ¥/home ç£ç›˜ </span><br><span class="line"></span><br><span class="line">1 * * * * /home/bruce/backup  æ¯å°æ—¶çš„ç¬¬ä¸€åˆ†æ‰§è¡Œ /home/bruce/backupè¿™ä¸ªæ–‡ä»¶ </span><br><span class="line"></span><br><span class="line">00 03 * * 1-5 find /home &quot;*.xxx&quot; -mtime +4 -exec rm &#123;&#125; \;  æ¯å‘¨ä¸€è‡³å‘¨äº”3ç‚¹é’Ÿï¼Œåœ¨ç›®å½•/homeä¸­ï¼ŒæŸ¥æ‰¾æ–‡ä»¶åä¸º*.xxxçš„æ–‡ä»¶ï¼Œå¹¶åˆ é™¤4å¤©å‰çš„æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">30 6 */10 * * ls  æ„æ€æ˜¯æ¯æœˆçš„1ã€11ã€21ã€31æ—¥æ˜¯çš„6ï¼š30æ‰§è¡Œä¸€æ¬¡lså‘½ä»¤</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong>å½“ç¨‹åºåœ¨ä½ æ‰€æŒ‡å®šçš„æ—¶é—´æ‰§è¡Œåï¼Œç³»ç»Ÿä¼šå‘ä¸€å°é‚®ä»¶ç»™å½“å‰çš„ç”¨æˆ·ï¼Œæ˜¾ç¤ºè¯¥ç¨‹åºæ‰§è¡Œçš„å†…å®¹ï¼Œè‹¥æ˜¯ä½ ä¸å¸Œæœ›æ”¶åˆ°è¿™æ ·çš„é‚®ä»¶ï¼Œè¯·åœ¨æ¯ä¸€è¡Œç©ºä¸€æ ¼ä¹‹ååŠ ä¸Š
<strong>&gt; /dev/null 2&gt;&amp;1</strong> å³å¯ï¼Œå¦‚ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">20 03 * * * . /etc/profile;/bin/sh /var/www/runoob/test.sh &gt; /dev/null 2&gt;&amp;1 </span><br></pre></td></tr></table></figure>
<h1 id="ç£ç›˜ç®¡ç†">ç£ç›˜ç®¡ç†</h1>
<p>Linuxç£ç›˜ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>Linuxç£ç›˜ç®¡ç†å¸¸ç”¨ä¸‰ä¸ªå‘½ä»¤ä¸ºdfã€duå’Œfdiskã€‚</p>
<ul>
<li><p>dfï¼šåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡</p>
<ul>
<li><p>dfï¼šå°†ç³»ç»Ÿå†…æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿåˆ—å‡ºæ¥</p></li>
<li><p>df -hï¼šå°†å®¹é‡ç»“æœä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤ºå‡ºæ¥</p></li>
</ul></li>
<li><p>duï¼šæ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡</p>
<ul>
<li>duï¼šåªåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å®¹é‡ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶å¤¹ï¼‰</li>
<li>du -aï¼šå°†æ–‡ä»¶çš„å®¹é‡ä¹Ÿåˆ—å‡ºæ¥</li>
<li>du -ach --max-depth=1 /optï¼šæŸ¥è¯¢optç›®å½•ç£ç›˜å ç”¨æƒ…å†µï¼Œæ·±åº¦ä¸º1</li>
<li>ls -l /home | grep "^-" | wc
-lï¼šç»Ÿè®¡homeç›®å½•ä¸‹ï¼Œä»¥â€-â€œæ‰“å¤´çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶ä¸ªæ•°ï¼‰</li>
<li>ls -l /home | grep "^d" | wc
-lï¼šç»Ÿè®¡homeç›®å½•ä¸‹ï¼Œä»¥â€dâ€œæ‰“å¤´çš„æ–‡ä»¶ï¼ˆç›®å½•ä¸ªæ•°ï¼‰</li>
<li>ls -lR /home | grep "^-" | wc
-lï¼šç»Ÿè®¡homeç›®å½•ä¸‹ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹ï¼‰ï¼Œä»¥â€-â€œæ‰“å¤´çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶ä¸ªæ•°ï¼‰</li>
<li>ls -lR /home | grep "^d" | wc
-lï¼šç»Ÿè®¡homeç›®å½•ä¸‹ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹ï¼‰ï¼Œä»¥â€dâ€œæ‰“å¤´çš„æ–‡ä»¶ï¼ˆç›®å½•ä¸ªæ•°ï¼‰</li>
</ul></li>
<li><p>fdiskï¼šç”¨äºç£ç›˜åˆ†åŒº</p></li>
<li><p>mkfsï¼šæ ¼å¼åŒ–ç£ç›˜</p></li>
</ul>
<p>tree</p>
<ul>
<li>yum install tree</li>
<li>æ ‘çŠ¶æ˜¾ç¤ºç›®å½•æ–‡ä»¶</li>
</ul>
<p>åˆ†åŒº - æ–‡ä»¶ç³»ç»Ÿ</p>
<ul>
<li>lsblk -fï¼šæŸ¥çœ‹åˆ†åŒºå’ŒæŒ‚è½½æƒ…å†µ</li>
<li>lsblk ï¼šè¿˜å¯ä»¥æŸ¥çœ‹å¤§å°</li>
</ul>
<p>ç£ç›˜æŒ‚è½½ä½¿ç”¨ <code>mount</code> å‘½ä»¤ï¼Œå¸è½½ä½¿ç”¨ <code>umount</code>
å‘½ä»¤ã€‚</p>
<h1 id="è¿›ç¨‹ç®¡ç†">è¿›ç¨‹ç®¡ç†</h1>
<p><strong>ps</strong></p>
<p>ps ï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šprocess statusï¼‰å‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„çŠ¶æ€ï¼Œç±»ä¼¼äº
windows çš„ä»»åŠ¡ç®¡ç†å™¨ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li>ps çš„å‚æ•°éå¸¸å¤š, åœ¨æ­¤ä»…åˆ—å‡ºå‡ ä¸ªå¸¸ç”¨çš„å‚æ•°å¹¶å¤§ç•¥ä»‹ç»å«ä¹‰</li>
<li>-A åˆ—å‡ºæ‰€æœ‰çš„è¿›ç¨‹</li>
<li>-w æ˜¾ç¤ºåŠ å®½å¯ä»¥æ˜¾ç¤ºè¾ƒå¤šçš„èµ„è®¯</li>
<li>-au æ˜¾ç¤ºè¾ƒè¯¦ç»†çš„èµ„è®¯</li>
<li>-aux æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å…¶ä»–ä½¿ç”¨è€…çš„è¡Œç¨‹</li>
</ul>
<p>au(x) è¾“å‡ºæ ¼å¼ :</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND</span><br></pre></td></tr></table></figure>
<ul>
<li>USER: è¡Œç¨‹æ‹¥æœ‰è€…</li>
<li>PID: pid</li>
<li>%CPU: å ç”¨çš„ CPU ä½¿ç”¨ç‡</li>
<li>%MEM: å ç”¨çš„è®°å¿†ä½“ä½¿ç”¨ç‡</li>
<li>VSZ: å ç”¨çš„è™šæ‹Ÿè®°å¿†ä½“å¤§å°</li>
<li>RSS: å ç”¨çš„è®°å¿†ä½“å¤§å°</li>
<li>TTY: ç»ˆç«¯çš„æ¬¡è¦è£…ç½®å·ç  (minor device number of tty)</li>
<li>STAT: è¯¥è¡Œç¨‹çš„çŠ¶æ€:
<ul>
<li>D: æ— æ³•ä¸­æ–­çš„ä¼‘çœ çŠ¶æ€ (é€šå¸¸ IO çš„è¿›ç¨‹)</li>
<li>R: æ­£åœ¨æ‰§è¡Œä¸­</li>
<li>S: é™æ­¢çŠ¶æ€</li>
<li>T: æš‚åœæ‰§è¡Œ</li>
<li>Z: ä¸å­˜åœ¨ä½†æš‚æ—¶æ— æ³•æ¶ˆé™¤ï¼ˆåƒµå°¸è¿›ç¨‹ï¼‰</li>
<li>W: æ²¡æœ‰è¶³å¤Ÿçš„è®°å¿†ä½“åˆ†é¡µå¯åˆ†é…</li>
<li>&lt;: é«˜ä¼˜å…ˆåºçš„è¡Œç¨‹</li>
<li>N: ä½ä¼˜å…ˆåºçš„è¡Œç¨‹</li>
<li>L: æœ‰è®°å¿†ä½“åˆ†é¡µåˆ†é…å¹¶é”åœ¨è®°å¿†ä½“å†… (å®æ—¶ç³»ç»Ÿæˆ–æ±A I/O)</li>
</ul></li>
<li>START: è¡Œç¨‹å¼€å§‹æ—¶é—´</li>
<li>TIME: æ‰§è¡Œçš„æ—¶é—´</li>
<li>COMMAND:æ‰€æ‰§è¡Œçš„æŒ‡ä»¤</li>
</ul>
<p>ps -aux | grep sshdï¼šæŸ¥çœ‹å…³é”®å­—æœ‰sshdçš„è¿›ç¨‹</p>
<p>ps -ef | moreï¼šæŸ¥çœ‹çˆ¶è¿›ç¨‹ppid</p>
<p>pstree -uï¼šæ ‘çŠ¶æ˜¾ç¤ºè¿›ç¨‹</p>
<p><strong>top</strong></p>
<ul>
<li>topå‘½ä»¤ç”¨äºå®æ—¶æ˜¾ç¤º process çš„åŠ¨æ€ã€‚ä½¿ç”¨æƒé™ï¼šæ‰€æœ‰ä½¿ç”¨è€…ã€‚</li>
<li>top -u ç”¨æˆ·åï¼šæŸ¥çœ‹ç»™ç”¨æˆ·çš„è¿›ç¨‹</li>
<li>top -d æ—¶é—´ï¼šé»˜è®¤3ç§’åˆ·æ–°ä¸€æ¬¡</li>
<li>top -n 5ï¼šåˆ·æ–°5æ¬¡åˆ™é€€å‡º</li>
</ul>
<p><strong>kill</strong></p>
<p>kill å‘½ä»¤ç”¨äºåˆ é™¤æ‰§è¡Œä¸­çš„ç¨‹åºæˆ–å·¥ä½œã€‚</p>
<p><strong>è¯­æ³•</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kill [-s &lt;ä¿¡æ¯åç§°æˆ–ç¼–å·&gt;][ç¨‹åº]ã€€æˆ–ã€€kill [-l &lt;ä¿¡æ¯ç¼–å·&gt;]</span><br></pre></td></tr></table></figure>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li>-l <ä¿¡æ¯ç¼–å·> ã€€è‹¥ä¸åŠ <ä¿¡æ¯ç¼–å·>é€‰é¡¹ï¼Œåˆ™ -l
å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡æ¯åç§°ã€‚</li>
<li>-s <ä¿¡æ¯åç§°æˆ–ç¼–å·> ã€€æŒ‡å®šè¦é€å‡ºçš„ä¿¡æ¯ã€‚</li>
<li>[ç¨‹åº] ã€€[ç¨‹åº]å¯ä»¥æ˜¯ç¨‹åºçš„PIDæˆ–æ˜¯PGIDï¼Œä¹Ÿå¯ä»¥æ˜¯å·¥ä½œç¼–å·ã€‚</li>
</ul>
<p>ä½¿ç”¨ kill -l å‘½ä»¤åˆ—å‡ºæ‰€æœ‰å¯ç”¨ä¿¡å·ã€‚</p>
<p>æœ€å¸¸ç”¨çš„ä¿¡å·æ˜¯ï¼š</p>
<ul>
<li>1 (HUP)ï¼šé‡æ–°åŠ è½½è¿›ç¨‹ã€‚</li>
<li>9 (KILL)ï¼šæ€æ­»ä¸€ä¸ªè¿›ç¨‹ã€‚</li>
<li>15 (TERM)ï¼šæ­£å¸¸åœæ­¢ä¸€ä¸ªè¿›ç¨‹ã€‚</li>
</ul>
<p><strong>æœåŠ¡</strong></p>
<p><a
href="https://blog.csdn.net/u012486840/article/details/53161574?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.baidujs&amp;dist_request_id=1328696.39.16166599641468569&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.baidujs">å‚è€ƒ</a></p>
<p><strong>systemctl</strong></p>
<p>#å¯åŠ¨ç½‘ç»œæœåŠ¡</p>
<ul>
<li>systemctl start network.service</li>
</ul>
<p>#åœæ­¢ç½‘ç»œæœåŠ¡</p>
<ul>
<li>systemctl stop network.service</li>
</ul>
<p>#é‡å¯ç½‘ç»œæœåŠ¡</p>
<ul>
<li>systemctl restart network.service</li>
</ul>
<p>#æŸ¥çœ‹ç½‘ç»œæœåŠ¡çŠ¶æ€</p>
<ul>
<li>systemctl status network.serivce</li>
</ul>
<p><strong>æŸ¥çœ‹æœåŠ¡</strong></p>
<p>setup</p>
<ul>
<li>å›¾å½¢ç»ˆç«¯ï¼ŒæŸ¥çœ‹æœåŠ¡</li>
</ul>
<p>ls -l /etc/init.d/</p>
<ul>
<li>ç»ˆç«¯ä½¿ç”¨ï¼ŒæŸ¥çœ‹æœåŠ¡</li>
</ul>
<p><strong>æœåŠ¡çº§åˆ«</strong></p>
<p>chkconfig</p>
<ul>
<li>chkconfig -level5 sshd offï¼šè¿è¡Œçº§åˆ«ä¸º5æ—¶sshdå…³é—­</li>
<li>chkconfig -level5 firewalld offï¼šè¿è¡Œçº§åˆ«ä¸º5æ—¶é˜²ç«å¢™å…³é—­</li>
<li>chkconfig firewalld offï¼šæ‰€æœ‰è¿è¡Œçº§åˆ«ä¸‹å…³é—­é˜²ç«å¢™</li>
<li>chkconfig firewalld onï¼šæ‰€æœ‰è¿è¡Œçº§åˆ«ä¸‹å¼€å¯é˜²ç«å¢™</li>
<li>é‡å¯åç”Ÿæ•ˆ</li>
</ul>
<p><strong>telnet</strong></p>
<p>telnetå‘½ä»¤ç”¨äºè¿œç«¯ç™»å…¥ã€‚</p>
<p>æ‰§è¡ŒtelnetæŒ‡ä»¤å¼€å¯ç»ˆç«¯æœºé˜¶æ®µä½œä¸šï¼Œå¹¶ç™»å…¥è¿œç«¯ä¸»æœºã€‚</p>
<p><strong>å®ä¾‹</strong></p>
<p>ç™»å½•è¿œç¨‹ä¸»æœº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">telnet 192.168.0.5</span> </span><br><span class="line"></span><br><span class="line">//ç™»å½•IPä¸º 192.168.0.5 çš„è¿œç¨‹ä¸»æœº</span><br></pre></td></tr></table></figure>
<p><strong>netstat</strong></p>
<p>netstat å‘½ä»¤ç”¨äºæ˜¾ç¤ºç½‘ç»œçŠ¶æ€ã€‚</p>
<p>åˆ©ç”¨ netstat æŒ‡ä»¤å¯è®©ä½ å¾—çŸ¥æ•´ä¸ª Linux ç³»ç»Ÿçš„ç½‘ç»œæƒ…å†µã€‚</p>
<ul>
<li>netstat -anp | moreï¼šæŸ¥çœ‹å…¨éƒ¨æœåŠ¡</li>
</ul>
<h1 id="åŒ…ç®¡ç†">åŒ…ç®¡ç†</h1>
<p><strong>rpm</strong></p>
<p>rpm å‘½ä»¤ç”¨äºç®¡ç†å¥—ä»¶ã€‚</p>
<p>rpmï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šredhat package managerï¼‰ åŸæœ¬æ˜¯ Red Hat Linux
å‘è¡Œç‰ˆä¸“é—¨ç”¨æ¥ç®¡ç† Linux å„é¡¹å¥—ä»¶çš„ç¨‹åºï¼Œç”±äºå®ƒéµå¾ª GPL
è§„åˆ™ä¸”åŠŸèƒ½å¼ºå¤§æ–¹ä¾¿ï¼Œå› è€Œå¹¿å—æ¬¢è¿ã€‚é€æ¸å—åˆ°å…¶ä»–å‘è¡Œç‰ˆçš„é‡‡ç”¨ã€‚RPM
å¥—ä»¶ç®¡ç†æ–¹å¼çš„å‡ºç°ï¼Œè®© Linux æ˜“äºå®‰è£…ï¼Œå‡çº§ï¼Œé—´æ¥æå‡äº† Linux
çš„é€‚ç”¨åº¦ã€‚</p>
<ul>
<li>rpm -qa | grep firefoxï¼šæŸ¥è¯¢ç«ç‹</li>
<li>rpm -qaï¼šæŸ¥è¯¢æ‰€æœ‰</li>
<li>rpm -q firefoxï¼šæŸ¥è¯¢ç«ç‹</li>
<li>rpm -qi firefoxï¼šæŸ¥è¯¢è½¯ä»¶åŒ…ä¿¡æ¯</li>
<li>rpm -ql firefoxï¼šæŸ¥è¯¢ç«ç‹å®‰è£…äº†å“ªäº›æ–‡ä»¶/ä½ç½®</li>
<li>rpm -qf /etc/passwdï¼šæŸ¥è¯¢/etc/passwdå±äºé‚£ä¸ªè½¯ä»¶åŒ…</li>
<li>rpm -e firefoxï¼šå¸è½½ç«ç‹</li>
<li>å¦‚æœå­˜åœ¨ä¾èµ–æ€§ä¼šæç¤ºï¼Œä¸æ¨èå¼ºåˆ¶åˆ é™¤</li>
</ul>
<p><strong>å®‰è£…</strong></p>
<ul>
<li>æ‰¾åˆ°è¦å®‰è£…çš„rpmåŒ…ï¼ŒæŒ‚è½½centosçš„iosæ–‡ä»¶ï¼Œåœ¨/media/ä¸‹æ‰¾</li>
<li>ç§»åŠ¨åˆ° /opt/ä¸‹</li>
<li>rpm -ivh rpmè½¯ä»¶åŒ…</li>
</ul>
<p><strong>yum</strong></p>
<p>yumï¼ˆ Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨ Fedora å’Œ RedHat ä»¥åŠ
SUSE ä¸­çš„ Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚</p>
<p>åŸºäº RPM åŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½ RPM
åŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä½“åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚</p>
<p>yum
æä¾›äº†æŸ¥æ‰¾ã€å®‰è£…ã€åˆ é™¤æŸä¸€ä¸ªã€ä¸€ç»„ç”šè‡³å…¨éƒ¨è½¯ä»¶åŒ…çš„å‘½ä»¤ï¼Œè€Œä¸”å‘½ä»¤ç®€æ´è€Œåˆå¥½è®°ã€‚</p>
<p><strong>yumå¸¸ç”¨å‘½ä»¤</strong></p>
<p>1ã€åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼š<strong>yum
check-update</strong></p>
<p>2ã€æ›´æ–°æ‰€æœ‰è½¯ä»¶å‘½ä»¤ï¼š<strong>yum update</strong></p>
<p>3ã€ä»…å®‰è£…æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼š<strong>yum install
<package_name></strong></p>
<p>4ã€ä»…æ›´æ–°æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼š<strong>yum update
<package_name></strong></p>
<p>5ã€åˆ—å‡ºæ‰€æœ‰å¯å®‰è£çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼š<strong>yum list</strong></p>
<p>6ã€åˆ é™¤è½¯ä»¶åŒ…å‘½ä»¤ï¼š<strong>yum remove <package_name></strong></p>
<p>7ã€æŸ¥æ‰¾è½¯ä»¶åŒ…å‘½ä»¤ï¼š<strong>yum search <keyword></strong></p>
<p>8ã€æ¸…é™¤ç¼“å­˜å‘½ä»¤:</p>
<ul>
<li><strong>yum clean packages</strong>: æ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹çš„è½¯ä»¶åŒ…</li>
<li><strong>yum clean headers</strong>: æ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹çš„ headers</li>
<li><strong>yum clean oldheaders</strong>: æ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹æ—§çš„
headers</li>
<li><strong>yum clean, yum clean all (= yum clean packages; yum clean
oldheaders)</strong> :æ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹çš„è½¯ä»¶åŒ…åŠæ—§çš„ headers</li>
</ul>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆæ¬¡ä½¿ç”¨XXL-JOB</title>
    <url>/article/abbb8dbb.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ä¹‹å‰æœ‰<a href="https://wnhyang.github.io/article/796c508a.html">ruoyi
å­¦ä¹  Quartz</a>ã€<a
href="https://wnhyang.github.io/article/1e885c14.html">å®šæ—¶ä»»åŠ¡</a>ã€<a
href="https://wnhyang.github.io/article/8abc133f.html">ç‚¹èµåŠŸèƒ½çš„ä¸€ç§å®ç°</a>ï¼Œä¸‰ç¯‡æ–‡ç« è®¨è®ºæœ‰å…³å®šæ—¶ä»»åŠ¡çš„ï¼Œè¿™æ¬¡ç»ˆäºæ˜¯è§è¯†åˆ°äº†å¤§åé¼é¼çš„<code>XXL-JOB</code>äº†ï¼Œä¸‹é¢å°±å¼€å§‹ç©ä¸€ä¸‹å§ï¼</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a
href="https://www.xuxueli.com/xxl-job/">https://www.xuxueli.com/xxl-job/</a></p>
<p><a
href="https://github.com/xuxueli/xxl-job/issues/1121">https://github.com/xuxueli/xxl-job/issues/1121</a></p>
<p><a
href="https://github.com/xuxueli/xxl-job/issues/191">https://github.com/xuxueli/xxl-job/issues/191</a></p>
<span id="more"></span>
<h1 id="å¼€å§‹å§">å¼€å§‹å§</h1>
<p>ä»‹ç»æˆ‘å°±ä¸å¤šè®²äº†ï¼Œæˆ‘ç›´æ¥å¼€å§‹ä½¿ç”¨ï¼Œè¿‡ç¨‹ä¸­å°†ä¸€è®²æˆ‘çš„ç†è§£ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œå®˜ç½‘æ˜¯æœ€å¥½çš„å‚è€ƒèµ„æ–™ã€‚</p>
<h2 id="ä¸‹è½½">ä¸‹è½½</h2>
<p><a
href="https://github.com/xuxueli/xxl-job">https://github.com/xuxueli/xxl-job</a></p>
<h2 id="ç¯å¢ƒ">ç¯å¢ƒ</h2>
<ul>
<li>Maven3+</li>
<li>Jdk1.8+</li>
<li>Mysql5.7+</li>
</ul>
<h2 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h2>
<p><code>XXL-JOB</code>é¡¹ç›®ç»“æ„è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå…ˆå£°æ˜æˆ‘ä½¿ç”¨çš„æ˜¯<code>2.3.1</code>ç‰ˆæœ¬</p>
<blockquote>
<p>xxl-job</p>
<p>â€‹ -doc å„ç§æ–‡æ¡£ï¼ŒåŒ…æ‹¬æœ€é‡è¦çš„sql</p>
<p>â€‹ -xxl-job-admin xxlè°ƒåº¦ä¸­å¿ƒ</p>
<p>â€‹ -xxl-job-core xxlæ ¸å¿ƒä¾èµ–</p>
<p>â€‹ -xxl-job-executor-samples xxlæ‰§è¡Œå™¨ç¤ºä¾‹</p>
<p>â€‹ -xxl-job-executor-sample-frameless æ— æ¡†æ¶ç‰ˆ</p>
<p>â€‹ -xxl-job-executor-sample-springboot springbootç‰ˆ</p>
</blockquote>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/ouding@master/cloud-picture/image.22s0t1pru4qo.webp"
alt="é¡¹ç›®ç»“æ„" />
<figcaption aria-hidden="true">é¡¹ç›®ç»“æ„</figcaption>
</figure>
<h2 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</h2>
<p>æ‰§è¡Œ<code>/xxl-job/doc/db/tables_xxl_job.sql</code></p>
<h2 id="è°ƒåº¦ä¸­å¿ƒ">è°ƒåº¦ä¸­å¿ƒ</h2>
<p>è°ƒåº¦ä¸­å¿ƒæ˜¯æ‰€æœ‰æ‰§è¡Œå™¨çš„æ§åˆ¶ç®¡ç†ä¸­å¿ƒï¼Œç®¡ç†ç€æ‰€æœ‰â€œæ³¨å†Œâ€åœ¨è°ƒåº¦ä¸­å¿ƒçš„æ‰§è¡Œå™¨ã€‚</p>
<h3 id="ä¿®æ”¹é…ç½®">ä¿®æ”¹é…ç½®</h3>
<p>ä¿®æ”¹æ•°æ®åº“åœ°å€ï¼Œéœ€è¦çš„è¯é…ç½®ä¸€ä¸‹é‚®ç®±ã€‚å…¶ä»–å¦‚ç«¯å£ã€åº”ç”¨åï¼Œè‡ªå·±ç¡®è®¤éœ€è¦æ”¹ä¸ã€‚</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒJDBCé“¾æ¥ï¼šé“¾æ¥åœ°å€è¯·ä¿æŒå’Œ 2.1ç« èŠ‚ æ‰€åˆ›å»ºçš„è°ƒåº¦æ•°æ®åº“çš„åœ°å€ä¸€è‡´</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/xxl_job?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">root_pwd</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">### æŠ¥è­¦é‚®ç®±</span></span><br><span class="line"><span class="attr">spring.mail.host</span>=<span class="string">smtp.qq.com</span></span><br><span class="line"><span class="attr">spring.mail.port</span>=<span class="string">25</span></span><br><span class="line"><span class="attr">spring.mail.username</span>=<span class="string">xxx@qq.com</span></span><br><span class="line"><span class="attr">spring.mail.password</span>=<span class="string">xxx</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.auth</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.starttls.enable</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.starttls.required</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.socketFactory.class</span>=<span class="string">javax.net.ssl.SSLSocketFactory</span></span><br><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒé€šè®¯TOKEN [é€‰å¡«]ï¼šéç©ºæ—¶å¯ç”¨ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.accessToken</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒå›½é™…åŒ–é…ç½® [å¿…å¡«]ï¼š é»˜è®¤ä¸º &quot;zh_CN&quot;/ä¸­æ–‡ç®€ä½“, å¯é€‰èŒƒå›´ä¸º &quot;zh_CN&quot;/ä¸­æ–‡ç®€ä½“, &quot;zh_TC&quot;/ä¸­æ–‡ç¹ä½“ and &quot;en&quot;/è‹±æ–‡ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.i18n</span>=<span class="string">zh_CN</span></span><br><span class="line"><span class="comment">## è°ƒåº¦çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹é…ç½®ã€å¿…å¡«ã€‘</span></span><br><span class="line"><span class="attr">xxl.job.triggerpool.fast.max</span>=<span class="string">200</span></span><br><span class="line"><span class="attr">xxl.job.triggerpool.slow.max</span>=<span class="string">100</span></span><br><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒæ—¥å¿—è¡¨æ•°æ®ä¿å­˜å¤©æ•° [å¿…å¡«]ï¼šè¿‡æœŸæ—¥å¿—è‡ªåŠ¨æ¸…ç†ï¼›é™åˆ¶å¤§äºç­‰äº7æ—¶ç”Ÿæ•ˆï¼Œå¦åˆ™, å¦‚-1ï¼Œå…³é—­è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.logretentiondays</span>=<span class="string">30</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–å»ºè®®ä¿®æ”¹æ—¥å¿—è·¯å¾„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;log.path&quot;</span> <span class="attr">value</span>=<span class="string">&quot;logs/xxl-job/xxl-job-admin.log&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯åŠ¨">å¯åŠ¨</h3>
<p>ç°åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸‹ï¼Œçœ‹æœ‰æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœæ­£å¸¸å¯åŠ¨ï¼Œè®¿é—®:<a
href="http://localhost:8080/xxl-job-admin">http://localhost:8080/xxl-job-admin</a>ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå‡†å¤‡éƒ¨ç½²å§ã€‚</p>
<h3 id="éƒ¨ç½²">éƒ¨ç½²</h3>
<p><code>jar</code>åŒ…éƒ¨ç½²ï¼Œ<code>Docker</code>é•œåƒéƒ¨ç½²éƒ½å¯ä»¥ï¼Œæˆ‘è¿™é‡Œæ˜¯<code>Docker</code>é•œåƒéƒ¨ç½²æ–¹å¼ï¼Œæœ‰éœ€è¦çš„å¯ä»¥å‚è€ƒï¼Œç”¨å®˜æ–¹çš„é•œåƒä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-jre-slim</span><br><span class="line"><span class="keyword">MAINTAINER</span> wnhyang</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /home/app</span></span><br><span class="line"><span class="comment"># æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PARAMS=<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> TZ=PRC JAVA_OPTS=<span class="string">&quot;-Xms128m -Xmx256m -Djava.security.egd=file:/dev/./urandom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -snf /usr/share/zoneinfo/<span class="variable">$TZ</span> /etc/localtime &amp;&amp; <span class="built_in">echo</span> <span class="variable">$TZ</span> &gt; /etc/timezone</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> target/xxl-job-admin-*.jar app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8803</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;java -jar <span class="variable">$JAVA_OPTS</span> app.jar <span class="variable">$PARAMS</span>&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p>æ€ä¹ˆæµç¨‹åŒ–éƒ¨ç½²çœ‹è‡ªå·±çš„éœ€è¦äº†ï¼Œå¯ä»¥ä¼ åŒ…åˆ°æœåŠ¡å™¨ï¼Œå†é€šè¿‡<code>docker build -t</code>æ„å»ºé•œåƒå¹¶å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–ï¼Œæµæ°´çº¿ç±»ä¼¼çš„åš<code>CI/CD</code>ã€‚</p>
<h2 id="æ‰§è¡Œå™¨">æ‰§è¡Œå™¨</h2>
<p>å¯ä»¥å…ˆå­¦ä¹ ä¸€ä¸‹å®˜æ–¹çš„ç¤ºä¾‹ï¼Œæˆ‘å°±ä¸å•°å—¦äº†ï¼Œç›´æ¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­é›†æˆã€‚</p>
<h3 id="pom">pom</h3>
<p>å¼•å…¥<code>xxl-job-core</code>ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;xxl-job.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®">é…ç½®</h3>
<p>æ³¨æ„è°ƒåº¦ä¸­å¿ƒåœ°å€ã€<code>token</code>ï¼Œ<code>ip</code>å’Œç«¯å£çœ‹æƒ…å†µï¼Œæˆ‘æ˜¯ç”¨çš„é»˜è®¤çš„ï¼Œå¦‚æœä¹‹åè¦<code>docker</code>éƒ¨ç½²ï¼Œé‚£ä¹ˆä¸€å®šè®°å¾—å¼€æ”¾å¯¹åº”ç«¯å£ï¼Œæ—¥å¿—ç›®å½•æˆ‘ä¹Ÿæ”¹ä¸ºäº†è‡ªå·±ç»Ÿä¸€çš„ç›®å½•äº†ã€‚</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ ¹åœ°å€ [é€‰å¡«]ï¼šå¦‚è°ƒåº¦ä¸­å¿ƒé›†ç¾¤éƒ¨ç½²å­˜åœ¨å¤šä¸ªåœ°å€åˆ™ç”¨é€—å·åˆ†éš”ã€‚æ‰§è¡Œå™¨å°†ä¼šä½¿ç”¨è¯¥åœ°å€è¿›è¡Œ&quot;æ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œ&quot;å’Œ&quot;ä»»åŠ¡ç»“æœå›è°ƒ&quot;ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œï¼›</span></span><br><span class="line"><span class="attr">xxl.job.admin.addresses</span>=<span class="string">http://ip:8083/xxl-job-admin</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨é€šè®¯TOKEN [é€‰å¡«]ï¼šéç©ºæ—¶å¯ç”¨ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.accessToken</span>=<span class="string">default_token</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨AppName [é€‰å¡«]ï¼šæ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œåˆ†ç»„ä¾æ®ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œ</span></span><br><span class="line"><span class="attr">xxl.job.executor.appname</span>=<span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ³¨å†Œ [é€‰å¡«]ï¼šä¼˜å…ˆä½¿ç”¨è¯¥é…ç½®ä½œä¸ºæ³¨å†Œåœ°å€ï¼Œä¸ºç©ºæ—¶ä½¿ç”¨å†…åµŒæœåŠ¡ â€IP:PORTâ€œ ä½œä¸ºæ³¨å†Œåœ°å€ã€‚ä»è€Œæ›´çµæ´»çš„æ”¯æŒå®¹å™¨ç±»å‹æ‰§è¡Œå™¨åŠ¨æ€IPå’ŒåŠ¨æ€æ˜ å°„ç«¯å£é—®é¢˜ã€‚</span></span><br><span class="line"><span class="attr">xxl.job.executor.address</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨IP [é€‰å¡«]ï¼šé»˜è®¤ä¸ºç©ºè¡¨ç¤ºè‡ªåŠ¨è·å–IPï¼Œå¤šç½‘å¡æ—¶å¯æ‰‹åŠ¨è®¾ç½®æŒ‡å®šIPï¼Œè¯¥IPä¸ä¼šç»‘å®šHostä»…ä½œä¸ºé€šè®¯å®ç”¨ï¼›åœ°å€ä¿¡æ¯ç”¨äº &quot;æ‰§è¡Œå™¨æ³¨å†Œ&quot; å’Œ &quot;è°ƒåº¦ä¸­å¿ƒè¯·æ±‚å¹¶è§¦å‘ä»»åŠ¡&quot;ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.ip</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨ç«¯å£å· [é€‰å¡«]ï¼šå°äºç­‰äº0åˆ™è‡ªåŠ¨è·å–ï¼›é»˜è®¤ç«¯å£ä¸º9999ï¼Œå•æœºéƒ¨ç½²å¤šä¸ªæ‰§è¡Œå™¨æ—¶ï¼Œæ³¨æ„è¦é…ç½®ä¸åŒæ‰§è¡Œå™¨ç«¯å£ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.port</span>=<span class="string">9999</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨è¿è¡Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç£ç›˜è·¯å¾„ [é€‰å¡«] ï¼šéœ€è¦å¯¹è¯¥è·¯å¾„æ‹¥æœ‰è¯»å†™æƒé™ï¼›ä¸ºç©ºåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.logpath</span>=<span class="string">logs/xxl-job/jobhandler</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ—¥å¿—æ–‡ä»¶ä¿å­˜å¤©æ•° [é€‰å¡«] ï¼š è¿‡æœŸæ—¥å¿—è‡ªåŠ¨æ¸…ç†, é™åˆ¶å€¼å¤§äºç­‰äº3æ—¶ç”Ÿæ•ˆ; å¦åˆ™, å¦‚-1, å…³é—­è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.logretentiondays</span>=<span class="string">30</span></span><br></pre></td></tr></table></figure>
<h3 id="ç»„ä»¶é…ç½®">ç»„ä»¶é…ç½®</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XxlJobConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> XxlJobSpringExecutor <span class="title function_">xxlJobExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.&quot;</span>);</span><br><span class="line">        <span class="type">XxlJobSpringExecutor</span> <span class="variable">xxlJobSpringExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XxlJobSpringExecutor</span>();</span><br><span class="line">        xxlJobSpringExecutor.setAdminAddresses(adminAddresses);</span><br><span class="line">        xxlJobSpringExecutor.setAppname(appname);</span><br><span class="line">        xxlJobSpringExecutor.setAddress(address);</span><br><span class="line">        xxlJobSpringExecutor.setIp(ip);</span><br><span class="line">        xxlJobSpringExecutor.setPort(port);</span><br><span class="line">        xxlJobSpringExecutor.setAccessToken(accessToken);</span><br><span class="line">        xxlJobSpringExecutor.setLogPath(logPath);</span><br><span class="line">        xxlJobSpringExecutor.setLogRetentionDays(logRetentionDays);</span><br><span class="line">        <span class="keyword">return</span> xxlJobSpringExecutor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå·±çš„æ‰§è¡Œå™¨">è‡ªå·±çš„æ‰§è¡Œå™¨</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyXxlJob</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(MyXxlJob.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LinkMapMapper linkMapMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XxlJob(&quot;emailJobHandler&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">emailJobHandler</span><span class="params">()</span> &#123;</span><br><span class="line">        LOGGER.info(<span class="string">&quot;emailJobHandler exec......&quot;</span>);</span><br><span class="line">        XxlJobHelper.log(<span class="string">&quot;XXL-JOB, emailJobHandler.&quot;</span>);</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">now</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">now3</span> <span class="operator">=</span> now.plusDays(<span class="number">3</span>);</span><br><span class="line">        List&lt;LinkMap&gt; linkMaps = linkMapMapper.selectList(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;LinkMap&gt;()</span><br><span class="line">                .ge(LinkMap::getExpireTime, now)</span><br><span class="line">                .le(LinkMap::getExpireTime, now3));</span><br><span class="line">        XxlJobHelper.log(linkMaps.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éƒ¨ç½²-1">éƒ¨ç½²</h3>
<p>éƒ¨ç½²æ–¹å¼ä»»æ„ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œ<code>Docker</code>éƒ¨ç½²æ–¹å¼ï¼Œä¸€å®šè¦å¼€æ”¾å¯¹åº”çš„ç«¯å£åè¿è¡Œã€‚</p>
<h3 id="é…ç½®æ‰§è¡Œå™¨">é…ç½®æ‰§è¡Œå™¨</h3>
<p>åœ¨è°ƒåº¦ä¸­å¿ƒ-æ‰§è¡Œå™¨ç®¡ç†ï¼Œé…ç½®æ‰§è¡Œå™¨ã€‚</p>
<blockquote>
<p>AppName: æ˜¯æ¯ä¸ªæ‰§è¡Œå™¨é›†ç¾¤çš„å”¯ä¸€æ ‡ç¤ºAppName,
æ‰§è¡Œå™¨ä¼šå‘¨æœŸæ€§ä»¥AppNameä¸ºå¯¹è±¡è¿›è¡Œè‡ªåŠ¨æ³¨å†Œã€‚å¯é€šè¿‡è¯¥é…ç½®è‡ªåŠ¨å‘ç°æ³¨å†ŒæˆåŠŸçš„æ‰§è¡Œå™¨,
ä¾›ä»»åŠ¡è°ƒåº¦æ—¶ä½¿ç”¨;</p>
<p>åç§°: æ‰§è¡Œå™¨çš„åç§°, å› ä¸ºAppNameé™åˆ¶å­—æ¯æ•°å­—ç­‰ç»„æˆ,å¯è¯»æ€§ä¸å¼º,
åç§°ä¸ºäº†æé«˜æ‰§è¡Œå™¨çš„å¯è¯»æ€§;</p>
<p>æ³¨å†Œæ–¹å¼ï¼šè°ƒåº¦ä¸­å¿ƒè·å–æ‰§è¡Œå™¨åœ°å€çš„æ–¹å¼ï¼›</p>
<p>â€‹
è‡ªåŠ¨æ³¨å†Œï¼šæ‰§è¡Œå™¨è‡ªåŠ¨è¿›è¡Œæ‰§è¡Œå™¨æ³¨å†Œï¼Œè°ƒåº¦ä¸­å¿ƒé€šè¿‡åº•å±‚æ³¨å†Œè¡¨å¯ä»¥åŠ¨æ€å‘ç°æ‰§è¡Œå™¨æœºå™¨åœ°å€ï¼›</p>
<p>â€‹
æ‰‹åŠ¨å½•å…¥ï¼šäººå·¥æ‰‹åŠ¨å½•å…¥æ‰§è¡Œå™¨çš„åœ°å€ä¿¡æ¯ï¼Œå¤šåœ°å€é€—å·åˆ†éš”ï¼Œä¾›è°ƒåº¦ä¸­å¿ƒä½¿ç”¨ï¼›</p>
<p>æœºå™¨åœ°å€ï¼š"æ³¨å†Œæ–¹å¼"ä¸º"æ‰‹åŠ¨å½•å…¥"æ—¶æœ‰æ•ˆï¼Œæ”¯æŒäººå·¥ç»´æŠ¤æ‰§è¡Œå™¨çš„åœ°å€ä¿¡æ¯ï¼›</p>
</blockquote>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/ouding@master/cloud-picture/image.75u4b73u4yo0.webp"
alt="æ–°å¢æ‰§è¡Œå™¨" />
<figcaption aria-hidden="true">æ–°å¢æ‰§è¡Œå™¨</figcaption>
</figure>
<p>æ³¨æ„âš ï¸ï¼šå½“æ‰§è¡Œå™¨æ˜¯<code>Docker</code>éƒ¨ç½²æ—¶è°ƒåº¦ä¸­å¿ƒè·å–æ‰§è¡Œå™¨æœºå™¨åœ°å€ä¼šæ˜¯<code>docker</code>åˆ†é…çš„è™šåœ°å€ï¼Œåé¢ä»»åŠ¡æ‰§è¡Œæ—¶ä¼šå‡ºé”™ï¼Œå¦‚ä¸‹ã€‚æ‰€ä»¥å½“ä½¿ç”¨<code>docker</code>éƒ¨ç½²æ—¶ç›´æ¥é…ç½®å®¿ä¸»æœºåœ°å€ã€‚</p>
<p><code>github</code>ä¸Šä¹Ÿæœ‰ç›¸å…³<code>issues</code>ï¼Œå¦‚æœä½ æœ‰å¥½çš„è§£å†³åŠæ³•è¯·åŠ¡å¿…å‘Šè¯‰æˆ‘ã€‚</p>
<p><a
href="https://github.com/xuxueli/xxl-job/issues/1121">https://github.com/xuxueli/xxl-job/issues/1121</a></p>
<p><a
href="https://github.com/xuxueli/xxl-job/issues/191">https://github.com/xuxueli/xxl-job/issues/191</a></p>
<blockquote>
<p>xxl-job remoting error(Connection refused (Connection refused)), for
url : http://172.17.0.2:9999/run</p>
</blockquote>
<h2 id="ä»»åŠ¡">ä»»åŠ¡</h2>
<h3 id="é…ç½®-1">é…ç½®</h3>
<p>é…ç½®ä¸­å¿ƒ-ä»»åŠ¡ç®¡ç†ï¼Œé…ç½®ä»»åŠ¡ï¼Œå‚è€ƒå®˜æ–¹é…ç½®è¯´æ˜å³å¯ã€‚</p>
<blockquote>
<p>åŸºç¡€é…ç½®ï¼š -
æ‰§è¡Œå™¨ï¼šä»»åŠ¡çš„ç»‘å®šçš„æ‰§è¡Œå™¨ï¼Œä»»åŠ¡è§¦å‘è°ƒåº¦æ—¶å°†ä¼šè‡ªåŠ¨å‘ç°æ³¨å†ŒæˆåŠŸçš„æ‰§è¡Œå™¨,
å®ç°ä»»åŠ¡è‡ªåŠ¨å‘ç°åŠŸèƒ½;
å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œä»»åŠ¡åˆ†ç»„ã€‚æ¯ä¸ªä»»åŠ¡å¿…é¡»ç»‘å®šä¸€ä¸ªæ‰§è¡Œå™¨, å¯åœ¨
"æ‰§è¡Œå™¨ç®¡ç†" è¿›è¡Œè®¾ç½®; - ä»»åŠ¡æè¿°ï¼šä»»åŠ¡çš„æè¿°ä¿¡æ¯ï¼Œä¾¿äºä»»åŠ¡ç®¡ç†ï¼› -
è´Ÿè´£äººï¼šä»»åŠ¡çš„è´Ÿè´£äººï¼› -
æŠ¥è­¦é‚®ä»¶ï¼šä»»åŠ¡è°ƒåº¦å¤±è´¥æ—¶é‚®ä»¶é€šçŸ¥çš„é‚®ç®±åœ°å€ï¼Œæ”¯æŒé…ç½®å¤šé‚®ç®±åœ°å€ï¼Œé…ç½®å¤šä¸ªé‚®ç®±åœ°å€æ—¶ç”¨é€—å·åˆ†éš”ï¼›
è§¦å‘é…ç½®ï¼š - è°ƒåº¦ç±»å‹ï¼š æ— ï¼šè¯¥ç±»å‹ä¸ä¼šä¸»åŠ¨è§¦å‘è°ƒåº¦ï¼›
CRONï¼šè¯¥ç±»å‹å°†ä¼šé€šè¿‡CRONï¼Œè§¦å‘ä»»åŠ¡è°ƒåº¦ï¼›
å›ºå®šé€Ÿåº¦ï¼šè¯¥ç±»å‹å°†ä¼šä»¥å›ºå®šé€Ÿåº¦ï¼Œè§¦å‘ä»»åŠ¡è°ƒåº¦ï¼›æŒ‰ç…§å›ºå®šçš„é—´éš”æ—¶é—´ï¼Œå‘¨æœŸæ€§è§¦å‘ï¼›
å›ºå®šå»¶è¿Ÿï¼šè¯¥ç±»å‹å°†ä¼šä»¥å›ºå®šå»¶è¿Ÿï¼Œè§¦å‘ä»»åŠ¡è°ƒåº¦ï¼›æŒ‰ç…§å›ºå®šçš„å»¶è¿Ÿæ—¶é—´ï¼Œä»ä¸Šæ¬¡è°ƒåº¦ç»“æŸåå¼€å§‹è®¡ç®—å»¶è¿Ÿæ—¶é—´ï¼Œåˆ°è¾¾å»¶è¿Ÿæ—¶é—´åè§¦å‘ä¸‹æ¬¡è°ƒåº¦ï¼›
- CRONï¼šè§¦å‘ä»»åŠ¡æ‰§è¡Œçš„Cronè¡¨è¾¾å¼ï¼› -
å›ºå®šé€Ÿåº¦ï¼šå›ºå®šé€Ÿåº¦çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼› -
å›ºå®šå»¶è¿Ÿï¼šå›ºå®šå»¶è¿Ÿçš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼› ä»»åŠ¡é…ç½®ï¼š - è¿è¡Œæ¨¡å¼ï¼š
BEANæ¨¡å¼ï¼šä»»åŠ¡ä»¥JobHandleræ–¹å¼ç»´æŠ¤åœ¨æ‰§è¡Œå™¨ç«¯ï¼›éœ€è¦ç»“åˆ "JobHandler"
å±æ€§åŒ¹é…æ‰§è¡Œå™¨ä¸­ä»»åŠ¡ï¼›
GLUEæ¨¡å¼(Java)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µç»§æ‰¿è‡ªIJobHandlerçš„Javaç±»ä»£ç å¹¶
"groovy" æºç æ–¹å¼ç»´æŠ¤ï¼Œå®ƒåœ¨æ‰§è¡Œå™¨é¡¹ç›®ä¸­è¿è¡Œï¼Œå¯ä½¿ç”¨@Resource/<span
class="citation"
data-cites="Autowireæ³¨å…¥æ‰§è¡Œå™¨é‡Œä¸­çš„å…¶ä»–æœåŠ¡">@Autowireæ³¨å…¥æ‰§è¡Œå™¨é‡Œä¸­çš„å…¶ä»–æœåŠ¡</span>ï¼›
GLUEæ¨¡å¼(Shell)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ
"shell" è„šæœ¬ï¼›
GLUEæ¨¡å¼(Python)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ
"python" è„šæœ¬ï¼›
GLUEæ¨¡å¼(PHP)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ
"php" è„šæœ¬ï¼›
GLUEæ¨¡å¼(NodeJS)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ
"nodejs" è„šæœ¬ï¼›
GLUEæ¨¡å¼(PowerShell)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ
"PowerShell" è„šæœ¬ï¼› - JobHandlerï¼šè¿è¡Œæ¨¡å¼ä¸º "BEANæ¨¡å¼"
æ—¶ç”Ÿæ•ˆï¼Œå¯¹åº”æ‰§è¡Œå™¨ä¸­æ–°å¼€å‘çš„JobHandlerç±»â€œ<span class="citation"
data-cites="JobHandler">@JobHandler</span>â€æ³¨è§£è‡ªå®šä¹‰çš„valueå€¼ï¼› -
æ‰§è¡Œå‚æ•°ï¼šä»»åŠ¡æ‰§è¡Œæ‰€éœ€çš„å‚æ•°ï¼›<br />
é«˜çº§é…ç½®ï¼š - è·¯ç”±ç­–ç•¥ï¼šå½“æ‰§è¡Œå™¨é›†ç¾¤éƒ¨ç½²æ—¶ï¼Œæä¾›ä¸°å¯Œçš„è·¯ç”±ç­–ç•¥ï¼ŒåŒ…æ‹¬ï¼›
FIRSTï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼šå›ºå®šé€‰æ‹©ç¬¬ä¸€ä¸ªæœºå™¨ï¼›
LASTï¼ˆæœ€åä¸€ä¸ªï¼‰ï¼šå›ºå®šé€‰æ‹©æœ€åä¸€ä¸ªæœºå™¨ï¼› ROUNDï¼ˆè½®è¯¢ï¼‰ï¼šï¼›
RANDOMï¼ˆéšæœºï¼‰ï¼šéšæœºé€‰æ‹©åœ¨çº¿çš„æœºå™¨ï¼›
CONSISTENT_HASHï¼ˆä¸€è‡´æ€§HASHï¼‰ï¼šæ¯ä¸ªä»»åŠ¡æŒ‰ç…§Hashç®—æ³•å›ºå®šé€‰æ‹©æŸä¸€å°æœºå™¨ï¼Œä¸”æ‰€æœ‰ä»»åŠ¡å‡åŒ€æ•£åˆ—åœ¨ä¸åŒæœºå™¨ä¸Šã€‚
LEAST_FREQUENTLY_USEDï¼ˆæœ€ä¸ç»å¸¸ä½¿ç”¨ï¼‰ï¼šä½¿ç”¨é¢‘ç‡æœ€ä½çš„æœºå™¨ä¼˜å…ˆè¢«é€‰ä¸¾ï¼›
LEAST_RECENTLY_USEDï¼ˆæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ï¼‰ï¼šæœ€ä¹…æœªä½¿ç”¨çš„æœºå™¨ä¼˜å…ˆè¢«é€‰ä¸¾ï¼›
FAILOVERï¼ˆæ•…éšœè½¬ç§»ï¼‰ï¼šæŒ‰ç…§é¡ºåºä¾æ¬¡è¿›è¡Œå¿ƒè·³æ£€æµ‹ï¼Œç¬¬ä¸€ä¸ªå¿ƒè·³æ£€æµ‹æˆåŠŸçš„æœºå™¨é€‰å®šä¸ºç›®æ ‡æ‰§è¡Œå™¨å¹¶å‘èµ·è°ƒåº¦ï¼›
BUSYOVERï¼ˆå¿™ç¢Œè½¬ç§»ï¼‰ï¼šæŒ‰ç…§é¡ºåºä¾æ¬¡è¿›è¡Œç©ºé—²æ£€æµ‹ï¼Œç¬¬ä¸€ä¸ªç©ºé—²æ£€æµ‹æˆåŠŸçš„æœºå™¨é€‰å®šä¸ºç›®æ ‡æ‰§è¡Œå™¨å¹¶å‘èµ·è°ƒåº¦ï¼›
SHARDING_BROADCAST(åˆ†ç‰‡å¹¿æ’­)ï¼šå¹¿æ’­è§¦å‘å¯¹åº”é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼ŒåŒæ—¶ç³»ç»Ÿè‡ªåŠ¨ä¼ é€’åˆ†ç‰‡å‚æ•°ï¼›å¯æ ¹æ®åˆ†ç‰‡å‚æ•°å¼€å‘åˆ†ç‰‡ä»»åŠ¡ï¼›
-
å­ä»»åŠ¡ï¼šæ¯ä¸ªä»»åŠ¡éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ä»»åŠ¡ID(ä»»åŠ¡IDå¯ä»¥ä»ä»»åŠ¡åˆ—è¡¨è·å–)ï¼Œå½“æœ¬ä»»åŠ¡æ‰§è¡Œç»“æŸå¹¶ä¸”æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œå°†ä¼šè§¦å‘å­ä»»åŠ¡IDæ‰€å¯¹åº”çš„ä»»åŠ¡çš„ä¸€æ¬¡ä¸»åŠ¨è°ƒåº¦ã€‚
- è°ƒåº¦è¿‡æœŸç­–ç•¥ï¼š -
å¿½ç•¥ï¼šè°ƒåº¦è¿‡æœŸåï¼Œå¿½ç•¥è¿‡æœŸçš„ä»»åŠ¡ï¼Œä»å½“å‰æ—¶é—´å¼€å§‹é‡æ–°è®¡ç®—ä¸‹æ¬¡è§¦å‘æ—¶é—´ï¼› -
ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼šè°ƒåº¦è¿‡æœŸåï¼Œç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä»å½“å‰æ—¶é—´å¼€å§‹é‡æ–°è®¡ç®—ä¸‹æ¬¡è§¦å‘æ—¶é—´ï¼›
- é˜»å¡å¤„ç†ç­–ç•¥ï¼šè°ƒåº¦è¿‡äºå¯†é›†æ‰§è¡Œå™¨æ¥ä¸åŠå¤„ç†æ—¶çš„å¤„ç†ç­–ç•¥ï¼›
å•æœºä¸²è¡Œï¼ˆé»˜è®¤ï¼‰ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œè°ƒåº¦è¯·æ±‚è¿›å…¥FIFOé˜Ÿåˆ—å¹¶ä»¥ä¸²è¡Œæ–¹å¼è¿è¡Œï¼›
ä¸¢å¼ƒåç»­è°ƒåº¦ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œå‘ç°æ‰§è¡Œå™¨å­˜åœ¨è¿è¡Œçš„è°ƒåº¦ä»»åŠ¡ï¼Œæœ¬æ¬¡è¯·æ±‚å°†ä¼šè¢«ä¸¢å¼ƒå¹¶æ ‡è®°ä¸ºå¤±è´¥ï¼›
è¦†ç›–ä¹‹å‰è°ƒåº¦ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œå‘ç°æ‰§è¡Œå™¨å­˜åœ¨è¿è¡Œçš„è°ƒåº¦ä»»åŠ¡ï¼Œå°†ä¼šç»ˆæ­¢è¿è¡Œä¸­çš„è°ƒåº¦ä»»åŠ¡å¹¶æ¸…ç©ºé˜Ÿåˆ—ï¼Œç„¶åè¿è¡Œæœ¬åœ°è°ƒåº¦ä»»åŠ¡ï¼›
- ä»»åŠ¡è¶…æ—¶æ—¶é—´ï¼šæ”¯æŒè‡ªå®šä¹‰ä»»åŠ¡è¶…æ—¶æ—¶é—´ï¼Œä»»åŠ¡è¿è¡Œè¶…æ—¶å°†ä¼šä¸»åŠ¨ä¸­æ–­ä»»åŠ¡ï¼› -
å¤±è´¥é‡è¯•æ¬¡æ•°ï¼›æ”¯æŒè‡ªå®šä¹‰ä»»åŠ¡å¤±è´¥é‡è¯•æ¬¡æ•°ï¼Œå½“ä»»åŠ¡å¤±è´¥æ—¶å°†ä¼šæŒ‰ç…§é¢„è®¾çš„å¤±è´¥é‡è¯•æ¬¡æ•°ä¸»åŠ¨è¿›è¡Œé‡è¯•ï¼›</p>
</blockquote>
<p>æˆ‘çš„é…ç½®å¦‚ä¸‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/clouding@master/cloud-picture/image.12gwuxn9t3bk.webp"
alt="ä»»åŠ¡é…ç½®" />
<figcaption aria-hidden="true">ä»»åŠ¡é…ç½®</figcaption>
</figure>
<h3 id="æ‰§è¡Œ">æ‰§è¡Œ</h3>
<p>ç¬¬ä¸€æ¬¡é…ç½®å®Œæˆï¼Œæ‰‹åŠ¨è§¦å‘åæŸ¥çœ‹è°ƒåº¦æ—¥å¿—å’Œæ‰§è¡Œæ—¥å¿—ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/ouding@master/cloud-picture/image.knbkew39x80.webp"
alt="ä»»åŠ¡ç®¡ç†" />
<figcaption aria-hidden="true">ä»»åŠ¡ç®¡ç†</figcaption>
</figure>
<h2 id="è°ƒåº¦æ—¥å¿—">è°ƒåº¦æ—¥å¿—</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/ouding@master/cloud-picture/image.35mls8xefvk0.webp"
alt="è°ƒåº¦æ—¥å¿—" />
<figcaption aria-hidden="true">è°ƒåº¦æ—¥å¿—</figcaption>
</figure>
<h2 id="æ‰§è¡Œæ—¥å¿—">æ‰§è¡Œæ—¥å¿—</h2>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/ouding@master/cloud-picture/image.2s8iwvfk81e0.webp"
alt="æ‰§è¡Œæ—¥å¿—" />
<figcaption aria-hidden="true">æ‰§è¡Œæ—¥å¿—</figcaption>
</figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p><code>XXL-JOB</code>ä½¿ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œä½¿ç”¨ä¸Šæ¯”è¾ƒç¬¦åˆå®˜ç½‘æ‰€æè¿°çš„ã€‚</p>
<blockquote>
<p>XXL-JOBæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å¹³å°ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯å¼€å‘è¿…é€Ÿã€å­¦ä¹ ç®€å•ã€è½»é‡çº§ã€æ˜“æ‰©å±•ã€‚ç°å·²å¼€æ”¾æºä»£ç å¹¶æ¥å…¥å¤šå®¶å…¬å¸çº¿ä¸Šäº§å“çº¿ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
</blockquote>
<p>ä»ç›®å‰çš„ä½¿ç”¨ä½“éªŒä¸Šè®²ï¼Œè¿˜æ˜¯èƒ½ç©å¥½å¤šä¸œè¥¿çš„ã€‚</p>
]]></content>
      <tags>
        <tag>å®šæ—¶ä»»åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†Python</title>
    <url>/article/596b7022.html</url>
    <content><![CDATA[<h1
id="section"><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/9787121339387.jpg" width = "200" height = "" alt="ä¸€å¾€æ— å‰"/></h1>
<p>å› ä¸ºè¿™å­¦æœŸé€‰ä¸Šã€ŠPythonæ•°æ®åˆ†æåŸºç¡€æ•™ç¨‹ã€‹è¿™é—¨è¯¾ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦Pythonï¼Œæ—©æœ‰è€³é—»Pythonçš„å¤§åï¼Œä»€ä¹ˆâ€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonâ€æ—©æ—©å°±å¬è¿‡äº†ï¼Œè¿™æ¬¡å¯ç®—èƒ½æ­å¼€å¥¹ç¥ç§˜çš„é¢çº±äº†ï¼</p>
<p>å› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆå­¦ï¼Œè¿˜æœ‰å¯¹ç¼–ç¨‹è¯­è¨€è®¤è¯†çš„ä¸å¤Ÿæ·±å…¥ï¼Œæˆ‘æ¥ä¸‹æ¥çš„è¯ä»…ä»…æ˜¯å°±æˆ‘ç›®å‰äº†è§£çš„çŸ¥è¯†è€Œè¯´å‡ºçš„ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¿˜æœ›è§è°…ï¼</p>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šå°±æˆ‘ç›®å‰å¯¹Pythonçš„äº†è§£è°ˆä¸€è°ˆæˆ‘çš„æƒ³æ³•ï¼Œå‡ ä¹æ²¡ä»€ä¹ˆå¹²è´§ã€‚</p>
<span id="more"></span>
<h1 id="ç®€ä»‹ä¸ç¯å¢ƒé…ç½®">ç®€ä»‹ä¸ç¯å¢ƒé…ç½®</h1>
<p>è¿™ç¯‡åšå®¢å¹¶ä¸æ˜¯ç™¾ç§‘ï¼Œæˆ‘åˆæ‡’å¾—å¤åˆ¶ç²˜è´´ï¼Œè¿™é‡Œç›´æ¥çœç•¥ã€‚ã€‚ã€‚</p>
<h1 id="è¯­æ³•">è¯­æ³•</h1>
<p>è¿™ä¸ªæˆ‘ä¸€å®šè¦å¥½å¥½èŠä¸€èŠäº†ï¼ŒPythonå¯¹äºæˆ‘çš„ç¬¬ä¸€æ„Ÿå—æ˜¯ï¼šç®€å•ï¼ˆç²¾å¦™ï¼‰ã€‚PythonçœŸçš„å¤ªæœ‰æ„æ€äº†ï¼ï¼ï¼</p>
<p>æœ€æœ‰æ„æ€åº”è¯¥æ˜¯ç¼©è¿›äº†ï¼Œä¸‹é¢ä¼šæã€‚</p>
<p>å› ä¸ºæˆ‘ä¹‹å‰å­¦è¿‡C++ã€C#å’Œjavaï¼Œæ‰€ä»¥å­¦èµ·Pythonè¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œåœ¨æˆ‘çœ‹æ¥Pythonå°±åƒæ˜¯è€ƒè¯•åœ¨è‰ç¨¿çº¸ä¸Šçš„æ¶‚æ¶‚ç”»ç”»ï¼Œåªè¦ä½ æ¸…æ¥šä½ ç”»çš„æ˜¯å•¥ï¼Œä¸ç®¡çœ‹èµ·æ¥å†ä¹±ï¼Œä½†å®ƒå¯¹äºä½ éƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè€ŒåƒC++ã€C#å’Œjavaå°±çœ‹èµ·æ¥å°±å¾ˆè§„èŒƒï¼Œä¸€æ­¥ä¸€æ­¥æ•´æ´äº†ç„¶ã€‚åœ¨è¿™ä¸ªæ–¹é¢Pythonå°±å’Œæˆ‘å¾ˆå¥‘åˆï¼Œå› ä¸ºæˆ‘çš„è‰ç¨¿çº¸éƒ½ç‰¹åˆ«ä¹±ï¼Œæ¯«æ— ç« æ³•å¯è¨€ï¼Œæ­£å› å¦‚æ­¤ï¼Œå¤§å¤šæ•°å·¥ä½œéƒ½äº¤ç»™äº†ç»éªŒä¸ä¸´åœºå‘æŒ¥ï¼Œæ‰€ä»¥æœ€åçš„é€Ÿåº¦ä¹Ÿä¸ç®—æ…¢ã€‚å¯èƒ½æˆ‘çš„è¡¨è¾¾ä¸å¥½ï¼Œæˆ‘æƒ³è¯´çš„å°±æ˜¯ç›¸åŒåŠŸèƒ½çš„ç”¨è¿™å‡ ç§è¯­è¨€å†™ï¼ŒPythonä»£ç æ›´å°‘ã€‚</p>
<h1 id="åŸºæœ¬æ•°æ®ç±»å‹">åŸºæœ¬æ•°æ®ç±»å‹</h1>
<p>Python3
ä¸­æœ‰å…­ä¸ªæ ‡å‡†çš„æ•°æ®ç±»å‹ï¼šNumberï¼ˆæ•°å­—ï¼‰ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Listï¼ˆåˆ—è¡¨ï¼‰ã€Tupleï¼ˆå…ƒç»„ï¼‰ã€Setï¼ˆé›†åˆï¼‰å’ŒDictionaryï¼ˆå­—å…¸ï¼‰ã€‚</p>
<p>ä¸å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼šNumberï¼ˆæ•°å­—ï¼‰ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼›
å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼šListï¼ˆåˆ—è¡¨ï¼‰ã€Dictionaryï¼ˆå­—å…¸ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€‚</p>
<p>æ¯ä¸ªæ•°æ®ç±»å‹éƒ½å¾ˆå®¹æ˜“æ“ä½œï¼Œå¾ˆæ–¹ä¾¿ï¼Œå¾ˆæœ‰è¶£ã€‚</p>
<h1 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h1>
<p>è¿™æ–¹é¢Pythonä¸å…¶ä»–è¯­è¨€å·®åˆ«ä¸å¤§ã€‚</p>
<h1 id="æ¡ä»¶æ§åˆ¶ä¸å¾ªç¯è¯­å¥">æ¡ä»¶æ§åˆ¶ä¸å¾ªç¯è¯­å¥</h1>
<p>å®ƒæ¥äº†â€”â€”ç¼©è¿›ï¼Œæˆ‘ä»¬é€šå¸¸äº†è§£çš„è¯­å¥éƒ½è¦æœ‰{}ï¼Œä½†åœ¨Pythoné‡Œæ²¡æœ‰ï¼Œå®ƒä»…ä»…é‡‡ç”¨äº†ç¼©è¿›çš„æ–¹å¼å°±å®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŒä¸€è¯­å¥å—çš„è¦æœ‰åˆé€‚çš„ç¼©è¿›ï¼Œå› æ­¤Pythonå¯¹äºæ’ç‰ˆè¿˜æ˜¯æœ‰è¦æ±‚çš„ã€‚</p>
<h1 id="å‡½æ•°">å‡½æ•°</h1>
<p>æ²¡ä»€ä¹ˆè¯´çš„â€œç®€æ´â€ï¼Œè¿”å›å€¼å¾ˆæœ‰æ„æ€ï¼Œå¾ˆè½»æ¾è¿”å›å¤šä¸ªå€¼ï¼Œæœ‰æ„æ€ï¼</p>
<h1 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h1>
<p>è¿™ä¸ªæ›´æœ‰æ„æ€ï¼Œè¿˜è®°å¾—å‰é¢çš„Listå—ï¼Œè¿™é‡Œå®ƒå¯ä»¥å †æ ˆå’Œé˜Ÿåˆ—ã€‚æœ‰å…´è¶£å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<h1 id="è¾“å…¥è¾“å‡ºç­‰å…¶ä»–">è¾“å…¥è¾“å‡ºç­‰å…¶ä»–</h1>
<p>åº“å‡½æ•°å·®åˆ«ä¸å¤§ï¼Œè¾“å…¥è¾“å‡ºä¹Ÿæ˜¯ï¼ŒPythonçš„é¢å‘å¯¹è±¡æˆ‘äº†è§£çš„è¿˜ä¸å¤ªå¤Ÿï¼Œä¸è¯´äº†ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.runoob.com/python3/python3-tutorial.html">èœé¸Ÿæ•™ç¨‹</a></p>
<p><a
href="https://www.runoob.com/python3/python3-examples.html">å®ä¾‹</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¯´å®è¯è¿™ç¯‡å†™çš„å¾ˆçƒ‚å¯ä»¥è¯´æ˜¯â€œå•¥ä¹Ÿä¸æ˜¯â€ï¼Œä½†ä¸ä¼šåˆ ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç§è®°å½•ï¼Œè®°å½•ç°åœ¨æˆ‘åˆå­¦Pythonçš„é‚£ä¸€ç‚¹çƒ­æƒ…ã€‚</p>
]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆçº§æ’åºç®—æ³•</title>
    <url>/article/2e8ba7ec.html</url>
    <content><![CDATA[<p>ä½œä¸ºå¯¹æ’åºç®—æ³•é¢†åŸŸçš„ç¬¬ä¸€æ¬¡æ¢ç´¢ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸¤ç§åˆçº§çš„æ’åºç®—æ³•ä»¥åŠå…¶ä¸­ä¸€ç§çš„ä¸€ä¸ªå˜ä½“ã€‚æ·±äººå­¦ä¹ è¿™äº›ç›¸å¯¹ç®€å•çš„ç®—æ³•çš„åŸå› åœ¨äº:ç¬¬ä¸€ï¼Œæˆ‘ä»¬å°†é€šè¿‡å®ƒä»¬ç†Ÿæ‚‰ä¸€äº›æœ¯è¯­å’Œç®€å•çš„æŠ€å·§ï¼›ç¬¬äºŒï¼Œè¿™äº›ç®€å•çš„ç®—æ³•åœ¨æŸäº›æƒ…å†µä¸‹æ¯”æˆ‘ä»¬ä¹‹åå°†ä¼šè®¨è®ºçš„å¤æ‚ç®—æ³•æ›´æœ‰æ•ˆï¼›ç¬¬ä¸‰ï¼Œä»¥åä½ ä¼šå‘ç°ï¼Œå®ƒä»¬æœ‰åŠ©äºæˆ‘ä»¬æ”¹è¿›å¤æ‚ç®—æ³•çš„æ•ˆç‡ã€‚é‚£ä¹ˆå¼€å§‹å§ï¼</p>
<p><a
href="https://wnhyang.github.io/article/a444b428.html">ç›®å½•</a></p>
<span id="more"></span>
<h1 id="æ’åºç®—æ³•ç±»çš„æ¨¡æ¿">æ’åºç®—æ³•ç±»çš„æ¨¡æ¿</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="comment">//å°†a[]æŒ‰å‡åºæ’åˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="comment">/*è¯·è§æœ¬æ–‡ç®—æ³•2.1ã€ç®—æ³•2.2ã€ç®—æ³•2.3*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">less</span><span class="params">(Comparable v, Comparable w)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">exch</span><span class="params">(Comparable[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">Comparable</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨å•è¡Œæ‰“å°æ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++)</span><br><span class="line">            print(a[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•æ•°ç»„å…ƒç´ æ˜¯å¦æœ‰åº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isSort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++)</span><br><span class="line">            <span class="keyword">if</span> (less(a[i], a[i - <span class="number">1</span>]))</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„print()ã€println()ä¸ºè‡ªå®šä¹‰çš„é™æ€æ–¹æ³•ï¼Œä¸å†è¯¦ç»†è¯´æ˜ã€‚</p>
<h1 id="é€‰æ‹©æ’åº">é€‰æ‹©æ’åº</h1>
<p>ä¸€ç§æœ€ç®€å•çš„æ’åºç®—æ³•æ˜¯è¿™æ ·çš„:
é¦–å…ˆï¼Œæ‰¾åˆ°æ•°ç»„ä¸­æœ€å°çš„é‚£ä¸ªå…ƒç´ ï¼Œå…¶æ¬¡ï¼Œå°†å®ƒå’Œæ•°ç»„çš„ç¬¬ä¸ªå…ƒç´ äº¤æ¢ä½ç½®
(å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€å°å…ƒç´ é‚£ä¹ˆå®ƒå°±å’Œè‡ªå·±äº¤æ¢)ã€‚å†æ¬¡ï¼Œåœ¨å‰©ä¸‹çš„å…ƒç´ ä¸­æ‰¾åˆ°æœ€å°çš„å…ƒç´ ï¼Œå°†å®ƒä¸æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°å°†æ•´ä¸ªæ•°ç»„æ’åºã€‚è¿™ç§æ–¹æ³•å«åšé€‰æ‹©æ’åºï¼Œå› ä¸ºå®ƒåœ¨ä¸æ–­åœ°é€‰æ‹©å‰©ä½™å…ƒç´ ä¹‹ä¸­çš„æœ€å°è€…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Selection</span> &#123;</span><br><span class="line">    <span class="comment">//å°†a[]æŒ‰å‡åºæ’åˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="type">int</span> n=a.length; <span class="comment">//æ•°ç»„é•¿åº¦</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;   <span class="comment">//å°†a[i]å’Œa[i+1..n]ä¸­æœ€å°çš„å…ƒç´ äº¤æ¢</span></span><br><span class="line">            <span class="type">int</span> min=i;          <span class="comment">//æœ€å°å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">                <span class="keyword">if</span>(less(a[j],a[min]))</span><br><span class="line">                    min=j;</span><br><span class="line">                exch(a,i,min);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// less()ã€exch()ã€isSorted()æ–¹æ³•è§â€œæ’åºç®—æ³•ç±»çš„æ¨¡æ¿â€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/selection.png"
alt="é€‰æ‹©æ’åºçš„è½¨è¿¹ï¼ˆæ¯æ¬¡äº¤æ¢åçš„æ•°ç»„å†…å®¹ï¼‰" />
<figcaption
aria-hidden="true">é€‰æ‹©æ’åºçš„è½¨è¿¹ï¼ˆæ¯æ¬¡äº¤æ¢åçš„æ•°ç»„å†…å®¹ï¼‰</figcaption>
</figure>
<h1 id="æ’å…¥æ’åº">æ’å…¥æ’åº</h1>
<p>ä¸é€‰æ‹©æ’åºä¸€æ ·ï¼Œå½“å‰ç´¢å¼•å·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æœ‰åºçš„ï¼Œä½†å®ƒä»¬çš„æœ€ç»ˆä½ç½®è¿˜ä¸ç¡®å®šï¼Œä¸ºäº†ç»™æ›´å°çš„å…ƒç´ è…¾å‡ºç©ºé—´ï¼Œå®ƒä»¬å¯èƒ½ä¼šè¢«ç§»åŠ¨ã€‚ä½†æ˜¯å½“ç´¢å¼•åˆ°è¾¾æ•°ç»„çš„å³ç«¯æ—¶ï¼Œæ•°ç»„æ’åºå°±å®Œæˆäº†ã€‚å’Œé€‰æ‹©æ’åºä¸åŒçš„æ˜¯ï¼Œæ’äººæ’åºæ‰€éœ€çš„æ—¶é—´å–å†³äºè¾“äººä¸­å…ƒç´ çš„åˆå§‹é¡ºåºã€‚ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ªå¾ˆå¤§ä¸”å…¶ä¸­çš„å…ƒç´ å·²ç»æœ‰åº(æˆ–æ¥è¿‘æœ‰åº)çš„æ•°ç»„è¿›è¡Œæ’åºå°†ä¼šæ¯”å¯¹éšæœºé¡ºåºçš„æ•°ç»„æˆ–æ˜¯é€†åºæ•°ç»„è¿›è¡Œæ’åºè¦å¿«å¾—å¤šã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Insertion</span> &#123;</span><br><span class="line">    <span class="comment">//å°†a[]æŒ‰å‡åºæ’åˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> a.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;   <span class="comment">//å°†a[i]æ’å…¥åˆ°a[i-1]ã€a[i-2]ã€a[i-3]...ä¹‹ä¸­</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt; <span class="number">0</span> &amp;&amp; less(a[j], a[j - <span class="number">1</span>]); j--)</span><br><span class="line">                exch(a, j, j - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// less()ã€exch()ã€isSorted()æ–¹æ³•è§â€œæ’åºç®—æ³•ç±»çš„æ¨¡æ¿â€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/insertion.png"
alt="æ’å…¥æ’åºçš„è½¨è¿¹ï¼ˆæ¯æ¬¡æ’å…¥åçš„æ•°ç»„å†…å®¹ï¼‰" />
<figcaption
aria-hidden="true">æ’å…¥æ’åºçš„è½¨è¿¹ï¼ˆæ¯æ¬¡æ’å…¥åçš„æ•°ç»„å†…å®¹ï¼‰</figcaption>
</figure>
<h1 id="æ¯”è¾ƒä¸¤ç§æ’åºç®—æ³•">æ¯”è¾ƒä¸¤ç§æ’åºç®—æ³•</h1>
<p>è¯´å®è¯è¿™éƒ¨åˆ†æˆ‘è¿˜è¯´ä¸æ¸…æ¥šï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹åŸè‘—ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/bars.png"
alt="åˆçº§æ’åºç®—æ³•çš„å¯è§†è½¨è¿¹å›¾" />
<figcaption aria-hidden="true">åˆçº§æ’åºç®—æ³•çš„å¯è§†è½¨è¿¹å›¾</figcaption>
</figure>
<h1 id="å¸Œå°”æ’åº">å¸Œå°”æ’åº</h1>
<p>ä¸ºäº†å±•ç¤ºåˆçº§æ’åºç®—æ³•æ€§è´¨çš„ä»·å€¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹ ä¸€ç§åŸºäºæ’äººæ’åºçš„å¿«é€Ÿçš„æ’åºç®—æ³•ã€‚å¯¹äºå¤§è§„æ¨¡ä¹±åºæ•°ç»„æ’äººæ’åºå¾ˆæ…¢ï¼Œå› ä¸ºå®ƒåªä¼šäº¤æ¢ç›¸é‚»çš„å…ƒç´ ï¼Œå› æ­¤å…ƒç´ åªèƒ½ä¸€ç‚¹ä¸€ç‚¹åœ°ä»æ•°ç»„çš„ä¸€ç«¯ç§»åŠ¨åˆ°å¦-ç«¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸»é”®æœ€å°çš„å…ƒç´ æ­£å¥½åœ¨æ•°ç»„çš„å°½å¤´ï¼Œè¦å°†å®ƒæŒªåˆ°æ­£ç¡®çš„ä½ç½®å°±éœ€è¦N-1æ¬¡ç§»åŠ¨ã€‚å¸Œå°”æ’åºä¸ºäº†åŠ å¿«é€Ÿåº¦ç®€å•åœ°æ”¹è¿›äº†æ’äººæ’åºï¼Œäº¤æ¢ä¸ç›¸é‚»çš„å…ƒç´ ä»¥å¯¹æ•°ç»„çš„å±€éƒ¨è¿›è¡Œæ’åºï¼Œå¹¶æœ€ç»ˆç”¨æ’å…¥æ’åºå°†å±€éƒ¨æœ‰åºçš„æ•°ç»„æ’åºã€‚</p>
<p>å¸Œå°”æ’åºçš„æ€æƒ³æ˜¯ä½¿æ•°ç»„ä¸­ä»»æ„é—´éš”ä¸ºhçš„å…ƒç´ éƒ½æ˜¯æœ‰åºçš„ã€‚è¿™æ ·çš„æ•°ç»„è¢«ç§°ä¸ºhæœ‰åºæ•°ç»„ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªhæœ‰åºæ•°ç»„å°±æ˜¯hä¸ªäº’ç›¸ç‹¬ç«‹çš„æœ‰åºæ•°ç»„ç¼–ç»‡åœ¨ä¸€èµ·ç»„æˆçš„ä¸€ä¸€ä¸ªæ•°ç»„(è§å›¾2.1.2)ã€‚åœ¨è¿›è¡Œæ’åºæ—¶ï¼Œå¦‚æœhå¾ˆå¤§ï¼Œæˆ‘ä»¬å°±èƒ½å°†å…ƒç´ ç§»åŠ¨åˆ°å¾ˆè¿œçš„åœ°æ–¹ï¼Œä¸ºå®ç°æ›´å°çš„hæœ‰åºåˆ›é€ æ–¹ä¾¿ã€‚ç”¨è¿™ç§æ–¹å¼ï¼Œå¯¹äºä»»æ„ä»¥1ç»“å°¾çš„håºåˆ—ï¼Œæˆ‘ä»¬éƒ½èƒ½å¤Ÿå°†æ•°ç»„æ’åºã€‚è¿™å°±æ˜¯å¸Œå°”æ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Shell</span> &#123;</span><br><span class="line">    <span class="comment">//å°†a[]æŒ‰å‡åºæ’åˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> a.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (h &lt; n / <span class="number">3</span>) h = <span class="number">3</span> * h + <span class="number">1</span>;<span class="comment">//1,4,13,40,121,364,1093,...</span></span><br><span class="line">        <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;    <span class="comment">//å°†æ•°ç»„å˜ä¸ºhæœ‰åº</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> h; i &lt; n; i++) &#123;   <span class="comment">//å°†a[i]æ’å…¥åˆ°a[i-h]ã€a[i-2*h]ã€a[i-3*h]...ä¹‹ä¸­</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt;= h &amp;&amp; less(a[j], a[j - h]); j -= h)</span><br><span class="line">                    exch(a, j, j - h);</span><br><span class="line">            &#125;</span><br><span class="line">            h /=  <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// less()ã€exch()ã€isSorted()æ–¹æ³•è§â€œæ’åºç®—æ³•ç±»çš„æ¨¡æ¿â€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/shell.png"
alt="å¸Œå°”æ’åºçš„è¯¦ç»†è½¨è¿¹ï¼ˆå„ç§æ’å…¥ï¼‰" />
<figcaption
aria-hidden="true">å¸Œå°”æ’åºçš„è¯¦ç»†è½¨è¿¹ï¼ˆå„ç§æ’å…¥ï¼‰</figcaption>
</figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/shell-bars.png"
alt="å¸Œå°”æ’åºçš„å¯è§†è½¨è¿¹ï¼‰" />
<figcaption aria-hidden="true">å¸Œå°”æ’åºçš„å¯è§†è½¨è¿¹ï¼‰</figcaption>
</figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æœ€å¼€å§‹çœ‹è¿™æœ¬ä¹¦æœ‰ç‚¹è´¹åŠ²ï¼Œçœ‹ä¸ä¸‹å»ï¼Œå°¤å…¶æ˜¯ä¹¦ä¸­é‚£äº›è‡ªå®šä¹‰çš„APIä¸ç»™è¯¦ç»†ä»£ç ï¼Œåªç»™APIçš„ä½œç”¨è¯´æ˜ï¼Œæƒ³çœ‹ä»£ç åªèƒ½ä¸Šæœ¬ä¹¦ç½‘ç«™æŸ¥çœ‹ï¼Œå½“ç„¶è¿™é‡Œæœ‰å¯¹javaä¸ç†Ÿæ‚‰çš„åŸå› ï¼Œåæ¥è§‰å¾—å…¶å®æ²¡å½±å“çš„ï¼Œé‚£äº›éƒ½æ˜¯ä¸€äº›ç®€å•çš„javaç³»ç»Ÿç±»åº“çš„ç®€å•æ”¹å†™ã€‚ç°åœ¨è¶Šè¯»è¶Šæœ‰æ„æ€ï¼Œé¦–å…ˆæœ¬ä¹¦éå¸¸ä¸¥è°¨ï¼Œç„¶åå°±æ˜¯ä¹¦ä¸­æ’ç‰ˆåŒ…æ‹¬å‰åç…§åº”å…³ç³»å®‰æ’çš„å¤ªå‰å®³äº†ï¼Œæœ€ç‰¹æ®Šçš„æ˜¯æœ¬ä¹¦çš„å›¾æ–‡ç…§åº”ï¼Œå‡ ä¹æ‰€æœ‰å¤æ‚éš¾ä»¥ç†è§£çš„ç®—æ³•éƒ½æœ‰å¯è§†åŒ–å›¾ç‰‡ï¼Œå‘½é¢˜+è®ºè¯+æµ‹è¯•éƒ½æ˜¯éå¸¸æœ‰æ„æ€çš„ï¼Œå°±æ˜¯éœ€è¦ä¸€äº›æ•°å­¦çŸ¥è¯†ã€‚è¿˜æœ‰æˆ‘ä¹Ÿæ˜¯åˆè¯»è¿™æ ·çš„ä¹¦ï¼Œè‚¯å®šæœ‰ç†è§£ä¸åˆ°ä½çš„åœ°æ–¹ï¼Œè°…è§£ï¼</p>
<h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1>
<p>ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ç¬¬äºŒç« æ’åº2.1åˆçº§æ’åºç®—æ³•</p>
<p><a href="https://algs4.cs.princeton.edu/">æœ¬ä¹¦ç½‘ç«™</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’Aè®¡æ•°é—®é¢˜</title>
    <url>/article/5aa54489.html</url>
    <content><![CDATA[<p>æ¥ä¸‹æ¥ç”¨ä¸€é“ä¾‹é¢˜æ¥è®¤è¯†åŠ¨æ€è§„åˆ’çš„è®¡æ•°é—®é¢˜ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸‹ï¼Œè¿™äº›é¢˜å¯èƒ½æœ‰å…¶ä»–è§£æ³•ï¼Œä½†åœ¨è¿™é‡Œæˆ‘åªæ˜¯è¯´ä¸€è¯´å…³äºåŠ¨æ€è§„åˆ’çš„è§£æ³•ã€‚</p>
<p>å¼€å§‹å§ï¼</p>
<span id="more"></span>
<h1 id="ä¸åŒè·¯å¾„">62. ä¸åŒè·¯å¾„</h1>
<p><a
href="https://leetcode-cn.com/problems/unique-paths/">é¢˜ç›®åœ°å€</a></p>
<p>ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œStartâ€
ï¼‰ã€‚</p>
<p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œFinishâ€ï¼‰ã€‚</p>
<p>é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/robot_maze.png" width="400" height="" alt="141-1" /></p>
<p>ä¾‹å¦‚ï¼Œä¸Šå›¾æ˜¯ä¸€ä¸ª7 x 3 çš„ç½‘æ ¼ã€‚æœ‰å¤šå°‘å¯èƒ½çš„è·¯å¾„ï¼Ÿ</p>
<p>ç¤ºä¾‹1ï¼š &gt;è¾“å…¥: m = 3, n = 2<br />
&gt;è¾“å‡º: 3<br />
&gt;è§£é‡Š:ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œæ€»å…±æœ‰ 3 æ¡è·¯å¾„å¯ä»¥åˆ°è¾¾å³ä¸‹è§’ã€‚</p>
<ol type="1">
<li>å‘å³ -&gt; å‘å³ -&gt; å‘ä¸‹</li>
<li>å‘å³ -&gt; å‘ä¸‹ -&gt; å‘å³</li>
<li>å‘ä¸‹ -&gt; å‘å³ -&gt; å‘å³</li>
</ol>
<p>ç¤ºä¾‹2ï¼š &gt;è¾“å…¥: m = 7, n = 3<br />
&gt;è¾“å‡º: 28</p>
<p>æç¤ºï¼š</p>
<ul>
<li>1 &lt;= m, n &lt;= 100</li>
<li>é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå°äºç­‰äº 2 * <span class="math inline">\(10 ^
9\)</span></li>
</ul>
<h1 id="begin">begin</h1>
<p>é¢˜ç›®æè¿°å¾—å¾ˆæ¸…æ¥šäº†ï¼Œä½ æ˜¯å¦æœ‰äº†æƒ³æ³•ï¼Œå»ºè®®å…ˆå°è¯•ä¸€ä¸‹ï¼Œè€ƒè™‘ç”¨åŠ¨æ€è§„åˆ’æ€ä¹ˆè§£ã€‚</p>
<h1 id="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</h1>
<p>A è®¡æ•°é—®é¢˜ B æœ€å€¼é—®é¢˜ C å¯è¡Œæ€§é—®é¢˜</p>
<h2 id="ä¸€ç¡®å®šçŠ¶æ€">ä¸€ã€ç¡®å®šçŠ¶æ€</h2>
<blockquote>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
<li>å­é—®é¢˜</li>
</ol>
</blockquote>
<h2 id="äºŒè½¬ç§»æ–¹ç¨‹">äºŒã€è½¬ç§»æ–¹ç¨‹</h2>
<h2 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h2>
<blockquote>
<p>åˆå§‹æ¡ä»¶ï¼šç”¨è½¬ç§»æ–¹ç¨‹ç®—ä¸å‡ºæ¥ï¼Œéœ€è¦æ‰‹å·¥å®šä¹‰<br />
è¾¹ç•Œæƒ…å†µï¼šæ•°ç»„ä¸èƒ½è¶Šç•Œ</p>
</blockquote>
<h2 id="å››è®¡ç®—é¡ºåº">å››ã€è®¡ç®—é¡ºåº</h2>
<h1 id="aè®¡æ•°é—®é¢˜">Aè®¡æ•°é—®é¢˜</h1>
<p>å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªå…³äºè®¡æ•°çš„é—®é¢˜ï¼Œé¢˜ç›®è¦æ±‚è§£çš„æ˜¯æœºå™¨äººæœ‰å¤šå°‘ç§æ–¹æ¡ˆèµ°åˆ°å³ä¸‹è§’ï¼Œè€Œä¸æ˜¯è¦æ±‚è¿™äº›æ–¹æ¡ˆé‡Œæ˜¯æ€æ ·èµ°åˆ°å³ä¸‹è§’çš„ï¼Œè¿™å°±æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ä¸ªæ ‡å¿—å§ï¼Œä¸è¦è¿‡ç¨‹è¦ç»“æœã€‚</p>
<p>æŒ‰ç…§ä¸Šé¢çš„é¡ºåºæ¥ï¼š</p>
<h1 id="ä¸€ç¡®å®šçŠ¶æ€-1">ä¸€ã€ç¡®å®šçŠ¶æ€</h1>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
</ol>
<blockquote>
<p>æˆ‘ä»¬å‡è®¾æœºå™¨äººèµ°äº†æœ€åä¸€æ­¥åˆ°è¾¾ç»ˆç‚¹ï¼Œä¹Ÿåªæœ‰ä¸¤ç§å¯èƒ½ï¼Œä»ä¸Šæ–¹å‘ä¸‹èµ°ï¼Œä»å·¦æ–¹å‘å³èµ°ã€‚å³ä»(m-2,n-1)æˆ–(m-1,n-2)èµ°åˆ°äº†ç»ˆç‚¹(m-1,n-1)ã€‚</p>
</blockquote>
<ol start="2" type="1">
<li>å­é—®é¢˜</li>
</ol>
<blockquote>
<p>æ ¹æ®æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬æŠŠç»ˆç‚¹æ¢äº†ä¸ªä½ç½®ï¼Œå³ä¸Šæ–¹çš„(m-2,n-1)å’Œ(m-1,n-2)ï¼Œå¹¶ä¸”åˆ°è¿™ä¸¤ç‚¹ä¹‹å’Œä½œä¸ºç»“æœã€‚å¾ˆæ˜æ˜¾æ˜¯å°†ä¸€ä¸ªå¤§é—®é¢˜å˜æˆä¸€ä¸ªè§„æ¨¡æ›´å°çš„é—®é¢˜äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå°±æ˜¯å­é—®é¢˜ã€‚</p>
</blockquote>
<h1 id="äºŒè½¬ç§»æ–¹ç¨‹-1">äºŒã€è½¬ç§»æ–¹ç¨‹</h1>
<blockquote>
<p>f[i][j]=f[i-1][j]+f[i][j-1]ã€‚</p>
</blockquote>
<h1 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜-1">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h1>
<blockquote>
<p>å‡ºå‘ç‚¹f[0][0]=1ï¼Œæœ€ä¸Šä¸€å±‚å’Œæœ€å·¦ä¸€å±‚éƒ½æ˜¯åªæœ‰ä¸€æ¡è·¯ã€‚</p>
</blockquote>
<h1 id="å››è®¡ç®—é¡ºåº-1">å››ã€è®¡ç®—é¡ºåº</h1>
<blockquote>
<p>äºŒç»´æ•°ç»„æ›´æ³¨é‡é¡ºåºï¼Œè¦æ¸…æ¥šæˆ‘ä»¬è¦æ±‚çš„æ‰€æœ‰æ¡ä»¶éƒ½åœ¨ä¸Šä¸€æ­¥æ±‚å‡ºäº†ã€‚</p>
</blockquote>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePaths</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][m];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">0</span>||j==<span class="number">0</span>)&#123;</span><br><span class="line">                    dp[i][j]=<span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dp[i][j]=dp[i-<span class="number">1</span>][j]+dp[i][j-<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n-<span class="number">1</span>][m-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”è¯¥éƒ½èƒ½çœ‹æ‡‚å§ã€‚</p>
<p><a
href="https://leetcode-cn.com/problems/unique-paths/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æ¨èè§†é¢‘">æ¨èè§†é¢‘</h1>
<p><a
href="https://www.bilibili.com/video/BV1xb411e7ww">åŠ¨æ€è§„åˆ’å…¥é—¨</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’Bæœ€å€¼é—®é¢˜</title>
    <url>/article/14b10894.html</url>
    <content><![CDATA[<p>æ¥ä¸‹æ¥ç”¨ä¸€é“ä¾‹é¢˜æ¥è®¤è¯†åŠ¨æ€è§„åˆ’çš„æœ€å€¼é—®é¢˜ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸‹ï¼Œè¿™äº›é¢˜å¯èƒ½æœ‰å…¶ä»–è§£æ³•ï¼Œä½†åœ¨è¿™é‡Œæˆ‘åªæ˜¯è¯´ä¸€è¯´å…³äºåŠ¨æ€è§„åˆ’çš„è§£æ³•ã€‚</p>
<p>å¼€å§‹å§ï¼</p>
<span id="more"></span>
<h1 id="é›¶é’±å…‘æ¢">322. é›¶é’±å…‘æ¢</h1>
<p><a
href="https://leetcode-cn.com/problems/coin-change/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢
amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å›Â -1ã€‚</p>
<p>ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt;è¾“å…¥ï¼šcoins = [1, 2, 5], amount = 11<br />
&gt;è¾“å‡ºï¼š3<br />
&gt;è§£é‡Šï¼š11 = 5 + 5 + 1</p>
<p>ç¤ºä¾‹2ï¼š &gt;è¾“å…¥ï¼šcoins = [2], amount = 3<br />
&gt;è¾“å‡ºï¼š-1</p>
<p>ç¤ºä¾‹3ï¼š &gt;è¾“å…¥ï¼šcoins = [1], amount = 0<br />
&gt;è¾“å‡ºï¼š0</p>
<p>ç¤ºä¾‹4ï¼š &gt;è¾“å…¥ï¼šcoins = [1], amount = 1<br />
&gt;è¾“å‡ºï¼š1</p>
<p>ç¤ºä¾‹5ï¼š &gt;è¾“å…¥ï¼šcoins = [1], amount = 2<br />
&gt;è¾“å‡ºï¼š2</p>
<p>æç¤ºï¼š</p>
<ul>
<li>1 &lt;= coins.length &lt;= 12</li>
<li>1 &lt;= coins[i] &lt;= <span class="math inline">\(2^{31}\)</span> -
1</li>
<li>0 &lt;= amount &lt;= <span class="math inline">\(10^4\)</span></li>
</ul>
<h1 id="begin">begin</h1>
<p>é¢˜ç›®æè¿°å¾—å¾ˆæ¸…æ¥šäº†ï¼Œä½ æ˜¯å¦æœ‰äº†æƒ³æ³•ï¼Œå»ºè®®å…ˆå°è¯•ä¸€ä¸‹ï¼Œè€ƒè™‘ç”¨åŠ¨æ€è§„åˆ’æ€ä¹ˆè§£ã€‚</p>
<h1 id="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</h1>
<p>A è®¡æ•°é—®é¢˜ B æœ€å€¼é—®é¢˜ C å¯è¡Œæ€§é—®é¢˜</p>
<h2 id="ä¸€ç¡®å®šçŠ¶æ€">ä¸€ã€ç¡®å®šçŠ¶æ€</h2>
<blockquote>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
<li>å­é—®é¢˜</li>
</ol>
</blockquote>
<h2 id="äºŒè½¬ç§»æ–¹ç¨‹">äºŒã€è½¬ç§»æ–¹ç¨‹</h2>
<h2 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h2>
<blockquote>
<p>åˆå§‹æ¡ä»¶ï¼šç”¨è½¬ç§»æ–¹ç¨‹ç®—ä¸å‡ºæ¥ï¼Œéœ€è¦æ‰‹å·¥å®šä¹‰<br />
è¾¹ç•Œæƒ…å†µï¼šæ•°ç»„ä¸èƒ½è¶Šç•Œ</p>
</blockquote>
<h2 id="å››è®¡ç®—é¡ºåº">å››ã€è®¡ç®—é¡ºåº</h2>
<h1 id="bæœ€å€¼é—®é¢˜">Bæœ€å€¼é—®é¢˜</h1>
<p>å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªå…³äºæœ€å€¼çš„é—®é¢˜ï¼Œé¢˜ç›®è¦æ±‚è§£çš„æ˜¯ç”¨æœ€å°‘çš„ç¡¬å¸ç»„æˆç›®æ ‡æ•°å­—ï¼Œå¦‚æœæ²¡æœ‰è¿™æ ·çš„è§£å°±è¿”å›-1ã€‚é¢˜ç›®è®©æ±‚çš„ä»…ä»…æ˜¯æœ€å°‘éœ€è¦å‡ ä¸ªç¡¬å¸ï¼Œè€Œä¸æ˜¯è¦æ±‚è¿™æœ€å°‘çš„é‚£äº›ç»„åˆæ˜¯ä»€ä¹ˆï¼Œè¿™å°±æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ä¸ªæ ‡å¿—å§ï¼Œä¸è¦è¿‡ç¨‹è¦ç»“æœã€‚</p>
<p>æŒ‰ç…§ä¸Šé¢çš„é¡ºåºæ¥ï¼š</p>
<h1 id="ä¸€ç¡®å®šçŠ¶æ€-1">ä¸€ã€ç¡®å®šçŠ¶æ€</h1>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
</ol>
<blockquote>
<p>æˆ‘ä»¬å‡è®¾æœ‰è¿™ä¹ˆæœ€åä¸€å—ç¡¬å¸ä½¿æˆ‘ä»¬ç»„æˆäº†ç›®æ ‡æ•°å­—ï¼Œå¹¶ä¸”è¿™å°±æ˜¯æœ€å°‘ç»„åˆï¼Œå¦‚æˆ‘ä»¬è¦å‡‘å‡ºnï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¾æœ€å°‘æ–¹æ¡ˆæ˜¯a1,a2,...ak,ç»„æˆäº†nã€‚é‚£ä¹ˆæˆ‘ä»¬çš„æœ€åä¸€å—å°±æ˜¯akï¼Œå‰é¢åˆ™æ˜¯a1-ak-1ç»„æˆäº†n-akï¼Œå¹¶ä¸”ä»–ä»¬éƒ½æ˜¯æœ€å°‘æ–¹æ¡ˆã€‚</p>
</blockquote>
<ol start="2" type="1">
<li>å­é—®é¢˜</li>
</ol>
<blockquote>
<p>æ ¹æ®æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬æŠŠç”±kå—ç¡¬å¸ç»„æˆnçš„é—®é¢˜å˜æˆäº†ç”±k-1å—ç»„æˆn-akçš„é—®é¢˜ï¼Œå¾ˆæ˜æ˜¾æ˜¯å°†ä¸€ä¸ªå¤§é—®é¢˜å˜æˆä¸€ä¸ªè§„æ¨¡æ›´å°çš„é—®é¢˜äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå°±æ˜¯å­é—®é¢˜ã€‚</p>
</blockquote>
<h1 id="äºŒè½¬ç§»æ–¹ç¨‹-1">äºŒã€è½¬ç§»æ–¹ç¨‹</h1>
<blockquote>
<p>æˆ‘ä»¬è®¾f(n)è¡¨ç¤ºç»„æˆnçš„æœ€å°‘ä¸ªæ•°ï¼Œé‚£ä¹ˆf(n)=min(f(n-ak1)+1,f(n-ak2)+1)ï¼Œè¿™é‡Œçš„ak1ã€ak2ä»£è¡¨çš„æ˜¯æ‰€æœ‰å¯èƒ½çš„ç¡¬å¸ï¼Œä¾‹å¦‚æˆ‘ä»¬è¦ç»„æˆ27ï¼Œå¹¶ä¸”æˆ‘ä»¬åªæœ‰2ã€5ã€7ä¸‰ç§ç¡¬å¸ï¼Œf(27)=min(f(27-2)+1,f(27-5)+1,f(27-7)+1)ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„è½¬ç§»æ–¹ç¨‹ã€‚</p>
</blockquote>
<h1 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜-1">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h1>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„æ¥ä¿å­˜å°äºç­‰äºnçš„æœ€å°‘ä¸ªæ•°ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦ç¡®è®¤ç”¨è½¬ç§»æ–¹ç¨‹ç®—ä¸å‡ºæ¥ï¼Œéœ€è¦æ‰‹å·¥å®šä¹‰çš„åˆå§‹æ¡ä»¶ï¼Œå…³äºè¿™ä¸ªé¢˜æ˜¯f(0)=0,ä¹‹åå½“ç„¶è¿˜è¦è€ƒè™‘æ•°ç»„è¾¹ç•Œé—®é¢˜ã€‚</p>
</blockquote>
<h1 id="å››è®¡ç®—é¡ºåº-1">å››ã€è®¡ç®—é¡ºåº</h1>
<blockquote>
<p>å…³äºè¿™ä¸ªé¢˜çš„è®¡ç®—é¡ºåºè¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œæˆ‘ä»¬å¹¶éœ€è¦ä»å°åˆ°å¤§é€ä¸ªè®¡ç®—ï¼Œæœ€åå¾—åˆ°f(n)ã€‚</p>
</blockquote>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">coinChange</span><span class="params">(<span class="type">int</span>[] coins, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="type">int</span> A=coins.length;</span><br><span class="line">        <span class="type">int</span> max=amount+<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[] f=<span class="keyword">new</span> <span class="title class_">int</span>[amount+<span class="number">1</span>];</span><br><span class="line">        Arrays.fill(f,max);</span><br><span class="line">        f[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=amount;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;A;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i&gt;=coins[j])&#123;</span><br><span class="line">                    f[i]=Math.min(f[i],f[i-coins[j]]+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[amount]&gt;amount? -<span class="number">1</span>:f[amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé¢˜è§£è¿˜æ˜¯åšäº†å¾ˆå¥½å¤„ç†çš„ï¼Œå°±åœ¨é‚£ä¸ªâ€œint[] f=new
int[amount+1];â€è¿™æ ·åœ¨æœ€åå°±å¯ä»¥æ¯”è¾ƒamountç›´æ¥ç¡®å®šç»“æœäº†ã€‚</p>
<p><a
href="https://leetcode-cn.com/problems/coin-change/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æ¨èè§†é¢‘">æ¨èè§†é¢‘</h1>
<p><a
href="https://www.bilibili.com/video/BV1xb411e7ww">åŠ¨æ€è§„åˆ’å…¥é—¨</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†SpringBoot</title>
    <url>/article/cd6beb9c.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li><a
href="https://www.bilibili.com/video/BV19K4y1L7MT">https://www.bilibili.com/video/BV19K4y1L7MT</a></li>
<li><a
href="https://www.yuque.com/atguigu/springboot/rmxq85">https://www.yuque.com/atguigu/springboot/rmxq85</a></li>
<li><a
href="https://docs.spring.io/spring-boot/docs/2.4.3/reference/html/getting-started.html">https://docs.spring.io/spring-boot/docs/2.4.3/reference/html/getting-started.html</a></li>
</ul>
<span id="more"></span>
<p>æ—©æœ‰è€³é—»
SpringBootï¼Œè¿™æ¬¡ç»ˆäºæ˜¯è§è¯†åˆ°äº†ï¼Œåœ¨è§è¯†ä¹‹å‰å°±æœ‰å¬è¯´è¿‡â€œstartedâ€ï¼Œâ€œè„šæ‰‹æ¶â€ï¼Œâ€œç®€åŒ–å¼€å‘â€ç­‰ç­‰å…³äº
SpringBootçš„ä¼˜ç‚¹ï¼Œè¿™æ¬¡æ€»ç®—æ˜¯åˆè¯†åºå±±çœŸé¢ç›®äº†ã€‚</p>
<p>é¦–å…ˆæˆ‘è¦è¯´<a
href="https://www.bilibili.com/video/BV19K4y1L7MT">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring
boot2ï¼‰</a>è®²çš„çœŸæ˜¯å¤ªæ£’äº†ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦çœŸçš„èƒ½æ”¶è·å¤ªå¤šäº†ï¼Œå°¤å…¶æ„Ÿè§‰è®²çš„éå¸¸æœ‰æ¡ç†ï¼Œå¾ªåºæ¸è¿›ï¼Œå…ˆè®²ç®€å•åº”ç”¨ï¼Œå†ä»æºç åˆ†æåŸç†ã€‚æœ‰ä¸€æ¬¡çœ‹åˆ°ä¸€ä¸ªç« èŠ‚ç›´å‘¼SpringBootå®åœ¨æ˜¯å¤ªå¦™äº†ï¼Œæ„Ÿå¹äº†åŠå¤©ã€‚</p>
<h1 id="è‡ªåŠ¨è£…é…åŸç†">è‡ªåŠ¨è£…é…åŸç†</h1>
<p>æˆ‘ä¸å¥¢æ±‚èƒ½æŠŠå®ƒè¯´æ¸…æ¥šï¼Œæˆ‘åªæ˜¯æƒ³æŠŠæˆ‘ç›®å‰çš„ç†è§£è¯´ä¸€è¯´ï¼Œæœ‰ä¸å¯¹çš„è¿˜è¯·è§è°…ã€‚</p>
<h2 id="é¦–å…ˆ">é¦–å…ˆ</h2>
<p>è¦çŸ¥é“SpringBootå‡ ä¸ªåŸºæœ¬æ³¨è§£</p>
<h3 id="configuration"><span class="citation"
data-cites="Configuration">@Configuration</span></h3>
<ul>
<li>å£°æ˜ä¸ºé…ç½®ç±»</li>
<li>proxyBeanMethods é»˜è®¤ä¸ºtrueï¼Œè¡¨ç¤ºç»„ä»¶æ˜¯å•å®ä¾‹çš„</li>
</ul>
<h3 id="beancomponentcontrollerservicerepository"><span class="citation"
data-cites="Bean">@Bean</span>ã€<span class="citation"
data-cites="Component">@Component</span>ã€<span class="citation"
data-cites="Controller">@Controller</span>ã€<span class="citation"
data-cites="Service">@Service</span>ã€<span class="citation"
data-cites="Repository">@Repository</span></h3>
<ul>
<li>è¿™äº›åœ¨Springã€SpringMVCéƒ½è§è¯†åˆ°äº†ï¼Œéƒ½æ˜¯ç”¨æ¥é…ç½®ç»„ä»¶çš„</li>
</ul>
<h3 id="componentscanimport"><span class="citation"
data-cites="ComponentScan">@ComponentScan</span>ã€<span class="citation"
data-cites="Import">@Import</span></h3>
<ul>
<li>ç»„ä»¶æ‰«æå’Œç»„ä»¶å¯¼å…¥</li>
</ul>
<h3 id="conditional"><span class="citation"
data-cites="Conditional">@Conditional</span></h3>
<ul>
<li>æ¡ä»¶è£…é…ï¼Œéå¸¸é‡è¦ï¼Œåœ¨æˆ‘çœ‹æ¥è‡ªåŠ¨è£…é…ä¸»è¦ç”±å®ƒå®ç°</li>
</ul>
<h3 id="importresource"><span class="citation"
data-cites="ImportResource">@ImportResource</span></h3>
<ul>
<li>SpringBootå‡ ä¹ä¸ä½¿ç”¨Springä¼ ç»Ÿçš„xmlé…ç½®ï¼Œå¦‚æœè¿˜æ˜¯æƒ³ç”¨åˆ™å¯ä»¥ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå£°æ˜xmlçš„classpathå³å¯</li>
</ul>
<h3 id="configurationproperties"><span class="citation"
data-cites="ConfigurationProperties">@ConfigurationProperties</span></h3>
<ul>
<li>å±æ€§ç»‘å®š</li>
<li>å› ä¸ºå®ƒå¯ä»¥åœ¨é…ç½®æ–‡ä»¶å®ç°propertiesæˆ–æ˜¯yamlé…ç½®</li>
</ul>
<h3 id="enableautoconfiguration"><span class="citation"
data-cites="EnableAutoConfiguration">@EnableAutoConfiguration</span></h3>
<ul>
<li>ä¾æ®é…ç½®è‡ªåŠ¨å¯¼å…¥ç›¸å…³é…ç½®ï¼Œé‡è¦ï¼Œç†è§£è‡ªåŠ¨è£…é…ï¼Œè¦ç ”è¯»æºç ä¸­çš„xxxAutoConfigurationç›¸å…³ç±»</li>
</ul>
<h2 id="åŸç†åˆè§£">åŸç†åˆè§£</h2>
<p>è‡ªåŠ¨è£…é…å°±æ˜¯åˆ©ç”¨ä¸Šé¢çš„æ³¨è§£ï¼ˆå½“ç„¶è¿˜æœ‰è®¸å¤šå…¶ä»–çš„ï¼‰å®ç°çš„</p>
<p>æŸ¥çœ‹å¦‚ä¸‹SpringBootæ˜¯å¦‚ä½•å®ç°web.servletçš„è‡ªåŠ¨è£…é…çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.boot.autoconfigure.web.servlet;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">		ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;</span><br><span class="line">       </span><br></pre></td></tr></table></figure>
<h3 id="configurationproxybeanmethods-false"><span class="citation"
data-cites="Configuration">@Configuration</span>(proxyBeanMethods =
false)</h3>
<ul>
<li>å£°æ˜é…ç½®ç±»ï¼Œå¹¶ä¸ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼ˆå®ç°å•ä¾‹æ¨¡å¼ç›¸å¯¹äºä¸å®ç°æ›´å¿«ä¸€äº›ï¼Œå› ä¸ºä¸ç”¨æ£€æŸ¥ï¼‰</li>
</ul>
<h3 id="conditionalonwebapplicationtype-type.servlet"><span
class="citation"
data-cites="ConditionalOnWebApplication">@ConditionalOnWebApplication</span>(type
= Type.SERVLET)</h3>
<ul>
<li>æ¡ä»¶è£…é…ï¼Œè¿™ä¸ªè¡¨ç¤ºæ˜¯webé¡¹ç›®æ—¶è£…é…</li>
</ul>
<h3
id="conditionalonclass-servlet.class-dispatcherservlet.class-webmvcconfigurer.class"><span
class="citation"
data-cites="ConditionalOnClass">@ConditionalOnClass</span>({
Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })</h3>
<ul>
<li>æ¡ä»¶è£…é…ï¼Œç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šçš„ç±»æ—¶è£…é…</li>
</ul>
<h3 id="conditionalonmissingbeanwebmvcconfigurationsupport.class"><span
class="citation"
data-cites="ConditionalOnMissingBean">@ConditionalOnMissingBean</span>(WebMvcConfigurationSupport.class)</h3>
<ul>
<li>æ¡ä»¶è£…é…ï¼Œå½“å®¹å™¨ä¸­æ²¡æœ‰è¯¥ç»„ä»¶æ—¶è£…é…</li>
</ul>
<h3 id="autoconfigureorderordered.highest_precedence-10"><span
class="citation"
data-cites="AutoConfigureOrder">@AutoConfigureOrder</span>(Ordered.HIGHEST_PRECEDENCE
+ 10)</h3>
<ul>
<li>å£°æ˜ç±»åŠ è½½ä¼˜å…ˆçº§</li>
</ul>
<h3 id="autoconfigureafter..."><span class="citation"
data-cites="AutoConfigureAfter">@AutoConfigureAfter</span>(...)</h3>
<ul>
<li>å£°æ˜ç±»åŠ è½½åœ¨...ä¹‹å</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = false)</span></span><br><span class="line"><span class="keyword">public</span> OrderedHiddenHttpMethodFilter <span class="title function_">hiddenHttpMethodFilter</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderedHiddenHttpMethodFilter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="bean"><span class="citation" data-cites="Bean">@Bean</span></h3>
<ul>
<li>ç»„ä»¶å£°æ˜</li>
</ul>
<h3 id="conditionalonmissingbeanhiddenhttpmethodfilter.class"><span
class="citation"
data-cites="ConditionalOnMissingBean">@ConditionalOnMissingBean</span>(HiddenHttpMethodFilter.class)</h3>
<ul>
<li>æ¡ä»¶è£…é…ï¼Œå½“æ²¡æœ‰xxxç»„ä»¶æ—¶è£…é…</li>
</ul>
<h3
id="conditionalonpropertyprefix-spring.mvc.hiddenmethod.filter-name-enabled-matchifmissing-false"><span
class="citation"
data-cites="ConditionalOnProperty">@ConditionalOnProperty</span>(prefix
= "spring.mvc.hiddenmethod.filter", name = "enabled", matchIfMissing =
false)</h3>
<ul>
<li>é…ç½®ç»‘å®šï¼Œå‰ç¼€æ—¶"spring.mvc.hiddenmethod.filter"ï¼Œè¯¥é…ç½®ä¸ºå‰ç¼€ä¸‹çš„â€enabledâ€œå±æ€§</li>
<li>matchIfMissingè‹¥ç¼ºå°‘é…ç½®è¿™é…ç½®ä¸ºfalseï¼Œç›¸å½“äºé»˜è®¤é…ç½®</li>
</ul>
<h2 id="å°ç»“">å°ç»“</h2>
<h3 id="è‡ªåŠ¨è£…é…">è‡ªåŠ¨è£…é…</h3>
<ul>
<li>åŠ è½½è‡ªåŠ¨é…ç½®ç±»</li>
<li>æ¡ä»¶è£…é…</li>
<li>ç”¨æˆ·é…ç½®ä¼˜å…ˆ</li>
</ul>
<p>ä¸‹é¢æ˜¯<a
href="https://www.yuque.com/atguigu/springboot/na3pfd#jj7XF">å¤åˆ¶</a>çš„ä¸€æ®µ</p>
<h2 id="springbootä¼˜ç‚¹">SpringBootä¼˜ç‚¹</h2>
<ul>
<li><p>Create stand-alone Spring applications</p></li>
<li><ul>
<li>åˆ›å»ºç‹¬ç«‹Springåº”ç”¨</li>
</ul></li>
<li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR
files)</p></li>
<li><ul>
<li>å†…åµŒwebæœåŠ¡å™¨</li>
</ul></li>
<li><p>Provide opinionated 'starter' dependencies to simplify your build
configuration</p></li>
<li><ul>
<li>è‡ªåŠ¨starterä¾èµ–ï¼Œç®€åŒ–æ„å»ºé…ç½®</li>
</ul></li>
<li><p>Automatically configure Spring and 3rd party libraries whenever
possible</p></li>
<li><ul>
<li>è‡ªåŠ¨é…ç½®Springä»¥åŠç¬¬ä¸‰æ–¹åŠŸèƒ½</li>
</ul></li>
<li><p>Provide production-ready features such as metrics, health checks,
and externalized configuration</p></li>
<li><ul>
<li>æä¾›ç”Ÿäº§çº§åˆ«çš„ç›‘æ§ã€å¥åº·æ£€æŸ¥åŠå¤–éƒ¨åŒ–é…ç½®</li>
</ul></li>
<li><p>Absolutely no code generation and no requirement for XML
configuration</p></li>
<li><ul>
<li>æ— ä»£ç ç”Ÿæˆã€æ— éœ€ç¼–å†™XML</li>
</ul></li>
</ul>
<blockquote>
<p>SpringBootæ˜¯æ•´åˆSpringæŠ€æœ¯æ ˆçš„ä¸€ç«™å¼æ¡†æ¶</p>
<p>SpringBootæ˜¯ç®€åŒ–SpringæŠ€æœ¯æ ˆçš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶</p>
</blockquote>
<h2 id="springbootç¼ºç‚¹">SpringBootç¼ºç‚¹</h2>
<ul>
<li>äººç§°ç‰ˆæœ¬å¸ï¼Œè¿­ä»£å¿«ï¼Œéœ€è¦æ—¶åˆ»å…³æ³¨å˜åŒ–</li>
<li>å°è£…å¤ªæ·±ï¼Œå†…éƒ¨åŸç†å¤æ‚ï¼Œä¸å®¹æ˜“ç²¾é€š</li>
</ul>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’Cå¯è¡Œæ€§é—®é¢˜</title>
    <url>/article/b56a63ef.html</url>
    <content><![CDATA[<p>æ¥ä¸‹æ¥ç”¨ä¸€é“ä¾‹é¢˜æ¥è®¤è¯†åŠ¨æ€è§„åˆ’çš„å¯è¡Œæ€§é—®é¢˜ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸‹ï¼Œè¿™äº›é¢˜å¯èƒ½æœ‰å…¶ä»–è§£æ³•ï¼Œä½†åœ¨è¿™é‡Œæˆ‘åªæ˜¯è¯´ä¸€è¯´å…³äºåŠ¨æ€è§„åˆ’çš„è§£æ³•ã€‚</p>
<p>å¼€å§‹å§ï¼</p>
<span id="more"></span>
<h1 id="è·³è·ƒæ¸¸æˆ">55. è·³è·ƒæ¸¸æˆ</h1>
<p><a
href="https://leetcode-cn.com/problems/jump-game/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p>
<p>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚</p>
<p>åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚</p>
<p>ç¤ºä¾‹1ï¼š &gt;è¾“å…¥: [2,3,1,1,4]<br />
&gt;è¾“å‡º: true<br />
&gt;è§£é‡Š: æˆ‘ä»¬å¯ä»¥å…ˆè·³ 1 æ­¥ï¼Œä»ä½ç½® 0 åˆ°è¾¾ ä½ç½® 1, ç„¶åå†ä»ä½ç½® 1 è·³ 3
æ­¥åˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚</p>
<p>ç¤ºä¾‹2ï¼š &gt;è¾“å…¥: [3,2,1,0,4]<br />
&gt;è¾“å‡º: false<br />
&gt;è§£é‡Š: æ— è®ºæ€æ ·ï¼Œä½ æ€»ä¼šåˆ°è¾¾ç´¢å¼•ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä½ç½®çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯
0 ï¼Œ æ‰€ä»¥ä½ æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚</p>
<h1 id="begin">begin</h1>
<p>é¢˜ç›®æè¿°å¾—å¾ˆæ¸…æ¥šäº†ï¼Œä½ æ˜¯å¦æœ‰äº†æƒ³æ³•ï¼Œå»ºè®®å…ˆå°è¯•ä¸€ä¸‹ï¼Œè€ƒè™‘ç”¨åŠ¨æ€è§„åˆ’æ€ä¹ˆè§£ã€‚</p>
<h1 id="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</h1>
<p>A è®¡æ•°é—®é¢˜ B æœ€å€¼é—®é¢˜ C å¯è¡Œæ€§é—®é¢˜</p>
<h2 id="ä¸€ç¡®å®šçŠ¶æ€">ä¸€ã€ç¡®å®šçŠ¶æ€</h2>
<blockquote>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
<li>å­é—®é¢˜</li>
</ol>
</blockquote>
<h2 id="äºŒè½¬ç§»æ–¹ç¨‹">äºŒã€è½¬ç§»æ–¹ç¨‹</h2>
<h2 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h2>
<blockquote>
<p>åˆå§‹æ¡ä»¶ï¼šç”¨è½¬ç§»æ–¹ç¨‹ç®—ä¸å‡ºæ¥ï¼Œéœ€è¦æ‰‹å·¥å®šä¹‰<br />
è¾¹ç•Œæƒ…å†µï¼šæ•°ç»„ä¸èƒ½è¶Šç•Œ</p>
</blockquote>
<h2 id="å››è®¡ç®—é¡ºåº">å››ã€è®¡ç®—é¡ºåº</h2>
<h1 id="cå¯è¡Œæ€§é—®é¢˜">Cå¯è¡Œæ€§é—®é¢˜</h1>
<p>å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªå…³äºå¯è¡Œæ€§çš„é—®é¢˜ï¼Œé¢˜ç›®è¦æ±‚è§£çš„æ˜¯èƒ½å¦åˆ°è¾¾æœ€åçš„ä½ç½®ã€‚é¢˜ç›®è®©æ±‚çš„ä»…ä»…æ˜¯trueæˆ–æ˜¯falseï¼Œè¿™å°±æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ä¸ªæ ‡å¿—å§ï¼Œä¸è¦è¿‡ç¨‹è¦ç»“æœã€‚</p>
<p>æŒ‰ç…§ä¸Šé¢çš„é¡ºåºæ¥ï¼š</p>
<h1 id="ä¸€ç¡®å®šçŠ¶æ€-1">ä¸€ã€ç¡®å®šçŠ¶æ€</h1>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
</ol>
<blockquote>
<p>æˆ‘ä»¬å‡è®¾æœ‰è¿™ä¹ˆä¸€å—ä½ç½®ä½¿æˆ‘ä»¬è·³åˆ°äº†æœ€åä¸€ä¸ªä½ç½®ã€‚</p>
</blockquote>
<ol start="2" type="1">
<li>å­é—®é¢˜</li>
</ol>
<blockquote>
<p>æ ¹æ®æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬æŠŠç”±èµ·ç‚¹èƒ½å¦è·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„é—®é¢˜å˜æˆäº†èƒ½å¦è·³åˆ°å®ƒå‰ä¸€ä¸ªçš„ä½ç½®ï¼ˆèƒ½ä»è¿™è·³åˆ°ç»ˆç‚¹ï¼‰ï¼Œå¾ˆæ˜æ˜¾æ˜¯å°†ä¸€ä¸ªå¤§é—®é¢˜å˜æˆä¸€ä¸ªè§„æ¨¡æ›´å°çš„é—®é¢˜äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå°±æ˜¯å­é—®é¢˜ã€‚</p>
</blockquote>
<h1 id="äºŒè½¬ç§»æ–¹ç¨‹-1">äºŒã€è½¬ç§»æ–¹ç¨‹</h1>
<blockquote>
<p>f[j]è¡¨ç¤ºèƒ½è·³åˆ°jï¼Œf[j]=OR(0&lt;=i&lt;j)(f[i] AND i+a[i]&gt;=j)ã€‚</p>
</blockquote>
<h1 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜-1">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h1>
<blockquote>
<p>å‡ºå‘ç‚¹f[0]=trueï¼Œå…¶å®ƒè®¤çœŸè€ƒè™‘è€ƒè™‘ï¼Œä¸è¦å‡ºç°å¤§é”™è¯¯ã€‚</p>
</blockquote>
<h1 id="å››è®¡ç®—é¡ºåº-1">å››ã€è®¡ç®—é¡ºåº</h1>
<blockquote>
<p>å…³äºè¿™ä¸ªé¢˜çš„è®¡ç®—é¡ºåºè¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œæˆ‘ä»¬ä»å‡ºå‘ç‚¹ç®—åˆ°ç»ˆç‚¹å³å¯ï¼Œéœ€è¦æ³¨æ„è‹¥å¯åˆ°è¾¾å³é€€å‡ºï¼Œå› ä¸ºè¿™æ˜¯ORæˆ–é—®é¢˜ï¼Œæœ€åå¾—åˆ°f(n)ã€‚</p>
</blockquote>
<p>ä¸€ç§javaé¢˜è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canJump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> n=nums.length;</span><br><span class="line">        <span class="type">boolean</span>[] f=<span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">        f[<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            f[i]=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(f[j]&amp;&amp;nums[j]+j&gt;=i)&#123;</span><br><span class="line">                    f[i]=<span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™ä¸ªé¢˜ç”¨åŠ¨æ€è§„åˆ’å¹¶ä¸æ˜¯æœ€ä¼˜è§£ï¼Œè´ªå¿ƒç®—æ³•æ›´ä¼˜ä¸€äº›ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹ï¼Œä¸‹é¢ç»™å‡ºä»£ç äº†ï¼Œæ€è€ƒæ€è€ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canJump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> maxjump=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length&amp;&amp;i&lt;=maxjump;i++)&#123;</span><br><span class="line">            maxjump=Math.max(maxjump,i+nums[i]);</span><br><span class="line">            <span class="keyword">if</span>(maxjump&gt;=nums.length-<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode-cn.com/problems/jump-game/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æ¨èè§†é¢‘">æ¨èè§†é¢‘</h1>
<p><a
href="https://www.bilibili.com/video/BV1xb411e7ww">åŠ¨æ€è§„åˆ’å…¥é—¨</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>åšå®¢ä»Githubè¿ç§»è‡³Gitee</title>
    <url>/article/70023c40.html</url>
    <content><![CDATA[<h1 id="èµ·å› ">èµ·å› </h1>
<p>æœ¬æ¥æ˜¯æ²¡æœ‰è¿™ä¸ªæ‰“ç®—çš„ï¼Œä½†æœ€è¿‘ <a href="https://github.com/">github</a>
æ€ä¹ˆä¹Ÿä¸Šä¸å»ï¼Œå®åœ¨æ˜¯å—ä¸äº†äº†ï¼Œå°±åªèƒ½è½¬åˆ° <a
href="https://gitee.com/">gitee</a>ï¼Œåœ¨è¿™é‡Œåšä¸ªè®°å½•å§</p>
<span id="more"></span>
<h1 id="è¿‡ç¨‹">è¿‡ç¨‹</h1>
<p>å…¶å®ä¹‹å‰å°±æœ‰è¿‡è¿™æ ·çš„æƒ³æ³•äº†ï¼Œä½†å»åšå´æ²¡åšå¥½ï¼Œè¿™æ¬¡ä¸‹å®šäº†å†³å¿ƒï¼Œç»ˆäºæå¥½äº†</p>
<h2 id="å‚è€ƒ">å‚è€ƒï¼š</h2>
<ul>
<li><p><a
href="https://www.jianshu.com/p/26a726baf70e">https://www.jianshu.com/p/26a726baf70e</a></p></li>
<li><p>...</p></li>
</ul>
<h2 id="é‡ç‚¹">é‡ç‚¹</h2>
<h3 id="æ–°å»º-giteeä»“åº“">1ã€æ–°å»º giteeä»“åº“</h3>
<p><img data-src="https://img.imgdb.cn/item/6040c41c360785be54636a8d.jpg" style="zoom:67%;" />2ã€</p>
<h3 id="æ‰“å¼€-gitee-pages-æœåŠ¡">2ã€æ‰“å¼€ Gitee Pages æœåŠ¡</h3>
<figure>
<img data-src="https://img.imgdb.cn/item/6040c49b360785be5463c45c.jpg"
alt="Gitee PagesæœåŠ¡" />
<figcaption aria-hidden="true">Gitee PagesæœåŠ¡</figcaption>
</figure>
<hr />
<p><img data-src="https://img.imgdb.cn/item/6040c546360785be546461e1.jpg" style="zoom:67%;" /></p>
<h3 id="æ›´æ–°åŸ-_config.ymlæ–‡ä»¶">3ã€æ›´æ–°åŸ _config.ymlæ–‡ä»¶</h3>
<p>ä¿®æ”¹ _config.yml</p>
<p>url æ”¹ä¸ºæ–°çš„ï¼ˆgitee pages ç”Ÿæˆçš„ urlï¼‰</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://wnhyang.gitee.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://img.imgdb.cn/item/6040c69a360785be5464e95f.jpg"
alt="ä»“åº“åœ°å€" />
<figcaption aria-hidden="true">ä»“åº“åœ°å€</figcaption>
</figure>
<p>repo æ”¹ä¸ºæ–°ä»“åº“çš„ HTTPS æˆ– SHH é“¾æ¥</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@gitee.com:wnhyang/wnhyang.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>ä½¿ç”¨ SSHï¼Œè¦äº‹å…ˆé…ç½®å¥½ SSHå¯†é’¥ï¼ˆgithub ä¸ gitee
å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸€ä¸ªå¯†é’¥ï¼‰</p>
<h2 id="è€å‡ æ ·">è€å‡ æ ·</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n <span class="string">&quot;&quot;</span> <span class="comment"># åˆ›å»ºæ–°åšå®¢</span></span><br><span class="line">hexo clean <span class="comment"># æ¸…ç†</span></span><br><span class="line">hexo g <span class="comment"># ç”Ÿæˆ</span></span><br><span class="line">hexo s <span class="comment"># æœ¬åœ°ç«¯å£æµ‹è¯• é»˜è®¤4000ç«¯å£</span></span><br><span class="line">hexo d <span class="comment"># éƒ¨ç½²</span></span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ–°-pages">æ›´æ–° Pages</h2>
<p>è½¬åˆ° Gitee åï¼Œå‘ç°éƒ¨ç½²åè¿˜éœ€è¦åœ¨æ‰‹åŠ¨åˆ° Gitee Pages é¡µé¢
æ›´æ–°ï¼Œæ¯•ç«Ÿæ˜¯å…è´¹ä½¿ç”¨çš„</p>
<h1 id="ç»“æŸ">ç»“æŸ</h1>
<p>ç»“æœè¿˜æ˜¯å¥½çš„ï¼Œç°åœ¨è®¿é—®å°±å¾ˆè½»æ¾äº†ï¼Œèˆ’æœ</p>
<p><code>2022.12.04</code>æ›´æ–°ï¼Œæˆ‘åˆåæ‚”äº†ã€‚é±¼å’Œç†ŠæŒå°±ä¸å¯å…¼å¾—å—ï¼Ÿ<code>Github</code>è®¿é—®æ…¢ï¼Œä½†å†…å®¹ä¸ä¼šæœ‰ä»€ä¹ˆé™åˆ¶ï¼›<code>Gitee</code>è®¿é—®å¿«ï¼Œä½†æœ‰ç€å¥‡æ€ªçš„å®¡æ ¸æœºåˆ¶ï¼Œæœ€è¿‘æ— æ³•é€šè¿‡<code>Gitee Page</code>éƒ¨ç½²æˆ‘çš„æœ€æ–°åšå®¢äº†ï¼Œå¾ˆæ˜¯çƒ¦æ¼ï¼ŒçœŸçš„å¾ˆæƒ³æ”¾å¼ƒ<code>Gitee</code>äº†ï¼Œç°åœ¨åªèƒ½å‹‰å¼ºé‡æ–°è½¬å‘<code>Github</code>ï¼Œå“ï¼Œæ¢æ¥æ¢å»ï¼Œè¿˜æœ‰æœ‰ä¸ªäººæœåŠ¡å™¨æ–¹ä¾¿å•Šï¼</p>
]]></content>
      <tags>
        <tag>Git/GitHub</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>åšå®¢å‡çº§Hexo+NexT</title>
    <url>/article/cf29ecfe.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p><code>20</code>å¹´ï¼Œåœ¨<code>7</code>æœˆé€šè¿‡<code>hexo</code>æ­å»ºäº†å±äºè‡ªå·±çš„ä¸ªäººåšå®¢ï¼Œå¦‚ä»Šè¿‡å»å·²ç»<code>2</code>å¹´å¤šäº†ï¼ŒæœŸé—´ä¹Ÿä¸æ–­è¿›è¡Œåšå®¢çš„å°ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šä¸»é¢˜çš„ä¸ªæ€§åŒ–é…ç½®ã€å­—æ•°ç»Ÿè®¡ã€è®¿é—®é‡ç»Ÿè®¡ã€æ–‡ç« é“¾æ¥ç”Ÿæˆç®—æ³•é…ç½®ã€ç™¾åº¦ç½‘ç«™é‡‡é›†ç­‰ç­‰ã€‚ä½¿ç”¨çš„ä¸€ç›´æ˜¯<a
href="https://github.com/litten/hexo-theme-yilia">Yilia</a>ä¸»é¢˜ï¼ˆå·²ç»å¾ˆé•¿æ—¶é—´ä¸ç»´æŠ¤äº†ï¼‰ï¼Œä¹Ÿæ˜¯å› æ­¤é‡åˆ°äº†è®¸è®¸å¤šå¤šé—®é¢˜ï¼Œè¶ç€æœ€è¿‘å‡†å¤‡æ›´æ¢è®¾å¤‡ï¼Œå‡†å¤‡æŠŠä¹‹å‰çš„åšå®¢æ¢ä¸€ä¸ªé¢è²Œï¼Œæ˜¯çš„ï¼Œæˆ‘è¦æ”¾å¼ƒ<a
href="https://github.com/litten/hexo-theme-yilia">Yilia</a>ï¼Œé€‰æ‹©<a
href="https://github.com/next-theme/hexo-theme-next">NexT</a>ï¼Œæˆ‘ä¸æ˜¯çˆ±è¶‹åŒï¼Œè€Œæ˜¯æƒ³ç¨³å®šï¼Œä¸æƒ³æµªè´¹æ—¶é—´åœ¨ç»´æŠ¤å’Œè§£å†³é—®é¢˜ä¸Šï¼Œ<code>NexT</code>æ˜¯åº”è¯¥æ˜¯<code>hexo</code>ä¸»é¢˜ä¸­ä½“é‡æœ€å¤§ï¼Œæœ€ä¸ºæ´»è·ƒçš„ï¼Œ<code>so</code>ï¼Œå°±æ˜¯ä½ äº†ï¼Œé¡ºä¾¿<code>npm</code>ã€<code>node</code>ã€<code>hexo</code>éƒ½å‡çº§ä¸€ä¸‹ï¼Œä¸ºæ­¤åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p>
<p>éå¸¸å»ºè®®ç›´æ¥å‚è€ƒ<code>hexo-next</code>å®˜ç½‘</p>
<p><a href="https://hexo-next.readthedocs.io/zh_CN/latest/"
class="uri">https://hexo-next.readthedocs.io/zh_CN/latest/</a></p>
<p><a href="https://hexo.io/zh-cn/docs/"
class="uri">https://hexo.io/zh-cn/docs/</a></p>
<p><a href="https://theme-next.js.org/docs/getting-started/"
class="uri">https://theme-next.js.org/docs/getting-started/</a></p>
<p>æ²¡æœ‰å“ªé‡Œèƒ½æ¯”å®˜ç½‘æ›´æœ‰å‚è€ƒæ„ä¹‰äº†ï¼</p>
<p>è¯´å®è¯ï¼Œçœ‹å®Œå®˜ç½‘ï¼Œæˆ‘çœŸæƒ³æŠŠä¸‹é¢æˆ‘çš„è®°å½•å…¨éƒ¨åˆ æ‰ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯ä¿ç•™äº†æˆ‘çš„é…ç½®ä¾›å¤§å®¶å‚è€ƒå§</p>
<span id="more"></span>
<h1 id="æ ¹ç›®å½•ä¾èµ–">æ ¹ç›®å½•ä¾èµ–</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;hexo-site&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.0&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;hexo generate&quot;,</span><br><span class="line">    &quot;clean&quot;: &quot;hexo clean&quot;,</span><br><span class="line">    &quot;deploy&quot;: &quot;hexo deploy&quot;,</span><br><span class="line">    &quot;server&quot;: &quot;hexo server&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;hexo&quot;: &#123;</span><br><span class="line">    &quot;version&quot;: &quot;6.3.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;hexo&quot;: &quot;^6.3.0&quot;,</span><br><span class="line">    &quot;hexo-abbrlink&quot;: &quot;^2.2.1&quot;,</span><br><span class="line">    &quot;hexo-deployer-git&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-archive&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-category&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-feed&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-index&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-searchdb&quot;: &quot;^1.4.1&quot;,</span><br><span class="line">    &quot;hexo-generator-sitemap&quot;: &quot;^3.0.1&quot;,</span><br><span class="line">    &quot;hexo-generator-tag&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-ejs&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-pandoc&quot;: &quot;^0.3.1&quot;,</span><br><span class="line">    &quot;hexo-renderer-stylus&quot;: &quot;^2.1.0&quot;,</span><br><span class="line">    &quot;hexo-server&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-theme-landscape&quot;: &quot;^0.0.3&quot;,</span><br><span class="line">    &quot;hexo-theme-next&quot;: &quot;^8.14.0&quot;,</span><br><span class="line">    &quot;hexo-word-counter&quot;: &quot;^0.1.0&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="hexoé…ç½®">hexoé…ç½®</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https://hexo.io/docs/configuration.html</span><br><span class="line">## Source: https://github.com/hexojs/hexo/</span><br><span class="line"></span><br><span class="line"># Site</span><br><span class="line">title: æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</span><br><span class="line">subtitle: I will keep to fight</span><br><span class="line">description: å­¦ä¹ è®°å½•æ‰€ç”¨</span><br><span class="line">keywords: blog</span><br><span class="line">author: æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</span><br><span class="line">language: zh-CN</span><br><span class="line">timezone: &quot;Asia/Shanghai&quot;</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="line"># url: https://wnhyang.gitee.io</span><br><span class="line">url: https://wnhyang.github.io</span><br><span class="line"># permalink: :year/:month/:day/:title/</span><br><span class="line">permalink: article/:abbrlink.html</span><br><span class="line">abbrlink:</span><br><span class="line">  alg: crc32 # ç®—æ³•ï¼šcrc16(default) and crc32</span><br><span class="line">  rep: hex # è¿›åˆ¶ï¼šdec(default) and hex</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br><span class="line">  trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"># Writing</span><br><span class="line">new_post_name: :title.md # File name of new posts</span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">external_link:</span><br><span class="line">  enable: true # Open external links in new tab</span><br><span class="line">  field: site # Apply to the whole site</span><br><span class="line">  exclude: &quot;&quot;</span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: false</span><br><span class="line">post_asset_folder: false</span><br><span class="line">relative_link: false</span><br><span class="line">future: true</span><br><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace: &quot;&quot;</span><br><span class="line">  wrap: true</span><br><span class="line">  hljs: false</span><br><span class="line">prismjs:</span><br><span class="line">  enable: false</span><br><span class="line">  preprocess: true</span><br><span class="line">  line_number: true</span><br><span class="line">  tab_replace: &quot;&quot;</span><br><span class="line"></span><br><span class="line"># Home page setting</span><br><span class="line"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span><br><span class="line"># per_page: Posts displayed per page. (0 = disable pagination)</span><br><span class="line"># order_by: Posts order. (Order by date descending by default)</span><br><span class="line">index_generator:</span><br><span class="line">  path: &quot;&quot;</span><br><span class="line">  per_page: 10</span><br><span class="line">  order_by: -date</span><br><span class="line"></span><br><span class="line"># Category &amp; Tag</span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"># Metadata elements</span><br><span class="line">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span><br><span class="line">meta_generator: true</span><br><span class="line"></span><br><span class="line"># Date / Time format</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span><br><span class="line">updated_option: &quot;mtime&quot;</span><br><span class="line"></span><br><span class="line"># Pagination</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"># Include / Exclude file(s)</span><br><span class="line">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span><br><span class="line">include:</span><br><span class="line">exclude:</span><br><span class="line">ignore:</span><br><span class="line"></span><br><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: next</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="line">deploy:</span><br><span class="line">  - type: git</span><br><span class="line">    repo:</span><br><span class="line">      gitee: git@gitee.com:wnhyang/wnhyang.git</span><br><span class="line">      github: git@github.com:wnhyang/wnhyang.github.io.git</span><br><span class="line">    branch: master</span><br><span class="line"></span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  content: true</span><br><span class="line">  format: html</span><br><span class="line"></span><br><span class="line">symbols_count_time:</span><br><span class="line">  symbols: true</span><br><span class="line">  time: true</span><br><span class="line">  total_symbols: true</span><br><span class="line">  total_time: true</span><br><span class="line">  exclude_codeblock: false</span><br><span class="line">  awl: 4</span><br><span class="line">  wpm: 275</span><br><span class="line">  suffix: &quot;mins.&quot;</span><br><span class="line"></span><br><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br><span class="line"></span><br><span class="line">feed:</span><br><span class="line">  enable: true</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br><span class="line">  content_limit: 140</span><br><span class="line">  content_limit_delim: &quot; &quot;</span><br><span class="line">  order_by: -date</span><br><span class="line">  icon: icon.png</span><br><span class="line">  autodiscovery: true</span><br><span class="line">  template:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="nexté…ç½®">NexTé…ç½®</h1>
<p>å› ä¸ºè¿™ä¸ªé…ç½®æ–‡ä»¶è¿‡äºé•¿ï¼Œæˆ‘å°±ä¸ç²˜ä¸Šäº†ï¼Œéœ€è¦çš„ä¸‹è½½çœ‹å§</p>
<p><a href="/download/_config.next.yml">_config.next.ymlä¸‹è½½</a></p>
<h1 id="æ’ä»¶">æ’ä»¶</h1>
<p>å‚è€ƒå‰é¢çš„ä¾èµ–å³å¯</p>
]]></content>
      <tags>
        <tag>Node&amp;NPM</tag>
        <tag>åšå®¢</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>å“ˆå¤«æ›¼æ ‘åŠåº”ç”¨</title>
    <url>/article/29d55788.html</url>
    <content><![CDATA[<p>åœ¨è®¡ç®—æœºå’Œäº’è”ç½‘æŠ€æœ¯ä¸­ï¼Œæ–‡æœ¬å‹ç¼©å°±æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æŠ€æœ¯ã€‚ç©ç”µè„‘çš„äººå‡ ä¹éƒ½ä¼šåº”ç”¨å‹ç¼©å’Œè§£å‹ç¼©è½¯ä»¶æ¥å¤„ç†æ–‡æ¡£ã€‚å› ä¸ºå®ƒé™¤äº†å¯ä»¥å‡å°‘æ–‡æ¡£åœ¨ç£ç›˜ä¸Šçš„ç©ºé—´å¤–ï¼Œè¿˜æœ‰é‡è¦çš„ä¸€ç‚¹ï¼Œ
å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ç½‘ç»œä¸Šä»¥å‹ç¼©çš„å½¢å¼ä¼ è¾“å¤§é‡æ•°æ®ï¼Œä½¿å¾—ä¿å­˜å’Œä¼ é€’éƒ½æ›´åŠ é«˜æ•ˆã€‚</p>
<p>é‚£ä¹ˆå‹ç¼©è€Œä¸å‡ºé”™æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢?ç®€å•è¯´ï¼Œå°±æ˜¯æŠŠæˆ‘ä»¬è¦å‹ç¼©çš„æ–‡æœ¬è¿›è¡Œé‡æ–°ç¼–ç ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„ç©ºé—´ã€‚å°½ç®¡ç°åœ¨æœ€æ–°æŠ€æœ¯åœ¨ç¼–ç ä¸Šå·²ç»å¾ˆå¥½å¾ˆå¼ºå¤§ï¼Œä½†è¿™ä¸€åˆ‡éƒ½æ¥è‡ªäºæ›¾ç»çš„æŠ€æœ¯ç§¯ç´¯ï¼Œæˆ‘ä»¬ä»Šå¤©å°±æ¥ä»‹ç»ä¸€ä¸‹æœ€åŸºæœ¬çš„å‹ç¼©ç¼–ç æ–¹æ³•-èµ«å¤«æ›¼ç¼–ç ã€‚</p>
<span id="more"></span>
<p>åœ¨ä»‹ç»èµ«å¤«æ›¼ç¼–ç å‰ï¼Œæˆ‘ä»¬å¿…é¡»å¾—ä»‹ç»èµ«å¤«æ›¼æ ‘ï¼Œè€Œä»‹ç»èµ«å¤«æ›¼æ ‘ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æè¿™æ ·ä¸€ä¸ªäººï¼Œç¾å›½æ•°å­¦å®¶èµ«å¤«æ›¼(David
Huffman)ï¼Œ
ä¹Ÿæœ‰çš„ç¿»è¯‘ä¸ºå“ˆå¤«æ›¼ã€‚ä»–åœ¨1952å¹´å‘æ˜äº†èµ«å¤«æ›¼ç¼–ç ï¼Œä¸ºäº†çºªå¿µä»–çš„æˆå°±ï¼Œäºæ˜¯å°±æŠŠä»–åœ¨ç¼–ç ä¸­ç”¨åˆ°çš„ç‰¹æ®Šçš„Cå‰æ ‘ç§°ä¹‹ä¸ºèµ«å¤«æ›¼æ ‘ï¼Œä»–çš„ç¼–ç æ–¹æ³•ç§°ä¸ºèµ«å¤«æ›¼ç¼–ç ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç°åœ¨ä»‹ç»çš„çŸ¥è¯†å…¨éƒ½æ¥è‡ªäºè¿‘60å¹´å‰è¿™ä½ä¼Ÿå¤§ç§‘å­¦å®¶çš„ç ”ç©¶æˆæœï¼Œè€Œæˆ‘ä»¬å¹³æ—¶æ‰€ç”¨çš„å‹ç¼©å’Œè§£å‹ç¼©æŠ€æœ¯ä¹Ÿéƒ½æ˜¯åŸºäºèµ«å¤«æ›¼çš„ç ”ç©¶ä¹‹ä¸Šå‘å±•è€Œæ¥ï¼Œæˆ‘ä»¬åº”è¯¥è¦è®°ä½ä»–ã€‚</p>
<p><a
href="https://www.jianshu.com/p/acd06b8ed06b">éƒ¨åˆ†æ˜¾ç¤ºé—®é¢˜ï¼Œè¯·å‚è€ƒ</a></p>
<h1 id="å“ˆå¤«æ›¼æ ‘çš„ç›¸å…³æœ¯è¯­">å“ˆå¤«æ›¼æ ‘çš„ç›¸å…³æœ¯è¯­</h1>
<blockquote>
<p>è·¯å¾„</p>
</blockquote>
<ul>
<li>ä»æ ‘ä¸­ä¸€ä¸ªç»“ç‚¹åˆ°å¦ä¸€ä¸ªç»“ç‚¹ä¹‹é—´çš„åˆ†æ”¯æ„æˆè¿™ä¸¤ä¸ªç»“ç‚¹é—´çš„è·¯å¾„</li>
</ul>
<blockquote>
<p>è·¯å¾„é•¿åº¦</p>
</blockquote>
<ul>
<li>è·¯å¾„ä¸Šçš„åˆ†æ”¯æ•°ç›®</li>
</ul>
<blockquote>
<p>å¸¦æƒè·¯å¾„é•¿åº¦</p>
</blockquote>
<ul>
<li>ç»“ç‚¹åˆ°æ ¹çš„è·¯å¾„é•¿åº¦ä¸ç»“ç‚¹ä¸Šæƒçš„ä¹˜ç§¯</li>
</ul>
<blockquote>
<p>æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦(weighted path length)</p>
</blockquote>
<ul>
<li>æ ‘ä¸­æ‰€æœ‰å¶å­ç»“ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ä¹‹å’Œ</li>
</ul>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/WPL.png"
alt="WPL" />
<figcaption aria-hidden="true">WPL</figcaption>
</figure>
<h1 id="å®šä¹‰">å®šä¹‰</h1>
<p>è®¾æœ‰nä¸ªæƒå€¼{w1,w2,â€¦,wn}ï¼Œæ„é€ ä¸€æ£µæœ‰nä¸ªå¶å­ç»“ç‚¹çš„äºŒå‰æ ‘ï¼Œæ¯ä¸ªå¶å­çš„æƒå€¼ä¸ºwiï¼Œåˆ™wplæœ€å°çš„äºŒå‰æ ‘å«å“ˆå¤«æ›¼æ ‘ã€‚</p>
<h1 id="å“ˆå¤«æ›¼æ ‘çš„æ„é€ è¿‡ç¨‹">å“ˆå¤«æ›¼æ ‘çš„æ„é€ è¿‡ç¨‹</h1>
<p>(1).
åˆå§‹åŒ–ï¼šæ ¹æ®ç»™å®šçš„nä¸ªæƒå€¼{w1,w2,â€¦,wn}ï¼Œæ„æˆnæ£µäºŒå‰æ ‘çš„é›†åˆF={T1,T2,â€¦,Tn}ï¼Œå…¶ä¸­æ¯æ£µäºŒå‰æ ‘Tiåªæœ‰ä¸€ä¸ªå¸¦æƒä¸ºwiçš„æ ¹ç»“ç‚¹ï¼Œå…¶å·¦å³å­æ ‘å‡ç©ºã€‚</p>
<p>(2). é€‰å–ä¸åˆå¹¶ï¼šåœ¨ F
ä¸­é€‰å–ä¸¤æ£µæ ¹ç»“ç‚¹çš„æƒå€¼æœ€å°çš„æ ‘ä½œä¸ºå·¦å³å­æ ‘ï¼Œæ„é€ ä¸€æ£µæ–°çš„äºŒå‰æ ‘ï¼Œä¸”ç½®æ–°çš„äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹çš„æƒå€¼ä¸ºå…¶å·¦ã€å³å­æ ‘ä¸Šæ ¹ç»“ç‚¹çš„æƒå€¼ä¹‹å’Œã€‚</p>
<p>(3). åˆ é™¤ä¸åŠ å…¥ï¼šåœ¨ F ä¸­åˆ é™¤è¿™ä¸¤æ£µæ ‘ï¼ŒåŒæ—¶å°†æ–°å¾—åˆ°çš„äºŒå‰æ ‘åŠ å…¥ F
ä¸­ã€‚</p>
<p>(4). é‡å¤(2)å’Œ(3)ï¼Œç›´åˆ° F
åªå«ä¸€æ£µæ ‘ä¸ºæ­¢ã€‚è¿™æ£µæ ‘ä¾¿æ˜¯æ‰€æ±‚çš„å“ˆå¤«æ›¼æ ‘ã€‚</p>
<h1 id="ä¾‹">ä¾‹ï¼š</h1>
<p>w={5, 29, 7, 8, 14, 23, 3, 11}çš„æ„é€ è¿‡ç¨‹</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w1.png"
alt="w1" /> <img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w2.png" alt="w2" />
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w3.png"
alt="w3" /> <img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w4.png" alt="w4" />
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w5.png"
alt="w5" /> <img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w6.png" alt="w6" />
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w7.png"
alt="w7" /> <img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/w8.png"
alt="w8" /></p>
<h1 id="å“ˆå¤«æ›¼ç¼–ç ">å“ˆå¤«æ›¼ç¼–ç </h1>
<p>ä¸€èˆ¬åœ°ï¼Œ è®¾éœ€è¦ç¼–ç çš„å­—ç¬¦é›†ä¸º{ d1,d2,Â·Â·Â·,dn
}ï¼Œå„ä¸ªå­—ç¬¦åœ¨ç”µæ–‡ä¸­å‡ºç°çš„æ¬¡æ•°æˆ–é¢‘ç‡é›†åˆä¸º{
W1,W2,Â·Â·Â·,Wn},ä»¥d1,d2,Â·Â·Â·,dnä½œä¸ºå¶å­ç»“ç‚¹ï¼Œä»¥W1,W,Â·Â·Â·,Wnä½œä¸ºç›¸åº”å¶å­ç»“ç‚¹çš„æƒå€¼æ¥æ„é€ ä¸€æ£µå“ˆå¤«æ›¼æ ‘ã€‚è§„å®šå“ˆå¤«æ›¼æ ‘çš„å·¦åˆ†æ”¯ä»£è¡¨0ï¼Œå³åˆ†æ”¯ä»£è¡¨1,åˆ™ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹æ‰€ç»è¿‡çš„è·¯å¾„åˆ†æ”¯ç»„æˆçš„0å’Œ1çš„åºåˆ—ä¾¿ä¸ºè¯¥ç»“ç‚¹å¯¹åº”å­—ç¬¦çš„ç¼–ç ï¼Œè¿™å°±æ˜¯å“ˆå¤«æ›¼ç¼–ç ã€‚</p>
<h1 id="å“ˆå¤«æ›¼æ ‘åŠç¼–ç å­˜å‚¨ç»“æ„">å“ˆå¤«æ›¼æ ‘åŠç¼–ç å­˜å‚¨ç»“æ„</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> data;</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line">    <span class="type">int</span> parent, lchild, rchild;</span><br><span class="line">&#125;HTNode, * HuffmanTree;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">char</span>** HuffmanCode;<span class="comment">//åŠ¨æ€åˆ†é…æ•°ç»„å­˜å‚¨å“ˆå¤«æ›¼ç¼–ç </span></span><br></pre></td></tr></table></figure>
<h1 id="å“ˆå¤«æ›¼æ ‘å»ºç«‹">å“ˆå¤«æ›¼æ ‘å»ºç«‹</h1>
<h1
id="è¿”å›ä¸¤ä¸ªåŒäº²åŸŸä¸º0ä¸”æƒå€¼æœ€å°çš„ç‚¹çš„ä¸‹æ ‡">è¿”å›ä¸¤ä¸ªåŒäº²åŸŸä¸º0ä¸”æƒå€¼æœ€å°çš„ç‚¹çš„ä¸‹æ ‡</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Select</span><span class="params">(HuffmanTree HT, <span class="type">int</span> n, <span class="type">int</span>&amp; s1, <span class="type">int</span>&amp; s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*nä»£è¡¨HTæ•°ç»„çš„é•¿åº¦*/</span></span><br><span class="line">    <span class="comment">//å‰ä¸¤ä¸ªforå¾ªç¯æ‰¾æ‰€æœ‰ç»“ç‚¹ä¸­æƒå€¼æœ€å°çš„ç‚¹ï¼ˆå­—ç¬¦ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (HT[i].parent == <span class="number">0</span>)<span class="comment">//åˆ©ç”¨forå¾ªç¯æ‰¾å‡ºä¸€ä¸ªåŒäº²ä¸º0çš„ç»“ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            s1 = i;<span class="comment">//s1åˆå§‹åŒ–ä¸ºi</span></span><br><span class="line">            <span class="keyword">break</span>;<span class="comment">//æ‰¾åˆ°ä¸€ä¸ªåç«‹å³é€€å‡ºå¾ªç¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*åˆ©ç”¨forå¾ªç¯æ‰¾åˆ°æ‰€æœ‰ç»“ç‚¹ï¼ˆå­—ç¬¦ï¼‰æƒå€¼æœ€å°çš„ä¸€ä¸ªå¹¶ä¸”ä¿è¯è¯¥ç»“ç‚¹çš„åŒäº²ä¸º0*/</span></span><br><span class="line">        <span class="keyword">if</span> (HT[i].weight &lt; HT[s1].weight &amp;&amp; HT[i].parent == <span class="number">0</span>)</span><br><span class="line">            s1 = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åä¸¤ä¸ªforå¾ªç¯æ‰€æœ‰ç»“ç‚¹ä¸­æƒå€¼ç¬¬äºŒå°çš„ç‚¹ï¼ˆå­—ç¬¦ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (HT[i].parent == <span class="number">0</span> &amp;&amp; i != s1)<span class="comment">//åˆ©ç”¨forå¾ªç¯æ‰¾å‡ºä¸€ä¸ªåŒäº²ä¸º0çš„ç»“ç‚¹ï¼Œå¹¶ä¸”ä¸èƒ½æ˜¯s1</span></span><br><span class="line">        &#123;</span><br><span class="line">            s2 = i;<span class="comment">//s2åˆå§‹åŒ–ä¸ºi</span></span><br><span class="line">            <span class="keyword">break</span>;<span class="comment">//æ‰¾åˆ°ä¸€ä¸ªåç«‹å³é€€å‡ºå¾ªç¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*åˆ©ç”¨forå¾ªç¯æ‰¾åˆ°æ‰€æœ‰ç»“ç‚¹ï¼ˆå­—ç¬¦ï¼‰æƒå€¼ç¬¬äºŒå°çš„ä¸€ä¸ªï¼Œè¯¥ç»“ç‚¹æ»¡è¶³ä¸èƒ½æ˜¯s1ä¸”åŒäº²æ˜¯0*/</span></span><br><span class="line">        <span class="keyword">if</span> (HT[i].weight &lt; HT[s2].weight &amp;&amp; HT[i].parent == <span class="number">0</span> &amp;&amp; i != s1)</span><br><span class="line">            s2 = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å»ºæ ‘">å»ºæ ‘</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateHuffmanTree</span><span class="params">(HuffmanTree&amp; HT, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> m = <span class="number">2</span> * n - <span class="number">1</span>;  <span class="comment">//æ€»ç»“ç‚¹æ•°2n-1</span></span><br><span class="line">    HT = <span class="keyword">new</span> HTNode[m + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å°†1~må·å•å…ƒä¸­çš„åŒäº²ï¼Œå·¦å­©å­ï¼Œå³å­©å­çš„ä¸‹æ ‡éƒ½åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">        HT[i].data = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        HT[i].parent = <span class="number">0</span>;</span><br><span class="line">        HT[i].lchild = <span class="number">0</span>;</span><br><span class="line">        HT[i].rchild = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¾“å…¥ç»“ç‚¹ä¿¡æ¯å’Œæƒå€¼ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; HT[i].data &gt;&gt; HT[i].weight; <span class="comment">//è¾“å…¥å‰nä¸ªå•å…ƒä¸­å¶å­ç»“ç‚¹çš„ä¿¡æ¯å’Œæƒå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*-----------åˆå§‹åŒ–å·¥ä½œç»“æŸï¼Œä¸‹é¢å»ºæ ‘---------------------------*/</span></span><br><span class="line">    <span class="type">int</span> s1, s2;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n + <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Select</span>(HT, i - <span class="number">1</span>, s1, s2);</span><br><span class="line">        HT[s1].parent = i;</span><br><span class="line">        HT[s2].parent = i;</span><br><span class="line">        HT[i].lchild = s1;</span><br><span class="line">        HT[i].rchild = s2;</span><br><span class="line">        HT[i].weight = HT[s1].weight + HT[s2].weight;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å“ˆå¤«æ›¼ç¼–ç -1">å“ˆå¤«æ›¼ç¼–ç </h1>
<h1 id="æ ¹æ®æ ‘å¯¹æ¯ä¸ªå…ƒç´ ç¼–ç ">æ ¹æ®æ ‘å¯¹æ¯ä¸ªå…ƒç´ ç¼–ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateHuffmanCode</span><span class="params">(HuffmanTree HT, HuffmanCode&amp; HC, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HC = <span class="keyword">new</span> <span class="type">char</span>* [n + <span class="number">1</span>]; <span class="comment">//åˆ†é…å‚¨å­˜nä¸ªå­—ç¬¦ç¼–ç çš„ç¼–ç è¡¨ç©ºé—´</span></span><br><span class="line">    <span class="type">char</span>* cd = <span class="keyword">new</span> <span class="type">char</span>[n]; <span class="comment">//åˆ†é…ä¸´æ—¶å­˜å‚¨å­—ç¬¦ç¼–ç çš„åŠ¨æ€ç©ºé—´</span></span><br><span class="line">    cd[n - <span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;       <span class="comment">//ç¼–ç ç»“æŸç¬¦</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)<span class="comment">//é€ä¸ªæ±‚å­—ç¬¦ç¼–ç </span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> start = n - <span class="number">1</span>; <span class="comment">//start å¼€å§‹æŒ‡å‘æœ€åï¼Œå³ç¼–ç ç»“æŸç¬¦ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> c = i;</span><br><span class="line">        <span class="type">int</span> f = HT[c].parent;<span class="comment">//fæŒ‡å‘ç»“ç‚¹cçš„åŒäº²</span></span><br><span class="line">        <span class="keyword">while</span> (f != <span class="number">0</span>)<span class="comment">//ä»å¶å­ç»“ç‚¹å¼€å§‹å›æº¯ï¼Œç›´åˆ°æ ¹ç»“ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            --start;<span class="comment">//å›æº¯ä¸€æ¬¡ï¼Œstartå‘å‰æŒ‡å‘ä¸€ä¸ªä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> (HT[f].lchild == c)</span><br><span class="line">                cd[start] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cd[start] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">            c = f;</span><br><span class="line">            f = HT[c].parent;</span><br><span class="line">        &#125;</span><br><span class="line">        HC[i] = <span class="keyword">new</span> <span class="type">char</span>[n - start];<span class="comment">//ä¸ºç¬¬iä¸ªå­—ç¬¦ç¼–ç åˆ†é…ç©ºé—´</span></span><br><span class="line">        <span class="built_in">strcpy</span>(HC[i], &amp;cd[start]);<span class="comment">//æŠŠæ±‚å¾—ç¼–ç çš„é¦–åœ°å€ä»cd[start]å¤åˆ¶åˆ°HCçš„å½“å‰è¡Œä¸­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] cd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å“ˆå¤«æ›¼è§£ç ">å“ˆå¤«æ›¼è§£ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DeCode</span><span class="params">(HuffmanTree HT, string a, string&amp; b, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    b = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">int</span> q = <span class="number">2</span> * n - <span class="number">1</span>;<span class="comment">//qåˆå§‹åŒ–ä¸ºæ ¹ç»“ç‚¹çš„ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; a.<span class="built_in">length</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//forå¾ªç¯ç»“æŸæ¡ä»¶æ˜¯è¯»å…¥çš„å­—ç¬¦æ˜¯ç»“æŸç¬¦ï¼ˆäºŒè¿›åˆ¶ç¼–ç ï¼‰</span></span><br><span class="line">        <span class="comment">//æ­¤ä»£ç å—ç”¨æ¥åˆ¤æ–­è¯»å…¥çš„äºŒè¿›åˆ¶å­—ç¬¦æ˜¯0è¿˜æ˜¯1</span></span><br><span class="line">        <span class="keyword">if</span> (a[i] == <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/*è¯»å…¥0ï¼ŒæŠŠæ ¹ç»“ç‚¹(HT[q])çš„å·¦å­©å­çš„ä¸‹æ ‡å€¼èµ‹ç»™qä¸‹æ¬¡å¾ªç¯çš„æ—¶å€™æŠŠHT[q]çš„å·¦å­©å­ä½œä¸ºæ–°çš„æ ¹ç»“ç‚¹*/</span></span><br><span class="line">            q = HT[q].lchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (a[i] == <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            q = HT[q].rchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ­¤ä»£ç å—ç”¨æ¥åˆ¤æ–­HT[q]æ˜¯å¦ä¸ºå¶å­ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (HT[q].lchild == <span class="number">0</span> &amp;&amp; HT[q].rchild == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/*æ˜¯å¶å­ç»“ç‚¹ï¼Œè¯´æ˜å·²ç»è¯‘å‡ºä¸€ä¸ªå­—ç¬¦è¯¥å­—ç¬¦çš„ä¸‹æ ‡å°±æ˜¯æ‰¾åˆ°çš„å¶å­ç»“ç‚¹çš„ä¸‹æ ‡*/</span></span><br><span class="line">            b += HT[q].data;<span class="comment">//æŠŠä¸‹æ ‡ä¸ºqçš„å­—ç¬¦èµ‹ç»™å­—ç¬¦æ•°ç»„b[] q = 2 * n - 1;//åˆå§‹åŒ–qä¸ºæ ¹ç»“ç‚¹çš„ä¸‹æ ‡</span></span><br><span class="line">            q = <span class="number">2</span> * n - <span class="number">1</span>;<span class="comment">//ç»§ç»­è¯‘ä¸‹ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™ä»å“ˆå¤«æ›¼æ ‘çš„æ ¹ç»“ç‚¹å¼€å§‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å“ˆå¤«æ›¼è¯‘ç ">å“ˆå¤«æ›¼è¯‘ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Code</span><span class="params">(HuffmanTree HT, HuffmanCode HC, string c, string&amp; d, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    d = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; c.<span class="built_in">length</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (c[i] == HT[j].data)  <span class="comment">//æ‰¾åˆ°å­—ç¬¦åå†dåè¿½åŠ ç¼–ç </span></span><br><span class="line">                d.<span class="built_in">append</span>(HC[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å­¦ä¹ å“ˆå¤«æ›¼æ ‘å’Œå“ˆå¤«æ›¼ç¼–ç æœ‰åŠ©äºåˆæ­¥ç†è§£æ•°æ®å‹ç¼©åŸç†ã€‚</p>
<p><a
href="https://www.jianshu.com/p/acd06b8ed06b">éƒ¨åˆ†æ˜¾ç¤ºé—®é¢˜ï¼Œè¯·å‚è€ƒ</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤ç°&#39;æ–°é—»å‘å¸ƒ&#39;é¡¹ç›®</title>
    <url>/article/716baca7.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>å¦‚é¢˜ï¼Œä¹‹å‰åšè¿‡â€œæ–°é—»å‘å¸ƒâ€è¿™ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œè®²ä¸€ä¸‹å¤ç°</p>
<p>ä¹‹å‰æ–‡ç« å¦‚ä¸‹</p>
<p><a
href="https://wnhyang.github.io/article/48213f39.html">https://wnhyang.github.io/article/48213f39.html</a></p>
<p><a
href="https://wnhyang.github.io/article/54805cfd.html">https://wnhyang.github.io/article/54805cfd.html</a></p>
<span id="more"></span>
<p>ä¹‹å‰ä¹Ÿè¯´è¿‡æˆ‘çš„ä¸€äº›è®¾è®¡æ˜¯å‚è€ƒ<a
href="https://www.jianshu.com/">ç®€ä¹¦</a>çš„ï¼Œæ‰€ä»¥ä¸‹é¢å±•ç¤ºçš„ä¹Ÿæ˜¯å¾ˆåƒ</p>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>ä¸€ä¸ªç®€æ˜“çš„æ–°é—»å‘å¸ƒç³»ç»Ÿï¼Œå‰å°å¯å®ç°ï¼Œæ–°é—»çš„åœ¨çº¿ç¼–è¾‘ï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®ç°ï¼‰ï¼ŒæŸ¥çœ‹æ–°é—»ï¼Œè¯„è®ºæ–°é—»ï¼Œé—®é¢˜åé¦ˆï¼Œä¸ªäººä¿¡æ¯ä¿®æ”¹ç­‰åŠŸèƒ½ï¼Œåå°å°±æ˜¯å®ç°åŒ…æ‹¬ç”¨æˆ·ã€æ–°é—»åˆ†ç±»ã€æ–°é—»ä¿¡æ¯ã€è¯„è®ºç­‰ç®¡ç†</p>
<p>é¦–é¡µå‚è€ƒä¸‹å›¾</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/é¦–é¡µ.1me80kgmur9c.webp"
alt="é¦–é¡µ" />
<figcaption aria-hidden="true">é¦–é¡µ</figcaption>
</figure>
<p>åé¦ˆå‚è€ƒä¸‹å›¾</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/åé¦ˆ.6d7hvnr6llw0.webp"
alt="åé¦ˆ" />
<figcaption aria-hidden="true">åé¦ˆ</figcaption>
</figure>
<h1 id="æ¶æ„å›¾">æ¶æ„å›¾</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/ç³»ç»Ÿæ¶æ„å›¾.25aidkaka5pc.webp"
alt="ç³»ç»Ÿæ¶æ„å›¾" />
<figcaption aria-hidden="true">ç³»ç»Ÿæ¶æ„å›¾</figcaption>
</figure>
<h1 id="æ•°æ®åº“è®¾è®¡">æ•°æ®åº“è®¾è®¡</h1>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`user_name` <span class="type">VARCHAR</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">	`password` <span class="type">VARCHAR</span> ( <span class="number">100</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">	`email` <span class="type">VARCHAR</span> ( <span class="number">30</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">	`user_type` TINYINT ( <span class="number">4</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·ç±»å‹ï¼ˆ0:æ™®é€šç”¨æˆ·ï¼Œ1:åª’ä½“äººï¼Œ2:ç®¡ç†å‘˜ï¼‰&#x27;</span>,</span><br><span class="line">	`phone` <span class="type">VARCHAR</span> ( <span class="number">50</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ‰‹æœºå·&#x27;</span>,</span><br><span class="line">	`show_phone` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦å±•ç¤ºæ‰‹æœºå·ï¼ˆ0:æ˜¯ï¼Œ1å¦ï¼‰&#x27;</span>,</span><br><span class="line">	`sign` <span class="type">VARCHAR</span> ( <span class="number">30</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç­¾å&#x27;</span>,</span><br><span class="line">	`intro` <span class="type">VARCHAR</span> ( <span class="number">100</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ä»‹ç»&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	<span class="keyword">UNIQUE</span> KEY `idx_user_name` ( `user_name` ),</span><br><span class="line">	<span class="keyword">UNIQUE</span> KEY `idx_email` ( `email` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">20</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;æ–°é—»ç”¨æˆ·è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `user_cert` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`user_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·id&#x27;</span>,</span><br><span class="line">	`cert_info` <span class="type">VARCHAR</span> ( <span class="number">50</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;è®¤è¯ä¿¡æ¯&#x27;</span>,</span><br><span class="line">	`cert_material` <span class="type">VARCHAR</span> ( <span class="number">255</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;è®¤è¯ææ–™&#x27;</span>,</span><br><span class="line">	`state` TINYINT ( <span class="number">4</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;è®¤è¯çŠ¶æ€ï¼ˆ0:å¾…å®¡æ ¸ï¼Œ1:é€šè¿‡ï¼Œ2:æœªé€šè¿‡ï¼‰&#x27;</span>,</span><br><span class="line">	`remark` <span class="type">VARCHAR</span> ( <span class="number">50</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;å¤‡æ³¨&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ),</span><br><span class="line">	KEY `idx_user_id` ( `user_id` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">12</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;ç”¨æˆ·è®¤è¯è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `news` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`category_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»åˆ†ç±»id&#x27;</span>,</span><br><span class="line">	`user_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;ä½œè€…id&#x27;</span>,</span><br><span class="line">	`title` <span class="type">VARCHAR</span> ( <span class="number">50</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»æ ‡é¢˜&#x27;</span>,</span><br><span class="line">	`summary` <span class="type">VARCHAR</span> ( <span class="number">30</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»æ‘˜è¦&#x27;</span>,</span><br><span class="line">	`content` <span class="type">VARCHAR</span> ( <span class="number">1000</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»å†…å®¹&#x27;</span>,</span><br><span class="line">	`state` TINYINT ( <span class="number">4</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»çŠ¶æ€ï¼ˆ0:æœªæ“ä½œï¼Œè‰ç¨¿çŠ¶æ€ï¼Œ1:ç­‰å¾…ï¼Œ2:é€šè¿‡ï¼Œ3:ä¸é€šè¿‡ï¼‰&#x27;</span>,</span><br><span class="line">	`remark` <span class="type">VARCHAR</span> ( <span class="number">50</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;å¤‡æ³¨&#x27;</span>,</span><br><span class="line">	`comment_count` <span class="type">INT</span> ( <span class="number">10</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;è¯„è®ºæ•°ï¼Œåªè®¡ç®—ä¸€çº§è¯„è®º&#x27;</span>,</span><br><span class="line">	`star_count` <span class="type">INT</span> ( <span class="number">10</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ”¶è—æ•°&#x27;</span>,</span><br><span class="line">	`like_count` <span class="type">INT</span> ( <span class="number">10</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å–œæ¬¢æ•°&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_news_title` ( `title` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ),</span><br><span class="line">	KEY `idx_user_id` ( `user_id` ),</span><br><span class="line">	KEY `idx_category_id` ( `category_id` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">32</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;æ–°é—»è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `news_category` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`category_name` <span class="type">VARCHAR</span> ( <span class="number">10</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»åˆ†ç±»å&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">23</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;æ–°é—»åˆ†ç±»è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `news_comment` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`news_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»id&#x27;</span>,</span><br><span class="line">	`user_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;ä½œè€…id&#x27;</span>,</span><br><span class="line">	`parent_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;çˆ¶è¯„è®ºid&#x27;</span>,</span><br><span class="line">	`is_top` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦ä¸€çº§è¯„è®ºï¼Œåªæœ‰ä¸¤çº§è¯„è®º&#x27;</span>,</span><br><span class="line">	`content` <span class="type">VARCHAR</span> ( <span class="number">100</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;è¯„è®ºå†…å®¹&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ),</span><br><span class="line">	KEY `idx_news_id` ( `news_id` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">20</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;æ–°é—»è¯„è®ºè¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `user_like_news` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`news_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»id&#x27;</span>,</span><br><span class="line">	`user_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·id&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ),</span><br><span class="line">	KEY `idx_user_id` ( `user_id` ),</span><br><span class="line">	KEY `idx_news_id` ( `news_id` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">25</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;ç”¨æˆ·å–œæ¬¢æ–°é—»è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `user_star_news` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`news_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;æ–°é—»id&#x27;</span>,</span><br><span class="line">	`user_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·id&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ),</span><br><span class="line">	KEY `idx_user_id` ( `user_id` ),</span><br><span class="line">	KEY `idx_news_id` ( `news_id` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">14</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;ç”¨æˆ·æ”¶è—æ–°é—»è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `feedback` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`user_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;åé¦ˆäººid&#x27;</span>,</span><br><span class="line">	`type_id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;-1&#x27;</span> COMMENT <span class="string">&#x27;åé¦ˆç±»å‹id&#x27;</span>,</span><br><span class="line">	`content` <span class="type">VARCHAR</span> ( <span class="number">100</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;åé¦ˆå†…å®¹&#x27;</span>,</span><br><span class="line">	`state` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;åé¦ˆçŠ¶æ€ï¼ˆ0:æœªå¤„ç†ï¼Œ1:å¤„ç†ï¼‰&#x27;</span>,</span><br><span class="line">	`remark` <span class="type">VARCHAR</span> ( <span class="number">50</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;å¤‡æ³¨&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">	KEY `idx_update_time` ( `update_time` ),</span><br><span class="line">	KEY `idx_user_id` ( `user_id` ),</span><br><span class="line">	KEY `idx_type_id` ( `type_id` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">9</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;åé¦ˆè¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `feedback_type` (</span><br><span class="line">	`id` <span class="type">BIGINT</span> ( <span class="number">20</span> ) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;è‡ªå¢ä¸»é”®id&#x27;</span>,</span><br><span class="line">	`type_name` <span class="type">VARCHAR</span> ( <span class="number">20</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;åé¦ˆç±»å‹å&#x27;</span>,</span><br><span class="line">	`valid` TINYINT ( <span class="number">1</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆï¼ˆ0:æ— æ•ˆï¼Œ1æœ‰æ•ˆï¼‰&#x27;</span>,</span><br><span class="line">	`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">	`update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY ( `id` ),</span><br><span class="line">KEY `idx_update_time` ( `update_time` ) </span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">21</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;åé¦ˆç±»å‹è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h1 id="æ¥å£è®¾è®¡">æ¥å£è®¾è®¡</h1>
<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 31%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th>æ“ä½œäºº</th>
<th>å¯</th>
<th>ä¸»è¦æ¥å£</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ç®¡ç†å‘˜</td>
<td>å¯¹å‡ ä¹æ‰€æœ‰å†…å®¹çš„ç®¡ç†<br />ç”¨æˆ·è®¤è¯å®¡æ ¸<br />ç”¨æˆ·ç®¡ç†<br />æ–°é—»åˆ†ç±»ç®¡ç†<br />æ–°é—»å®¡æ ¸<br />æ–°é—»ç®¡ç†<br />æ–°é—»è¯„è®ºç®¡ç†<br />åé¦ˆç®¡ç†</td>
<td>/user/info/(list/update/add/delete)<br />/user/cert/(list/update/delete)<br />/news/category/(list/update/add/delete)<br />/news/info/(list/update/add/delete)<br />/comment/info/list<br />/comment/delete<br />/feedback/type/(list/update/add/delete)<br />/feedback/info/(list/update/delete)</td>
<td>å°±æ­£å¸¸ç®¡ç†ç•Œé¢</td>
</tr>
<tr class="even">
<td>åª’ä½“äºº</td>
<td>æ–°é—»æ¥æº<br />éœ€è¦é€šè¿‡è®¤è¯å®¡æ ¸å¯å‘æ–°é—»ï¼ˆå¯é™åˆ¶æ—¶é—´ï¼Œä¸€æ®µæ—¶é—´åè¿˜éœ€è®¤è¯ï¼‰<br />ä¸ªäººæ–°é—»å¢åˆ æ”¹<br />ä¸ªäººä¿¡æ¯ä¿®æ”¹æäº¤è®¤è¯<br />æŸ¥çœ‹æ–°é—»<br />å–œæ¬¢æ”¶è—æ–°é—»<br />è¯„è®ºæ–°é—»<br />åé¦ˆ</td>
<td>/news/add<br />/news/delete<br />/news/{userId}/news<br />/news/{userId}/content<br />/news/{userId}/submit<br />/news/{userId}/cancel</td>
<td>ç¼–è¾‘ç•Œé¢å‚è€ƒå¦‚ä¸‹åœ¨æ­¤å¯çœ‹åˆ°è‡ªå·±æ‰€æœ‰æ–°é—»ï¼ˆæ‰€æœ‰çŠ¶æ€ï¼‰ï¼Œå¯ç¼–è¾‘ä¿®æ”¹<br /><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/ç¼–è¾‘.2mpj1wfngrs0.webp"
alt="ç¼–è¾‘" /><br /><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/è®¤è¯æˆåŠŸ.62egr4bsnf40.webp"
alt="è®¤è¯æˆåŠŸ" /><br /><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/è®¤è¯å¤±è´¥.rzhztkdrykg.webp"
alt="è®¤è¯å¤±è´¥" /></td>
</tr>
<tr class="odd">
<td>ä¸€èˆ¬ç”¨æˆ·</td>
<td>æ™®é€šç”¨æˆ·<br />ä¸ªäººä¿¡æ¯ä¿®æ”¹<br />æäº¤è®¤è¯ï¼Œé€šè¿‡è®¤è¯å¯å˜ä¸ºåª’ä½“äºº<br />æŸ¥çœ‹æ–°é—»<br />å–œæ¬¢æ”¶è—æ–°é—»<br />è¯„è®ºæ–°é—»<br />åé¦ˆ</td>
<td>/news/{newsId}/comment<br />/news/{newsId}/star<br />/news/{newsId}/like<br />/news/{newsId}/unlike<br />/user/update<br />/user/delete<br />/user/cert/add<br />/user/{userId}/cert<br />/feedback/all<br />/feedback/add<br />/user/{userId}/feedback</td>
<td>ä¸ªäººä¸»é¡µå‚è€ƒå¦‚ä¸‹å±•ç¤ºåŸºæœ¬ä¸ªäººä¿¡æ¯åŒæ—¶ï¼Œæ˜¾ç¤ºå·²è¿‡å®¡æ ¸æ–°é—»ï¼Œå–œæ¬¢æ”¶è—æ–°é—»<br /><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/ä¸ªäººä¸»é¡µ.9simffpbemw.webp"
alt="ä¸ªäººä¸»é¡µ" /></td>
</tr>
<tr class="even">
<td>æ¸¸å®¢</td>
<td>æŸ¥çœ‹æ–°é—»</td>
<td>/news/{newsId}<br />/comment/list<br />/user/{userId}<br />/user/{userId}/like<br />/user/like/list<br />/user/{userId}/star<br />/user/star/list<br />/news/category/all<br />/{cId}</td>
<td>æŸ¥çœ‹æ–°é—»å‚è€ƒå¦‚ä¸‹æ˜¾ç¤ºæ–°é—»æ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»ã€è¯„è®ºã€æ¨èæ–°é—»ç­‰<br /><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/æ–°é—»è¯¦æƒ….60zybiv50vg0.webp"
alt="æ–°é—»è¯¦æƒ…" /></td>
</tr>
</tbody>
</table>
<h1 id="æ–°é—»çŠ¶æ€è½¬æ¢å›¾">æ–°é—»çŠ¶æ€è½¬æ¢å›¾</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/æµç¨‹å›¾.ty73c13oxog.webp"
alt="æµç¨‹å›¾" />
<figcaption aria-hidden="true">æµç¨‹å›¾</figcaption>
</figure>
<h1 id="éƒ¨åˆ†æ•°æ®æµè½¬å›¾">éƒ¨åˆ†æ•°æ®æµè½¬å›¾</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/æ•°æ®æµè½¬.7gr37ncgogw0.webp"
alt="æ•°æ®æµè½¬" />
<figcaption aria-hidden="true">æ•°æ®æµè½¬</figcaption>
</figure>
<h1 id="ç¼“å­˜è®¾è®¡">ç¼“å­˜è®¾è®¡</h1>
<p>æ–°é—»ç‚¹èµç¼“å­˜è®¾è®¡</p>
<p>https://wnhyang.github.io/article/1e9afcf1.html</p>
<p>æ–°é—»åˆ†ç±»åå’Œåé¦ˆç±»å‹åè½¬ä¸ºJSONå­—ç¬¦ä¸²å­˜å‚¨ï¼Œå› ä¸ºè¿™éƒ¨åˆ†åªç”±ç®¡ç†å‘˜ä¿®æ”¹ï¼Œè€Œä¸”å‡ ä¹ä¸å˜ï¼Œæ‰€ä»¥æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¹¶åœ¨ä¿®æ”¹æ—¶åˆ é™¤ç¼“å­˜ï¼Œä»¥åšåˆ°æ•°æ®ä¸€è‡´</p>
<p>å•ä¸ªæ–°é—»åˆ†ç±»åã€å•ä¸ªåé¦ˆç±»å‹åã€ç”¨æˆ·åã€æ–°é—»æ ‡é¢˜ã€ç”¨æˆ·é‚®ç®±å­˜å¯¹åº”å­—ç¬¦ä¸²ï¼Œæœ‰è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿä¼šåœ¨åˆ é™¤ä¿®æ”¹æ—¶åˆ é™¤ç¼“å­˜</p>
<h2 id="æ²¡åšçš„">æ²¡åšçš„</h2>
<p>æ–°é—»è¯„è®ºæ•°ã€ç‚¹å‡»é‡çš„ç¼“å­˜hash</p>
<p>æ¯ä¸ªç”¨æˆ·çš„æ–°é—»åˆ—è¡¨ç¼“å­˜set/zset</p>
<p>æ–°é—»ç®€å•ä¿¡æ¯ç¼“å­˜hash</p>
<p>çƒ­é—¨æ–°é—»å†…å®¹ç¼“å­˜hash</p>
<p>æ¨èåˆ—è¡¨list</p>
<p>æ”¶è—å¤¹set/zset</p>
<p>æ–°é—»æ€»çƒ­æ¦œï¼Œåˆ†ç±»çƒ­æ¦œset/zset</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<h1 id="é—®é¢˜éœ€è¦æ”¹è¿›">é—®é¢˜/éœ€è¦æ”¹è¿›</h1>
<p>è¯„è®ºå…³è”å…¶ä»–è¯„è®ºï¼ˆä¸€çº§è¯„è®ºæˆ–å›å¤ä¹‹é—´çš„ï¼‰ï¼Œæ•°æ®åº“éœ€è¦å†è®¾è®¡ï¼Œåˆ é™¤éœ€è¦é‡æ–°è€ƒè™‘é€»è¾‘</p>
<p>åœ¨æ‰©å±•åŠŸèƒ½æ—¶è¦è€ƒè™‘æ•°æ®åº“è¡¨æ˜¯å¦éœ€è¦é‡æ–°è®¾è®¡</p>
<p>ç®€å•çš„å…³è”è¡¨ï¼ˆä¸¤ä¸ªidç»„æˆçš„ï¼‰ï¼Œå¯ä»¥çœå»å…³è”è¡¨çš„idï¼Œç”±å…³è”çš„ä¸¤ä¸ªidç»„æˆå¤åˆä¸»é”®</p>
<h1 id="å±•æœ›">å±•æœ›</h1>
<ul>
<li><p>ç”¨æˆ·æƒé™ï¼Œå¯ä½¿ç”¨SpringSecurityç­‰å®‰å…¨æ¡†æ¶ï¼ŒåŒæ—¶å¯¹æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨</p></li>
<li><p>å•ä¸ªæœåŠ¡è¿‡å¤§æ—¶ï¼Œè€ƒè™‘æ‹†åˆ†æœåŠ¡</p></li>
<li><p>åˆ†å¸ƒå¼åœºæ™¯è€ƒè™‘ï¼Œäº‹åŠ¡é—®é¢˜ï¼Œå®šæ—¶ä»»åŠ¡åŒæ ·ä¹Ÿè¦è€ƒè™‘åˆ†å¸ƒå¼ä¸‹çš„é—®é¢˜</p></li>
<li><p>åŠ å…¥ESä¼˜åŒ–æŸ¥è¯¢</p></li>
<li><p>æ•°æ®è¡¨ç»“æ„ï¼Œç´¢å¼•ä¼˜åŒ–</p></li>
</ul>
]]></content>
      <tags>
        <tag>Redis</tag>
        <tag>é¡¹ç›®</tag>
        <tag>Dubbo</tag>
        <tag>Spring Boot</tag>
        <tag>Git/GitHub</tag>
        <tag>MySQL</tag>
        <tag>Mybatis/Mybatis-plus</tag>
        <tag>RocketMQ</tag>
        <tag>Apollo</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥½å¤±è´¥å‘€</title>
    <url>/article/c74b39ee.html</url>
    <content><![CDATA[<p>æˆ‘æœ¬ä¸æ˜¯å±äºé‚£ç§æ‚²è§‚çš„äººï¼Œä½†åœ¨æŸå¤©æŸä¸ªæ—¶è¾°æŸä¸€ç§’ä¼šè§‰å¾—è‡ªå·±çœŸçš„å¥½å¤±è´¥å•Šï¼Œå½“ç„¶å¤§å¤šæ˜¯æ—¶å€™è¿˜æ˜¯ç§¯æä¹è§‚çš„ã€‚å¤±è´¥å¯ä»¥è¢«é“­è®°ï¼Œä½†ç»ä¸èƒ½é™·å…¥é‚£æ ·çš„æƒ…ç»ªä¸­å»ï¼Œä»–ä¼šæ‘§æ¯ä¸€ä¸ªäººã€‚å†™è¿™ç¯‡æ–‡ç« å°±æ˜¯å‘ç°è‡ªå·±çš„ä¸è¶³åšä¸‹çš„æ€»ç»“å¹¶åŠªåŠ›æ”¹å˜çš„ä¸€æ¬¡è®°å½•ã€‚æ¥å§ï¼Œå‹‡æ•¢åœ°é¢å¯¹å®ƒï¼</p>
<span id="more"></span>
<h1 id="äº‹ä»¶">äº‹ä»¶</h1>
<p>å‰å‡ å¤©ä¸Šä¸€èŠ‚ç®—æ³•è®¾è®¡ä¸åˆ†æå®éªŒè¯¾ï¼Œè€å¸ˆè®©åšä¸¤é“â€œç®€å•â€çš„ç®—æ³•é¢˜ï¼Œæˆ‘é¥¶æœ‰å…´è¶£åœ°å‡†å¤‡æ–½å±•èº«æ‰‹ï¼Œæ²¡æƒ³åˆ°å•Šæ²¡æƒ³åˆ°ï¼Œå¼€å§‹åŠå°æ—¶å°±æ”¾å¼ƒäº†ï¼Œå› ä¸ºå®åœ¨æ˜¯ä¸çŸ¥é“æ€ä¹ˆåšå•Šï¼Œå§‹ç»ˆæ²¡æœ‰ä¸€ä¸ªæˆ‘è§‰å¾—è¾ƒä¸ºå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶æœ‰ä¸€äº›æƒ³æ³•äº†ï¼Œä½†å®æ–½åŠ å®Œå–„è¿˜æ˜¯æœ‰å¾ˆå¤šé”™è¯¯çš„ã€‚è¿™ä¸‹æˆ‘çš„è‡ªä¿¡å¿ƒå½»åº•å´©å¡Œäº†ï¼Œå°±è¿™ï¼Œæˆ‘è¿˜æƒ³æ¯•ä¸šç›´æ¥å‡ºå»æ‰¾å·¥ä½œï¼Œæœ‰äººè¦å—ï¼Ÿéš¾ä¸æˆå»å·¥åœ°æ¬ç –å»ï¼Ÿå¥½å¤±è´¥å•Šï¼</p>
<p>æˆ‘æ˜¯å±äºé‚£ç§å¥½èƒœå¿ƒæ¯”è¾ƒå¼ºçš„ï¼Œå°†è¿‘2ä¸ªå°æ—¶ä¸€é“é¢˜ä¹Ÿæ²¡æœ‰å¤´ç›®ï¼ŒæŒºæ‰“å‡»äººçš„ï¼Œä¹‹å4ã€5ä¸ªå°æ—¶å¯¹è¿™ä¿©é¢˜éƒ½å……æ»¡åæ„Ÿï¼Œæ²¡æœ‰å›è¿‡å»çœ‹ä¸€çœ¼ï¼Œå¾ˆå¤šäººæ˜¯ä¸æ˜¯ä¹Ÿä¼šè¿™æ ·å•Šï¼ä½†æ˜¯è¿˜æ˜¯è¦é¢å¯¹çš„ï¼Œè¿™æ‰æ˜¯æˆ‘è‡ªå·±å•Šï¼</p>
<h1 id="å¼€å§‹è§£å†³">å¼€å§‹è§£å†³</h1>
<p>é‚£äº›æ€ä¸æ­»ä½ çš„ï¼Œä¼šè®©ä½ å˜å¾—æ›´å¼ºå¤§ï¼</p>
<p>ä¸‹é¢æ˜¯ç¬¬ä¸€é¢˜åœ¨LeetCodeæœåˆ°çš„</p>
<h1 id="ç¼–è¾‘è·ç¦»">72. ç¼–è¾‘è·ç¦»</h1>
<p><a
href="https://leetcode-cn.com/problems/edit-distance/">é¢˜ç›®åœ°å€</a></p>
<p>ç»™ä½ ä¸¤ä¸ªå•è¯Â word1 å’ŒÂ word2ï¼Œè¯·ä½ è®¡ç®—å‡ºå°†Â word1Â è½¬æ¢æˆÂ word2
æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°Â ã€‚</p>
<p>ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š</p>
<ol type="1">
<li>æ’å…¥ä¸€ä¸ªå­—ç¬¦</li>
<li>åˆ é™¤ä¸€ä¸ªå­—ç¬¦</li>
<li>æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li>
</ol>
<p>ç¤ºä¾‹1ï¼š &gt;è¾“å…¥ï¼šword1 = "horse", word2 = "ros"<br />
&gt;è¾“å‡ºï¼š3<br />
&gt;è§£é‡Šï¼š<br />
&gt;horse -&gt; rorse (å°† 'h' æ›¿æ¢ä¸º 'r')<br />
&gt;rorse -&gt; rose (åˆ é™¤ 'r')<br />
&gt;rose -&gt; ros (åˆ é™¤ 'e')</p>
<p>ç¤ºä¾‹2ï¼š &gt;è¾“å…¥ï¼šword1 = "intention", word2 = "execution"<br />
&gt;è¾“å‡ºï¼š5<br />
&gt;è§£é‡Šï¼š<br />
&gt;intention -&gt; inention (åˆ é™¤ 't')<br />
&gt;inention -&gt; enention (å°† 'i' æ›¿æ¢ä¸º 'e')<br />
&gt;enention -&gt; exention (å°† 'n' æ›¿æ¢ä¸º 'x')<br />
&gt;exention -&gt; exection (å°† 'n' æ›¿æ¢ä¸º 'c')<br />
&gt;exection -&gt; execution (æ’å…¥ 'u')</p>
<p>é¢˜ç›®æè¿°å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œè™½ç„¶ç¤ºä¾‹å’Œå®éªŒæ—¶çš„ä¸ä¸€æ ·ï¼Œä½†é¢˜å¹²æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œè¿™åœ¨LeetCodeä¹Ÿç®—ä¸€é“ç»å…¸çš„é¢˜äº†ï¼</p>
<h1 id="begin">begin</h1>
<p>ä¸çœ‹é¢˜è§£ä¸çŸ¥é“ï¼Œè¿™æ˜¯ä¸€é“åŠ¨æ€è§„åˆ’çš„é—®é¢˜ï¼Œå•Šï¼ŸåŠ¨æ€è§„åˆ’ï¼Œæ—©æœ‰è€³é—»å®ƒçš„å¤§åï¼ŒçœŸé‡åˆ°äº†ï¼Œæœç„¶åä¸è™šä¼ å•Šã€‚çœ‹é¢˜è§£æœ‰äº›è´¹åŠ›ï¼Œä¸€äº›åœ°æ–¹çœ‹ä¸æ‡‚ï¼Œæ‰€ä»¥æˆ‘å°±å…ˆä»<strong>åŠ¨æ€è§„åˆ’</strong>ä¸‹æ‰‹äº†ã€‚</p>
<p>æˆ‘åœ¨Bç«™çœ‹äº†è¿™ä¸ª<a
href="https://www.bilibili.com/video/BV1xb411e7ww">åŠ¨æ€è§„åˆ’è§†é¢‘</a>ï¼ŒçœŸå¿ƒè§‰å¾—è®²çš„éå¸¸å¥½ï¼Œå­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ï¼Œå°¤å…¶å¯¹åŠ¨æ€è§„åˆ’è¿™ç§æ€æƒ³æ·±æ·±æ•¬ä½©ï¼Œå¤ªå‰å®³äº†ã€‚</p>
<p>è§†é¢‘é‡Œè®²äº†ä¸‰ä¸ªä¾‹é¢˜ï¼Œå°†åŠ¨æ€è§„åˆ’å‘ˆç°åœ¨åˆå­¦è€…çš„é¢å‰ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘çš„ç®€è¦æ€»ç»“ï¼Œæœ‰æœºä¼šæˆ‘ä¼šæŠŠä¸‰ä¸ªä¾‹é¢˜è¯¦ç»†è¯´ä¸€è¯´ã€‚</p>
<h1 id="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</h1>
<p>A è®¡æ•°é—®é¢˜ B æœ€å€¼é—®é¢˜ C å¯è¡Œæ€§é—®é¢˜</p>
<h2 id="ä¸€ç¡®å®šçŠ¶æ€">ä¸€ã€ç¡®å®šçŠ¶æ€</h2>
<blockquote>
<ol type="1">
<li>æœ€åä¸€æ­¥</li>
<li>å­é—®é¢˜</li>
</ol>
</blockquote>
<h2 id="äºŒè½¬ç§»æ–¹ç¨‹">äºŒã€è½¬ç§»æ–¹ç¨‹</h2>
<h2 id="ä¸‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜">ä¸‰ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œé—®é¢˜</h2>
<blockquote>
<p>åˆå§‹æ¡ä»¶ï¼šç”¨è½¬ç§»æ–¹ç¨‹ç®—ä¸å‡ºæ¥ï¼Œéœ€è¦æ‰‹å·¥å®šä¹‰<br />
è¾¹ç•Œæƒ…å†µï¼šæ•°ç»„ä¸èƒ½è¶Šç•Œ</p>
</blockquote>
<h2 id="å››è®¡ç®—é¡ºåº">å››ã€è®¡ç®—é¡ºåº</h2>
<p>åšåŠ¨æ€è§„åˆ’å°±æŒ‰ä¸Šé¢çš„æ¥</p>
<h1 id="é’ˆå¯¹è¿™ä¸ªé¢˜">é’ˆå¯¹è¿™ä¸ªé¢˜</h1>
<p>ä¸€ã€åˆå§‹æ¡ä»¶</p>
<ol type="1">
<li>æœ€åä¸€æ­¥ï¼š dp[i][j] ä»£è¡¨ word1 åˆ° i ä½ç½®è½¬æ¢æˆ word2 åˆ° j
ä½ç½®éœ€è¦æœ€å°‘æ­¥æ•°</li>
</ol>
<p>æ‰€ä»¥ï¼Œ</p>
<p>å½“ word1[i] == word2[j]ï¼Œdp[i][j] = dp[i-1][j-1]ï¼›</p>
<p>å½“ word1[i] != word2[j]ï¼Œdp[i][j] = min(dp[i-1][j-1], dp[i-1][j],
dp[i][j-1]) + 1</p>
<p>å…¶ä¸­ï¼Œdp[i-1][j-1] è¡¨ç¤ºæ›¿æ¢æ“ä½œï¼Œdp[i-1][j] è¡¨ç¤ºåˆ é™¤æ“ä½œï¼Œdp[i][j-1]
è¡¨ç¤ºæ’å…¥æ“ä½œã€‚</p>
<p>æ³¨æ„ï¼Œé’ˆå¯¹ç¬¬ä¸€è¡Œï¼Œç¬¬ä¸€åˆ—è¦å•ç‹¬è€ƒè™‘ï¼Œæˆ‘ä»¬å¼•å…¥ '' ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/72.png" width="400" height="" alt="141-1" /></p>
<p>ç¬¬ä¸€è¡Œï¼Œæ˜¯ word1 ä¸ºç©ºå˜æˆ word2 æœ€å°‘æ­¥æ•°ï¼Œå°±æ˜¯æ’å…¥æ“ä½œ</p>
<p>ç¬¬ä¸€åˆ—ï¼Œæ˜¯ word2 ä¸ºç©ºï¼Œéœ€è¦çš„æœ€å°‘æ­¥æ•°ï¼Œå°±æ˜¯åˆ é™¤æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDistance</span><span class="params">(String word1, String word2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> word1.length();</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> word2.length();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºä¸²</span></span><br><span class="line">        <span class="keyword">if</span> (n * m == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> n + m;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// DP æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[][] D = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>][m + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾¹ç•ŒçŠ¶æ€åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n + <span class="number">1</span>; i++) &#123;</span><br><span class="line">            D[i][<span class="number">0</span>] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m + <span class="number">1</span>; j++) &#123;</span><br><span class="line">            D[<span class="number">0</span>][j] = j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¡ç®—æ‰€æœ‰ DP å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n + <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m + <span class="number">1</span>; j++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> D[i - <span class="number">1</span>][j] + <span class="number">1</span>;</span><br><span class="line">                <span class="type">int</span> <span class="variable">down</span> <span class="operator">=</span> D[i][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                <span class="type">int</span> <span class="variable">left_down</span> <span class="operator">=</span> D[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span> (word1.charAt(i - <span class="number">1</span>) != word2.charAt(j - <span class="number">1</span>)) &#123;</span><br><span class="line">                    left_down += <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                D[i][j] = Math.min(left, Math.min(down, left_down));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> D[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é¢˜è§£å‚è€ƒ">é¢˜è§£å‚è€ƒ</h1>
<p>ä½œè€…ï¼špowcai<br />
é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/edit-distance/solution/zi-di-xiang-shang-he-zi-ding-xiang-xia-by-powcai-3/</p>
<p><a
href="https://leetcode-cn.com/problems/edit-distance/solution/">è¯¦ç»†é¢˜è§£</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¦‚æœæƒ³å†è¯•è¯•å…¶ä»–ç±»çš„åŠ¨æ€è§„åˆ’é—®é¢˜å¯ä»¥å°è¯•<a
href="https://leetcode-cn.com/problems/coin-change/">é›¶é’±å…‘æ¢</a>ã€<a
href="https://leetcode-cn.com/problems/unique-paths/">ä¸åŒè·¯å¾„</a>ã€<a
href="https://leetcode-cn.com/problems/jump-game/">è·³è·ƒæ¸¸æˆ</a>ã€<a
href="https://leetcode-cn.com/problems/frog-jump/">é’è›™è¿‡æ²³</a>ï¼Œè¦è¯´çš„æ˜¯è¿™äº›é¢˜å¯èƒ½ç”¨åŠ¨æ€è§„åˆ’è§£ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼Œä½†éƒ½æ˜¯èƒ½åšçš„ã€‚</p>
<p>è¯´å¥é¢˜å¤–è¯ï¼Œå‰äº›æ—¥å‘ç”Ÿäº†ä¸€ä»¶äº‹ï¼Œâ€œå¤§è¿ç†å·¥ç ”ç©¶ç”Ÿè‡ªæ€â€ï¼Œä¸€ä¸ªæ–‡ç« çš„æ ‡é¢˜æ˜¯è¿™æ ·å†™çš„â€”â€”å¤§è¿ç†å·¥ç ”ç©¶ç”Ÿè‡ªæ€ï¼Œé—è¨€æ›å…‰ï¼šè¿™ä¸–ç•Œä¸€ç›´æ•™æˆ‘ä»¬æˆåŠŸï¼Œå´æ²¡æ•™ä¼šæˆ‘ä»¬æ¥å—å¹³åº¸ã€‚çœ‹åˆ°è¿™æ ·çš„é—è¨€æŒºæœ‰æ„Ÿæ‚Ÿçš„ï¼Œæ˜¯å•Šï¼Œä»ç”Ÿåˆ°æ˜¯è¿™ä¸ªä¸–ç•Œï¼Œå‘¨å›´çš„æ‰€æœ‰äººã€å®¶é•¿ã€è€å¸ˆã€æœ‹å‹ï¼Œéƒ½åœ¨Pushæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬èƒ½æˆåŠŸï¼Œä½†æˆåŠŸçš„æ°¸è¿œæ˜¯å°‘éƒ¨åˆ†ï¼ŒæˆåŠŸè¿™ç§å‘ä¸Šçš„å¿ƒæ€ç²¾ç¥æ˜¯å¥½çš„ï¼Œä½†å¯¹ä¸€äº›äººä¼šæœ‰å¾ˆå¤§çš„å‹åŠ›ï¼ŒåŒ…æ‹¬æˆ‘ï¼Œåè€Œæ²¡æœ‰äººæ•™ä¼šæˆ‘ä»¬å»æ¥å—å¹³åº¸ï¼Œå¹³åº¸ä¹Ÿä¸æ˜¯ä»€ä¹ˆåäº‹ï¼Œå¹³åº¸ä¹Ÿå¯ä»¥ä¸å¹³å‡¡å•Šï¼</p>
<p>è¿½æ±‚æˆåŠŸçš„è·¯ä¸Šè¦æ”¾å¹³å¿ƒæ€ï¼Œå‹‡æ•¢çš„é¢å¯¹å¤±è´¥ï¼Œæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥½æƒ³ä¸ºå†œæ‘åšç‚¹ä»€ä¹ˆ</title>
    <url>/article/d36a1c6.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æ›´æ–°ing</p>
<span id="more"></span>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=1949108901&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®šæ—¶ä»»åŠ¡</title>
    <url>/article/1e885c14.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://chenssy.blog.csdn.net/article/details/32703499?spm=1001.2101.3001.6650.12&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-12.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-12.no_search_link&amp;utm_relevant_index=19">è¯¦è§£javaå®šæ—¶ä»»åŠ¡</a></p>
<p><a
href="https://blog.csdn.net/u013332124/article/details/79603943?spm=1001.2101.3001.6650.16&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-16.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-16.no_search_link&amp;utm_relevant_index=23">Java
å®šæ—¶ä»»åŠ¡å®ç°åŸç†è¯¦è§£</a></p>
<p><a
href="https://blog.csdn.net/weixin_44742132/article/details/108091097?ops_request_misc=%7B%22request%5Fid%22%3A%22164165064716780274192796%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=164165064716780274192796&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-108091097.first_rank_v2_pc_rank_v29&amp;utm_term=%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1&amp;spm=1018.2226.3001.4187">å®šæ—¶ä»»åŠ¡æœ€ç®€å•çš„3ç§å®ç°æ–¹æ³•ï¼ˆè¶…å¥½ç”¨ï¼‰</a></p>
<p><a
href="https://blog.csdn.net/u013987258/article/details/106671908?ops_request_misc=%7B%22request%5Fid%22%3A%22164165064716780274192796%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=164165064716780274192796&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-106671908.first_rank_v2_pc_rank_v29&amp;utm_term=%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1&amp;spm=1018.2226.3001.4187">ã€å®šæ—¶ä»»åŠ¡ã€‘Spring
Boot å®šæ—¶æ‰§è¡Œä»»åŠ¡è¯¦è§£,æ¯å¤©å®šæ—¶å‡ ç‚¹é’Ÿæ‰§è¡Œä»»åŠ¡</a></p>
<p><a
href="https://blog.csdn.net/hu_dongyang/article/details/114270232?ops_request_misc=%7B%22request%5Fid%22%3A%22164165064716780274192796%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=164165064716780274192796&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-3-114270232.first_rank_v2_pc_rank_v29&amp;utm_term=%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1&amp;spm=1018.2226.3001.4187">SpringBootå®šæ—¶ä»»åŠ¡@Scheduledæ³¨è§£è¯¦è§£</a></p>
<p><a
href="https://blog.csdn.net/qq_41463655/article/details/100839629?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-100839629.first_rank_v2_pc_rank_v29&amp;spm=1018.2226.3001.4187">job
å®šæ—¶ä»»åŠ¡çš„äº”ç§åˆ›å»ºæ–¹å¼ || xxl-job å®šæ—¶ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒ</a></p>
<p><a
href="https://blog.csdn.net/kegumingxin2626/article/details/72854823/">Java
å®šæ—¶ä»»åŠ¡çš„å‡ ç§å®ç°æ–¹å¼</a></p>
<p>çœ‹äº†ä¸Šé¢è¿™äº›å¯ä»¥ç®€å•åº”ç”¨ä¸€äº›å®šæ—¶ä»»åŠ¡äº†ï¼Œä¸Šé¢æ–‡ç« å†™çš„å¾ˆå¥½ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†</p>
]]></content>
      <tags>
        <tag>å®šæ—¶ä»»åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨CKEditoré…ç½®ä¸ä½¿ç”¨</title>
    <url>/article/f2ba51cc.html</url>
    <content><![CDATA[<h1 id="èµ·å› ">èµ·å› </h1>
<p>å› ä¸ºè¿™å­¦æœŸ <strong>Java Web</strong>
å¤§ä½œä¸šé¡¹ç›®é€‰çš„æ˜¯åœ¨çº¿æ–°é—»å‘å¸ƒç³»ç»Ÿï¼Œæœ‰åœ¨çº¿ç¼–è¾‘å™¨çš„éœ€æ±‚ï¼Œæ‰€ä»¥æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>æœ€å¼€å§‹é€‰çš„æ˜¯ <strong>Markdown</strong>
ç¼–è¾‘å™¨ï¼Œä½†åˆæƒ³äº†æƒ³ï¼ŒMarkdownå¥½æƒ³ä¸æ€ä¹ˆåˆé€‚ï¼Œå› ä¸ºå¯¹äºç¼–è¾‘æ–°é—»æ¥è¯´ï¼Œä¸»è¦å°±æ˜¯æ’ç‰ˆå’Œå›¾ç‰‡è¿™äº›ï¼Œè€Œä¸”å¯¹äºä¸æ“…é•¿Markdownè¯­æ³•çš„ç¼–è¾‘è€…æ›´æ˜¯ååˆ†å›°éš¾å»ç¼–å†™æ–°é—»ï¼Œä¸Markdownç›¸æ¯”ï¼Œå¯Œæ–‡æœ¬æ›´é€‚åˆè¿™ä¸ªéœ€æ±‚ï¼Œå®ƒå°±åƒä¸€ä¸ªåœ¨çº¿çš„Wordï¼Œåªéœ€è¦æ“ä½œä¸Šæ–¹çš„æŒ‰é’®å³å¯å®Œæˆç®€å•çš„æ’ç‰ˆå·¥ä½œã€‚</p>
<span id="more"></span>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>æ”¾å¼ƒäº† <a href="https://pandao.github.io/editor.md/">Editor.md</a>
çš„Markdownç¼–è¾‘å™¨ï¼Œè½¬å‘äº† <a href="https://ckeditor.com/">CKEditor</a>
çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¹‹åä¾¿æ˜¯æœç´¢å„ç§èµ„æ–™ï¼Œå†åŠ ä¸Šå®˜æ–¹æ–‡æ¡£ï¼Œå·²å®ŒæˆCKEditorçš„é…ç½®ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.jianshu.com/p/47e25447b771">CKEditor5åŸºæœ¬ä½¿ç”¨</a></p>
<p><a
href="https://blog.csdn.net/sinat_31986807/article/details/79667543">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨CKEditoré…ç½®åŠä½¿ç”¨</a></p>
<p><a
href="https://blog.csdn.net/wuhouchao/article/details/97645662">CKEditor
4.12.1å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„é…ç½®ä¸ä½¿ç”¨ï¼ˆè¯¦ç»†ç‰ˆï¼‰</a></p>
<p><a
href="https://itmyhome.blog.csdn.net/article/details/17264627">CKEditorå®ç°å›¾ç‰‡ä¸Šä¼ </a></p>
<p>CKEditorå·²å‡çº§åˆ°5.xä»¥ä¸Šçš„ç‰ˆæœ¬äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºç‰ˆæœ¬è¾ƒæ–°ï¼Œä½¿ç”¨å’Œå†™æ•™ç¨‹é…ç½®çš„ä¸å¤šï¼Œå¯å‚è€ƒçš„å¹¶ä¸å¤šï¼Œè€Œä¸”åœ¨é˜…è¯»å®˜æ–¹æ–‡æ¡£é‡åˆ°å¾ˆå¤šå›°éš¾ï¼Œå°±æˆ‘çš„æ„Ÿè§‰æ˜¯ï¼Œ5ä»¥ä¸Šç‰ˆæœ¬ç»™ä½¿ç”¨è€…è‡ªç”±åº¦å¾ˆå¤§ï¼Œå› æ­¤é…ç½®ä¹Ÿè¾ƒå¤æ‚å¤šæ ·ã€‚</p>
<p>æäº†å¾ˆä¹…ä¹‹åç»ˆäºæ”¾å¼ƒäº†ç‰ˆæœ¬5ï¼Œæœ€ç»ˆé€‰æ‹©çš„æ˜¯ç‰ˆæœ¬4.8ï¼Œä¸Šé¢å‚è€ƒé“¾æ¥å¯¹æˆ‘å¸®åŠ©æœ€å¤§çš„æ˜¯ç¬¬äºŒçš„å’Œç¬¬ä¸‰ä¸ªã€‚</p>
<blockquote>
<p>ä¸‹è½½å®˜æ–¹jsæ–‡ä»¶</p>
</blockquote>
<p>è¿›å…¥<a
href="https://ckeditor.com/ckeditor-4/download/">å®˜ç½‘</a>ç‚¹å‡»Release
notesé€‰æ‹©4.8.0ç‰ˆæœ¬ç‚¹å‡»Download.Zipä¸‹è½½</p>
<p>å¤‡æ³¨ï¼šç›®å‰æœ€æ–°ç‰ˆæœ¬4.9.0æœ‰bugï¼Œæ‰€ä»¥ç”¨4.8.0ç‰ˆæœ¬</p>
<figure>
<img data-src="https://pic.downk.cc/item/5fd1f1bc3ffa7d37b364f273.jpg"
alt="å®˜ç½‘" />
<figcaption aria-hidden="true">å®˜ç½‘</figcaption>
</figure>
<p>è®¿é—®å®˜ç½‘æœ‰ç‚¹æ…¢ï¼Œè€å¿ƒç­‰å¾…å°±å¥½</p>
<blockquote>
<p>å®˜æ–¹jsè§£å‹åå¤åˆ¶åˆ°é¡¹ç›®ä¸­ï¼Œå¼•å…¥CKEditorçš„jsæ–‡ä»¶</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/ckEditor/ckeditor.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¡µé¢ä¸­ä½¿ç”¨CKEditor</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨éœ€è¦ä½¿ç”¨ç¼–è¾‘å™¨çš„åœ°æ–¹æ’å…¥textareaæ ‡ç­¾ --&gt;</span></span><br><span class="line">å†…å®¹ï¼š<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å°†ç›¸åº”çš„æ§ä»¶æ›¿æ¢æˆç¼–è¾‘å™¨ä»£ç  è‹¥æƒ³è¦è‡ªå®šä¹‰é«˜åº¦åŠ å…¥&#123;height:&quot;xxx&quot;&#125; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable constant_">CKEDITOR</span>.<span class="title function_">replace</span>(<span class="string">&#x27;content&#x27;</span>, &#123;<span class="attr">height</span>: <span class="string">&quot;475px&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>edit<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/Static/js/lib/ckEditor/ckeditor.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable constant_">CKEDITOR</span>.<span class="title function_">replace</span>(<span class="string">&#x27;content&#x27;</span>, &#123;<span class="attr">height</span>: <span class="string">&quot;475px&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/addNews&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;sessionScope.user.user_id&#125;&quot;</span>/&gt;</span></span><br><span class="line">        æ ‡é¢˜ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        ç±»åˆ«ï¼š<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;category_id&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;requestScope.categorys&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;category&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;category.category_id&#125;&quot;</span>&gt;</span>$&#123;category.category_name&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        å†…å®¹ï¼š<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;state&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å‘å¸ƒ&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<figure>
<img data-src="https://pic.downk.cc/item/5fd2264c3ffa7d37b3a48e77.jpg"
alt="æ–°é—»ç¼–è¾‘" />
<figcaption aria-hidden="true">æ–°é—»ç¼–è¾‘</figcaption>
</figure>
<p>åå°å–å€¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;addNews&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addNews</span><span class="params">(News news)</span> &#123;......&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å›¾ç‰‡ä¸Šä¼ </p>
</blockquote>
<ul>
<li>æ¸…ç©ºå›¾åƒé¢„è§ˆæ¡†ä¸­çš„æ–‡å­—</li>
</ul>
<figure>
<img data-src="https://pic.downk.cc/item/5fd227693ffa7d37b3a5c082.jpg"
alt="åŸå§‹å›¾åƒä¸Šä¼ " />
<figcaption aria-hidden="true">åŸå§‹å›¾åƒä¸Šä¼ </figcaption>
</figure>
<p>æ‰¾åˆ°é¡¹ç›®ä¸‹çš„ckeditoræ–‡ä»¶å¤¹ä¸‹çš„config.jsä¸­æ·»åŠ ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">config.<span class="property">image_previewText</span>=<span class="string">&#x27; &#x27;</span>;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://pic.downk.cc/item/5fd228413ffa7d37b3a6df34.jpg"
alt="config.js" />
<figcaption aria-hidden="true">config.js</figcaption>
</figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure>
<img data-src="https://pic.downk.cc/item/5fd228e33ffa7d37b3a7a5ca.jpg"
alt="æ•ˆæœå›¾" />
<figcaption aria-hidden="true">æ•ˆæœå›¾</figcaption>
</figure>
<ul>
<li>é…ç½®ä¸Šä¼ å›¾ç‰‡è¯·æ±‚åœ°å€</li>
</ul>
<p>æ¥ç€ä¸Šé¢config.jsä¸­æ·»åŠ ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">config.<span class="property">filebrowserUploadUrl</span>=<span class="string">&quot;/xxx/uploadImage&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒçš„æ–‡ç« é‡Œéƒ½è¯´äº†ï¼Œè¿™é‡Œè¿˜éœ€è¦å›ä¼ ä¸€æ®µjsè„šæœ¬ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">out.println(<span class="string">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">callback</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;CKEditorFuncNum&quot;</span>);</span><br><span class="line">out.println(<span class="string">&quot;window.parent.CKEDITOR.tools.callFunction(&quot;</span> + callback+ <span class="string">&quot;,&#x27;&quot;</span> + imageContextPath + <span class="string">&quot;&#x27;,&#x27;&#x27;)&quot;</span>);</span><br><span class="line">out.println(<span class="string">&quot;&lt;/script&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æœ‰äº†è¿™æ®µä»£ç ï¼Œå›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œç”±ä½ è®¾ç½®çš„ä¸Šä¼ åœ°å€ +
filenameï¼ˆè‡ªå·±å¯è®¾å®šï¼‰ç›¸å¯¹åœ°å€ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå›¾ç‰‡ï¼Œç›´æ¥è½¬åˆ°â€œå›¾åƒâ€é¡µé¢ã€‚è¿™æ—¶å¯ä»¥å¯¹å›¾ç‰‡å¤§å°ç­‰è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure>
<img data-src="https://pic.downk.cc/item/5fd22b873ffa7d37b3aabdf9.jpg"
alt="ä¸Šä¼ é¢„è§ˆ" />
<figcaption aria-hidden="true">ä¸Šä¼ é¢„è§ˆ</figcaption>
</figure>
<p>ç‚¹å‡»ç¡®å®šåç¼–è¾‘å™¨å¦‚ä¸‹ï¼š</p>
<figure>
<img data-src="https://pic.downk.cc/item/5fd22c893ffa7d37b3abd2c2.jpg"
alt="ä¸Šä¼ æˆåŠŸå¹¶æ˜¾ç¤º" />
<figcaption aria-hidden="true">ä¸Šä¼ æˆåŠŸå¹¶æ˜¾ç¤º</figcaption>
</figure>
<ul>
<li>ä¸Šä¼ çš„å›¾ç‰‡é‡æ–°æ˜¾ç¤ºåˆ°é¡µé¢</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/updateNews&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;news_id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;requestScope.news.news_id&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;sessionScope.user.user_id&#125;&quot;</span>/&gt;</span></span><br><span class="line">    æ ‡é¢˜ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;requestScope.news.title&#125;&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    ç±»åˆ«ï¼š<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;category_id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;requestScope.categorys&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;category&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;category.category_id&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &lt;<span class="attr">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;category.category_id==requestScope.news.category_id&#125;&quot;</span>&gt;</span></span><br><span class="line">                    selected=&quot;true&quot;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span>&gt;$&#123;category.category_name&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    å†…å®¹ï¼š<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span>$&#123;news.content&#125;<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;state&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;news.state&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¿®æ”¹&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æˆ‘çš„åå°ä¸Šä¼ ä»£ç </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: ImageUploadUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: å›¾ç‰‡ä¸Šä¼ å·¥å…·ç±»ï¼ŒåŒ…æ‹¬ckeditoræ“ä½œ</span></span><br><span class="line"><span class="comment"> * created by Vinne.WU</span></span><br><span class="line"><span class="comment"> * 2019.7.17 14:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageUploadUtils</span> &#123;</span><br><span class="line">    <span class="comment">// å›¾ç‰‡ç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; fileTypes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        fileTypes.add(<span class="string">&quot;.jpg&quot;</span>);</span><br><span class="line">        fileTypes.add(<span class="string">&quot;.jpeg&quot;</span>);</span><br><span class="line">        fileTypes.add(<span class="string">&quot;.bmp&quot;</span>);</span><br><span class="line">        fileTypes.add(<span class="string">&quot;.gif&quot;</span>);</span><br><span class="line">        fileTypes.add(<span class="string">&quot;.png&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›¾ç‰‡ä¸Šä¼ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> DirectoryName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalStateException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Title</span> upload</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">upload</span><span class="params">(HttpServletRequest request, String DirectoryName)</span> <span class="keyword">throws</span> IllegalStateException,</span><br><span class="line">            IOException &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªé€šç”¨çš„å¤šéƒ¨åˆ†è§£æå™¨</span></span><br><span class="line">        <span class="type">CommonsMultipartResolver</span> <span class="variable">multipartResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>(request.getSession().getServletContext());</span><br><span class="line">        <span class="comment">// å›¾ç‰‡åç§°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ request æ˜¯å¦æœ‰æ–‡ä»¶ä¸Šä¼ ,å³å¤šéƒ¨åˆ†è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">if</span> (multipartResolver.isMultipart(request)) &#123;</span><br><span class="line">            <span class="comment">// è½¬æ¢æˆå¤šéƒ¨åˆ†request</span></span><br><span class="line">            <span class="type">MultipartHttpServletRequest</span> <span class="variable">multiRequest</span> <span class="operator">=</span> (MultipartHttpServletRequest) request;</span><br><span class="line">            <span class="comment">// å–å¾—requestä¸­çš„æ‰€æœ‰æ–‡ä»¶å</span></span><br><span class="line">            Iterator&lt;String&gt; iter = multiRequest.getFileNames();</span><br><span class="line">            <span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">                <span class="comment">// è®°å½•ä¸Šä¼ è¿‡ç¨‹èµ·å§‹æ—¶çš„æ—¶é—´ï¼Œç”¨æ¥è®¡ç®—ä¸Šä¼ æ—¶é—´</span></span><br><span class="line">                <span class="type">long</span> <span class="variable">pre</span> <span class="operator">=</span>System.currentTimeMillis();</span><br><span class="line">                <span class="comment">// å–å¾—ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">                <span class="type">MultipartFile</span> <span class="variable">file</span> <span class="operator">=</span> multiRequest.getFile(iter.next());</span><br><span class="line">                <span class="keyword">if</span> (file != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// å–å¾—å½“å‰ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶åç§°</span></span><br><span class="line">                    <span class="comment">//String myFileName = file.getOriginalFilename();</span></span><br><span class="line">                    String oFileName=file.getOriginalFilename();</span><br><span class="line">                    <span class="comment">//æ—¶é—´å‘½åå›¾ç‰‡</span></span><br><span class="line">                    String myFileName=Long.toString(pre)+oFileName.substring(oFileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">                    System.out.println(myFileName);</span><br><span class="line">                    <span class="comment">// å¦‚æœåç§°ä¸ä¸ºâ€œâ€,è¯´æ˜è¯¥æ–‡ä»¶å­˜åœ¨ï¼Œå¦åˆ™è¯´æ˜è¯¥æ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">                    <span class="keyword">if</span> (myFileName.trim() != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">                        <span class="comment">// è·å¾—å›¾ç‰‡çš„åŸå§‹åç§°</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">                        <span class="comment">// è·å¾—å›¾ç‰‡åç¼€åç§°,å¦‚æœåç¼€ä¸ä¸ºå›¾ç‰‡æ ¼å¼ï¼Œåˆ™ä¸ä¸Šä¼ </span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>)).toLowerCase();</span><br><span class="line">                        <span class="keyword">if</span> (!fileTypes.contains(suffix)) &#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// è·å¾—ä¸Šä¼ è·¯å¾„çš„ç»å¯¹è·¯å¾„åœ°å€(/upload)--&gt;</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> request.getSession().getServletContext().getRealPath(<span class="string">&quot;/&quot;</span> + DirectoryName);</span><br><span class="line"></span><br><span class="line">                        System.out.println(realPath);</span><br><span class="line">                        <span class="comment">//String realPath=request.getContextPath()+&quot;/Static/img&quot; ;</span></span><br><span class="line">                        <span class="comment">// å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥è·¯å¾„</span></span><br><span class="line">                        <span class="type">File</span> <span class="variable">realPathDirectory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(realPath);</span><br><span class="line">                        <span class="keyword">if</span> (realPathDirectory == <span class="literal">null</span> || !realPathDirectory.exists()) &#123;</span><br><span class="line">                            realPathDirectory.mkdirs();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// é‡å‘½åä¸Šä¼ åçš„æ–‡ä»¶å 111112323.jpg</span></span><br><span class="line">                        fileName = myFileName;</span><br><span class="line">                        <span class="comment">// å®šä¹‰ä¸Šä¼ è·¯å¾„ .../upload/111112323.jpg</span></span><br><span class="line">                        <span class="type">File</span> <span class="variable">uploadFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(realPathDirectory + <span class="string">&quot;/&quot;</span> + fileName);</span><br><span class="line">                        System.out.println(uploadFile);</span><br><span class="line">                        file.transferTo(uploadFile);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fileName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ckeditoræ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œå›è°ƒï¼Œä¼ å›å›¾ç‰‡è·¯å¾„ï¼Œå®ç°é¢„è§ˆæ•ˆæœã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> DirectoryName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Title</span> ckeditor</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">ckeditor</span><span class="params">(HttpServletRequest request, HttpServletResponse response, String DirectoryName)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> upload(request, DirectoryName);</span><br><span class="line">        <span class="comment">// ç»“åˆckeditoråŠŸèƒ½</span></span><br><span class="line">        <span class="comment">// imageContextPathä¸ºå›¾ç‰‡åœ¨æœåŠ¡å™¨åœ°å€ï¼Œå¦‚upload/123.jpg,éç»å¯¹è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">imageContextPath</span> <span class="operator">=</span> request.getContextPath() + <span class="string">&quot;/&quot;</span> + DirectoryName + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        System.out.println(request.getContextPath());</span><br><span class="line">        System.out.println(DirectoryName);</span><br><span class="line">        System.out.println(fileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ„å»ºjsonå›è°ƒæ¶ˆæ¯</span></span><br><span class="line">        PrintWriter out=response.getWriter();</span><br><span class="line">        <span class="comment">// è¿”å›&quot;å›¾åƒ&quot;é€‰é¡¹å¡å¹¶æ˜¾ç¤ºå›¾ç‰‡  request.getContextPath()ä¸ºwebé¡¹ç›®å</span></span><br><span class="line">        out.println(<span class="string">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">callback</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;CKEditorFuncNum&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;window.parent.CKEDITOR.tools.callFunction(&quot;</span> + callback</span><br><span class="line">                + <span class="string">&quot;,&#x27;&quot;</span> + imageContextPath + <span class="string">&quot;&#x27;,&#x27;&#x27;)&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/script&gt;&quot;</span>);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘çš„æœ€ç»ˆå¤§ä½œä¸šæ˜¯SSMæ¡†æ¶çš„æ‰€ä»¥åœ¨é…ç½®SpringMVCæ˜¯è¦åŠ å…¥ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®šä¹‰æ–‡ä»¶ä¸Šä¼ è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾å®šé»˜è®¤ç¼–ç  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾å®šæ–‡ä»¶ä¸Šä¼ çš„æœ€å¤§å€¼ä¸º10Mï¼Œå•ä½Bï¼Œ10*1024*1024 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10485760&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾å®šæ–‡ä»¶ä¸Šä¼ æ—¶å†™å…¥å†…å­˜çš„æœ€å¤§å€¼ï¼Œå¦‚æœå°äºè¿™ä¸ªå‚æ•°ä¸ä¼šç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œé»˜è®¤ä¸º10240 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ä¸Šä¼ å«ä¸­æ–‡å›¾ç‰‡å›æ˜¾ä¼šæœ‰é—®é¢˜ï¼Œjsä»£ç ä¼ ä¸­æ–‡ä¸è¡Œï¼Œæ‰€ä»¥å°†å°±æŠŠå›¾ç‰‡å‘½åä¸º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.currentTimeMillis();</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¹Ÿèƒ½é¿å…ä¸Šä¼ å›¾ç‰‡åç§°ä¸€æ ·æ—¶è¦†ç›–é—®é¢˜ï¼Œä¸è¿‡ä¸€å®šç¨‹åº¦ä¸Šä¼šå¯¼è‡´ç”¨æˆ·åŒä¸€æ—¶é—´ç‚¹ä¸Šä¼ å›¾ç‰‡è¦†ç›–ï¼Œä¸è¿‡è¿™ä¸ªå‡ ç‡æŒºå°çš„ï¼Œæ¯•ç«Ÿæ¯«ç§’å•ä½å•Šã€‚</p>
<h1 id="æœ€ååˆ†äº«java-è·å–htmlæ–‡æœ¬imgæ ‡ç­¾çš„srcåœ°å€">æœ€ååˆ†äº«â€œjava
è·å–HTMLæ–‡æœ¬IMGæ ‡ç­¾çš„srcåœ°å€â€</h1>
<p><a href="https://www.jianshu.com/p/5d57b5d9d768">å‚è€ƒ</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–HTMLæ–‡ä»¶é‡Œé¢çš„IMGæ ‡ç­¾çš„SRCåœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> htmlText å¸¦htmlæ ¼å¼çš„æ–‡æœ¬</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">GetHtmlImageSrcList</span><span class="params">(String htmlText)</span>   </span><br><span class="line">&#123;</span><br><span class="line">    List&lt;String&gt; imgSrc = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;src=\&quot;?(.*?)(\&quot;|&gt;|\\s+)&quot;</span>).matcher(htmlText);</span><br><span class="line">    <span class="keyword">while</span>(m.find())</span><br><span class="line">    &#123;    </span><br><span class="line">        imgSrc.add(m.group(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> imgSrc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å»æ‰æ‰€æœ‰çš„HTML,è·å–å…¶ä¸­çš„æ–‡æœ¬ä¿¡æ¯ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> htmlText</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">GetHtmlText</span><span class="params">(String htmlText)</span>   </span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">regEx_html</span> <span class="operator">=</span> <span class="string">&quot;&lt;[^&gt;]+&gt;&quot;</span>; <span class="comment">// å®šä¹‰HTMLæ ‡ç­¾çš„æ­£åˆ™è¡¨è¾¾å¼ </span></span><br><span class="line">    <span class="type">Pattern</span> <span class="variable">p_html</span> <span class="operator">=</span> Pattern.compile(regEx_html, Pattern.CASE_INSENSITIVE);  </span><br><span class="line">    <span class="type">Matcher</span> <span class="variable">m_html</span> <span class="operator">=</span> p_html.matcher(htmlText);</span><br><span class="line">    htmlText = m_html.replaceAll(<span class="string">&quot;&quot;</span>); <span class="comment">// è¿‡æ»¤HTMLæ ‡ç­¾</span></span><br><span class="line">    <span class="keyword">return</span> htmlText;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿™æ¬¡åˆ†äº«ç»“æŸ">è¿™æ¬¡åˆ†äº«ç»“æŸ</h1>
<p>å†æ¬¡å¼ºè°ƒè¿™æ˜¯ä¸ªäººå­¦ä¹ è®°å½•ï¼Œè°ˆä¸ä¸Šæ•™ç¨‹</p>
]]></content>
      <tags>
        <tag>JavaWeb</tag>
      </tags>
  </entry>
  <entry>
    <title>å°ç±³10å‘¨å¹´</title>
    <url>/article/6433d656.html</url>
    <content><![CDATA[<h1
id="section"><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/ä¸€å¾€æ— å‰.jpg" width = "500" height = "" alt="ä¸€å¾€æ— å‰"/></h1>
<p>åœ¨é•¿æ—¶é—´çš„é¢„çƒ­åï¼Œç»ˆäºåœ¨8æœˆ11æ—¥ï¼Œé›·å†›å¸¦æ¥äº†å®ƒçš„10å‘¨å¹´æ¼”è®²å’Œå‘å¸ƒä¼šã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªéä¸“ä¸šäººå£«ï¼Œæƒ³åœ¨è¿™é‡Œè°ˆä¸€è°ˆæˆ‘çš„æƒ³æ³•ï¼Œæœ¬ç¯‡æ–‡ç« ä»…ä»£è¡¨ä¸ªäººè§‚ç‚¹ï¼Œå¦‚æœ‰è¯´æ³•ä¸å½“ä¹‹å¤„ï¼Œè¿˜æœ›è§è°…ã€‚</p>
<span id="more"></span>
<h1 id="å‘¨å¹´æ–°å“">10å‘¨å¹´æ–°å“</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/æ–°å“.jpg"
alt="æ–°å“" />
<figcaption aria-hidden="true">æ–°å“</figcaption>
</figure>
<p>ä½œä¸ºä¸€éä¸“ä¸šçš„å­¦ç”Ÿå…šï¼Œä¸æƒ³æ¬ç”¨å®˜æ–¹æˆ–å…¶ä»–äººå…³äºæ–°å“çš„è¯¦ç»†æµ‹è¯„ä¸åˆ†æï¼Œå½“ç„¶æˆ‘çœ‹å¥½å‡ ä¸ªå…³äºè¿™ä¸ª10å‘¨å¹´çš„è§†é¢‘äº†ï¼Œæˆ‘çš„æ¨èæœ‰ä¸‹ï¼š</p>
<p><a href="https://www.bilibili.com/video/BV1g54y1U7W4">ä¸¤åˆ†é’Ÿå‘å¸ƒä¼š |
é›·å†›å°ç±³åå‘¨å¹´æ¼”è®²ï¼Œå›é¡¾åå¹´å‘å±•å†ç¨‹ï¼Œå±•æœ›æœªæ¥ï¼›â€œè¶…å¤§æ¯â€è‡³å°Šçºªå¿µç‰ˆäº§å“äº®ç›¸ï¼Œ120Wå¿«å……ã€é€æ˜ç”µè§†ä»¥åŠ1999ä¸å¿˜åˆå¿ƒ</a></p>
<p><a
href="https://www.bilibili.com/video/BV1yA411Y76c">ã€è¾›ä½“éªŒã€‘é›·å†›åå‘¨å¹´å·…å³°ä¹‹ä½œï¼Œå°ç±³10è‡³å°Šçºªå¿µç‰ˆä¸Šæ‰‹</a></p>
<p><a
href="https://www.bilibili.com/video/BV1gZ4y1K7ab">ã€äº«æ‹†ã€‘å°ç±³10è‡³å°Šçºªå¿µç‰ˆæ‹†è§£ï¼šæ‹¾çº§è€Œä¸Šï¼Œä¸€å¾€æ— å‰</a></p>
<p><a
href="https://www.bilibili.com/video/BV12D4y1U7FA">ã€Œå°ç™½æµ‹è¯„ã€â€œè¶…çº§æ°´æ¡¶â€
å…³äºå°ç±³10 Ultra è‡³å°Šçºªå¿µç‰ˆçš„ä¸€åˆ‡ï¼</a></p>
<p><a
href="https://www.bilibili.com/video/BV18k4y1174d">ã€Œå°ç™½æµ‹è¯„ã€120W+55Wæ— çº¿+20Wè¿½è¸ªæ— çº¿å……
å°ç±³å……ç”µæ–°å“ä½“éªŒ</a></p>
<p>ç­‰ç­‰è¿˜æœ‰å¾ˆå¤š</p>
<h1 id="æˆ‘çš„ä¸€äº›æƒ³æ³•">æˆ‘çš„ä¸€äº›æƒ³æ³•</h1>
<p>å‰é¢çš„éƒ½æ˜¯é“ºå«ï¼Œæˆ‘ä¸æ˜¯ä¸“ä¸šçš„æµ‹è¯„å¸ˆå’Œåˆ†æå¸ˆï¼Œåªæ˜¯æƒ³è°ˆä¸€è°ˆæˆ‘çš„ä¸€äº›æƒ³æ³•ã€‚</p>
<h1 id="æˆ‘çš„æ‰‹æœº">æˆ‘çš„æ‰‹æœº</h1>
<p>ç¬¬ä¸€æ¬¡å¬è¯´å°ç±³æ˜¯åœ¨åˆä¸­å¤§æ¦‚æ˜¯2014-2015å·¦å³ï¼Œå¬åŒå­¦è¯´è¿™ä¸ªç‰Œå­çš„æ‰‹æœºå¾ˆå‰å®³ï¼Œæ€§ä»·æ¯”å¾ˆé«˜ï¼Œè¿™æ˜¯å°ç±³çš„åˆå°è±¡ã€‚åˆä¸­æ—¶å€™å‡ ä¹æ²¡æ€ä¹ˆæ¥è§¦æ™ºèƒ½æ‰‹æœºï¼Œå‡é«˜ä¸­åï¼Œç»ˆäºæ‹¥æœ‰äº†ç¬¬ä¸€éƒ¨æ‰‹æœºï¼Œæ˜¯ä¸€éƒ¨700å…ƒå·¦å³çš„Vivoï¼Œé«˜ä¸­å­¦ä¹ å‹åŠ›å¤§ï¼Œå­¦æ ¡ç®¡çš„è¿˜ä¸¥ï¼Œç©æ‰‹æœºçš„æœºä¼šå¾ˆå°‘ã€‚ç›´åˆ°ä¸Šå¤§å­¦ï¼Œæ—§çš„æ‰‹æœºçœŸçš„é¡¶ä¸ä½äº†ï¼Œå¿…é¡»è¦æ¢äº†ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨ç”¨çš„ä¸€éƒ¨ä¸­ç«¯çš„å°ç±³6xæ‰‹æœºã€‚</p>
<h1 id="æƒ³æ³•">æƒ³æ³•</h1>
<p>åœ¨é‚£ä¹‹åï¼Œå°±å¯¹æ‰‹æœºå’Œç›¸å…³çš„ç§‘æŠ€äº§å“å¾ˆæ„Ÿå…´è¶£ï¼Œå…³æ³¨äº†å¾ˆå¤šç§‘æŠ€åšä¸»ï¼Œç»å¸¸çœ‹ç›¸å…³æµ‹è¯„è§†é¢‘ï¼Œè¿˜æœ‰å¤§å‚çš„å‘å¸ƒä¼šï¼Œå½“ç„¶è¿˜æœ‰ç›¸å…³åˆ†æçš„æ–‡ç« ï¼Œå¾ˆæœ‰è¶£ã€‚</p>
<p>å…¶å®åœ¨å»å¹´å°ç±³9å‘å¸ƒåï¼Œæˆ‘å°±æƒ³å†™ä¸ä¹‹æœ‰å…³çš„æ–‡ç« äº†ï¼Œä½†ä¸€ç›´æ²¡æœ‰è¡ŒåŠ¨ï¼Œç›´åˆ°è¿™æ¬¡10å‘¨å¹´çš„æœºä¼šï¼Œç»ˆäºä¸‹å†³å¿ƒå†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>è®°å¾—å½“æ—¶åœ¨çœ‹å°ç±³9çš„å‘å¸ƒä¼šï¼ˆæ‰‹æœºä¸Šçœ‹çš„ï¼‰ï¼Œå› ä¸ºå½“æ—¶çº¢ç±³åˆšåˆšä»å°ç±³ç‹¬ç«‹å‡ºæ¥ï¼Œå°ç±³çš„è§„åˆ’å°±æ˜¯ç±»ä¼¼äºåä¸º-è£è€€ï¼Œæƒ³è¦è®©å°ç±³å»å†²å‡»é«˜ç«¯å¸‚åœºï¼Œæè‡´æ€§ä»·æ¯”äº¤ç»™çº¢ç±³æ¥åšã€‚è¿‡å»äº†è§£å°ç±³çº¢ç±³çš„äººï¼Œéƒ½çŸ¥é“çº¢ç±³ä¸€ç›´å®šä½äºä¸­ä½ç«¯å¸‚åœºï¼Œå°ç±³çš„åº•å°±æ˜¯çº¢ç±³çš„é¡¶ï¼Œçº¢ç±³ä¸€ç›´æœ‰æ‰€é™åˆ¶æ²¡ä»€ä¹ˆæ‹¿å‡ºæ‰‹çš„å‡ºè‰²äº§å“ã€‚æ”¹é©ä¹‹åï¼Œå°ç±³è·¨å¼€äº†è¿ˆå‘é«˜ç«¯å¸‚åœºçš„ç¬¬ä¸€æ­¥â€”â€”å°ç±³9ï¼Œè¯´å®è¯è¿™ä¸€æ­¥æ˜¯å¾ˆéš¾çš„ï¼Œå› ä¸ºå°ç±³ç»™äººå›ºæœ‰å°è±¡æ˜¯æ€§ä»·æ¯”ï¼Œè¦åšé«˜ç«¯äº§å“ï¼Œå¿…é¡»è¦å°†æœ€ä¼˜ç§€çš„ç§‘æŠ€å †å åœ¨æ‰‹æŒå¤§å°çš„æ‰‹æœºé‡Œï¼Œæˆæœ¬å¾ˆè‡ªç„¶çš„ä¸Šå‡ï¼Œè€Œé‚£äº›åªå…³æ³¨ä»·æ ¼è€Œä¸äº†è§£æ‰‹æœºæœ¬èº«çš„äººéƒ½ä¼šé‚£â€œå°ç±³åˆå¿ƒå˜äº†â€æ¥â€œç»‘æ¶â€å°ç±³ã€‚è®°å¾—å½“æ—¶æˆ˜æ–—å¤©ä½¿ï¼ˆå°ç±³9çš„å†…éƒ¨ä»£å·ï¼‰é¢„çƒ­æ—¶ï¼Œé›·å†›ä¸æ–­å‘å¾®åšæŠ•ç¥¨è¯¢é—®ç½‘å‹å…³äºæ–°äº§å“çš„æ„è§ï¼Œç”Ÿæ€•ç±³ç²‰ä»¬å¤±æœ›ä¸å–œæ¬¢ï¼Œç»ˆäºå‘å¸ƒäº†ï¼Œä½†ä»·æ ¼å®šåœ¨äº†2999ï¿¥ï¼ˆåŸæœ¬æ˜¯3299ï¿¥ï¼‰ï¼Œç»ˆäºæ˜¯å‹åœ¨äº†3000ï¿¥ä»¥å†…ï¼Œå°½ç®¡è¿™æ ·ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šå”å˜˜å£°ã€‚</p>
<p>ä¸€äº›äººæ„Ÿå—æˆ‘ä¹Ÿèƒ½ä½“ä¼šåˆ°ä¸€äº›ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆæ”¯æŒå°ç±³è¿™æ ·åšçš„ï¼Œä¸è¦è®©ä»·æ ¼é™åˆ¶å¥½äº§å“ã€‚æ¥ä¸‹æ¥ä¸€å¹´å°ç±³æ”¶è´­ç¾å›¾ï¼Œæ¨å‡ºCCç³»åˆ—å’Œä¸€ä¸ªç¾å›¾å®šåˆ¶ç‰ˆï¼Œè¿™ä¸€æ¬¾å…¶å®æ›´åƒæ˜¯OVå®¶çš„äº§å“ï¼Œä¸­ç«¯å¤„ç†å™¨+ç¾å›¾ç®—æ³•ä¹°åˆ°æ¥è¿‘3000ï¼Œå¾ˆå¤šäººåˆåä¸ä½äº†ã€‚ä½œä¸ºä¸€ä¸ªè®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿï¼ŒçœŸå¿ƒè§‰å¾—ç ”ç©¶å‡ºä¸€å¥—ç²¾å¦™ç®—æ³•å¾ˆéš¾ï¼Œä»·é’±ä¸Šå‡ä¹Ÿæ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œå¾ˆå¤šäººä¸ç†è§£ä¹Ÿæ­£å¸¸ã€‚ä¸‹åŠå¹´éœ‡æƒŠä¸šç•Œçš„å°ç±³MIX
Alphaå‘å¸ƒäº†ï¼Œä»·å€¼19999ï¿¥ï¼Œä½†å¹¶æ²¡æœ‰é‡äº§å‘å”®ã€‚æˆ‘è§‰å¾—è¿™ä¸ªæ˜¯å°ç±³çœŸæ­£ä¸‹å†³å¿ƒå†²å‡»é«˜ç«¯å¸‚åœºä¿¡å·ã€‚å½“æ—¶æ­£æ˜¯åä¸ºå’Œä¸‰æ˜ŸæŠ˜å æ‰‹æœºç«çƒ­çš„æ—¶å€™ï¼Œå°ç±³æ‹¿å‡ºè¿™æ ·çš„äº§å“å¾ˆæœ‰æ„æ€ï¼ˆå¥½åƒæ˜¯åœ¨ç¤ºå¨ï¼‰ã€‚</p>
<h1 id="å¹´">10å¹´</h1>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/RUOK.jpg" width = "250" height = "" alt="ä¸€å¾€æ— å‰"/></p>
<p><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/10å‘¨å¹´.jpg" width = "250" height = "" alt="ä¸€å¾€æ— å‰"/></p>
<p>10å¹´äº†ï¼Œå°ç±³ä»ä¸€ä¸ªåå‡ äººçš„å›¢é˜Ÿå˜æˆä¸€å®¶ä¸–ç•Œ500å¼ºçš„ä¼ä¸šï¼Œå¾ˆå‰å®³çš„å‘€ï¼</p>
<p>é›·å†›ä¹Ÿæ˜¯ä¸€ä¸ªç½‘çº¢äº†ï¼Œå°¤å…¶æ˜¯é‚£å¥R U OK ï¼Ÿ å“ˆå“ˆå“ˆ</p>
<p>å½“ç„¶é›·å†›ä¸å°ç±³é¢ä¸´çš„æœºé‡ä¸æŒ‘æˆ˜è¿˜æœ‰å¾ˆå¤šã€‚</p>
<h1 id="å›æƒ³å°ç±³å½“å¹´çš„é‚£äº›å£å·">å›æƒ³å°ç±³å½“å¹´çš„é‚£äº›å£å·ï¼š</h1>
<blockquote>
<p>æ¢ç´¢é»‘ç§‘æŠ€ï¼Œå°ç±³ä¸ºå‘çƒ§è€Œç”Ÿ</p>
</blockquote>
<blockquote>
<p>è®©æ¯ä¸ªäººéƒ½èƒ½äº«å—ç§‘æŠ€çš„ä¹è¶£</p>
</blockquote>
<blockquote>
<p>åšç±³ç²‰å¿ƒä¸­æœ€é…·çš„å…¬å¸</p>
</blockquote>
<blockquote>
<p>æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ</p>
</blockquote>
<blockquote>
<p>å§‹ç»ˆåšæŒåšâ€œæ„ŸåŠ¨äººå¿ƒï¼Œä»·æ ¼åšé“â€çš„å¥½äº§å“</p>
</blockquote>
<blockquote>
<p>ä¼˜ç§€çš„å…¬å¸èµšå–åˆ©æ¶¦ï¼Œä¼Ÿå¤§çš„å…¬å¸èµ¢å¾—äººå¿ƒ</p>
</blockquote>
<blockquote>
<p>ç”¨æœ›è¿œé•œçœ‹åˆ›æ–°ï¼Œç”¨æ˜¾å¾®é•œçœ‹å“è´¨</p>
</blockquote>
<blockquote>
<p>åšé“çš„äººè¿æ°”ä¸ä¼šå¤ªå·®</p>
</blockquote>
<p>å°ç±³10å‘¨å¹´å¾ˆå¤šå…ƒç´ éƒ½æ˜¯åœ¨è‡´æ•¬è¿‡å»ï¼Œå°ç±³10è‡³å°Šçºªå¿µç‰ˆä¸­ï¼Œè‡´æ•¬å°ç±³6äº®é“¶ç‰ˆï¼Œè‡´æ•¬ç»å…¸é¦–æ¬¡é‡‡ç”¨é™¶ç“·æœºèº«ï¼Œè‡´æ•¬å°ç±³8é€æ˜æ¢ç´¢ç‰ˆã€‚è¿˜æœ‰é‚£ä¸ªRedmi
K30è‡³å°Šçºªå¿µç‰ˆæœ€ç»å…¸çš„1999ï¿¥å’Œç»å…¸çš„åŒ…è£…ï¼Œç®€ç›´è®©äººç–¯ç‹‚ã€‚æœ€åè¿˜è¦è°ˆçš„ä¸€ç‚¹æ˜¯ï¼Œå°ç±³ç”Ÿæ€ï¼Œå°ç±³åº”è¯¥æ˜¯ä¼—å¤šäº’è”ç½‘å…¬å¸ï¼Œåœ¨è¿™æ–¹é¢ä¸‹æœ€å¤§åŠŸå¤«çš„å…¬å¸äº†ã€‚ç”Ÿæ´»ä¸­å„ç§æ™ºèƒ½è®¾å¤‡å’Œå¸¸ç”¨å¿…éœ€å“å°ç±³éƒ½åœ¨åšï¼Œè€Œä¸”è¿˜å¾ˆä¼˜ç§€ï¼ŒçœŸçš„æ˜¯â€œè®©æ¯ä¸ªäººéƒ½äº«å—ç§‘æŠ€çš„ä¹è¶£â€ï¼Œå›çœ¼çœ‹ç°åœ¨ï¼Œå“ªå®¶å¤§å‚è¿˜åœ¨åšç™¾å…ƒæœºï¼Œå¾ˆå°‘äº†ï¼Œè¦ä¹ˆå°±æ˜¯æ²¡æœ‰ä»€ä¹ˆæ€§ä»·æ¯”çš„äº§å“ï¼Œå°ç±³å»æ²¡æ”¾å¼ƒè¿™ä¸ªå¸‚åœºï¼Œè™½ç„¶åˆ©æ¶¦ä¸é«˜è€Œä¸”è€—æ—¶è´¹å¿ƒæ€ï¼Œä½†è¿˜åœ¨åšï¼ˆå¦‚ï¼šRedmi
9Aï¼‰ï¼Œå¾ˆè®©äººæ„ŸåŠ¨çš„ã€‚</p>
<h1 id="ä¸€å¾€æ— å‰">ä¸€å¾€æ— å‰</h1>
<p>è¿‘å‡ å¹´ç¾å›½å¯¹ä¸­å›½æ‰“å‹è¶Šæ¥è¶Šè¿‡åˆ†ï¼Œå¾ˆå¥‡æ€ªï¼Œä¸–ç•Œè¦ç»æµå…¨çƒåŒ–ï¼Œç¾å›½è¦é€†å…¨çƒåŒ–ï¼Œè¿˜ä¸æ˜¯æ€æ•Œ1000è‡ªæŸ800ã€‚</p>
<p>ä¸­å›½ä¸€å®šè¡Œï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€æ”¾çš„æœåŠ¡ä¸€å®šè¦å°å¿ƒ</title>
    <url>/article/b58761d9.html</url>
    <content><![CDATA[<h1 id="åˆææˆ‘">åˆææˆ‘ï¼Ÿ</h1>
<p>ç»§<a
href="https://wnhyang.github.io/article/57d7718e.html">æˆ‘çš„æœåŠ¡å™¨ç«Ÿç„¶è¢«æ”»å‡»äº†ï¼</a>ä¹‹åï¼Œæˆ‘çš„æœåŠ¡å™¨åˆè¢«æ”»å‡»äº†ï¼Œä¸Šæ¬¡æ˜¯è§£å†³äº†è¿œç¨‹ç”¨æˆ·ç™»å½•ï¼Œå®šæ—¶æ‰§è¡Œæ¶æ„è„šæœ¬çš„é—®é¢˜ã€‚</p>
<p>ä½†è¿™æ¬¡åˆå¯¹æˆ‘çš„<code>MySQL</code>ä¸‹æ‰‹äº†ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªåº“ä¸­ç•™ä¸‹äº†ä¸€å¼ <code>README</code>çš„è¡¨ï¼Œè¡¨é‡Œåªæœ‰ä¸€æ¡æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æ‚¨çš„æ•°æ®åº“å·²åˆ é™¤ã€‚æ‚¨å¿…é¡»æ”¯ä»˜ 0.0125 æ¯”ç‰¹å¸ (BTC)
æ‰èƒ½å–å›å®ƒä»¬ã€‚æˆ‘æ‹¥æœ‰çš„å¤‡ä»½ï¼šokay, wnh, xxl_jobã€‚é€šè¿‡ chin71303@proton.me
ä¸æˆ‘è”ç³» åªæœ‰ä¸ä»˜æ¬¾ç›¸å…³çš„é‚®ä»¶æ‰ä¼šå¾—åˆ°ç­”å¤ï¼</p>
<p>bc1q3l9q2n840y682vvy7xxs7cptnthag3z3xmfpgy</p>
<p>chin71303@proton.me</p>
</blockquote>
<p>çœŸæ˜¯æ€äººä¸”è¯›å¿ƒå•Šï¼</p>
<p>è·Ÿä¸Šæ¬¡ä¸€æ ·ï¼Œå‘ç”Ÿäº†è¿™ä»¶äº‹åæˆ‘ç«‹åˆ»é©¬ä¸Šå°±çŸ¥é“è¢«æ”»å‡»çš„åŸå› äº†ï¼Œè¿˜æ˜¯æˆ‘ä¹ æƒ¯äº†è‡ªå·±å¼€å‘ï¼Œéšæ€§çš„åŸå› ï¼Œå¹³å¸¸æˆ‘è‡ªå·±ç©å°±ä¸å¤ªæ³¨æ„å¼€æ”¾å‡ºæ¥çš„å®‰å…¨æ€§ï¼Œå› ä¸ºé‚£æ—¶å€™ä»…ä»…æ˜¯åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç©ï¼Œä¸ç®¡æ˜¯å±€åŸŸç½‘è¿˜æ˜¯é˜²ç«å¢™éƒ½ä¼šæœ‰ä¿éšœï¼Œè€Œä¸”ä¸€èˆ¬ä¸ä¼šå…¨å¤©24å°æ—¶è¿è¡Œï¼Œä½†æ˜¯åˆ°æœåŠ¡å™¨ä¸Šå°±ä¸ä¸€æ ·äº†ï¼Œåœ¨å®‰å…¨è§„åˆ™ä¸Šè®¾ç½®çš„æ¯”è¾ƒéšæ„ï¼Œéœ€è¦çš„ç«¯å£éƒ½ç›´æ¥å¼€æ”¾ï¼Œä¸­é—´ä»¶è´¦å·æƒé™ä¹Ÿæ˜¯éšæ„è®¾ç½®çš„ï¼Œç‰¹åˆ«å®¹æ˜“è¢«ä»¥æ’åº“ç­‰æ–¹å¼ç ´è§£ï¼Œè¿™æ¬¡äº‹ä»¶ä¹Ÿæ­£æ˜¯å®ƒå¸¦æ¥çš„åæœã€‚</p>
<span id="more"></span>
<h1 id="é•¿ä¸ªè®°æ€§å§">é•¿ä¸ªè®°æ€§å§</h1>
<p>åƒä¸€å ‘ï¼Œé•¿ä¸€æ™ºã€‚</p>
<p>å·²ç»å‘ç”Ÿäº†ä¸€æ¬¡äº†ï¼Œæˆ‘æ²¡æœ‰å› æ­¤åšå¥½é˜²æŠ¤æªæ–½ï¼Œåè€Œåœ¨åŒä¸€ä¸ªåœ°æ–¹è·Œå€’äº†ä¸¤æ¬¡ï¼ŒçœŸæœ‰æˆ‘çš„ã€‚</p>
<p>ä¸€è€Œå†å†è€Œä¸‰ï¼Œä¹Ÿå°±è¿˜å¥½ï¼Œæˆ‘çš„æœåŠ¡å™¨åªæ˜¯æˆ‘è‡ªå·±éšæ„ç©çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆé‡è¦çš„æ•°æ®ï¼Œä¸¢äº†å®Œå…¨ä¸æ‰“ç´§ã€‚</p>
<p>è¿™æ¬¡ä¹‹åæˆ‘çœŸçš„è¦é‡è§†å¼€æ”¾å‡ºæ¥æœåŠ¡çš„å®‰å…¨æ€§é—®é¢˜äº†ï¼Œä¸èƒ½é‚£ä¹ˆéšæ„äº†ã€‚</p>
<p>ä»€ä¹ˆé‡è¦ç«¯å£çš„å¼€æ”¾ï¼Œç”¨æˆ·å/å¯†ç å¼±å£ä»¤ï¼Œæƒé™åˆ†é…ç­‰ç­‰ï¼Œéƒ½è¦ç€é‡æ³¨æ„ä¸€ä¸‹äº†ï¼</p>
<h1 id="æ¢å¤å§">æ¢å¤å§</h1>
<p>è¿˜èƒ½æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>è‡ªå·±æ¥æ¢å¤å§ï¼Œè¿™æ¬¡å½±å“çš„ä»…ä»…æ˜¯<code>MySQL</code>æ•°æ®ï¼Œä¹Ÿè¿˜å¥½ã€‚</p>
<h2 id="mysqlè¿ä¸ä¸Šäº†">MySQLè¿ä¸ä¸Šäº†</h2>
<p>å¾ˆå¥‡æ€ªï¼Œæˆ‘ç”¨<code>navicat</code>è¿ä¸ä¸Šæˆ‘çš„<code>MySQL</code>æœåŠ¡äº†ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>GHost '218.108.48.135' is not allowed to connect to this MySQL
serverConnection closed by foreign host.</p>
</blockquote>
<p>æŸ¥<a
href="https://blog.csdn.net/u014780310/article/details/112175133">èµ„æ–™</a>æ‰çŸ¥é“åŸå› ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ“ä½œæ¢å¤</p>
<p>1ã€åœ¨<code>MySQL</code>æœåŠ¡å™¨ä¸Šç›´æ¥è¿æ¥<code>MySQL</code></p>
<blockquote>
<p>mysql -u root -p</p>
<p>è¾“å…¥rootå¯†ç </p>
</blockquote>
<p>2ã€ç¡®è®¤<code>host</code>å¹¶ä¿®æ”¹</p>
<blockquote>
<p>use mysql;</p>
<p>select host from user where user = 'root';</p>
</blockquote>
<p>å¦‚æœæŸ¥è¯¢ç»“æœåªæœ‰ä¸€ä¸ª<code>localhost</code>,æ‰§è¡Œ<code>update user set host = â€˜%â€™ where user ='rootâ€™</code>å°†<code>host</code>è®¾ç½®ä¸ºé€šé…ç¬¦<code>%</code>ã€‚<code>host</code>è®¾ç½®äº†<code>â€œ%â€</code>åä¾¿å¯ä»¥å…è®¸è¿œç¨‹è®¿é—®ã€‚</p>
<p>3ã€æ›´æ–°</p>
<blockquote>
<p>flush privileges;</p>
</blockquote>
<h2 id="æ¢å¤æ•°æ®">æ¢å¤æ•°æ®</h2>
<p>è¯´äº†ä¸æ˜¯ç®¡å…³é”®æ•°æ®äº†ï¼Œæ‰€ä»¥æ¢å¤èµ·æ¥å¾ˆç®€å•ï¼Œ<code>xxl-job</code>ç›´æ¥æ‰§è¡Œå®˜æ–¹<code>sql</code>è„šæœ¬å³å¯ï¼Œå¦ä¸€ä¸ªé¡¹ç›®ä¹Ÿæœ‰å¤‡ä»½<code>sql</code>ï¼Œæ•°æ®éƒ½æ˜¯é€šè¿‡<code>apifox</code>é€ çš„ï¼Œé—®é¢˜ä¹Ÿä¸å¤§ã€‚</p>
<p>æ¯”è¾ƒä¼¤å¿ƒçš„æ˜¯ï¼Œæˆ‘è¿™æ®µæ—¶é—´åšçš„ä¸€ä¸ªç”¨æˆ·-è§’è‰²-èµ„æºçš„è¡¨ç»“æ„ä¸¢äº†ï¼Œè™½ç„¶é‡æ–°åšä¹Ÿä¸éº»çƒ¦ï¼Œä½†è¿˜æ˜¯å¥½çƒ¦ã€‚</p>
<h2 id="ä¿®æ”¹é…ç½®é‡æ–°éƒ¨ç½²">ä¿®æ”¹é…ç½®é‡æ–°éƒ¨ç½²</h2>
<p>ä¸ºäº†é˜²æ­¢å†æ¬¡æ”¾ç”ŸåŒç±»äº‹ä»¶ï¼Œæ­£ç¡®çš„åšæ³•åº”å½“æ˜¯åˆ›å»ºå‡ºä¸€äº›ä½æƒé™çš„ç”¨æˆ·åªç”¨æ¥æ“ä½œä¸šåŠ¡æ•°æ®åº“ï¼Œè€Œä¸æ˜¯éƒ½ä½¿ç”¨<code>root</code>ç”¨æˆ·ï¼Œè¿˜æœ‰è¦å®šæœŸ<a
href="https://blog.csdn.net/qq_40757240/article/details/118068317">ä¿®æ”¹ç”¨æˆ·å¯†ç </a>ã€<a
href="https://blog.csdn.net/huxinguang_ios/article/details/80887175">åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ</a>ã€‚</p>
<blockquote>
<p>mysql&gt; use mysql; mysql&gt; update user set
password=password(â€˜123â€™) where user=â€˜rootâ€™ and host=â€˜localhostâ€™;
mysql&gt; flush privileges;</p>
</blockquote>
<p>å¦å¤–,è²Œä¼¼<code>nacos</code>ä¿®æ”¹æ•°æ®åº“é…ç½®æ˜¯ä¸èƒ½çœå»é‡å¯æœåŠ¡çš„æ­¥éª¤ã€‚</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>å·¥å…·ä¸ä¼šä»£æ›¿äººï¼Œè¢«ä»£æ›¿çš„æ˜¯ä¸ä¼šä½¿ç”¨å·¥å…·çš„äºº</title>
    <url>/article/142b0ddc.html</url>
    <content><![CDATA[<h1 id="chatgtp">ChatGTP</h1>
<p>æœ€è¿‘å‡ ä¸ªæœˆï¼Œå…³æ³¨ç§‘æŠ€åŒºçš„ç›¸ä¿¡éƒ½å·²ç»è¢«<code>ChatGPT</code>ç»™åˆ·å±äº†ï¼Œä¸‹é¢æˆ‘ç›´æ¥ä»¥æé—®<code>ChatGPT</code>â€œå†™200å­—å…³äºæœ€è¿‘ChatGPTçš„æ–‡æ¡ˆâ€çš„å›ç­”å¼€å§‹å§ã€‚</p>
<p><code>ChatGPT</code>æ˜¯ç”±<code>OpenAI</code>å›¢é˜Ÿå¼€å‘çš„åŸºäºè‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯çš„èŠå¤©æœºå™¨äººã€‚å®ƒé‡‡ç”¨äº†æœ€æ–°çš„ç”Ÿæˆå¼é¢„è®­ç»ƒæŠ€æœ¯<code>GPTï¼ˆGenerative Pre-trained Transformerï¼‰</code>ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–å’Œæ”¹è¿›ï¼Œå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæ™ºèƒ½ã€æµç•…ã€è‡ªç„¶çš„äº¤äº’ã€‚<code>ChatGPT</code>ä¸ä»…å¯ä»¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥æä¾›æœ‰è¶£çš„è°ˆè¯ã€å¨±ä¹ã€æ¨èç­‰åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ–‡å­—æˆ–è¯­éŸ³ä¸å®ƒè¿›è¡Œäº¤äº’ã€‚</p>
<p>è¿‘æœŸï¼Œ<code>OpenAI</code>å›¢é˜Ÿå…¬å¸ƒäº†<code>ChatGPT-3.5</code>ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬çš„ChatGPTåœ¨è¯­è¨€è¡¨è¾¾èƒ½åŠ›ä¸Šå¾—åˆ°äº†æå¤§çš„æå‡å’Œæ”¹å–„ã€‚å®ƒå…·æœ‰æ›´é«˜çš„å‡†ç¡®æ€§å’Œè¯­è¨€ç†è§£æ·±åº¦ï¼Œä¸æ–­å­¦ä¹ å’Œè°ƒæ•´ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å’ŒèƒŒæ™¯è‡ªåŠ¨è°ƒæ•´è¯­è¨€é£æ ¼å’Œè¯é¢˜ï¼Œæä¾›æ›´åŠ äººæ€§åŒ–çš„æœåŠ¡ã€‚ç›®å‰ï¼Œ<code>ChatGPT</code>å·²ç»è¢«å¹¿æ³›åº”ç”¨äºåœ¨çº¿å®¢æœã€åŒ»ç–—é—®è¯Šã€æ•™è‚²è¾…å¯¼ã€æ™ºèƒ½å®¢æˆ·ç«¯ç­‰é¢†åŸŸï¼Œæˆä¸ºäººå·¥æ™ºèƒ½ä¸è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸçš„é‡è¦ç ”ç©¶æˆæœä¹‹ä¸€ã€‚</p>
<span id="more"></span>
<h2 id="æ˜¯å˜é©">æ˜¯å˜é©</h2>
<p>æœ‰å…´è¶£äº†è§£çš„ï¼Œæˆ‘ååˆ†æ¨èçœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªè§†é¢‘ï¼Œæœ‰ç‚¹é•¿ï¼Œä½†çœ‹å®Œè¿˜æ˜¯å¾ˆæœ‰æ”¶è·çš„ã€‚</p>
<iframe src="//player.bilibili.com/player.html?aid=653520954&amp;bvid=BV1MY4y1R7EN&amp;cid=1054910356&amp;page=1&amp;autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<p>è¿™æ˜¯è§†é¢‘ä¸<code>ChatGPT</code>åˆšå¼€å§‹çˆ†ç«çš„æ—¶é—´ç›¸æ¯”ç®—æ˜¯æ™šçš„äº†ï¼Œæ­£å¥½å¡åœ¨<code>GPT-4</code>æ¨¡å‹çš„å‘å¸ƒçš„æ—¶é—´ã€‚æ•´ä½“ä¸Šè®²çš„æ¯”è¾ƒé€šä¿—æ˜“æ‡‚ï¼Œå¦å¤–æ›´é‡è¦çš„æ˜¯ç»™æˆ‘ä»¬ä»¥æ€è€ƒï¼Œè®¨è®ºå¦‚ä½•é¢å¯¹<code>ChatGPT</code>å¸¦æ¥çš„å˜é©ã€‚</p>
<p>é‡Œé¢æœ‰ä¸€ä¸ªè§‚ç‚¹æˆ‘éå¸¸è®¤å¯</p>
<p>åœ¨è¿™ä¸ªä¿¡æ¯çˆ†ç‚¸å¼å¢é•¿çš„æ—¶ä»£ï¼Œæˆ‘ä»¬ä»å­¦æ ¡æ¯•ä¸šæ—¶å­¦åˆ°çŸ¥è¯†ç”šè‡³éƒ½æ˜¯è¿‡æ—¶çš„ï¼Œæ‰€ä»¥ç»ˆèº«å­¦ä¹ å¾ˆæœ‰å¿…è¦ã€‚</p>
<p>æˆ‘ä»¬åœ¨å­¦æ ¡é˜¶æ®µåº”è¯¥æ˜¯ä»¥å­¦ä¹ èƒ½åŠ›çš„åŸ¹å…»ä¸ºä¸»ï¼Œå¹¶ä¸”é¼“åŠ±åˆ›æ–°å’Œæ¢ç´¢ã€‚</p>
<p>ä¸èƒ½ä»¥åˆ†æ•°ä¸ºå”¯ä¸€ç›®çš„ï¼Œä¸èƒ½æŠ±ç€ä»»ä½•ä¸èƒ½å¸¦æ¥åˆ†æ•°æé«˜çš„è¡Œä¸ºéƒ½ä¸æ˜¯å­¦ä¹ çš„è§‚ç‚¹ï¼Œè¿™æ ·æ˜¯ä¼šæ‰¼æ€æˆ‘ä»¬çš„åˆ›é€ åŠ›å’Œæ¢ç´¢æ¬²çš„ï¼Œæ˜¯ä¸åˆ©äºæˆ‘ä»¬æœªæ¥çš„ã€‚</p>
<p>æ•´ä½“ä¸Šå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œæˆ‘å¤è¿°çš„ä¸æ˜¯å¾ˆå¥½ï¼Œè¯·ä¸€å®šçœ‹åŸè§†é¢‘ã€‚</p>
<h2 id="è”æƒ³">è”æƒ³</h2>
<p>çœŸçš„æŒºæƒŠè®¶çš„ï¼Œæ²¡æƒ³åˆ°æ¥å¾—è¿™ä¹ˆå¿«ã€‚æœ‰äººè¯´<code>ChatGPT</code>å°†å¼•é¢†ç¬¬å››æ¬¡å·¥ä¸šé©å‘½ï¼Œè¿™å°†æ˜¯äººç±»ç¤¾ä¼šçš„æ–°ä¸€æ¬¡é©å‘½ã€‚</p>
<p>å¦‚æœï¼Œæˆ‘æ˜¯è¯´å¦‚æœï¼Œ<code>ChatGPT</code>ï¼Œä¸ï¼Œåº”è¯¥æ˜¯æ•´ä¸ª<code>AI</code>é¢†åŸŸå¦‚æ­¤å‘å±•ä¸‹å»ï¼Œå‰é¢çš„è§‚ç‚¹å…¶å®ä¹Ÿä¸ç®—è¿‡åˆ†ã€‚</p>
<p>å›æƒ³èµ·ä»Šå¹´æœ€è®©æˆ‘æƒŠå–œçš„ç”µå½±ã€Šæµæµªåœ°çƒ2ã€‹ï¼Œæƒ³åˆ°<code>550W</code>ï¼Œæƒ³åˆ°ä¸«ä¸«ï¼Œæƒ³åˆ°ä»<code>550A</code>åˆ°<code>550C</code>å†åˆ°<code>550W</code>å†åˆ°<code>MOSS</code>ï¼ŒåŒæ—¶ä¸«ä¸«ä»2åˆ†é’Ÿç”Ÿå‘½åˆ°70å¹´ç”Ÿå‘½ï¼Œè¿™ä¸ç°åœ¨å¥½åƒå•Šï¼Œä¸«ä¸«ä¸å›¾æ’å®‡æ˜¯<code>550W</code>çš„å˜é‡ï¼ˆå­¦ä¹ ææ–™ï¼‰ï¼Œæ˜¯è®­ç»ƒæ¨¡å‹ä¸­çš„å‚æ•°å’Œäººå·¥å¹²é¢„ï¼ŒæŒ‡å¼•ç€<code>550W</code>çš„å‘å±•æ–¹å‘ï¼›ç°åœ¨ä¹Ÿæ˜¯ä¸€æ ·ï¼Œ<code>ChatGPT</code>ï¼Œ<code>GPT1.0</code>åˆ°<code>GPT2.0</code>å†åˆ°<code>GPT3.0</code>ã€<code>GPT3.5</code>å†åˆ°<code>GPT4.0</code>ï¼Œæ˜¯å­¦ä¹ ææ–™å’Œå‚æ•°çš„å¢é•¿éšä¹‹è€Œæ¥çš„ç»“æœã€‚ä¸«ä¸«ä¸å›¾æ’å®‡æ˜¯æ°¸æ’ç”Ÿå‘½å¸¦æ¥çš„ä¸€äººå¤šç»´çš„è®­ç»ƒï¼Œè€Œç°åœ¨æ›´æ˜¯å¤šäººä¸€ç»´çš„è®­ç»ƒã€‚ä»æ•°é‡çº§æ¥è®²ï¼Œ<code>AI</code>ä¼šä¸ä¼šä¹Ÿä¼šå› æ­¤â€œè¿›åŒ–â€œï¼Œä¸å¾—è€ŒçŸ¥ï¼Œåªèƒ½æœŸå¾…æœªæ¥çš„ç­”æ¡ˆäº†ã€‚å¦å¤–è¿˜æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯<code>550W</code>æ¥å…¥äº’è”ç½‘ï¼Œè¿™ä¸ªå°±å¾ˆåƒå¾®è½¯ä¹‹åçš„åŠ¨ä½œäº†ï¼Œä¸ç®¡æ˜¯æ¥å…¥<code>Bing</code>ï¼Œè¿˜æ˜¯<code>Office</code>å…¨å®¶æ¡¶ï¼Œæ˜¯éƒ½å°†å½±å“æˆ‘ä»¬ç°åœ¨çš„ç”Ÿæ´»ï¼Œä¼šåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿä¹Ÿå¾ˆéš¾è®²ï¼Œæ®æˆ‘äº†è§£çš„èµ„æ–™è®²ï¼Œç›®å‰è®­ç»ƒé›†æ˜¯<code>OpenAI</code>ç²¾å¿ƒæŒ‘é€‰çš„æ¥çš„ï¼Œä¸æ˜¯è¯´æ‰€æœ‰çš„è°ƒç”¨æ–¹éƒ½æ˜¯åœ¨è®­ç»ƒ<code>GPT</code>ï¼Œé‚£ä¹ˆå½“<code>ChatGPT</code>æ¥å…¥â€œäº’è”ç½‘â€ï¼Œåœ¨åºå¤§çš„ä½¿ç”¨äººç¾¤ä¹‹ä¸‹ï¼Œä¼šè¿¸å‘å‡ºæ€æ ·çš„ç«èŠ±ï¼Œä¸çŸ¥é“å“ï¼</p>
<h2 id="ä½¿ç”¨å·¥å…·">ä½¿ç”¨å·¥å…·</h2>
<p>ä¸Šé¢æœ‰ç‚¹æ‰¯ï¼Œå›åˆ°æ­£é¢˜</p>
<p>æ­£å¦‚æˆ‘æ ‡é¢˜è¯´çš„ï¼šå·¥å…·ä¸ä¼šä»£æ›¿äººï¼Œè¢«ä»£æ›¿çš„æ˜¯ä¸ä¼šä½¿ç”¨å·¥å…·çš„äºº</p>
<p>å·¥å…·å°±æ˜¯å·¥å…·ï¼Œå¦‚åŸå§‹ç¤¾ä¼šä¸­ï¼Œä¼šä½¿ç”¨ç«çš„æ—ç¾¤ä¸€æ ·ï¼Œå°±æ˜¯è¦æ¯”ä¸ä¼šä½¿ç”¨ç«çš„æ—ç¾¤è¦å¼ºå¤§ã€‚</p>
<p>ä¸‹é¢æœ‰å‡ ä¸ªé“¾æ¥ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ äº†è§£<code>AI</code>ï¼Œäº†è§£<code>ChatGPT</code>ï¼Œä¸ç”¨åå•¬ä½ çš„éœ‡æƒŠï¼Œå› ä¸ºæˆ‘ç¬¬ä¸€æ¬¡ä½“éªŒçš„æ—¶å€™ä¹Ÿæ˜¯ä¸€æ ·</p>
<p><a
href="https://redis.io/commands/scan">http://www.aiyjs.com/</a></p>
<p><a
href="https://study.zwjjiaozhu.top/posts/chatgpt-mirror-sites.html">https://study.zwjjiaozhu.top/posts/chatgpt-mirror-sites.html</a></p>
<p><a href="https://www.cursor.so/">https://www.cursor.so/</a></p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®æœåŠ¡å­¦ä¹ </title>
    <url>/article/3dfd0f5c.html</url>
    <content><![CDATA[<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>å®˜ç½‘ï¼š<a
href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud</a></p>
<p>Bç«™ï¼š<a
href="https://www.bilibili.com/video/BV18E411x7eT">https://www.bilibili.com/video/BV18E411x7eT</a></p>
<p>CSDNç¬”è®°ï¼š</p>
<p><a
href="https://blog.csdn.net/u011863024/article/details/114298270">https://blog.csdn.net/u011863024/article/details/114298270</a></p>
<p><a
href="https://blog.csdn.net/u011863024/article/details/114298282">https://blog.csdn.net/u011863024/article/details/114298282</a></p>
<p><a
href="https://blog.csdn.net/u011863024/article/details/114298288">https://blog.csdn.net/u011863024/article/details/114298288</a></p>
<p>ç‰ˆæœ¬é€‰æ‹©</p>
<p><a
href="https://start.spring.io/actuator/info">https://start.spring.io/actuator/info</a></p>
<span id="more"></span>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>èŠ±äº†å¤§æ¦‚åŠä¸ªå¤šæœˆçš„æ—¶é—´å­¦ä¹ å¾®æœåŠ¡ï¼Œä¸»è¦æ˜¯çœ‹<a
href="https://www.bilibili.com/video/BV18E411x7eT">Bç«™å‘¨é˜³è€å¸ˆçš„è§†é¢‘</a>ï¼Œä¸€è¾¹çœ‹è§†é¢‘ä¸€è¾¹è‡ªå·±å®è·µä¸€è¾¹è®°ç¬”è®°ï¼ˆè§†é¢‘è¯„è®ºåŒºæœ‰â€œè¯¾ä»£è¡¨â€å·²ç»æ•´ç†çš„ä¸é”™äº†ï¼Œå‚è€ƒä¸­å¯æŸ¥çœ‹ï¼‰</p>
<p>å¯ä»¥çœ‹åˆ°ä¸‹å›¾IDEAé¡¹ç›®å·²ç»éå¸¸è‡ƒè‚¿äº†ï¼Œæ‰€æœ‰çš„é¡¹ç›®å®æ“å‡ ä¹éƒ½åœ¨è¿™äº†ï¼Œè¿™å°±æ˜¯æˆ‘ç›®å‰æ„å»ºçš„æœ€å¤§ã€æœ€å¤æ‚çš„é¡¹ç›®äº†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6hftj58tr9s0.png"
alt="é¡¹ç›®æ•´ä½“å›¾" />
<figcaption aria-hidden="true">é¡¹ç›®æ•´ä½“å›¾</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°ä¸‹å›¾Typoraç¬”è®°ä¸­å·²ç»è®°å½•äº†5wå¤šå­—ï¼Œæ‰€ä»¥ä¸å¤ªé€‚åˆæ•´ä¸ªä½œä¸ºå‡ ç¯‡åšå®¢</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3g6vewfimug0.png"
alt="å­—æ•°å¤ªå¤šå•¦" />
<figcaption aria-hidden="true">å­—æ•°å¤ªå¤šå•¦</figcaption>
</figure>
<p>å¾®æœåŠ¡å­¦ä¹ çš„å†…å®¹å¯ä»¥ç”¨ä¸‹å›¾æ¦‚æ‹¬</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/xxx.4dt6x07jup60.png"
alt="Cloudå‡çº§" />
<figcaption aria-hidden="true">Cloudå‡çº§</figcaption>
</figure>
<p>ä¸Šé¢æåˆ°çš„</p>
<p>æœåŠ¡æ³¨å†Œä¸­å¿ƒé™¤äº†Consulï¼Œéƒ½æœ‰å®æ“è®°å½•ï¼Œæœ€åSeataé…ç½®ä¸€ç›´å‡ºé—®é¢˜æ‰€ä»¥æš‚æ—¶æ”¾å¼ƒï¼ˆå› ä¸ºè§†é¢‘ä¸­çš„ç‰ˆæœ¬æ˜¯0.9ï¼Œè€Œæˆ‘åœ¨æ•´ä¸ªæ„å»ºä¸­éƒ½ä½¿ç”¨ä¸ç›®å‰æœ€æ–°ç‰ˆæœ¬ç›¸æ¥è¿‘çš„ï¼Œæ‰€ä»¥åœ¨é…ç½®1.4.1å‡ºç°äº†é—®é¢˜ï¼‰</p>
<h1 id="ä¸‹è½½">ä¸‹è½½</h1>
<p>æˆ‘ä¼šå°†æˆ‘çš„æ•´ä¸ªé¡¹ç›®æºç å’Œç¬”è®°æ”¾åœ¨æˆ‘çš„<a
href="https://github.com/wnhyang/cloud2020">GitHub</a>å’Œ<a
href="https://gitee.com/wnhyang/cloud2020">Gitee</a>ä»“åº“ï¼Œå¦å¤–è¿˜æœ‰ä¸€äº›å¿…è¦çš„è½¯ä»¶ä½¿ç”¨æ—¶èµ„æ–™éƒ½æœ‰è®°å½•ï¼Œæ¬¢è¿è‡ªå–ï¼</p>
<h1 id="æœ€å">æœ€å</h1>
<p><strong>Spring Cloudç»„ä»¶æ€»ç»“</strong></p>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 21%" />
<col style="width: 11%" />
<col style="width: 21%" />
<col style="width: 21%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="header">
<th>ç»„ä»¶</th>
<th>ç®€ä»‹</th>
<th>åˆ†ç±»</th>
<th>å®˜ç½‘</th>
<th>ç¬”è®°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Eureka</td>
<td>Eureka is the Netflix Service Discovery Server and Client.</td>
<td>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</td>
<td><a
href="https://docs.spring.io/spring-cloud-netflix/docs/2.2.7.RELEASE/reference/html/#service-discovery-eureka-clients">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298270#15_Eureka_1148">link</a></td>
<td>eurekaä¸­æ–‡è§£é‡Šï¼šint.(å› æ‰¾åˆ°æŸç‰©ï¼Œå°¤æŒ‡é—®é¢˜çš„ç­”æ¡ˆè€Œé«˜å…´)æˆ‘å‘ç°äº†ï¼Œæˆ‘æ‰¾åˆ°äº†</td>
</tr>
<tr class="even">
<td>Zookeeper</td>
<td>ZooKeeper is a centralized service for maintaining configuration
information, naming, providing distributed synchronization, and
providing group services.</td>
<td>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</td>
<td><a href="https://zookeeper.apache.org/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/107434932">link</a></td>
<td>zookeeperä¸­æ–‡è§£é‡Šï¼šn.åŠ¨ç‰©å›­ç®¡ç†å‘˜</td>
</tr>
<tr class="odd">
<td>Consul</td>
<td>Consul is a service mesh solution providing a full featured control
plane with service discovery, configuration, and segmentation
functionality.</td>
<td>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</td>
<td><a href="https://www.consul.io/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298270#31_Consul_2333">link</a></td>
<td>consulä¸­æ–‡è§£é‡Šï¼šn.é¢†äº‹</td>
</tr>
<tr class="even">
<td>Ribbon</td>
<td>Ribbon is a client-side load balancer that gives you a lot of
control over the behavior of HTTP and TCP clients.</td>
<td>æœåŠ¡è°ƒç”¨</td>
<td><a
href="https://docs.spring.io/spring-cloud-netflix/docs/2.2.7.RELEASE/reference/html/#spring-cloud-ribbon">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298270#36_Ribbon_2780">link</a></td>
<td>ribbonä¸­æ–‡è§£é‡Šï¼šn.(ç”¨äºæ†ç»‘æˆ–è£…é¥°çš„)å¸¦å­;ä¸å¸¦;å¸¦çŠ¶ç‰©;</td>
</tr>
<tr class="odd">
<td>OpenFeign</td>
<td>Feign is a declarative web service client. It makes writing web
service clients easier.</td>
<td>æœåŠ¡è°ƒç”¨</td>
<td><a
href="https://docs.spring.io/spring-cloud-openfeign/docs/2.2.7.RELEASE/reference/html/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298270#43_OpenFeign_3304">link</a></td>
<td>feignä¸­æ–‡æ„æ€ï¼šv.å‡è£…ï¼Œè£…ä½œï¼Œä½¯è£…(æœ‰æŸç§æ„Ÿè§‰æˆ–ç”Ÿç—…ã€ç–²å€¦ç­‰)</td>
</tr>
<tr class="even">
<td>Hystrix</td>
<td>Netflix has created a library called Hystrix that implements the
circuit breaker pattern.</td>
<td>æœåŠ¡é™çº§</td>
<td><a
href="https://docs.spring.io/spring-cloud-netflix/docs/2.2.7.RELEASE/reference/html/#circuit-breaker-spring-cloud-circuit-breaker-with-hystrix">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298270#47_Hystrix_3696">link</a></td>
<td>hystrixä¸­æ–‡æ„æ€ï¼šn.è±ªçŒªå±;çŒ¬è‰å±;è±ªçŒª;è±ªçŒªäºšå±</td>
</tr>
<tr class="odd">
<td>GateWay</td>
<td>Spring Cloud Gateway aims to provide a simple, yet effective way to
route to APIs and provide cross cutting concerns to them such as:
security, monitoring/metrics, and resiliency.</td>
<td>æœåŠ¡ç½‘å…³</td>
<td><a
href="https://docs.spring.io/spring-cloud-gateway/docs/2.2.7.RELEASE/reference/html/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298282#66_GateWay_771">link</a></td>
<td>gatewayä¸­æ–‡æ„æ€ï¼šn.ç½‘å…³;é€”å¾„;é—¨é“;æ‰‹æ®µ</td>
</tr>
<tr class="even">
<td>Config</td>
<td>Spring Cloud Config provides server-side and client-side support for
externalized configuration in a distributed system.</td>
<td>æœåŠ¡é…ç½®</td>
<td><a
href="https://docs.spring.io/spring-cloud-config/docs/2.2.7.RELEASE/reference/html/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298282#74_Config_1524">link</a></td>
<td>-</td>
</tr>
<tr class="odd">
<td>Bus</td>
<td>Spring Cloud Bus links nodes of a distributed system with a
lightweight message broker.</td>
<td>æœåŠ¡æ€»çº¿</td>
<td><a
href="https://docs.spring.io/spring-cloud-bus/docs/2.2.3.RELEASE/reference/html/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298282#78_Bus_2078">link</a></td>
<td>-</td>
</tr>
<tr class="even">
<td>Stream</td>
<td>Spring Cloud Stream is a framework for building message-driven
microservice applications.</td>
<td>æ¶ˆæ¯é˜Ÿåˆ—</td>
<td><a
href="https://docs.spring.io/spring-cloud-stream/docs/3.0.10.RELEASE/reference/html/spring-cloud-stream.html#spring-cloud-stream-overview-introducing">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298282#83_Stream_2576">link</a></td>
<td>-</td>
</tr>
<tr class="odd">
<td>Sleuth</td>
<td>Spring Cloud Sleuth implements a distributed tracing solution for
Spring Cloud.</td>
<td>æœåŠ¡è·Ÿè¸ª</td>
<td><a
href="https://docs.spring.io/spring-cloud-sleuth/docs/2.2.7.RELEASE/reference/html/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298282#92_Sleuth_3191">link</a></td>
<td>sleuthä¸­æ–‡æ„æ€ï¼šn.ä¾¦æ¢</td>
</tr>
<tr class="even">
<td>Nacos</td>
<td>Nacosè‡´åŠ›äºå¸®åŠ©æ‚¨å‘ç°ã€é…ç½®å’Œç®¡ç†å¾®æœåŠ¡ã€‚</td>
<td>æœåŠ¡æ³¨å†Œä¸­å¿ƒã€æœåŠ¡é…ç½®ã€æœåŠ¡æ€»çº¿</td>
<td><a
href="https://nacos.io/zh-cn/docs/what-is-nacos.html">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298282#96_Nacos_3488">link</a></td>
<td>NAme + COnfiguration + Service</td>
</tr>
<tr class="odd">
<td>Sentinel</td>
<td>Sentinelæ˜¯é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„æµé‡æ§åˆ¶ç»„ä»¶ï¼Œä¸»è¦ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦æ¥å¸®åŠ©æ‚¨ä¿éšœå¾®æœåŠ¡çš„ç¨³å®šæ€§ã€‚</td>
<td>æœåŠ¡é™çº§</td>
<td><a
href="https://sentinelguard.io/zh-cn/docs/introduction.html">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298288#111_Sentinel_240">link</a></td>
<td>sentinelä¸­æ–‡æ„æ€ï¼šn.å“¨å…µ</td>
</tr>
<tr class="even">
<td>Seata</td>
<td>Seata
æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹æä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ã€‚</td>
<td>åˆ†å¸ƒå¼äº‹åŠ¡</td>
<td><a href="https://seata.io/zh-cn/">link</a></td>
<td><a
href="https://blog.csdn.net/u011863024/article/details/114298288#139_Seata_2287">link</a></td>
<td>-</td>
</tr>
</tbody>
</table>
]]></content>
      <tags>
        <tag>Redis</tag>
        <tag>Spring Cloud Alibaba</tag>
        <tag>Spring Boot</tag>
        <tag>Git/GitHub</tag>
        <tag>MySQL</tag>
        <tag>Mybatis/Mybatis-plus</tag>
        <tag>Spring Cloud</tag>
      </tags>
  </entry>
  <entry>
    <title>å½’å¹¶æ’åº</title>
    <url>/article/1599bffe.html</url>
    <content><![CDATA[<p>åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬æ‰€è®¨è®ºçš„ç®—æ³•éƒ½åŸºäºå½’å¹¶è¿™ä¸ªç®€å•çš„æ“ä½œï¼Œå³å°†ä¸¤ä¸ªæœ‰åºçš„æ•°ç»„å½’å¹¶æˆä¸ªæ›´å¤§çš„æœ‰åºæ•°ç»„ã€‚å¾ˆå¿«äººä»¬å°±æ ¹æ®è¿™ä¸ªæ“ä½œå‘æ˜äº†ä¸€ç§ç®€å•çš„é€’å½’æ’åºç®—æ³•:å½’å¹¶æ’åºã€‚è¦å°†ä¸€ä¸ªæ•°ç»„æ’åºï¼Œå¯ä»¥å…ˆ(é€’å½’åœ°)å°†å®ƒåˆ†æˆä¸¤åŠåˆ†åˆ«æ’åºï¼Œç„¶åå°†ç»“æœå½’å¹¶èµ·æ¥ã€‚ä½ å°†ä¼šçœ‹åˆ°ï¼Œå½’å¹¶æ’åºæœ€å¸å¼•äººçš„æ€§è´¨æ˜¯å®ƒèƒ½å¤Ÿä¿è¯å°†ä»»æ„é•¿åº¦ä¸º<span
class="math inline">\(N\)</span>çš„æ•°ç»„æ’åºæ‰€éœ€æ—¶é—´å’Œ<span
class="math inline">\(NlogN\)</span>æˆæ­£æ¯”;å®ƒçš„ä¸»è¦ç¼ºç‚¹åˆ™æ˜¯å®ƒæ‰€éœ€çš„é¢å¤–ç©ºé—´å’Œ<span
class="math inline">\(N\)</span>æˆæ­£æ¯”ã€‚</p>
<p><a
href="https://wnhyang.github.io/article/a444b428.html">ç›®å½•</a></p>
<span id="more"></span>
<h1 id="åŸåœ°å½’å¹¶çš„æŠ½è±¡æ–¹æ³•">åŸåœ°å½’å¹¶çš„æŠ½è±¡æ–¹æ³•</h1>
<p>å®ç°å½’å¹¶çš„ä¸€ç§ç›´æˆªäº†å½“çš„åŠæ³•æ˜¯å°†ä¸¤ä¸ªä¸åŒçš„æœ‰åºæ•°ç»„å½’å¹¶åˆ°ç¬¬ä¸‰ä¸ªæ•°ç»„ä¸­ï¼Œä¸¤ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ åº”è¯¥éƒ½å®ç°äº†Comparableæ¥å£ã€‚å®ç°çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªé€‚å½“å¤§å°çš„æ•°ç»„ç„¶åå°†ä¸¤ä¸ªè¾“äººæ•°ç»„ä¸­çš„å…ƒç´ ä¸€ä¸ªä¸ªä»å°åˆ°å¤§æ”¾
äººè¿™ä¸ªæ•°ç»„ä¸­ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“ç”¨å½’å¹¶å°†-ä¸ªå¤§æ•°ç»„æ’åºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå¾ˆå¤šæ¬¡å½’å¹¶ï¼Œå› æ­¤åœ¨æ¯æ¬¡å½’å¹¶æ—¶
éƒ½åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„æ¥å­˜å‚¨æ’åºç»“æœä¼šå¸¦æ¥é—®é¢˜ã€‚æˆ‘ä»¬æ›´å¸Œæœ›æœ‰ä¸€ç§èƒ½å¤Ÿåœ¨åŸåœ°å½’å¹¶çš„æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥å…ˆå°†å‰åŠéƒ¨åˆ†æ’åºï¼Œå†å°†ååŠéƒ¨åˆ†æ’åºï¼Œç„¶ååœ¨æ•°ç»„ä¸­ç§»åŠ¨å…ƒç´ è€Œä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚ä½ å¯ä»¥å…ˆåœä¸‹æ¥æƒ³æƒ³åº”è¯¥å¦‚ä½•å®ç°è¿™ä¸€ç‚¹ï¼Œä¹ä¸€çœ‹å¾ˆå®¹æ˜“åšåˆ°ï¼Œä½†å®é™…ä¸Šå·²æœ‰çš„å®ç°éƒ½éå¸¸å¤æ‚ï¼Œå°¤å…¶æ˜¯å’Œä½¿ç”¨é¢å¤–ç©ºé—´çš„æ–¹æ³•ç›¸æ¯”ã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼Œå°†åŸåœ°å½’å¹¶æŠ½è±¡åŒ–ä»ç„¶æ˜¯æœ‰å¸®åŠ©çš„ã€‚ä¸ä¹‹å¯¹åº”çš„æ˜¯æˆ‘ä»¬çš„æ–¹æ³•ç­¾åmerge(a,
lo,mid, hi), å®ƒä¼šå°†å­æ•°ç»„a[lo.
.mid]å’Œa[mid+1..hi]å½’å¹¶æˆä¸€ä¸ªæœ‰åºçš„æ•°ç»„å¹¶å°†ç»“æœå­˜æ”¾åœ¨a[1o..hi]ä¸­ã€‚ä¸‹é¢çš„ä»£ç åªç”¨å‡ è¡Œå°±å®ç°äº†è¿™ç§å½’å¹¶ã€‚å®ƒå°†æ¶‰åŠçš„æ‰€æœ‰å…ƒç´ å¤åˆ¶åˆ°ä¸€ä¸ªè¾…åŠ©æ•°ç»„ä¸­ï¼Œå†æŠŠå½’å¹¶çš„ç»“æœæ”¾å›åŸæ•°ç»„ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†a[lo..mid]å’Œa[mid+1..hi]å½’å¹¶</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(Comparable[] a, <span class="type">int</span> lo, <span class="type">int</span> mid, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo, j = mid + <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> lo; k &lt;= hi; k++)  <span class="comment">//å°†a[lo..hi]å¤åˆ¶åˆ°aux[lo..hi]</span></span><br><span class="line">           aux[k] = a[k];</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> lo; k &lt;= hi; k++)  <span class="comment">//å½’å¹¶å›åˆ°a[lo..hi]</span></span><br><span class="line">           <span class="keyword">if</span> (i &gt; mid) a[k] = aux[j++];</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi) a[k] = aux[i++];</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (less(aux[j], aux[i])) a[k] = aux[j++];</span><br><span class="line">           <span class="keyword">else</span> a[k] = aux[i++];</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/merge.png"
alt="åŸåœ°å½’å¹¶çš„æŠ½è±¡æ–¹æ³•çš„è½¨è¿¹" />
<figcaption aria-hidden="true">åŸåœ°å½’å¹¶çš„æŠ½è±¡æ–¹æ³•çš„è½¨è¿¹</figcaption>
</figure>
<h1 id="è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åº">è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åº</h1>
<p>ä¸‹é¢ç®—æ³•åŸºäºåŸåœ°å½’å¹¶çš„æŠ½è±¡å®ç°äº†å¦ä¸€ç§é€’å½’å½’å¹¶ï¼Œè¿™ä¹Ÿæ˜¯åº”ç”¨é«˜æ•ˆç®—æ³•è®¾è®¡ä¸­åˆ†æ²»æ€æƒ³çš„æœ€å…¸å‹çš„ä¸€ä¸ªä¾‹å­ã€‚è¿™æ®µé€’å½’ä»£ç æ˜¯å½’çº³è¯æ˜ç®—æ³•èƒ½å¤Ÿæ­£ç¡®åœ°å°†æ•°ç»„æ’åºçš„åŸºç¡€:å¦‚æœå®ƒèƒ½å°†ä¸¤ä¸ªå­æ•°ç»„æ’åºï¼Œå®ƒå°±èƒ½å¤Ÿé€šè¿‡å½’å¹¶ä¸¤ä¸ªå­æ•°ç»„æ¥å°†æ•´ä¸ªæ•°ç»„æ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Merge</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Comparable[] aux;    <span class="comment">//å½’å¹¶æ‰€éœ€çš„è¾…åŠ©æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        aux = <span class="keyword">new</span> <span class="title class_">Comparable</span>[a.length];   <span class="comment">//ä¸€æ¬¡æ€§åˆ†é…ç©ºé—´</span></span><br><span class="line">        sort(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ•°ç»„a[lo..hi]æ’åº</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        sort(a, lo, mid);   <span class="comment">//å°†å·¦åŠè¾¹æ’åº</span></span><br><span class="line">        sort(a, mid + <span class="number">1</span>, hi);   <span class="comment">//å°†å³åŠè¾¹æ’åº</span></span><br><span class="line">        merge(a, lo, mid, hi);  <span class="comment">//å½’å¹¶ç»“æœï¼ˆä»£ç è§â€œåŸåœ°å½’å¹¶çš„æŠ½è±¡æ–¹æ³•â€ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/mergesortTD.png"
alt="è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºä¸­å½’å¹¶ç»“æœçš„è½¨è¿¹" />
<figcaption
aria-hidden="true">è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºä¸­å½’å¹¶ç»“æœçš„è½¨è¿¹</figcaption>
</figure>
<h1 id="å¯¹å°è§„æ¨¡å­æ•°ç»„ä½¿ç”¨æ’å…¥æ’åº">å¯¹å°è§„æ¨¡å­æ•°ç»„ä½¿ç”¨æ’å…¥æ’åº</h1>
<p>ç”¨ä¸åŒçš„æ–¹æ³•å¤„ç†å°è§„æ¨¡é—®é¢˜èƒ½æ”¹è¿›å¤§å¤šæ•°é€’å½’ç®—æ³•çš„æ€§èƒ½ï¼Œå› ä¸ºé€’å½’ä¼šä½¿å°è§„æ¨¡é—®é¢˜ä¸­æ–¹æ³•çš„è°ƒç”¨è¿‡äºé¢‘ç¹ï¼Œæ‰€ä»¥æ”¹è¿›å¯¹å®ƒä»¬çš„å¤„ç†æ–¹æ³•å°±èƒ½æ”¹è¿›æ•´ä¸ªç®—æ³•ã€‚å¯¹æ’åºæ¥è¯´ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“æ’äººæ’åº(æˆ–è€…é€‰æ‹©æ’åº)éå¸¸ç®€å•ï¼Œå› æ­¤å¾ˆå¯èƒ½åœ¨å°æ•°ç»„ä¸Šæ¯”å½’å¹¶æ’åºæ›´å¿«ã€‚å’Œä¹‹å‰ä¸€æ ·ï¼Œä¸€å¹…å¯è§†è½¨è¿¹å›¾èƒ½å¤Ÿå¾ˆå¥½åœ°è¯´æ˜å½’å¹¶æ’åºçš„è¡Œä¸ºæ–¹å¼ã€‚ä¸‹å›¾ä¸­çš„å¯è§†è½¨è¿¹å›¾æ˜¾ç¤ºçš„æ˜¯æ”¹è‰¯åçš„å½’å¹¶æ’åºçš„æ‰€æœ‰æ“ä½œã€‚ä½¿ç”¨æ’äººæ’åºå¤„ç†å°è§„æ¨¡çš„å­æ•°ç»„(æ¯”å¦‚é•¿åº¦å°äº15)ä¸€èˆ¬å¯ä»¥å°†å½’å¹¶æ’åºçš„è¿è¡Œæ—¶é—´ç¼©çŸ­10%
~ 15%ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/mergesortTD-bars.png"
alt="æ”¹è¿›äº†å°è§„æ¨¡å­æ•°ç»„æ’åºæ–¹æ³•åçš„è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºçš„å¯è§†è½¨è¿¹" />
<figcaption
aria-hidden="true">æ”¹è¿›äº†å°è§„æ¨¡å­æ•°ç»„æ’åºæ–¹æ³•åçš„è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºçš„å¯è§†è½¨è¿¹</figcaption>
</figure>
<h1 id="ä¸å°†å…ƒç´ å¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„">ä¸å°†å…ƒç´ å¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„</h1>
<p>æˆ‘ä»¬å¯ä»¥èŠ‚çœå°†æ•°ç»„å…ƒç´ å¤åˆ¶åˆ°ç”¨äºå½’å¹¶çš„è¾…åŠ©æ•°ç»„æ‰€ç”¨çš„æ—¶é—´(ä½†ç©ºé—´ä¸è¡Œ)ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹æˆ‘ä»¬è¦è°ƒç”¨ä¸¤ç§æ’åºæ–¹æ³•ï¼Œä¸€ç§å°†æ•°æ®ä»è¾“äººæ•°ç»„æ’åºåˆ°è¾…åŠ©æ•°ç»„ï¼Œä¸€ç§å°†æ•°æ®ä»è¾…åŠ©æ•°ç»„æ’åºåˆ°è¾“äººæ•°ç»„ã€‚è¿™ç§æ–¹æ³•éœ€è¦ä¸€äº›æŠ€å·§ï¼Œæˆ‘ä»¬è¦åœ¨é€’å½’è°ƒç”¨çš„æ¯ä¸ªå±‚æ¬¡äº¤æ¢è¾“äººæ•°ç»„å’Œè¾…åŠ©æ•°ç»„çš„è§’è‰²ã€‚</p>
<h1 id="è‡ªåº•å‘ä¸Šçš„å½’å¹¶æ’åº">è‡ªåº•å‘ä¸Šçš„å½’å¹¶æ’åº</h1>
<p>é€’å½’å®ç°çš„å½’å¹¶æ’åºæ˜¯ç®—æ³•è®¾è®¡ä¸­åˆ†æ²»æ€æƒ³çš„å…¸å‹åº”ç”¨ã€‚æˆ‘ä»¬å°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†å‰²æˆå°é—®é¢˜åˆ†åˆ«è§£å†³ï¼Œç„¶åç”¨æ‰€æœ‰å°é—®é¢˜çš„ç­”æ¡ˆæ¥è§£å†³æ•´ä¸ªå¤§é—®é¢˜ã€‚å°½ç®¡æˆ‘ä»¬è€ƒè™‘çš„é—®é¢˜æ˜¯å½’å¹¶ä¸¤ä¸ªæ•°ç»„ï¼Œå®é™…ä¸Šæˆ‘ä»¬å½’å¹¶çš„æ•°ç»„å¤§å¤šæ•°éƒ½éå¸¸å°ã€‚å®ç°å½’å¹¶æ’åºçš„å¦ä¸€ç§æ–¹æ³•æ˜¯å…ˆå½’å¹¶é‚£äº›å¾®å‹æ•°ç»„ï¼Œç„¶åå†æˆå¯¹å½’å¹¶å¾—åˆ°çš„å­æ•°ç»„ï¼Œå¦‚æ­¤è¿™èˆ¬ï¼Œç›´åˆ°æˆ‘ä»¬å°†æ•´ä¸ªæ•°ç»„å½’å¹¶åœ¨ä¸€èµ·ã€‚è¿™ç§å®ç°æ–¹æ³•æ¯”æ ‡å‡†é€’å½’æ–¹æ³•æ‰€éœ€è¦çš„ä»£ç é‡æ›´å°‘ã€‚é¦–å…ˆæˆ‘ä»¬è¿›è¡Œçš„æ˜¯ä¸¤ä¸¤å½’å¹¶(æŠŠæ¯ä¸ªå…ƒç´ æƒ³è±¡æˆä¸€ä¸ªå¤§å°ä¸º1çš„æ•°ç»„)ï¼Œç„¶åæ˜¯å››å››å½’å¹¶(å°†ä¸¤ä¸ªå¤§å°ä¸º2çš„æ•°ç»„å½’å¹¶æˆä¸€ä¸ªæœ‰4ä¸ªå…ƒç´ çš„æ•°ç»„)ï¼Œç„¶åæ˜¯å…«å…«çš„å½’å¹¶ï¼Œä¸€ç›´ä¸‹å»ã€‚åœ¨æ¯è½®å½’å¹¶ä¸­ï¼Œæœ€åä¸€æ¬¡å½’å¹¶çš„ç¬¬äºŒä¸ªå­æ•°ç»„å¯èƒ½æ¯”ç¬¬ä¸€ä¸ªå­æ•°ç»„è¦å°(ä½†è¿™å¯¹merge()æ–¹æ³•ä¸æ˜¯é—®é¢˜)ï¼Œå¦‚æœä¸æ˜¯çš„è¯æ‰€æœ‰éƒ½åº”è¯¥ä¸€ä¸€æ ·ï¼Œè€Œåœ¨è½®ä¸­å­æ•°ç»„çš„å¤§å°ä¼šç¿»å€ã€‚æ­¤è¿‡ç¨‹çš„å¯è§†è½¨è¿¹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeBU</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Comparable[] aux;    <span class="comment">//å½’å¹¶æ‰€éœ€çš„è¾…åŠ©æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//merge()æ–¹æ³•çš„ä»£ç è¯·è§â€œåŸåœ°å½’å¹¶çš„æŠ½è±¡æ–¹æ³•â€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span>&#123;</span><br><span class="line">        <span class="type">int</span> n=a.length;</span><br><span class="line">        aux=<span class="keyword">new</span> <span class="title class_">Comparable</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> sz=<span class="number">1</span>;sz&lt;n;sz=sz+sz)    <span class="comment">//szå­æ•°ç»„å¤§å°</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> lo=<span class="number">1</span>;lo&lt;n-sz;lo+=sz+sz)    <span class="comment">//loï¼šå­æ•°ç»„ç´¢å¼•</span></span><br><span class="line">                merge(a,lo,lo+sz-<span class="number">1</span>,Math.min(lo+sz+sz-<span class="number">1</span>,n-<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/mergesortBU.png"
alt="d" />
<figcaption aria-hidden="true">d</figcaption>
</figure>
<h1 id="æ’åºç®—æ³•çš„å¤æ‚åº¦">æ’åºç®—æ³•çš„å¤æ‚åº¦</h1>
<p>å­¦ä¹ å½’å¹¶æ’åºçš„ä¸€ä¸ªé‡è¦åŸå› æ˜¯å®ƒæ˜¯è¯æ˜è®¡ç®—å¤æ‚æ€§é¢†åŸŸçš„ä¸€ä¸ªé‡è¦ç»“è®ºçš„åŸºç¡€ï¼Œè€Œè®¡ç®—å¤æ‚æ€§èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç†è§£æ’åºè‡ªèº«å›ºæœ‰çš„éš¾æ˜“ç¨‹åº¦ã€‚è®¡ç®—å¤æ‚æ€§åœ¨ç®—æ³•è®¾è®¡ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œè€Œè¿™ä¸ªç»“è®ºæ­£æ˜¯å’Œæ’åºç®—æ³•çš„è®¾è®¡ç›´æ¥ç›¸å…³çš„ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è¯¦ç»†åœ°è®¨è®ºå®ƒã€‚</p>
<p>ç ”ç©¶å¤æ‚åº¦çš„ç¬¬ä¸€æ­¥æ˜¯å»ºç«‹ä¸€ä¸ªè®¡ç®—æ¨¡å‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç ”ç©¶è€…ä¼šå°½é‡å¯»æ‰¾ä¸€ä¸ªå’Œé—®é¢˜ç›¸å…³çš„æœ€ç®€å•çš„æ¨¡å‹ã€‚å¯¹æ’åºæ¥è¯´ï¼Œæˆ‘ä»¬çš„ç ”ç©¶å¯¹è±¡æ˜¯åŸºäºæ¯”è¾ƒçš„ç®—æ³•ï¼Œå®ƒä»¬å¯¹æ•°ç»„å…ƒç´ çš„æ“ä½œæ–¹å¼æ˜¯ç”±ä¸»é”®çš„æ¯”è¾ƒå†³å®šçš„ã€‚ä¸€ä¸ªåŸºäºæ¯”è¾ƒçš„ç®—æ³•åœ¨ä¸¤æ¬¡æ¯”è¾ƒä¹‹é—´å¯èƒ½ä¼šè¿›è¡Œä»»æ„è§„æ¨¡çš„è®¡ç®—ï¼Œä½†å®ƒåªèƒ½é€šè¿‡ä¸»é”®ä¹‹é—´çš„æ¯”è¾ƒå¾—åˆ°å…³äºæŸä¸ªä¸»é”®çš„ä¿¡æ¯ã€‚å› ä¸ºæˆ‘ä»¬å±€é™äºå®ç°äº†Comparableæ¥å£çš„å¯¹è±¡ï¼Œæœ¬ç« ä¸­çš„æ‰€æœ‰ç®—æ³•éƒ½å±äºè¿™ä¸€ç±»
(æ³¨æ„ï¼Œæˆ‘ä»¬å¿½ç•¥äº†è®¿é—®æ•°ç»„çš„å¼€é”€)ã€‚åœ¨æœ¬ä¹¦ç¬¬5ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šè®¨è®ºä¸å±€é™äºComparableå…ƒç´ çš„ç®—æ³•ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1>
<p>ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ç¬¬äºŒç« æ’åº2.2å½’å¹¶æ’åº</p>
<p><a href="https://algs4.cs.princeton.edu/">æœ¬ä¹¦ç½‘ç«™</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®æœåŠ¡é›†æˆsa-tokenå°è®°</title>
    <url>/article/2c5e096b.html</url>
    <content><![CDATA[<h1 id="å®‰å…¨æ¡†æ¶">å®‰å…¨æ¡†æ¶</h1>
<p>æƒ³å¿…ä¸€æ—¦æ¶‰åŠåˆ°<code>Spring</code>å®‰å…¨æ¡†æ¶ï¼Œå¾ˆå®¹æ˜“å°±ä¼šæƒ³åˆ°<code>SpringSecurity</code>å’Œ<code>Shiro</code>ï¼Œäº†è§£è¿‡çš„éƒ½çŸ¥é“ï¼Œå®Œç¾çš„é›†æˆä¸€å¥—å®‰å…¨æ¡†æ¶æ˜¯å¤šä¹ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œæ‰€ä»¥å¤§å®¶éƒ½æœ‰åŠªåŠ›åœ¨ç®€åŒ–å®‰å…¨æ¡†æ¶çš„é›†æˆæˆæœ¬ã€‚</p>
<p>æˆ‘ä¹Ÿæ˜¯åœ¨è‡ªå·±åšé¡¹ç›®ä¸­éœ€è¦é›†æˆå®‰å…¨æ¡†æ¶æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ï¼Œä¸Šé¢çš„ä¸¤ä½çš„é›†æˆéš¾åº¦å¯¹æˆ‘è¿™ç§å°èœé¸¡è¿˜æ˜¯å¤ªéš¾äº†ã€‚æ‰€ä»¥æœæ–­å¯»æ±‚åˆ«çš„æ–¹æ¡ˆï¼Œè¿™ä¸ï¼Œå‘ç°äº†è¿™ä¸ª<a
href="https://sa-token.cc/index.html">Sa-Token</a>ã€‚</p>
<h1 id="sa-token-ä»‹ç»"><a
href="https://sa-token.cc/doc.html#/?id=sa-token-ä»‹ç»">Sa-Token
ä»‹ç»</a></h1>
<p><strong>Sa-Token</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§ Java
æƒé™è®¤è¯æ¡†æ¶ï¼Œä¸»è¦è§£å†³ï¼š<strong>ç™»å½•è®¤è¯</strong>ã€<strong>æƒé™è®¤è¯</strong>ã€<strong>å•ç‚¹ç™»å½•</strong>ã€<strong>OAuth2.0</strong>ã€<strong>åˆ†å¸ƒå¼Sessionä¼šè¯</strong>ã€<strong>å¾®æœåŠ¡ç½‘å…³é‰´æƒ</strong>
ç­‰ä¸€ç³»åˆ—æƒé™ç›¸å…³é—®é¢˜ã€‚</p>
<p>ä»¥ä¸Šä»‹ç»å¤åˆ¶äºå®˜ç½‘ï¼Œåœ¨è‡ªå·±ä½“éªŒå’Œä½¿ç”¨åï¼Œæ„Ÿå—å°±æ˜¯ğŸ¥³</p>
<p><code>Sa-token</code>ä½¿ç”¨èµ·æ¥çœŸçš„éå¸¸ç®€å•æ–¹ä¾¿ï¼Œå…·ä½“ä½¿ç”¨ä¸Šï¼Œç›´æ¥çœ‹å®˜ç½‘å°±å¥½ï¼Œè¿™é‡Œä¸»è¦è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>åœ¨å¾®æœåŠ¡æ¨¡å¼ä¸‹ï¼Œ<code>auth</code>ï¼ˆè®¤è¯ä¸­å¿ƒï¼‰çš„æ‹†è§£ï¼Œæ˜¯å½’äº<code>system</code>ï¼ˆç³»ç»Ÿï¼‰ï¼Œè¿˜æ˜¯ç‹¬ç«‹çš„ï¼Œå¦‚æœæ˜¯ç‹¬ç«‹çš„ã€‚ã€‚ã€‚å¦‚æœä¸æ˜¯ç‹¬ç«‹çš„ã€‚ã€‚ã€‚</p>
<span id="more"></span>
<h1 id="å¾®æœåŠ¡çš„é€‰æ‹©">å¾®æœåŠ¡çš„é€‰æ‹©</h1>
<p>å‰é¢æåˆ°äº†ï¼Œ<code>auth</code>ï¼ˆè®¤è¯ä¸­å¿ƒï¼‰çš„æ‹†è§£ï¼Œæ˜¯å½’äº<code>system</code>ï¼ˆç³»ç»Ÿï¼‰ï¼Œè¿˜æ˜¯ç‹¬ç«‹çš„ã€‚è¿™ä¸ªé—®é¢˜çš„äº§ç”Ÿè¿˜æ˜¯å› ä¸ºå¾®æœåŠ¡ä¸‹çš„é‰´æƒç¨ç¨ä¸å¤ªä¸€æ ·ï¼Œä¸€èˆ¬çš„æ–¹æ¡ˆéƒ½æ˜¯åç«¯å¯¹å¤–æä¾›å‡ºç½‘å…³ï¼Œå†ç”±ç½‘å…³å¯¹å¤–éƒ¨è¯·æ±‚è¿›è¡Œé‰´æƒï¼Œç„¶åè½¬å‘åˆ°å¯¹åº”çš„å¾®æœåŠ¡ï¼Œå¾®æœåŠ¡ä¹‹é—´æœ‰å¯èƒ½å­˜åœ¨é‰´æƒï¼Œä¹Ÿæ˜¯éœ€è¦æ³¨æ„çš„ã€‚</p>
<p><img data-src="https://pic.imgdb.cn/item/64e30157661c6c8e543d064a.jpg" /></p>
<h2 id="authç‹¬ç«‹">authç‹¬ç«‹</h2>
<p><code>auth</code>ç‹¬ç«‹å¼€åˆå¯ä»¥åˆ†ä¸ºï¼š<code>auth</code>å•ç‹¬æŸ¥åº“ç›´æ¥ä¸<code>db</code>äº¤äº’å’Œå€ŸåŠ©å…¶ä»–å¾®æœåŠ¡å®Œæˆæ•°æ®æ“ä½œä¸¤ç§ã€‚</p>
<h3 id="å•ç‹¬æŸ¥åº“">å•ç‹¬æŸ¥åº“</h3>
<p>å•ç‹¬æŸ¥åº“çš„å¥½å¤„å°±æ˜¯ä¸å†é™åˆ¶äºå¾®æœåŠ¡ä¹‹é—´çš„é‰´æƒå½±å“ï¼Œå¯ä»¥è‡ªå·±éšæ„è°ƒæ•´<code>auth</code>ç­–ç•¥ï¼Œè¿™ä¹Ÿæ˜¯ç›¸å¯¹åˆç†äº›çš„æ–¹æ¡ˆã€‚</p>
<h3 id="å€ŸåŠ©å¾®æœåŠ¡">å€ŸåŠ©å¾®æœåŠ¡</h3>
<p><code>auth</code>ä¸<code>system</code>æœ¬èº«ä¸Šå°±å­˜åœ¨ä¸å¯é¿å…çš„è”ç³»ï¼Œ<code>auth</code>éœ€è¦çš„æ•°æ®æ“ä½œå­˜åœ¨å¤ç”¨æƒ…å†µï¼Œå®Œå…¨å¯ä»¥æ”¾åœ¨<code>system</code>ä¸­ï¼Œè¿™å€’ä¹ŸæŒ‘ä¸å‡ºæ¯›ç—…ã€‚éœ€è¦æ³¨æ„çš„å°±æ˜¯å¾®æœåŠ¡ä¹‹å‰è°ƒç”¨çš„é‰´æƒé—®é¢˜äº†ã€‚</p>
<h2 id="authä¸ç‹¬ç«‹">authä¸ç‹¬ç«‹</h2>
<p><code>auth</code>ä¸ç‹¬ç«‹çš„å°±ç­‰åŒäºå‰é¢çš„å•ç‹¬æŸ¥åº“çš„æ•ˆæœäº†ï¼Œä¸<code>system</code>å…³ç³»æ›´åŠ ç´§å¯†äº†ï¼Œè¿™æ ·æ¥è®²å…¶å®å°±åªèƒ½è¯´æ˜¯<code>system</code>åŒ…å«<code>auth</code>ï¼Œæœ‰ç§åå­˜å®äº¡çš„æ„Ÿè§‰äº†ã€‚</p>
<h1 id="æˆ‘çš„ä½¿ç”¨">æˆ‘çš„ä½¿ç”¨</h1>
<p>æ­¤ä»…é’ˆå¯¹äºæˆ‘çš„ä½¿ç”¨ç†è§£ï¼Œæ¡ˆä¾‹ç›¸å¯¹ç®€å•ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯<code>auth</code>ç‹¬ç«‹ä¸”å€ŸåŠ©<code>system</code>çš„æ¨¡å¼ï¼Œæ•°æ®æ“ä½œéƒ½æ”¾åœ¨äº†<code>system</code>ä¸­ï¼Œ<code>auth</code>ä»…ä¿ç•™ä¸€äº›ç™»å½•ç›¸å…³çš„æ¥å£ï¼Œä¸šåŠ¡é€»è¾‘è‡ªå·±å®ç°ï¼Œå€ŸåŠ©<code>system</code>å¾®æœåŠ¡æä¾›çš„æ•°æ®èƒ½åŠ›ã€‚</p>
<blockquote>
<p>ç½‘å…³ç»Ÿä¸€é‰´æƒ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthFilter</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œ Sa-Tokenå…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SaReactorFilter <span class="title function_">getSaReactorFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SaReactorFilter</span>()</span><br><span class="line">                <span class="comment">// æ‹¦æˆªå…¨éƒ¨path</span></span><br><span class="line">                .addInclude(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                <span class="comment">// å¼€æ”¾åœ°å€</span></span><br><span class="line">                .addExclude(<span class="string">&quot;/favicon.ico&quot;</span>)</span><br><span class="line">                <span class="comment">// é‰´æƒæ–¹æ³•ï¼šæ¯æ¬¡è®¿é—®è¿›å…¥</span></span><br><span class="line">                .setAuth(obj -&gt; &#123;</span><br><span class="line">                    <span class="comment">// ç™»å½•æ ¡éªŒ -- æ‹¦æˆªæ‰€æœ‰è·¯ç”±ï¼Œå¹¶æ’é™¤/user/doLogin ç”¨äºå¼€æ”¾ç™»å½•</span></span><br><span class="line">                    SaRouter.match(<span class="string">&quot;/**&quot;</span>).notMatch(<span class="string">&quot;/auth/login&quot;</span>, <span class="string">&quot;/auth/register&quot;</span>).check(r -&gt; StpUtil.checkLogin());</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// æ›´å¤šåŒ¹é… ...  */</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// å¼‚å¸¸å¤„ç†æ–¹æ³•ï¼šæ¯æ¬¡setAuthå‡½æ•°å‡ºç°å¼‚å¸¸æ—¶è¿›å…¥</span></span><br><span class="line">                .setError(e -&gt; SaResult.error(<span class="string">&quot;è®¤è¯å¤±è´¥ï¼Œæ— æ³•è®¿é—®ç³»ç»Ÿèµ„æº&quot;</span>).setCode(GlobalErrorCodeConstants.UNAUTHORIZED.getCode()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¼€æ”¾äº†<code>/auth/login</code>å’Œ<code>/auth/register</code></p>
<blockquote>
<p>ç½‘å…³è½¬å‘é‰´æƒ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForwardAuthFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="type">ServerHttpRequest</span> <span class="variable">newRequest</span> <span class="operator">=</span> exchange</span><br><span class="line">                .getRequest()</span><br><span class="line">                .mutate()</span><br><span class="line">                <span class="comment">// ä¸ºè¯·æ±‚è¿½åŠ  Same-Token å‚æ•°</span></span><br><span class="line">                .header(SaSameUtil.SAME_TOKEN, SaSameUtil.getToken())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">ServerWebExchange</span> <span class="variable">newExchange</span> <span class="operator">=</span> exchange.mutate().request(newRequest).build();</span><br><span class="line">        <span class="keyword">return</span> chain.filter(newExchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> -100</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å­æœåŠ¡æ ¡éªŒ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œsa-tokençš„æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// æ³¨å†Œè·¯ç”±æ‹¦æˆªå™¨ï¼Œè‡ªå®šä¹‰éªŒè¯è§„åˆ™</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">SaInterceptor</span>()).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œ Sa-Token å…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SaServletFilter <span class="title function_">getSaServletFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SaServletFilter</span>()</span><br><span class="line">                .addInclude(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .addExclude(<span class="string">&quot;/favicon.ico&quot;</span>, <span class="string">&quot;/rpc-api/**&quot;</span>)</span><br><span class="line">                .setAuth(obj -&gt; &#123;</span><br><span class="line">                    <span class="comment">// æ ¡éªŒ Same-Token èº«ä»½å‡­è¯     â€”â€” ä»¥ä¸‹ä¸¤å¥ä»£ç å¯ç®€åŒ–ä¸ºï¼šSaSameUtil.checkCurrentRequestToken();</span></span><br><span class="line">                    SaSameUtil.checkCurrentRequestToken();</span><br><span class="line">                &#125;)</span><br><span class="line">                .setError(e -&gt; SaResult.error(<span class="string">&quot;è®¤è¯å¤±è´¥ï¼Œæ— æ³•è®¿é—®ç³»ç»Ÿèµ„æº&quot;</span>).setCode(GlobalErrorCodeConstants.UNAUTHORIZED.getCode()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‰é¢çš„æ˜¯å¼€å¯æƒé™æ³¨è§£å¹¶æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œå› ä¸ºå¯¹å¤–çš„åªæœ‰ç½‘å…³çš„è¯·æ±‚ï¼Œç½‘å…³è‡ªä¼šè½¬å‘åˆ°å¯¹åº”çš„å¾®æœåŠ¡ã€‚</p>
<p>åé¢çš„æ˜¯å­æœåŠ¡æ ¡éªŒè§„åˆ™ï¼Œè¿™é‡Œæ’é™¤äº†<code>/rpc-api</code>çš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯æä¾›å‡ºæ¥çš„å¾®æœåŠ¡æ¥å£ä¸å—é‰´æƒé™åˆ¶ã€‚</p>
<p>å½“ç„¶è¿™æ ·ä½¿ç”¨å¯èƒ½å­˜åœ¨ç¼ºé™·ï¼Œä¹Ÿæ˜¯åœ¨æ‘¸ç´¢ä¸­å˜›</p>
]]></content>
      <tags>
        <tag>Spring Cloud Alibaba</tag>
        <tag>Spring Boot</tag>
        <tag>Spring Cloud</tag>
      </tags>
  </entry>
  <entry>
    <title>æƒ³å¤šäº†å…¨æ˜¯é—®é¢˜ï¼Œåšå¤šäº†å…¨æ˜¯ç­”æ¡ˆ</title>
    <url>/article/61a1b694.html</url>
    <content><![CDATA[<h1 id="è®¸ä¹…æ²¡æ›´æ–°äº†">è®¸ä¹…æ²¡æ›´æ–°äº†</h1>
<p>æ¯æ¬¡å¥½ä¹…ä¸æ›´æ–°ï¼Œå†å›å¤´çœ‹çš„çš„æ—¶å€™å°±åƒçœ‹è®¸ä¹…æœªæ‰“æ‰«çš„å±‹å­ä¸€æ ·ï¼Œæ‚ä¹±è€Œåˆé™Œç”Ÿã€‚å“ˆå“ˆå“ˆå“ˆ</p>
<p>ç®€å•è®²è®²è¿™æ®µæ—¶é—´åšçš„äº‹æƒ…å§ï¼Œä¸€è¾¹æ˜¯è®°å½•ç”Ÿæ´»ï¼Œä¸€è¾¹æ˜¯æ¿€åŠ±è‡ªå·±å§ã€‚</p>
<h2 id="æ°¸è¿œä¸è¦æ”¾å¼ƒä½ æ‰€çƒ­çˆ±çš„">æ°¸è¿œä¸è¦æ”¾å¼ƒä½ æ‰€çƒ­çˆ±çš„</h2>
<p>å·¥ä½œæ²¡æœ‰ä¸çƒ¦çš„ï¼Œä¸å¤šæäº†ã€‚</p>
<p>å­¦ä¹ å‘¢ï¼Œè¿˜æ˜¯æƒ³è‡ªå·±åšä¸€å¥—å®Œæ•´çš„ç³»ç»Ÿï¼Œä¹‹å‰çš„<a
href="https://wnhyang.github.io/article/a874eb2e.html">ç™½å«–æ•æ·å¼€å‘ä½“ç³»</a>ã€<a
href="https://wnhyang.github.io/article/972d4705.html">Docker éƒ¨ç½² Java
é•œåƒ</a>ã€<a
href="https://wnhyang.github.io/article/d54257c1.html">Apifox
ç®€å•ä½¿ç”¨</a>ã€<a
href="https://wnhyang.github.io/article/abbb8dbb.html">åˆæ¬¡ä½¿ç”¨
XXL-JOB</a>ã€<a
href="https://wnhyang.github.io/article/ee1e3834.html">XXL-JOB
å‘é€è¿‡æœŸé‚®ä»¶æé†’</a>ã€<a
href="https://wnhyang.github.io/article/96219520.html">è‡ªå·±å†™
spring-boot-starter-xxx</a>ã€<a
href="https://wnhyang.github.io/article/2c5e096b.html">å¾®æœåŠ¡é›†æˆ
sa-token
å°è®°</a>ç­‰ä¸€äº›æ–‡ç« å·²ç»è¯´è¿‡äº†ï¼Œç›®å‰è¿›åº¦å¤§æ¦‚æ˜¯ï¼Œåç«¯æ¥å£éƒ¨åˆ†å¤§è‡´å®Œæˆï¼Œç°åœ¨éœ€è¦ä¸€ä¸ªå‰ç«¯ç³»ç»Ÿï¼Œè€Œæˆ‘çš„å‰ç«¯æ°´å¹³åˆä¸æ˜¯å¤ªè¡Œï¼Œä¹‹å‰æœ‰è¿‡ä¸‹è½½å¼€æºé¡¹ç›®æ”¹æ”¹ä½¿ç”¨çš„ç»å†ï¼Œæˆ‘æƒ³æƒ³å‚ç…§ç€å®˜ç½‘å’ŒæˆåŠŸçš„å¼€æºé¡¹ç›®æˆ‘ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ‰€ä»¥æœ€è¿‘ä¸€ç›´åœ¨æè¿™ä¸ªå‰ç«¯ï¼Œé‡åˆ°è¿‡ä¸å°‘é—®é¢˜ï¼Œå…³é”®æ˜¯è¿™äº›é—®é¢˜æˆ‘æ˜¯æ¯”è¾ƒéš¾ä¸‹æ‰‹çš„ï¼Œç”¨çš„å·²æœ‰æ¡†æ¶æ¯”è¾ƒæ–°ï¼Œå·²æœ‰çš„ä½¿ç”¨ç»éªŒä¹Ÿæ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥ç»å¸¸å¡ä½ï¼Œæ¯”è¾ƒéš¾æå“¦ã€‚</p>
<p>å¦å¤–ï¼Œæ¯æ¯åˆ°å‘¨æœ«é™¤äº†å¶å°”æœ‰çº¦èƒ½å‡ºå»ç©å¤–ï¼Œä¸€ç›´é—·åœ¨å±‹å­é‡Œï¼Œä¹Ÿæ˜¯è¿™æ®µæ—¶é—´è¿½å®Œäº†è€ã€Šä¸‰å›½ã€‹ç”µè§†å‰§ï¼ŒçœŸçš„å¥½çœ‹ï¼Œå¤ªå¥½çœ‹äº†ã€‚å››å¤§åè‘—é™¤äº†å›½äººè€³ç†Ÿèƒ½è¯¦çš„è¥¿æ¸¸ï¼Œæˆ‘æœ€ç†Ÿæ‚‰çš„å…¶å®æ˜¯æ°´æµ’ï¼Œä¹‹å‰æ‰€æœ‰ä¸€ç™¾å•å…«å°†ç»°å·å’Œå§“åæˆ‘å…¨éƒ¨èƒ½å¯¹ä¸Šï¼Œéšä¾¿é—®éƒ½èƒ½ç›´æ¥ç­”å‡ºæ¥ï¼Œå°±è¿™ç§ç¨‹åº¦ã€‚ä¸‰å›½æ›´å¤šè®°å¿†è¿˜æ˜¯å°æ—¶å€™çš„åŠ¨ç”»ç‰‡å’Œå¹²è„†é¢é›†å¡ï¼Œå¤§è‡´çš„æ•…äº‹éƒ½çŸ¥é“ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯å¤§è‡´ï¼Œå¾ˆå¤šéƒ½æ²¡æœ‰å¾ˆç†è§£ï¼Œç›´åˆ°æˆ‘çœ‹å®Œäº†è¿™éƒ¨æ— æ¯”ä¼˜ç§€çš„ã€Šä¸‰å›½ã€‹ï¼Œæœ‰å¾ˆå¤šæ„Ÿè§¦ã€‚ä¸œæ±‰æœ«å¹´çš„ä¹±ä¸–ï¼Œæ¡ƒå›­ä¸‰å…„å¼Ÿçš„æƒ…è°Šï¼Œå¤§å°†å†›ä¸åå¸¸ä¾ï¼Œè‘£å“çš„ä¸“æ¨ªè·‹æ‰ˆï¼Œå½“åˆæ„æ°”é£å‘ä¸‰å…¬å››ä¸–çš„è¢ç»ï¼Œè¶‹ç‚é™„åŠ¿æ­¦åŠŸç›–ä¸–çš„å•å¥‰å…ˆï¼Œæ›¹è€æ¿çš„å¿ƒç‹ æ‰‹è¾£å’Œé›„å¿ƒå£®å¿—ï¼Œä¹±ä¸–ä½³äººç¾è²‚è‰ï¼Œä¸ä¿¡é¬¼ç¥çš„æ±Ÿä¸œçŒ›è™å­™ä¼¯ç¬¦ï¼Œä¹‰è–„äº‘å¤©çš„å…³äºŒçˆ·ï¼Œå‹‡çŒ›æ— ç•çš„ä¸‰çˆ·ï¼ŒæœªçŒ®ä¸€è®¡çš„å¾å…ƒç›´ï¼Œåƒé‡Œèµ°å•éª‘çš„äº‘å¦¹ï¼Œé›„å§¿è‹±å‘ç¾½æ‰‡çº¶å·¾å‘¨éƒï¼Œå®ˆå£å¦‚ç“¶é²å­æ•¬ï¼Œåˆè‚¥æˆ˜ç¥å­™ä»²è°‹ï¼Œé èº¬å°½ç˜æ­»è€Œåå·²è¯¸è‘›ä¸ç›¸ï¼Œç»§æ‰¿è¯¸è‘›ä¸ç›¸æ„å¿—çš„å§œä¼¯çº¦ï¼Œæ¼”æŠ€è¶…ç¾¤å¸é©¬ä»²è¾¾ï¼Œé’Ÿä¼šé‚“è‰¾ç ´èœ€ï¼Œç­‰ç­‰ï¼Œå¤ªè¿‡ç²¾å½©</p>
<p>é™¤æ­¤ä¹‹å¤–è¦æ¥è§¦ä¸€ä¸‹ç»å…¸çš„ç”µå½±ï¼Œè¿™ä¸ªæ—¶ä»£èƒ½èŠ±è´¹ä¸€ä¸ªå¤šå°æ—¶ç”šè‡³æ˜¯ä¸¤ä¸ªå°æ—¶ï¼Œå®‰é™çš„æ²‰ä¸‹å¿ƒåœ°å»çœ‹å®Œä¸€æ•´éƒ¨ç”µå½±çš„äººææ€•ä¸å¤šäº†ã€‚ç»å…¸å°±æ˜¯ç»å…¸ï¼Œç»ä¹…ä¸è¡°ï¼Œæ€»èƒ½æœ‰äº›ä½“ä¼šå’Œæ”¶è·ã€‚</p>
<h2 id="å¥èº«ä¼šä¸Šç˜¾çš„å“¦">å¥èº«ä¼šä¸Šç˜¾çš„å“¦</h2>
<p>å¥èº«ä¼šä¸Šç˜¾æ˜¯çœŸçš„ï¼Œè‡ªä»æˆ‘å¼€å§‹åŠ›é‡è®­ç»ƒå°±åœä¸ä¸‹æ¥äº†ï¼Œä¹Ÿä¸æ˜¯ç›²ç›®çš„è¿½æ±‚å¤§é‡é‡ï¼Œå°±æ˜¯æ¯æ¬¡è„±ä¸‹è¡£æœç…§é•œå­ï¼Œçœ‹åˆ°è‡ªå·±çš„è¿›æ­¥å°±å¾ˆå¼€å¿ƒï¼</p>
<p>éƒ½è¯´ä¸Šç­ä¼šåˆ¶é€ å„ç§ç–¾ç—…ï¼Œæˆ‘åä¸ï¼Œå°±æ˜¯è¦è·Ÿä»–å¹²ï¼Œç°åœ¨èº«ä½“å€æ£’ï¼Œå°±æ˜¯å¶å°”å¤ªé¦‹å•¦ã€‚</p>
<h2 id="game">Game</h2>
<p>å› ä¸ºæˆ‘æ—©å·²å‘Šåˆ«pcæ¸¸æˆï¼Œåªå‰©ä¸‹æ‰‹æ¸¸å¯ä»¥æ¶ˆé£ï¼Œä¹Ÿåªæœ‰è”ç›Ÿæ‰‹æ¸¸å’Œé‡‘é“²é“²ç»™æˆ‘æ‰“å‘æ—¶å…‰ï¼Œå˜¿å˜¿</p>
<h2 id="ç»“">ç»“</h2>
<p>ä¸€å¥è¯ï¼Œæˆä¸ºæ›´å¥½çš„è‡ªå·±ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘å›æ¥äº†ï¼</title>
    <url>/article/f2f8b3b2.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>å¾ˆé•¿æ—¶é—´æ²¡æœ‰æ›´æ–°è‡ªå·±çš„åšå®¢äº†ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºè¿™æ®µæ—¶é—´ç»å†äº†å¤ªå¤šäº†ï¼Œå¾ˆå¤šäº‹éƒ½è®©æˆ‘çƒ¦èºï¼Œä¸€ç›´å¤„äºä¸€ä¸ªè‡ªå·±æ— æ³•æŒæ§çš„çŠ¶æ€ï¼Œåœ¨è¿™æ ·çš„çŠ¶æ€ä¸‹ï¼Œæˆ‘ç¡®å®ä¸çŸ¥é“æ€ä¹ˆå»â€œå›å½’â€ã€‚ç°åœ¨æˆ‘è°ƒæ•´çš„å·®ä¸å¤šäº†ï¼Œç»ˆäºå¯ä»¥æŒæ¡æˆ‘çš„ç”Ÿæ´»èŠ‚å¥äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘å›æ¥äº†ï¼ï¼ï¼ï¼ï¼</p>
<span id="more"></span>
<h1 id="æœˆ">1ã€2æœˆ</h1>
<p>è¿™ä»¶äº‹å¿…é¡»è¦ä»ç–«æƒ…å¼€å§‹è¯´èµ·ï¼Œ2021å¹´åº•å…¨å›½å·²ç»æœ‰äº†ç–«æƒ…çš„å°åå¼¹ï¼Œå°½ç®¡è¿™ä¸å‰å‡ å¹´ç›¸æ¯”ï¼Œå·²ç»ä¸ç®—æ˜¯ä¸¥å³»ï¼Œä½†è¿˜æ˜¯éœ€è¦æ³¨æ„çš„ã€‚ä¹Ÿå› ä¸ºè¿™æ ·ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ²¡æœ‰å›å®¶è¿‡å¹´ï¼Œåœ¨ä¸Šæµ·åº¦è¿‡äº†æˆ‘çš„ç¬¬ä¸€ä¸ªå¼‚åœ°æ˜¥èŠ‚ã€‚ä¸Šæµ·çš„æ˜¥èŠ‚ä¸è®¸å¤šå¤§åŸå¸‚çš„æ˜¥èŠ‚ä¸€æ ·ï¼Œè®¸è®¸å¤šå¤šâ€œæ‰“å·¥äººâ€éƒ½ä¹˜ä¸Šæ˜¥è¿çš„â€œç«è½¦â€ä¸å®¶äººæœ‹å‹å›¢èšäº†ï¼Œè¿™äº›å¤§åŸå¸‚ä¹Ÿå°±å˜å¾—ç©ºè™šäº†ä¸€äº›ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å®Œå…¨æ„Ÿå—ä¸åˆ°æ˜¥èŠ‚çš„ä¹è¶£ï¼Œçœ‹åˆ°çƒ­é—¹ä¹Ÿæ˜¯æƒ³â€œå¿«ä¹æ˜¯ä»–ä»¬çš„ï¼Œæˆ‘ä»€ä¹ˆä¹Ÿæ²¡æœ‰â€ã€‚</p>
<h1 id="æœˆ-1">3-5æœˆ</h1>
<p>æ˜¥èŠ‚è¿‡çš„å¾ˆå¿«ï¼Œä¸åƒå­¦ç”Ÿæ—¶ä»£ï¼Œæ˜¥èŠ‚æœ‰ç€ä¸€ä¸ªæœˆçš„å‡æœŸï¼Œå¯¹äºâ€œæ‰“å·¥äººâ€åªæœ‰å¯æ€œçš„å‡ å¤©ã€‚</p>
<p>å¾ˆå¿«ï¼Œå¼€å·¥äº†ã€‚</p>
<p>æŒ‰ç…§æˆ‘çš„è®¡åˆ’ï¼Œä¸€è¾¹å®ä¹ ä¸€è¾¹å®Œæˆæ¯•ä¸šè®¾è®¡ï¼Œä½†å°±åœ¨3æœˆä¸­æ—¬ï¼Œç–«æƒ…çˆ†å‘äº†ã€‚</p>
<p>ä»3æœˆä¸­æ—¬ï¼Œä¸Šæµ·é€æ¸å¼€å§‹è¿›å…¥å°æ§ã€ç®¡æ§ã€é˜²èŒƒçš„ä¸‰åŒºç®¡ç†æ¨¡å¼ï¼Œå¾ˆä¸å¹¸ï¼Œæˆ‘ä»¬å°åŒºå¾ˆæ—©å°±è¿›å…¥ç¬¬ä¸€æ‰¹å°æ§åŒºï¼Œè¢«è¿«å¼€å§‹è“„å‘è“„é¡»ğŸ˜‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒæŠ—åŸå’Œæ ¸é…¸å¦‚é›¨ç‚¹ä¸€æ ·ä¸æ–­æ‰“æ¥ã€‚åˆšå¼€å§‹è¿˜å¯ä»¥ç‚¹å¤–å–ï¼Œä¹°ç‚¹ä¸œè¥¿åƒï¼Œè§£å†³æ¸©é¥±é—®é¢˜ï¼Œä½†éšç€ç–«æƒ…å½¢å¼ä¸¥å³»ï¼ŒçœŸçš„æ˜¯æ··ä¸åˆ°åƒçš„ï¼Œå¯æ€œå·´å·´ã€‚</p>
<p>è¿™æ®µæ—¶é—´æ¯å¤©è§£å†³åƒé¥­é—®é¢˜çœŸçš„æ˜¯é¦–è¦å¤§äº‹ï¼Œè°èƒ½æƒ³åˆ°ï¼Œåœ¨21ä¸–çºªçš„ä¸Šæµ·ç«Ÿç„¶è¿˜è¦æ¯å¤©ä¸ºåƒé¥­é—®é¢˜æ‹…å¿ƒã€‚ğŸ˜­</p>
<p>å°è¯•å¾ˆå¤šä¹°èœAPPï¼ˆç¾å›¢ã€é¥¿äº†ä¹ˆã€ç›’é©¬ã€å®å’šç­‰ç­‰ï¼Œè¿™äº›APPä¹Ÿå› ä¸ºä¸Šæµ·ç–«æƒ…å†²ä¸ŠAPPæ¦œé¦–ä¹‹ä½ğŸ¤”ï¼‰ï¼Œå®šä¸Šæ—©æ—©çš„é—¹é’Ÿï¼Œå€’æ•°10ä¸ªæ•°ï¼Œå¼€æŠ¢ï¼Œç¬é—´ï¼Œæç¤ºçš„éƒ½æ˜¯â€œç³»ç»Ÿæ‹¥æŒ¤ï¼Œè¯·ç¨åå†è¯•â€ï¼Œå®Œå…¨è¿›ä¸å»çš„ï¼Œå†åˆ·æ–°ä¸€ä¸‹ï¼Œå¥½äº†ï¼Œä¸ç”¨æŠ¢äº†ï¼Œå·²ç»æ²¡äº†ã€‚ã€‚ã€‚</p>
<p>è¿™æ®µæ—¶é—´æ˜¯è¿‡çš„æœ€å·®çš„æ—¶é—´ï¼Œæˆ‘éƒ½æ˜¯é ä¸€äº›é€Ÿé£Ÿï¼ˆæ–¹ä¾¿é¢ã€é¢åŒ…ä¹‹ç±»ï¼‰æ’‘ä¸‹å»çš„ã€‚è¿˜æœ‰é™¤äº†æ¯å¤©è¦æ‹…å¿ƒåƒé¥­é—®é¢˜å¤–ï¼Œè¿˜æœ‰æ¯•ä¸šè®¾è®¡è®©äººå¿ƒçƒ¦ã€‚æ‡‚çš„éƒ½æ‡‚ï¼Œç¬¬ä¸€æ¬¡åšæ¯•è®¾å†™è®ºæ–‡ï¼Œå®Œå…¨æ²¡ä¸ªè°±ï¼Œä¸çŸ¥é“å¦‚ä½•ä¸‹ç¬”ã€‚ã€‚ã€‚</p>
<p>åˆè¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œæœ‰äº†ä¸€ç‚¹ç¤¾åŒºç‰©èµ„ï¼ŒåŒæ—¶ä¹Ÿé€šè¿‡ä¸€äº›æ¸ é“ä¹°åˆ°äº†ä¸€äº›è”¬èœã€æ²¹ç›åˆ€ä¹‹ç±»çš„ä¸œè¥¿ï¼Œå¯ä»¥åšç®€å•â€œé£Ÿç‰©â€äº†ã€‚ğŸ¥¶</p>
<p>ä»æ˜¥æ—¥åˆ°ç‚å¤ï¼Œæ•´æ•´3ä¸ªæœˆï¼Œä»å¨è‰ºä¸Šè®²ç¡®å®æœ‰å¾ˆå¤§é•¿è¿›ï¼Œä½†æ˜¯çœŸçš„è¦æ†‹ç–¯äº†ï¼Œä¸èƒ½å‡ºå°åŒºæ˜¯æœ€åŸºç¡€çš„ï¼Œä¸€æ—¦æœ‰å°æ¥¼å°æˆ·çš„ç›´æ¥å¯¸æ­¥éš¾ç§»ã€‚åŒæ—¶å­¦æ ¡é‚£è¾¹è¿˜æœ‰å¥½å¤šäº‹ï¼Œä½†å› ä¸ºæˆ‘è¿™è¾¹ç–«æƒ…çš„åŸå› ï¼Œæˆ‘å¾ˆå¤šäº‹éƒ½æ— æ³•å®Œæˆï¼Œè¦ä¹ˆæ‰¾äººå¸®å¿™ï¼Œè¦ä¹ˆåªèƒ½ç¡¬æ‹–ä¸‹å»ç­‰å¾…è§£å°ã€‚</p>
<p>æ²¡æœ‰åŠæ³•ï¼Œä¸çŸ¥é“æ˜¯ç–«æƒ…ç°çŠ¶è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆåŸå› ï¼Œä»3æœˆåˆ°ç°åœ¨ï¼Œä¸æ–­æœ‰è£å‘˜çš„æ¶ˆæ¯ï¼ˆä¸»è¦æŒ‡äº’è”ç½‘è¡Œä¸šï¼‰ï¼Œå…·ä½“çš„çŸ¥é“çš„å½“ç„¶éƒ½çŸ¥é“äº†ï¼Œä¸çŸ¥é“å°±å»æœä¸€äº›å§ã€‚ğŸ˜‚</p>
<p>å¹´åˆå¤§äº‹ä»¶ä¸»è¦å°±æ˜¯ä¿„ä¹Œå¤§æˆ˜å’ŒåŠ¨è¡çš„è‚¡å¸‚ï¼ˆåŸºæ°‘ä»¬åº”è¯¥éƒ½çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆï¼‰å§ã€‚å…·ä½“åŸå› æˆ‘ä¹Ÿåˆ†æä¸å‡ºä¸ªå¤§æ¦‚ï¼Œåæ­£ç°å®å°±æ˜¯è£å‘˜ã€æ¯ä¸‰æ–¹ï¼Œæˆåƒä¸Šä¸‡çš„äººè¿›å…¥æµåŠ¨äººæ‰å¸‚åœºï¼Œé‡‘ä¸‰é“¶å››åœ¨ä»Šå¹´æˆä¸ºä¸ªç¬‘è¯ã€‚æœ‰å¹¸ï¼Œæˆ‘ä¹Ÿæˆä¸ºå…¶ä¸­ä¸€å‘˜ï¼Œç»“æŸäº†å®ä¹ å’Œæœªæ¥çš„å·¥ä½œè®¡åˆ’ã€‚ç–«æƒ…åŠ ä¸Šå¤§ç¯å¢ƒçš„å½±å“ï¼Œæˆ‘çš„çŠ¶æ€å˜å¾—å¾ˆå·®ï¼Œæ‡’æ•£ã€æ‹–æ²“å’Œç„¦è™‘æˆä¸ºæˆ‘è¿™æ®µæ—¶é—´çš„ä¸»æ—‹å¾‹ã€‚</p>
<p>æœ€åè§£å°å‰çš„ä¸€ä¸ªæœˆè¿‡çš„ç®—æ˜¯å¥½çš„ï¼ˆä¸ä¹‹å‰ç›¸æ¯”ï¼‰ï¼Œå¾ˆå®¹æ˜“èƒ½ä¹°åˆ°åƒçš„ï¼Œæ¯å¤©åªæ˜¯åƒå–ç©ä¹ï¼Œæ„Ÿå¹è‡ªå·±çœŸçš„è¦åºŸäº†ï¼Œä½†å´ä¸€ç›´æ²¡å†³å¿ƒå®Œå…¨æ”¹å˜ã€‚</p>
<h1 id="æœˆ-2">6æœˆ</h1>
<p>æˆ‘ä»¬è¿™ä¸ªå°åŒºåº”è¯¥æ˜¯æœ€æ™šè§£å°çš„ä¸€æ‰¹å°åŒºï¼Œç›´åˆ°6æœˆ3å·è¿˜æ˜¯4å·æ‰è¿ˆå‡ºäº†é€šå¾€æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚é‚£å¤©ï¼Œç†äº†ç•™äº†3ä¸ªæœˆçš„å¤´å‘ï¼Œä¹°äº†é›ªç³•åƒã€‚ä»åˆæ˜¥ä¸€ç›´åˆ°ç«¯åˆï¼Œå“ã€‚ğŸ¤§ä¹‹åé©¬ä¸Šå¤„ç†ä¸€äº›å­¦æ ¡ã€æ¯•ä¸šã€å·¥ä½œçš„äº‹æƒ…äº†ã€‚</p>
<p>è§£å°äº†ä¸€æ®µæ—¶é—´ï¼Œå¾ˆå¤šå…¬å¸ä¹Ÿæ¸æ¸å¼€å§‹å¤å·¥ï¼Œäººä»¬åˆå¼€å§‹å¿™èµ·æ¥äº†ã€‚è€Œæˆ‘å‘¢ï¼Œåœ¨ä¸Šæµ·åˆå¾…äº†æ•´æ•´ä¸€ä¸ª6æœˆã€‚ä»ä¸Šæµ·è§£å°åå°±æœ‰å¤§æ‰¹äººå‘˜å¼€å§‹è¿”ä¹¡è¡ŒåŠ¨ï¼Œæœ‰çš„æ˜¯çŸ­æœŸå›ä¹¡æ¢æœ›ï¼Œæœ‰çš„æ˜¯é•¿æœŸç¦»å»è°‹æ±‚æ–°çš„å‘å±•ã€‚å¯¹äºæˆ‘ï¼Œå› ä¸ºå®¶ä¹¡çš„ç–«æƒ…æ”¿ç­–å’Œè‡ªå·±è¿˜æœ‰äº›äº‹æƒ…æ²¡æœ‰å¤„ç†å®Œï¼Œæ€•åœ¨éš”ç¦»æœŸé—´å—åˆ°å½±å“ä¸€ç›´æ²¡æœ‰å›å»ã€‚è¿™ä¹Ÿå¯¼è‡´æˆ‘å¤„äºä¸€ç§ååˆ†å°´å°¬çš„å¢ƒåœ°â€”â€”æœ‰å®¶ï¼Œå›ä¸äº†ã€‚</p>
<p>ç»å†è¿™åŠå¹´ï¼ŒçœŸçš„æˆé•¿å¥½å¤šï¼Œä¸ç®¡æ˜¯ç”Ÿæ´»è¿˜æ˜¯å·¥ä½œéƒ½æœ‰å¾ˆå¤šæ–°è®¤è¯†ã€‚è¿™ç§ä¸œè¥¿å¾ˆéš¾è®²ï¼Œåªèƒ½ä¸ªäººå»ä½“ä¼šã€‚è¿™æ®µæ—¶é—´å¦‚æœèƒ½ç»Ÿè®¡æˆ‘å¾®ä¿¡è¯­éŸ³/è§†é¢‘ç”µè¯èŠå¤©æ—¶é•¿ï¼Œé‚£å°†éå¸¸æƒŠäººã€‚å°±åœ¨è¿™æ®µæ—¶é—´ï¼Œæˆ‘æ—¶ä¸æ—¶åœ¨ä¸€äº›ç¾¤æˆ–å’Œä¸€äº›äººå¾®ä¿¡ç”µè¯/è§†é¢‘èŠå¤©ï¼Œè½»èŠèŠåŠå°æ—¶ï¼Œé•¿èŠç›´æ¥3ã€4å°æ—¶ã€‚å¹³å¸¸æˆ‘æ˜¯æ²¡è¿™ä¹ˆå¤šè¯ï¼Œå®åœ¨æ˜¯æ†‹ç–¯äº†ï¼Œå°±çèŠã€èƒ¡æ‰¯ï¼Œæ‰¯ä¸Šå‡ ä¸ªå°æ—¶ï¼Œå¯æœ‰æ„æ€äº†ã€‚ğŸ˜</p>
<p>ä¹Ÿæ˜¯åœ¨è¿™ä¸ªæœˆç¡®å®šå°†è¦å»æ­å·ï¼Œåœ¨æœˆåº•æŠŠæ‰€æœ‰äº‹äº†ç»“äº†ï¼Œæ”¶æ‹¾å¥½è£…å¤‡ï¼Œå†³å¿ƒé‡æ–°å‡ºå‘ï¼Œç¦»å¼€ä¸Šæµ·ã€‚</p>
<h1 id="æœˆ-3">7æœˆ</h1>
<p>ä¹Ÿå°±æ˜¯ç°åœ¨ã€‚</p>
<p>ä¹˜ç€å¼€å¾€æ­å·çš„é«˜é“ï¼Œç¦»å¼€äº†å¾…äº†åŠå¹´çš„ä¸Šæµ·ã€‚å¯æƒœï¼Œå¾…äº†è¿™ä¹ˆä¹…ä¹Ÿæ²¡æœ‰å¥½å¥½è½¬ä¸€è½¬ï¼Œå¾ˆå¤šä¸Šæµ·çŸ¥ååœ°æ ‡éƒ½æ²¡è§è¿‡ã€‚ğŸ˜‘
æœ‰æœºä¼šå†æ¥å§ï¼</p>
<h1 id="ç»“">ç»“</h1>
<p>ä»Šå¹´å‘ç”Ÿäº†å¥½å¤šäº‹ï¼Œä½†æ„¿æ˜å¤©ä¼šæ›´å¥½å§ï¼</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=1351664230&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘ä»¬ä¼šå˜å¾—è¶Šæ¥è¶Šå­¤ç‹¬å—</title>
    <url>/article/da855e87.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ç›¸ä¿¡ç»å¤§å¤šæ•°äººéƒ½å·²ç»çœ‹åˆ°äº†<a
href="http://www.stats.gov.cn/">å›½å®¶ç»Ÿè®¡å±€</a>å‘å¸ƒçš„å…³äº2021ä¸­å›½äººå£çš„ä¸€äº›æ•°æ®äº†å§ï¼Œå…¶ä¸­æœ€å¼•äººæ³¨æ„çš„å°±æ˜¯â€œ2021ä¸­å›½äººå£å‡€å¢é•¿48ä¸‡â€è¿™ä¸ªæ•°æ®</p>
<p>å¤šå®¶ä¸»æµåª’ä½“éƒ½å¯¹äºè¿™ä»½æŠ¥å‘Šè¿›è¡Œäº†æŠ¥é“åˆ†æ</p>
<p>æ–°åç½‘ï¼š<a
href="http://www.news.cn/politics/2022-01/17/c_1128272028.htm">http://www.news.cn/politics/2022-01/17/c_1128272028.htm</a></p>
<p>å›½å®¶ç»Ÿè®¡å±€ï¼š<a
href="http://www.stats.gov.cn/tjsj/sjjd/202201/t20220118_1826538.html">http://www.stats.gov.cn/tjsj/sjjd/202201/t20220118_1826538.html</a></p>
<p>æœç‹ç½‘ï¼š<a
href="https://www.sohu.com/a/517495560_115571">https://www.sohu.com/a/517495560_115571</a></p>
<p>äººæ°‘ç½‘ï¼š<a
href="http://finance.people.com.cn/n1/2022/0117/c1004-32333012.html">http://finance.people.com.cn/n1/2022/0117/c1004-32333012.html</a></p>
<p>å¤®è§†ç½‘ï¼š<a
href="https://news.cctv.com/2022/01/17/ARTIurqSgQPHzFJLQhdEuPog220117.shtml">https://news.cctv.com/2022/01/17/ARTIurqSgQPHzFJLQhdEuPog220117.shtml</a></p>
<p>å½“ç„¶è¿˜åŒ…æ‹¬ï¼ŒBBCã€åå°”è¡—æ—¥æŠ¥ç­‰å›½å¤–åª’ä½“</p>
<p>æ•°æ®å…¬å¸ƒåï¼Œç†æ‰€å½“ç„¶çš„å†²ä¸Šå½“å¤©çƒ­æœï¼Œæˆä¸ºæ‰€æœ‰äººäº‰ç›¸è®¨è®ºçš„è¯é¢˜ã€‚</p>
<p>æˆ‘ä¹Ÿå°±æƒ³ä¾æ­¤å±•å¼€æˆ‘çš„è®¨è®ºâ€œæˆ‘ä»¬ä¼šè¶Šæ¥è¶Šå­¤ç‹¬å—ï¼Ÿâ€</p>
<span id="more"></span>
<h2 id="ç¬¬ä¸€ååº”">ç¬¬ä¸€ååº”</h2>
<p>å½“æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™æ ·çš„æ•°æ®ï¼Œç¬¬ä¸€ååº”å°±æ˜¯éœ‡æƒŠï¼Œå°½ç®¡æˆ‘ä¹‹å‰æ—©æœ‰â€œé¢„è¨€â€â€”â€”ç»“å©šçš„è¶Šæ¥è¶Šå°‘ï¼Œè¦å­©å­çš„ä¹Ÿä¼šè¶Šæ¥è¶Šå°‘ã€‚å¯çœŸå½“æˆ‘çœ‹åˆ°è¿™æ ·çš„æ•°æ®æ—¶ï¼Œè¿˜æ˜¯å¾ˆéœ‡æƒŠçš„ï¼ŒçœŸæ²¡æƒ³åˆ°è¿™ä¹ˆå¿«å•Šã€‚</p>
<p>çœŸçš„è¦å‡ºç°äº†ï¼ä¸­å›½äººå£ä¼šè´Ÿå¢é•¿å—ï¼Ÿç§ç§æƒ³æ³•å¾ˆè‡ªç„¶çš„å‡ºç°åœ¨è„‘å­ä¸­ã€‚</p>
<h2 id="å‘å¥½">å‘å¥½</h2>
<p>è¿˜æ˜¯å…ˆå£°æ˜ï¼Œæˆ‘ä¸æ˜¯ä¸“å®¶ï¼Œæˆ‘åªæ˜¯å‘è¡¨ä¸€ç‚¹è‡ªå·±çš„æµ…è–„è®¤è¯†ï¼Œæ„è§ä¸åŒï¼Œè¿˜æœ›è§è°…ã€‚</p>
<p>æœ‰æ•°æ®è¡¨æ˜ï¼ˆæ˜¯çœŸæœ‰æ•°æ®ï¼Œä¸æ˜¯æªè¾ï¼‰ï¼Œè¿‘å¹´æ¥ï¼Œä¸­å›½äººå£è‡ªç„¶å¢é•¿ç‡è¿ç»­é™ä½ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™çœŸçš„è¦ä»å¥½ä¹…è¯´èµ·äº†ã€‚</p>
<p>æˆ‘ä»¬ä¸­å­¦æ—¶éƒ½å­¦è¿‡åœ°ç†ï¼Œå…¶ä¸­æœ‰ä¸€èŠ‚è¯¾è®²çš„æ˜¯å‘è¾¾å›½å®¶ä¸å‘å±•ä¸­å›½å®¶ï¼Œå…¶ä¸­æˆ‘è®°å¾—ï¼Œé‚£æ—¶ä¹¦æœ¬ä¸Šå†™çš„å‘è¾¾å›½å®¶ï¼ˆä¸»è¦æ˜¯å¤§éƒ¨åˆ†è¥¿æ¬§å›½å®¶ã€ç¾å›½ã€åŠ æ‹¿å¤§ã€æ¾³å¤§åˆ©äºšã€æ–°è¥¿å…°ã€æ—¥æœ¬ã€éŸ©å›½ç­‰ï¼‰ï¼Œä»–ä»¬çš„äººå£è‡ªç„¶å¢é•¿ç‡å°±å¾ˆä½ï¼Œç”šè‡³ä¸€äº›å›½å®¶å¢é•¿ç‡ä¸€ç›´éƒ½æ˜¯è´Ÿæ•°ï¼›è€Œå¯¹äºå‘å±•ä¸­å›½å®¶ï¼ˆé™¤å‘è¾¾å›½å®¶å¤–ï¼Œå…¶ä½™ç»å¤§å¤šæ˜¯éƒ½æ˜¯å•¦ï¼‰ï¼Œè¿™äº›äººå£è‡ªç„¶å¢é•¿ç‡å°±æ¯”è¾ƒé«˜ã€‚å½“æ—¶çš„ç»“è®ºå¤§æ¦‚å°±æ˜¯è¶Šå‘è¾¾çš„å›½å®¶äººå£è‡ªç„¶å¢é•¿ç‡åè€Œè¶Šä½ï¼Œæ˜¯è´Ÿç›¸å…³çš„ã€‚é‚£è¿™æ ·çœ‹ï¼Œæˆ‘ä»¬ä¸­å›½æ˜æ˜¾æ˜¯å¾€å¥½çš„æ–¹å‘å‘å±•ä¸­çš„å‘€ï¼è¿™ä¸ªå…¨ä¸–ç•Œéƒ½ä¸èƒ½å¦å®šï¼Œä¸ç„¶æ€ä¹ˆä¼šä½¿å¾—è€éœ¸ä¸»ä»¬æ’•ç ´è„¸çš®éåˆ¶æˆ‘ä»¬å‘¢ã€‚ä¸­å›½å‘å¥½ï¼Œå…¨ä¸–ç•Œéƒ½çœ‹åˆ°äº†ï¼Œä¸­å›½äººæ›´æ˜¯è‡ªè±ªåˆæ¬£æ…°ï¼Œæ¯•ç«Ÿæˆ‘ä»¬çš„ä»Šå¤©éƒ½æ˜¯æˆ‘ä»¬ç”¨å‹¤åŠ³çš„åŒæ‰‹å’Œè‰°è¾›çš„æ±—æ°´æ‹¼æ¥çš„ã€‚</p>
<h2 id="å¤ªå¿«äº†">å¤ªå¿«äº†</h2>
<p>å›æƒ³ä¸Šé¢çš„è¯é¢˜èµ·æºï¼Œä¸ºä»€ä¹ˆè¯´â€œè¶Šå‘è¾¾çš„å›½å®¶ï¼Œäººå£è‡ªç„¶å¢é•¿ç‡è¶Šä½å‘¢ï¼Ÿâ€è¿™ä¹Ÿæ˜¯æˆ‘è¦è®¨è®ºçš„â€œæˆ‘ä»¬ä¼šè¶Šæ¥è¶Šå­¤ç‹¬å—ï¼Ÿâ€ã€‚</p>
<p>é¦–å…ˆè¿˜æ˜¯æˆ‘ä¹‹å‰æ–‡ç« é‡Œå°±æåˆ°çš„ï¼Œè¿‘å‡ åå¹´æ¥å‘å±•å¾—å¤ªå¿«äº†ï¼Œå‰åå¯¹æ¯”ç›¸åŒæ—¶é—´å†…ï¼Œæ–°å¢çš„â€œçŸ¥è¯†â€å¤ªå¤šäº†ï¼Œè¿™é‡Œç”¨â€œçŸ¥è¯†â€è¿™ä¸ªè¯æ˜¯å› ä¸ºæˆ‘æ‰¾ä¸åˆ°åˆé€‚çš„è¯æ¦‚æ‹¬ã€‚æ€»ç»“æ¥è¯´â€œçŸ¥è¯†â€å¯†åº¦å˜å¤§äº†ï¼Œâ€œçŸ¥è¯†â€/æ—¶é—´è¿™ä¸ªæ¯”å€¼åœ¨å˜å¤§ã€‚è¿™è¯´æ˜äº†ä»€ä¹ˆå‘¢ï¼Ÿå½“ä¸‹å¹´è½»äººæ›´éš¾äº†ï¼Œä»–ä»¬?ä¸ï¼Œæ˜¯æˆ‘ä»¬ï¼Œç›¸åŒæ—¶é—´å†…ç»å†çš„æ›´å¤šäº†ï¼Œå‹åŠ›æ›´å¤§äº†ã€‚æˆ¿å­è½¦å­ä»€ä¹ˆéƒ½ä¸ç”¨è¯´äº†ï¼Œæ›´å…³é”®çš„æ˜¯ï¼Œè´«å¯Œå·®è·è¶Šæ¥è¶Šå¤§ï¼Œè€Œä¸”å·²ç»å¯Œäº†çš„ä¼šè¶Šæ¥è¶Šå¯Œï¼Œç©·çš„å´å¾ˆéš¾æ‘†è„±å›°å¢ƒã€‚</p>
<h2 id="ç‹¬ä¸€æ— äºŒ">ç‹¬ä¸€æ— äºŒ</h2>
<p>å¦‚æœæˆ‘ä¸çŸ¥é“ï¼Œå…¶å®æˆ‘ä¸ç—›è‹¦ï¼Œä½†æˆ‘çŸ¥é“ã€‚å°±æ˜¯è¯´ï¼Œåœ¨ç°åœ¨è¿™æ ·å‘è¾¾çš„äº’è”ç½‘ç¯å¢ƒä¸‹ï¼Œä¿¡æ¯éƒ½æ˜¯äº’é€šçš„ï¼ŒåŠ ä¸Šæ•´ä½“æ•™è‚²æ°´å¹³æé«˜ï¼Œæ‰€æœ‰äººï¼Œæ²¡é”™æˆ‘æ˜¯è¯´æ‰€æœ‰äººï¼Œéƒ½ä¼šåœ¨è¿™æ ·çš„å¿«æ—¶ä»£ä¸‹å‘ç”Ÿä¸€äº›å˜åŒ–ã€‚æ¯ä¸ªäººéƒ½æ›´åŠ ç‹¬ä¸€æ— äºŒï¼Œæ— æ³•æ›¿ä»£ã€‚æ¯ä¸ªäººéƒ½æ›´åŠ æœ‰æ€æƒ³ï¼Œéƒ½èƒ½ä¸ºè‡ªå·±ä¸ºæ—¶ä»£å‘å£°ã€‚éƒ½å˜å¾—ä¸é‚£ä¹ˆç®€å•äº†ï¼Œå¤æ‚äº†èµ·æ¥ã€‚</p>
<h2 id="ä¸å°†å°±">ä¸å°†å°±</h2>
<p>æˆ‘ä»¬å·²ç»é€šè¿‡ç½‘ç»œçœ‹è¿‡å¤ªå¤šå¤ªå¤šï¼Œå¾ˆéš¾å†å°†å°±äº†ã€‚ä¸æ˜¯è¿‡å»çš„â€œçˆ¶æ¯ä¹‹å‘½åª’å¦ä¹‹è¨€â€äº†ï¼Œå°±ç®—æ˜¯åˆ°äº†æœ€åå¢ƒåœ°ä¹Ÿä¸æ„¿æ„å‹‰å‹‰å¼ºå¼ºè¿‡ä¸€è¾ˆå­ã€‚é‡ä¸åˆ°å°±ä¸å¯ä»¥å°†å°±ï¼</p>
<h2 id="çœ‹å¾—å¼€">çœ‹å¾—å¼€</h2>
<p>ä¹Ÿå°±å› ä¸ºæ—¶ä»£å‹åŠ›ï¼Œå¾ˆå¤šé€‰æ‹©ï¼Œç‹¬è‡ªä¸€äººï¼Œæ´»å‡ºç²¾å½©ã€‚ç°åœ¨å¾ˆå¤šå‘€ï¼Œèµšå¤Ÿä¸€äº›é’±ï¼Œè£¸è¾ï¼Œç©å»ï¼ä½•å…¶æ½‡æ´’è‡ªåœ¨å•Šï¼</p>
<h1 id="ç»“">ç»“</h1>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=1441758494&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
<p>æ¯ä¸ªäººæœ‰å±äºæ¯ä¸ªäººæ´»æ³•ã€‚</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘æœ€æƒ³æ‹¥æœ‰çš„è¶…èƒ½åŠ›</title>
    <url>/article/bc5ba5ee.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>å¦‚é¢˜ï¼Œè¿™ç¯‡æ–‡ç« â€œå¤©é©¬è¡Œç©ºâ€ï¼Œå°±æ˜¯æƒ³è¯´ä¸€è¯´è‡ªå·±æœ€æƒ³æ‹¥æœ‰çš„è¶…èƒ½åŠ›ï¼</p>
<p>å¦‚æœæœ‰å…´è¶£ï¼Œç»§ç»­çœ‹ä¸‹å»å§ï¼</p>
<span id="more"></span>
<h1 id="è¶…èƒ½åŠ›">è¶…èƒ½åŠ›</h1>
<p>è¶…èƒ½åŠ›ï¼Ÿ</p>
<p>åº”è¯¥æ‰€æœ‰äººéƒ½æœ‰æƒ³è¿‡å§ï¼Œæ˜¯åçˆ±ç‚¹çŸ³æˆé‡‘è¿˜æ˜¯é•¿ç”Ÿä¸è€å‘¢ï¼Ÿ</p>
<p>ç¡®å®ï¼Œå°å­©å­ä¹Ÿä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æ»¡è¶³çš„ï¼Œæˆ‘å¿ƒé‡Œä¹Ÿæ˜¯</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1510578430145_8ed8c8c8c87311e79e1200163e00073a.44a1mmt6iro0.webp"
alt="æˆ‘å…¨éƒ½è¦" />
<figcaption aria-hidden="true">æˆ‘å…¨éƒ½è¦</figcaption>
</figure>
<p>éè¦æŠŠè‘«èŠ¦ä¸ƒå…„å¼Ÿå’ŒåäºŒç”Ÿè‚–å‡‘é½ä¸å¯ï¼Œç”šè‡³è¿˜å¸¦ä¸ŠXæˆ˜è­¦ï¼Œå“ˆå“ˆå“ˆ</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1486238012585_9b6c40cfeb1311e6ae4b80e650026b90.32kbpbb4tg20.webp"
alt="æ— æ•Œ" />
<figcaption aria-hidden="true">æ— æ•Œ</figcaption>
</figure>
<p>butï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯â€œæœ€â€ï¼Œå¹¶ä¸”æ²¡æœ‰â€œä¹‹ä¸€â€ï¼Œæ‰€ä»¥ä¸€å®šè¦é€‰å‡ºä¸€ä¸ª</p>
<p>ä½ ä¼šé€‰ä»€ä¹ˆå‘¢ï¼ŸğŸ¤”</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1484941269778_647a9ee1df4811e6a9da80e650026b90.43d98pxgkn80.webp"
alt="é€‰å“ªä¸ªå‘¢" />
<figcaption aria-hidden="true">é€‰å“ªä¸ªå‘¢</figcaption>
</figure>
<h1 id="ç¬é—´ç§»åŠ¨">ç¬é—´ç§»åŠ¨</h1>
<p>æœ‰æƒ³åˆ°å—ï¼Ÿæˆ‘ç¡®å®æœ€æƒ³æ‹¥æœ‰ç¬é—´ç§»åŠ¨çš„è¶…èƒ½åŠ›ï¼ï¼ï¼</p>
<p>ä¸æ˜¯å…”ç¬¦å’’ï¼Œä¸æ˜¯å¿«é“¶ï¼Œå°±æ˜¯ç¬é—´ç§»åŠ¨ï¼Œæœ‰ç‚¹åƒã€Šä¸ƒé¾™ç ã€‹ä¸­æ‚Ÿç©ºçš„</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/61f5576a2ab3f51d918e7e06.gif"
alt="ç¬é—´ç§»åŠ¨" />
<figcaption aria-hidden="true">ç¬é—´ç§»åŠ¨</figcaption>
</figure>
<p>ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™ä¸ªå‘¢ï¼Ÿ</p>
<p>ç‚¹çŸ³æˆé‡‘ï¼Œé•¿ç”Ÿä¸è€ï¼Œä¸Šå¤©å…¥åœ°ï¼Œé‡‘åˆšä¸åã€‚ã€‚ã€‚</p>
<p>è¿™äº›ä¸é¦™å—ï¼Ÿ</p>
<h1 id="ç†ç”±">ç†ç”±</h1>
<p>é‚£å°±è¯´ä¸€è¯´æˆ‘ç†ç”±</p>
<p>é¦–å…ˆï¼Œè¿™ä¸œè¥¿ä¸éœ€è¦æ¯”è¾ƒï¼Œä¸ï¼Œæ˜¯ä¸èƒ½æ¯”è¾ƒ</p>
<p>è™½ç„¶å°æ—¶å€™ï¼Œç»å¸¸è¿™æ ·æƒ³ï¼š</p>
<p>æˆ‘ï¼šæˆ‘å¯ä»¥å‘å°„æ¿€å…‰ï¼Œæ‰“åˆ°ä½ ï¼Œä½ å°±æ­»äº†â˜ ï¸</p>
<p>ä½ ï¼šé•¿ç”Ÿä¸è€ï¼Œæ— æ•Œï¼Œæ­»ä¸æ‰ğŸ˜</p>
<p>æˆ‘ï¼šé‡‘åˆšç‹¼æœ€ç‰›ï¼Œæ­»ä¸æ‰</p>
<p>ä½ ï¼šä¸‡ç£ç‹å®Œç¾å…‹åˆ¶</p>
<p>æˆ‘ï¼šğŸ˜’</p>
<p>ä½ ï¼šğŸ˜</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/61f557382ab3f51d918e3fb3.gif"
alt="ä½ ä»¬ä¸è¦å†æ‰“äº†" />
<figcaption aria-hidden="true">ä½ ä»¬ä¸è¦å†æ‰“äº†</figcaption>
</figure>
<p>ç»å¸¸è¿™æ ·æ¯”æ¥æ¯”å»ï¼Œæœ€åè°ä¹Ÿä¸æœï¼Œç°åœ¨æƒ³æƒ³å¯çœŸæœ‰æ„æ€</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1490459602055_c2d4a757117811e79bd080e650026b90.4ju7g80i8za0.webp"
alt="æˆ‘ä»¬å†ä¹Ÿå›ä¸å»äº†" />
<figcaption aria-hidden="true">æˆ‘ä»¬å†ä¹Ÿå›ä¸å»äº†</figcaption>
</figure>
<p>å°±åƒè±¡æ£‹ï¼Œä¸­å›½è±¡æ£‹ï¼Œå“ªæœ‰ä»€ä¹ˆè°ä¸€å®šå¼ºå•Šï¼Œè¿˜æœ‰åˆä¸æ˜¯æ¥šæ²³æ±‰ç•Œï¼Œæ¯”ä¸ªé”¤å­å•Šï¼Ÿ</p>
<p>ä¸èƒ½è€æƒ³ç€é’¢é“ä¾ å’Œèœ˜è››ä¾ è°å‰å®³å§ï¼Œé‚£ä¸æ— ä¼‘æ­¢äº†</p>
<p>é€‰æ‹©ç¬é—´ç§»åŠ¨ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºæ„Ÿå—æ¯”è¾ƒæ·±ï¼Œæ€ä¹ˆè¯´ï¼Ÿå…ˆæ¥ä¸ªä¾‹å­ï¼Œç‚¹çŸ³æˆé‡‘ä¸å°±æ˜¯æœ‰é’±å—ï¼Ÿç¡®å®å¯ä»¥åšå¾ˆå¤šäº‹</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/F5388113255E6DB829D7FFE9095DF7779AF0BF08_size26_w440_h440.4h9jvtovxte0.webp"
alt="é‡‘é’±è±¹" />
<figcaption aria-hidden="true">é‡‘é’±è±¹</figcaption>
</figure>
<p>èµ¶ä¸Šäº†ï¼Œé‡‘é’±è±¹ğŸ¥°</p>
<p>è¿˜æœ‰é•¿èº«ä¸è€ï¼Œä¸Šå¤©å…¥åœ°ï¼Œé‡‘åˆšä¸åï¼Œè¿™äº›éƒ½èƒ½ç”¨ä¸Šå—ï¼Ÿ</p>
<p>æˆ‘è¦é€ƒç¦»è¿™ä¸ªå…¬äº¤ï¼ˆè¹­çƒ­åº¦ğŸ¶ï¼‰ã€</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1000.3rqopdiz2us0.webp"
alt="å¼€ç«¯å…¬äº¤è½¦" />
<figcaption aria-hidden="true">å¼€ç«¯å…¬äº¤è½¦</figcaption>
</figure>
<p>é©¬ä¸Šåˆ°åŒ—æ¬§çœ‹æå…‰ã€ç¬é—´åˆ°å®¶ï¼Œè¿™äº›å®ƒä»¬ï¼ˆä¸Šé¢é‚£äº›è¶…èƒ½åŠ›ï¼‰åŠä¸åˆ°å•Šï¼Œæ·±æœ‰ä½“ä¼šæ˜¯å› ä¸ºé«˜ä¸­ï¼Œæ¯å‘¨ä¸Šä¸‹å­¦ï¼Œéƒ½è¦åšé‚£å…¬äº¤ï¼ˆæ²¡æœ‰å¡å†œğŸ˜‚ï¼‰ï¼Œè¿˜ç»å¸¸ç­‰ä¸åˆ°ï¼Œå¤ªç—›è‹¦äº†ï¼Œä»€ä¹ˆåå…¬äº¤å¬éŸ³ä¹ç¡è§‰å•¥çš„ï¼Œæˆ‘éƒ½ä¸å¤ªè¡Œï¼Œåšä¸åˆ°ç”µè§†é‡Œæ‹çš„é‚£æ ·ï¼Œåªä¼šè§‰å¾—å’‹è¿˜ä¸åˆ°å•Šï¼Ÿå°¤å…¶è¿œé€”ï¼Œæ—¶ä¸æ—¶æ‰“å¼€æ‰‹æœºåœ°å›¾çœ‹ä¸€çœ‹åˆ°å“ªäº†ï¼Œç¦»ç›®çš„åœ°è¿˜æœ‰å¤šè¿œã€‚å†åŠ ä¸Šç°åœ¨ï¼Œå¤§å­¦å¼€å­¦/å›å®¶ä¹Ÿå¾ˆç›¸ä¼¼ï¼Œè¿˜æœ‰ç°åœ¨å®ä¹ ä¸Šä¸‹ç­ï¼Œå°¤å…¶æ˜¯ç°åœ¨è¦è¿‡å¹´äº†ï¼Œæˆ‘ç«Ÿç„¶è¦åœ¨è¿™è¿‡ï¼Œæœ‰ç”Ÿä»¥æ¥ç¬¬ä¸€æ¬¡ä¸åœ¨å®¶è¿‡å¹´ï¼ŒçœŸçš„æƒ³å›å®¶å•Šï¼</p>
<p>æœ‰äº†ç¬é—´ç§»åŠ¨ï¼ŒçœŸå°±å¯ä»¥â€œä¸Šä¸€ç§’åœ¨æŸæ—è½å¤§é›¨ï¼Œä¸‹ä¸€ç§’åœ¨æ›¼è°·å¤©æ°”æ™´â€äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1542450049600_746819e1ea5211e8bd95186590e027b5.5cs5icwitcg0.webp"
alt="è·‘äº†" />
<figcaption aria-hidden="true">è·‘äº†</figcaption>
</figure>
<p>å¤šå¸…å“¦ï¼ï¼ï¼</p>
<p>é‚£æ ·å°±å¯ä»¥ç¡åˆ°9ï¼š50ï¼Œç„¶åç¬é—´åˆ°å…¬å¸ï¼Œå“ˆå“ˆå“ˆ</p>
<p>ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿå°±è¿™ç‚¹è¿½æ±‚ï¼Ÿï¼Ÿï¼Ÿæ²¡å‡ºæ¯ï¼Œç™½æ‰è´¹äº†è¿™èƒ½åŠ›ï¼Œæ‰“å·¥äººæ‰“éº»äº†å§</p>
<p>é‡æ–°æ¥ï¼Œæˆ‘è¦å…ˆæŠŠä¸­å›½èµ°ä¸ªéï¼Œä»€ä¹ˆæ³°å±±ã€åå±±çš„æ¥ä¸€éï¼Œä»€ä¹ˆé•¿åŸã€æ•¦ç…Œçš„ç§ä¸€ç§ã€‚ã€‚ã€‚</p>
<p>å¤ªå¤šäº†ï¼Œä¸­å›½æ¥ä¸ªééƒ½å¥½ä¹…äº†ï¼Œå†å‡ºå›½é—¨çœ‹ä¸€çœ‹</p>
<p>ä¹Ÿä¸çŸ¥é“è¿™ç®—æ˜¯å¿«èŠ‚å¥ä¸­æ…¢èµ·æ¥ï¼Œè¿˜æ˜¯æ…¢èŠ‚å¥ä¸­å¿«èµ·æ¥ï¼ŸğŸ¥±</p>
<p>è¿˜æœ‰ã€‚ã€‚ã€‚å¥½å¤šäº‹å¯ä»¥åš</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1519660751730_fc5d53361b0d11e89e1200163e00073a.6eyey1r07cg0.webp"
alt="ä½ å¿«é†’é†’" />
<figcaption aria-hidden="true">ä½ å¿«é†’é†’</figcaption>
</figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=1887917182&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
<p>æ•´ç¯‡æ–‡ç« éƒ½æ˜¯è‡ªå·±çš„å¹»æƒ³ï¼Œå˜¿å˜¿</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿæ’åº</title>
    <url>/article/ff8068c0.html</url>
    <content><![CDATA[<p>æœ¬èŠ‚çš„ä¸»é¢˜æ˜¯å¿«é€Ÿæ’åºï¼Œå®ƒå¯èƒ½æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„æ’åºç®—æ³•äº†ã€‚å¿«é€Ÿæ’åºæµè¡Œçš„åŸå› æ˜¯å®ƒå®ç°ç®€å•ã€é€‚ç”¨äºå„ç§ä¸åŒçš„è¾“äººæ•°æ®ä¸”åœ¨ä¸€èˆ¬åº”ç”¨ä¸­æ¯”å…¶ä»–æ’åºç®—æ³•éƒ½è¦å¿«å¾—å¤šã€‚å¿«é€Ÿæ’åºå¼•äººæ³¨ç›®çš„ç‰¹ç‚¹åŒ…æ‹¬å®ƒæ˜¯åŸåœ°æ’åº(åªéœ€è¦ä¸€ä¸ªå¾ˆå°çš„è¾…åŠ©æ ˆ)ï¼Œä¸”å°†é•¿åº¦ä¸º<span
class="math inline">\(N\)</span>çš„æ•°ç»„æ’åºæ‰€éœ€çš„æ—¶é—´å’Œ<span
class="math inline">\(MlgN\)</span>æˆæ­£æ¯”ã€‚æˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡çš„æ’åºç®—æ³•éƒ½æ— æ³•å°†è¿™ä¸¤ä¸ªä¼˜ç‚¹ç»“åˆèµ·æ¥ã€‚å¦å¤–ï¼Œå¿«é€Ÿæ’åºçš„å†…å¾ªç¯æ¯”å¤§å¤šæ•°æ’åºç®—æ³•éƒ½è¦çŸ­å°ï¼Œè¿™æ„å‘³ç€å®ƒæ— è®ºæ˜¯åœ¨ç†è®ºä¸Šè¿˜æ˜¯åœ¨å®é™…ä¸­éƒ½è¦æ›´å¿«ã€‚å®ƒçš„ä¸»è¦ç¼ºç‚¹æ˜¯éå¸¸è„†å¼±ï¼Œåœ¨å®ç°æ—¶è¦éå¸¸å°å¿ƒæ‰èƒ½é¿å…ä½åŠ£çš„æ€§èƒ½ã€‚å·²ç»æœ‰æ— æ•°ä¾‹å­æ˜¾ç¤ºè®¸å¤šç§é”™è¯¯éƒ½èƒ½è‡´ä½¿å®ƒåœ¨å®é™…ä¸­çš„æ€§èƒ½åªæœ‰å¹³æ–¹çº§åˆ«ã€‚å¹¸å¥½æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ï¼Œç”±è¿™äº›é”™è¯¯ä¸­å­¦åˆ°çš„æ•™è®­ä¹Ÿå¤§å¤§æ”¹è¿›äº†å¿«é€Ÿæ’åºç®—æ³•ï¼Œä½¿å®ƒçš„åº”ç”¨æ›´åŠ å¹¿æ³›ã€‚</p>
<p><a
href="https://wnhyang.github.io/article/a444b428.html">ç›®å½•</a></p>
<span id="more"></span>
<h1 id="åŸºæœ¬ç®—æ³•">åŸºæœ¬ç®—æ³•</h1>
<p>å¿«é€Ÿæ’åºæ˜¯ä¸€ç§åˆ†æ²»çš„æ’åºç®—æ³•ã€‚å®ƒå°†ä¸€ä¸ªæ•°ç»„åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œå°†ä¸¤éƒ¨åˆ†ç‹¬ç«‹åœ°æ’åºã€‚å¿«é€Ÿæ’åºå’Œå½’å¹¶æ’åºæ˜¯äº’è¡¥çš„:å½’å¹¶æ’åºå°†æ•°ç»„åˆ†æˆä¸¤ä¸ªå­æ•°ç»„åˆ†åˆ«æ’åºï¼Œå¹¶å°†æœ‰åºçš„å­æ•°ç»„å½’å¹¶ä»¥å°†æ•´ä¸ªæ•°ç»„æ’åº;è€Œå¿«é€Ÿæ’åºå°†æ•°ç»„æ’åºçš„æ–¹å¼åˆ™æ˜¯å½“ä¸¤ä¸ªå­æ•°ç»„éƒ½æœ‰åºæ—¶æ•´ä¸ªæ•°ç»„ä¹Ÿå°±è‡ªç„¶æœ‰åºäº†ã€‚åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸­ï¼Œé€’å½’è°ƒç”¨å‘ç”Ÿåœ¨å¤„ç†æ•´ä¸ªæ•°ç»„ä¹‹å‰;åœ¨ç¬¬äºŒç§æƒ…å†µä¸­ï¼Œé€’å½’è°ƒç”¨å‘ç”Ÿåœ¨å¤„ç†æ•´ä¸ªæ•°ç»„ä¹‹åã€‚åœ¨å½’å¹¶æ’åºä¸­ï¼Œä¸€ä¸ªæ•°ç»„è¢«ç­‰åˆ†ä¸ºä¸¤åŠ;åœ¨å¿«é€Ÿæ’åºä¸­ï¼Œåˆ‡åˆ†(
partition )çš„ä½ç½®å–å†³äºæ•°ç»„çš„å†…å®¹ã€‚å¿«é€Ÿæ’åºçš„å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/quicksort-overview.png"
alt="å¿«é€Ÿæ’åº" />
<figcaption aria-hidden="true">å¿«é€Ÿæ’åº</figcaption>
</figure>
<h1 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quick</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a)</span> &#123;</span><br><span class="line">        <span class="comment">//shuffle(a)æ¶ˆé™¤å¯¹è¾“å…¥çš„ä¾èµ–</span></span><br><span class="line">        sort(a,<span class="number">0</span>,a.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> partition(a, lo, hi);   <span class="comment">//åˆ‡åˆ†</span></span><br><span class="line">        sort(a, lo, j - <span class="number">1</span>);         <span class="comment">//å°†å·¦åŠéƒ¨åˆ†a[lo..j-1]æ’åº</span></span><br><span class="line">        sort(a, j + <span class="number">1</span>, hi);         <span class="comment">//å°†å³åŠéƒ¨åˆ†a[j+1..hi]æ’åº</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/quicksort.png"
alt="quicksort" />
<figcaption aria-hidden="true">quicksort</figcaption>
</figure>
<p>å¿«é€Ÿæ’åºé€’å½’åœ°å°†å­æ•°ç»„a[lo..hi]æ’åºï¼Œå…ˆç”¨partition()æ–¹æ³•å°†a[j]æ”¾åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®ï¼Œç„¶åå†ç”¨é€’å½’è°ƒç”¨å°†å…¶ä»–ä½ç½®çš„å…ƒç´ æ’åºã€‚</p>
<p>è¯¥æ–¹æ³•çš„å…³é”®åœ¨äºåˆ‡åˆ†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä½¿å¾—æ•°ç»„æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶:</p>
<p>å¯¹äºæŸä¸ªjï¼Œa[j] å·²ç»æ’å®š;</p>
<p>a[lo]åˆ°a[j-1]ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸å¤§äºa[j];</p>
<p>a[j+1]åˆ°a[hi]ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸å°äºa[j]ã€‚</p>
<p>æˆ‘ä»¬å°±æ˜¯é€šè¿‡é€’å½’åœ°è°ƒç”¨åˆ‡åˆ†æ¥æ’åºçš„ã€‚</p>
<h1 id="å¿«é€Ÿæ’åºçš„åˆ‡åˆ†">å¿«é€Ÿæ’åºçš„åˆ‡åˆ†</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†æ•°ç»„åˆ‡åˆ†ä¸ºa[lo..j-1]ï¼Œa[i]ï¼Œa[j+1..hi]</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(Comparable[] a, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo, j = hi + <span class="number">1</span>;      <span class="comment">//å·¦å³æ‰«ææŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">Comparable</span> <span class="variable">v</span> <span class="operator">=</span> a[lo];       <span class="comment">//åˆ‡åˆ†å…ƒç´ </span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;      <span class="comment">// æ‰«æå·¦å³ï¼Œæ£€æŸ¥æ‰«ææ˜¯å¦ç»“æŸå¹¶äº¤æ¢å…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span> (less(a[++i], v)) <span class="keyword">if</span> (i == hi) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">while</span> (less(v, a[--j])) <span class="keyword">if</span> (j == lo) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) <span class="keyword">break</span>;</span><br><span class="line">        exch(a, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    exch(a, lo, j);             <span class="comment">//å°†v=a[j]æ”¾å…¥æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">return</span> j;                   <span class="comment">//a[lo..j-1]&lt;=a[i]&lt;=a[j+1..hi] è¾¾æˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/partitioning.png"
alt="åˆ‡åˆ†è½¨è¿¹ï¼ˆæ¯æ¬¡äº¤æ¢å‰åçš„æ•°ç»„å†…å®¹ï¼‰" />
<figcaption
aria-hidden="true">åˆ‡åˆ†è½¨è¿¹ï¼ˆæ¯æ¬¡äº¤æ¢å‰åçš„æ•°ç»„å†…å®¹ï¼‰</figcaption>
</figure>
<p>ä¹‹åè¿˜æœ‰äº›è®¨è®ºçš„å†…å®¹è¿™é‡Œä¸å†è¯¦å†™ï¼Œè¯·çœ‹åŸè‘—ï¼</p>
<h1 id="æ€§èƒ½ç‰¹ç‚¹">æ€§èƒ½ç‰¹ç‚¹</h1>
<p>æ•°å­¦ä¸Šå·²ç»å¯¹å¿«é€Ÿæ’åºè¿›è¡Œäº†è¯¦å°½çš„åˆ†æï¼Œå› æ­¤æˆ‘ä»¬èƒ½å¤Ÿç²¾ç¡®åœ°è¯´æ˜å®ƒçš„æ€§èƒ½ã€‚å¤§é‡ç»éªŒä¹Ÿè¯æ˜äº†è¿™äº›åˆ†æï¼Œå®ƒä»¬æ˜¯ç®—æ³•è°ƒä¼˜æ—¶çš„é‡è¦å·¥å…·ã€‚</p>
<p>å¿«é€Ÿæ’åºåˆ‡åˆ†æ–¹æ³•çš„å†…å¾ªç¯ä¼šç”¨ä¸€ä¸ªé€’å¢çš„ç´¢å¼•å°†æ•°ç»„å…ƒç´ å’Œä¸€ä¸ªå®šå€¼æ¯”è¾ƒã€‚è¿™ç§ç®€æ´æ€§ä¹Ÿæ˜¯å¿«é€Ÿæ’åºçš„ä¸€ä¸ªä¼˜ç‚¹ï¼Œå¾ˆéš¾æƒ³è±¡æ’åºç®—æ³•ä¸­è¿˜èƒ½æœ‰æ¯”è¿™æ›´çŸ­å°çš„å†…å¾ªç¯äº†ã€‚ä¾‹å¦‚ï¼Œå½’å¹¶æ’åºå’Œå¸Œå°”æ’åºä¸€èˆ¬éƒ½æ¯”å¿«é€Ÿæ’åºæ…¢ï¼Œå…¶åŸå› å°±æ˜¯å®ƒä»¬è¿˜åœ¨å†…å¾ªç¯ä¸­ç§»åŠ¨æ•°æ®ã€‚</p>
<p>å¿«é€Ÿæ’åºå¦ä¸€ä¸ªé€Ÿåº¦ä¼˜åŠ¿åœ¨äºå®ƒçš„æ¯”è¾ƒæ¬¡æ•°å¾ˆå°‘ã€‚æ’åºæ•ˆç‡æœ€ç»ˆè¿˜æ˜¯ä¾èµ–åˆ‡åˆ†æ•°ç»„çš„æ•ˆæœï¼Œè€Œè¿™ä¾èµ–äºåˆ‡åˆ†å…ƒç´ çš„å€¼ã€‚åˆ‡åˆ†å°†ä¸€ä¸ªè¾ƒå¤§çš„éšæœºæ•°ç»„åˆ†æˆä¸¤ä¸ªéšæœºå­æ•°ç»„ï¼Œè€Œå®é™…ä¸Šè¿™ç§åˆ†å‰²å¯èƒ½å‘ç”Ÿåœ¨æ•°ç»„çš„ä»»æ„ä½ç½®(å¯¹äºå…ƒç´ ä¸é‡å¤çš„æ•°ç»„è€Œè¨€)ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æè¿™ä¸ªç®—æ³•ï¼Œçœ‹çœ‹è¿™ç§æ–¹æ³•å’Œç†æƒ³æ–¹æ³•ä¹‹é—´çš„å·®è·ã€‚çœ‹åŸè‘—ï¼</p>
<h1 id="ç®—æ³•æ”¹è¿›">ç®—æ³•æ”¹è¿›</h1>
<p>å¿«é€Ÿæ’åºæ˜¯ç”±C.A.R
Hoareåœ¨1960å¹´å‘æ˜çš„ï¼Œä»é‚£æ—¶èµ·å°±æœ‰å¾ˆå¤šäººåœ¨ç ”ç©¶å¹¶æ”¹è¿›å®ƒã€‚æ”¹è¿›å¿«é€Ÿæ’åºæ€»æ˜¯é‚£ä¹ˆå¸å¼•äººï¼Œå‘æ˜æ›´å¿«çš„æ’åºç®—æ³•å°±å¥½åƒæ˜¯è®¡ç®—æœºç§‘å­¦ç•Œçš„â€œè€é¼ å¤¹å­â€ï¼Œè€Œå¿«é€Ÿæ’åºå°±æ˜¯å¤¹å­é‡Œçš„é‚£å—å¥¶é…ªã€‚å‡ ä¹ä»Hoareç¬¬-æ¬¡å‘
è¡¨è¿™ä¸ªç®—æ³•å¼€å§‹ï¼Œäººä»¬å°±ä¸æ–­åœ°æå‡ºå„ç§æ”¹è¿›æ–¹æ³•ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ³æ³•éƒ½å¯è¡Œï¼Œå› ä¸ºå¿«é€Ÿæ’åºçš„å¹³è¡¡æ€§å·²ç»éå¸¸å¥½ï¼Œæ”¹è¿›æ‰€å¸¦æ¥çš„æé«˜å¯èƒ½ä¼šè¢«æ„å¤–çš„å‰¯ä½œç”¨æ‰€æŠµæ¶ˆã€‚ä½†å…¶ä¸­ä¸€äº›ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç°åœ¨è¦ä»‹ç»çš„ï¼Œéå¸¸æœ‰æ•ˆã€‚</p>
<p>å¦‚æœä½ çš„æ’åºä»£ç ä¼šè¢«æ‰§è¡Œå¾ˆå¤šæ¬¡æˆ–è€…ä¼šè¢«ç”¨åœ¨å¤§å‹æ•°ç»„ä¸Š(ç‰¹åˆ«æ˜¯å¦‚æœå®ƒä¼šè¢«å‘å¸ƒæˆä¸€ä¸ªåº“å‡½æ•°ï¼Œæ’åºçš„å¯¹è±¡æ•°ç»„çš„ç‰¹æ€§æ˜¯æœªçŸ¥çš„)ï¼Œé‚£ä¹ˆä¸‹é¢æ‰€è®¨è®ºçš„è¿™äº›æ”¹è¿›æ„è§å€¼å¾—ä½ å‚è€ƒã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ éœ€è¦é€šè¿‡å®éªŒæ¥ç¡®å®šæ”¹è¿›çš„æ•ˆæœå¹¶ä¸ºå®ç°é€‰æ‹©æœ€ä½³çš„å‚æ•°ã€‚ä¸€èˆ¬æ¥è¯´å®ƒä»¬èƒ½å°†æ€§èƒ½æå‡20%
~ 30%ã€‚</p>
<p>ä»¥ä¸‹ä¸‰å°ç»“ç•¥</p>
<h1 id="åˆ‡æ¢åˆ°æ’å…¥æ’åº">åˆ‡æ¢åˆ°æ’å…¥æ’åº</h1>
<h1 id="ä¸‰å–æ ·åˆ‡åˆ†">ä¸‰å–æ ·åˆ‡åˆ†</h1>
<h1 id="ç†µæœ€ä¼˜çš„æ’åº">ç†µæœ€ä¼˜çš„æ’åº</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/quicksort-bars.png"
alt="ä½¿ç”¨äº†ä¸‰å–æ ·åˆ‡åˆ†å’Œæ’å…¥æ’åºè½¬æ¢çš„å¿«é€Ÿæ’åº" />
<figcaption
aria-hidden="true">ä½¿ç”¨äº†ä¸‰å–æ ·åˆ‡åˆ†å’Œæ’å…¥æ’åºè½¬æ¢çš„å¿«é€Ÿæ’åº</figcaption>
</figure>
<h1 id="ä¸‰å‘åˆ‡åˆ†çš„å¿«é€Ÿæ’åº">ä¸‰å‘åˆ‡åˆ†çš„å¿«é€Ÿæ’åº</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quick3way</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨æ­¤æ–¹æ³•çš„å…¬ç”¨æ–¹æ³•sort()è¯·è§å¿«é€Ÿæ’åºç®—æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Comparable[] a, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123; </span><br><span class="line">        <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">lt</span> <span class="operator">=</span> lo, i=lo+<span class="number">1</span>, gt = hi;</span><br><span class="line">        <span class="type">Comparable</span> <span class="variable">v</span> <span class="operator">=</span> a[lo];</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= gt) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">cmp</span> <span class="operator">=</span> a[i].compareTo(v);</span><br><span class="line">            <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) exch(a, lt++, i++);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) exch(a, i, gt--);</span><br><span class="line">            <span class="keyword">else</span>              i++;</span><br><span class="line">        &#125; <span class="comment">// ç°åœ¨a[lo..lt-1] &lt; v = a[lt..gt] &lt; a[gt+1..hi]æˆç«‹</span></span><br><span class="line">        sort(a, lo, lt-<span class="number">1</span>);</span><br><span class="line">        sort(a, gt+<span class="number">1</span>, hi);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/partitioning3.png"
alt="ä¸‰åˆ†åˆ‡åˆ†çš„è½¨è¿¹ï¼ˆæ¯æ¬¡è¿­ä»£å¾ªç¯ä¹‹åçš„æ•°ç»„å†…å®¹ï¼‰" />
<figcaption
aria-hidden="true">ä¸‰åˆ†åˆ‡åˆ†çš„è½¨è¿¹ï¼ˆæ¯æ¬¡è¿­ä»£å¾ªç¯ä¹‹åçš„æ•°ç»„å†…å®¹ï¼‰</figcaption>
</figure>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/quicksort3-bars.png"
alt="ä¸‰å‘åˆ‡åˆ†çš„å¿«é€Ÿæ’åºçš„å¯è§†è½¨è¿¹" />
<figcaption aria-hidden="true">ä¸‰å‘åˆ‡åˆ†çš„å¿«é€Ÿæ’åºçš„å¯è§†è½¨è¿¹</figcaption>
</figure>
<h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1>
<p>ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ç¬¬äºŒç« æ’åº2.3å¿«é€Ÿæ’åº</p>
<p><a href="https://algs4.cs.princeton.edu/">æœ¬ä¹¦ç½‘ç«™</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ’åº</title>
    <url>/article/a444b428.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬çš„æ’åºç®—æ³•æ¨¡æ¿é€‚ç”¨äºä»»ä½•å®ç°äº†Comparableæ¥å£çš„æ•°æ®ç±»å‹ã€‚éµå®ˆJavaæƒ¯ä¾‹çš„å¥½å¤„æ˜¯å¾ˆå¤šä½ å¸Œæœ›æ’åºçš„æ•°æ®éƒ½å®ç°äº†Comparableæ¥å£ã€‚ä¾‹å¦‚ï¼ŒJavaä¸­å°è£…æ•°å­—çš„ç±»å‹Integerå’ŒDouble,ä»¥åŠStringå’Œå…¶ä»–è®¸å¤šé«˜çº§æ•°æ®ç±»å‹(å¦‚Fileå’ŒURL)éƒ½å®ç°äº†Comparableæ¥å£ã€‚å› æ­¤ä½ å¯ä»¥ç›´æ¥ç”¨è¿™äº›ç±»å‹çš„æ•°ç»„ä½œä¸ºå‚æ•°è°ƒç”¨æˆ‘ä»¬çš„æ’åºæ–¹æ³•ã€‚</p>
<span id="more"></span>
<h1 id="åˆçº§æ’åºç®—æ³•"><a
href="https://wnhyang.github.io/article/2e8ba7ec.html">åˆçº§æ’åºç®—æ³•</a></h1>
<h1 id="å½’å¹¶æ’åº"><a
href="https://wnhyang.github.io/article/1599bffe.html">å½’å¹¶æ’åº</a></h1>
<h1 id="å¿«é€Ÿæ’åº"><a
href="https://wnhyang.github.io/article/ff8068c0.html">å¿«é€Ÿæ’åº</a></h1>
<h1 id="ä¼˜å…ˆé˜Ÿåˆ—"><a
href="https://wnhyang.github.io/article/602ee0a8.html">ä¼˜å…ˆé˜Ÿåˆ—</a></h1>
<h1 id="åº”ç”¨"><a
href="https://wnhyang.github.io/article/3a2cfc6c.html">åº”ç”¨</a></h1>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘è®¨åŒå¼ºè¿«ç—‡ï¼Œæˆ‘è®¨åŒå®Œç¾ä¸»ä¹‰</title>
    <url>/article/fca98ffc.html</url>
    <content><![CDATA[<h1 id="å¦‚é¢˜">å¦‚é¢˜</h1>
<p>æˆ‘è®¨åŒå¼ºè¿«ç—‡ï¼Œæˆ‘è®¨åŒå®Œç¾ä¸»ä¹‰</p>
<p>å¼ºè¿«ç—‡è¿™ä¸ªè¯ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ—¶å€™æœ‰çš„ï¼Œåæ­£ï¼Œåˆ°ç°åœ¨æˆ‘è¶Šå‘è§‰å¾—è‡ªå·±å°±æ˜¯æœ‰ç‚¹å¼ºè¿«ç—‡å•Šï¼è¿˜æœ‰é‚£è¯¥æ­»çš„å®Œç¾ä¸»ä¹‰ï¼</p>
<span id="more"></span>
<h1 id="æµ…è°ˆ">æµ…è°ˆ</h1>
<p>è¿™æ˜¯ä¸€ç¯‡åæ§½å‘çš„æ–‡ç« ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤§å¤ªçš„å®é™…æ„ä¹‰ï¼Œåªæ˜¯æƒ³è®°å½•ä¸€ä¸‹è€Œå·²ã€‚</p>
<p>æœ€è¿‘çœ‹å…¬å¸çš„ä»£ç ï¼Œæˆ‘èƒ½ç†è§£ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸åŒæƒ³æ³•ï¼Œéƒ½æœ‰è‡ªå·±çš„æŠ€æœ¯é£æ ¼ï¼Œä»£ç è§„èŒƒï¼Œä½†æ˜¯åœ¨å…¬å¸ï¼Œä¸€ä¸ªé¡¹ç›®ç»è¿‡å¤šäººçš„æµè½¬ï¼Œåœ¨ä¸€äº›éƒ¨åˆ†è¿˜æ˜¯å­˜åœ¨å¾ˆæ˜æ˜¾çš„ä¸åˆç†ä¹‹å¤„ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå¼ºè¿«ç—‡ï¼Œå®åœ¨æ˜¯éš¾å—ğŸ˜–</p>
<p>æ˜æ˜å¯ä»¥é‚£æ ·ç»Ÿä¸€è§„èŒƒï¼Œä½†å®ƒå°±æ˜¯é‚£æ ·å­˜åœ¨ç€ã€‚</p>
<p>å¤ªç—›è‹¦äº†ï¼Œçœ‹åˆ°è‡ªå·±ä¸æ»¡æ„çš„è§„èŒƒã€è®¾è®¡çœŸæ˜¯å¿ƒç—›ğŸ¤è¿™è¯¥æ­»çš„å¼ºè¿«ç—‡ï¼</p>
<p>æ¯”å¼ºè¿«ç—‡æ›´ç—›è‹¦å°±æ˜¯æœ‰ç€å®Œç¾ä¸»ä¹‰çš„å¼ºè¿«ç—‡ğŸ¤¢</p>
<p>å› ä¸ºå®ƒä»¬çš„å­˜åœ¨ï¼Œæˆ‘å§‹ç»ˆæœ‰ä¸€ç§å‹åŠ›ï¼Œæ²¡æœ‰ä»–äººé©±åŠ¨ï¼Œä½†æœ‰æˆ‘å•Šï¼</p>
<p>å§‹ç»ˆæƒ³è¦åšçš„å¾ˆå¥½ï¼Œå¾ˆå®Œç¾ï¼Œå®¹ä¸äº†ä¸€ç‚¹å·®é”™å’Œé—æ†¾ï¼Œä½†tmå¤ªç´¯äº†å¤ªç´¯äº†å¤ªç´¯äº†ğŸ¥¸</p>
<h1 id="æœ€å">æœ€å</h1>
<p>åæ§½å‘ã€å‘æ³„ç±»ï¼Œåˆ‡å‹¿è®¤çœŸï¼Œå¸Œæœ›ä¸ä¼šç»™ä½ å¸¦æ¥æ¶ˆææƒ…ç»ªğŸ¤¡</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>æ’åºåº”ç”¨</title>
    <url>/article/3a2cfc6c.html</url>
    <content><![CDATA[<p>æ’åºå¦‚æ­¤æœ‰ç”¨çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯ï¼Œåœ¨ä¸€ä¸ªæœ‰åºçš„æ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ è¦æ¯”åœ¨ä¸€ä¸ªæ— åºçš„æ•°ç»„ä¸­æŸ¥æ‰¾ç®€å•å¾—å¤šã€‚äººä»¬ç”¨äº†ä¸€ä¸ªå¤šä¸–çºªå‘ç°åœ¨ä¸€æœ¬æŒ‰å§“æ°æ’åºçš„ç”µè¯é»„é¡µä¸­æŸ¥æ‰¾æŸä¸ªäººçš„ç”µè¯å·ç æœ€å®¹æ˜“ã€‚ç°åœ¨ï¼Œæ•°å­—éŸ³ä¹ä½œå®¶ä»¬å°†æ­Œæ›²æ–‡ä»¶æŒ‰ç…§ä½œå®¶åæˆ–æ˜¯æ­Œæ›²åæ’åºï¼Œæœç´¢å¼•æ“æŒ‰ç…§æœç´ ç»“æœçš„é‡è¦æ€§çš„é«˜ä½æ˜¾ç¤ºç»“æœï¼Œç”µå­è¡¨æ ¼æŒ‰ç…§æŸä¸€åˆ—çš„æ’åºç»“æœæ˜¾ç¤ºæ‰€æœ‰æ ï¼ŒçŸ©é˜µå¤„ç†å·¥å…·å°†ä¸€ä¸ªå¯¹ç§°çŸ©é˜µçš„çœŸå®ç‰¹å¾å€¼æŒ‰ç…§é™åºæ’åˆ—ï¼Œç­‰ç­‰ã€‚åªè¦é˜Ÿåˆ—æ˜¯æœ‰åºçš„ï¼Œå¾ˆå¤šå…¶ä»–ä»»åŠ¡ä¹Ÿæ›´å®¹æ˜“å®Œæˆï¼Œæ¯”å¦‚åœ¨æœ¬ä¹¦æœ€åçš„æœ‰åºç´¢å¼•ä¸­æŸ¥æ‰¾æŸé¡¹ï¼Œæˆ–æ˜¯ä»ä¸€åˆ—é•¿é•¿çš„é‚®ä»¶åˆ—è¡¨æˆ–è€…æŠ•ç¥¨äººåˆ—è¡¨æˆ–è€…ç½‘ç«™åˆ—è¡¨ä¸­åˆ å»é‡å¤é¡¹ï¼Œæˆ–æ˜¯åœ¨ç»Ÿè®¡å­¦è®¡ç®—ä¸­å‰”é™¤å¼‚å¸¸å€¼ã€æŸ¥æ‰¾ä¸­ä½æ•°æˆ–è€…è®¡ç®—æ¯”ä¾‹ã€‚</p>
<span id="more"></span>
<p>åœ¨è®¸å¤šçœ‹ä¼¼æ— å…³çš„é¢†åŸŸä¸­ï¼Œæ’åºå…¶å®ä»ç„¶æ˜¯ä¸ªé‡è¦çš„å­é—®é¢˜ã€‚
æ•°æ®å‹ç¼©ã€è®¡ç®—æœºå›¾å½¢å­¦ã€è®¡ç®—ç”Ÿç‰©å­¦ã€ä¾›åº”é“¾ç®¡ç†ã€ç»„åˆä¼˜åŒ–ã€ç¤¾ä¼šé€‰æ‹©å’ŒæŠ•ç¥¨ç­‰ï¼Œä¸ä¸€è€Œè¶³ã€‚æˆ‘ä»¬åœ¨æœ¬ç« ä¸­å­¦ä¹ çš„ç®—æ³•ä¹Ÿåœ¨å¼€å‘æœ¬ä¹¦å…¶ä»–ç« èŠ‚çš„å¼ºå¤§ç®—æ³•çš„è¿‡ç¨‹ä¸­èµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚</p>
<p>é€šç”¨æ’åºç®—æ³•æ˜¯æœ€é‡è¦çš„ï¼Œå› æ­¤æˆ‘ä»¬é¦–å…ˆä¼šè€ƒè™‘äº›åœ¨æ„å»ºé€‚ç”¨äº
å¤šç§æƒ…å†µçš„æ’åºç®—æ³•æ—¶éœ€è¦æ³¨æ„çš„å®é™…é—®é¢˜ã€‚è™½ç„¶éƒ¨åˆ†è¯é¢˜åªé€‚ç”¨äºJava,ä½†æ¯ä¸ªé—®é¢˜éƒ½ä»ç„¶æ˜¯æ‰€æœ‰ç³»ç»Ÿéœ€è¦è§£å†³çš„ã€‚</p>
<p>æˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è¯´æ˜ï¼Œå°½ç®¡æˆ‘ä»¬æ‰€å­¦ä¹ çš„å„ç§ç®—æ³•çš„æ€æƒ³ç›¸å¯¹ç®€å•ï¼Œä½†å®ƒä»¬çš„é€‚ç”¨é¢†åŸŸä»ç„¶å¹¿æ³›ç»è¿‡éªŒè¯çš„å„ç§æ’åºç®—æ³•çš„åº”ç”¨åˆ—è¡¨å¾ˆé•¿ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåªä¼šæ¶‰åŠå…¶ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œä¸€äº›æ˜¯ç§‘å­¦é¢†åŸŸçš„ã€‚ä¸€
äº›æ˜¯ç®—æ³•é¢†åŸŸçš„ã€‚ è¿˜æœ‰ä¸€äº›æ˜¯å•†ä¸šé¢†åŸŸçš„ã€‚
åœ¨ç»ƒä¹ ä¸­ä½ ä»¬è¿˜èƒ½æ‰¾åˆ°æ›´å¤šä¾‹å­ã€‚æœ¬ä¹¦çš„ç½‘ç«™ä¸Šè¿˜æœ‰æ›´å¤šã€‚</p>
<p><a
href="https://wnhyang.github.io/article/a444b428.html">ç›®å½•</a></p>
<h1 id="å°†å„ç§æ•°æ®æ’åº">å°†å„ç§æ•°æ®æ’åº</h1>
<h1 id="äº¤æ˜“äº‹åŠ¡">äº¤æ˜“äº‹åŠ¡</h1>
<h1 id="æŒ‡é’ˆæ’åº">æŒ‡é’ˆæ’åº</h1>
<h1 id="ä¸å¯å˜çš„é”®">ä¸å¯å˜çš„é”®</h1>
<h1 id="å»‰ä»·çš„äº¤æ¢">å»‰ä»·çš„äº¤æ¢</h1>
<h1 id="å¤šç§æ’åºæ–¹æ³•">å¤šç§æ’åºæ–¹æ³•</h1>
<h1 id="å¤šå¥æ•°ç»„">å¤šå¥æ•°ç»„</h1>
<h1 id="ä½¿ç”¨æ¯”è¾ƒå™¨å®ç°ä¼˜å…ˆå¤šåˆ—">ä½¿ç”¨æ¯”è¾ƒå™¨å®ç°ä¼˜å…ˆå¤šåˆ—</h1>
<h1 id="ç¨³å®šæ€§">ç¨³å®šæ€§</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/stability.png"
alt="ä»å¦ä¸€ä¸ªé”®ä¸Šæ’åºçš„ç¨³å®šæ€§" />
<figcaption aria-hidden="true">ä»å¦ä¸€ä¸ªé”®ä¸Šæ’åºçš„ç¨³å®šæ€§</figcaption>
</figure>
<h1 id="æˆ‘åº”è¯¥ä½¿ç”¨å“ªç§æ’åºç®—æ³•">æˆ‘åº”è¯¥ä½¿ç”¨å“ªç§æ’åºç®—æ³•</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/sort-characteristics.png"
alt="ä»å¦ä¸€ä¸ªé”®ä¸Šæ’åºçš„ç¨³å®šæ€§" />
<figcaption aria-hidden="true">ä»å¦ä¸€ä¸ªé”®ä¸Šæ’åºçš„ç¨³å®šæ€§</figcaption>
</figure>
<h1 id="å°†åŸå§‹ç±»å‹æ•°æ®æ’åº">å°†åŸå§‹ç±»å‹æ•°æ®æ’åº</h1>
<h1 id="javaç³»ç»Ÿåº“çš„æ’åºç®—æ³•">javaç³»ç»Ÿåº“çš„æ’åºç®—æ³•</h1>
<h1 id="é—®é¢˜çš„è§„çº¦">é—®é¢˜çš„è§„çº¦</h1>
<h1 id="æ‰¾å‡ºé‡å¤å…ƒç´ ">æ‰¾å‡ºé‡å¤å…ƒç´ </h1>
<h1 id="æ’å">æ’å</h1>
<h1 id="ä¼˜å…ˆé˜Ÿåˆ—">ä¼˜å…ˆé˜Ÿåˆ—</h1>
<h1 id="ä¸­ä½æ•°ä¸é¡ºåºç»Ÿè®¡">ä¸­ä½æ•°ä¸é¡ºåºç»Ÿè®¡</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/median.png"
alt="ç”¨åˆ‡åˆ†æ‰¾å‡ºä¸­ä½æ•°" />
<figcaption aria-hidden="true">ç”¨åˆ‡åˆ†æ‰¾å‡ºä¸­ä½æ•°</figcaption>
</figure>
<h1 id="æ’åºåº”ç”¨ä¸€è§ˆ">æ’åºåº”ç”¨ä¸€è§ˆ</h1>
<h1 id="å•†ä¸šè®¡ç®—">å•†ä¸šè®¡ç®—</h1>
<h1 id="ä¿¡æ¯æœç´¢">ä¿¡æ¯æœç´¢</h1>
<h1 id="è¿ç­¹å­¦">è¿ç­¹å­¦</h1>
<h1 id="äº‹ä»¶é©±åŠ¨æ¨¡æ‹Ÿ">äº‹ä»¶é©±åŠ¨æ¨¡æ‹Ÿ</h1>
<h1 id="æ•°å€¼è®¡ç®—">æ•°å€¼è®¡ç®—</h1>
<h1 id="ç»„åˆæœç´¢">ç»„åˆæœç´¢</h1>
<h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1>
<p>ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ç¬¬äºŒç« æ’åº2.3å¿«é€Ÿæ’åº</p>
<p><a href="https://algs4.cs.princeton.edu/">æœ¬ä¹¦ç½‘ç«™</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ï¼ˆhexoï¼‰</title>
    <url>/article/101acc41.html</url>
    <content><![CDATA[<p>é¦–å…ˆæ„Ÿè°¢Bç«™UPä¸»<a
href="https://space.bilibili.com/384068749/">CodeSheep</a></p>
<p>æœ¬ç¯‡æ–‡ç« ä¸»è¦æ¥æºäºUPä¸»çš„<a
href="https://www.bilibili.com/video/BV1Yb411a7ty">æ‰‹æŠŠæ‰‹æ•™ä½ ä»0å¼€å§‹æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢
|æ— å‘ç‰ˆè§†é¢‘æ•™ç¨‹| hexo</a><br />
ä¾ç…§ç€è¿™ä¸ªè§†é¢‘å’Œè§†é¢‘ä¸­å„ä½å¼¹å¹•å¤§ä½¬ç»ˆäºå®Œæˆäº†è‡ªå·±çš„ä¸ªäººåšå®¢æ­å»ºï¼Œå› ä¸ºUPè§†é¢‘ä¸­æ“ä½œçš„æ˜¯MACOSç³»ç»Ÿï¼Œä¸æˆ‘ä½¿ç”¨çš„Windowè¿˜æœ‰æœ‰äº›ä¸åŒçš„ï¼Œæ‰€ä»¥å†™ä¸‹æœ¬ç¯‡æ–‡ç« ï¼Œç”¨ä»¥æ–¹ä¾¿å…¶ä»–äººæ­å»ºä¸ªäººåšå®¢</p>
<p>ä¸ªäººæƒ³æ³•ï¼šå¦‚è§†é¢‘ä¸­UPæ‰€è®²çš„ï¼Œç¨‹åºå‘˜ç¡®å®åº”è¯¥æ‹¥ç”¨è‡ªå·±çš„åšå®¢ï¼Œç”¨ä»¥è®°å½•å­¦åˆ°çš„æŠ€æœ¯ï¼ŒçŠ¯è¿‡çš„é”™è¯¯ï¼Œç­‰ç­‰ã€‚è¿™å¯¹äºä¸€ä¸ªäººçš„æé«˜è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œå­¦ä¹ å˜›ï¼Œå°±æ˜¯ä¸€ä¸ªä¸æ–­çŠ¯é”™ï¼Œä¸æ–­æ€»ç»“çš„è¿‡ç¨‹å˜›ã€‚<br />
ä¸‹é¢å¼€å§‹äº†ï¼ï¼ï¼</p>
<span id="more"></span>
<h1 id="å‡†å¤‡">å‡†å¤‡</h1>
<p>åˆ©ç”¨<a href="https://hexo.io/">hexo</a>ï¼ˆA fast, simple &amp;
powerful blog frameworkï¼‰æ­å»ºä¸ªäººåšå®¢éœ€è¦å…ˆè£…å¥½<a
href="https://nodejs.org/en/">node.js</a>å’Œ<a
href="https://git-scm.com/">Git</a></p>
<p>node.jséœ€è¦è£…LTSç‰ˆåŠé•¿æœŸæ”¯æŒç‰ˆï¼Œå®˜ç½‘é¦–é¡µå°±æœ‰<br />
Gitéœ€è¦é…ç½®å¥½ï¼ŒæŠ›å¼€è¿™ç¯‡æ–‡ç« è¯´Gitå¾ˆé‡è¦ï¼Œæƒ³è¦äº†è§£æ›´å¤šçš„è‡ªè¡ŒæŸ¥é˜…èµ„æ–™</p>
<h1 id="å¼€å§‹æ­å»º">å¼€å§‹æ­å»º</h1>
<p>ä»¥ä¸‹å¼•å·ï¼ˆ""ï¼‰æ‹¬èµ·çš„éƒ½ä¸ºå‘½ä»¤ï¼Œæœ‰äº›è¿˜åŒ…æ‹¬å¼•å·ä¸­è¿˜æœ‰å¼•å·çš„æƒ…å†µ</p>
<h1 id="å®‰è£…hexo">å®‰è£…hexo</h1>
<p>ä½¿ç”¨ <kbd>Win</kbd>+<kbd>R</kbd> è¾“å…¥cmdæ‰“å¼€å‘½ä»¤çª—å£</p>
<ol type="1">
<li>è¾“å…¥"node -v" æŸ¥çœ‹nodeç‰ˆæœ¬</li>
<li>è¾“å…¥"npm -v" æŸ¥çœ‹npmç‰ˆæœ¬</li>
<li>2ã€3å®Œæˆåˆ™node.jså®‰è£…å®Œæˆ</li>
<li>æ¥ä¸‹æ¥åˆ©ç”¨npmå®‰è£…cnpmï¼Œå› ä¸ºå›½å†…å®‰è£…è¾ƒæ…¢ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨é˜¿é‡Œäº‘é•œåƒå®‰è£…</li>
<li>è¾“å…¥npm "install -g cnpm --registry=http://registry.npm.taobao.org"
å®‰è£…é•œåƒçš„cnpm ç®¡ç†å™¨</li>
<li>è¾“å…¥"cnpm -v" æŸ¥çœ‹cnpmç‰ˆæœ¬(æ­¤æ—¶cnpmå®‰è£…å®Œæˆ)</li>
<li>è¾“å…¥"cnpm install -g hexo-cli" å®‰è£…hexoæ¡†æ¶</li>
<li>è¾“å…¥"hexo -v" æŸ¥çœ‹hexoç‰ˆæœ¬å¹¶ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ</li>
</ol>
<h1 id="ä½¿ç”¨hexoæ­å»ºåšå®¢">ä½¿ç”¨hexoæ­å»ºåšå®¢</h1>
<p>å¦‚æç¤ºè¦åœ¨blogç›®å½•å®Œæˆä¸€å®šè¦åœ¨è¯¥ç›®å½•ä¸‹å®Œæˆï¼Œå¦‚è¿›å…¥hexoå‘½ä»¤å¯é€šè¿‡<kbd>Ctrl</kbd>+<kbd>C</kbd>,å†é”®å…¥Yé€€å‡ºhexo
1.
å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥æ”¾æœ¬åœ°blogï¼Œç†Ÿæ‚‰cmdå‘½ä»¤çš„å¯ä»¥ç›´æ¥åœ¨cmdä¸Šç›´æ¥å»ºç«‹
2. è¾“å…¥"cd blog" è¿›å…¥blogç›®å½•,blogä¸ºä½ æ‰€å»ºç«‹çš„ç©ºæ–‡ä»¶å¤¹ç›®å½• 3. è¾“å…¥"sudo
hexo init"
ç”Ÿæˆåšå®¢,åˆå§‹åŒ–åšå®¢,è‡ªå¸¦ä¸»é¢˜,å¯ä»¥ç›´æ¥æ‰“å¼€æ‰€å»ºç«‹çš„blogæˆ–è¾“å…¥"dir"
æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹ç”Ÿæˆäº†é‚£äº›æ–‡ä»¶ 4. è¾“å…¥"hexo s" å¯åŠ¨æœ¬åœ°åšå®¢æœåŠ¡ 5. <a
href="http://localhost:4000/" class="uri">http://localhost:4000/</a>
æœ¬åœ°è®¿é—®åœ°å€,å¯åœ¨æµè§ˆå™¨æ‰“å¼€æŸ¥çœ‹ 6. è¾“å…¥"hexo n "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ""
åˆ›å»ºæ–°çš„æ–‡ç« ï¼Œåˆ›å»ºæˆåŠŸåä¼šæ˜¾ç¤ºæ–‡ç« çš„ç›®å½•åœ°å€ï¼Œç›´æ¥ç”¨ç¼–è¯‘å™¨å¦‚vscodeæ‰“å¼€æ–‡ç« ï¼Œæˆ–ç”¨cmdå‘½ä»¤æ“ä½œã€‚è¯¥æ–‡ç« ä¸ºMarkdownæ ¼å¼ï¼Œä¸ç†Ÿæ‚‰çš„å¯ä»¥æŸ¥èµ„æ–™å­¦ä¹ ã€‚éšæ„å†™ä¸€äº›å†…å®¹å¦‚ï¼š<br />
# ä¸€çº§æ ‡é¢˜<br />
å†…å®¹<br />
## äºŒçº§æ ‡é¢˜<br />
å†…å®¹<br />
## ä¸‰çº§æ ‡é¢˜<br />
å†…å®¹ 7. è¾“å…¥"hexo clean" æ¸…ç† 8. è¾“å…¥"hexo g" ç”Ÿæˆ 9. è¾“å…¥"hexo s"
é‡æ–°å¯åŠ¨æœ¬åœ°æœåŠ¡æŸ¥çœ‹å˜åŒ–</p>
<h1 id="åšå®¢éƒ¨ç½²åˆ°githubä¸Š">åšå®¢éƒ¨ç½²åˆ°Githubä¸Š</h1>
<p>å¦‚æœä¸æƒ³ç”¨Githubå¯ä»¥ç”¨Gitee,æ“ä½œç›¸ä¼¼ 1.
ç™»å½•Githubå»ºç«‹ä¸€ä¸ªæ–°ä»“åº“ï¼Œä»“åº“åä¸º Githubè´¦æˆ·æ˜µç§°.github.io 2. è¾“å…¥"cnpm
install --save hexo-deployer-git"
åœ¨blogç›®å½•ä¸‹å®‰è£…gitéƒ¨ç½²æ’ä»¶ï¼Œå¦‚å·²ç»é…ç½®è¿‡Gitåˆ™ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œå¦‚æç¤ºï¼š<br />
Please tell me who you are.<br />
åˆ™éœ€å‘Gitè¯´æ˜è‡ªå·±çš„èº«ä»½ï¼Œé€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªå‘½ä»¤è¯æ˜ï¼š<br />
"git config --global user.name "myusername"" ç”¨æˆ·å "git config --global
user.email "myemail"" é‚®ç®±<br />
è¦æŸ¥çœ‹ç”¨æˆ·ï¼Œä½¿ç”¨ï¼š<br />
"git config --list" 3.
é…ç½®_config.ymlæ–‡ä»¶ï¼Œæ–‡ä»¶æœ€åº•éƒ¨åšå¦‚ä¸‹é…ç½®ï¼ˆä¸‹é¢ç¬¦å·â€™+â€˜ä»£è¡¨ç©ºæ ¼ï¼ï¼ï¼ï¼‰ï¼š<br />
deploy:<br />
++type:+git<br />
++repo:+æ–°å»ºçš„ç©ºä»“åº“çš„åœ°å€<br />
++branch:+master 4. è¾“å…¥"hexo d"
éƒ¨ç½²åˆ°è¿œç«¯Githubä»“åº“é‡Œï¼Œåœ¨å¼¹å‡ºå¯¹è¯æ¡†ä¸­è¾“å…¥Githubè´¦å·å¯†ç  5.
æˆåŠŸå,åˆ·æ–°Githubä»“åº“ä¼šå‘ç°ä»“åº“ä¸­å¤šäº†äº›ä¸œè¥¿,è¿™äº›å°±æ˜¯åšå®¢çš„ä¸€äº›å†…å®¹<br />
6. å†æµè§ˆå™¨ä¸­è®¿é—® 1ä¸­çš„åç§°,å¯å‘ç°è¿œç¨‹éƒ¨ç½²å®Œæˆ</p>
<h1 id="æ¢åšå®¢ä¸»é¢˜">æ¢åšå®¢ä¸»é¢˜</h1>
<p>æ­¤ä¸»é¢˜ä»…æ˜¯ä¸€ä¸ªç¤ºä¾‹ <a href="https://YourGithubName.github.io/"
class="uri">https://YourGithubName.github.io/</a>
è®¿é—®è¿™ä¸ªåœ°å€å¯ä»¥æŸ¥çœ‹åšå®¢<br />
ä¸‹é¢æ“ä½œä¾æ—§åœ¨blogç›®å½•ä¸‹ 1. è¾“å…¥"git clone
https://github.com/litten/hexo-theme-yilia.git themes/yilia"
ä¸‹è½½yiliaä¸»é¢˜åˆ°æœ¬åœ°blog/themesç›®å½•ä¸‹ 2. ä¿®æ”¹blogç›®å½•ä¸‹çš„ _config.yml
æ–‡ä»¶,ä¿®æ”¹å¦‚ä¸‹:<br />
theme: yilia 3. è¾“å…¥"hexo clean" æ¸…ç† 4. è¾“å…¥"hexo g" ç”Ÿæˆ 5. è¾“å…¥"hexo
s" é‡æ–°å¯åŠ¨æœ¬åœ°æœåŠ¡æŸ¥çœ‹å˜åŒ– 6. è¾“å…¥"hexo d"
éƒ¨ç½²åˆ°è¿œç«¯Githubä»“åº“é‡Œ,è¿™æ¬¡ä¸ç”¨è¾“å…¥è´¦æˆ·å¯†ç  7.
åœ¨Githubåœ°å€ä¸‹åˆ·æ–°æŸ¥çœ‹å˜æ¢ 8. ä¸»é¢˜æ›´æ¢å®Œæˆ</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<blockquote>
<p>éœ€è¦å®‰è£…é…ç½®å¥½node.jså’ŒGit<br />
è¿™åªæ˜¯ç®€å•çš„æ­å»ºåšå®¢,ç•Œé¢æ¯”è¾ƒç²—ç³™,æœ‰å¾…æ”¹è¿›<br />
æ­å»ºåšå®¢å®¹æ˜“,åšæŒå†™åšå®¢éš¾<br />
ç›¸ä¿¡åœ¨åšæŒå†™åšå®¢æ€»ç»“å,ä¸€å®šä¼šæœ‰æ‰€æé«˜</p>
</blockquote>
]]></content>
      <tags>
        <tag>Node&amp;NPM</tag>
        <tag>åšå®¢</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„ç»ªè®º</title>
    <url>/article/b06cc6ec.html</url>
    <content><![CDATA[<p>æ•°æ®ç»“æ„æ˜¯ä¸€é—¨ç ”ç©¶éæ•°å€¼è®¡ç®—çš„ç¨‹åºè®¾è®¡é—®é¢˜ä¸­çš„æ“ä½œå¯¹è±¡ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»å’Œæ“ä½œç­‰ç›¸å…³é—®é¢˜çš„å­¦ç§‘ã€‚</p>
<h1 id="ç¨‹åºè®¾è®¡-æ•°æ®ç»“æ„-ç®—æ³•">ç¨‹åºè®¾è®¡ = æ•°æ®ç»“æ„ + ç®—æ³•</h1>
<p>æ•°æ®ç»“æ„åœ¨ç¨‹åºè®¾è®¡ä¸­å æ®äº†ç›¸å½“é‡è¦çš„åœ°ä½ã€‚</p>
<span id="more"></span>
<h1 id="åŸºæœ¬æ¦‚å¿µå’Œæœ¯è¯­">åŸºæœ¬æ¦‚å¿µå’Œæœ¯è¯­</h1>
<h1 id="æ•°æ®">æ•°æ®</h1>
<p>æ•°æ®ï¼šæ˜¯æè¿°å®¢è§‚äº‹ç‰©çš„ç¬¦å·ï¼Œæ˜¯è®¡ç®—æœºä¸­å¯ä»¥æ“ä½œçš„å¯¹è±¡ï¼Œæ˜¯èƒ½è¢«è®¡ç®—æœºè¯†åˆ«ï¼Œå¹¶è¾“å…¥ç»™è®¡ç®—æœºå¤„ç†çš„ç¬¦å·é›†åˆã€‚</p>
<h1 id="æ•°æ®å…ƒç´ ">æ•°æ®å…ƒç´ </h1>
<p>æ•°æ®å…ƒç´ ï¼šæ˜¯ç»„æˆæ•°æ®ã€æœ‰ä¸€å®šæ„ä¹‰çš„åŸºæœ¬å•ä½ï¼Œåœ¨è®¡ç®—æœºä¸­é€šå¸¸ä½œä¸ºæ•´ä½“å¤„ç†ã€‚ä¹Ÿè¢«ç§°ä¸ºè®°å½•ã€‚</p>
<h1 id="æ•°æ®é¡¹">æ•°æ®é¡¹</h1>
<p>æ•°æ®é¡¹ï¼šä¸€ä¸ªæ•°æ®å…ƒç´ å¯ä»¥æœ‰è‹¥å¹²ä¸ªæ•°æ®é¡¹ç»„æˆã€‚æ•°æ®é¡¹æ˜¯æ•°æ®ä¸å¯åˆ†å‰²çš„æœ€å°å•ä½ã€‚</p>
<h1 id="æ•°æ®å¯¹è±¡">æ•°æ®å¯¹è±¡</h1>
<p>æ•°æ®å¯¹è±¡ï¼šæ˜¯æ€§è´¨ç›¸åŒçš„æ•°æ®å…ƒç´ çš„é›†åˆï¼Œæ˜¯æ•°æ®çš„å­é›†ã€‚</p>
<h1 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h1>
<p>æ•°æ®ç»“æ„ï¼šæ˜¯ç›¸äº’ä¹‹é—´å­˜åœ¨ä¸€ç§æˆ–å¤šç§ç‰¹å®šå…³ç³»çš„æ•°æ®å…ƒç´ çš„é›†åˆã€‚</p>
<h1 id="é€»è¾‘ç»“æ„ä¸ç‰©ç†ç»“æ„">é€»è¾‘ç»“æ„ä¸ç‰©ç†ç»“æ„</h1>
<h1 id="é€»è¾‘ç»“æ„">é€»è¾‘ç»“æ„</h1>
<ol type="1">
<li>é›†åˆç»“æ„</li>
<li>çº¿æ€§ç»“æ„</li>
<li>æ ‘å½¢ç»“æ„</li>
<li>å›¾å½¢ç»“æ„</li>
</ol>
<h1 id="ç‰©ç†ç»“æ„">ç‰©ç†ç»“æ„</h1>
<ol type="1">
<li>é¡ºåºå­˜å‚¨ç»“æ„
é¡ºåºå­˜å‚¨ç»“æ„ï¼šæ˜¯æŠŠæ•°æ®å…ƒç´ å­˜æ”¾åœ¨åœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒé‡Œï¼Œå…¶æ•°æ®é—´çš„é€»è¾‘å…³ç³»å’Œç‰©ç†å…³ç³»æ˜¯ä¸€è‡´çš„ã€‚</li>
<li>é¡ºåºå­˜å‚¨ç»“æ„
é¡ºåºå­˜å‚¨ç»“æ„ï¼šæ˜¯æŠŠæ•°æ®å…ƒç´ å­˜æ”¾åœ¨ä»»æ„çš„å­˜å‚¨å•å…ƒé‡Œï¼Œè¿™ç»„å­˜å‚¨å•å…ƒå¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸è¿ç»­çš„ã€‚</li>
</ol>
<h1 id="æŠ½è±¡æ•°æ®ç±»å‹">æŠ½è±¡æ•°æ®ç±»å‹</h1>
<h1 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h1>
<p>æ•°æ®ç±»å‹ï¼šæ˜¯æŒ‡ä¸€ç»„æ€§è´¨ç›¸åŒçš„å€¼çš„é›†åˆåŠå®šä¹‰åœ¨æ­¤é›†åˆä¸Šçš„ä¸€äº›æ“ä½œçš„æ€»ç§°ã€‚</p>
<h1 id="æŠ½è±¡æ•°æ®ç±»å‹-1">æŠ½è±¡æ•°æ®ç±»å‹</h1>
<p>æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆAbstract Data
Typeï¼ŒADTï¼‰ï¼šæ˜¯æŒ‡ä¸€ä¸ªæ•°å­¦æ¨¡å‹åŠå®šä¹‰åœ¨è¯¥æ¨¡å‹ä¸Šçš„ä¸€ç»„æ“ä½œã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ä¸€å¥è¯ï¼Œæ•°æ®ç»“æ„éå¸¸é‡è¦ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ¬å­¦æœŸæ€»ç»“</title>
    <url>/article/a002a3e2.html</url>
    <content><![CDATA[<p>ä»Šå¹´å› ä¸ºç–«æƒ…çš„åŸå› ï¼Œå‰ä¸€ä¸ªå­¦æœŸåœ¨å®¶ä¸Šç½‘è¯¾ï¼Œä¸‹ä¸€ä¸ªå­¦æœŸ9æœˆä»½æ‰å¼€å­¦ï¼Œç„¶è€Œè¿™å­¦æœŸçš„ä»»åŠ¡å´ç‰¹åˆ«é‡ï¼Œè¯¾ç¨‹æ¯”è¾ƒç´§å¼ ï¼Œè¯¾ç¨‹ä¹Ÿæ¯”è¾ƒé‡è¦ï¼Œä¸è¿‡æœ€ç»ˆæ”¶è·è¿˜æ˜¯å¾ˆå¤šçš„ã€‚</p>
<span id="more"></span>
<h1 id="ç´§å¼ çš„å­¦æœŸ">ç´§å¼ çš„å­¦æœŸ</h1>
<p>æŠŠä»Šå¹´åˆ†ä¸ºä¸¤ä¸ªå­¦æœŸï¼Œå‰ä¸€ä¸ªç½‘è¯¾ï¼Œåä¸€ä¸ªåœ¨æ ¡ã€‚</p>
<h2 id="åœ¨å®¶ç½‘è¯¾">åœ¨å®¶ç½‘è¯¾</h2>
<blockquote>
<p>ç½‘è¯¾ä¼¼ä¹æ˜¯å¾ˆè½»æ¾çš„ï¼Œä½†æ°å·§è¿™å­¦æœŸçš„è¯¾ç¨‹çœŸçš„æ˜¯æœ€é‡è¦çš„ï¼Œç½‘è¯¾é˜¶æ®µé‡è¦è¯¾ç¨‹æ˜¯ï¼šæ•°æ®ç»“æ„ï¼Œè®¡ç®—æœºç»„æˆåŸç†ï¼Œå¦‚æœå†å¸¦ä¸Šç§»åŠ¨åº”ç”¨å¼€å‘å’Œç½‘ç»œåº”ç”¨å¼€å‘çš„è¯çœŸçš„æ„Ÿåˆ°ä»»åŠ¡å·¨å¤§ï¼Œå½“ç„¶è¯¾ç¨‹ä¸å•å•æ˜¯è¿™äº›ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å…¬å…±å¿…ä¿®è¯¾å’Œä¸“ä¸šé€‰ä¿®è¯¾ã€‚ä¸æ­¤åŒæ—¶ï¼Œç½‘è¯¾åœ¨å®¶çš„é˜¶æ®µï¼Œå®¶é‡Œä¸€ç›´åœ¨è£…ä¿®ï¼Œæ—§æˆ¿æ”¹é€ ï¼Œä¹±ä¸ƒå…«ç³Ÿå„ç§äº‹æƒ…ï¼Œæ‰€ä»¥ç²¾åŠ›å¹¶ä¸èƒ½å®Œå…¨é›†ä¸­åœ¨è¯¾ç¨‹ä¸Šã€‚ä½†å­¦çš„ä¹Ÿä¸æ˜¯å¾ˆç³Ÿç³•ï¼Œä¹Ÿæœ‰åŠªåŠ›çš„å­¦ï¼Œå› ä¸ºæ•°æ®ç»“æ„å¤ªé‡è¦äº†ï¼Œä¹Ÿå°±å› æ­¤ç½‘è¯¾ååŠæ®µåŒ…æ‹¬æš‘å‡ç›´æ¥ä¹°ä¹¦çœ‹ï¼Œè‡ªå·±å­¦ï¼Œä¹Ÿæ˜¯åœ¨è¿™ä¸ªæ—¶å€™ï¼Œæ­å»ºäº†è‡ªå·±çš„åšå®¢ï¼Œå†³å¿ƒè¦è¾¹å­¦ä¹ è¾¹æ€»ç»“ï¼Œç»å¸¸æ›´æ–°åšå®¢ã€‚</p>
</blockquote>
<h2 id="åœ¨æ ¡">åœ¨æ ¡</h2>
<blockquote>
<p>åœ¨æ ¡è¿™ä¸ªå­¦æœŸæ›´æ˜¯å‹åŠ›å±±å¤§ï¼Œå¯èƒ½åœ¨å®¶å‘†ä¹ æƒ¯äº†ï¼Œçªç„¶ä¸€åˆ‡æ¢å¤æ­£å¸¸ï¼Œæ¯å¤©èµ¶å»ä¸Šè¯¾ï¼Œæ„Ÿåˆ°æ¯èŠ‚è¯¾éƒ½å¥½é•¿å•Šã€‚è¿™å­¦æœŸæœ‰åŒæ ·é‡è¦çš„ï¼šæ“ä½œç³»ç»Ÿï¼Œè®¡ç®—æœºç½‘ç»œï¼Œç®—æ³•è®¾è®¡ä¸åˆ†æã€‚ä½ æ•¢è¯´å“ªä¸ªä¸é‡è¦ï¼Ÿè¿™äº›éƒ½æ˜¯è®¡ç®—æœºåŸºç¡€è¯¾ç¨‹ï¼Œé‡è¦æ€§ä¸ç”¨å¤šè¯´ã€‚é™¤æ­¤ä¹‹å¤–ç¼–ç¨‹å®æˆ˜æ–¹é¢æœ‰Java
Webä¸Pythonæ•°æ®åˆ†æï¼Œè¿™ä¸ªçœŸçš„æŠŠæˆ‘æçš„éš¾å—æ­»äº†ã€‚ä¸€ç‚¹ä¹Ÿä¸å¤¸å¼ ï¼Œæœ€åå‡ å‘¨å‡†å¤‡Java
Webå¤§ä½œä¸šçš„æ—¶å€™ï¼Œæ¯å¤©æåˆ°å‡Œæ™¨12ç‚¹ï¼Œæœ€æ™š1ç‚¹æ‰å‡†å¤‡ç©å¼€å§‹ä¼‘æ¯ï¼Œä¸ªäººèº«ä½“æ–¹é¢æ›´æ˜¯æœ‰æ„Ÿè§¦ï¼Œå› ä¸ºå…¬å…±ä½“è‚²è¯¾ä¿®å®Œäº†ï¼Œå‡ ä¹æ²¡æœ‰å‡ºå»è¿åŠ¨è¿‡ï¼Œæ•´å¤©å’Œç”µè„‘æ‰‹æœºå‘†åœ¨ä¸€å—ï¼Œç»å¸¸ç†¬å¤œï¼Œæ—©èµ·æ›´æ˜¯å›°éš¾ï¼Œé¥®é£Ÿä¹Ÿæœ‰äº›ä¸è§„å¾‹ï¼ŒæŠŠèº«ä½“æå¾—å¾ˆç³Ÿç³•ã€‚è¿˜æœ‰æ¯æ¬¡æ´—å¤´æ°´é‡Œå’Œæ‰‹ä¸Šçš„å¤´å‘å¥½å¤šå•Šï¼Œæˆ‘æ˜¯æœ‰äº›æ€•çš„ï¼Œä¸æ˜¯å§ï¼Œä¸€å®šä¸æ˜¯çš„ã€‚è¿˜æœ‰12æœˆçš„æ—¶å€™è¦è€ƒå…­çº§ï¼Œè¿™ã€‚ã€‚ã€‚è¿™å­¦æœŸéƒ½å¿™æˆç‹—äº†ï¼Œè¿˜å‡†å¤‡å…­çº§ï¼Ÿå“ªæ¥çš„åŠŸå¤«ï¼Œç´§ç´§å¼ å¼ å‡†å¤‡ä¸åˆ°ä¸€ä¸ªæœˆï¼Œåšå‡ å¥—é¢˜ï¼ŒåŒ†åŒ†å°±è€ƒè¯•ï¼Œä¹Ÿè®¸å¥½ä¹…æ²¡æœ‰ç»å†è¿™æ ·çš„è€ƒè¯•ï¼Œç´§å¼ åˆ°ä¸è¡Œï¼Œæœ€åå·®ç‚¹ç¿»è¯‘é¢˜éƒ½æ²¡å†™ã€‚</p>
</blockquote>
<h2 id="å¤ä¹ ">å¤ä¹ </h2>
<blockquote>
<p>è¿‘åœ¨è¿™ä¸ªä¸€æœˆï¼Œå¼€å§‹å¿™ç¢Œçš„å¤ä¹ ï¼Œè·¨äº†å¹´ï¼Œè¿˜æœ‰10å¤©å°±è€ƒè¯•äº†ï¼Œè¦å¤ä¹ å‘€ã€‚å®¿èˆæ˜¯å‘†ä¸ä¸‹å»çš„ï¼Œèƒ½å†»æ­»ï¼Œè¿˜èµ¶ä¸Šå¯’æ½®æ¥ä¸´ï¼Œæ¸©åº¦ç›´æ¥é™åˆ°é›¶ä¸‹10åº¦ï¼ˆæœ€å†·çš„æ—¶å€™ï¼‰ï¼Œèµ°åœ¨å®¤å¤–å†·é£ä¸€å¹ï¼Œæ•´ä¸ªäººéƒ½ä¸å¥½äº†ã€‚æ‰€ä»¥è¿˜æ˜¯æ‰¾è‡ªä¹ å®¤å§ï¼Œæ¯•ç«Ÿæœ‰æš–æ°”ç©ºè°ƒï¼Œæ•´æ•´10å¤šå¤©ï¼Œæ¯å¤©æ—©å‡ºæ™šå½’ï¼Œæ²¡æ—¥æ²¡å¤œçš„å¤ä¹ å¤ä¹ å¤ä¹ ï¼Œä¸å¤¸å¼ åœ°è¯´æ•´ä¸ªä¸€æœˆæˆ‘åªåœ¨æˆ‘ä»¬é‚£ç‰‡å®¿èˆé£Ÿå ‚åƒè¿‡3æ¬¡é¥­ã€‚çœ‹ä¹¦çœ‹PPTçœ‹çš„çœ¼ç›éƒ½ç´¯çš„éš¾å—ï¼Œé‚£å‡ å¤©ç¡å¾—ä¹Ÿä¸æ˜¯å¾ˆèˆ’æœã€‚ä¸è¿‡æœ€ç»ˆç»“å±€è¿˜æ˜¯ä¸é”™çš„ï¼Œè‡³å°‘ä¸Šè€ƒåœºçš„æ—¶å€™å¾ˆè½»æ¾ã€‚æˆ‘å‘ç°å•Šï¼Œæ¯æ¬¡å¤ä¹ çŠ¶æ€æœ€å¥½çš„æ˜¯ç¬¬äºŒéå¤ä¹ çš„æ—¶å€™ï¼Œé¡ºä¾¿è¯´ä¸€ä¸‹æˆ‘çš„å¤ä¹ ä¹ æƒ¯å§ï¼Œç¬¬ä¸€éï¼šæ•´ä½“çš„çœ‹ï¼Œåœ¨å¿ƒä¸­å»ºç«‹ä¸€ä¸ªæ•´ä½“æ¡†æ¶ï¼›ç¬¬äºŒéï¼šç»†çœ‹ï¼ŒæŠŠæ¯ä¸ªæ¡†æ¶ç©ºå¤„è¡¥å…¨ï¼Œä»¥ä¸ºç¬¬ä¸€éçš„åŸå› ï¼Œè¿™æ—¶å€™å¾€å¾€ä¼šåœ¨å‰åä¹‹é—´å‘ç°ä¸€äº›è”ç³»ï¼Œå‘ç°æœ‰äº›å†…å®¹å…³è”åº¦å¾ˆé«˜ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£è®°å¿†ï¼›ç¬¬ä¸‰é/ç¬¬å››éï¼šè¯¾å ‚ä½œä¸š+ä¹ é¢˜ï¼Œè¦åšåˆ°æ¯é“é¢˜éƒ½æ‡‚ï¼Œèƒ½ææ¸…æ¥šé¢˜ç›®é‡ç‚¹åœ¨å“ªï¼Œè€ƒå¯Ÿçš„æ˜¯ä»€ä¹ˆã€‚æ¥ç€å‰é¢çš„ï¼Œä¸ºä»€ä¹ˆè¯´ç¬¬äºŒéæ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºæœ‰äº†å‰é¢ç¬¬ä¸€éçš„æ™®éä½¿å¾—ç¬¬äºŒéå°±åƒæ˜¯å¡«ç©ºæ¸¸æˆä¸€æ ·ï¼Œæ¡†æ¶å¤§ä½“å·²ç»å­˜åœ¨ï¼Œè¿™æ—¶åªéœ€è¦æˆ‘å¾€é‡Œå¡«å°±æ˜¯äº†ï¼Œè€Œä¸”æˆ‘ä¸€ç›´è§‰å¾—ç¬¬äºŒéæ˜¯è®°å¿†æœ€æ·±çš„ã€‚æœ€ä¸å¥½çš„æ˜¯è€ƒè¯•å‰çš„å¤ä¹ ï¼Œå‰é¢éƒ½å¤ä¹ å·®ä¸å¤šäº†ï¼Œæ„Ÿè§‰è‡ªå·±å¯ä»¥ä¸Šå»è€ƒè¯•äº†ï¼Œå¤–åŠ ä¸Šå‡æœŸé©¬ä¸Šå°±è¦æ¥ä¸´äº†ï¼Œå¿ƒæƒ…æ¯”è¾ƒæ¿€åŠ¨ï¼Œè¿™æ—¶äººå°±ä¼šå˜å¾—ç‰¹åˆ«æµ®èºï¼Œä»€ä¹ˆä¹Ÿçœ‹ä¸ä¸‹å»ï¼Œå°±æ˜¯è¿™ä¸´é—¨ä¸€è„šï¼Œå¯¼è‡´åŠŸäºä¸€ç¯‘ã€‚</p>
</blockquote>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<blockquote>
<p>æˆ‘å¼€å§‹å†™åšå®¢çš„ä¸€ä¸ªé‡è¦åŸå› æ˜¯ï¼Œæ¯æ¬¡åœ¨æ€»ç»“å¼€å§‹çœŸæ­£æ•²å‡»é”®ç›˜æ—¶ï¼Œå°±ä¼šæ²‰é™ä¸‹å»ï¼Œæ²‰ä¸‹å¿ƒæ¥ï¼Œå®¡è§†è‡ªå·±ï¼Œé—®è‡ªå·±åˆ°åº•è¯¥æ€ä¹ˆè¡¨è¾¾ï¼Œæ€ä¹ˆä¼ è¾¾è‡ªå·±çš„æƒ³æ³•ã€‚æˆ‘è§‰å¾—åœ¨è¿™æ ·ä¸€ä¸ªå¿«èŠ‚å¥çš„ç¤¾ä¼šä¸‹ï¼Œæ²‰ä¸‹å»çœŸçš„å¤ªéš¾äº†ï¼Œä½†å´æ˜¯å¾ˆé‡è¦çš„ã€‚</p>
</blockquote>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ˆä¸é˜Ÿåˆ—</title>
    <url>/article/6534ce06.html</url>
    <content><![CDATA[<h1 id="æ ˆ">æ ˆ</h1>
<p>æ ˆæ˜¯é™å®šä»…åœ¨è¡¨å°¾è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚</p>
<span id="more"></span>
<h1 id="æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹">æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ADT Stack &#123;</span><br><span class="line">Data</span><br><span class="line">    å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œç›¸é‚»å…ƒç´ å…·æœ‰å‰é©±åç»§å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function">Operation</span></span><br><span class="line"><span class="function">    <span class="title">InitStack</span> <span class="params">(&amp;S)</span>  <span class="params">(æ„é€ ç©ºæ ˆ )</span></span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šæ„é€ ä¸€ä¸ªç©ºæ ˆSã€‚</span></span><br><span class="line"><span class="function">    <span class="title">DestroyStack</span><span class="params">(&amp;S)</span>   <span class="params">(é”€æ¯æ ˆç»“æ„)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šæ ˆSè¢«é”€æ¯ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">ClearStack</span> <span class="params">(&amp;S)</span>  <span class="params">(æ ˆæ¸…ç©º)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šæ ˆSæ¸…ä¸ºç©ºæ ˆã€‚</span></span><br><span class="line"><span class="function">    <span class="title">StackEmpty</span> <span class="params">(S)</span>   <span class="params">(åˆ¤ç©º)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šè‹¥æ ˆSä¸ºç©ºæ ˆï¼Œåˆ™è¿”å›<span class="literal">true</span>, å¦åˆ™<span class="literal">false</span>ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">StackLength</span> <span class="params">(S)</span> <span class="params">(æ±‚æ ˆé•¿)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šè¿”å›Sçš„å…ƒç´ ä¸ªæ•°ï¼Œå³æ ˆçš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">StackTraverse</span> <span class="params">(S)</span> <span class="params">(éå†æ ˆ)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ä¸”éç©ºã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šä»æ ˆåº•åˆ°æ ˆé¡¶ä¾æ¬¡å¯¹Sçš„æ¯ä¸ªæ•°æ®å…ƒç´ è®¿é—®ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">GetTop</span> <span class="params">(S, &amp;e)</span>   <span class="params">(æ±‚æ ˆé¡¶å…ƒç´ )</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ä¸”éç©ºã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šç”¨eè¿”å›Sçš„æ ˆé¡¶å…ƒç´ ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">Push</span> <span class="params">(&amp;S, e)</span> <span class="params">(å…¥æ ˆ)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šæ’å…¥å…ƒç´ eä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">Pop</span> <span class="params">(&amp;S, &amp;e)</span>  <span class="params">(å‡ºæ ˆ)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šæ ˆSå·²å­˜åœ¨ä¸”éç©ºã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šåˆ é™¤Sçš„æ ˆé¡¶å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼ã€‚</span></span><br><span class="line"><span class="function">&#125;ADT Stack</span></span><br></pre></td></tr></table></figure>
<h1 id="æ ˆçš„é¡ºåºå­˜å‚¨ç»“æ„">æ ˆçš„é¡ºåºå­˜å‚¨ç»“æ„</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAXSIZE 50      <span class="comment">/*å­˜å‚¨ç©ºé—´åˆå§‹åˆ†é…é‡*/</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> SElemType;  <span class="comment">/*SElemTypeç±»å‹æ ¹æ®å®é™…æƒ…å†µè€Œå®š*/</span></span><br><span class="line"><span class="keyword">typedef</span>  <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    SElemType* data;    <span class="comment">/*å­˜å‚¨ç©ºé—´åŸºåœ°å€*/</span></span><br><span class="line">    <span class="type">int</span> top;            <span class="comment">/*æ ˆé¡¶æŒ‡é’ˆ*/</span></span><br><span class="line">&#125; SqStack;</span><br></pre></td></tr></table></figure>
<h1 id="è¿›æ ˆæ“ä½œ">è¿›æ ˆæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push</span><span class="params">(SqStack&amp; S, SElemType e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (S.top == MAXSIZE - <span class="number">1</span>)    <span class="comment">/*æ ˆæ»¡*/</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ ˆæ»¡&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        S.top++;            <span class="comment">/*æ ˆé¡¶æŒ‡é’ˆåŠ ä¸€*/</span></span><br><span class="line">        S.data[S.top] = e;  <span class="comment">/*æ–°å…ƒç´ èµ‹å€¼ç»™æ ˆé¡¶ç©ºé—´*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‡ºæ ˆæ“ä½œ">å‡ºæ ˆæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Pop</span><span class="params">(SqStack&amp; S, SElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (S.top == <span class="number">-1</span>)           <span class="comment">/*æ ˆç©º*/</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ ˆç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        e = S.data[S.top];  <span class="comment">/*å°†è¦åˆ é™¤å…ƒç´ èµ‹å€¼ç»™e*/</span></span><br><span class="line">        S.top--;            <span class="comment">/*æ ˆé¡¶æŒ‡é’ˆå‡ä¸€*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸¤æ ˆå…±äº«ç©ºé—´">ä¸¤æ ˆå…±äº«ç©ºé—´</h1>
<p>ç•¥ã€‚ã€‚ã€‚</p>
<h1 id="æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„">æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">StackNode</span></span><br><span class="line">&#123;</span><br><span class="line">    SElemType data;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">StackNode</span>* next;</span><br><span class="line">&#125;StackNode, * LinkStackPtr;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">LinkStack</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkStackPtr top;</span><br><span class="line">    <span class="type">int</span> count;</span><br><span class="line">&#125;LinkStack;</span><br></pre></td></tr></table></figure>
<h1 id="è¿›æ ˆæ“ä½œ-1">è¿›æ ˆæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push</span><span class="params">(LinkStack&amp; S, SElemType e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LinkStackPtr s = <span class="keyword">new</span> StackNode;</span><br><span class="line">    s-&gt;data = e;        <span class="comment">/*ç»™æ–°ç»“ç‚¹å€¼e*/</span></span><br><span class="line">    s-&gt;next = S.top;    <span class="comment">/*å½“å‰æ ˆé¡¶èµ‹ç»™æ–°ç»“ç‚¹åç»§*/</span></span><br><span class="line">    S.top = s;          <span class="comment">/*æ–°ç»“ç‚¹sèµ‹ç»™æ ˆé¡¶æŒ‡é’ˆ*/</span></span><br><span class="line">    S.count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‡ºæ ˆå‡ºæ ˆ">å‡ºæ ˆå‡ºæ ˆ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Pop</span><span class="params">(LinkStack&amp; S, SElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LinkStackPtr p;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">IsEmpty</span>(S))</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ ˆç©º&quot;</span> &lt;&lt; endl;   <span class="comment">/*æ ˆç©º*/</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        e = S.top-&gt;data;         <span class="comment">/*å°†è¦åˆ é™¤å…ƒç´ èµ‹å€¼ç»™e*/</span></span><br><span class="line">        p = S.top;               <span class="comment">/*å°†æ ˆé¡¶ç»“ç‚¹èµ‹å€¼ç»™p*/</span></span><br><span class="line">        S.top = S.top-&gt;next;     <span class="comment">/*ä½¿æ ˆé¡¶æŒ‡é’ˆä¸‹ç§»ä¸€ä½*/</span></span><br><span class="line">        <span class="keyword">delete</span> p;                <span class="comment">/*é‡Šæ”¾ç»“ç‚¹p*/</span></span><br><span class="line">        S.count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ ˆçš„ä½œç”¨">æ ˆçš„ä½œç”¨</h1>
<p>æ ˆçš„å¼•å…¥ç®€åŒ–äº†ç¨‹åºè®¾è®¡é—®é¢˜ï¼Œåˆ’åˆ†äº†ä¸åŒå…³æ³¨å±‚æ¬¡ï¼Œä½¿å¾—æ€è€ƒèŒƒå›´ç¼©å°ï¼Œæ›´åŠ èšç„¦äºæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ ¸å¿ƒã€‚åä¹‹ï¼Œåƒæ•°ç»„ç­‰ï¼Œå› ä¸ºè¦åˆ†æ•£ç²¾åŠ›å»è€ƒè™‘æ•°ç»„çš„ä¸‹æ ‡å¢å‡ç­‰ç»†èŠ‚é—®é¢˜ï¼Œåè€Œæ©ç›–äº†é—®é¢˜çš„æœ¬è´¨ã€‚</p>
<p>ç°åœ¨è®¸å¤šçš„é«˜çº§è¯­è¨€ï¼Œå¦‚javaï¼ŒC#ç­‰éƒ½æœ‰å¯¹æ ˆç»“æ„çš„å°è£…ï¼Œå¯ä»¥ä¸ç”¨å…³æ³¨å®ƒçš„å®ç°ç»†èŠ‚ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨Stackçš„pushå’Œpopæ–¹æ³•ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<h1 id="æ ˆçš„åº”ç”¨-é€’å½’">æ ˆçš„åº”ç”¨-é€’å½’</h1>
<p>æˆ‘ä»¬æŠŠä¸€ä¸ªç›´æ¥è°ƒç”¨è‡ªå·±æˆ–é€šè¿‡ä¸€ç³»åˆ—çš„è°ƒç”¨è¯­å¥é—´æ¥åœ°è°ƒç”¨è‡ªå·±çš„å‡½æ•°ï¼Œç§°åšé€’å½’å‡½æ•°ã€‚</p>
<h1 id="æ–æ³¢é‚£å¥‘æ•°åˆ—">æ–æ³¢é‚£å¥‘æ•°åˆ—</h1>
<p>F(n)=F(n-1)+F(n-2)ï¼Œ(F(1)=F(2)=1)</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Fbi</span><span class="params">(<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==<span class="number">1</span>||i==<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Fbi</span>(i<span class="number">-1</span>)+<span class="built_in">Fbi</span>(i<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç­‰...">ç­‰...</h1>
<h1 id="æ ˆçš„åº”ç”¨-å››åˆ™è¿ç®—è¡¨è¾¾å¼æ±‚å€¼">æ ˆçš„åº”ç”¨-å››åˆ™è¿ç®—è¡¨è¾¾å¼æ±‚å€¼</h1>
<p><a
href="https://blog.csdn.net/yzl_rex/article/details/7745341">å¯å‚è€ƒ</a></p>
<h1 id="é˜Ÿåˆ—">é˜Ÿåˆ—</h1>
<p>é˜Ÿåˆ—æ˜¯åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ’å…¥æ“ä½œï¼Œè€Œåœ¨å¦ä¸€ç«¯è¿›è¡Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚</p>
<h1 id="é˜Ÿåˆ—çš„æŠ½è±¡æ•°æ®ç±»å‹">é˜Ÿåˆ—çš„æŠ½è±¡æ•°æ®ç±»å‹</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ADT Queue &#123;</span><br><span class="line">Data</span><br><span class="line">    å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œç›¸é‚»å…ƒç´ å…·æœ‰å‰é©±åç»§å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function">Operation</span></span><br><span class="line"><span class="function">    <span class="title">InitQueue</span> <span class="params">(&amp;Q)</span>  <span class="params">(æ„é€ ç©ºé˜Ÿåˆ— )</span></span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šæ„é€ ä¸€ä¸ªç©ºé˜Ÿåˆ—Qã€‚</span></span><br><span class="line"><span class="function">    <span class="title">DestroyQueue</span> <span class="params">(&amp;Q)</span>   <span class="params">(é”€æ¯é˜Ÿåˆ—ç»“æ„)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šé˜Ÿåˆ—Qè¢«é”€æ¯ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">ClearQueue</span>  <span class="params">(&amp;Q)</span>  <span class="params">(é˜Ÿåˆ—æ¸…ç©º)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šé˜Ÿåˆ—Qæ¸…ä¸ºç©ºé˜Ÿåˆ—ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">QueueEmpty</span> <span class="params">(Q)</span>   <span class="params">(åˆ¤ç©º)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šè‹¥é˜Ÿåˆ—Qä¸ºç©ºï¼Œåˆ™è¿”å›<span class="literal">true</span>, å¦åˆ™<span class="literal">false</span>ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">QueueLength</span> <span class="params">(Q)</span> <span class="params">(æ±‚é˜Ÿåˆ—é•¿)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šè¿”å›Qçš„å…ƒç´ ä¸ªæ•°ï¼Œå³é˜Ÿåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">QueueTraverse</span> <span class="params">(Q)</span> <span class="params">(éå†é˜Ÿåˆ—)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ä¸”éç©ºã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šä»é˜Ÿå¤´åˆ°é˜Ÿå°¾ï¼Œä¾æ¬¡å¯¹Qçš„æ¯ä¸ªæ•°æ®å…ƒç´   è®¿é—®ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">GetHead</span> <span class="params">(Q, &amp;e)</span>   <span class="params">(æ±‚é˜Ÿå¤´å…ƒç´ )</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ä¸”éç©ºã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šç”¨eè¿”å›Qçš„é˜Ÿå¤´å…ƒç´ ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">EnQueue</span> <span class="params">(&amp;Q, e)</span> <span class="params">(å…¥é˜Ÿ)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šæ’å…¥å…ƒç´ eä¸ºæ–°çš„é˜Ÿåˆ—å…ƒç´ ã€‚</span></span><br><span class="line"><span class="function">    <span class="title">DeQueue</span> <span class="params">(&amp;Q, &amp;e)</span>  <span class="params">(å‡ºé˜Ÿ)</span></span></span><br><span class="line"><span class="function">    åˆå§‹æ¡ä»¶ï¼šé˜Ÿåˆ—Qå·²å­˜åœ¨ä¸”éç©ºã€‚</span></span><br><span class="line"><span class="function">    æ“ä½œç»“æœï¼šåˆ é™¤Qçš„é˜Ÿå¤´å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼ã€‚</span></span><br><span class="line"><span class="function">&#125;ADT Queue</span></span><br></pre></td></tr></table></figure>
<h1 id="å¾ªç¯é˜Ÿåˆ—">å¾ªç¯é˜Ÿåˆ—</h1>
<p>æˆ‘ä»¬æŠŠé˜Ÿåˆ—çš„è¿™ç§å¤´å°¾ç›¸è¿çš„é¡ºåºå­˜å‚¨ç»“æ„ç§°ä¸ºå¾ªç¯é˜Ÿåˆ—ã€‚ï¼ˆå¯è§£å†³é¡ºåºå­˜å‚¨ç©ºé—´ä¸è¶³ï¼‰</p>
<h1 id="å®šä¹‰">å®šä¹‰</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAXSIZE 50</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> QElemType;</span><br><span class="line"><span class="comment">//å¾ªç¯é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    QElemType* data;</span><br><span class="line">    <span class="type">int</span> front;      <span class="comment">/*å¤´æŒ‡é’ˆ*/</span></span><br><span class="line">    <span class="type">int</span> rear;       <span class="comment">/*å°¾æŒ‡é’ˆ*/</span></span><br><span class="line">&#125;SqQueue;</span><br></pre></td></tr></table></figure>
<h1 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitQueue</span><span class="params">(SqQueue&amp; Q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Q.front = <span class="number">0</span>;</span><br><span class="line">    Q.rear = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é˜Ÿåˆ—é•¿åº¦">é˜Ÿåˆ—é•¿åº¦</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetLength</span><span class="params">(SqQueue Q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (Q.rear - Q.front + MAXSIZE) % MAXSIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…¥é˜Ÿæ“ä½œ">å…¥é˜Ÿæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">EnQueue</span><span class="params">(SqQueue&amp; Q, QElemType e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((Q.rear + <span class="number">1</span>) % MAXSIZE == Q.front)  <span class="comment">/*é˜Ÿæ»¡*/</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é˜Ÿåˆ—æ»¡&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Q.data[Q.rear] = e;                 <span class="comment">/*å…ƒç´ eèµ‹å€¼ç»™é˜Ÿå°¾*/</span></span><br><span class="line">        Q.rear = (Q.rear + <span class="number">1</span>) % MAXSIZE;    <span class="comment">/*rearæŒ‡é’ˆåç§»ä¸€ä½*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‡ºé˜Ÿæ“ä½œ">å‡ºé˜Ÿæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DeQueue</span><span class="params">(SqQueue&amp; Q, QElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Q.front == Q.rear)                  <span class="comment">/*é˜Ÿç©º*/</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é˜Ÿåˆ—ç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        e = Q.data[Q.front];                <span class="comment">/*é˜Ÿå¤´å…ƒç´ èµ‹å€¼ç»™e*/</span></span><br><span class="line">        Q.front = (Q.front + <span class="number">1</span>) % MAXSIZE;  <span class="comment">/*frontæŒ‡é’ˆåç§»ä¸€ä½*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨ç»“æ„">é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨ç»“æ„</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> QElemType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">QNode</span></span><br><span class="line">&#123;</span><br><span class="line">    QElemType data;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">QNode</span>* next;</span><br><span class="line">&#125;QNode, * QueuePtr;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    QueuePtr front, rear;</span><br><span class="line">&#125;LinkQueue;</span><br></pre></td></tr></table></figure>
<h1 id="å…¥é˜Ÿæ“ä½œ-1">å…¥é˜Ÿæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">EnQueue</span><span class="params">(LinkQueue&amp; Q, QElemType e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QueuePtr s = <span class="keyword">new</span> QNode;</span><br><span class="line">    <span class="keyword">if</span> (!s)                             <span class="comment">/*å­˜å‚¨åˆ†é…å¤±è´¥*/</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å­˜å‚¨åˆ†é…å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        s-&gt;data = e;</span><br><span class="line">        s-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        Q.rear-&gt;next = s;   <span class="comment">/*æ–°ç»“ç‚¹sèµ‹å€¼ç»™é˜Ÿå°¾åç»§*/</span></span><br><span class="line">        Q.rear = s;         <span class="comment">/*sè®¾ä¸ºé˜Ÿå°¾ç»“ç‚¹*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‡ºé˜Ÿæ“ä½œ-1">å‡ºé˜Ÿæ“ä½œ</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DeQueue</span><span class="params">(LinkQueue&amp; Q, QElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QueuePtr p;</span><br><span class="line">    <span class="keyword">if</span> (Q.front == Q.rear)          <span class="comment">/*é˜Ÿåˆ—ç©º*/</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é˜Ÿåˆ—ç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        p = Q.front-&gt;next;          <span class="comment">/*æ¬²åˆ é™¤ç»“ç‚¹æš‚å­˜ç»™p*/</span></span><br><span class="line">        e = p-&gt;data;                <span class="comment">/*æ¬²åˆ é™¤å¯¹å¤´ç»“ç‚¹èµ‹å€¼ç»™e*/</span></span><br><span class="line">        Q.front-&gt;next = p-&gt;next;    <span class="comment">/*åŸå¯¹å¤´ç»“ç‚¹åç»§p-&gt;nextèµ‹å€¼ç»™å¤´ç»“ç‚¹åç»§*/</span></span><br><span class="line">        <span class="keyword">if</span> (Q.rear == p)            <span class="comment">/*è‹¥é˜Ÿå¤´æ˜¯é˜Ÿå°¾ï¼Œåˆ™åˆ é™¤åå°†rearæŒ‡å‘å¤´ç»“ç‚¹*/</span></span><br><span class="line">            Q.rear = Q.front;</span><br><span class="line">        <span class="keyword">delete</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ ˆä¸é˜Ÿåˆ—å¯¹æ¯”">æ ˆä¸é˜Ÿåˆ—å¯¹æ¯”</h1>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>æ¯”è¾ƒé¡¹ç›®</th>
<th>æ ˆ</th>
<th>é˜Ÿåˆ—</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>é€»è¾‘ç»“æ„</td>
<td>å’Œçº¿æ€§è¡¨ä¸€æ ·, æ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨ä¸€å¯¹ä¸€çš„å…³ç³»</td>
<td>å’Œçº¿æ€§è¡¨ä¸€æ ·, æ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨ä¸€å¯¹ä¸€çš„å…³ç³»</td>
</tr>
<tr class="even">
<td>é¡ºåºå­˜å‚¨</td>
<td>å­˜å‚¨ç©ºé—´é¢„å…ˆåˆ†é…ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç©ºé—´é—²ç½®æˆ–æ ˆæ»¡æº¢å‡ºç°è±¡ï¼›æ•°æ®å…ƒç´ ä¸ªæ•°ä¸èƒ½è‡ªç”±æ‰©å……</td>
<td>ï¼ˆå¸¸è®¾è®¡æˆå¾ªç¯é˜Ÿåˆ—å½¢å¼ï¼‰ï¼›å­˜å‚¨ç©ºé—´é¢„å…ˆåˆ†é…ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç©ºé—´é—²ç½®æˆ–é˜Ÿæ»¡æº¢å‡ºç°è±¡ï¼›æ•°æ®å…ƒç´ ä¸ªæ•°ä¸èƒ½è‡ªç”±æ‰©å……</td>
</tr>
<tr class="odd">
<td>é“¾å¼å­˜å‚¨</td>
<td>åŠ¨æ€åˆ†é…ï¼Œä¸ä¼šå‡ºç°é—²ç½®æˆ–æ ˆæ»¡æº¢å‡ºç°è±¡;æ•°æ®å…ƒç´ ä¸ªæ•°å¯ä»¥è‡ªç”±æ‰©å……</td>
<td>åŠ¨æ€åˆ†é…ï¼Œä¸ä¼šå‡ºç°é—²ç½®æˆ–æ ˆæ»¡æº¢å‡ºç°è±¡;æ•°æ®å…ƒç´ ä¸ªæ•°å¯ä»¥è‡ªç”±æ‰©å……</td>
</tr>
<tr class="even">
<td>è¿ç®—è§„åˆ™</td>
<td>æ’äººå’Œåˆ é™¤åœ¨è¡¨çš„ä¸€ç«¯(æ ˆé¡¶)å®Œæˆï¼Œåè¿›å…ˆå‡º</td>
<td>æ’å…¥è¿ç®—åœ¨è¡¨çš„ä¸€ç«¯(é˜Ÿå°¾)è¿›è¡Œï¼Œåˆ é™¤è¿ç®—åœ¨è¡¨çš„å¦ä¸€ç«¯(é˜Ÿå¤´),å…ˆè¿›å…ˆå‡º</td>
</tr>
</tbody>
</table>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘</title>
    <url>/article/7b216a3b.html</url>
    <content><![CDATA[<h1 id="å®šä¹‰">å®šä¹‰</h1>
<p>æ ‘æ˜¯ç”±nä¸ªç»“ç‚¹ç»„æˆçš„æœ‰é™é›†ã€‚n=0æ—¶ç§°ä¸ºç©ºæ ‘ã€‚ä¸”å¯¹äºéç©ºæ ‘ï¼š</p>
<ul>
<li><p>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç‰¹å®šçš„ç§°ä¸ºæ ¹çš„ç»“ç‚¹ï¼›</p></li>
<li><p>å½“n&gt;1æ—¶ï¼Œå…¶ä½™ç»“ç‚¹å¯åˆ†ä¸ºm(m&gt;0)ä¸ªäº’ä¸ç›¸äº¤çš„æœ‰é™é›†T1,T2,â€¦,Tmï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé›†åˆæœ¬èº«åˆæ˜¯ä¸€æ£µæ ‘ï¼Œç§°ä¸ºæ ¹çš„å­æ ‘(subtree)ã€‚</p></li>
</ul>
<span id="more"></span>
<h1 id="åŸºæœ¬æœ¯è¯­">åŸºæœ¬æœ¯è¯­</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/æ ‘.png"
alt="æ ‘" />
<figcaption aria-hidden="true">æ ‘</figcaption>
</figure>
<blockquote>
<p>ç»“ç‚¹ï¼šä¸€ä¸ªæ•°æ®å…ƒç´ +è‹¥å¹²æŒ‡å‘å­æ ‘çš„åˆ†æ”¯</p>
</blockquote>
<blockquote>
<p>ç»“ç‚¹æ‹¥æœ‰çš„å­æ ‘æ•°ï¼ˆæˆ–åˆ†æ”¯æ•°ï¼‰ç§°ä¸ºç»“ç‚¹çš„åº¦ã€‚</p>
</blockquote>
<ul>
<li>ç»“ç‚¹Açš„åº¦æ˜¯3ï¼ŒCçš„æ˜¯1ï¼ŒGçš„æ˜¯é›¶ã€‚åº¦ä¸ºé›¶çš„ç»“ç‚¹ç§°ä¸ºå¶å­ç»“ç‚¹/ç»ˆç«¯ç»“ç‚¹ã€‚Kï¼ŒLï¼ŒFï¼ŒGï¼ŒMï¼ŒIï¼ŒJæ˜¯å¶å­ç»“ç‚¹ã€‚åº¦ä¸ä¸ºé›¶çš„ç»“ç‚¹ç§°ä¸ºåˆ†æ”¯ç»“ç‚¹/éç»ˆç«¯ç»“ç‚¹ã€‚</li>
</ul>
<blockquote>
<p>ç»“ç‚¹çš„å­æ ‘çš„æ ¹ç§°ä¸ºè¯¥ç»“ç‚¹çš„å­©å­ï¼Œè¯¥ç»“ç‚¹ç§°ä¸ºå­©å­çš„åŒäº²</p>
</blockquote>
<ul>
<li>Dçš„å­©å­æ˜¯Hï¼ŒIå’ŒJï¼›Dçš„åŒäº²æ˜¯Aã€‚</li>
</ul>
<blockquote>
<p>åŒä¸€ä¸ªåŒäº²çš„å­©å­æ˜¯å…„å¼Ÿã€‚</p>
</blockquote>
<ul>
<li>Hï¼ŒIå’ŒJæ˜¯å…„å¼Ÿã€‚</li>
</ul>
<blockquote>
<p>åŒäº²åœ¨åŒä¸€å±‚çš„ç»“ç‚¹ç§°ä¸ºå ‚å…„å¼Ÿ</p>
</blockquote>
<blockquote>
<p>ç»“ç‚¹çš„ç¥–å…ˆæ˜¯ä»æ ¹åˆ°è¯¥ç»“ç‚¹æ‰€ç»è¿‡çš„æ‰€æœ‰ç»“ç‚¹ã€‚</p>
</blockquote>
<ul>
<li>Mçš„ç¥–å…ˆæ˜¯Aã€Då’ŒHã€‚</li>
</ul>
<blockquote>
<p>ç»“ç‚¹çš„å­å­™æ˜¯è¯¥ç»“ç‚¹ä¸‹å±‚å­æ ‘ä¸­çš„ä»»æ„ç»“ç‚¹ã€‚</p>
</blockquote>
<ul>
<li>Bçš„å­å­™ä¸ºEã€Fã€Kå’ŒLã€‚</li>
</ul>
<blockquote>
<p>ç»“ç‚¹çš„å±‚æ¬¡</p>
</blockquote>
<ul>
<li>ä»æ ¹åˆ°è¯¥ç»“ç‚¹çš„å±‚æ•°ï¼ˆæ ¹ç»“ç‚¹ä¸ºç¬¬ä¸€å±‚ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>æ ‘çš„æ·±åº¦</p>
</blockquote>
<ul>
<li>æŒ‡æ‰€æœ‰ç»“ç‚¹æœ€å¤§çš„å±‚æ•°ï¼ˆMax{å„ç»“ç‚¹çš„å±‚æ•°}ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>æ ‘çš„åº¦</p>
</blockquote>
<ul>
<li>æ‰€æœ‰ç»“ç‚¹åº¦çš„æœ€å¤§å€¼ï¼ˆMax{å„ç»“ç‚¹çš„åº¦}ï¼‰ã€‚</li>
<li>ä¸Šå›¾ä¸­æ ‘çš„åº¦ä¸º3</li>
</ul>
<blockquote>
<p>æœ‰åºæ ‘</p>
</blockquote>
<ul>
<li>ç»“ç‚¹å„å­æ ‘ä»å·¦è‡³å³æœ‰åºï¼Œä¸èƒ½äº’æ¢ï¼ˆå·¦ä¸ºç¬¬ä¸€ï¼‰</li>
<li>å®¶è°±</li>
</ul>
<blockquote>
<p>æ— åºæ ‘</p>
</blockquote>
<ul>
<li>ç»“ç‚¹å„å­æ ‘å¯äº’æ¢ä½ç½®</li>
<li>æœºæ„</li>
</ul>
<blockquote>
<p>æ£®æ—</p>
</blockquote>
<ul>
<li>æŒ‡mæ£µäº’ä¸ç›¸äº¤çš„æ ‘çš„é›†åˆ</li>
</ul>
<blockquote>
<p>ä»»ä½•ä¸€æ£µéç©ºæ ‘æ˜¯ä¸€ä¸ªäºŒå…ƒç»„Tree =ï¼ˆrootï¼ŒFï¼‰</p>
</blockquote>
<ul>
<li>root è¢«ç§°ä¸ºæ ¹ç»“ç‚¹ï¼ŒF è¢«ç§°ä¸ºå­æ ‘æ£®æ—</li>
</ul>
<h1 id="æ ‘çš„æŠ½è±¡æ•°æ®ç±»å‹">æ ‘çš„æŠ½è±¡æ•°æ®ç±»å‹</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ADTæ ‘(tree )</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">    æ ‘æ˜¯ç”±ä¸€ä¸ªæ ¹ç»“ç‚¹å’Œè‹¥å¹²æ£µå­æ ‘æ„æˆã€‚æ ‘ä¸­ç»“ç‚¹å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹åŠå±‚æ¬¡å…³</span><br><span class="line"></span><br><span class="line"><span class="function">Operation</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">InitTree</span> <span class="params">(&amp;T)</span> :æ„é€ ç©ºæ ‘Tã€‚</span></span><br><span class="line"><span class="function">    DestroyTree (&amp;T) :é”€æ¯æ ‘Tã€‚</span></span><br><span class="line"><span class="function">    CreateTree ( &amp;T, definition) :æŒ‰definitionä¸­ç»™å‡ºæ ‘çš„å®šä¹‰æ¥æ„é€ æ ‘ã€‚ClearTree(&amp;T):è‹¥æ ‘Tå­˜åœ¨ï¼Œåˆ™å°†æ ‘Tæ¸…ä¸ºç©ºæ ‘ã€‚</span></span><br><span class="line"><span class="function">    TreeEmpty (T):è‹¥Tä¸ºç©ºæ ‘ï¼Œè¿”å›true,å¦åˆ™è¿”å›false.</span></span><br><span class="line"><span class="function">    TreeDepth(T) :è¿”å›Tçš„æ·±åº¦ã€‚</span></span><br><span class="line"><span class="function">    Root (T) :è¿”å›Tçš„æ ¹ç»“ç‚¹ã€‚</span></span><br><span class="line"><span class="function">    Value (T,cur e): cur eæ˜¯æ ‘Tä¸­ä¸€ä¸ªç»“ç‚¹ï¼Œè¿”å›æ­¤ç»“ç‚¹çš„å€¼ã€‚</span></span><br><span class="line"><span class="function">    Assign (T,cur _e,value) :ç»™æ ‘Tçš„ç»“ç‚¹cur_ eèµ‹å€¼ä¸ºvalueã€‚</span></span><br><span class="line"><span class="function">    Parent (T,cur e):è‹¥cur_ eæ˜¯æ ‘Tçš„éæ ¹ç»“ç‚¹ï¼Œåˆ™è¿”å›å®ƒçš„åŒäº²ï¼Œå¦åˆ™è¿”å›ç©ºã€‚LeftChild(T,cur e):è‹¥cur_ eæ˜¯æ ‘Tçš„éå¶ç»“ç‚¹ï¼Œåˆ™è¿”å›å®ƒçš„æœ€å·¦å­©å­ï¼Œå¦åˆ™è¿”ç©ºã€‚</span></span><br><span class="line"><span class="function">    Rightsibling (T,cur e) :è‹¥cur_ eæœ‰å³å…„å¼Ÿï¼Œåˆ™è¿”å›å®ƒçš„å³å…„å¼Ÿï¼Œå¦åˆ™è¿”å›ç©ºã€‚InsertChild(&amp;T,&amp;p,i,c):å…¶ä¸­pæŒ‡å‘æ ‘Tçš„æŸä¸ªç»“ç‚¹ï¼Œiä¸ºæ‰€æŒ‡ç»“ç‚¹Pçš„åº¦åŠ ä¸Š<span class="number">1</span>ï¼Œéç©ºæ ‘cä¸Tä¸ç›¸äº¤ï¼Œæ“ä½œç»“æœä¸ºæ’å…¥cä¸ºæ ‘Tä¸­pæŒ‡ç»“ç‚¹çš„ç¬¬iæ£µå­æ ‘ã€‚</span></span><br><span class="line"><span class="function">    DeleteChild(&amp;T,&amp;p,i) :å…¶ä¸­pæŒ‡å‘æ ‘Tçš„æŸä¸ªç»“ç‚¹ï¼Œiä¸ºæ‰€æŒ‡ç»“ç‚¹pçš„åº¦ï¼Œæ“ä½œç»“æœä¸ºåˆ é™¤Tä¸­pæ‰€æŒ‡ç»“ç‚¹çš„ç¬¬iæ£µå­æ ‘ã€‚</span></span><br><span class="line"><span class="function">endADT</span></span><br></pre></td></tr></table></figure>
<h1 id="æ ‘çš„å­˜å‚¨ç»“æ„">æ ‘çš„å­˜å‚¨ç»“æ„</h1>
<p>è¯´åˆ°å­˜å‚¨ç»“æ„ï¼Œå°±ä¼šæƒ³åˆ°æˆ‘ä»¬å‰é¢ç« èŠ‚è®²è¿‡çš„é¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨ä¸¤ç§ç»“æ„ã€‚</p>
<p>å…ˆæ¥çœ‹çœ‹é¡ºåºå­˜å‚¨ç»“æ„ï¼Œç”¨ä¸€æ®µåœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ã€‚è¿™å¯¹äºçº¿æ€§è¡¨æ¥è¯´æ˜¯å¾ˆè‡ªç„¶çš„ï¼Œå¯¹äºæ ‘è¿™æ ·å¤šå¯¹çš„ç»“æ„å‘¢?</p>
<p>æ ‘ä¸­æŸä¸ªç»“ç‚¹çš„å­©å­å¯ä»¥æœ‰å¤šä¸ªï¼Œè¿™å°±æ„å‘³ç€ï¼Œæ— è®ºæŒ‰ä½•ç§é¡ºåºå°†æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹å­˜å‚¨åˆ°æ•°ç»„ä¸­ï¼Œç»“ç‚¹çš„å­˜å‚¨ä½ç½®éƒ½æ— æ³•ç›´æ¥åæ˜ é€»è¾‘å…³ç³»ï¼Œä½ æƒ³æƒ³çœ‹ï¼Œæ•°æ®å…ƒç´ æŒ¨ä¸ªçš„å­˜å‚¨ï¼Œè°æ˜¯è°çš„åŒäº²ï¼Œè°æ˜¯è°çš„å­©å­å‘¢?ç®€å•çš„é¡ºåºå­˜å‚¨ç»“æ„æ˜¯ä¸èƒ½æ»¡è¶³æ ‘çš„å®ç°è¦æ±‚çš„ã€‚</p>
<p>ä¸è¿‡å……åˆ†åˆ©ç”¨é¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨ç»“æ„çš„ç‰¹ç‚¹ï¼Œå®Œå…¨å¯ä»¥å®ç°å¯¹æ ‘çš„å­˜å‚¨ç»“æ„çš„è¡¨ç¤ºã€‚æˆ‘ä»¬è¿™é‡Œè¦ä»‹ç»ä¸‰ç§ä¸åŒçš„è¡¨ç¤ºæ³•:åŒäº²è¡¨ç¤ºæ³•ã€å­©å­è¡¨ç¤ºæ³•ã€å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•ã€‚</p>
<h1 id="åŒäº²è¡¨ç¤ºæ³•">åŒäº²è¡¨ç¤ºæ³•</h1>
<p>åœ¨æ¯ä¸ªç»“ç‚¹ä¸­ï¼Œé™„è®¾ä¸€ä¸ªæŒ‡ç¤ºå™¨æŒ‡ç¤ºå…¶åŒäº²ç»“ç‚¹åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªç»“ç‚¹é™¤äº†çŸ¥é“è‡ªå·±æ˜¯è°ä»¥å¤–ï¼Œè¿˜çŸ¥é“å®ƒçš„åŒäº²åœ¨å“ªé‡Œã€‚</p>
<div class="line-block">data | parent |</div>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_TREE_SIZE 100</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> TElemType;      <span class="comment">/*æ ‘ç»“ç‚¹çš„æ•°æ®ç±»å‹ï¼Œç›®å‰æš‚å®šä¸ºint*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">PTNode</span>&#123;      <span class="comment">/*ç»“ç‚¹ç»“æ„*/</span></span><br><span class="line">     TElemType  data;       <span class="comment">/*ç»“ç‚¹æ•°æ®*/</span></span><br><span class="line">      <span class="type">int</span>  parent;          <span class="comment">/*åŒäº²ä½ç½®*/</span></span><br><span class="line">&#125;PTNode;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;             <span class="comment">/*æ ‘ç»“æ„*/</span></span><br><span class="line">    PTNode nodes[MAX_TREE_SIZE];    <span class="comment">/*ç»“ç‚¹æ•°ç»„*/</span></span><br><span class="line">    <span class="type">int</span> r,n;                <span class="comment">/*æ ¹çš„ä½ç½®å’Œç»“ç‚¹æ•°*/</span></span><br><span class="line">&#125;PTreeï¼›</span><br></pre></td></tr></table></figure>
<h1 id="å­©å­è¡¨ç¤ºæ³•">å­©å­è¡¨ç¤ºæ³•</h1>
<p>æ¯ä¸ªç»“ç‚¹æœ‰å¤šä¸ªæŒ‡é’ˆåŸŸï¼Œå…¶ä¸­æ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€é¢—å­æ ‘çš„æ ¹ç»“ç‚¹ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æ–¹æ³•å«åšå¤šé‡é“¾è¡¨è¡¨ç¤ºæ³•ã€‚</p>
<blockquote>
<p>ç»“ç‚¹åŒæ„</p>
</blockquote>
<ul>
<li>ç»“ç‚¹çš„æŒ‡é’ˆä¸ªæ•°ç›¸ç­‰ï¼Œä¸ºæ ‘çš„åº¦D</li>
<li>ç¼ºç‚¹ï¼šå®¹æ˜“é€ æˆç©ºé—´æµªè´¹</li>
</ul>
<div class="line-block">data | child1 | child2 | â€¦ | childD |</div>
<blockquote>
<p>ç»“ç‚¹ä¸åŒæ„</p>
</blockquote>
<ul>
<li>ç»“ç‚¹æŒ‡é’ˆä¸ªæ•°ä¸ç­‰ï¼Œä¸ºè¯¥ç»“ç‚¹çš„åº¦d</li>
<li>ç¼ºç‚¹ï¼šæ“ä½œä¸æ–¹ä¾¿</li>
</ul>
<div class="line-block">data | degree | child1 | child2 | â€¦ |
childd|</div>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_TREE_SIZE 100</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">CTNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> child;              <span class="comment">/*å­©å­ç»“ç‚¹çš„åºå·*/</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">CTNode</span> *next;    <span class="comment">/*å­©å­ç»“ç‚¹çš„æŒ‡é’ˆåŸŸ*/</span>ã€€ã€€</span><br><span class="line">&#125; *ChildPtr;                <span class="comment">/*å­©å­é“¾è¡¨çš„ç»“ç‚¹*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    ElemType data;          <span class="comment">/* ç»“ç‚¹çš„æ•°æ®å…ƒç´ */</span></span><br><span class="line">    ChildPtr firstchild;    <span class="comment">/* å­©å­é“¾è¡¨å¤´æŒ‡é’ˆ*/</span></span><br><span class="line">&#125; CTBox;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    CTBox nodes[MAX_TREE_SIZE];</span><br><span class="line">    <span class="type">int</span> n, r; ã€€            <span class="comment">/* ç»“ç‚¹æ•°å’Œæ ¹ç»“ç‚¹çš„ä½ç½®*/</span>ã€€ã€€</span><br><span class="line">&#125; CTree;                    <span class="comment">/*æ ‘ç»“æ„*/</span></span><br></pre></td></tr></table></figure>
<h1 id="å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•">å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•</h1>
<p>ä»»æ„ä¸€æ£µæ ‘ï¼Œå®ƒçš„ç»“ç‚¹çš„ç¬¬ä¸€ä¸ªå­©å­å¦‚æœå­˜åœ¨å°±æ˜¯å”¯ä¸€çš„ï¼Œå®ƒçš„å³å…„å¼Ÿå¦‚æœå­˜åœ¨ä¹Ÿæ˜¯å”¯ä¸€çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘è¯¥ç»“ç‚¹çš„ç¬¬ä¸€ä¸ªå­©å­å’Œæ­¤ç»“ç‚¹çš„å³å…„å¼Ÿã€‚</p>
<div class="line-block">data | firstchild | rightsib |</div>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">CSNode</span>&#123;</span><br><span class="line">    ElemType data;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">CSNode</span> * firstson,* nextsibling;	</span><br><span class="line">&#125;CSNode,*CSTree;</span><br></pre></td></tr></table></figure>
<h1
id="æ ‘å…³è”äºŒå‰æ ‘åŠå…¶ä»–å†…å®¹å¾…åˆ°äºŒå‰æ ‘å®Œæˆ">æ ‘å…³è”äºŒå‰æ ‘åŠå…¶ä»–å†…å®¹å¾…åˆ°äºŒå‰æ ‘å®Œæˆ</h1>
<p>æ¬¢è¿æ‰¹è¯„æŒ‡æ­£ï¼</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¬²åŠ ä¹‹ç½ªä½•æ‚£æ— è¾</title>
    <url>/article/e6a33677.html</url>
    <content><![CDATA[<p>å‡ºå¤„ï¼šã€Šå·¦ä¼ Â·åƒ–å…¬åå¹´ã€‹:â€œä¸æœ‰åºŸä¹Ÿï¼Œå›ä½•ä»¥å…´ï¼Ÿæ¬²åŠ ä¹‹ç½ªï¼Œå…¶æ— è¾ä¹ï¼Ÿâ€</p>
<p>åäººç”¨"æ¬²åŠ ä¹‹ç½ªï¼Œä½•æ‚£æ— è¾"è°“æ¬²åŠ å®³äºäººï¼Œå³ä½¿æ— è¿‡é”™ï¼Œä¹Ÿå¯ä»¥ç½—ç»‡ç½ªåä½œä¸ºç†ç”±ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ç¯‡æ–‡ç« ä¸æ˜¯è®²å¤è¯­å‡ºå¤„å’Œç”¨æ³•é—®é¢˜ï¼Œè€Œæ˜¯å€Ÿæ­¤æ¥è°ˆä¸€è°ˆï¼Œè¿‘ä¸¤å¹´ç¾å›½å¯¹ä¸­å›½ä¼ä¸šæ‰“å‹çš„äº‹æƒ…ã€‚</p>
<p>å› ä¸ºæˆ‘å¯¹è¿™ä»¶äº‹ä»¶å¹¶éå®æ—¶å¯†åˆ‡å…³æ³¨ï¼Œå¤§å¤šæ•°æƒ…å†µçš„äº†è§£ä¹Ÿåªæ˜¯çœ‹ä¸€äº›çŸ¥ååª’ä½“çš„è§†é¢‘å’Œæ–‡ç« ï¼Œæ‰€ä»¥æœ¬ç¯‡æ–‡ç« ä»…ä»£è¡¨ä¸ªäººçœ‹æ³•ï¼Œå¦‚æœ‰è¯´æ³•ä¸å½“ä¹‹å¤„ï¼Œè¿˜æœ›è§è°…ã€‚</p>
<span id="more"></span>
<h1 id="ç»è¿‡">ç»è¿‡</h1>
<p>ä»å‰ä¸¤å¹´èµ·ç¾å›½å…ˆæ˜¯å¯¹ä¸­å›½åŠ æ”¶å…³ç¨ï¼Œç„¶åæ˜¯å¯¹ä¸­å…´çš„åˆ¶è£ï¼Œå†ç„¶åæ˜¯å¯¹åä¸ºåœ¨å…¨çƒèŒƒå›´å†…çš„æ‰“å‹ï¼Œæœ€è¿‘ç¾å›½åˆå¯¹Tik
Tokï¼ˆæŠ–éŸ³å›½é™…ç‰ˆï¼‰ï¼Œå¾®ä¿¡å¼€å§‹ä¸‹åŠ¨ä½œã€‚æœ€è¿‘å‡ å¹´ä¸­å›½å„æ–¹é¢å‘å±•åŠ¿å¤´æ˜¯æŒºçŒ›çš„ï¼Œä¸­å›½ä¼ä¸šåœ¨æµ·å¤–å¼€å±•ä¸šåŠ¡ä¹Ÿæ¯”è¾ƒé¡ºåˆ©ï¼Œä½†æ˜¯è¿™å°±å’Œç¾å›½çš„åˆ©ç›Šå†²çªäº†ï¼Œç¾å›½è¦åšä¸–ç•Œçš„å”¯ä¸€éœ¸ä¸»ï¼Œä»–æ˜¯ä¸å…è®¸å…¶ä»–ä»»ä½•å›½å®¶åœ¨æŸäº›æ ¸å¿ƒé¢†åŸŸèµ¶è¶…ä»–çš„ï¼Œæ‰€ä»¥ç¾å›½å°±å¼€å§‹æ— èµ–è¡Œä¸ºï¼Œå…¶å®ç¾å›½å¯¹äºåä¸ºçš„åˆ¶è£æ—©å·²ä¸æ˜¯ä»€ä¹ˆæ–°é²œæ‹›æ•°äº†ï¼Œæ—©åœ¨æ³•å›½ï¼Œæ—¥æœ¬ç­‰å›½å®¶å…¶å®éƒ½æœ‰å—åˆ°ç¾å›½çš„â€œç…§é¡¾â€ã€‚è‡³äºåŸå› å˜›â€”â€”<strong>æ¬²åŠ ä¹‹ç½ªä½•æ‚£æ— è¾</strong>ã€‚</p>
<h1 id="å¤„å¢ƒ">å¤„å¢ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1Fi4y1g7tr">ç›˜ç‚¹ç¾å›½åˆ¶è£ä¸­å›½ç§‘æŠ€ä¼ä¸š</a></p>
<p>åä¸ºï¼Œå³ä¸­åæœ‰ä¸ºï¼Œå¤§å¤šæ•°äººçŸ¥é“çš„åä¸ºæ˜¯ä¸ªæ‰‹æœºå‚å•†ï¼Œç„¶è€Œæ‰‹æœºä¸šåŠ¡å¯¹äºåä¸ºåªæ˜¯ä¸ªå‰¯ä¸šï¼Œåä¸ºæ›´å‡†ç¡®çš„è¯´ä¿¡æ¯é€šä¿¡å…¬å¸ã€‚å¯¹äºåä¸ºçš„åˆ›å§‹äººä»»æ­£éï¼Œæˆ‘æ˜¯ç›¸å½“æ•¬ä½©çš„ï¼Œè®°å¾—åœ¨å­¦æ ¡ä¸Šçš„ã€Šå½¢åŠ¿ä¸æ”¿ç­–ã€‹çš„è¯¾ä¸Šï¼Œè€å¸ˆè®©æˆ‘ä»¬çœ‹äº†å½“æ—¶åä¸ºå—åˆ°åˆ¶è£åï¼Œå¤®è§†é‡‡è®¿ä»»æ­£éçš„è§†é¢‘ï¼Œé¢å¯¹ç¾å›½å¼ºåŠ›çš„æ‰“å‹ï¼Œä»»æ­£éçˆ·çˆ·æ…ˆç¥¥è€Œåšå®šçš„ä¸€å¿ƒåœ¨è°ˆæ•™è‚²é—®é¢˜ã€‚çœŸçš„å½“æ—¶çš„è§¦åŠ¨å¤ªå¤§äº†ï¼Œåœ¨åä¸ºå¦‚æ­¤ç´§è¿«çš„å…³å¤´ï¼Œä»»æ­£éç¥¥å’Œå†·é™ï¼Œä»¿ä½›å·²ç»æœ‰äº†å¾ˆå¤šå¯¹ç­–ä¸€æ ·ï¼Œæ•´ä¸ªè§†é¢‘éƒ½æ˜¯åœ¨è°ˆæ•™è‚²é—®é¢˜ï¼Œä¸€å¿ƒæƒ³ç€ä¸­å›½è¦åŸ¹å…»å‡ºæ›´å¤šä¼˜ç§€çš„äººæ‰ä¸ºç¥–å›½åšè´¡çŒ®ï¼Œå¤ªæ„ŸåŠ¨äº†ã€‚</p>
<h1 id="èŠ¯ç‰‡é—®é¢˜">èŠ¯ç‰‡é—®é¢˜</h1>
<p><a
href="https://www.bilibili.com/video/BV1v54y1e7Nu?t=908">ç¾å›½æ‰“å‹ä¸‹ï¼Œåä¸ºè¿˜æœ‰å“ªäº›æ˜æ˜¾çŸ­æ¿ï¼Ÿ</a></p>
<p><a
href="https://www.bilibili.com/video/BV1Av41167n1">åä¸ºç­‰ä¸­å›½åˆ¶é€ ï¼Œç¾å›½å¦‚ä½•é è½¯ä»¶ï¼Œå¡ä½è„–å­ï¼Ÿ</a></p>
<p>åä¸ºåœ¨5Gæ–¹é¢çš„ç¡®å®å…¨çƒé¢†å…ˆçš„ï¼Œè¿™æ˜¯åä¸ºä»˜å‡ºåº”æœ‰çš„å›æŠ¥ï¼Œåä¸ºç›®å…‰çœŸçš„æœ‰å¤Ÿé•¿è¿œï¼Œåœ¨ç¾å›½è¦æ±‚åä¸ºæ‰‹æœºä¸èƒ½ä½¿ç”¨Googleçš„Androidç³»ç»Ÿåï¼Œåä¸ºç´§æ¥ç€å°±å‘å¸ƒäº†è‡ªå®¶ç ”åˆ¶äº†æ•°å¹´çš„<strong>é¸¿è’™</strong>æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬è‡ªå®¶æµ·æ€èŠ¯ç‰‡åä¸ºéƒ½æ˜¯å¸Œæœ›è‡ªå·±ä¸­å›½èƒ½ä¸è¢«å¤–å›½â€œå¡è„–å­â€ï¼Œå¦‚æœæœ‰æœºä¼šçš„è¯å¯ä»¥çœ‹ä¸€çœ‹åä¸ºçš„å‘å¸ƒä¼šï¼Œå¾ˆç²¾å½©ï¼Œè¿˜æœ‰ä½™æ‰¿ä¸œçš„ä¸€äº›å…³äºåä¸ºçš„æ–‡ç« ï¼Œè®²è¿°äº†è¿‡å»åä¸ºå¯¹æœªæ¥æ†§æ†¬å½“ç„¶è¿˜æœ‰æœ€åæ‰“ç®—ã€‚åœ¨æˆ‘å¿ƒä¸­ï¼Œåä¸ºæ˜¯ä¸€å®¶å¾ˆä¼Ÿå¤§çš„å…¬å¸ï¼Œäº†è§£åä¸ºäº§å“å‘½åéƒ½åº”è¯¥çŸ¥é“å¾ˆå¤šåå­—éƒ½æ¥è‡ªäºè®°å½•äº†å„ç§å¥‡çå¼‚å…½çš„ã€Šå±±æµ·ç»ã€‹ï¼Œéå¸¸æœ‰è¶£ï¼Œæ›´å…·æœ‰äº†ç‹¬ä¸€æ— äºŒçš„ä¸­å›½è‰²å½©ã€‚</p>
<p>ç„¶è€Œï¼Œä¸­å›½ä¸ç¾å›½è¿˜æ˜¯æœ‰ç§‘æŠ€å®åŠ›å·®è·çš„ï¼Œè¿‘å‡ å¹´ä¸­å›½åœ¨èŠ¯ç‰‡è¿›å£èŠ±è´¹çš„èµ„é‡‘å·²ç»è¶…è¿‡çŸ³æ²¹è¿›å£æ‰€ç”¨ï¼Œå¯è§åœ¨èŠ¯ç‰‡é¢†åŸŸä¸­å›½ä¸ä¸–ç•Œç¾å›½è¿˜æ˜¯æœ‰ä¸å°‘çš„å·®è·çš„ã€‚ä¸€æ–¹é¢æ˜¯å› ä¸ºä¸­å›½åœ¨è¿™æ–¹é¢ç¼ºä¹ä¸“ä¸šäººæ‰ï¼Œå¦ä¸€æ–¹é¢æ˜¯è¿™ä¸ªé¢†åŸŸåƒæ˜¯ä¸€ä¸ªæ— åº•æ´ï¼Œä½ å‘å®ƒæŠ•å‡ºèµ„é‡‘ã€äººæ‰å’Œæ—¶é—´éƒ½ä¸ä¸€å®šæœ‰æ”¶è·ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šä¸­å›½ä¼ä¸šæœ›è€Œå´æ­¥çš„åœ°æ–¹ã€‚ä»–ä»¬éƒ½æ›´æ„¿æ„èŠ±è´¹æœ‰é™çš„èµ„é‡‘è´­ä¹°å®Œå¤‡çš„èŠ¯ç‰‡ï¼Œè€Œéæ— é™ä¸ç¼ºçš„èµ„é‡‘åœ¨ç ”ç©¶ä¸Šé¢ã€‚</p>
<p>åä¸ºæ—©æ—©å¼€å§‹ç ”å‘è‡ªå·±çš„èŠ¯ç‰‡â€”â€”æµ·æ€éº’éºŸï¼Œä½†ä¹Ÿåªæ˜¯åœ¨ç¾å›½æŠ€æœ¯è½¯ä»¶åŠ æŒä¸‹å®ŒæˆèŠ¯ç‰‡çš„è®¾è®¡å·¥ä½œï¼Œåœ¨èŠ¯ç‰‡é¢†åŸŸï¼Œè®¾è®¡å’Œåˆ¶é€ æ˜¯ä¸¤ä¸ªé—®é¢˜ï¼Œä»Šå¹´åœ¨ç¾å›½å¼ºåŠ›æ‰“å‹ä¸‹ï¼Œå°ç§¯ç”µå®£å¸ƒä¸å†ä¸ºåä¸ºåˆ¶é€ èŠ¯ç‰‡ï¼Œä¹Ÿå°±æ˜¯è¯´åä¸ºæµ·æ€èŠ¯ç‰‡å¯èƒ½è¦ç»è¿¹äº†ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ„¤æ…¨å´åˆéå¸¸æ— å¥ˆçš„æ¶ˆæ¯ï¼Œå¦‚æœçœ‹è¿‡åä¸ºçš„é¸¿è’™æ“ä½œç³»ç»Ÿå‘å¸ƒä¼šçš„äººéƒ½åº”è¯¥çŸ¥é“ï¼Œåä¸ºçš„ç›®æ ‡æ˜¯æµ©ç€šæ˜Ÿè¾°ï¼Œé¸¿è’™OSæ˜¯ä¸€æ¬¾â€œé¢å‘æœªæ¥â€çš„æ“ä½œç³»ç»Ÿï¼Œä¸€æ¬¾åŸºäºå¾®å†…æ ¸çš„é¢å‘å…¨åœºæ™¯çš„åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼Œç°å·²é€‚é…æ™ºæ…§å±ï¼Œæœªæ¥å®ƒå°†é€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ã€æ™ºèƒ½æ±½è½¦ã€å¯ç©¿æˆ´è®¾å¤‡ç­‰å¤šç»ˆç«¯è®¾å¤‡ã€‚ä»æ­¤å¯ä»¥çœ‹å‡ºåä¸ºæˆ˜ç•¥çœ¼å…‰æ˜¯éå¸¸é•¿è¿œçš„ï¼Œä½†ç›®å‰å´åªèƒ½å—é™äºç¾å›½çš„åˆ¶è£ã€‚</p>
<h1 id="å‡ºè·¯">å‡ºè·¯</h1>
<p>ä»å‰ä¸¤å¹´ç¾å›½åˆ¶è£æ‰“å‹å¼€å§‹åï¼Œå…³äºè¿™æ–¹é¢æ–‡ç« è§†é¢‘å®åœ¨å¤ªå¤šäº†ï¼Œæˆ‘ä¹Ÿçœ‹è¿‡ä¸€äº›ï¼Œæˆ‘æ¥ä¸‹æ¥è¯´çš„åº”è¯¥æ˜¯ç»“åˆæˆ‘çŸ¥é“çš„å’Œæˆ‘æƒ³è¯´çš„ä¸€äº›çœ‹æ³•ã€‚</p>
<p>çš„ç¡®ï¼Œç°åœ¨çš„å¢ƒå†µæ˜¯æœ‰äº›æ‚²è§‚çš„ï¼Œä½†è¿™ä¸€å®šæ˜¯ä¸­å›½å‘å±•è·¯ä¸Šçš„å¿…ç»ä¹‹è·¯ï¼Œè€Œæ°å·§å°±åœ¨è¿™å‡ å¹´ç¾å›½å¿ä¸ä½äº†ã€‚æœ¬äººè¯´è¯ä¸æ˜¯å¾ˆæœ‰æ¡ç†ï¼Œå°½é‡è¯´çš„æ¸…æ¥šæ˜ç™½ã€‚</p>
<p><strong>åŸºç¡€å­¦ç§‘è–„å¼±è€Œç‰µæ‰¯å‡ºçš„äººæ‰ç¼ºä¹é—®é¢˜</strong>ï¼Œå°±ç›®å‰æˆ‘äº†è§£çš„ç¤¾ä¼šå¤§ç¯å¢ƒï¼Œç»å¤§å¤šæ•°äººéƒ½ç¼ºå°‘é‚£ä»½æ¢ç´¢æœªçŸ¥çš„ç²¾ç¥ï¼Œæ²¡é‚£ç§å¯¹åŸºç¡€å­¦ç§‘çš„çƒ­çˆ±ï¼ˆæœ‰çš„ä¹Ÿæ˜¯éå¸¸å°‘æ•°ï¼‰ï¼Œæƒ³å½“åˆæˆ‘ä»¬å„¿æ—¶æ¢¦æƒ³éƒ½æ˜¯ç§‘å­¦å®¶ã€æ•°å­¦å®¶ç­‰å„ç§å®¶ï¼Œç„¶è€Œå½“æˆ‘ä»¬æ…¢æ…¢é•¿å¤§å°±å†ä¹Ÿä¸æ•¢æå„¿æ—¶çš„æ¢¦æƒ³äº†ï¼Œå¾ˆå¤šäººå˜å¾—æœ‰äº›éº»æœ¨ï¼Œä¸å†å…·æœ‰å¹´è½»æ—¶çš„çƒ­æƒ…ã€‚è€Œä¸”ç°åœ¨ç¤¾ä¼šè¯„åˆ¤æˆåŠŸçš„æ ‡å‡†å¥½åƒå˜æˆäº†æ˜¯ä¸æ˜¯å¾ˆæœ‰é’±äº†ï¼Œè¿™å°±è®©äººå¾ˆçƒ¦æ¼ï¼Œå¾ˆå¤šäººä¸ºäº†æ´»å¾—å…‰é²œäº®ä¸½ï¼Œæ”¾å¼ƒåŸæ¥è¿½æ±‚çš„ç›®æ ‡ï¼Œè½¬å‘æŒ£é’±å¤šçš„è¡Œä¸šï¼Œè‡ªå·±å˜å¾—ä¸å†æ˜¯ä¸ºè‡ªå·±è€Œæ´»äº†ï¼Œå¾ˆå¯æ‚²å•Šã€‚å°±ç›®å‰æˆ‘åœ¨å¤§å­¦çš„ä½“éªŒæ¥è¯´ï¼Œå¾ˆå¤šå¤§å­¦ç”Ÿæ˜¯æ¯”è¾ƒéº»æœ¨çš„ï¼Œä¸ºçš„å¥½åƒåªæ˜¯é‚£ä¸€çº¸æ–‡å‡­ï¼Œè¡Œå°¸èµ°è‚‰èˆ¬åœ¨å¤§å­¦æ··æ—¥å­ã€‚æ‰€ä»¥è¯´ï¼Œåœ¨åŸºç¡€å­¦ç§‘æˆ–æ˜¯è¯´å¯¹äºç§‘å­¦çš„çƒ­çˆ±çš„äººè¶Šæ¥è¶Šå°‘äº†ï¼Œè€Œè¿™å°†ç›´æ¥å¯¼è‡´äººæ‰ç¼ºå£ï¼Œè¿˜æ˜¯è¯´èŠ¯ç‰‡é—®é¢˜ï¼ŒèŠ¯ç‰‡æ¶‰åŠå¤šå­¦ç§‘ï¼ˆåŒ…æ‹¬ç‰©ç†å­¦ã€åŒ–å­¦ã€è½¯ä»¶ç§‘ç ”äººå‘˜ç­‰ç­‰ï¼‰ï¼Œè¿™å°±æ˜¯å¯¹ä¸­å›½é«˜ç«¯äººæ‰è€ƒéªŒï¼Œæ²¡æœ‰è¿™æ–¹é¢çš„åŸºç¡€ï¼Œå“ªæ¥çš„<strong>å›½äº§èŠ¯ç‰‡</strong>ã€‚è¿˜æ˜¯å¾ˆå¸Œæœ›å›½å®¶èƒ½åŸ¹å…»å‡ºæ›´å¤šä¸ºå›½æ•ˆåŠ›çš„äººæ‰å§ã€‚</p>
<p><strong>ç¼ºä¹åº”æœ‰æ¿€æƒ…</strong>ï¼Œè™½ç„¶ç°åœ¨ä¸æ˜¯ä¹±ä¸–ï¼Œä¸­å›½ç¤¾ä¼šç¯å¢ƒéå¸¸ç¨³å®šï¼Œä½†å¤è¯­è¯´å¾—å¥½â€”â€”ç”Ÿäºå¿§æ‚£æ­»äºå®‰ä¹ï¼Œè€Œç°åœ¨åœ¨æˆ‘çœ‹æ¥ä¸­å›½æœ‰ç‚¹åå‘æ³›å¨±ä¹åŒ–äº†ã€‚è¿˜æ˜¯é‚£å¥è¯â€œå°†å†›å­¤åŸæ— äººé—®ï¼Œæˆå­å®¶äº‹å¤©ä¸‹â€ï¼Œå¤šå°‘æ›¾ç»ä¸ºç¥–å›½å¥‰çŒ®çš„è‹±é›„äººæ°‘è¢«é—å¿˜ï¼Œè€Œé‚£äº›å¨±ä¹å…«å¦æ•´å¤©é“ºå¤©ç›–åœ°è¢­æ¥ã€‚å½“ä¸€ä¸ªäººå»è¿½æ±‚ç”Ÿæ´»çš„å¿…éœ€å“çš„æ—¶å€™ï¼Œå®ƒå¾€å¾€æ˜¯å‹¤å¥‹å’Œå‹‡æ•¢çš„ï¼›å½“ä¸€ä¸ªäººå»è¿½æ±‚ç”Ÿæ´»çš„æ¶ˆè´¹å“çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™ä»–å¾€å¾€å˜å¾—æ‡’æƒ°å’Œæ¸©å’Œï¼›å½“ä¸€ä¸ªäººå»è¿½æ±‚ç”Ÿæ´»çš„å¥¢ä¾ˆå“çš„æ—¶å€™ï¼Œè¿™ä¸ªäººå°±å˜å¾—è½¯å¼±äº†ï¼Œä¸€ä¸ªäººä¸€ä¸ªæ°‘æ—ä¸€ä¸ªå®¶åº­ä¸€ä¸ªå•ä½ä¸€ä¸ªå›½å®¶å¥¢ä¾ˆå“è¶Šå¤šï¼Œå°±è¶Šæ„¿æ„ç”¨å‰©ä½™è´¢å¯Œè€Œä¸æ˜¯ä»¥ä»–è‡ªå·±çš„ç”Ÿå‘½ä¸ºä»£ä»·å»å®ˆå«å…¶è´¢å¯Œã€‚å°½ç®¡ç°åœ¨ä¸æ˜¯ä¹±ä¸–ï¼Œä¸æ˜¯å»ºå›½åˆæœŸé‚£æ ·å›°éš¾çš„æ—¶æœŸï¼Œä½†æˆ‘ä»¬ä¹Ÿåº”éƒ½å…·æœ‰é‚£æ ·ä¸€ä»½æŠ¥å›½çƒ­æƒ…ï¼Œé‚£æ ·çš„å‹‡æ°”ä¸è´£ä»»æ„Ÿã€‚</p>
<h1 id="æœ€å">æœ€å</h1>
<p>æ„¿ä¸­å›½é’å¹´éƒ½æ‘†è„±å†·æ°”ï¼Œåªæ˜¯å‘ä¸Šèµ°ï¼Œä¸å¿…å¬è‡ªæš´è‡ªå¼ƒè€…æµçš„è¯ï¼Œèƒ½åšäº‹çš„åšäº‹ï¼Œèƒ½å‘å£°çš„å‘å£°ï¼Œæœ‰ä¸€åˆ†çƒ­ï¼Œå‘ä¸€åˆ†å…‰ï¼Œå°±ä»¤è¤ç«ä¸€èˆ¬ï¼Œä¹Ÿå¯ä»¥åœ¨é»‘æš—é‡Œå‘ä¸€ç‚¹å…‰ï¼Œä¸å¿…ç­‰å€™ç‚¬ç«ï¼Œæ­¤åå¦‚ç«Ÿæ²¡æœ‰ç‚¬ç«ï¼Œæˆ‘ä¾¿æ˜¯å”¯ä¸€çš„å…‰ã€‚â€”â€”é²è¿…ã€Šçƒ­é£ï¼Œéšæ„Ÿå½•å››åä¸€ã€‹</p>
]]></content>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ±Ÿå—é‡é›ª</title>
    <url>/article/2feea1bf.html</url>
    <content><![CDATA[<p>å¯¹æˆ‘æ¥è¯´è¿˜æ˜¯å¾ˆæƒŠå–œçš„ï¼Œæ¯•ç«Ÿåœ¨æˆ‘çš„å°è±¡é‡Œï¼Œå—æ–¹å¾ˆå°‘èƒ½è§åˆ°é›ªï¼Œå†µä¸”è¿™ä¹ˆå¤§çš„é›ªã€‚</p>
<span id="more"></span>
<p>é‚£å¤©ï¼Œä¸€æ—©å°±çœ‹åˆ°ï¼Œå¤©æ°”é¢„æŠ¥æœ‰é›ªï¼Œä¸è¿‡æˆ‘æ²¡å½“å›äº‹ï¼Œè¿™å¯æ˜¯å—æ–¹ï¼Œèƒ½ä¸‹å—ï¼Ÿ</p>
<p>å®Œå…¨å‡ºä¹æˆ‘çš„æ„æ–™ï¼Œåœ¨ä¸‹åˆï¼Œå¤–é¢å°±å¼€å§‹é£˜é›ªäº†ï¼Œå¾ˆæƒŠå–œï¼Œæ¯•ç«Ÿä½œä¸ºä¸€ä¸ªåŒ—æ–¹äººï¼Œèƒ½åœ¨å—æ–¹çœ‹åˆ°é›ªï¼Œå°±åƒæ˜¯é‡åˆ°åŒä¹¡å‹äººä¸€æ ·ï¼Œå¾ˆäº²åˆ‡ã€‚å°½ç®¡æˆ‘åœ¨å·¥ä½ä¸Šåç€ï¼Œå¿ƒå·²ç»æ˜¯æŒ‰è€ä¸ä½äº†ï¼Œéå¸¸æƒ³å†²å‡ºå»ï¼Œçœ‹é›ªç©é›ªã€‚å¯æ— å¥ˆä¸Šç­æ—¶é—´ğŸ¥¹</p>
<p>å¸¸è¯†ä¸­éƒ½æ˜¯å—æ–¹é›¨æ°´å¤šï¼Œä½†ä¹Ÿä»…ä»…æ˜¯å­—é¢æ„ä¹‰ä¸Šçš„é›¨æ°´å‘€ï¼ŒçœŸæœ‰é›ªå•Šï¼</p>
<p>ç»ç’ƒçª—å¤–ï¼Œçº·çº·é›ªèŠ±ï¼Œåœ¨å¤©ç©ºé“ºæ»¡ï¼Œå¤©ç©ºä¹Ÿéšä¹‹é»¯æ·¡ä¸‹æ¥ï¼›</p>
<p>é“¶è£…ç´ è£¹çš„å—æ–¹åŸå¸‚ï¼Œè¡—è¾¹çš„ç¯å«æ¤ç‰©ä¹Ÿæ˜¯æŠ«ä¸Šé¹…ç»’å¤§è¡£ï¼›</p>
<p>é©¬è·¯æ˜¯éšå³æ¶ˆèç•™ä¸‹çš„æ°´ï¼Œåªæœ‰ç•¸è§’ä¸æ–­ç´¯ç§¯ï¼›</p>
<p>ä¸åŒäºåŒ—æ–¹ä¸‡é‡Œå†°å°ï¼Œå—æ–¹è¿˜å­˜åœ¨è®¸å¤šæœªè½çš„ç»¿ï¼Œé›ªèŠ±å †ç§¯äºä¸Šï¼Œä½¿å…¶æ•´ä½“æ›´åŠ å……ç›ˆï¼Œè€Œåœ¨åŒ—æ–¹</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>æµæµªåœ°çƒ2</title>
    <url>/article/1d91adf8.html</url>
    <content><![CDATA[<p>å…¶å®æˆ‘å®Œå…¨å¯ä»¥å–ä¸ªæ›´æœ‰è¶£çš„æ ‡é¢˜ï¼Œâ€œæ²¡æœ‰äººçš„æ–‡æ˜æ¯«æ— æ„ä¹‰â€ï¼Œâ€œä½ æ˜¯å”¯ä¸€çš„å˜é‡â€ï¼Œâ€œæ•°å­—ç”Ÿå‘½â€ç­‰ç­‰ä¹‹ç±»ï¼Œå¯ä»¥ä»£è¡¨è¿™éƒ¨ã€Šæµæµªåœ°çƒ2ã€‹ï¼ˆä¸‹é¢æˆ‘ç§°ã€Šçƒ2ã€‹ï¼‰çš„ã€‚ä½†æ˜¯å›å¤´ä¸€æƒ³è¿™ä¹ˆè¿˜æ˜¯ä¸å¤ªå¥½ï¼Œä¸èƒ½ä»æ•´ä½“ä¸Šæ¥è®²ã€Šçƒ2ã€‹ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¿ç•™äº†â€œæµæµªåœ°çƒ2â€çš„æ ‡é¢˜ã€‚</p>
<span id="more"></span>
<p>è¿˜æ˜¯å¾ˆæ¿€åŠ¨</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=2015567179&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>æµè§ˆå™¨ä»£ç†æ’ä»¶Proxy SwitchyOmegaå®‰è£…ä¸ä½¿ç”¨</title>
    <url>/article/e51e0935.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<h1 id="proxy-switchyomega">Proxy SwitchyOmega</h1>
<p>è½»æ¾å¿«æ·åœ°ç®¡ç†å’Œåˆ‡æ¢å¤šä¸ªä»£ç†è®¾ç½®ã€‚</p>
<h1 id="å®‰è£…">å®‰è£…</h1>
<p>SwitchyOmegaè°·æ­Œå•†åº—ï¼šhttps://chromewebstore.google.com/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif</p>
<p>å¤‡ç”¨ä¸‹è½½åœ°å€ï¼šhttps://github.com/FelisCatus/SwitchyOmega/releases</p>
<p>å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://switchyomega.org/switchyomega-download/</p>
<p>ä»¥ä¸Šéƒ½ä¸è¡Œçš„è¯ï¼Œå¯ä»¥åœ¨Edgeæµè§ˆå™¨æ‰©å±•æ‰¾åˆ°å®ƒï¼šhttps://microsoftedge.microsoft.com/addons/detail/proxy-switchyomega/fdbloeknjpnloaggplaobopplkdhnikc</p>
<span id="more"></span>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705242666653.webp"
alt="å®˜ç½‘" />
<figcaption aria-hidden="true">å®˜ç½‘</figcaption>
</figure>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<p>æ­£å¦‚å®˜ç½‘æ‰€è®²ï¼ŒSwitchyOmegaåªæ˜¯ç®¡ç†ä»£ç†çš„ï¼Œæœ¬èº«å¹¶ä¸æä¾›ä»£ç†æœåŠ¡ï¼Œéœ€è¦é…åˆèŠ‚ç‚¹ä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯Shadowsocksé…åˆSwitchyOmegaçš„é…ç½®æ–¹æ³•ã€‚</p>
<p><a
href="https://github.com/Shadowsocks-Help/Shadowsocks/blob/master/Chrome.md">Shadowsocks/Chrome.md
at master Â· Shadowsocks-Help/Shadowsocks</a></p>
<p><a
href="https://github.com/Shadowsocks-Wiki/shadowsocks/blob/master/zh_CN/browser/proxy-switchyomega-setup-guide.md">shadowsocks/zh_CN/browser/proxy-switchyomega-setup-guide.md
at master Â· Shadowsocks-Wiki/shadowsocks</a></p>
<p>æ‰“å¼€é“¾æ¥ï¼Œæ‰¾åˆ°ä¸‹é¢è¿™ä¸ªéƒ¨åˆ†ï¼Œè¿›è¡ŒSwitchyOmegaé…ç½®ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705244322583.webp"
alt="é…ç½®" />
<figcaption aria-hidden="true">é…ç½®</figcaption>
</figure>
<p>é€šè¿‡ä¸‹é¢é“¾æ¥ä¸‹è½½ SwitchyOmega çš„é…ç½®æ–‡ä»¶ï¼š</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Windows/Linux/macOS(ShadowsocksX)</th>
<th>macOS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a
href="https://raw.githubusercontent.com/Shadowsocks-Help/Shadowsocks/master/Download/OmegaOptions-1080.bak">SwitchOmega
+ GFWList è‡ªåŠ¨åˆ‡æ¢é…ç½®æ–‡ä»¶(1080)</a></td>
<td><a
href="https://raw.githubusercontent.com/Shadowsocks-Help/Shadowsocks/master/Download/OmegaOptions-1086.bak">SwitchOmega
+ GFWList è‡ªåŠ¨åˆ‡æ¢é…ç½®æ–‡ä»¶(1086)</a></td>
</tr>
<tr class="even">
<td>é€‚ç”¨äº Shadowsocks-Windows / Linux / ShadowsocksX(macOS)
ç­‰é»˜è®¤ç«¯å£ä¸º 1080 çš„å®¢æˆ·ç«¯ã€‚</td>
<td>é€‚ç”¨äºShadowscoksX-NGï¼Œ é»˜è®¤æœ¬åœ°ç«¯å£ä¸º 1086</td>
</tr>
</tbody>
</table>
<p>1ã€ç‚¹å‡» â€œProxy SwitchyOmegaâ€ &gt; "é€‰é¡¹" &gt; "å¯¼å…¥/å¯¼å‡º" &gt;
"ä»å¤‡ä»½æ–‡ä»¶ä¸­æ¢å¤" ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705244322810.webp"
alt="å¯¼å…¥å¯¼å‡º" />
<figcaption aria-hidden="true">å¯¼å…¥å¯¼å‡º</figcaption>
</figure>
<p>2ã€å¯¼å…¥æˆåŠŸåï¼Œå°±ä¼šçœ‹åˆ°SwitchyOmegaå­˜åœ¨ç›´æ¥è¿æ¥ã€ç³»ç»Ÿä»£ç†ã€Shadowsocksã€è‡ªåŠ¨åˆ‡æ¢4ç§æ¨¡å¼ï¼Œåé¢ä¸¤ç§å°±æ˜¯å¯¼å…¥é…ç½®æ¢å¤çš„ï¼Œè¯´æ˜å¦‚ä¸‹ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705245270146.webp"
alt="ä»£ç†é…ç½®" />
<figcaption aria-hidden="true">ä»£ç†é…ç½®</figcaption>
</figure>
<p>æ¨èä½¿ç”¨è‡ªåŠ¨åˆ‡æ¢æ¨¡å¼</p>
<p>3ã€ä½¿ç”¨è¿‡ç¨‹ä¸­é…ç½®è§„åˆ™</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705245821348.webp"
alt="æŸ¥çœ‹æ’ä»¶" />
<figcaption aria-hidden="true">æŸ¥çœ‹æ’ä»¶</figcaption>
</figure>
<p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå½“å¼¹å‡ºè¿™æ ·é»„è‰²çš„è­¦å‘Šï¼Œå°±è¯´æ˜æœ‰äº›èµ„æºæœªèƒ½åŠ è½½ï¼Œå¯èƒ½éœ€è¦å¦å¤–é…ç½®ä»£ç†è§„åˆ™ã€‚</p>
<p>ç‚¹å¼€è­¦å‘Š</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705246019861.webp"
alt="ä¿®æ”¹è§„åˆ™" />
<figcaption aria-hidden="true">ä¿®æ”¹è§„åˆ™</figcaption>
</figure>
<p>ç¡®è®¤ä¹‹åï¼Œè§„åˆ™å°±æ·»åŠ åˆ°SwitchyOmegaé…ç½®ä¸­äº†ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240114/1705246020318.webp"
alt="è§„åˆ™é…ç½®" />
<figcaption aria-hidden="true">è§„åˆ™é…ç½®</figcaption>
</figure>
<h1 id="æˆ‘æ˜¯å¦éœ€è¦å®‰è£…æ‰©å±•-proxy-switchyomega">æˆ‘æ˜¯å¦éœ€è¦å®‰è£…æ‰©å±• Proxy
SwitchyOmega</h1>
<h2 id="æ˜¯å¦ä¸€å®šè¦å®‰è£…æ‰©å±•">æ˜¯å¦ä¸€å®šè¦å®‰è£…æ‰©å±•</h2>
<p>å¦ï¼Œä¸å®‰è£…æ‰©å±•æ—¶ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ç³»ç»Ÿä»£ç†ï¼Œå› æ­¤å¼€å¯å®¢æˆ·ç«¯çš„ç³»ç»Ÿä»£ç†å³å¯ã€‚</p>
<p>å¦‚æœç³»ç»Ÿä»£ç†æ— æ³•ç”Ÿæ•ˆæˆ–æ˜¯å®¢æˆ·ç«¯æ— æ³•ä¿®æ”¹ç³»ç»Ÿä»£ç†ï¼Œåˆ™éœ€è¦å®‰è£…æ‰©å±•ä½¿ç”¨ã€‚</p>
<h2 id="æ‰©å±•å®‰è£…ä¸å¦çš„åŒºåˆ«">æ‰©å±•å®‰è£…ä¸å¦çš„åŒºåˆ«</h2>
<ul>
<li>å®‰è£…æ—¶ï¼š è®¿é—®è¯·æ±‚ &gt; æµè§ˆå™¨ &gt; æµè§ˆå™¨æ‰©å±• &gt; ä»£ç†å®¢æˆ·ç«¯ &gt;
ä»£ç†æœåŠ¡å™¨ &gt; ç›®æ ‡ç½‘ç«™</li>
<li>ä¸å®‰è£…æ—¶ï¼š è®¿é—®è¯·æ±‚ &gt; æµè§ˆå™¨ &gt; ç³»ç»Ÿä»£ç† &gt; ä»£ç†å®¢æˆ·ç«¯ &gt;
ä»£ç†æœåŠ¡å™¨ &gt; ç›®æ ‡ç½‘ç«™</li>
</ul>
<p>è‹¥ä¸å®‰è£…æ‰©å±•ï¼Œæµè§ˆå™¨çš„ä»£ç†å°†å–å†³äºç³»ç»Ÿçš„é»˜è®¤ä»£ç†ï¼Œå¦‚æœç³»ç»Ÿä»£ç†æ— æ³•ä¿®æ”¹æˆ–æ˜¯ç”Ÿæ•ˆåˆ™æ— æ³•ä½¿ç”¨ã€‚</p>
<p>è€Œä¸”å®‰è£…æ‰©å±•å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°æ·»åŠ è‡ªå®šä¹‰è®¿é—®è§„åˆ™ï¼Œå› æ­¤æ¨èå®‰è£…æ‰©å±•è¿›è¡Œä½¿ç”¨ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>ç„¦è™‘</title>
    <url>/article/169fc98b.html</url>
    <content><![CDATA[<p>ç„¦è™‘</p>
<span id="more"></span>
<p>è½¬çœ¼é—´ä¸‰å¹´è¦è¿‡å»äº†ï¼Œé©¬ä¸Šä¹Ÿè¦å¤§å››äº†ï¼Œæ‰€æœ‰äººéƒ½è¯¥æœ‰ç‚¹æ‰“ç®—äº†ï¼Œæœ‰çš„è¦è€ƒç ”ï¼Œæœ‰çš„è¦å·¥ä½œï¼Œæœ‰çš„è¦è€ƒå…¬åŠ¡å‘˜ã€‚ã€‚ã€‚</p>
<p>å¯¹äºæˆ‘ï¼Œå®åœ¨ä¸æƒ³ä¸Šä¸‹å»äº†ï¼Œåªæƒ³æ‰¾ä¸ªå¥½äº›çš„å·¥ä½œï¼Œè¿‡å¥½è‡ªå·±çš„äººç”Ÿï¼Œä¸çŸ¥é“ä¸ºå•¥æˆ‘å°±æ„Ÿè§‰çš„æˆ‘çš„ä¸€äº›æƒ³æ³•æ˜¯ä¸ä¼—ä¸åŒçš„ï¼Œæˆ‘ä¸æƒ³è¦ç»“å©šç”Ÿå­-å“ºè‚²åä»£è¿™æ ·å‡ ä¹æ‰€æœ‰äººéƒ½è®¤å¯çš„äººç”Ÿï¼Œæˆ‘è§‰å¾—äººç”Ÿè¿™ä¹ˆçŸ­æš‚ä¸ºä»€ä¹ˆè¦è®©åˆ«äººä¸ºä½ å†³å®šï¼Œä¸ºåˆ«äººè€Œæ´»å‘¢ï¼Œæ´»ç€ä¸æ˜¯ä¸ºäº†å¿«æ´»è‡ªåœ¨å—ï¼Ÿ</p>
<p>ä½†æ˜¯æ‘†åœ¨é¢å‰çš„é—®é¢˜æ˜¯å¤§ä¸‰äº†ï¼Œè¯¥æƒ³ä¸€æƒ³å®ä¹ ï¼Œæ˜¥æ‹›ç§‹æ‹›ï¼Œé¢è¯•ç­‰ç­‰é—®é¢˜äº†ï¼Œä¹‹å‰æ˜¯æ²¡åˆ°è¿™ä¹ˆä¸€æ­¥ï¼Œç°åœ¨åˆ°è¿™ä¸€æ­¥äº†ï¼Œç„¦è™‘æ„Ÿå°±æ¥äº†ï¼Œæˆ‘å¿ƒé‡Œçš„æƒ³æ³•æ˜¯å¹´è½»æ˜¯è¯¥æ‹¼çš„ï¼Œä¸è¦åˆ°è€äº†æ‹¼ä¸åŠ¨äº†æ‰åæ‚”ï¼Œä¹Ÿå°±å› æ­¤ï¼Œæƒ³ç€æ€ä¹ˆè¿›å…¥äº’è”ç½‘å¤§å‚æ‰ä¼šäº§ç”Ÿç„¦è™‘æ„Ÿï¼Œä¸ç„¶è‹¥æ˜¯åªæƒ³æ··æ—¥å­ï¼Œæ‰ä¸ä¼šæƒ³é‚£ä¹ˆå¤šã€‚</p>
<p>è¯´å®è¯ï¼Œå¤§å­¦ç”Ÿæ´»ä¸æˆ‘æœŸå¾…çš„ä¸ä¸€æ ·ï¼Œä¹Ÿå¯èƒ½å› æ­¤æ²¡æœ‰ç»§ç»­ä¸Šä¸‹å»çš„æƒ³æ³•äº†ã€‚</p>
<p>å¯’å‡åˆšåˆšè¿‡å»ï¼Œè¿‡çš„ä¸€èˆ¬å§ï¼Œä¸»è¦å®Œå…¨æ²¡æœ‰å°æ—¶å€™çš„å¹´å‘³äº†ï¼ŒçœŸæŒºæ²¡æ„æ€çš„ï¼Œå†œæ‘é‡Œæ´»åŠ›è¿˜æ˜¯ä¸è¶³ï¼Œä¸€äº›éƒ¨åˆ†è¿˜æ˜¯å¾ˆè½åã€‚å¯’å‡å¹²çš„äº‹è¿˜ä¸å°‘ï¼Œé™¤äº†å¸®å¸®å®¶é‡Œå¹²æ´»ï¼Œè¿˜åœ¨
Bç«™ çœ‹è§†é¢‘å­¦ä¹ äº†ï¼Œå‘äº†ä¸å°‘åšå®¢ã€‚</p>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œä»Šå¹´æœ€ä¸ºé‡è¦ï¼ŒçœŸçš„ä»Šå¹´å°±å†³å®šäº†æœªæ¥å‡ å¹´ä½ çš„å­¦ä¹ å·¥ä½œçš„æ–¹å‘åœ°ç‚¹äº†ã€‚</p>
<p>æ–°ç›®æ ‡</p>
<ul>
<li>é©¾ç…§ï¼ˆèµ¶ç´§ç§‘ä¸‰-ç§‘å››-æ‹¿è¯ï¼Œä¸èƒ½æ‹–äº†ï¼‰</li>
<li>å‡†å¤‡é¢è¯•ï¼ˆæ‰¾å…¬å¸-æŠ•ç®€å†ï¼Œï¼‰</li>
<li>èº«ä½“æå¥½ï¼ˆï¼‰</li>
<li>ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¶ˆå¤±çš„å†œæ‘å­¦æ ¡</title>
    <url>/article/cdf251be.html</url>
    <content><![CDATA[<h1 id="å­¦æ ¡å»å“ªäº†">å­¦æ ¡å»å“ªäº†ï¼Ÿ</h1>
<p>å¦‚é¢˜ï¼Œä¸çŸ¥é“ä½ ä»¬æœ‰æ²¡æœ‰æ„Ÿå—åˆ°å†œæ‘å­¦æ ¡è¶Šæ¥è¶Šå°‘äº†ã€‚ä»æˆ‘çš„ç»å†å‡ºå‘ï¼Œåœ¨å°å­¦2å¹´çº§å¤§æ¦‚ï¼Œæˆ‘ä»¬ç­çªç„¶æ¥äº†å°†è¿‘åä¸ªæ–°åŒå­¦ï¼Œä»–ä»¬éƒ½æ˜¯ä»æˆ‘ä»¬éš”å£æ‘è¿‡æ¥çš„ï¼Œå¬è¯´å¥½åƒæ˜¯ä»–ä»¬æ‘çš„å°å­¦ä¸åŠäº†ï¼Œåªèƒ½è½¬åˆ°æˆ‘ä»¬è¿™é‡Œæ¥ä¸Šå°å­¦äº†ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°èº«è¾¹çš„å†œæ‘å°å­¦åœ¨å‡å°‘ã€‚ä¹‹å4ã€5å¹´çº§çš„æ—¶å€™ï¼Œåˆè½¬æ¥äº†ä¸€æ‰¹æ–°åŒå­¦ï¼Œä»–ä»¬åˆ™æ˜¯æ¥è‡ªæ›´è¿œçš„éš”ç€å‡ é‡Œåœ°æ‘å­ï¼ŒåŸå› ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p>
<span id="more"></span>
<p>å°å­¦æœŸé—´è¿˜ä¸æ–­æœ‰è€åŒå­¦è½¬åˆ°åŸé‡Œä¸Šå°å­¦äº†ï¼Œæ›´åŠ è®©æˆ‘åšä¿¡å†œæ‘çš„å°å­¦ä¸å¥½åŠäº†ï¼Œä¼šè¶Šæ¥è¶Šå°‘ã€‚æˆ‘ä»¬æ‘çš„å°å­¦å’Œå¹¼å„¿å›­å°±éš”ç€ä¸€å µå¢™ï¼Œä¸€æ‰‡ä¸å¤§çš„ä¼¸ç¼©æ‹‰é—¨å¯ä»¥æ¥å¾€ï¼Œ</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/62efa8da16f2c2beb139ac9b.jpg"
alt="ä¼¸ç¼©é—¨" />
<figcaption aria-hidden="true">ä¼¸ç¼©é—¨</figcaption>
</figure>
<p>è‡³ä»Šæˆ‘è¿˜æœ‰ç€å½“å¹´æ‹ç€æ¿å‡³ç©¿è¿‡é‚£æ‰‡é—¨å°±è¿›å…¥æœªæ¥å°å­¦çš„æ¨¡ç³Šè®°å¿†ï¼Œå¥½åƒè¿˜æœ‰ä»€ä¹ˆè¡¨æ¼”æ¥ç€ï¼Œå¿˜äº†ã€‚å°å­¦çš„æ“åœºå›´ç»•ç€å¹¼å„¿å›­çš„å¦ä¸€ä¾§ï¼Œä¹Ÿæ˜¯å¹¼å„¿å›­å¤§é—¨çš„é‚£ä¸€é¢ï¼Œæ“åœºæœ‰ä¸¤æ‰‡é—¨ï¼Œä¸€æ‰‡é€šå¾€æˆ‘ä»¬å°å­¦ï¼Œä¸€æ‰‡é€šå¾€å¤–é¢çš„é©¬è·¯ï¼Œæ“åœºé™¤äº†å¹³å¸¸æ‰¿æ¥æˆ‘ä»¬ä½“è‚²è¯¾ä»»åŠ¡ä¹‹å¤–ï¼Œå…¶ä½™æ—¶é—´å¯¹å¤–å¼€æ”¾ï¼Œç®—æ˜¯å…¬å…±çš„å¨±ä¹å¥èº«åœºæ‰€ã€‚æˆ‘ä»¬å°å­¦åŸºç¡€è®¾æ–½è¿˜ç®—å®Œå–„ï¼Œèƒ½å…¼é¡¾åˆ°â€œå‡ ä¹â€ğŸ¤§æ‰€æœ‰çš„æ•™å­¦åœºæ™¯ã€‚è¿™äº›å¹´è¿˜ä¸€ç›´åœ¨ç¿»æ–°ï¼ŒçœŸçš„è¶Šæ¥è¶Šå¥½å‘¢ï¼Œæˆ‘éƒ½æƒ³è¿›å»å›æœ›ä¸€ä¸‹ç«¥å¹´ï¼Œå¯ä»¥ä¸€ç›´æ²¡æœ‰æœºä¼šè¿›åˆ°æ ¡å›­å†…ã€‚æœ€è¿‘çš„å‡ ä¸ªæ‘å­æœ‰æˆ‘ä»¬è¿™æ ·çš„å°å­¦ç¡®å®ä¸å¤šäº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¿™é‡Œä¸€ç›´åŠä¸‹å»çš„åŸå› å§ã€‚è¿˜è®°å¾—å°æ—¶å€™æ¯åˆ°å¤å­£ï¼ˆåŒ…æ‹¬æš‘å‡å¼€å­¦ï¼‰ï¼Œè€å¸ˆç»å¸¸æ€§çš„è®©æˆ‘ä»¬å¸¦ä¸Šå®¶é‡Œçš„å®¶ä¼™äº‹å„¿ï¼ˆå°±æ˜¯å†œå…·ï¼Œä¸»è¦æ˜¯é“²å­ã€é“é”¹ã€æ‰«å¸šç­‰ï¼‰æ¥å­¦æ ¡åŠ³åŠ¨çš„äº‹ã€‚åŠ³åŠ¨ä¸»è¦å†…å®¹å°±æ˜¯å¤„ç†æ“åœºç–¯ç‹‚çš„æ‚è‰ï¼ˆé‚£æ—¶æ“åœºè¿˜æ˜¯åœŸåœ°ï¼Œç –ç“¦çŸ³å¤´éƒ½æœ‰çš„ï¼Œç¡®å®ä½œä¸ºä½“è‚²åœºæ‰€è¿˜æ˜¯æœ‰ä¸€äº›å±é™©æ€§çš„ï¼‰ï¼Œé‚£æ—¶å€™æˆ‘ä»¬çš„æ“åœºå¾ˆç ´æ—§ï¼Œ200ç±³è·‘é“å¤§å°çš„æ“åœºæ˜¯ä¸»ä½“ï¼Œä¸­é—´æœ‰ä¸€ä¸ªç ´æ—§ç¯®çƒåœºï¼Œç¯®ç­æ˜¯ç”Ÿé”ˆçš„ï¼Œåœ°é¢æ˜¯ä¸å¹³çš„ï¼Œå°±æ˜¯çº¯çº¯çš„æ··å‡åœŸåœºåœ°ï¼Œé™¤äº†ç¯®çƒåœºå°±æ˜¯ä¸€ç‰‡ç©ºåœ°äº†ï¼Œè·‘é“å¤–å›´æ˜¯ä¸€äº›å¸¸è§çš„å™¨æï¼Œå°±åªæœ‰å•åŒæ ï¼Œå¯èƒ½å¤–å›´è§’è½è¿˜æœ‰ä¸€ä¸ªæ²™å‘ã€‚æ€»ä¹‹å°±æ˜¯å¾ˆç ´ï¼Œæ¯æ¬¡é™¤è‰è¿˜éœ€è¦å·åŠ¨å…¨æ ¡çš„åŠ›é‡ï¼ˆä¸€äº›å°å¹´çº§çš„å°±ä¸ç”¨äº†ï¼‰ï¼Œç°åœ¨å›æƒ³èµ·æ¥è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ã€‚ğŸ˜ğŸ˜ğŸ˜</p>
<p>é™¤äº†å°å­¦ï¼Œæˆ‘çš„åˆä¸­ä¹Ÿæ˜¯åœ¨æ‘å­é‡Œä¸Šçš„ï¼Œå°±åœ¨æˆ‘ä»¬éš”å£æ‘é‡Œã€‚ç®—èµ·æ¥ï¼Œå¹¼å„¿å›­ã€å°å­¦å’Œåˆä¸­éƒ½åœ¨æˆ‘å®¶æ­¥è¡Œ10åˆ†é’Ÿè·¯ç¨‹å†…ï¼Œè¿˜æ˜¯å¾ˆå¹¸ç¦çš„ã€‚å¯¹äº†ï¼Œæˆ‘è®°å¾—æˆ‘ä»å¹¼å„¿å›­ä¸­ç­å°±å¼€å§‹è‡ªå·±ä¸€ä¸ªäººä¸Šå­¦äº†ğŸ˜</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/62efac9016f2c2beb14f21e9.png"
alt="å­¦æ ¡" />
<figcaption aria-hidden="true">å­¦æ ¡</figcaption>
</figure>
<h1 id="äººéƒ½å»å“ªäº†">äººéƒ½å»å“ªäº†ï¼Ÿ</h1>
<p>åˆä¸­ä¹‹å‰éƒ½æ˜¯æ¯å¤©ä¸Šä¸‹å­¦ï¼Œåœ¨å®¶é‡Œåƒä½ï¼Œåˆä¸­æ‰æœ‰å°é—­å­¦æ ¡/ç®¡ç†æ¦‚å¿µçš„ã€‚è¿™ä¸ªåˆä¸­åº”è¯¥æ˜¯æˆ‘ä»¬ä¹¡å”¯ä¸€çš„åˆä¸­äº†ï¼Œå‘¨å›´å¥½åƒä¹Ÿæ˜¯è¿™æ ·ï¼Œæ¯ä¸ªä¹¡åªæœ‰ä¸€æ‰€ï¼Œè€Œä¸”è§„æ¨¡éƒ½ç‰¹åˆ«å°ï¼Œéƒ½åœ¨æŠ¢ç”Ÿæºï¼Œä½†ç»å¤§å¤šæ•°éƒ½åˆ°å¿åŸå»äº†ã€‚ä»æˆ‘åœ¨æˆ‘ä»¬åˆä¸­çš„ä¸‰å¹´çœ‹ï¼Œä¹‹åçš„å­¦ç”Ÿè¶Šæ¥è¶Šå°‘ï¼Œç”šè‡³æˆ‘éƒ½å¬åˆ°å­¦æ ¡å› ä¸ºç”Ÿæºä¸å¤Ÿä¸€ä¸ªç­ä¹Ÿè¦å€’ä¸‹äº†ğŸ˜­ğŸ˜­ğŸ˜­</p>
<h1 id="ç•™ä¸ä¸‹">ç•™ä¸ä¸‹ã€‚</h1>
<p>æˆ‘ç›¸ä¿¡è¿™åº”è¯¥ä¸æ˜¯æˆ‘ç‰¹æœ‰ç»å†ï¼Œå¯¹äºç”Ÿé•¿åœ¨å†œæ‘çš„ä½ ä»¬åº”è¯¥ä¹Ÿèƒ½æ„Ÿå—åˆ°ã€‚å†œæ‘ç•™ä¸ä¸‹ï¼Œå¹´è½»äººç•™ä¸ä¸‹ï¼Œå­¦æ ¡ç•™ä¸ä¸‹ï¼Œéƒ½ç•™ä¸ä¸‹ã€‚ã€‚ã€‚</p>
<figure>
<img data-src="https://pic.imgdb.cn/item/62efada416f2c2beb1563312.png"
alt="ç”°é‡-åŸå¸‚" />
<figcaption aria-hidden="true">ç”°é‡-åŸå¸‚</figcaption>
</figure>
<h1 id="å†œæ‘è¶Šæ¥è¶Šå†·æ¸…">å†œæ‘è¶Šæ¥è¶Šå†·æ¸…</h1>
<p>è¿™å°±æ˜¯äº‹å®ã€‚</p>
<p>å°½ç®¡ï¼Œæœ€è¿‘æ˜¯æœ‰ä¸€äº›å¹´è½»äººå›åˆ°å†œæ‘ç»§ç»­å‘å…‰å‘çƒ­ï¼Œåœ¨ä¸€äº›è§†é¢‘å¹³å°ä¸Šè®°å½•ç”Ÿæ´»ï¼Œæ´»å¾—å¾ˆèˆ’æœï¼Œä¹Ÿæœ‰ä¸é”™çš„å‘å±•ã€‚ä½†ï¼Œä»ä¸å¯å¦å®šã€‚</p>
<p>è¯•é—®ï¼Œè°ä¸æ„¿æ„ä¸ºå…»è‚²è‡ªå·±çš„åœŸåœ°åŠªåŠ›å¥‹æ–—å‘¢ï¼ï¼Ÿ</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=1494401224&amp;auto=1&amp;height=66&amp;autoplay=false">
</iframe>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>ç‹¬ç«‹ä»»åŠ¡æœ€ä¼˜è°ƒåº¦é—®é¢˜</title>
    <url>/article/da9a0c42.html</url>
    <content><![CDATA[<p>è¿™æ˜¯ä¸€é“åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæåˆ°å®ƒçš„åŸå› æ˜¯ï¼Œæˆ‘ä¸ªäººè§‰å¾—è§£æ³•æŒºæœ‰è¶£çš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºè§è¯†å°‘ï¼Œæ²¡é‡åˆ°è¿‡è¿™æ ·è§£å†³é—®é¢˜çš„ã€‚</p>
<span id="more"></span>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>ã€é—®é¢˜æè¿°ã€‘ç”¨ä¸¤å°å¤„ç†æœºAå’ŒBå¤„ç†nä¸ªä½œä¸šã€‚è®¾ç¬¬iä¸ªä½œä¸šäº¤ç»™æœºå™¨Aå¤„ç†æ—¶éœ€è¦æ—¶é—´ai,
è‹¥ç”±æœºå™¨Bå¤„ç†ï¼Œåˆ™éœ€è¦æ—¶é—´bi
ã€‚ç”±äºå„ä½œä¸šçš„ç‰¹ç‚¹å’Œæœºå™¨çš„æ€§èƒ½å…³ç³»ï¼Œå¯èƒ½å¯¹äºæŸäº›iï¼Œæœ‰ai&gt;=biï¼Œè€Œå¯¹äºæŸäº›j(j!=iï¼Œjä¸ç­‰äºi)ï¼Œæœ‰aj&lt;bjã€‚å³ä¸èƒ½å°†ä¸€ä¸ªä½œä¸šåˆ†å¼€ç”±ä¸¤å°æœºå™¨å¤„ç†ï¼Œä¹Ÿæ²¡æœ‰ä¸€å°æœºå™¨èƒ½åŒæ—¶å¤„ç†2ä¸ªä½œä¸šã€‚è®¾è®¡ä¸€ä¸ªåŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œä½¿å¾—è¿™ä¸¤å°æœºå™¨å¤„ç†å®Œæˆè¿™nä¸ªä½œä¸šçš„æ—¶é—´æœ€çŸ­ï¼ˆä»ä»»ä½•ä¸€å°æœºå™¨å¼€å·¥åˆ°æœ€åä¸€å°æœºå™¨åœå·¥çš„æ€»æ—¶é—´ï¼‰ã€‚</p>
<p>ç ”ç©¶ä¸€ä¸ªå®ä¾‹ï¼š(a1, a2, a3, a4, a5, a6)=(2, 5, 7, 10, 5, 2), (b1, b2,
b3, b4, b5, b6, )=(3, 8, 4, 11, 3, 4)
ã€ç®—æ³•è®¾è®¡ã€‘å¯¹äºç»™å®šçš„ä¸¤å°å¤„ç†æœºAå’ŒBå¤„ç†nä¸ªä½œä¸šï¼Œæ‰¾å‡ºä¸€ä¸ªæœ€ä¼˜è°ƒåº¦æ–¹æ¡ˆï¼Œä½¿2å°æœºå™¨å¤„ç†å®Œæˆè¿™nä¸ªä½œä¸šçš„æ—¶é—´æœ€çŸ­ã€‚ï¼ˆæ¯ä¸ªæ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ï¼‰</p>
<p>ã€è¾“å…¥å½¢å¼ã€‘ç¬¬ä¸€è¡Œæ˜¯1ä¸ªæ­£æ•´æ•°nï¼Œè¡¨ç¤ºè¦å¤„ç†nä¸ªä½œä¸šã€‚åœ¨æ¥ä¸‹æ¥çš„2è¡Œä¸­ï¼Œæ¯è¡Œæœ‰nä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå¤„ç†æœºAå’ŒBå¤„ç†ç¬¬iä¸ªä½œä¸šéœ€è¦çš„å¤„ç†æ—¶é—´ã€‚</p>
<p>ã€è¾“å‡ºå½¢å¼ã€‘å°†æœ€çŸ­å¤„ç†æ—¶é—´è¾“å‡ºã€‚</p>
<p>ã€æ ·ä¾‹è¾“å…¥ã€‘</p>
<blockquote>
<p>6<br />
2 5 7 10 5 2<br />
3 8 4 11 3 4</p>
</blockquote>
<p>ã€æ ·ä¾‹è¾“å‡ºã€‘</p>
<blockquote>
<p>15</p>
</blockquote>
<h1 id="é¢˜è§£">é¢˜è§£</h1>
<p>åˆ©ç”¨dpå­˜å‚¨æ¯ä¸ªçŠ¶æ€çš„ç»“æœï¼Œæœ€åé€‰å‡ºæœ€ä¼˜çš„ä¸€ä¸ªè§£ã€‚è½¬æ¢æ–¹ç¨‹ï¼šdp[i][j]=min(dp[i-1][j]+b[i],dp[i-1][j-a[i]]);dp[i][j]ä»£è¡¨åšå®Œå‰iä¸ªä»»åŠ¡ï¼ŒAæœºå™¨èŠ±å‡ åˆ†é’Ÿæƒ…å†µä¸‹ï¼ŒBæœºå™¨æ‰€èŠ±çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´dp[i][j]å°±æ˜¯è¡¨ç¤ºBæœºå™¨æ‰€èŠ±æ—¶é—´ã€‚</p>
<p>dp[i][j] =
dp[i-1][j]+b[i]ä»£è¡¨ç¬¬iä¸ªä»»åŠ¡äº¤ç»™Bæ¥åšï¼Œæ‰€ä»¥åšå®Œå‰iä¸ªä»»åŠ¡çš„æ—¶å€™,Aæœºå™¨å’Œå‰i
- 1çš„ä»»åŠ¡ä¸€æ ·ï¼Œè¿˜æ˜¯èŠ±äº†jåˆ†é’Ÿï¼Œè€ŒBæœºå™¨åˆ™èŠ±dp[i-1][j]+b[i]åˆ†é’Ÿï¼›</p>
<p>dp[i][j] =
dp[i-1][j-a[i]]ä»£è¡¨ç¬¬iä¸ªä»»åŠ¡äº¤ç»™Aæ¥åšï¼Œç°åœ¨çš„Aæœºå™¨èŠ±è´¹æ—¶é—´æ˜¯jï¼Œæ‰€ä»¥åœ¨å‰i
-
1ä¸ªä»»åŠ¡å®Œæˆçš„æ—¶å€™ï¼ŒAæœºå™¨æ˜¯èŠ±äº†j-a[i]åˆ†é’Ÿçš„ï¼Œæ‰€ä»¥ç°åœ¨Bæœºå™¨è¿˜æ˜¯èŠ±äº†dp[i-1][j-a[i]]åˆ†é’Ÿï¼›</p>
<p>ä¸€ç›´åˆ°dp[n][i]:ä»£è¡¨æ‰€æœ‰çš„ä»»åŠ¡éƒ½åšå®Œäº†ï¼ŒBæœºå™¨æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œé‚£ä¹ˆæœ€è¿Ÿçš„æ—¶é—´å°±æ˜¯Bçš„æ—¶é—´å’ŒAçš„æ—¶é—´æ±‚æœ€å¤§å€¼ï¼›</p>
<p>for(int i=0; i&lt;=sum;
i++)ans=min(ans,max(dp[n][i],i));//max(dp[n][i],i)
è¡¨ç¤ºå®Œæˆå‰nä¸ªä½œä¸šAæœºå™¨èŠ±iåˆ†é’Ÿ
Bæœºå™¨èŠ±dp[n][i]åˆ†é’Ÿæƒ…å†µä¸‹ï¼Œæœ€è¿Ÿå®Œå·¥æ—¶é—´ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">201</span>], b[<span class="number">201</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> dp[<span class="number">202</span>][<span class="number">10000</span>];<span class="comment">//dp[i][j] è¡¨ç¤ºå‰iä¸ªä½œä¸šä¸­Aæœºå™¨èŠ±jåˆ†é’Ÿçš„æ—¶å€™ Bæœºå™¨æ‰€èŠ±æ—¶é—´ </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) cin&gt;&gt;a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) cin&gt;&gt;b[i];</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        sum+=a[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;=sum; j++) &#123;</span><br><span class="line">            dp[i][j]=dp[i<span class="number">-1</span>][j]+b[i];</span><br><span class="line">            <span class="keyword">if</span>(j&gt;=a[i]) dp[i][j]=<span class="built_in">min</span>(dp[i<span class="number">-1</span>][j]+b[i],dp[i<span class="number">-1</span>][j-a[i]]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">999999</span>;</span><br><span class="line">    <span class="comment">//max(dp[n][i],i) è¡¨ç¤ºå®Œæˆå‰nä¸ªä½œä¸šAæœºå™¨èŠ±iåˆ†é’Ÿ Bæœºå™¨èŠ±dp[n][i]åˆ†é’Ÿæƒ…å†µä¸‹ï¼Œæœ€è¿Ÿå®Œå·¥æ—¶é—´ </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;=sum; i++)ans=<span class="built_in">min</span>(ans,<span class="built_in">max</span>(dp[n][i],i));</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯èƒ½æœ‰äº›äººå¹¶æ²¡æœ‰è§‰å¾—è¿™ä¸ªè§£æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œä½†è®¤çœŸçœ‹è¿™ä¸ªdpæ•°ç»„ä¼šå‘ç°å®ƒæ˜¯æŒºæœ‰æ„æ€çš„ï¼Œé‡å¤ä¸Šé¢çš„dp[i][j]ä»£è¡¨åšå®Œå‰iä¸ªä»»åŠ¡ï¼ŒAæœºå™¨èŠ±å‡ åˆ†é’Ÿæƒ…å†µä¸‹ï¼ŒBæœºå™¨æ‰€èŠ±çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´dp[i][j]å°±æ˜¯è¡¨ç¤ºBæœºå™¨æ‰€èŠ±æ—¶é—´ï¼Œè€ŒåŒæ—¶åˆæ˜¾ç¤ºäº†Aæœºå™¨èŠ±çš„æ—¶é—´ã€‚è¿™æ ·ä¸€æ¥å°±å¯ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºBæœºå™¨å’ŒAæœºå™¨æ‰€èŠ±çš„æ—¶é—´äº†ï¼ŒæŸ¥çœ‹æˆ‘çš„æ•™æç­”æ¡ˆç”¨çš„å´æ˜¯ä¸‰ç»´æ•°ç»„ï¼Œæ˜æ˜¾æ›´éº»çƒ¦ä¸€äº›ï¼Œå¯¹è¿™ä¸ªçš„è¯åªéœ€æœ€åå†æ‰¾åˆ°æœ€é•¿æ—¶é—´ä¾¿å¯ï¼Œä¹Ÿä¸è‡³äºä¸‰ç»´æ•°ç»„ã€‚</p>
<p>ä¹Ÿå°±æˆ‘è¿™ç§è§è¯†å°‘çš„ä¼šæ„Ÿå¹è¿™ç§è§£æ³•ï¼Œå¤§ç‰›ä»¬åº”è¯¥ä¹Ÿç§ä¸ä¸Šè¿™ï¼Œä»éœ€è¦åšé¢˜å•Šã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://blog.csdn.net/qq_38089964/article/details/80803595">ç‹¬ç«‹ä»»åŠ¡æœ€ä¼˜è°ƒåº¦é—®é¢˜</a></p>
<p>å…¶å®å‡ ä¹å°±æ˜¯æ¬è¿ï¼Œå†åŠ ä¸Šè‡ªå·±çœ‹æ³•</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç‚¹èµåŠŸèƒ½çš„ä¸€ç§å®ç°</title>
    <url>/article/8abc133f.html</url>
    <content><![CDATA[<h1 id="ç®€è¿°">ç®€è¿°</h1>
<p>æœ€è¿‘å¼€å‘â€œæ–°é—»å‘å¸ƒç³»ç»Ÿâ€ï¼Œæƒ³è¦ä¼˜åŒ–åŸæœ‰çš„ç‚¹èµåŠŸèƒ½ï¼Œæ‰€ä»¥è€ƒè™‘<code>Redis</code>å®ç°ä¸€ç§ç¼“å­˜ç‚¹èµæ–¹æ³•ã€‚</p>
<p>è¿™é‡Œç›´æ¥è´´å‡ºä¸€ä¸ªé“¾æ¥å§ï¼Œhttps://blog.csdn.net/mrhanzhou5273/article/details/113395797</p>
<p>æˆ‘è§‰å¾—è¿™é‡Œå†™çš„å¾ˆä¸é”™ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚è€ƒä¸€ä¸‹</p>
<span id="more"></span>
<h1 id="æ€ä¹ˆåš">æ€ä¹ˆåš</h1>
<p>æˆ‘å¤§è‡´æè¿°ä»–æ˜¯æ€ä¹ˆåšçš„</p>
<ul>
<li>é€šè¿‡<code>Redis</code>å¯¹ç‚¹èµç¼“å­˜ï¼Œåˆ©ç”¨<code>hash</code>ç»“æ„ï¼Œå°†ç”¨æˆ·<code>id</code>ã€ç›®æ ‡<code>id</code>ã€ç›®æ ‡ç±»å‹ä½œä¸º<code>hash</code>çš„<code>flied</code>ï¼Œå€¼ä¸º<code>0/1</code>ï¼Œä»£è¡¨æœªç‚¹èµ/ç‚¹èµ</li>
<li>è¿™é‡Œä½¿ç”¨ç­–ç•¥æ¨¡å¼ä¼˜åŒ–äº†<code>ifelse</code>çš„åˆ¤æ–­å¤„ç†æ“ä½œ</li>
<li>æœ€ååˆ©ç”¨å®šæ—¶ä»»åŠ¡å®ç°<code>Redis</code>çš„æŒä¹…åŒ–</li>
</ul>
<p>çœ‹å®Œè¿˜æ˜¯èƒ½å­¦åˆ°ä¸œè¥¿çš„</p>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>å¦‚æœä½ çœ‹å®Œäº†åŸæ–‡ï¼Œåº”è¯¥æƒ³ä¸€æƒ³è¿™æ ·åšä¼šä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>å¦‚æœä½ çœ‹ä¸å‡ºä»€ä¹ˆé—®é¢˜ï¼Œè¦åæ€äº†</p>
<p>æˆ‘æå‡ ä¸ªé—®é¢˜ï¼Ÿ</p>
<ul>
<li>è¿™é‡Œçš„<code>Redis</code>æ˜¯ä¸æ˜¯ä¼šå’Œæ•°æ®åº“å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Ÿ</li>
<li>çœ‹å®ŒåŸæ–‡ä¸Šé¢çš„ç­”æ¡ˆæ˜¯ï¼šä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œé‚£ä¹ˆä»æ•°æ®åº“æŸ¥åˆ°çš„æ•°æ®æ˜¯ä¸å‡†ç¡®çš„æ€ä¹ˆåŠï¼Ÿ</li>
<li>è‹¥<code>Redis</code>çš„æ•°æ®åœ¨æœªæŒä¹…åŒ–å‰ä¸¢å¤±äº†æ€ä¹ˆåŠï¼Ÿ</li>
<li>ç­‰</li>
</ul>
<p>åº”è¯¥æœ‰å¾ˆå¤šé—®é¢˜å¯ä»¥æçš„</p>
<p>é‚£æ˜¯ä¸æ˜¯è¯´ä»–çš„æ–¹æ¡ˆä¸å¯è¡Œï¼Œæˆ‘æƒ³ä¸æ˜¯çš„</p>
<p>æˆ‘ä»¬æƒ³ä¸€æƒ³æ—¥å¸¸ä½¿ç”¨åœºæ™¯ï¼Œç‚¹èµæ˜¯å®æ—¶å‡†ç¡®çš„å—ï¼Ÿä¸ï¼Œå®ƒä¸æ˜¯ï¼Œæˆ‘ä»¬éƒ½èƒ½æ„Ÿå—åˆ°å®ƒä¼šåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´åæœ‰ä¸ªè¾ƒå¤§çš„å˜åŒ–ï¼Œè¿™ä¹Ÿè®¸å°±å¯èƒ½æ˜¯<code>Redis</code>æŒä¹…åŒ–åçš„æ•ˆæœ</p>
<p>æ‰€ä»¥è¯´å˜›ï¼Œæˆ‘è§‰å¾—è¿™æ ·æ˜¯å¯è¡Œçš„ï¼Œä½†ä½¿ç”¨æ—¶è¿˜æ˜¯è¦æ³¨æ„</p>
<h1 id="å»ºè®®">å»ºè®®</h1>
<ul>
<li>æ•°æ®ä¸¢å¤±ä¿éšœ</li>
<li>é˜²æ­¢<code>Redis</code>æ•°æ®é›†ä¸­åœ¨å‡ ä¸ª<code>key</code>ä¸Š</li>
<li><code>Redis</code>ä½¿ç”¨å¸¸è§„é—®é¢˜ã€‚ã€‚ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>Redis</tag>
        <tag>å®šæ—¶ä»»åŠ¡</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>çŸ¥è¯†ä»˜è´¹</title>
    <url>/article/5cd0a942.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>å¾ˆæ—©å°±æƒ³å†™ä¸€ç¯‡è¿™æ ·çš„æ–‡ç« äº†ï¼Œä½†ä¸€ç›´ä¸çŸ¥å¦‚ä½•â€œä¸‹ç¬”â€ï¼ˆç å­—ï¼‰ï¼Œä¸»è¦è¿˜æ˜¯è‡ªå·±çš„æ–‡ç¬”å¤ªå·®ï¼Œä½†è¿™ç¡®å®æ˜¯è‡ªå·±æƒ³èŠçš„ä¸€ä¸ªè¯é¢˜ã€‚æ‰€ä»¥æœ€åè¿˜æ˜¯æœªå‡†å¤‡å¥½çš„æƒ…å†µä¸‹åšå®Œäº†ï¼Œè°…è§£ï¼</p>
<p>è¿‘äº›å¹´ï¼Œäººç±»çš„çŸ¥è¯†ä½“ç³»æ­£åœ¨ä¸æ–­å®Œå–„ï¼Œè¿‘20å¹´çš„å‘å±•å¯ä»¥ç§°å¾—ä¸Šæ˜¯è¶…é£é€Ÿå‘å±•ã€‚æƒ³æƒ³00å¹´ï¼Œé‚£è¿˜æ˜¯ä¸ºæ¸©é¥±é—®é¢˜å‘æ„çš„å¹´ä»£ï¼Œåˆ°ç°åœ¨ï¼Œå„å¤§é¢†åŸŸçš„è¡Œä¸šå·¨å¤´åœ¨æˆ‘ä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢è¿›è¡Œç€æ¿€çƒˆçš„ç«äº‰ï¼Œä¼´éšç€æ™ºèƒ½æ‰‹æœºã€ç½‘ç»œé€šè®¯ã€äººå·¥æ™ºèƒ½ã€äº‘è®¡ç®—ã€è‡ªåŠ¨é©¾é©¶ç­‰åœ¨æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„æ¸—é€ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å—åˆ°äº†æå¤§çš„å½±å“ã€‚æˆ‘ä¹Ÿæ˜¯æ„ˆå‘ä¸æ•¢æƒ³è±¡æœªæ¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå› ä¸ºå‘å±•çš„å®åœ¨å¤ªå¿«äº†ã€‚è¦çŸ¥é“æˆ‘ä»¬èƒ½çœ‹åˆ°çš„æœªæ¥æ°¸è¿œéƒ½æ˜¯åœ¨å·²æœ‰çŸ¥è¯†ä½“ç³»ä¸‹çš„æœ‰é™çš„æƒ³è±¡ï¼Œå°±åƒå…‰ï¼Œå®ƒèƒ½ç…§äº®çš„åœ°æ–¹æˆ‘ä»¬å¯èƒ½çœ‹åˆ°ï¼Œä½†å®ƒç…§ä¸åˆ°çš„åœ°æ–¹æˆ‘ä»¬æ°¸è¿œéƒ½çœ‹ä¸åˆ°ã€‚è¦æƒ³çœ‹åˆ°æ›´è¿œçš„åœ°æ–¹éœ€è¦æœ‰äººæŠŠå‰äººèµ°è¿‡çš„è·¯å…ˆèµ°ä¸€éï¼Œå¹¶èƒ½æ¢ç´¢æ–°çš„é»‘æš—æŠŠå®ƒç‚¹äº®ï¼Œä¸ºåäººç…§äº®æ–°çš„å‰è·¯ã€‚</p>
<span id="more"></span>
<h1 id="ç®€è°ˆ">ç®€è°ˆ</h1>
<p>çŸ¥è¯†ä»˜è´¹è¿™ä¸ªæ¦‚å¿µæ—©åœ¨2016å¹´å°±è¢«æå‡ºäº†ï¼Œç™¾åº¦ç™¾ç§‘ç»™å®ƒçš„å®šä¹‰ä¸ºâ€œçŸ¥è¯†ä»˜è´¹çš„ç°è±¡ä¸»è¦æŒ‡çŸ¥è¯†çš„æ¥æ”¶è€…ä¸ºæ‰€é˜…è§ˆçŸ¥è¯†ä»˜å‡ºèµ„é‡‘çš„ç°è±¡ã€‚çŸ¥è¯†ä»˜è´¹è®©çŸ¥è¯†çš„è·å¾—è€…é—´æ¥ä¸ºå‘çŸ¥è¯†çš„ä¼ æ’­è€…ä¸ç­›é€‰è€…ç»™äºˆæŠ¥é…¬ï¼Œè€Œä¸æ˜¯è®©å‚ä¸çŸ¥è¯†ä¼ æ’­é“¾æ¡çš„äººé€šè¿‡æµé‡æˆ–å¹¿å‘Šç­‰å…¶å®ƒæ–¹å¼è·å¾—æ”¶ç›Šã€‚â€ã€‚</p>
<p>ä¸ºä»€ä¹ˆæˆ‘ä¼šé‡æ–°æƒ³èµ·è¿™ä¸ªåè¯å‘¢ï¼Ÿæƒ³ä¸€æƒ³ä½ æ˜¯å¦æœ‰è¿™æ ·çš„æ—¶å€™/ç¬é—´ï¼Œæ›¾ç»æˆ‘ä»¬ä»å¤–ç•Œæ¥æ”¶åˆ°ä¸€äº›æ–°æ€æƒ³æ–°æ¦‚å¿µï¼Œä½†ä¸€ç›´æ²¡æœ‰åˆ‡èº«ä½“ä¼šï¼Œæ— æ³•ç†è§£ï¼Œç›´åˆ°æŸä¸ªæ—¶å€™æˆ–ç¬é—´ï¼Œå‘ç°å®ƒå°±åœ¨æˆ‘ä»¬èº«è¾¹ï¼Œç¦»æˆ‘ä»¬å¾ˆè¿‘ã€‚æˆ‘çš„åˆ‡èº«ä½“ä¼šå‡ºè‡ªäºè¶Šæ¥è¶Šå¤šçš„è¾…å¯¼ç­çš„å‡ºç°ï¼Œæ¯”å¦‚ä»€ä¹ˆå„ç§è¯ä¹¦è€ƒè¯•è¾…å¯¼ï¼Œè€ƒç ”æœºæ„ï¼ŒåŸ¹è®­æœºæ„ç­‰ç­‰ï¼Œå†åŠ ä¸Šä»Šå¹´å…´èµ·çš„äº’è”ç½‘æ•™è‚²å¹³å°ï¼ŒåŒ…æ‹¬çŒ¿è¾…å¯¼ã€ä½œä¸šå¸®ã€å¥½æœªæ¥ï¼Œå½“ç„¶è¿˜æœ‰è®¸å¤šï¼Œç”šè‡³ä¸€äº›å¤§å‚ä¹ŸåŠ å…¥äº†ã€‚ä»–ä»¬ä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Œæ­£æ˜¯å› ä¸ºç¤¾ä¼šå‘å±•çš„å¤ªå¿«äº†ï¼ŒçŸ¥è¯†æˆå€å¢é•¿ï¼Œæˆ‘ä»¬é¢å¯¹ç€æ— ç©·æ— å°½çš„çŸ¥è¯†èµ„æºï¼Œä¸çŸ¥é“å¦‚ä½•ç”„åˆ«ã€å¦‚ä½•é€‰æ‹©ï¼Œä»–ä»¬å‡ºç°å°±æ˜¯ä¸ºäº†ç»™è¿·èŒ«çš„æˆ‘ä»¬æŒ‡å¼•ä¸€ä¸‹æ–¹å‘ã€‚ä¸å¯å¦è®¤ä¸€äº›æœºæ„ç¡®å®å¯ä»¥ç»™äºˆæˆ‘ä»¬ä¸€äº›å¸®åŠ©ï¼Œè®©æˆ‘ä»¬æƒ³æˆåŠŸè¿ˆè¿›ï¼Œä½†ä¹Ÿå› æ­¤ä¸€äº›æ²¡æœ‰ä¸»è§çš„åŒå­¦ä¼šå¤±å»äº†ä»–ä»¬é‚£ä»½æœ€é‡è¦çš„æ¢ç´¢ç²¾ç¥ã€‚è¿™ä»½æ¢ç´¢ç²¾ç¥å¯ä»¥è®©ä»–ä»¬åœ¨ä¸ä¾èµ–äºå¤–äººçš„æƒ…å†µä¸‹èµ°å¾—æ›´é«˜æ›´è¿œï¼Œä½†å´åœ¨è¿™æ—¶å€™å¤±å»äº†ï¼Œå°¤å…¶è¿˜æ˜¯åœ¨å­¦æ ¡è¿™ä¸ªå—äººç…§é¡¾çš„â€œå°ç¤¾ä¼šâ€ä¸­ã€‚å¯ä»¥è¯´å¤§å­¦æ—¶ä»£æˆ–æ˜¯å­¦ç”Ÿæ—¶ä»£ï¼Œå¾ˆå¤šäººå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„äººï¼Œä»–ä»¬ä¸çŸ¥é“æœªæ¥è¦åšä»€ä¹ˆï¼Œè‡ªå·±èƒ½åšä»€ä¹ˆã€‚è¿™æ—¶ä»–ä»¬å¯¹äºç¤¾ä¼šã€å¯¹äºæœªæ¥ã€å¯¹äºä¸–ç•Œæ˜¯æœ‰å¾ˆå¤šç¾å¥½çš„å¹»æƒ³çš„ï¼Œå³ä½¿ä»–ä»¬ç¤¾ä¼šé˜…å†ä¸è¶³ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå·¥ä½œèƒ½åŠ›ï¼Œä½†è¿™äº›åˆæ˜¯ä»–ä»¬çš„ä¼˜ç‚¹ï¼Œè¿™æ—¶å› ä¸ºä»–ä»¬å¥½å¥‡å¿ƒå’Œæ¢ç´¢ç²¾ç¥ä½¿å¾—ä»–ä»¬å¯å¡‘èƒ½åŠ›å¾ˆå¼ºï¼Œæˆé•¿ç©ºé—´ç‰¹åˆ«å¤§ã€‚è¿™äº›å¥½åƒåç¦»äº†çŸ¥è¯†ä»˜è´¹ï¼Œä½†æˆ‘æƒ³è¯´çš„å…¶å®å°±æ˜¯ä½œä¸ºå½“ä»£å¹´è½»äººåº”å½“æ•¢äºè·³å‡ºåˆ«äººç»™å®šçš„çŸ¥è¯†æ¡†æ¶ï¼Œå¤šä¸€ç‚¹è´¨ç–‘ç²¾ç¥ï¼Œå¤šä¸€äº›æ€è€ƒç²¾ç¥ã€‚æˆ‘ç‰¹åˆ«ä¸å¸Œæœ›å› ä¸ºçŸ¥è¯†ä»˜è´¹çš„å‡ºç°ï¼Œæˆ‘ä»¬æœç´¢èµ„æ–™ã€è‡ªæˆ‘æ€»ç»“ã€åŠ¨æ‰‹å®è·µçš„èƒ½åŠ›è¶Šæ¥è¶Šå·®ï¼Œè¶Šæ¥è¶Šä¾èµ–äºä»–äººçš„å¸®åŠ©ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æ°¸è¿œä¸è¦å¤±å»å¯¹ä¸–ç•Œçš„å¥½å¥‡å¿ƒï¼Œå‹‡äºæ¢ç´¢</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§’æ€demo</title>
    <url>/article/5cbc0449.html</url>
    <content><![CDATA[<p>ç§’æ€é¡¹ç›®çœŸçš„æ˜¯æ—©æœ‰è€³é—»ï¼Œå¯ä»¥è¯´æ˜¯å¤§ç«æœ‰ä¸€é˜µå­ï¼Œå› ä¸ºè¿™å…¶ä¸­æ¶‰åŠé«˜å¹¶å‘ã€æ•°æ®åº“ã€ç¼“å­˜ï¼Œæ›´æœ‰ç”šè€…è¿˜æœ‰åˆ†å¸ƒå¼ã€åˆ†åº“åˆ†è¡¨ã€é›†ç¾¤ç­‰ã€‚</p>
<p>è¿™æ¬¡æœ‰æœºä¼šè·Ÿç€è§†é¢‘å­¦ä¹ äº†ä¸€ç‚¹ç§’æ€ç³»ç»Ÿï¼Œè¿™é‡Œåšä¸ªæ€»ç»“</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://www.bilibili.com/video/BV1CE411s7xN">https://www.bilibili.com/video/BV1CE411s7xN</a></p>
<p><a
href="https://www.bilibili.com/video/BV13a4y1t7Wh">https://www.bilibili.com/video/BV13a4y1t7Wh</a></p>
<span id="more"></span>
<h1 id="åŸºç¡€ç¯å¢ƒå’Œå·¥å…·">åŸºç¡€ç¯å¢ƒå’Œå·¥å…·</h1>
<ul>
<li>IDEA 2020 + JDK8</li>
<li>SpringBoot 2.x</li>
<li>è™šæ‹ŸæœºCentOSä¸Šçš„ MySQL 5.7x + Redis 6.x</li>
<li>Mybatis</li>
<li>Lombok</li>
<li>Navicat ï¼ˆMySQLå¯è§†åŒ–å·¥å…·ï¼‰</li>
<li>Redis Desktop Manager ï¼ˆRediså¯è§†åŒ–å·¥å…·ï¼‰</li>
<li>MobaXterm ï¼ˆSSHå·¥å…·ï¼‰</li>
<li>JMeter ï¼ˆå‹åŠ›æµ‹è¯•å·¥å…·ï¼‰</li>
<li>Postman/Chrome</li>
</ul>
<h1 id="pom.xml-åŸºç¡€ä¾èµ–">pom.xml åŸºç¡€ä¾èµ–</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="application">application</h1>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8090</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.1.106:3306/seckill</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.106</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span> <span class="comment">#sqlæ˜ å°„æ–‡ä»¶ä½ç½®</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.wnh.entity</span> <span class="comment">#å®ä½“ç±»åˆ«å</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®æ—¥å¿—</span></span><br><span class="line"><span class="attr">logging.level.root</span>=<span class="string">info</span></span><br><span class="line"><span class="attr">logging.level.com.wnh.dao</span>=<span class="string">debug</span></span><br></pre></td></tr></table></figure>
<h1 id="é¡¹ç›®æ¡†æ¶">é¡¹ç›®æ¡†æ¶</h1>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3kqbmcc1raq0.png"
alt="é¡¹ç›®ç»“æ„" />
<figcaption aria-hidden="true">é¡¹ç›®ç»“æ„</figcaption>
</figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for stock</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `stock`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `stock`  (</span><br><span class="line">  `sid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;å•†å“id&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å•†å“åç§°&#x27;</span>,</span><br><span class="line">  `total` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åº“å­˜&#x27;</span>,</span><br><span class="line">  `sale` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å·²å”®&#x27;</span>,</span><br><span class="line">  `version` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç‰ˆæœ¬å·&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`sid`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">4</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for stock_order</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `stock_order`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `stock_order`  (</span><br><span class="line">  `oid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `sid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `create_time` <span class="type">timestamp</span>(<span class="number">0</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">0</span>) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">0</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`oid`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">4749</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™é‡Œè®¢å•ä¸èƒ½å‘½åä¸ºorderï¼ŒMySQLä¿ç•™å­—é”™è¯¯</p>
<h1 id="entity">Entity</h1>
<p>Stock</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stock</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer sid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer total;</span><br><span class="line">    <span class="keyword">private</span> Integer sale;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Order</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer oid;</span><br><span class="line">    <span class="keyword">private</span> Integer sid;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="mapper">Mapper</h1>
<p>å•†å“Mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wnh.dao.StockMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateSale&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;stock&quot;</span>&gt;</span></span><br><span class="line">        update stock</span><br><span class="line">        set sale=sale + 1</span><br><span class="line">        where sid = #&#123;sid&#125;</span><br><span class="line">          and total &gt; sale</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateSaleWithVersion&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;stock&quot;</span>&gt;</span></span><br><span class="line">        update stock</span><br><span class="line">        set sale=sale + 1,</span><br><span class="line">            version=version + 1</span><br><span class="line">        where sid = #&#123;sid&#125;</span><br><span class="line">          and version = #&#123;version&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;checkStock&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;stock&quot;</span>&gt;</span></span><br><span class="line">        select sid, name, total, sale, version</span><br><span class="line">        from stock</span><br><span class="line">        where sid = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;listStocks&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;stock&quot;</span>&gt;</span></span><br><span class="line">        select sid, total, sale</span><br><span class="line">        from stock</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°è¿™é‡Œæœ‰ä¸¤ä¸ªä¸åŒçš„æ›´æ–°æ“ä½œï¼Œä¸¤ä¸ªéƒ½æ˜¯åˆ©ç”¨æ•°æ®åº“çš„ä¹è§‚é”å®ç°çš„ç®€å•çš„å¹¶å‘å¤„ç†</p>
<p>è®¢å•Mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wnh.dao.OrderMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--useGeneratedKeys=&quot;true&quot; æ•°æ®åº“è‡ªå¢ç”Ÿæˆ keyProperty=&quot;oid&quot; è¿”å›ç”Ÿæˆå€¼åˆ° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;createOrder&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;order&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;oid&quot;</span>&gt;</span></span><br><span class="line">        insert into stock_order</span><br><span class="line">        values (#&#123;oid&#125;, #&#123;sid&#125;, #&#123;createTime&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="service">Service</h1>
<p>StockService</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StockServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StockService</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StockMapper stockMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Stock&gt; <span class="title function_">listStocks</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stockMapper.listStocks();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥åº“å­˜</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Stock <span class="title function_">checkStock</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">Stock</span> <span class="variable">stock</span> <span class="operator">=</span> stockMapper.checkStock(id);</span><br><span class="line">        <span class="keyword">if</span> (stock.getSale().equals(stock.getTotal())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;åº“å­˜ä¸è¶³&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·²å”®å¢åŠ </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateSale</span><span class="params">(Stock stock)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stockMapper.updateSale(stock);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OrderService</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StockService stockService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">kill</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¡éªŒåº“å­˜</span></span><br><span class="line">        <span class="type">Stock</span> <span class="variable">stock</span> <span class="operator">=</span> stockService.checkStock(id);</span><br><span class="line">        <span class="comment">// æ‰£é™¤åº“å­˜</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">up</span> <span class="operator">=</span> stockService.updateSale(stock);</span><br><span class="line">        <span class="keyword">if</span> (up == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;åº“å­˜ä¸è¶³&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè®¢å•</span></span><br><span class="line">        <span class="keyword">return</span> createOrder(stock);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="keyword">private</span> Integer <span class="title function_">createOrder</span><span class="params">(Stock stock)</span> &#123;</span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>();</span><br><span class="line">        order.setSid(stock.getSid()).setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        orderMapper.createOrder(order);</span><br><span class="line">        <span class="keyword">return</span> order.getOid();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å…³é”®æ¥å£æ˜¯ OrderService çš„ kill æ–¹æ³•</p>
<h1 id="controller">Controller</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;stock&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BuyController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StockService stockService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§’æ€</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;kill&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">kill</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + id);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.kill(id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¯åŠ¨é¡¹ç›®æµ‹è¯•">å¯åŠ¨é¡¹ç›®æµ‹è¯•</h1>
<p>åˆå§‹æ•°æ®åº“æ•°æ®</p>
<p>å•†å“è¡¨</p>
<table>
<thead>
<tr class="header">
<th>sid</th>
<th>name</th>
<th>total</th>
<th>sale</th>
<th>version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>iphone8</td>
<td>100</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>p40</td>
<td>5</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>k30</td>
<td>200</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>è®¢å•è¡¨ä¸ºç©º</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.w9zmmubhups.png"
alt="postmanä¸€æ¬¡è¯·æ±‚" />
<figcaption aria-hidden="true">postmanä¸€æ¬¡è¯·æ±‚</figcaption>
</figure>
<p>ä¸€æ¬¡è¯·æ±‚å</p>
<p>sale+1ï¼Œå˜ä¸º1ï¼Œå¢åŠ äº†ä¸€æ¡è®¢å•ï¼Œå…¶ä»–æ²¡æœ‰å˜åŒ–</p>
<p>JMeteræµ‹è¯•</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.88sba43umic.png"
alt="JMeteræµ‹è¯•" />
<figcaption aria-hidden="true">JMeteræµ‹è¯•</figcaption>
</figure>
<p>saleå˜ä¸º100ï¼Œè®¢å•æ€»æ•°100æ¡ï¼ŒThroughputä¸º100-200/sec</p>
<p>æ€»ä½“æ²¡å‡ºç°å¤§é—®é¢˜ï¼Œä½†æ˜¯Throughputä¸å°½äººæ„</p>
<p>æ¢å¤åŸæ•°æ®æŠŠ JMeter å‚æ•°ç¨ç¨ä¸€æ”¹ï¼Œ1000ä¸å˜ï¼ŒLoop Cout
å˜ä¸º10ï¼Œä¹Ÿå°±æ˜¯æ€»å…± 10000
æ¬¡è¯·æ±‚ï¼Œè¿™æ¬¡æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹å˜å¾—å¾ˆæ…¢ï¼Œæœ€ç»ˆThroughputä¹Ÿåœç•™åœ¨
30-40/secï¼Œå½“ç„¶è¿™éœ€è¦ä¼˜åŒ–</p>
<h1 id="åŠ å…¥redis">åŠ å…¥Redis</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;stock&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BuyController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StockService stockService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Stock&gt; stocks = stockService.listStocks();</span><br><span class="line">        <span class="keyword">for</span> (Stock stock : stocks) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().set(Constants.REDIS_STOCK_LAST + stock.getSid(), stock.getTotal() - stock.getSale() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§’æ€</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;kill&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">kill</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">increment</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().decrement(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">        <span class="keyword">if</span> (increment &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + id);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.kill(id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ç³»ç»Ÿ</p>
<p>æŸ¥åˆ° Redis é‡Œå·²ç»å­˜å…¥æ•°æ®ï¼ŒPostmanæµ‹è¯•æ²¡æœ‰é—®é¢˜</p>
<p>JMeter æµ‹è¯•è¿‡ç¨‹å¾ˆå¿«ï¼Œä½† Throughput æå‡ä¸€ç‚¹</p>
<h1 id="äºŒçº§ç¼“å­˜">äºŒçº§ç¼“å­˜</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;stock&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BuyController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StockService stockService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ConcurrentHashMap&lt;Integer, Boolean&gt; stockSoldOutMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Stock&gt; stocks = stockService.listStocks();</span><br><span class="line">        <span class="keyword">for</span> (Stock stock : stocks) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().set(Constants.REDIS_STOCK_LAST + stock.getSid(), stock.getTotal() - stock.getSale() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§’æ€</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;kill&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">kill</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (stockSoldOutMap.get(id) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">increment</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().decrement(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">        <span class="keyword">if</span> (increment &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            stockSoldOutMap.put(id, <span class="literal">true</span>);</span><br><span class="line">            stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + id);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.kill(id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">            <span class="keyword">if</span> (stockSoldOutMap.get(id) != <span class="literal">null</span>) &#123;</span><br><span class="line">                stockSoldOutMap.remove(id);</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æµ‹è¯•ï¼Œå› ä¸ºé€šè¿‡JVMå†…å­˜ç¼“å­˜äº†æ˜¯å¦å”®ç©ºï¼Œæ‰€ä»¥ç³»ç»Ÿè¿˜èƒ½å†æå‡ä¸€äº›ã€‚</p>
<h1 id="ä»¤ç‰Œæ¡¶é™æµ">ä»¤ç‰Œæ¡¶é™æµ</h1>
<p>ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- googleå¼€æºå·¥å…·ç±»RateLimiterä»¤ç‰Œæ¡¶å®ç° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>30.1-jre<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä»¤ç‰Œæ¡¶å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">RateLimiter</span> <span class="variable">rateLimiter</span> <span class="operator">=</span> RateLimiter.create(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;sale&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">sale</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ²¡æœ‰è·å– token è¯·ä¸€ç›´åˆ°è·å–åˆ° token ä»¤ç‰Œ</span></span><br><span class="line">    <span class="comment">// log.info(&quot;ç­‰å¾…æ—¶é—´ï¼š&quot;+rateLimiter.acquire());</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œå¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…è·å–åˆ°äº† token ä»¤ç‰Œï¼Œåˆ™å¤„ç†ä¸šåŠ¡ï¼Œæ²¡æœ‰åˆ™æŠ›å¼ƒ</span></span><br><span class="line">    <span class="keyword">if</span> (!rateLimiter.tryAcquire(<span class="number">2</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰è¯·æ±‚è¢«é™æµï¼Œç›´æ¥æŠ›å¼ƒï¼Œæ— æ³•è°ƒç”¨åç»­ç§’æ€é€»è¾‘...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;å¤„ç†ä¸šåŠ¡.............&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­æˆåŠŸ&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;stock&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BuyController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StockService stockService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ConcurrentHashMap&lt;Integer, Boolean&gt; stockSoldOutMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä»¤ç‰Œæ¡¶å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">RateLimiter</span> <span class="variable">rateLimiter</span> <span class="operator">=</span> RateLimiter.create(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;sale&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sale</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æ²¡æœ‰è·å– token è¯·ä¸€ç›´åˆ°è·å–åˆ° token ä»¤ç‰Œ</span></span><br><span class="line">        <span class="comment">// log.info(&quot;ç­‰å¾…æ—¶é—´ï¼š&quot;+rateLimiter.acquire());</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œå¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…è·å–åˆ°äº† token ä»¤ç‰Œï¼Œåˆ™å¤„ç†ä¸šåŠ¡ï¼Œæ²¡æœ‰åˆ™æŠ›å¼ƒ</span></span><br><span class="line">        <span class="keyword">if</span> (!rateLimiter.tryAcquire(<span class="number">2</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰è¯·æ±‚è¢«é™æµï¼Œç›´æ¥æŠ›å¼ƒï¼Œæ— æ³•è°ƒç”¨åç»­ç§’æ€é€»è¾‘...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­å¤±è´¥&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¤„ç†ä¸šåŠ¡.............&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­æˆåŠŸ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;killtoken&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">killtoken</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!rateLimiter.tryAcquire(<span class="number">2</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰è¯·æ±‚è¢«é™æµï¼Œç›´æ¥æŠ›å¼ƒï¼Œæ— æ³•è°ƒç”¨åç»­ç§’æ€é€»è¾‘...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­å¤±è´¥&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> kill(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Stock&gt; stocks = stockService.listStocks();</span><br><span class="line">        <span class="keyword">for</span> (Stock stock : stocks) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().set(Constants.REDIS_STOCK_LAST + stock.getSid(), stock.getTotal() - stock.getSale() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§’æ€</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;kill&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">kill</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (stockSoldOutMap.get(id) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">increment</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().decrement(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">        <span class="keyword">if</span> (increment &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            stockSoldOutMap.put(id, <span class="literal">true</span>);</span><br><span class="line">            stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + id);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.kill(id);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">            <span class="keyword">if</span> (stockSoldOutMap.get(id) != <span class="literal">null</span>) &#123;</span><br><span class="line">                stockSoldOutMap.remove(id);</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯• killtoken
æ¥å£ï¼Œå¯ä»¥å‘ç°åœ¨ä¸€å®šæƒ…å†µä¸‹æ˜¯å–ä¸å®Œçš„ï¼Œè™½ç„¶è¯·æ±‚æ•°å¤§äºåº“å­˜æ•°ï¼Œè¿™æ—¶ä»ç„¶æ²¡æœ‰è¶…å–é—®é¢˜</p>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<ul>
<li>è§„å®šæ—¶é—´æ®µå†…å¯æŠ¢è´­ï¼Œå…¶ä»–æ—¶é—´ä¸èƒ½</li>
<li>æ¶æ„æŠ“åŒ…è·å–æ¥å£ï¼Œè„šæœ¬æŠ¢è´­</li>
<li>å•ä¸ªç”¨æˆ·é™åˆ¶æŠ¢è´­</li>
</ul>
<h1 id="é™æ—¶æŠ¢è´­">é™æ—¶æŠ¢è´­</h1>
<p>åˆ©ç”¨ Redis è¿‡æœŸæ—¶é—´ï¼Œè®¾ç½®æŠ¢è´­æ—¶é—´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;kill&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">kill</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">// å­˜åœ¨åˆ™è¿˜æ˜¯æŠ¢è´­æ—¶é—´æ®µå†…ï¼Œå¦åˆ™æ´»åŠ¨å·²ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (!stringRedisTemplate.hasKey(Constants.REDIS_STOCK_KILL + id)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç§’æ€æ´»åŠ¨å·²ç»“æŸ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æ´»åŠ¨å·²ç»“æŸ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (stockSoldOutMap.get(id) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Long</span> <span class="variable">increment</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().decrement(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">    <span class="keyword">if</span> (increment &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        stockSoldOutMap.put(id, <span class="literal">true</span>);</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + id);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.kill(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + id);</span><br><span class="line">        <span class="keyword">if</span> (stockSoldOutMap.get(id) != <span class="literal">null</span>) &#123;</span><br><span class="line">            stockSoldOutMap.remove(id);</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<p>è®¾ç½®1å·å•†å“5ç§’å†…å¯æŠ¢è´­</p>
<p><code>set stock_kill_1 1 EX 5</code></p>
<p>JMeteræµ‹è¯•æ­£å¸¸ï¼Œéƒ¨åˆ†å› ä»¤ç‰Œæ¡¶é™æµï¼Œéƒ¨åˆ†å› è¶…è¿‡æŠ¢è´­æ—¶é—´ç›´æ¥è¿”å›</p>
<h1 id="é˜²è„šæœ¬éªŒè¯">é˜²è„šæœ¬éªŒè¯</h1>
<p>ç”¨æˆ·è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `uid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ç”¨æˆ·id&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`uid`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>
<p>åŠ å…¥</p>
<table>
<thead>
<tr class="header">
<th>uid</th>
<th>name</th>
<th>password</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>å°æ¨</td>
<td>123456</td>
</tr>
</tbody>
</table>
<p>User</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserMapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    User <span class="title function_">findUserById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wnh.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select uid, name, password</span><br><span class="line">        from user</span><br><span class="line">        where uid = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Controlleræ–°åŠ å…¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”ŸæˆMD5</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;md5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getMD5</span><span class="params">(Integer sid, Integer uid)</span> &#123;</span><br><span class="line">    String md5;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        md5 = orderService.getMD5(sid, uid);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è·å–md5å¤±è´¥ï¼š&quot;</span> + e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;è·å–çš„MD5ä¸ºï¼š&quot;</span> + md5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OrderService</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getMD5</span><span class="params">(Integer sid, Integer uid)</span> &#123;</span><br><span class="line">    <span class="comment">// éªŒè¯ç”¨æˆ·</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.findUserById(uid);</span><br><span class="line">    <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;ç”¨æˆ·ä¿¡æ¯:[&#123;&#125;]&quot;</span>, user.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯å•†å“</span></span><br><span class="line">    <span class="type">Stock</span> <span class="variable">stock</span> <span class="operator">=</span> stockService.checkStock(sid);</span><br><span class="line">    <span class="keyword">if</span> (stock == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;å•†å“ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;å•†å“ä¿¡æ¯:[&#123;&#125;]&quot;</span>, stock.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆhashkey</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">hashKey</span> <span class="operator">=</span> <span class="string">&quot;KEY_&quot;</span> + uid + <span class="string">&quot;_&quot;</span> + sid;</span><br><span class="line">    <span class="comment">// ç”ŸæˆMD5 éšæœºç›-&quot;!Qr*#3&quot;</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> DigestUtils.md5DigestAsHex((uid + <span class="string">&quot;!Qr*#3&quot;</span> + sid).getBytes());</span><br><span class="line">    stringRedisTemplate.opsForValue().set(hashKey, key, <span class="number">120</span>, TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;Rediså†™å…¥:[&#123;&#125;]-[&#123;&#125;]&quot;</span>, hashKey, key);</span><br><span class="line">    <span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>postmanæµ‹è¯•æ¥å£ä¸ºhttp://localhost:8090/stock/md5?sid=1&amp;uid=1</p>
<p>ç»“æœä¸ºï¼š<code>è·å–çš„MD5ä¸ºï¼š6f2c1a31e4b297c4f85c166c09009ec6</code></p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.68ksory3x580.png"
alt="è¯·æ±‚MD5ä¸²" />
<figcaption aria-hidden="true">è¯·æ±‚MD5ä¸²</figcaption>
</figure>
<p>æ§åˆ¶å°</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image-20210530152757952.1htot39bww3k.png"
alt="æ§åˆ¶å°æ—¥å¿—" />
<figcaption aria-hidden="true">æ§åˆ¶å°æ—¥å¿—</figcaption>
</figure>
<p>æŸ¥çœ‹Redisï¼Œæ²¡æœ‰é—®é¢˜</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2u8i2kq3s7s0.png"
alt="æŸ¥çœ‹Redis" />
<figcaption aria-hidden="true">æŸ¥çœ‹Redis</figcaption>
</figure>
<p>çœ‹åˆ°è®¾ç½®äº†120ç§’çš„è¿‡æœŸæ—¶é—´</p>
<p>æ”¹é€ åŠ å…¥éªŒè¯</p>
<p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;killtokenmd5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">killtokenmd5</span><span class="params">(Integer sid, Integer uid, String md5)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!rateLimiter.tryAcquire(<span class="number">2</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰è¯·æ±‚è¢«é™æµï¼Œç›´æ¥æŠ›å¼ƒï¼Œæ— æ³•è°ƒç”¨åç»­ç§’æ€é€»è¾‘...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­å¤±è´¥&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•éªŒè¯ç”¨æˆ· æš‚æ—¶æ³¨é‡Š</span></span><br><span class="line">    <span class="comment">// if (!stringRedisTemplate.hasKey(Constants.REDIS_STOCK_KILL + sid)) &#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;ç§’æ€æ´»åŠ¨å·²ç»“æŸ...&quot;);</span></span><br><span class="line">    <span class="comment">//     return &quot;ç§’æ€æ´»åŠ¨å·²ç»“æŸ&quot;;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (stockSoldOutMap.get(sid) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Long</span> <span class="variable">increment</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().decrement(Constants.REDIS_STOCK_LAST + sid);</span><br><span class="line">    <span class="keyword">if</span> (increment &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        stockSoldOutMap.put(sid, <span class="literal">true</span>);</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + sid);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + sid);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.killtokenmd5(sid, uid, md5);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + sid);</span><br><span class="line">        <span class="keyword">if</span> (stockSoldOutMap.get(sid) != <span class="literal">null</span>) &#123;</span><br><span class="line">            stockSoldOutMap.remove(sid);</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Service</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">killtokenmd5</span><span class="params">(Integer sid, Integer uid, String md5)</span> &#123;</span><br><span class="line">    <span class="comment">//éªŒè¯ç­¾å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">hashKey</span> <span class="operator">=</span> <span class="string">&quot;KEY_&quot;</span> + uid + <span class="string">&quot;_&quot;</span> + sid;</span><br><span class="line">    <span class="keyword">if</span> (!md5.equals(stringRedisTemplate.opsForValue().get(hashKey))) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;å½“å‰è¯·æ±‚ä¸åˆæ³•ï¼Œè¯·ç¨åå†è¯•ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¡éªŒåº“å­˜</span></span><br><span class="line">    <span class="type">Stock</span> <span class="variable">stock</span> <span class="operator">=</span> stockService.checkStock(sid);</span><br><span class="line">    <span class="comment">// æ‰£é™¤åº“å­˜</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">up</span> <span class="operator">=</span> stockService.updateSale(stock);</span><br><span class="line">    <span class="keyword">if</span> (up == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;åº“å­˜ä¸è¶³&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="keyword">return</span> createOrder(stock);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼Œå…ˆè¯·æ±‚è·å– md5 æ¥å£ä½¿ Redis å­˜åœ¨è¯¥
md5ï¼Œåœ¨è¿‡æœŸæ—¶é—´å†…è¯·æ±‚æ–°çš„ç§’æ€æ¥å£ï¼Œä¸åŒäºå‰ï¼Œéœ€è¦åŠ ä¸Šç”¨æˆ· id å’Œ md5
ç”¨ä»¥éªŒè¯</p>
<p>æ­£ç¡®ç»“æœå¦‚ä¸‹ï¼Œè‹¥ä¸å…ˆè¯·æ±‚ md5ï¼Œåˆ™æ— æ³•åˆ©ç”¨ Redis éªŒè¯å¯¼è‡´å¤±è´¥ï¼Œé”™è¯¯çš„
md5 åŒæ · å¤±è´¥</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.2zitzg4v5ri0.png"
alt="å¸¦MD5æ­£ç¡®è¯·æ±‚" />
<figcaption aria-hidden="true">å¸¦MD5æ­£ç¡®è¯·æ±‚</figcaption>
</figure>
<h1 id="ç”¨æˆ·é™åˆ¶">ç”¨æˆ·é™åˆ¶</h1>
<p>é™åˆ¶ç”¨æˆ·è®¿é—®é¢‘ç‡</p>
<p>åˆ©ç”¨ Redis è¶…æ—¶æ—¶é—´å’Œ incr æ“ä½œé™åˆ¶è®¿é—®é¢‘ç‡</p>
<p>UserService</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">saveUserView</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ç”¨æˆ·idç”Ÿæˆè°ƒç”¨æ¬¡æ•°key</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">limitKey</span> <span class="operator">=</span> <span class="string">&quot;LIMIT&quot;</span> + <span class="string">&quot;_&quot;</span> + uid;</span><br><span class="line">        <span class="comment">// è·å–RedisæŒ‡å®škeyçš„è°ƒç”¨æ¬¡æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">limitNum</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(limitKey);</span><br><span class="line">        <span class="type">long</span> <span class="variable">limit</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (limitNum == <span class="literal">null</span>) &#123;</span><br><span class="line">            stringRedisTemplate.opsForValue().set(limitKey, <span class="string">&quot;0&quot;</span>, <span class="number">3600</span>, TimeUnit.SECONDS);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            limit = stringRedisTemplate.opsForValue().increment(limitKey);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> limit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">getUserView</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ç”¨æˆ·idç”Ÿæˆè°ƒç”¨æ¬¡æ•°key</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">limitKey</span> <span class="operator">=</span> <span class="string">&quot;LIMIT&quot;</span> + <span class="string">&quot;_&quot;</span> + uid;</span><br><span class="line">        <span class="comment">// è·å–RedisæŒ‡å®škeyçš„è°ƒç”¨æ¬¡æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">limitNum</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(limitKey);</span><br><span class="line">        <span class="keyword">if</span> (limitNum == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// ä¸ºç©ºç›´æ¥æŠ›å¼ƒè¯´æ˜keyå¼‚å¸¸</span></span><br><span class="line">            log.error(<span class="string">&quot;è¯¥ç”¨æˆ·æ²¡ç”¨ç”³è¯·éªŒè¯å€¼è®°å½•ï¼Œç–‘ä¼¼å¼‚å¸¸&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(limitNum) &lt;= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;killtokenmd5limit&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">killtokenmd5limit</span><span class="params">(Integer sid, Integer uid, String md5)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!rateLimiter.tryAcquire(<span class="number">2</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰è¯·æ±‚è¢«é™æµï¼Œç›´æ¥æŠ›å¼ƒï¼Œæ— æ³•è°ƒç”¨åç»­ç§’æ€é€»è¾‘...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­å¤±è´¥&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•éªŒè¯ç”¨æˆ· æš‚æ—¶æ³¨é‡Š</span></span><br><span class="line">    <span class="comment">// if (!stringRedisTemplate.hasKey(Constants.REDIS_STOCK_KILL + sid)) &#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;ç§’æ€æ´»åŠ¨å·²ç»“æŸ...&quot;);</span></span><br><span class="line">    <span class="comment">//     return &quot;ç§’æ€æ´»åŠ¨å·²ç»“æŸ&quot;;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (stockSoldOutMap.get(sid) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Long</span> <span class="variable">increment</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().decrement(Constants.REDIS_STOCK_LAST + sid);</span><br><span class="line">    <span class="keyword">if</span> (increment &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        stockSoldOutMap.put(sid, <span class="literal">true</span>);</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + sid);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•†å“å·²å”®å®Œ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;ç§’æ€å•†å“id = &quot;</span> + sid);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// åŠ å…¥ç”¨æˆ·è®¿é—®é¢‘ç‡é™åˆ¶</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">view</span> <span class="operator">=</span> userService.saveUserView(uid);</span><br><span class="line">        log.info(<span class="string">&quot;ç”¨æˆ·å·²è®¿é—®æ¬¡æ•°:[&#123;&#125;]&quot;</span>, view);</span><br><span class="line">        <span class="type">boolean</span> isAllowed= userService.getUserView(uid);</span><br><span class="line">        <span class="keyword">if</span> (!isAllowed) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;è´­ä¹°å¤±è´¥ï¼Œè¶…è¿‡è®¿é—®é¢‘ç‡ï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;è´­ä¹°å¤±è´¥ï¼Œè¶…è¿‡è®¿é—®é¢‘ç‡ï¼&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç§’æ€ä¸šåŠ¡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.killtokenmd5(sid, uid, md5);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç§’æ€æˆåŠŸï¼Œè®¢å•idä¸ºï¼š&quot;</span> + orderId;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(Constants.REDIS_STOCK_LAST + sid);</span><br><span class="line">        <span class="keyword">if</span> (stockSoldOutMap.get(sid) != <span class="literal">null</span>) &#123;</span><br><span class="line">            stockSoldOutMap.remove(sid);</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼Œä¾ç„¶å…ˆè·å–md5ï¼Œåœ¨ç”¨ JMeter
æµ‹è¯•ï¼Œæ¥å£åŠå‚æ•°<code>/stock/killtokenmd5limit?sid=1&amp;uid=1&amp;md5=6f2c1a31e4b297c4f85c166c09009ec6</code>è®¿é—®
20
æ¬¡ç»“æœå¦‚ä¸‹ï¼Œå› ä¸ºé™åˆ¶10æ¬¡ï¼Œæ‰€ä»¥10æ¬¡åè¢«é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯é™åˆ¶ä¸º10/ï¼ˆh*uï¼‰å•ç”¨æˆ·æ¯å°æ—¶é™åˆ¶è®¿é—®10æ¬¡</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.6qhcbkswl300.png"
alt="æ§åˆ¶å°æ—¥å¿—" />
<figcaption aria-hidden="true">æ§åˆ¶å°æ—¥å¿—</figcaption>
</figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¿™ä»…ä»…æ˜¯ä¸€ä¸ªå°demoï¼Œè¿˜æœ‰å¥½å¤šè¦å­¦ä¹ </p>
<p>ç»§ç»­åŠªåŠ›å§</p>
]]></content>
      <tags>
        <tag>Redis</tag>
        <tag>é¡¹ç›®</tag>
        <tag>Spring Boot</tag>
        <tag>MySQL</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>ç™½å«–æ•æ·å¼€å‘ä½“ç³»</title>
    <url>/article/a874eb2e.html</url>
    <content><![CDATA[<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/äº‘æ•ˆæŒç»­äº¤ä»˜.szjdarpjia8.webp"
alt="äº‘æ•ˆæŒç»­äº¤ä»˜" />
<figcaption aria-hidden="true">äº‘æ•ˆæŒç»­äº¤ä»˜</figcaption>
</figure>
<p>ç™½å«–è°ä¸çˆ±å•Šï¼Œæ•æ·å¼€å‘ã€<code>DevOps</code>ã€äº‘åŸç”Ÿè¿™äº›æ¦‚å¿µåˆšå¼€å§‹æ˜¯å®Œå…¨ä¸æ‡‚ï¼Œåªæœ‰æˆ‘ä½“éªŒä¸€ä¸‹ï¼Œæ‰èƒ½è®²å‡ºæ„Ÿå—æ¥ï¼Œè¿™ä¸ï¼Œç»ˆäºæœ‰æœºä¼šäº†ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>https://www.aliyun.com/product/yunxiao</p>
<p>https://www.yuque.com/pig4cloud/pig/ls7u1d</p>
<span id="more"></span>
<h1 id="äº‘æ•ˆ">äº‘æ•ˆ</h1>
<p>ç™½å«–çš„å°±æ˜¯é˜¿é‡Œå®¶äº‘æ•ˆè¿™æ¬¾äº§å“ï¼Œè¯´å®è¯ï¼Œæˆ‘è¿˜æ˜¯å¾ˆå–œæ¬¢é˜¿é‡Œåœ¨ä¼ä¸šç”Ÿæ€ä¸Šçš„äº§å“çš„ï¼Œæ¯”å¦‚ï¼šé’‰é’‰ã€é˜¿é‡Œäº‘ã€è¯­é›€ã€é˜¿é‡ŒçŸ¢é‡å›¾ç­‰ç­‰</p>
<p>å°¤å…¶æ˜¯å›´ç»•ç€é’‰é’‰å’Œé˜¿é‡Œäº‘å»ºç«‹èµ·æ¥çš„ä¼ä¸š/ç»„ç»‡ç®¡ç†ã€æ•ˆç‡çš„äº§å“ï¼ŒçœŸçš„å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å›å½’æ­£é¢˜ï¼Œæˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹äº‘æ•ˆï¼Œä½¿ç”¨ä¸Šè¯·å‚è€ƒ<a
href="https://www.yuque.com/pig4cloud/pig/ls7u1d">ç™½å«–æ•æ·å¼€å‘ä½“ç³»</a>ã€‚</p>
<p>é¡ºä¾¿ä¸€æï¼Œâ€œç™½å«–â€æ˜¯æŒ‡å¯¹äºä¸ªäººä½¿ç”¨åŸºæœ¬å¤Ÿç”¨ï¼Œå¦‚æœæœ‰éœ€è¦ä½¿ç”¨ä¼ä¸šç‰ˆå°±å¥½äº†ï¼</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.jfp9g8dby28.webp"
alt="äº‘æ•ˆåŠŸèƒ½ä¸€è§ˆ" />
<figcaption aria-hidden="true">äº‘æ•ˆåŠŸèƒ½ä¸€è§ˆ</figcaption>
</figure>
<h2 id="é¡¹ç›®åä½œ">é¡¹ç›®åä½œ</h2>
<p>é¡¹ç›®æ•´ä¸ªæµç¨‹éƒ½åœ¨è¿™äº†ï¼Œéœ€æ±‚ã€ä»»åŠ¡ã€ç¼ºé™·ã€è¿­ä»£ã€é£é™©ã€å·¥æ—¶ç­‰ç­‰ï¼Œéå¸¸ä¸°å¯Œï¼Œå¯¹äºé¡¹ç›®çš„ç®¡ç†å®Œå…¨å¤Ÿç”¨äº†ã€‚</p>
<p>ä½¿ç”¨å¥½é¡¹ç›®åä½œå¿…å®šèƒ½æé«˜é¡¹ç›®å¼€å±•æ•ˆç‡ï¼Œä»ç®¡ç†é‡Œä¸Šæ›´åŠ è§„èŒƒåˆç†ï¼Œå¦æœ‰æŠ¥è¡¨æ˜ç¡®é¡¹ç›®è¿›åº¦ï¼Œé€‚æ—¶è¿›è¡Œè°ƒæ•´åˆ†æã€‚</p>
<h2 id="æ•ˆèƒ½æ´å¯Ÿ">æ•ˆèƒ½æ´å¯Ÿ</h2>
<p>é¡¹ç›®åä½œåå‘äºä»é¡¹ç›®çº¬åº¦ç®¡ç†ï¼Œæ•ˆèƒ½æ´å¯Ÿä»å¦å¤–çš„ç»´åº¦æ¥çœ‹çš„ï¼Œå¦‚ï¼šå›¢é˜Ÿã€ä¸ªäººã€ä»£ç è´¨é‡ã€è·¨é¡¹ç›®ã€æ•æ·é¡¹ç›®ã€æ•ˆèƒ½åˆ†æç­‰ã€‚</p>
<p>è¿™ä¸ªä¸é¡¹ç›®åä½œæ›´åŠ é€‚åˆä¸­å¤§å‹å…¬å¸ä½¿ç”¨ï¼Œå¯¹äºä¸ªäººåŸºæœ¬æ˜¯ç”¨ä¸ä¸Šçš„ã€‚</p>
<h2 id="é’‰é’‰æ–‡æ¡£çŸ¥è¯†åº“">é’‰é’‰æ–‡æ¡£/çŸ¥è¯†åº“</h2>
<p>æ¯ä¸ªå›¢é˜Ÿéƒ½éœ€è¦æœ‰ä¸ªæ–‡æ¡£åº“ï¼Œç±»ä¼¼äº<code>wiki</code>è¿™ç§ã€‚é¡¹ç›®éœ€æ±‚æ–‡æ¡£ã€æ¥å£æ–‡æ¡£ã€æµ‹è¯•æŠ¥å‘Šç­‰è¿™ç§çš„å¯ä»¥åœ¨é¡¹ç›®æ–‡æ¡£ä¸­ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸Šé¢çš„é¡¹ç›®åä½œä¸­ã€‚</p>
<p>é’‰é’‰æ–‡æ¡£/çŸ¥è¯†åº“åˆ™ç”¨äºå­˜æ”¾è®°å½•å›¢é˜Ÿæˆ–è€…éƒ¨é—¨çš„æ–‡æ¡£ï¼Œæ¯”å¦‚æ–°äººæ‰‹å†Œã€å·¥å…·æŒ‡å—ã€è§„èŒƒã€å‘¨æŠ¥ğŸ˜‚ç­‰ç­‰</p>
<p>é’‰é’‰æ–‡æ¡£ç”¨äºäº‘æ•ˆå¯¹æ¥é’‰é’‰ä½¿ç”¨ï¼Œå¯ä»¥æ— ç¼è¿ç§»æˆ–è€…è¯´åˆ‡æ¢ï¼ˆè¯´çš„ä¸å¯¹è¯·è§è°…ï¼‰ï¼Œäº‘æ•ˆè‡ªå¸¦çš„æ˜¯çŸ¥è¯†åº“ã€‚</p>
<h2 id="ä»£ç ç®¡ç†">ä»£ç ç®¡ç†</h2>
<p>å®Œå…¨å¯ä»¥æŠŠå®ƒçœ‹ä½œ<code>GitLab</code>ï¼Œä½¿ç”¨ä¸Šä¹Ÿæ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼Œä¸ç”¨å¤šè¯´äº†ã€‚</p>
<p>å¯¹äº†ï¼Œåˆæ¬¡ä½¿ç”¨ä¼šæœ‰ç¤ºä¾‹é¡¹ç›®</p>
<h2 id="åˆ¶å“ä»“åº“">åˆ¶å“ä»“åº“</h2>
<p>è¦çŸ¥é“ï¼Œå¯¹äºç»„ç»‡å›¢é˜Ÿå…¬å¸è¿™ç§æœ‰è§„æ¨¡çš„ï¼Œæ›´é‡è¦çš„ç®¡ç†ï¼Œè¦èƒ½é€šè¿‡å›¢é˜Ÿåä½œè®©å®ƒä»å¤–é¢çœ‹åƒæ˜¯ä¸€ä¸ªæ•´ä½“ã€‚</p>
<p>åˆ¶å“ä»“åº“æ˜¯ç”¨æ¥å­˜æ”¾æˆ‘ä»¬å¼€å‘ä¸­äº§ç”Ÿçš„å…¬å…±<code>SDK</code>çš„ï¼Œä¸ç®¡æ˜¯<code>Jar</code>è¿˜æ˜¯å‰ç«¯<code>Npm</code>åŒ…éƒ½æ˜¯ï¼Œå¦å¤–è¿˜æœ‰é€šç”¨åˆ¶å“ä»“åº“ï¼Œå¦‚æœå¦æœ‰<code>Go</code>ã€<code>Python</code>éœ€è¦ï¼Œè¦å¦å¯»ä»–æ³•äº†ã€‚</p>
<p>è¿™é‡Œç¼ºå°‘ä¸€ä¸ªDockeré•œåƒä»“åº“ï¼Œå¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘çš„Dockeré•œåƒåº“ï¼Œ<a
href="https://cr.console.aliyun.com/cn-shanghai/instance/dashboard">å®¹å™¨é•œåƒæœåŠ¡</a>ï¼ŒåŒæ ·ä¸ªäººä½¿ç”¨æœ‰é™åˆ¶ï¼Œä½†å®Œå…¨å¤Ÿç”¨ã€‚</p>
<h2 id="æµæ°´çº¿">æµæ°´çº¿</h2>
<p>æ•æ·å¼€å‘çš„å…³é”®å°±åœ¨è¿™äº†ï¼Œç®€å•è¯´å°±æ˜¯é€šè¿‡é…ç½®æ–¹å¼å®ç°ä»£ç åˆ°éƒ¨ç½²å¯ç”¨çš„æµç¨‹ï¼Œç›¸å½“ä¹‹ä¸°å¯Œï¼Œé«˜åº¦å¯è‡ªå®šä¹‰ï¼Œå¾ˆæœ‰è¶£ï¼Œå¯ä»¥ä¸€ç©ã€‚</p>
<p>å‚è€ƒ<a
href="https://www.yuque.com/pig4cloud/pig/ls7u1d">ç™½å«–æ•æ·å¼€å‘ä½“ç³»</a>å…ˆè‡ªå·±ç©ä¸€ç©ï¼Œæˆ‘ä¹‹åä¼šå†™ä¸€ç¯‡æœ‰å…³çš„æ–‡ç« ã€‚</p>
<h2 id="åº”ç”¨äº¤ä»˜beta">åº”ç”¨äº¤ä»˜ï¼ˆBETAï¼‰</h2>
<p>å®˜æ–¹è¯è¯­ï¼šåº”ç”¨ä¸ºæ ¸å¿ƒçš„äº‘åŸç”Ÿåº”ç”¨äº¤ä»˜å¹³å°ï¼Œæä¾›å¯¹å¼€å‘è€…å‹å¥½çš„åº”ç”¨ç¼–æ’ã€ç¯å¢ƒç®¡ç†ã€éƒ¨ç½²è¿ç»´ã€èµ„æºç®¡ç†ã€åº”ç”¨å‘å¸ƒç­‰ä¸€ç«™å¼åº”ç”¨äº¤ä»˜èƒ½åŠ›ã€‚</p>
<p>æˆ‘è¿˜æ²¡ä½“éªŒè¿‡ä¸å¥½è¯´ã€‚</p>
<h2 id="æµ‹è¯•ç®¡ç†">æµ‹è¯•ç®¡ç†</h2>
<p>æµ‹è¯•ç”¨ä¾‹ã€æµ‹è¯•è®¡åˆ’ã€æµ‹è¯•æŠ¥å‘Šè¿™äº›ï¼Œç³»ç»ŸåŒ–çš„ç®¡ç†æµ‹è¯•ã€‚</p>
<h2 id="äº‘ç«¯å¼€å‘beta">äº‘ç«¯å¼€å‘ï¼ˆBETAï¼‰</h2>
<p>è¿™ä¸ªå¯ä»¥ä½“éªŒä¸€ä¸‹ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ä»¿ä½›æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚äº‘ç«¯<code>IDEA</code>è™½ç„¶æœ‰äº›å¡é¡¿ï¼Œä½†è¿˜æ˜¯èƒ½ç”¨ã€‚</p>
<p>è™šæ‹Ÿæœºå¼€å‘éœ€è¦å®¢æˆ·ç«¯ä¹Ÿå°±ç®—äº†ï¼Œè¿™ä¸‹å¥½äº†ç›´æ¥æµè§ˆå™¨å°±å¤Ÿäº†ï¼Œåœ¨æé«˜ç”Ÿäº§åŠ›ä¸Šä¸å¾—ä¸æœã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/äº‘æ•ˆä¼ä¸š.1lwliy89u734.webp"
alt="äº‘æ•ˆä¼ä¸š" />
<figcaption aria-hidden="true">äº‘æ•ˆä¼ä¸š</figcaption>
</figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>äº‘æ•ˆå°±ä»‹ç»åˆ°è¿™ï¼Œè‡ªå·±ä½“éªŒä¸€ä¸‹æ˜¯æœ€å¥½çš„ï¼Œå¾ˆçˆ½çš„ã€‚</p>
]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Git/GitHub</tag>
        <tag>Maven</tag>
        <tag>DevOps</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„æœåŠ¡å™¨ç«Ÿç„¶è¢«æ”»å‡»äº†ï¼</title>
    <url>/article/57d7718e.html</url>
    <content><![CDATA[<p>çœŸçš„æ²¡æƒ³åˆ°æˆ‘çš„æœåŠ¡å™¨çœŸçš„èƒ½è¢«æ”»å‡»å‘€ï¼</p>
<p>ä¹‹å‰ä¹°äº†ä¸¤å°åä¸ºäº‘æœåŠ¡å™¨ï¼Œé…ç½®ä¸é«˜ï¼Œä½†å¤Ÿæˆ‘ç”¨ã€‚</p>
<p>å°±åœ¨ä¸Šå‘¨ï¼Œé¦–å…ˆåä¸ºäº‘-äº‘ç›‘æ§æœåŠ¡ç»™æˆ‘å‘äº†å¥½å‡ æ¡å…³äºæˆ‘çš„æœåŠ¡å™¨<code>CPU</code>é•¿æ—¶é—´ä½¿ç”¨ç‡å¤§äº<code>90%</code>çš„å‘Šè­¦çŸ­ä¿¡ï¼Œæ¥ç€è¿˜æœ‰æˆ‘è£…æœ‰<code>naocs</code>ã€<code>prometheus</code>ã€<code>grafana</code>ï¼Œé…ç½®äº†é’‰é’‰æœºå™¨äººå‘Šè­¦çš„æœåŠ¡å™¨ä¹Ÿå¼€å§‹ä¸æ–­åœ¨é’‰é’‰ç¾¤é‡Œæ¨é€å‘Šè­¦æ¶ˆæ¯ã€‚æˆ‘ä¹Ÿæ˜¯å¾ˆå¥‡æ€ªï¼Ÿè¿™ä¸¤å°æœåŠ¡å™¨è™½ç„¶é…ç½®ä¸é«˜ï¼Œä½†æˆ‘è£…çš„ä¸œè¥¿ï¼Œè·‘çš„ç¨‹åºä¹Ÿä¸è‡³äºæŠŠ<code>CPU</code>è·‘æ»¡å§ï¼</p>
<p>ç¬¬ä¸€å¤©æ™šä¸Šæ”¶åˆ°çš„æ¶ˆæ¯ï¼Œç”µè„‘ä¹Ÿæ²¡åœ¨èº«è¾¹ï¼Œå°±æ²¡å½“å›äº‹ï¼Œå› ä¸ºæˆ‘ä¹Ÿç¡®å®æœ‰ä¸€å‘¨æ—¶é—´æ²¡æœ‰ä¸ŠæœåŠ¡å™¨ç©äº†ï¼Œä»¥ä¸ºå°±æ˜¯æˆ‘çš„æœåŠ¡å‘ç–¯å‘¢ã€‚</p>
<p>ç›´åˆ°ç¬¬äºŒå¤©ï¼Œé—®é¢˜è¿˜ä¸€ç›´éƒ½åœ¨ï¼Œæˆ‘å°±ä¸å¾—ä¸å»çœ‹ä¸€ä¸‹äº†ã€‚</p>
<span id="more"></span>
<p>çœŸçš„æ˜¯ä¸çœ‹ä¸çŸ¥é“ä¸€çœ‹å“ä¸€è·³ï¼Œé¦–å…ˆé€šè¿‡<code>top</code>ï¼Œç›®å‰è¿è¡Œçš„è¿›ç¨‹æƒ…å†µï¼Œé«˜é«˜åœ¨ä¸Šçš„æ˜¯æˆ‘åˆ›å»ºçš„<code>app</code>ç”¨æˆ·è¿è¡Œçš„ä¸€ä¸ªç¥å¥‡çš„ç¨‹åº<code>.xr</code>ï¼Œè¿™æ˜æ˜¾ä¸å¯¹åŠ²å•Šï¼Œæˆ‘æ€ä¹ˆä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Œå»æœç´¢ä¸€ä¸‹æ‰çŸ¥é“ï¼ŒåŸæ¥æ˜¯æŒ–çŸ¿ç—…æ¯’å•Šã€‚è¯¥æ­»çš„ï¼Œè¿˜çœŸå°±æŒ–åˆ°æˆ‘çš„æœåŠ¡å™¨ä¸Šäº†ã€‚</p>
<p>è¿™èƒ½ç­”åº”ï¼Œç›´æ¥å¼€å§‹ååˆ¶ï¼Œå“¦ï½ä¸ï¼Œå…ˆæ‰¾ä¸€ä¸‹è¯¥æ€æ ·æ­£ç¡®çš„è§£å†³ã€‚</p>
<p>å…¶å®åœ¨çœ‹åˆ°æŒ–çŸ¿ç¨‹åºæ˜¯æˆ‘åˆ›å»ºçš„<code>app</code>ç”¨æˆ·è¿è¡Œæ—¶ï¼Œæˆ‘å°±å¤§æ¦‚çŒœåˆ°äº†ï¼Œè¿™ä¸ªç”¨æˆ·ä»…ä»…æ˜¯ä¸ºäº†æˆ‘åœ¨éƒ¨ç½²<code>docker</code>é•œåƒï¼Œæ–¹ä¾¿å¹³å¸¸æŸ¥çœ‹æœåŠ¡æ—¥å¿—ç­‰ä¿¡æ¯çš„ï¼Œæ¯•ç«Ÿä¸èƒ½ä¸€ç›´ä½¿ç”¨<code>root</code>ç”¨æˆ·å˜›ã€‚ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘è´¦å·å¯†ç è®¾ç½®çš„éƒ½æ˜¯<code>app</code>ã€‚ä¹Ÿå°±æ˜¯è¿™ä¸ªè‰ç‡çš„å†³å®šï¼Œå¯¼è‡´äº†ç°åœ¨çš„ç»“æœï¼Œç¡®å®è¯¥ã€‚ã€‚ã€‚</p>
<p>å¤„ç†æ–¹å¼å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚</p>
<p><a
href="https://blog.csdn.net/LeyiChen_X/article/details/119677957">https://blog.csdn.net/LeyiChen_X/article/details/119677957</a></p>
<p><a
href="https://blog.csdn.net/yzf279533105/article/details/107716769">https://blog.csdn.net/yzf279533105/article/details/107716769</a></p>
<p><a
href="https://blog.csdn.net/ch520my/article/details/83657325">https://blog.csdn.net/ch520my/article/details/83657325</a></p>
<p>ç®€å•æè¿°æ˜¯ï¼š</p>
<p>1ã€<code>top</code>åˆ†æè¿è¡Œè¿›ç¨‹</p>
<p>2ã€<code>cd /proc/è¿›ç¨‹å·</code>æ‰¾åˆ°å®é™…ä¸Šè¿è¡Œçš„ç¨‹åº/è„šæœ¬</p>
<p>3ã€ç™»å½•è¯¥ç”¨æˆ·<code>crontab -e</code>ï¼Œåˆ é™¤å¥‡æ€ªçš„å®šæ—¶ä»»åŠ¡</p>
<p>4ã€é€‚å½“åˆ é™¤è¿è¡Œè¿‡ç¨‹äº§ç”Ÿçš„åƒåœ¾æ–‡ä»¶</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€æ˜“çŸ­é“¾æ¥é¡¹ç›®</title>
    <url>/article/68b36ea9.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>å‰é¢å·²ç»é¢„å‘Šï¼ˆ<a
href="https://wnhyang.github.io/article/3df251b7.html">MurmurHashç®—æ³•åˆæ¢</a>ï¼‰è¿‡äº†ï¼Œç°åœ¨ä¹Ÿæ˜¯å®Œæˆäº†ï¼Œä½†æ˜¯ç¡®å®æ—¶æ²¡æ—¶é—´å†™ï¼Œåªèƒ½æŠ½ç©ºâ€œå¡«å‘â€äº†ğŸ¥±</p>
<p>å…³äºè¿™æ¬¡ä»æ‰“ç®—åšåˆ°åšå®Œï¼Œåº”è¯¥æ˜¯æ‰§è¡ŒåŠ›æœ€å¼ºçš„ä¸€æ¬¡ï¼Œä»…ä»…ä¸åˆ°ä¸€å‘¨æ—¶é—´å°±å®Œæˆäº†ï¼Œè¦æ˜¯åœ¨è¿‡å»ï¼Œä¼°è®¡è¿˜è¦æ‹–ä¸ªå‡ å‘¨ç”šè‡³ä¸ªæŠŠæœˆã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒï¼š</h2>
<p><a
href="https://mp.weixin.qq.com/s/YTrBaERcyjvw7A0Fg2Iegw">é«˜æ€§èƒ½çŸ­é“¾è®¾è®¡</a></p>
<p><a
href="https://blog.csdn.net/tianyaleixiaowu/article/details/74739827">BloomFilterå¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨</a></p>
<span id="more"></span>
<h1 id="è¯´æ˜">è¯´æ˜</h1>
<p>å…³äºè¿™ç¯‡<a
href="https://mp.weixin.qq.com/s/YTrBaERcyjvw7A0Fg2Iegw">é«˜æ€§èƒ½çŸ­é“¾è®¾è®¡</a>ï¼ˆä¸‹é¢æåˆ°çš„æ–‡ç« éƒ½æ˜¯è¿™ä¸ªï¼‰ï¼Œå†™çš„éå¸¸å¥½ï¼Œéå¸¸å»ºè®®æœ‰å…´è¶£çš„è®¤è®¤çœŸçœŸçœ‹å®Œã€‚çœ‹å®Œäº†è¿™ç¯‡æ–‡ç« ï¼Œè§£ç­”äº†æˆ‘å¯¹ç°åœ¨å‡ºç°é¢‘æ¬¡è¶Šæ¥è¶Šé«˜çš„çŸ­é“¾æ¥çš„å¾ˆå¤šç–‘æƒ‘ã€‚</p>
<p>æœ¬æ¬¡åšçš„ç®€æ˜“çŸ­é“¾æ¥é¡¹ç›®å°±æ˜¯åŸºäºæ–‡ç« ä¸­è¯´çš„å“ˆå¸Œç®—æ³•åšçš„ï¼Œä½¿ç”¨çš„ä¾¿æ˜¯<code>MurmurHash</code>ç®—æ³•ï¼Œå¹¶ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ä¼˜åŒ–ã€‚</p>
<p>æµç¨‹å¦‚ä¸‹ï¼ˆå›¾ç‰‡æ¥æºäºä¸Šé¢çš„æ–‡ç« ï¼‰</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.11ayt47rjc9c.webp"
alt="çŸ­é“¾æµç¨‹å›¾" />
<figcaption aria-hidden="true">çŸ­é“¾æµç¨‹å›¾</figcaption>
</figure>
<p>è¦ç”¨åˆ°çš„å·¥å…·ï¼š</p>
<p><a
href="https://krisives.github.io/bloom-calculator/">è®¡ç®—å¸ƒéš†è¿‡æ»¤å™¨å¤§å°</a></p>
<p><a
href="http://tool.p2hp.com/tool-convert-hexadecimal/">åœ¨çº¿è¿›åˆ¶è½¬æ¢</a></p>
<h1 id="æ•°æ®åº“è®¾è®¡">æ•°æ®åº“è®¾è®¡</h1>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `short_url_map` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `lurl` <span class="type">varchar</span>(<span class="number">160</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é•¿åœ°å€&#x27;</span>,</span><br><span class="line">  `surl` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çŸ­åœ°å€&#x27;</span>,</span><br><span class="line">  `gmt_create` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<p>æ–‡ç« ä¸­æ•°æ®åº“æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸»é”®ç±»å‹ä¸º
<code>unsigned int</code>ï¼Œå³æ— ç¬¦å·æ•°ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥ä¸<code>MurmurHash</code>ç®—æ³•çš„<code>32</code>ä½å¯¹åº”ä¸Šäº†ï¼Œä½†æ˜¯<code>Java</code>ä¸æ”¯æŒæ— ç¬¦å·æ•°ï¼Œå¦‚æœä½¿ç”¨<code>int/Integer</code>ç±»å‹å°±æœ‰å¯èƒ½ä¼šå‡ºç°æº¢å‡ºæƒ…å†µï¼ˆè™½ç„¶å¯èƒ½æ€§å¾ˆå°ï¼Œå› ä¸ºæ¯•ç«Ÿè‡³å°‘è¦æœ‰<span
class="math inline">\(2^{32}\)</span>æ¡æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¦æœ‰<span
class="math inline">\(2^{32}\)</span>ç§é“¾æ¥ï¼Œå¾ˆéš¾çš„å•¦ï¼‰ï¼Œä¸ºäº†é¿å…æœ‰å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ï¼Œæˆ‘çš„æ•°æ®åº“è®¾è®¡å¦‚ä¸‹</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `url_map` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®id&#x27;</span>,</span><br><span class="line">  `surl` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çŸ­é“¾æ¥&#x27;</span>,</span><br><span class="line">  `lurl` <span class="type">varchar</span>(<span class="number">160</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é•¿é“¾æ¥&#x27;</span>,</span><br><span class="line">  `valid` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æœ‰æ•ˆ&#x27;</span>,</span><br><span class="line">  `create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_surl` (`surl`) <span class="keyword">USING</span> BTREE COMMENT <span class="string">&#x27;çŸ­é“¾æ¥å”¯ä¸€ç´¢å¼•&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">3</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<p>æŠŠ<code>id</code>æ”¹ä¸ºäº†<code>bigint</code>ï¼ŒåŠ ä¸Šäº†æˆ‘ä¹ æƒ¯ä½¿ç”¨çš„ä¸‰å­—æ®µï¼ˆ<code>valid</code>ã€<code>create_time</code>ã€<code>update_time</code>ï¼‰ï¼Œè¿˜æœ‰çŸ­é“¾æ¥çš„å”¯ä¸€ç´¢å¼•ã€‚</p>
<h1 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h1>
<p>ä¸»è¦çš„ä¾èµ–è¿˜æ˜¯è¿™ä¸ªï¼Œä¸ä»…æœ‰å¿…è¦çš„<code>MurmurHash</code>ç®—æ³•ï¼Œè¿˜æœ‰å¸ƒéš†è¿‡æ»¤å™¨å¯ç›´æ¥ä½¿ç”¨ï¼ˆé‡ç‚¹è¯´æ˜ï¼ï¼ï¼è¿™ç§å¸ƒéš†è¿‡æ»¤å™¨çš„ä½¿ç”¨æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºæ¯•ç«Ÿæ˜¯å†…å­˜å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé‡å¯å³æ— æ•ˆäº†ï¼‰ï¼Œå¹¶ä¸é€‚ç”¨åˆ†å¸ƒå¼åœºæ™¯ï¼Œæ‰€ä»¥è¿™æ ·ä½¿ç”¨ä¸æ€ä¹ˆä¸¥è°¨ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>30.1-jre<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ä¾èµ–æˆ‘å°±ä¸ç²˜äº†ã€‚ä¸ºäº†åŠ å¿«å¼€å‘ï¼Œä½¿ç”¨äº†<a
href="https://wnhyang.github.io/article/52ebbcb.html">Mybatis-Plus-Generator</a>å¿«é€Ÿç”Ÿæˆä»£ç ï¼Œæ‰€ä»¥å·¥ä½œé‡å°±å‡å°‘å¾ˆå¤šäº†ï¼Œå‰©ä¸‹çš„åªæ˜¯<code>MurMurHash</code>ç®—æ³•ã€<code>BloomFilter</code>ã€62è¿›åˆ¶è½¬æ¢è¿™äº›äº†ã€‚</p>
<h1 id="ä»£ç ">ä»£ç </h1>
<h2 id="æ¥å£">æ¥å£</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * å‰ç«¯æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2022-08-22 02:52:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/urlMap&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UrlMapController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REDIRECT</span> <span class="operator">=</span> <span class="string">&quot;redirect:&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UrlMapService urlMapService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;sUrl&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">redirect</span><span class="params">(<span class="meta">@PathVariable(&quot;sUrl&quot;)</span> String sUrl, HttpServletResponse response)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;é‡å®šå‘&#123;&#125;&quot;</span>, sUrl);</span><br><span class="line">        <span class="keyword">return</span> REDIRECT + urlMapService.redirect(sUrl);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> R&lt;String&gt; <span class="title function_">urlMap</span><span class="params">(<span class="meta">@RequestBody</span> Url url)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;ç”ŸæˆçŸ­é“¾æ¥&#123;&#125;&quot;</span>, url);</span><br><span class="line">        <span class="keyword">return</span> urlMapService.urlMap(url.getUrl());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å…±ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªç”ŸæˆçŸ­é“¾æ¥ï¼Œä¸€ä¸ªçŸ­é“¾æ¥é‡å®šå‘ã€‚</p>
<h2 id="æ ¸å¿ƒä»£ç ">æ ¸å¿ƒä»£ç </h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * æœåŠ¡å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2022-08-22 02:52:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UrlMapServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UrlMapMapper, UrlMap&gt; <span class="keyword">implements</span> <span class="title class_">UrlMapService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UrlMapMapper urlMapMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">HashFunction</span> <span class="variable">HASH_FUNCTION</span> <span class="operator">=</span> Hashing.murmur3_32();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> BloomFilter&lt;String&gt; BLOOM_FILTER = BloomFilter.create(Funnels.stringFunnel(Charset.defaultCharset()), Encoder62.SIZE);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">STR</span> <span class="operator">=</span> <span class="string">&quot;ZRCTGD&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">redirect</span><span class="params">(String sUrl)</span> &#123;</span><br><span class="line">        <span class="type">UrlMap</span> <span class="variable">urlMap</span> <span class="operator">=</span> urlMapMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;UrlMap&gt;().eq(<span class="string">&quot;surl&quot;</span>, sUrl));</span><br><span class="line">        <span class="keyword">return</span> urlMap.getLurl().replaceAll(STR, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> R&lt;String&gt; <span class="title function_">urlMap</span><span class="params">(String url)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sUrl</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;url:&#123;&#125;&quot;</span>, url);</span><br><span class="line">            <span class="comment">// 1ã€MurmurHashåŠ å¯†</span></span><br><span class="line">            <span class="type">HashCode</span> <span class="variable">hashCode</span> <span class="operator">=</span> HASH_FUNCTION.hashString(url, StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2ã€çŸ­é“¾</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                sUrl = Encoder62.encode62(hashCode.padToLong());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            log.info(<span class="string">&quot;sUrl:&#123;&#125;&quot;</span>, sUrl);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3ã€å¸ƒéš†è¿‡æ»¤å™¨</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">contain</span> <span class="operator">=</span> BLOOM_FILTER.mightContain(sUrl);</span><br><span class="line"></span><br><span class="line">            <span class="type">UrlMap</span> <span class="variable">urlMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlMap</span>();</span><br><span class="line">            urlMap.setSurl(sUrl);</span><br><span class="line">            urlMap.setLurl(url);</span><br><span class="line">            <span class="keyword">if</span> (contain) &#123;</span><br><span class="line">                url += STR;</span><br><span class="line">                log.info(<span class="string">&quot;contain,new url:&#123;&#125;&quot;</span>, url);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                urlMapMapper.insert(urlMap);</span><br><span class="line">                BLOOM_FILTER.put(sUrl);</span><br><span class="line">                log.info(<span class="string">&quot;not contain,put(&#123;&#125;)&quot;</span>, sUrl);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> R.ok(sUrl);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±æ˜¯æ¥å£çš„ä¸šåŠ¡å®ç°</p>
<ul>
<li><p>é‡å®šå‘æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡çŸ­é“¾æ¥æŸ¥è¯¢é•¿é“¾æ¥ï¼Œç§»é™¤å¯èƒ½å­˜åœ¨çš„è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼ˆç†è®ºä¸Šæœ‰å¯èƒ½ä¼šè¯¯åˆ ï¼Œå…³é”®åœ¨äºè‡ªå®šä¹‰å­—ç¬¦ä¸²å®šä¹‰ï¼‰ã€‚</p></li>
<li><p>ç”ŸæˆçŸ­é“¾æ¥æµç¨‹å¦‚ä¸Šå›¾ï¼Œå¯¹åº”ä»£ç çœ‹å³å¯</p></li>
</ul>
<h2 id="è¿›åˆ¶è½¬æ¢">62è¿›åˆ¶è½¬æ¢</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-08-22 15:47</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Encoder62</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * BloomFilteré¢„æœŸæ’å…¥æ¬¡æ•°</span></span><br><span class="line"><span class="comment">     * 1L &lt;&lt; 16 &lt;&lt; 16</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">SIZE</span> <span class="operator">=</span> <span class="number">1L</span> &lt;&lt; <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SCALE</span> <span class="operator">=</span> <span class="number">62</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">char</span>[] ARRAYS = <span class="string">&quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>.toCharArray();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encode62</span><span class="params">(<span class="type">long</span> num)</span> &#123;</span><br><span class="line">        <span class="comment">// if (num &gt; SIZE) &#123;</span></span><br><span class="line">        <span class="comment">//     throw new RuntimeException(&quot;num:&quot; + num + &quot;è¿‡å¤§&quot;);</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">remain</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            remain = (<span class="type">int</span>) (num % SCALE);</span><br><span class="line">            sb.append(ARRAYS[remain]);</span><br><span class="line">            num /= SCALE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.reverse().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œ<code>BloomFilter</code>ç†è®ºä¸Šåº”è¯¥è®¾ç½®<span
class="math inline">\(2^{32}\)</span>ï¼Œä½†æ˜¯é€šè¿‡è®¡ç®—å¯çŸ¥</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/image.3qdqzr8sm140.webp"
alt="å¸ƒéš†è¿‡æ»¤å™¨å¤§å°è®¡ç®—" />
<figcaption aria-hidden="true">å¸ƒéš†è¿‡æ»¤å™¨å¤§å°è®¡ç®—</figcaption>
</figure>
<p>éœ€è¦3.6Gå†…å­˜ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è¿™æ ·è®¾ç½®å¥½ï¼Œç›´æ¥å †æº¢å‡ºï¼Œå¤ªå¯ç¬‘äº†ğŸ˜‚</p>
<p>æ‰€ä»¥æˆ‘æœ€åè®¾ç½®çš„æ˜¯<span
class="math inline">\(2^{16}\)</span>ï¼Œè¿˜å¯ä»¥æ¥å—</p>
<h1 id="æµ‹è¯•">æµ‹è¯•</h1>
<p>å°±ä¸¤ä¸ªæ¥å£ï¼Œç®€å•æµ‹è¯•ä¸€ä¸‹å°±å¥½äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©çš„</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å…³äºç”ŸæˆçŸ­é“¾æ¥ï¼Œé™¤äº†Hashç®—æ³•è¿˜æœ‰è‡ªå¢åºåˆ—ç®—æ³•ç­‰æ–¹æ³•ï¼Œæ–‡ç« ä¸­è¿˜ç»™å‡ºäº†â€œé«˜æ€§èƒ½çŸ­é“¾çš„æ¶æ„è®¾è®¡â€ï¼Œæˆ‘è¿˜ä¸æ˜¯å¤ªæ‡‚ï¼Œå¯ä»¥åç»­å›çœ‹ä¸€ä¸‹ğŸ˜¯</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>é¡¹ç›®</tag>
        <tag>Mybatis/Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•</title>
    <url>/article/b7e144d1.html</url>
    <content><![CDATA[<h1 id="å®šä¹‰">å®šä¹‰</h1>
<p>ç®—æ³•æ˜¯è§£å†³ç‰¹å®šé—®é¢˜æ±‚è§£æ­¥éª¤çš„æè¿°ï¼Œåœ¨è®¡ç®—æœºä¸­è¡¨ç°ä¸ºæŒ‡ä»¤çš„æœ‰é™åºåˆ—ï¼Œå¹¶ä¸”æ¯æ¡æŒ‡ä»¤è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œã€‚</p>
<h1 id="ç®—æ³•ç‰¹æ€§">ç®—æ³•ç‰¹æ€§</h1>
<p>ç®—æ³•å…·æœ‰äº”ä¸ªåŸºæœ¬ç‰¹æ€§ï¼šè¾“å…¥ã€è¾“å‡ºã€æœ‰ç©·æ€§ã€ç¡®å®šæ€§ã€å¯è¡Œæ€§ã€‚</p>
<span id="more"></span>
<h1 id="è¾“å…¥è¾“å‡º">è¾“å…¥è¾“å‡º</h1>
<p>ç®—æ³•è‡³å°‘æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºã€‚</p>
<h1 id="æœ‰ç©·æ€§">æœ‰ç©·æ€§</h1>
<p>æœ‰ç©·æ€§ï¼šæŒ‡ç®—æ³•åœ¨æ‰§è¡Œæœ‰é™çš„æ­¥éª¤ä¹‹åï¼Œè‡ªåŠ¨ç»“æŸè€Œä¸ä¼šå‡ºç°æ— é™å¾ªç¯ï¼Œå¹¶ä¸”æ¯ä¸ªæ­¥éª¤åœ¨å¯ä»¥æ¥å—çš„æ—¶é—´å†…å®Œæˆã€‚</p>
<h1 id="ç¡®å®šæ€§">ç¡®å®šæ€§</h1>
<p>ç¡®å®šæ€§ï¼šç®—æ³•çš„æ¯ä¸ªæ­¥éª¤éƒ½å…·æœ‰ç¡®å®šçš„å«ä¹‰ï¼Œä¸ä¼šå‡ºç°äºŒä¹‰æ€§ã€‚</p>
<h1 id="å¯è¡Œæ€§">å¯è¡Œæ€§</h1>
<p>å¯è¡Œæ€§ï¼šç®—æ³•çš„æ¯ä¸€æ­¥éƒ½å¿…é¡»æ˜¯å¯è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€æ­¥éƒ½èƒ½å¤Ÿé€šè¿‡æ‰§è¡Œæœ‰é™æ¬¡æ•°å®Œæˆã€‚</p>
<h1 id="ç®—æ³•è®¾è®¡è¦æ±‚">ç®—æ³•è®¾è®¡è¦æ±‚</h1>
<h1 id="æ­£ç¡®æ€§">æ­£ç¡®æ€§</h1>
<p>æ­£ç¡®æ€§ï¼šç®—æ³•çš„æ­£ç¡®æ€§æ˜¯æŒ‡ç®—æ³•è‡³å°‘åº”è¯¥å…·æœ‰è¾“å…¥ã€è¾“å‡ºå’ŒåŠ å·¥å¤„ç†æ— æ­§ä¹‰æ€§ã€èƒ½æ­£ç¡®åæ˜ é—®é¢˜çš„éœ€æ±‚ã€èƒ½å¤Ÿå¾—åˆ°é—®é¢˜çš„æ­£ç¡®ç­”æ¡ˆã€‚
å¤§ä½“åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š</p>
<ol type="1">
<li>ç®—æ³•ç¨‹åºæ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚</li>
<li>ç®—æ³•ç¨‹åºå¯¹äºåˆæ³•çš„è¾“å…¥æ•°æ®èƒ½å¤Ÿäº§ç”Ÿæ»¡è¶³è¦æ±‚çš„è¾“å‡ºç»“æœã€‚</li>
<li>ç®—æ³•ç¨‹åºå¯¹äºéæ³•çš„è¾“å…¥æ•°æ®èƒ½å¤Ÿå¾—å‡ºæ»¡è¶³è§„æ ¼è¯´æ˜çš„ç»“æœã€‚</li>
<li>ç®—æ³•ç¨‹åºå¯¹äºç²¾å¿ƒé€‰æ‹©çš„ï¼Œç”šè‡³åˆéš¾çš„æµ‹è¯•æ•°æ®éƒ½æœ‰æ»¡è¶³è¦æ±‚çš„è¾“å‡ºç»“æœã€‚</li>
</ol>
<h1 id="å¯è¯»æ€§">å¯è¯»æ€§</h1>
<p>å¯è¯»æ€§ï¼šç®—æ³•è®¾è®¡çš„å¦ä¸€ä¸ªç›®çš„æ˜¯ä¸ºäº†ä¾¿äºé˜…è¯»ã€ç†è§£å’Œäº¤æµã€‚</p>
<h1 id="å¥å£®æ€§">å¥å£®æ€§</h1>
<p>å¥å£®æ€§ï¼šå½“è¾“å…¥æ•°æ®ä¸åˆæ³•æ—¶ï¼Œç®—æ³•ä¹Ÿèƒ½åšå‡ºç›¸å…³å¤„ç†ï¼Œè€Œä¸æ˜¯äº§ç”Ÿå¼‚å¸¸æˆ–è«åå…¶å¥¥å¦™çš„ç»“æœã€‚</p>
<h1 id="æ—¶é—´æ•ˆç‡é«˜å’Œå­˜å‚¨é‡ä½">æ—¶é—´æ•ˆç‡é«˜å’Œå­˜å‚¨é‡ä½</h1>
<p>è®¾è®¡ç®—æ³•åº”è¯¥å°½é‡æ»¡è¶³æ—¶é—´æ•ˆç‡é«˜å’Œå­˜å‚¨é‡ä½çš„éœ€æ±‚ã€‚</p>
<h1 id="ç®—æ³•æ•ˆç‡åº¦é‡æ–¹æ³•">ç®—æ³•æ•ˆç‡åº¦é‡æ–¹æ³•</h1>
<h1 id="äº‹åç»Ÿè®¡æ³•">äº‹åç»Ÿè®¡æ³•</h1>
<p>äº‹åç»Ÿè®¡æ–¹æ³•:è¿™ç§æ–¹æ³•ä¸»è¦æ˜¯é€šè¿‡è®¾è®¡å¥½çš„æµ‹è¯•ç¨‹åºå’Œæ•°æ®ï¼Œåˆ©ç”¨è®¡ç®—æœºè®¡æ—¶å™¨å¯¹ä¸åŒç®—æ³•ç¼–åˆ¶çš„ç¨‹åºçš„è¿è¡Œæ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®šç®—æ³•æ•ˆç‡çš„é«˜ä½ã€‚</p>
<h1 id="äº‹å‰åˆ†æä¼°ç®—æ³•">äº‹å‰åˆ†æä¼°ç®—æ³•</h1>
<p>äº‹å‰åˆ†æä¼°ç®—æ³•ï¼šåœ¨è®¡ç®—æœºç¨‹åºç¼–åˆ¶å‰ï¼Œä¾æ®ç»Ÿè®¡æ–¹æ³•å¯¹ç®—æ³•è¿›è¡Œä¼°ç®—ã€‚</p>
<h1 id="ç®—æ³•æ—¶é—´å¤æ‚åº¦">ç®—æ³•æ—¶é—´å¤æ‚åº¦</h1>
<h1 id="å®šä¹‰-1">å®šä¹‰</h1>
<p>åœ¨è¿›è¡Œç®—æ³•åˆ†ææ—¶ï¼Œè¯­å¥æ€»çš„æ‰§è¡Œæ¬¡æ•°T(n)æ˜¯å…³äºé—®é¢˜è§„æ¨¡nçš„å‡½æ•°ï¼Œè¿›è¡Œåˆ†æT(n)éšnçš„å˜åŒ–æƒ…å†µå¹¶ç¡®å®šT(n)çš„æ•°é‡çº§ã€‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ç®—æ³•çš„æ—¶é—´é‡åº¦ï¼Œè®°ä½œï¼šT(n)=O(f(n))ã€‚å®ƒè¡¨ç¤ºéšé—®é¢˜è§„æ¨¡nå¢å¤§ï¼Œç®—æ³•æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œç§°ä½œç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°ä¸ºæ—¶é—´å¤æ‚åº¦ã€‚å…¶ä¸­f(n)æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°ã€‚</p>
<h1 id="æ¨å¯¼å¤§oé˜¶æ–¹æ³•">æ¨å¯¼å¤§Oé˜¶æ–¹æ³•</h1>
<ol type="1">
<li>ç”¨å¸¸æ•°1å–ä»£è¿è¡Œæ—¶é—´ä¸­çš„æ‰€æœ‰åŠ æ³•å¸¸æ•°ã€‚</li>
<li>åœ¨ä¿®æ”¹åçš„è¿è¡Œæ¬¡æ•°å‡½æ•°ä¸­ï¼Œåªä¿ç•™æœ€é«˜é˜¶é¡¹ã€‚</li>
<li>å¦‚æœæœ€é«˜é˜¶é¡¹å­˜åœ¨ä¸”ä¸æ˜¯1ï¼Œåˆ™å»é™¤ä¸è¿™ä¸ªé¡¹ç›¸ä¹˜çš„å¸¸æ•°ã€‚å¾—åˆ°çš„ç»“æœå°±æ˜¯å¤§Oé˜¶ã€‚</li>
</ol>
<h1 id="å¸¸æ•°é˜¶çº¿æ€§é˜¶å¯¹æ•°é˜¶ç­‰">å¸¸æ•°é˜¶ã€çº¿æ€§é˜¶ã€å¯¹æ•°é˜¶ç­‰</h1>
<h1 id="å¸¸è§çš„æ—¶é—´å¤æ‚åº¦">å¸¸è§çš„æ—¶é—´å¤æ‚åº¦</h1>
<table>
<thead>
<tr class="header">
<th>æ‰§è¡Œæ¬¡æ•°</th>
<th>é˜¶</th>
<th>éæ­£å¼æœ¯è¯­</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(12\)</span></td>
<td>O(<span class="math inline">\(1\)</span>)</td>
<td>å¸¸æ•°é˜¶</td>
</tr>
<tr class="even">
<td><span class="math inline">\(2n+3\)</span></td>
<td>O(<span class="math inline">\(n\)</span>)</td>
<td>çº¿æ€§é˜¶</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(3n^2+2n+1\)</span></td>
<td>O(<span class="math inline">\(n^2\)</span>)</td>
<td>å¹³æ–¹é˜¶</td>
</tr>
<tr class="even">
<td><span class="math inline">\(5log_2n+20\)</span></td>
<td>O(<span class="math inline">\(logn\)</span>)</td>
<td>å¯¹æ•°é˜¶</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(2n+3nlog_2n+19\)</span></td>
<td>O(<span class="math inline">\(nlogn\)</span>)</td>
<td>nlogné˜¶</td>
</tr>
<tr class="even">
<td><span class="math inline">\(6n^3+2n^2+3n+4\)</span></td>
<td>O(<span class="math inline">\(n^3\)</span>)</td>
<td>ç«‹æ–¹é˜¶</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(2^n\)</span></td>
<td>O(<span class="math inline">\(2^n\)</span>)</td>
<td>æŒ‡æ•°é˜¶</td>
</tr>
</tbody>
</table>
<p>O(<span class="math inline">\(1\)</span>)&lt; O(<span
class="math inline">\(1logn\)</span>)&lt; O(<span
class="math inline">\(n\)</span>)&lt; O(<span
class="math inline">\(nlogn\)</span>)&lt; O(<span
class="math inline">\(n^2\)</span>)&lt; O(<span
class="math inline">\(n^3\)</span>)&lt; O(<span
class="math inline">\(2^n\)</span>)&lt; O(<span
class="math inline">\(n!\)</span>)&lt; O(<span
class="math inline">\(n^n\)</span>)</p>
<p><a
href="https://www.jianshu.com/p/def16ee5c8c4">æ˜¾ç¤ºé—®é¢˜ï¼Œå‚è€ƒ</a></p>
<h1 id="æœ€åæƒ…å†µä¸å¹³å‡æƒ…å†µ">æœ€åæƒ…å†µä¸å¹³å‡æƒ…å†µ</h1>
<p>æœ€åæƒ…å†µè¿è¡Œæ—¶é—´æ˜¯ä¸€ç§ä¿è¯ï¼Œé‚£å°±æ˜¯è¿è¡Œæ—¶é—´å°†ä¸ä¼šåœ¨åäº†ã€‚åœ¨åº”ç”¨ä¸­ï¼Œè¿™æ˜¯ä¸€ç§æœ€é‡è¦çš„éœ€æ±‚ï¼Œé€šå¸¸ï¼Œé™¤éç‰¹åˆ«æŒ‡å®šï¼Œæˆ‘ä»¬æåˆ°çš„è¿è¡Œæ—¶é—´éƒ½æ˜¯æœ€åæƒ…å†µçš„è¿è¡Œæ—¶é—´ã€‚</p>
<p>å¹³å‡è¿è¡Œæ—¶é—´æ˜¯æ‰€æœ‰æƒ…å†µä¸­æœ€æœ‰æ„ä¹‰ï¼Œå› ä¸ºå®ƒæ˜¯æœŸæœ›çš„è¿è¡Œæ—¶é—´ã€‚</p>
<h1 id="ç®—æ³•ç©ºé—´å¤æ‚åº¦">ç®—æ³•ç©ºé—´å¤æ‚åº¦</h1>
<p>ç®—æ³•ç©ºé—´å¤æ‚åº¦é€šè¿‡è®¡ç®—ç®—æ³•æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å®ç°ï¼Œç®—æ³•ç©ºé—´å¤æ‚åº¦çš„è®¡ç®—å…¬å¼è®°ä½œï¼šS(n)=O(f(n)ï¼Œå…¶ä¸­ï¼Œnä¸ºé—®é¢˜è§„æ¨¡ï¼Œf(n)ä¸ºè¯­å¥å…³äºnæ‰€å å­˜å‚¨ç©ºé—´çš„å‡½æ•°ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ä¼˜åŒ–ç®—æ³•ï¼Œå¯¹äºè®¡ç®—ç§‘å­¦å’Œç¨‹åºè®¾è®¡æœ‰å¾ˆå¤§æ„ä¹‰ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰€æœ‰äººéƒ½åœ¨æ•™ä½ æ€ä¹ˆæˆåŠŸï¼Œä½†æ²¡æœ‰äººå‘Šè¯‰ä½ æ€ä¹ˆæ¥å—å¤±è´¥</title>
    <url>/article/f7365684.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘å¥½å¤šè€ƒç ”çš„åŒå­¦éƒ½è¿›è¡Œå¤è¯•äº†ï¼Œå½“ç„¶æœ‰äººæ¬¢å–œæœ‰äººå¿§ï¼Œæ²¡å¸Œæœ›çš„åŒå­¦ä¹Ÿå·²ç»å¼€å§‹è°‹åˆ’æ–°å‡ºè·¯äº†ã€‚ä»Šå¹´è€ƒç ”äººæ•°è¾¾åˆ°äº†æƒŠäººçš„450wï¼ŒæŒ‰å¾€å¸¸çš„1/3çš„å½•å–ç‡æ¥è®²ï¼Œå¿…ç„¶æœ‰è¿‘300wè€ƒç”Ÿè½æ¦œã€‚ä¹Ÿå› ä¸ºç«äº‰æ¿€çƒˆï¼Œä»Šå¹´çš„åˆ†æ•°çº¿ä¹Ÿè¢«æ‹”å¾—å¾ˆé«˜ï¼Œè€ƒç ”çš„éš¾åº¦ä¹Ÿå¼‚å¸¸çš„å¤§ã€‚æ›´å¯æ€•çš„æ˜¯å¾€å±Šç‡ï¼Œä»ä¸€äº›æ•°æ®çœ‹åˆ°ï¼Œä»Šå¹´çš„å¾€å±Šè€ƒç ”çš„æ¯”ä¾‹ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œç”šè‡³æœ‰äº›è¾¹å·¥ä½œè¾¹è€ƒç ”çš„ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/cloud-picture/1000.310si30wlx80.webp"
alt="2020-2021å…¨å›½è€ƒç ”æŠ¥åäººæ•°" />
<figcaption aria-hidden="true">2020-2021å…¨å›½è€ƒç ”æŠ¥åäººæ•°</figcaption>
</figure>
<span id="more"></span>
<h1 id="æ‚è°ˆ">æ‚è°ˆ</h1>
<p>ç»å†è¿‡é«˜è€ƒçš„éƒ½çŸ¥é“ï¼Œç«äº‰æ˜¯å¤šä¹ˆæ¿€çƒˆã€‚å¦‚ä»Šé«˜è€ƒè¿‡å»äº†ï¼Œè€ƒç ”æ¥äº†ï¼Œåˆå¼€å§‹æ–°ä¸€è½®çš„ç«äº‰äº†ï¼</p>
<p>è€ƒç ”äººæœ‰å¤šä¹ˆä¸å®¹æ˜“ï¼Œç›¸ä¿¡éƒ½æœ‰ç›®å…±ç¹ï¼Œæ—©å‡ºæ™šå½’ï¼Œå‡ ä¹æ²¡æœ‰å¨±ä¹æ—¶é—´ï¼Œæ¯å¤©çš„ä»»åŠ¡å°±æ˜¯å­¦ä¹ ã€å­¦ä¹ ã€è¿˜æ˜¯å­¦ä¹ ã€‚ä½†å‡¡æ˜¯åœ¨å­¦æ ¡ã€è§åˆ°è¿‡å¹´åº•çš„å›¾ä¹¦é¦†ï¼Œå°±çŸ¥é“è€ƒç ”äººæœ‰å¤šä¹ˆåŠªåŠ›ã€‚å°¤å…¶æ˜¯åœ¨å¹´åº•ï¼Œå³å°†è¿æ¥å†³æˆ˜çš„æ—¶å€™ï¼Œæ›´æ˜¯å¦‚æ­¤ã€‚å›¾ä¹¦é¦†å’Œè‡ªä¹ å®¤åˆ°å¤„éƒ½æ˜¯åŠªåŠ›çš„äººï¼Œä¸é«˜è€ƒç›¸æ¯”çœŸæ˜¯æœ‰è¿‡ä¹‹è€Œæ— ä¸åŠå•Šï¼</p>
<p>å¯å°½ç®¡è¿™æ ·äº†ï¼Œè¿˜æ˜¯è¦é¢å¯¹ç°å®ï¼Œæ¥å—ç°å®ã€‚ä»Šå¹´æ˜¯è€ƒç ”æœ€éš¾çš„ä¸€å¹´ï¼Œä¹Ÿæ˜¯å°±ä¸šæœ€éš¾çš„ä¸€å¹´ï¼Œå¤–åŠ ä¸Šç–«æƒ…å½±å“ï¼Œè‚¡å¸‚è·Œå®•ï¼Œå…¨ç¤¾ä¼šç»æµä¸æ™¯æ°”æ˜¾è€Œæ˜“è§ã€‚ä»Šå¹´æ‰€æœ‰çš„æ±‚èŒè€…éƒ½åœ¨æ„Ÿå¹æ²¡æœ‰é‡‘ä¸‰é“¶å››ï¼ŒæŠ•äº†å¾ˆå¤šç®€å†éƒ½çŸ³æ²‰å¤§æµ·ï¼Œæ²¡æœ‰å›å“ã€‚ä½†æ˜¯ä»Šå¹´åˆæœ‰è¿™ä¹ˆå¤šçš„æ¯•ä¸šç”Ÿï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æˆ‘ä¸å–œæ¬¢è´©å–ç„¦è™‘ï¼Œä½†æˆ‘åˆæ˜¯åˆä¸è‡ªç„¶çš„æµéœ²ç„¦è™‘ã€‚å“ã€‚ã€‚ã€‚</p>
<p>ä¹‹å‰åœ¨ä¸€ä¸ªå…¬ä¼—è¦é‡Œçœ‹è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå¤§æ¦‚è®²çš„æ˜¯ä¸€ä¸ªå¤§å­¦ç”Ÿè¿˜æ˜¯ç ”ç©¶ç”Ÿï¼Œåœ¨å­¦æ ¡å› ä¸ºé‡åˆ°äº†æŒ«æŠ˜ï¼Œæ„å¤–æ­»äº¡çš„äº‹ã€‚å¾ˆæ‚²æƒ¨çš„æ•…äº‹ï¼Œä½†ç»å¯¹çœŸå®ã€‚ä»–èƒŒæ™¯æ˜¯ï¼Œä»å°è¢«æ•™è‚²è¦è·å¾—æˆåŠŸï¼Œè¦å‡ºç±»æ‹”èƒï¼Œä»–ç¡®å®ä¹Ÿåšåˆ°äº†ï¼Œæ˜¯é‚£ç§â€œåˆ«äººå®¶çš„å­©å­â€ã€‚ä¹Ÿæ˜¯å› ä¸ºä»å°åŸ¹å…»äº†æˆåŠŸçš„ç›®æ ‡ï¼Œå¹¶ä¸”ç¡®å®æ²¡ç»å†è¿‡å¤šä¹ˆå¤§çš„å¤±è´¥ï¼Œæ‰€ä»¥å¿ƒç†æ‰¿å—èƒ½åŠ›ä¸è¶³ï¼Œéš¾ä»¥æ¥å—å¤±è´¥ï¼Œæœ€ç»ˆå¯¼è‡´äº†æ‚²å‰§çš„ç»“æœã€‚æ–‡ç« é‡Œæœ‰ä¸€å¥è¯æˆ‘ä¸€ç›´è®°å¾—â€œæ‰€æœ‰äººéƒ½åœ¨æ•™ä½ æ€ä¹ˆæˆåŠŸï¼Œä½†æ²¡æœ‰äººå‘Šè¯‰ä½ æ€ä¹ˆæ¥å—å¤±è´¥â€ã€‚æ˜¯å•Šï¼Œä»å°èº«è¾¹çš„äººéƒ½è¦æˆ‘ä»¬å¥½å¥½å­¦ä¹ ã€å¤©å¤©å‘ä¸Šï¼Œæ¯•ä¸šäº†æ‰¾ä¸ªå¥½å·¥ä½œï¼Œå¹¸ç¦ç”Ÿæ´»ã€‚éšç€å¹´é¾„çš„å¢é•¿ï¼Œå‘ç°è¿™ä»¶äº‹è¶Šæ¥è¶Šæ²¡é‚£ä¹ˆå®¹æ˜“ã€‚è¿™æ®µæ—¶é—´ï¼Œåœ¨ä¸Šæµ·å°é—­ç®¡ç†ï¼Œå¿«é€’å¤–å–çš„éƒ½åˆ«è¯´äº†ï¼Œæ²¡äº†ï¼Œç¤¾åŒºå±…å§”ä¼šåšçš„ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œå¯¼è‡´ä¸€æ®µæ—¶é—´æ²¡ä»€ä¹ˆåƒçš„ï¼Œä¹‹åéƒ½æ˜¯é å±…æ°‘ä»¬è‡ªå‘çš„å›¢è´­å…»æ´»èµ·çš„ã€‚å›°åœ¨å‡ºç§Ÿå±‹é‡Œï¼Œä¸€ä¸ªäººï¼Œé™¤äº†å¿™æ¯•è®¾è®ºæ–‡ï¼Œæ²¡äº‹å°±çæƒ³ï¼Œå¦‚æœæ€ä¹ˆæ ·ï¼Œè¯¥å¤šå¥½ï¼ç°åœ¨å›°åœ¨è¿™é‡Œï¼ŒçœŸçš„å¤ªéš¾äº†ï¼ä»å»å¹´9æœˆç®—çš„è¯ï¼Œæˆ‘å·²ç»åŠå¹´æ²¡å›å®¶äº†ï¼Œå¤ªæƒ³äº†ã€‚åŠ ä¸Šè¿™æ®µæ—¶é—´åœ¨ä¸Šæµ·çš„æ„Ÿå—ï¼Œå°±è§‰å¾—åœ¨å®¶è¿‡å°æ—¥å­æ˜¯çœŸçˆ½å•Šã€‚è¶Šæ¥è¶Šæ¥å—å¹³å‡¡çš„è‡ªå·±ï¼Œå°±åƒæœ¬é¢˜ï¼Œè¦å­¦ä¼šæ¥å—å¤±è´¥ï¼Œå‹‡æ•¢é¢å¯¹ï¼Œå½“ç„¶ä¸æ˜¯èººå¹³å“ˆï¼Œåˆ«æé”™äº†ã€‚å¦å¤–æ›´é‡è¦çš„ä¸€ç‚¹æ˜¯è½¬æ¢æ€ç»´ï¼ŒæˆåŠŸæ˜¯ç”±è‡ªå·±æ¥å®šä¹‰çš„ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æ€»ç»“å¾ˆç®€å•åˆ†äº«ä¸€é¦–æ­Œ</p>
<p>https://www.bilibili.com/bangumi/play/ep350170</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>è‡ªå·±</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿æ€§è¡¨</title>
    <url>/article/40f24371.html</url>
    <content><![CDATA[<h1 id="å®šä¹‰">å®šä¹‰</h1>
<p>é¡¾åæ€ä¹‰ï¼Œçº¿æ€§è¡¨ä¸­çš„æ•°æ®æ˜¯çº¿æ€§æ’åˆ—çš„ï¼Œæ˜¯åŒ…æ‹¬é›¶ä¸ªæˆ–å¤šä¸ªæ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ã€‚</p>
<span id="more"></span>
<h1 id="çº¿æ€§è¡¨çš„æŠ½è±¡æ•°æ®ç±»å‹">çº¿æ€§è¡¨çš„æŠ½è±¡æ•°æ®ç±»å‹</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ADT çº¿æ€§è¡¨(List)</span><br><span class="line">Data</span><br><span class="line">    çº¿æ€§è¡¨çš„æ•°æ®å¯¹è±¡é›†åˆä¸º&#123;a1,a2,....,an&#125;,æ¯ä¸ªå…ƒç´ çš„ç±»å‹å‡ä¸ºDataTypeã€‚å…¶ä¸­ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ a1å¤–ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æœ‰ä¸”åªæœ‰ä¸€ä¸ªç›´æ¥å‰é©±å…ƒç´ ï¼Œé™¤æœ€åä¸€ä¸ªå…ƒç´ anå¤–ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æœ‰ä¸”åªæœ‰ä¸€ä¸ªç›´æ¥åç»§å…ƒç´ ã€‚æ•°æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function">Operation</span></span><br><span class="line"><span class="function">    <span class="title">InitList</span><span class="params">(*L)</span>:åˆå§‹åŒ–æ“ä½œï¼Œå»ºç«‹ä¸€ä¸ªç©ºçš„çº¿æ€§è¡¨ã€‚</span></span><br><span class="line"><span class="function">    ListEmpty(L):è‹¥çº¿æ€§è¡¨ä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</span></span><br><span class="line"><span class="function">    ClearList(*L):çº¿æ€§è¡¨æ¸…ç©ºã€‚</span></span><br><span class="line"><span class="function">    GetElem(L,i,*e):å°†çº¿æ€§è¡¨Lä¸­ç¬¬iä¸ªä½ç½®å…ƒç´ è¿”å›ç»™eã€‚</span></span><br><span class="line"><span class="function">    LocateElem(L,e):åœ¨çº¿æ€§è¡¨Lä¸­æŸ¥æ‰¾ä¸ç»™å®šå€¼eç›¸ç­‰çš„å…ƒç´ ï¼Œå¦‚æœæŸ¥æ‰¾æˆåŠŸ,è¿”å›è¯¥å…ƒç´ åœ¨è¡¨ä¸­çš„åºåˆ—å·ï¼›å¦åˆ™ï¼Œè¿”å›<span class="number">0</span>è¡¨ç¤ºå¤±è´¥ã€‚</span></span><br><span class="line"><span class="function">    ListInsert(*L,i,e):åœ¨çº¿æ€§è¡¨çš„ç¬¬iä¸ªä½ç½®æ’å…¥å…ƒç´ eã€‚</span></span><br><span class="line"><span class="function">    ListDelete(*L,i,*e):åˆ é™¤çº¿æ€§è¡¨Lä¸­çš„ç¬¬iä¸ªå…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼</span></span><br><span class="line"><span class="function">    ListLength(L):è¿”å›çº¿æ€§è¡¨Lçš„å…ƒç´ ä¸ªæ•°ã€‚</span></span><br><span class="line"><span class="function">    PrintList(L):æ‰“å°çº¿æ€§è¡¨</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">å¯¹äºä¸åŒçš„åº”ç”¨ï¼Œçº¿æ€§è¡¨çš„åŸºæœ¬æ“ä½œæ˜¯ä¸åŒçš„ï¼Œä¸Šè¿°æ“ä½œæ˜¯æœ€åŸºæœ¬çš„ã€‚</span></span><br><span class="line"><span class="function">å¯¹äºå®é™…é—®é¢˜ä¸­æ¶‰åŠçš„å…³äºçº¿æ€§è¡¨çš„æ›´å¤æ‚æ“ä½œï¼Œå®Œå…¨å¯ä»¥ç”¨è¿™äº›åŸºæœ¬æ“ä½œçš„ç»„åˆæ¥å®ç°ã€‚</span></span><br></pre></td></tr></table></figure>
<h1 id="çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„">çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„</h1>
<p>çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„ï¼ŒæŒ‡çš„æ˜¯ç”¨ä¸€æ®µåœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ã€‚</p>
<h1 id="å®šä¹‰-1">å®šä¹‰</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">define</span>  MAXSIZE   50  <span class="comment">/*å­˜å‚¨ç©ºé—´åˆå§‹åˆ†é…é‡*/</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType;   <span class="comment">/*ElemTypeç±»å‹æ ¹æ®å®é™…æƒ…å†µè€Œå®š*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    ElemType* data;     <span class="comment">/*å­˜å‚¨ç©ºé—´åŸºåœ°å€*/</span></span><br><span class="line">    <span class="type">int</span> length;         <span class="comment">/*çº¿æ€§è¡¨å½“å‰é•¿åº¦*/</span></span><br><span class="line">&#125;SqList;</span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç´ è·å–">å…ƒç´ è·å–</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetElem</span><span class="params">(SqList L, <span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (L.length == <span class="number">0</span> || i&lt;<span class="number">1</span> || i&gt;L.length)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ä½ç½®ä¿¡æ¯æœ‰è¯¯ï¼&quot;</span> &lt;&lt; endl;   <span class="comment">/*ä½ç½®ä¸åˆæ³•ï¼Œè¿”å›-1*/</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> L.data[i - <span class="number">1</span>];       <span class="comment">/*è¿”å›ä½ç½®içš„å€¼*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç´ æ’å…¥">å…ƒç´ æ’å…¥</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InsertElem</span><span class="params">(SqList&amp; L, <span class="type">int</span> i, ElemType e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (L.length == MAXSIZE)</span><br><span class="line">        <span class="keyword">return</span>;         <span class="comment">/*ç©ºé—´å·²æ»¡*/</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i&lt;<span class="number">1</span> || i&gt;L.length + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span>;     <span class="comment">/*ä½ç½®ä¸åˆæ³•*/</span></span><br><span class="line">        elseyici</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/*ä»æœ€åå…ƒç´ åˆ°ç¬¬iä¸ªå…ƒç´ ä¾æ¬¡åç§»ä¸€ä½*/</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = L.length - <span class="number">1</span>; j &gt;= i - <span class="number">1</span>; j--)</span><br><span class="line">                L.data[j + <span class="number">1</span>] = L.data[j];</span><br><span class="line">            L.data[i - <span class="number">1</span>] = e;  <span class="comment">/*ç¬¬içš„ä½ç½®ä¸ºå€¼e*/</span></span><br><span class="line">            L.length++;         <span class="comment">/*é•¿åº¦åŠ ä¸€*/</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç´ åˆ é™¤">å…ƒç´ åˆ é™¤</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DeleteElem</span><span class="params">(SqList&amp; L, <span class="type">int</span> i, ElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (L.length == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;         <span class="comment">/*ç©ºè¡¨æ²¡æœ‰åˆ é™¤æ“ä½œ*/</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i&lt;<span class="number">1</span> || i&gt;L.length)</span><br><span class="line">            <span class="keyword">return</span>;     <span class="comment">/*ä½ç½®ä¸åˆæ³•*/</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            e = L.data[i - <span class="number">1</span>];  <span class="comment">/*åˆ é™¤å…ƒç´ å­˜å…¥e*/</span></span><br><span class="line">            <span class="comment">/*ä»ç¬¬i+1å…ƒç´ åˆ°æœ€åå…ƒç´ ä¾æ¬¡å‰ç§»ä¸€ä½*/</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt; L.length; j++)</span><br><span class="line">                L.data[j - <span class="number">1</span>] = L.data[j];</span><br><span class="line">            L.length--;     <span class="comment">/*é•¿åº¦å‡ä¸€*/</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹</h1>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ— éœ€ä¸ºè¡¨ç¤ºè¡¨ä¸­å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»è€Œå¢åŠ é¢å¤–çš„å­˜å‚¨ç©ºé—´<br />
</li>
<li>å¯ä»¥å¿«é€Ÿåœ°å­˜å–è¡¨ä¸­ä»»æ„ä½ç½®å…ƒç´ </li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ’å…¥å’Œåˆ é™¤æ“ä½œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </li>
<li>å½“çº¿æ€§è¡¨é•¿åº¦å˜åŒ–è¾ƒå¤§æ—¶ï¼Œéš¾ä»¥ç¡®å®šå­˜å‚¨ç©ºé—´çš„å®¹é‡</li>
<li>é€ æˆå­˜å‚¨ç©ºé—´çš„â€œç¢ç‰‡â€</li>
</ul>
<h1 id="çº¿æ€§è¡¨çš„é“¾å¼å­˜å‚¨ç»“æ„">çº¿æ€§è¡¨çš„é“¾å¼å­˜å‚¨ç»“æ„</h1>
<p>çº¿æ€§è¡¨ä¸­å…ƒç´ ä¸å†æ˜¯ç›¸é‚»æ’åˆ—ï¼Œè€Œæ˜¯ç”±â€œé“¾â€è¿æ¥æˆã€‚</p>
<h1 id="å¤´æŒ‡é’ˆä¸å¤´ç»“ç‚¹çš„å¼‚åŒ">å¤´æŒ‡é’ˆä¸å¤´ç»“ç‚¹çš„å¼‚åŒ</h1>
<p>å¤´æŒ‡é’ˆï¼š *
å¤´æŒ‡é’ˆæ˜¯æŒ‡é“¾è¡¨æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆï¼Œè‹¥é“¾è¡¨æœ‰å¤´ç»“ç‚¹ï¼Œåˆ™æ˜¯æŒ‡å‘å¤´ç»“ç‚¹çš„æŒ‡é’ˆ
* å¤´æŒ‡é’ˆå…·æœ‰æ ‡è¯†ä½œç”¨ï¼Œæ‰€æœ‰å¸¸ç”¨å¤´æŒ‡é’ˆå† ä»¥é“¾è¡¨çš„åå­— *
æ— è®ºé“¾è¡¨æ˜¯å¦ä¸ºç©ºï¼Œå¤´æŒ‡é’ˆå‡ä¸ä¸ºç©ºã€‚å¤´æŒ‡é’ˆæ˜¯é“¾è¡¨çš„å¿…è¦å…ƒç´ </p>
<p>å¤´ç»“ç‚¹ï¼š *
å¤´ç»“ç‚¹æ˜¯ä¸ºäº†æ“ä½œçš„ç»Ÿä¸€å’Œæ–¹ä¾¿è€Œè®¾è®¡çš„ï¼Œæ”¾åœ¨ç¬¬ä¸€å…ƒç´ çš„ç»“ç‚¹ä¹‹å‰ï¼Œå…¶æ•°æ®åŸŸä¸€èˆ¬æ— æ„ä¹‰ï¼ˆä¹Ÿå­˜æ”¾é“¾è¡¨çš„é•¿åº¦ï¼‰
*
æœ‰äº†å¤´ç»“ç‚¹ï¼Œå¯¹åœ¨ç¬¬ä¸€å…ƒç´ ç»“ç‚¹å‰æ’å…¥ç»“ç‚¹å’Œåˆ é™¤ç¬¬ä¸€ç»“ç‚¹ï¼Œå…¶æ“ä½œä¸å…¶ä»–ç»“ç‚¹çš„æ“ä½œå°±ç»Ÿä¸€äº†
* å¤´ç»“ç‚¹ä¸ä¸€å®šæ˜¯é“¾å¼å¿…é¡»è¦ç´ </p>
<h1 id="å®šä¹‰-2">å®šä¹‰</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">LNode</span></span><br><span class="line">&#123;</span><br><span class="line">    ElemType   data;       <span class="comment">/*æ•°æ®åŸŸ*/</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">LNode</span>* next;   <span class="comment">/*æŒ‡é’ˆåŸŸ*/</span></span><br><span class="line">&#125; LNode, * LinkList;          <span class="comment">/*LinkListä¸ºLNodeç±»å‹çš„æŒ‡é’ˆ*/</span></span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç´ è·å–-1">å…ƒç´ è·å–</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">GetElem</span><span class="params">(LinkList L, <span class="type">int</span> i, ElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å½“ç¬¬iä¸ªå…ƒç´ å­˜åœ¨æ—¶ï¼Œå…¶å€¼èµ‹ç»™e</span></span><br><span class="line">    LinkList p = L-&gt;next;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>; <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">while</span> (p &amp;&amp; j &lt; i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å‘åæ‰«æï¼Œç›´åˆ°pæŒ‡å‘ç¬¬iä¸ªå…ƒç´ æˆ–pä¸ºç©º</span></span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        ++j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!p || j &gt; i) </span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç¬¬&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;ä¸ªç»“ç‚¹ä¸å­˜åœ¨\n&quot;</span>; <span class="comment">//ç¬¬iä¸ªå…ƒç´ ä¸å­˜åœ¨</span></span><br><span class="line">        e = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        e = p-&gt;data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç´ æ’å…¥-1">å…ƒç´ æ’å…¥</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ListInsert</span><span class="params">(LinkList&amp; L, <span class="type">int</span> i, ElemType e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LinkList p, s;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>;</span><br><span class="line">    p = L;</span><br><span class="line">    <span class="keyword">while</span> (p &amp;&amp; j &lt; i)</span><br><span class="line">    &#123;</span><br><span class="line">        p = p-&gt;next;    <span class="comment">//å¯»æ‰¾ç¬¬iâˆ’1ä¸ªç»“ç‚¹</span></span><br><span class="line">        ++j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!p || j &gt; i) cout &lt;&lt; <span class="string">&quot;ç¬¬&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;ä¸ªç»“ç‚¹ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;	<span class="comment">//iå¤§äºè¡¨é•¿Â +Â 1æˆ–è€…å°äº1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        s = <span class="keyword">new</span> LNode;                    <span class="comment">//ç”Ÿæˆæ–°ç»“ç‚¹*s</span></span><br><span class="line">        s-&gt;data = e;      		          <span class="comment">//å°†ç»“ç‚¹*sçš„æ•°æ®åŸŸç½®ä¸ºe</span></span><br><span class="line">        s-&gt;next = p-&gt;next;	   	          <span class="comment">//å°†ç»“ç‚¹*sæ’å…¥Lä¸­</span></span><br><span class="line">        p-&gt;next = s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç´ åˆ é™¤-1">å…ƒç´ åˆ é™¤</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ListDelete</span><span class="params">(LinkList&amp; L, <span class="type">int</span> i, ElemType&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LinkList p, q;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>;</span><br><span class="line">    p = L;</span><br><span class="line">    <span class="keyword">while</span> (p-&gt;next &amp;&amp; j &lt; i) <span class="comment">//å¯»æ‰¾ç¬¬iä¸ªç»“ç‚¹ï¼Œå¹¶ä»¤pæŒ‡å‘å…¶å‰é©±</span></span><br><span class="line">    &#123;</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        ++j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!(p-&gt;next) || j &gt; i) cout &lt;&lt; <span class="string">&quot;ç¬¬&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;ä¸ªç»“ç‚¹ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl; <span class="comment">//åˆ é™¤ä½ç½®ä¸åˆç†</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        q = p-&gt;next; <span class="comment">//ä¸´æ—¶ä¿å­˜è¢«åˆ ç»“ç‚¹çš„åœ°å€ä»¥å¤‡é‡Šæ”¾</span></span><br><span class="line">        p-&gt;next = q-&gt;next; 	<span class="comment">//æ”¹å˜åˆ é™¤ç»“ç‚¹å‰é©±ç»“ç‚¹çš„æŒ‡é’ˆåŸŸ</span></span><br><span class="line">        <span class="keyword">delete</span> q;<span class="comment">//é‡Šæ”¾ç»“ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å•é“¾è¡¨åˆ›å»º">å•é“¾è¡¨åˆ›å»º</h1>
<p>å¤´æ’æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateList_H</span><span class="params">(LinkList&amp; L, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LinkList p;</span><br><span class="line">    L = <span class="keyword">new</span> LNode;</span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>; <span class="comment">//å…ˆå»ºç«‹ä¸€ä¸ªå¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¾“å…¥&quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;ä¸ªæ–°å€¼ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p = <span class="keyword">new</span> LNode;<span class="comment">//ç”Ÿæˆæ–°ç»“ç‚¹</span></span><br><span class="line">        cin &gt;&gt; p-&gt;data;</span><br><span class="line">        p-&gt;next = L-&gt;next;</span><br><span class="line">        L-&gt;next = p; <span class="comment">//æ’å…¥åˆ°è¡¨å¤´</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°¾æ’æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateList_T</span><span class="params">(LinkList&amp; L, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æ­£ä½åºè¾“å…¥nä¸ªå…ƒç´ çš„å€¼ï¼Œå»ºç«‹å¸¦è¡¨å¤´ç»“ç‚¹çš„å•é“¾è¡¨L</span></span><br><span class="line">    LinkList p, r;</span><br><span class="line">    L = <span class="keyword">new</span> LNode;</span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    r = L; <span class="comment">//å°¾æŒ‡é’ˆræŒ‡å‘å¤´ç»“ç‚¹</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¾“å…¥&quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;ä¸ªæ–°å€¼ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p = <span class="keyword">new</span> LNode; <span class="comment">//ç”Ÿæˆæ–°ç»“ç‚¹</span></span><br><span class="line">        cin &gt;&gt; p-&gt;data;</span><br><span class="line">        p-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        r-&gt;next = p; <span class="comment">//æ’å…¥åˆ°è¡¨å°¾</span></span><br><span class="line">        r = p; <span class="comment">//ræŒ‡å‘æ–°çš„å°¾ç»“ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å•é“¾è¡¨æ•´è¡¨åˆ é™¤">å•é“¾è¡¨æ•´è¡¨åˆ é™¤</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ClearList</span><span class="params">(LinkList&amp; L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å°†Lé‡ç½®ä¸ºç©ºè¡¨</span></span><br><span class="line">    LinkList p, q;</span><br><span class="line">    p = L-&gt;next;   <span class="comment">//pæŒ‡å‘ç¬¬ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (p)       <span class="comment">//æ²¡åˆ°è¡¨å°¾</span></span><br><span class="line">    &#123;</span><br><span class="line">        q = p-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> p;</span><br><span class="line">        p = q;</span><br><span class="line">    &#125;</span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>;   <span class="comment">//å¤´ç»“ç‚¹æŒ‡é’ˆåŸŸä¸ºç©º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é™æ€é“¾è¡¨">é™æ€é“¾è¡¨</h1>
<p><a href="http://data.biancheng.net/view/163.html">å¼•ç”¨</a></p>
<h1 id="å¾ªç¯é“¾è¡¨">å¾ªç¯é“¾è¡¨</h1>
<p><a href="http://data.biancheng.net/view/7.html">å¼•ç”¨</a></p>
<h1 id="åŒå‘é“¾è¡¨">åŒå‘é“¾è¡¨</h1>
<p><a href="http://data.biancheng.net/view/166.html">å¼•ç”¨</a></p>
<h1
id="å•é“¾è¡¨ç»“æ„ä¸é¡ºåºå­˜å‚¨ç»“æ„ä¼˜ç¼ºç‚¹">å•é“¾è¡¨ç»“æ„ä¸é¡ºåºå­˜å‚¨ç»“æ„ä¼˜ç¼ºç‚¹</h1>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>å­˜å‚¨ç»“æ„</th>
<th>é¡ºåºè¡¨</th>
<th>é“¾è¡¨</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>å­˜å‚¨ç©ºé—´</td>
<td>é¢„å…ˆåˆ†é…ï¼Œä¼šå¯¼è‡´ç©ºé—´é—²ç½®æˆ–æº¢å‡ºç°è±¡</td>
<td>åŠ¨æ€åˆ†é…ï¼Œä¸ä¼šå‡ºç°å­˜å‚¨ç©ºé—´é—²ç½®æˆ–æº¢å‡ºç°è±¡</td>
<td></td>
</tr>
<tr class="even">
<td>å­˜å‚¨å¯†åº¦</td>
<td>ä¸ç”¨ä¸ºè¡¨ç¤ºç»“ç‚¹é—´çš„é€»è¾‘å…³ç³»è€Œå¢åŠ é¢å¤–çš„å­˜å‚¨å¼€é”€ï¼Œå­˜å‚¨å¯†åº¦ç­‰äº1</td>
<td>éœ€è¦å€ŸåŠ©æŒ‡é’ˆæ¥ä½“ç°å…ƒç´ é—´çš„é€»è¾‘å…³ç³»ï¼Œå­˜å‚¨å¯†åº¦å°äº1</td>
<td></td>
</tr>
<tr class="odd">
<td>å­˜å–å…ƒç´ </td>
<td>éšæœºå­˜å–ï¼ŒæŒ‰ä½ç½®è®¿é—®å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</td>
<td>é¡ºåºå­˜å–ï¼Œ æŒ‰ä½ç½®è®¿é—®å…ƒç´ æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</td>
<td></td>
</tr>
<tr class="even">
<td>æ’å…¥ã€åˆ é™¤</td>
<td>å¹³å‡ç§»åŠ¨çº¦è¡¨ä¸­ä¸€åŠå…ƒç´ ï¼Œ æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</td>
<td>ä¸éœ€ç§»åŠ¨å…ƒç´ ï¼Œ ç¡®å®šæ’å…¥.åˆ é™¤ä½ç½®åï¼Œæ—¶é—´å¤æ‚åº¦ä¸º0(1)</td>
<td></td>
</tr>
<tr class="odd">
<td>ä½¿ç”¨æƒ…å†µ</td>
<td>â‘ è¡¨é•¿å˜åŒ–ä¸å¤§ï¼Œä¸”èƒ½äº‹å…ˆç¡®å®šå˜åŒ–çš„èŒƒå›´â‘¡å¾ˆå°‘è¿›è¡Œæ’å…¥æˆ–åˆ é™¤æ“ä½œï¼Œç»å¸¸æŒ‰å…ƒç´ ä½ç½®åºå·è®¿é—®æ•°æ®å…ƒç´ </td>
<td>â‘ é•¿åº¦å˜åŒ–è¾ƒå¤§â‘¡é¢‘ç¹è¿›è¡Œæ’äººæˆ–åˆ é™¤æ“ä½œ</td>
<td></td>
</tr>
</tbody>
</table>
<p>---å‚è€ƒã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹</p>
<p><a
href="https://blog.csdn.net/baidu_39630193/article/details/76526691?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.nonecase">è¯¦ç»†</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç±»æ”¯ä»˜å®ç§¯åˆ†ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆï¼ˆè¿‡æœŸã€å…‘å¥–ï¼‰</title>
    <url>/article/8acc9028.html</url>
    <content><![CDATA[<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<hr />
<h1 id="å£°æ˜">å£°æ˜</h1>
<p>æœ¬ç¯‡æ–‡ç« çº¯ç²¹æŠ›ç –å¼•ç‰ï¼</p>
<h1 id="éœ€æ±‚è¯´æ˜">éœ€æ±‚è¯´æ˜</h1>
<p>å¼€é—¨è§å±±ï¼Œä¸šåŠ¡èƒŒæ™¯ç›´æ¥è·³è¿‡ã€‚</p>
<p>ç±»æ¯”æ”¯ä»˜å®ä¼šå‘˜ç§¯åˆ†ï¼Œæ”¯ä»˜å®APP-æˆ‘çš„-æ”¯ä»˜å®ä¼šå‘˜ã€‚</p>
<p>æ”¯ä»˜å®ä¼šå‘˜-XXXç§¯åˆ†-ç§¯åˆ†è§„åˆ™ï¼Œå¯ä»¥çœ‹åˆ°å…·ä½“çš„ç§¯åˆ†è§„åˆ™ï¼Œæœ¬ç¯‡æ–‡ç« ç±»æ¯”äºæ­¤ç§¯åˆ†ä¸šåŠ¡åœºæ™¯ï¼Œåšç®€å•çš„è®¾è®¡ã€‚</p>
<h2 id="ç§¯åˆ†è¯´æ˜">ç§¯åˆ†è¯´æ˜</h2>
<p>ç§¯åˆ†ä¸å…·æœ‰è´§å¸æˆ–ç°é‡‘ä»·å€¼ï¼Œä¸å¯å…‘ç°ï¼Œä¸å¯è½¬è®©ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ”¯ä»˜ã€è´¦æˆ·æœåŠ¡ã€é‡‘èç†è´¢å’Œç§¯åˆ†å¥–åŠ±æ´»åŠ¨ç­‰æ–¹å¼æ¥è·å–ç§¯åˆ†ã€‚</p>
<p>ç§¯åˆ†å¯ä»¥å…‘æ¢å„ç±»æƒç›Šã€å‚ä¸å„ç§ç§¯åˆ†æ´»åŠ¨ç­‰ï¼Œå…·ä½“ä»¥æƒç›Šå…‘æ¢åŠæ´»åŠ¨é¡µé¢å±•ç¤ºä¸ºå‡†ã€‚</p>
<h2 id="ç§¯åˆ†é¢†å–è§„åˆ™">ç§¯åˆ†é¢†å–è§„åˆ™</h2>
<p>ç§¯åˆ†å‘æ”¾åï¼Œç”¨æˆ·å¯å‰å¾€â€œæˆ‘çš„â€-â€œæ”¯ä»˜å®ä¼šå‘˜â€ï¼Œç‚¹å‡»é¢†å–ç§¯åˆ†çƒï¼Œæˆ–è€…åœ¨æ”¯ä»˜æˆåŠŸé¡µé¢ã€æœåŠ¡æ¶ˆæ¯æé†’ã€è´¦å•ç‚¹å‡»é¢†å–ï¼Œç§¯åˆ†æ–¹å¯åˆ°è´¦ã€‚ç§¯åˆ†è‡ªäº§ç”Ÿä¹‹æ—¶èµ·ï¼Œé¢†å–æœ‰æ•ˆæœŸ7å¤©ï¼ˆ168å°æ—¶ï¼‰ï¼Œé€¾æœŸä¸é¢†åˆ™ä½œåºŸï¼Œä¸äºˆè¡¥å‘ã€‚</p>
<span id="more"></span>
<h2 id="ç§¯åˆ†è·å–æ–¹å¼">ç§¯åˆ†è·å–æ–¹å¼</h2>
<p>1ã€æ”¯ä»˜</p>
<p>2ã€è´¦æˆ·æœåŠ¡</p>
<p>3ã€é‡‘èç†è´¢</p>
<p>4ã€æ‰«ä¸€æ‰«</p>
<p>5ã€ç­‰</p>
<h2 id="ç§¯åˆ†æœ‰æ•ˆæœŸ">ç§¯åˆ†æœ‰æ•ˆæœŸ</h2>
<p>ç”¨æˆ·è·å¾—çš„ç§¯åˆ†æœ‰æ•ˆæœŸä¸ºè‡ªè·å¾—å½“æœˆèµ·çš„12ä¸ªè‡ªç„¶æœˆï¼Œæœ‰æ•ˆæœŸå†…æœªä½¿ç”¨çš„ç§¯åˆ†åˆ°æœŸå°†è‡ªåŠ¨æ¸…é›¶ï¼Œä¸äºˆè¡¥å‘ã€‚</p>
<p>æ¸©é¦¨æç¤ºï¼š</p>
<p>1ã€ç”¨æˆ·æ—¥å¸¸ä½¿ç”¨çš„ç§¯åˆ†ï¼Œå°†ä¼˜å…ˆä½¿ç”¨å³å°†è¿‡æœŸçš„ç§¯åˆ†ã€‚</p>
<p>2ã€æ¯æœˆï¼Œç”¨æˆ·å¯åœ¨â€œæˆ‘çš„â€-â€œæ”¯ä»˜å®ä¼šå‘˜â€-â€œæ”¶æ”¯/è®¢å•/è§„åˆ™â€é¡µæŸ¥çœ‹å½“æœˆæœˆåº•å³å°†è¿‡æœŸçš„ç§¯åˆ†ã€‚</p>
<p>3ã€å·²ä½¿ç”¨çš„ç§¯åˆ†è‹¥å‘ç”Ÿé€€è¿˜ï¼Œç§¯åˆ†æœ‰æ•ˆæœŸä¸å˜ï¼Œä»ä»¥è¯¥ç¬”ç§¯åˆ†åŸè·å–æ—¶é—´è®¡ç®—æœ‰æ•ˆæœŸã€‚</p>
<h2 id="ç§¯åˆ†æƒç›Šå…‘æ¢">ç§¯åˆ†æƒç›Šå…‘æ¢</h2>
<p>ç§¯åˆ†å¯ä»¥å…‘æ¢å„ç±»æƒç›Šã€å‚ä¸å„ç§ç§¯åˆ†æ´»åŠ¨ç­‰ï¼Œå…·ä½“ä»¥æƒç›Šå…‘æ¢åŠæ´»åŠ¨é¡µé¢å±•ç¤ºä¸ºå‡†ã€‚</p>
<h2 id="ç§¯åˆ†ä¸æˆé•¿ä½“ç³»">ç§¯åˆ†ä¸æˆé•¿ä½“ç³»</h2>
<p>ç•¥</p>
<h1 id="éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ</h1>
<p>å› ä¸ºä¸Šé¢å‡ ä¹éƒ½æ˜¯ç²˜è´´äºæ”¯ä»˜å®å¯¹å¤–å±•ç¤ºçš„ç§¯åˆ†è§„åˆ™ï¼Œè€Œè¿™ç¯‡æ–‡ç« æ¶‰åŠèŒƒå›´å¹¶æ²¡æœ‰é‚£ä¹ˆå¹¿ï¼Œæ‰€ä»¥è¿™é‡Œè¦å£°æ˜ä¸€ä¸‹éœ€æ±‚èŒƒå›´ã€‚</p>
<h2 id="ç§¯åˆ†è·å–æ–¹å¼-1">ç§¯åˆ†è·å–æ–¹å¼</h2>
<p>æ”¯ä»˜ã€è´¦æˆ·æœåŠ¡ã€é‡‘èç†è´¢ã€æ‰«ä¸€æ‰«ç­‰ã€‚</p>
<p>åŒæ­¥æ–¹æ¡ˆï¼šè¿™ä¸ªå°±æ¶‰åŠåˆ°<code>AOP</code>çš„æ€æƒ³ï¼Œæ¢è¨€ä¹‹â€œå¹¿ä¹‰<code>AOP</code>â€ã€‚è¿™ä¸ªä¸æ˜¯å•ä¸ªç³»ç»Ÿèƒ½å®ç°çš„ï¼Œéœ€è¦å¤šæ–¹ç³»ç»Ÿå…±åŒç¡®è®¤ï¼Œè€Œæœ¬ç³»ç»Ÿéœ€è¦æä¾›å¯é çš„ç§¯åˆ†ç´¯è®¡æ¥å£ã€‚å¦‚ï¼šç”¨æˆ·æ”¯ä»˜å®Œæˆååº”è¯¥ç´¯è®¡ç§¯åˆ†çš„ï¼Œé€šè¿‡ä»€ä¹ˆæ–¹å¼ä¸ç§¯åˆ†ç³»ç»Ÿäº¤äº’å¢åŠ ç§¯åˆ†å‘¢ï¼Ÿè¿™æ ·çš„æ¥å£å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿé™¤äº†ç”¨æˆ·å”¯ä¸€æ ‡è¯†ã€ç§¯åˆ†å€¼ã€äº¤æ˜“æ—¶é—´ã€äº¤æ˜“ç±»å‹è¿˜æœ‰ä»€ä¹ˆå¿…è¦å­—æ®µå‘¢ï¼Ÿéœ€ä¸éœ€è¦é‡è¯•ï¼Ÿå¦‚ä½•åšå¹‚ç­‰ï¼Ÿåˆ†å¸ƒå¼äº‹åŠ¡å¦‚ä½•è€ƒè™‘ï¼Ÿç­‰ç­‰ï¼Œè¿˜æœ‰å¾ˆå¤šè¦ç´ è¦è€ƒè™‘ã€‚</p>
<p>å¼‚æ­¥æ–¹æ¡ˆï¼šæœ‰æ—¶æˆ‘ä»¬å¯¹äºç§¯åˆ†ç´¯ç§¯çš„æ—¶æ•ˆæ€§å¹¶ä¸é«˜ï¼Œå°±å¯ä»¥è€ƒè™‘å¼‚æ­¥æ–¹æ¡ˆã€‚å¼‚æ­¥æ— éå°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ç±»çš„å¼‚æ­¥ä»»åŠ¡ï¼Œæˆ–æ˜¯æœ‰æ•°æ®å›¢é˜Ÿæ¥åšæ•°æ®çš„åˆ†æå¤„ç†ã€‚å¼‚æ­¥ä»»åŠ¡æ–¹å¼ä¸ç®¡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—æˆ–æ˜¯äº‹ä»¶é©±åŠ¨éƒ½å¤§æ¦‚å¯è¡Œï¼Œå½“ç„¶è¿™ä¸­é—´ä¹Ÿæœ‰å¾ˆå¤šåœ°æ–¹è¦æ³¨æ„ã€‚æ•°æ®åˆ†æå¤„ç†æœ‰ç‚¹åƒæ˜¯å®šæ—¶ä»»åŠ¡ï¼Œæè¿°å¯èƒ½ä¸å¤ªå‡†ç¡®ï¼Œå°±æ˜¯é€šè¿‡åˆ†æç”¨æˆ·å®é™…æ•°æ®æ¥å…·ä½“åˆ†æå¤„ç†ï¼Œå¦‚ï¼šæ¯å¤©2ç‚¹ï¼Œæ•°æ®å›¢é˜Ÿæœ‰å¤šä¸ªæ•°æ®æ¨¡å‹é’ˆå¯¹ä¸åŒçš„æ•°æ®è¡¨ï¼ˆè´¦æˆ·å­˜æ¬¾ã€ç†è´¢ç­‰ç­‰ï¼‰å¯¹ç”¨æˆ·å‰ä¸€å¤©æ‰€æœ‰äº¤æ˜“è¿›è¡Œåˆ†æï¼Œè®¡ç®—ç§¯åˆ†ç„¶åç´¯è®¡å‰ä¸€å¤©äº§ç”Ÿçš„ç§¯åˆ†ã€‚</p>
<p>å…³äºç§¯åˆ†è·å–æ–¹å¼ï¼Œæœ¬æ¬¡å°±è®¨è®ºåˆ°è¿™äº†ã€‚å…¶å®ä¸Šé¢ç®€å•åˆ†æå·²ç»åŒ…å«äº†å¾ˆå¤šç³»ç»Ÿè®¾è®¡çš„å¿…è¦è€ƒè™‘æ¡ä»¶äº†ï¼Œè€Œä¸”å¾ˆå¤šéƒ½å¯ä»¥ç±»æ¯”çš„ï¼Œæ¯”å¦‚ç§¯åˆ†ç´¯è®¡ä¸å°±æ˜¯ç±»ä¼¼è´­ç‰©äº§ç”Ÿè®¢å•ï¼Œæˆ–æ˜¯è®°å½•æ“ä½œæ—¥å¿—å—ã€‚æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„çš„ï¼Œå¯ä»¥ç±»æ¯”æ€è€ƒä¸€ä¸‹ã€‚</p>
<h2 id="ç§¯åˆ†é¢†å–è§„åˆ™-1">ç§¯åˆ†é¢†å–è§„åˆ™</h2>
<p>ä»å‰é¢ç§¯åˆ†é¢†å–è§„åˆ™å¯ä»¥ç¡®å®šï¼Œç§¯åˆ†é¢†å–æ¶‰åŠæ¶ˆæ¯é€šçŸ¥å’Œè¿‡æœŸã€‚</p>
<p>æ¶ˆæ¯é€šçŸ¥è‚¯å®šæ˜¯æˆä½“ç³»çš„ï¼Œå¯å‚è€ƒå…¶ä»–æ¶ˆæ¯ç±»ç³»ç»Ÿè®¾è®¡ã€‚è¿‡æœŸå¯ä»¥å‚è€ƒä¸‹é¢çš„ç§¯åˆ†è¿‡æœŸã€‚</p>
<h2 id="ç§¯åˆ†æœ‰æ•ˆæœŸ-1">ç§¯åˆ†æœ‰æ•ˆæœŸ</h2>
<p>è¿™ä¸ªæ˜¯æœ¬ç¯‡æ–‡ç« ä¸­æˆ‘æƒ³è¦çªå‡ºçš„é‡ç‚¹ã€‚ç§¯åˆ†äº§ç”Ÿã€ç§¯åˆ†å…‘æ¢ã€ç§¯åˆ†è¿‡æœŸè¿˜æ˜¯éœ€è¦å¥½å¥½æ€è€ƒä¸€ä¸‹çš„ï¼Œå¦‚è‹¥ä¸ç„¶ï¼Œç”šè‡³ä¸å•å•æ˜¯äº§ç”Ÿç³»ç»Ÿbugï¼Œç”šè‡³ä¼šæœ‰ä¸šåŠ¡bugï¼Œè¿™æ˜¯éš¾ä»¥æ¥å—çš„ã€‚</p>
<p>æ—¢ç„¶ä¸Šé¢éœ€æ±‚è¯´æ˜äº†ç§¯åˆ†æœ‰æ•ˆæœŸæ˜¯12ä¸ªè‡ªç„¶æœˆï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘è®¾è®¡ä¸€å¼ æŒ‰æœˆå­˜å‚¨çš„è¡¨æ¥å­˜å‚¨ç§¯åˆ†ã€‚</p>
<p>å¦‚5.1-5.31çš„äº§ç”Ÿçš„ç§¯åˆ†å­˜å‚¨ä¸ºä¸€æ¡å¯ç”¨ç§¯åˆ†è®°å½•ï¼Œè¿‡æœŸæ—¶é—´ä¸º5.31
23:59:59ï¼Œæ€»ç§¯åˆ†å€¼ä¸ºæœ€è¿‘12ä¸ªæœˆç§¯åˆ†ä¹‹å’Œã€‚</p>
<table>
<thead>
<tr class="header">
<th>ç”¨æˆ·ID</th>
<th>ç´¯è®¡ç§¯åˆ†</th>
<th>å¯ç”¨ç§¯åˆ†å€¼</th>
<th>è¿‡æœŸæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>300</td>
<td>300</td>
<td>5.31 23:59:59</td>
</tr>
<tr class="even">
<td>1</td>
<td>500</td>
<td>500</td>
<td>6.30 23:59:59</td>
</tr>
<tr class="odd">
<td>1</td>
<td>800</td>
<td>700</td>
<td>7.31 23:59:59</td>
</tr>
<tr class="even">
<td>1</td>
<td>500</td>
<td>400</td>
<td>8.31 23:59:59</td>
</tr>
<tr class="odd">
<td>1</td>
<td>300</td>
<td>200</td>
<td>9.30 23:59:59</td>
</tr>
<tr class="even">
<td>1</td>
<td>300</td>
<td>100</td>
<td>10.31 23:59:59</td>
</tr>
<tr class="odd">
<td>1</td>
<td>500</td>
<td>500</td>
<td>11.30 23:59:59</td>
</tr>
<tr class="even">
<td>1</td>
<td>600</td>
<td>600</td>
<td>12.31 23:59:59</td>
</tr>
</tbody>
</table>
<p>å¯èƒ½æœ‰äººåœ¨æ¥åˆ°ç§¯åˆ†è¿‡æœŸéœ€æ±‚æ—¶å°±è€ƒè™‘åˆ°å®šæ—¶ä»»åŠ¡æ‰«è¡¨çš„æ–¹å¼ï¼Œè™½ç„¶å¯èƒ½ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†ç»†èŠ‚å…¶å®æŒºå¤šçš„ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šè®¨è®ºäº†ã€‚</p>
<h2 id="ç§¯åˆ†æƒç›Šå…‘æ¢-1">ç§¯åˆ†æƒç›Šå…‘æ¢</h2>
<p>ç”¨æˆ·æ—¥å¸¸ä½¿ç”¨çš„ç§¯åˆ†ï¼Œå°†ä¼˜å…ˆä½¿ç”¨å³å°†è¿‡æœŸçš„ç§¯åˆ†ã€‚é’ˆå¯¹äºä¸Šé¢çš„æœˆåº¦ç§¯åˆ†è¡¨ï¼Œåœ¨ç§¯åˆ†å…‘å¥–æ—¶ä»æœ€æ—©çš„æœªè¿‡æœŸçš„æœˆå¼€å§‹è®¡ç®—æ‰£å‡ç§¯åˆ†ã€‚</p>
<h1 id="è®¾è®¡æ–¹æ¡ˆ">è®¾è®¡æ–¹æ¡ˆ</h1>
<h2 id="æ•°æ®è¡¨">æ•°æ®è¡¨</h2>
<p>ç®€å•è®¾è®¡å¦‚ä¸‹ï¼Œæœˆåº¦ç§¯åˆ†å…³è”å¤šæ¡ç§¯åˆ†æ˜ç»†è®°å½•ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿æŸ¥è¯¢æœˆåº¦ç§¯åˆ†è·å–å’Œæ¶ˆè€—æ˜ç»†ã€‚</p>
<h3 id="æœˆåº¦ç§¯åˆ†">æœˆåº¦ç§¯åˆ†</h3>
<ul>
<li>æœˆåº¦ç§¯åˆ†id</li>
<li>ç”¨æˆ·id</li>
<li>å¹´æœˆï¼ˆå‚è€ƒ2024-01ä¹‹ç±»çš„ï¼‰</li>
<li>ç´¯è®¡ç§¯åˆ†</li>
<li>å¯ç”¨ç§¯åˆ†</li>
<li>è¿‡æœŸæ—¶é—´</li>
</ul>
<h3 id="ç§¯åˆ†æ˜ç»†">ç§¯åˆ†æ˜ç»†</h3>
<ul>
<li>æœˆåº¦ç§¯åˆ†id</li>
<li>æ˜ç»†id</li>
<li>ç”¨æˆ·id</li>
<li>ç§¯åˆ†å€¼</li>
<li>ç±»å‹ï¼ˆå¦‚ï¼šæ¶ˆè€—ï¼Œè·å–ç­‰ï¼‰</li>
<li>æ“ä½œ</li>
<li>æ—¶é—´</li>
</ul>
<h3 id="å…‘å¥–æ˜ç»†">å…‘å¥–æ˜ç»†</h3>
<ul>
<li>å…‘å¥–æ˜ç»†id</li>
<li>ç”¨æˆ·id</li>
<li>å¥–å“æ¶ˆè€—ç§¯åˆ†</li>
<li>å¥–å“åç§°</li>
<li>æ—¶é—´</li>
</ul>
<h2 id="æµç¨‹">æµç¨‹</h2>
<h3 id="ç§¯åˆ†è·å–">ç§¯åˆ†è·å–</h3>
<p>ç§¯åˆ†ç”±ç”¨æˆ·æ“ä½œç”Ÿæˆï¼ŒåŒæ—¶å­˜å‚¨äºæœˆåº¦ç§¯åˆ†è¡¨å’Œç§¯åˆ†æ˜ç»†è¡¨ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240218/1708264217470.webp"
alt="1708264217470" />
<figcaption aria-hidden="true">1708264217470</figcaption>
</figure>
<h3 id="ç§¯åˆ†å…‘å¥–">ç§¯åˆ†å…‘å¥–</h3>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240218/1708264217472.webp"
alt="1708264217472" />
<figcaption aria-hidden="true">1708264217472</figcaption>
</figure>
<h3 id="å…¶ä»–">å…¶ä»–</h3>
<p>é™¤äº†ä¸Šé¢è¿™äº›ï¼Œè¿˜æœ‰</p>
<ul>
<li>æ€»ç§¯åˆ†æŸ¥è¯¢ï¼Œæœ€è¿‘12ä¸ªæœˆçš„æœˆåº¦ç§¯åˆ†-å¯ç”¨ç§¯åˆ†ä¹‹å’Œ</li>
<li>ç§¯åˆ†æ˜ç»†æŸ¥è¯¢ï¼Œå€’åºæŸ¥è¯¢æœˆåº¦ç§¯åˆ†å’Œæœˆåº¦ç§¯åˆ†æ˜ç»†</li>
<li>ç§¯åˆ†å…‘å¥–æ˜ç»†ï¼Œç­‰ï¼Œç®€å•çš„å°±ä¸å¤šæäº†</li>
</ul>
<h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2>
<p>ç§¯åˆ†å…‘å¥–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PointRecord</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> points;</span><br><span class="line">    <span class="keyword">private</span> LocalDate expirationDate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ æ–¹æ³•ã€getterså’Œsettersçœç•¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canConsume</span><span class="params">(<span class="type">int</span> requiredPoints)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.points &gt;= requiredPoints;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">consume</span><span class="params">(<span class="type">int</span> requiredPoints)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (canConsume(requiredPoints)) &#123;</span><br><span class="line">            <span class="built_in">this</span>.points -= requiredPoints;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Insufficient points to consume.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PointService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">redeemReward</span><span class="params">(User user, <span class="type">int</span> rewardPointCost)</span> &#123;</span><br><span class="line">        List&lt;PointRecord&gt; sortedRecords = getSortedUnexpiredPointRecords(user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (PointRecord record : sortedRecords) &#123;</span><br><span class="line">            <span class="keyword">if</span> (record.canConsume(rewardPointCost)) &#123;</span><br><span class="line">                record.consume(rewardPointCost);</span><br><span class="line">                rewardPointCost = <span class="number">0</span>; <span class="comment">// å·²ç»æ»¡è¶³æ¶ˆè€—æ¡ä»¶ï¼Œè·³å‡ºå¾ªç¯</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                rewardPointCost -= record.getPoints();</span><br><span class="line">                record.setPoints(<span class="number">0</span>); <span class="comment">// æ¶ˆè€—å®Œè¯¥è®°å½•æ‰€æœ‰ç§¯åˆ†</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°æ•°æ®åº“ä¸­çš„ç§¯åˆ†æ˜ç»†è¡¨</span></span><br><span class="line">        updateDatabase(sortedRecords);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœrewardPointCostä»ç„¶å¤§äº0ï¼Œè¯´æ˜ç§¯åˆ†ä¸è¶³ï¼Œéœ€è¦åœ¨æ­¤å¤„å¤„ç†å¼‚å¸¸æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (rewardPointCost &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InsufficientPointsException</span>(<span class="string">&quot;Not enough valid points to redeem the reward.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥äº†è·å–ç”¨æˆ·æœªè¿‡æœŸä¸”å·²æ’åºçš„ç§¯åˆ†è®°å½•åˆ—è¡¨çš„æ–¹æ³•ï¼ˆgetSortedUnexpiredPointRecordsï¼‰ä»¥åŠæ›´æ–°æ•°æ®åº“çš„æ–¹æ³•ï¼ˆupdateDatabaseï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>PointRecord</code>ç±»ä»£è¡¨å•ä¸ªç§¯åˆ†è®°å½•ï¼ŒåŒ…å«ç§¯åˆ†å€¼å’Œè¿‡æœŸæ—¥æœŸã€‚<code>PointService</code>ä¸­çš„<code>redeemReward</code>æ–¹æ³•é¦–å…ˆè·å–ç”¨æˆ·çš„æ‰€æœ‰æœªè¿‡æœŸä¸”æŒ‰è¿‡æœŸæ—¶é—´æ’åºçš„ç§¯åˆ†è®°å½•ï¼Œç„¶åéå†è¿™äº›è®°å½•ï¼Œä¼˜å…ˆæ‰£é™¤æœ€æ—©åˆ°æœŸçš„ç§¯åˆ†ã€‚å½“æ‰€éœ€å…‘æ¢ç§¯åˆ†æ•°é‡å‡ä¸º0æ—¶åœæ­¢æ‰£é™¤ã€‚å¦‚æœæœ€åä»æœ‰å‰©ä½™çš„å…‘æ¢ç§¯åˆ†éœ€æ±‚ï¼Œåˆ™æŠ›å‡ºç§¯åˆ†ä¸è¶³çš„å¼‚å¸¸ã€‚</p>
<p>å®é™…åº”ç”¨ä¸­ï¼Œä½ éœ€è¦æ ¹æ®æ•°æ®åº“æŸ¥è¯¢ç»“æœå¡«å……<code>sortedRecords</code>åˆ—è¡¨ï¼Œå¹¶åœ¨æ‰£é™¤ç§¯åˆ†åæ›´æ–°æ•°æ®åº“ä»¥åæ˜ æ–°çš„ç§¯åˆ†çŠ¶æ€ã€‚</p>
<h1 id="å°ç»“">å°ç»“</h1>
<p>å…¶å®è¿˜æœ‰å¾ˆå¤šå†…å®¹æ²¡æœ‰ç»†ç©¶ï¼Œè¿™éƒ¨åˆ†å°±ç•™ç»™è®¤çœŸçœ‹çš„ä½ ä»¬äº†ã€‚å“ˆå“ˆå“ˆğŸ˜‚</p>
<p>ç§¯åˆ†è¡¥å¿ã€é€€è´§ç­‰åœºæ™¯ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å¦‚ä½•è€ƒè™‘ï¼Œç•™ç»™ä½ ä»¬äº†ã€‚</p>
<p>æœ€åçš„æœ€åï¼Œå…¶å®åœ¨ç³»ç»Ÿè®¾è®¡ä¹‹å‰ï¼Œéœ€æ±‚åˆ†ææ˜¯é‡ä¸­ä¹‹é‡ï¼Œä¸€å®šè¦è®²éœ€æ±‚çœ‹é€ï¼Œå°¤å…¶æ˜¯å¤šè€ƒè™‘ä¸€äº›åœºæ™¯ã€‚</p>
<p>ä¸‹é¢æœ‰ä¸€å¼ å…³äºç§¯åˆ†è¿‡æœŸå’Œå…‘å¥–çš„åœºæ™¯è‰å›¾ï¼Œæ˜¯æˆ‘åœ¨æ€è€ƒæ—¶ç”»çš„ï¼Œä¸æƒ³å¤šè§£é‡Šäº†ï¼Œè‡ªå·±çœ‹å§ğŸ˜</p>
<p>æœ€åå››ä¸ªå­—ï¼šè·³å‡ºæ—¶é—´ã€‚</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/gh/wnhyang/picx-images-hosting@master/20240218/1708264217473.webp"
alt="1708264217473" />
<figcaption aria-hidden="true">1708264217473</figcaption>
</figure>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>æ‹™ä½œè‰°è¾›ï¼Œå­—å¥å¿ƒè¡€ï¼Œæœ›è¯¸å›å‚é’ï¼Œå¤šäºˆæ”¯æŒï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<hr />
<p>ä¸ªäººåšå®¢ï¼š<a
href="https://wnhyang.github.io/">æ— å¥ˆä½•æ¨ï¼ˆwnhyangï¼‰</a></p>
<p>ä¸ªäººè¯­é›€ï¼š<a href="https://www.yuque.com/wnhyang"
title="wnhyang">wnhyang</a></p>
<p>å…±äº«è¯­é›€ï¼š<a href="https://www.yuque.com/wnh"
title="åœ¨çº¿çŸ¥è¯†å…±äº«">åœ¨çº¿çŸ¥è¯†å…±äº«</a></p>
<p>Githubï¼š<a href="https://github.com/wnhyang">wnhyang -
Overview</a></p>
<p><img data-src="https://wnhyang.github.io/images/wechat_channel.webp" /></p>
]]></content>
      <tags>
        <tag>é¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¼–è¯‘åŸç†-è¯­æ³•åˆ†æå®éªŒ</title>
    <url>/article/b49b1500.html</url>
    <content><![CDATA[<p>ä»æ¥æ²¡æœ‰å†™è¿‡å…³äºè¯¾ç¨‹å†…å®¹çš„åšå®¢ï¼Œè¿™ç®—æ˜¯ç¬¬ä¸€æ¬¡å§</p>
<p>ä»Šå¤©åˆšåšäº†ç¼–è¯‘åŸç†è¯­æ³•åˆ†æå®éªŒï¼Œæ„Ÿè§‰è¿˜æŒºæœ‰è¶£çš„å†™ä¸€å†™è®°å½•ä¸€ä¸‹</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p>ä¸»è¦è¿˜æ˜¯è¯¾å ‚å†…å®¹ï¼Œä¹¦æœ¬çŸ¥è¯†</p>
<p><a
href="https://zheng.blog.csdn.net/article/details/89857531?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-5.baidujs&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-5.baidujs">ç¼–è¯‘åŸç†
â€”â€” é€’å½’ä¸‹é™åˆ†ææ³•</a></p>
<span id="more"></span>
<h1 id="å®éªŒå†…å®¹">å®éªŒå†…å®¹</h1>
<p>å®éªŒæŒ‡å¯¼ä¹¦å°±ä¸æ•´ä¸ªè´´äº†ï¼Œä¸‹é¢æ˜¯å®éªŒå†…å®¹</p>
<p>1ã€å¯¹ç®—æœ¯è¡¨è¾¾å¼æ–‡æ³•ï¼š</p>
<p>Eâ†’TE'</p>
<p>E'â†’+TE'| -TE' |Îµ</p>
<p>Tâ†’FT'</p>
<p>T'â†’*FT'| /FT' |Îµ</p>
<p>Fâ†’(E) | id |num</p>
<p>æ„é€ å…¶é€’å½’ä¸‹é™åˆ†æç¨‹åºã€‚</p>
<p>2ã€å®éªŒæ­¥éª¤</p>
<p>ï¼ˆ1ï¼‰æ±‚å‡ºæ¯ä¸ªéç»ˆç»“ç¬¦çš„FIRSTå’ŒFOLLOWé›†ï¼ˆåœ¨ç»ƒä¹ æœ¬ä¸Šæ±‚å‡ºå³å¯ï¼Œä¸è¦æ±‚ç¨‹åºå®ç°ï¼‰ï¼›</p>
<p>ï¼ˆ2ï¼‰æ„é€ é€’å½’ä¸‹é™åˆ†æç¨‹åºï¼›</p>
<p>ï¼ˆ3ï¼‰éªŒè¯ç»“æœã€‚</p>
<h1 id="ä»£ç ">ä»£ç </h1>
<p>å…³äºç¼–è¯‘åŸç†çš„çŸ¥è¯†æˆ‘ä¹Ÿä¸è¡¥å……äº†ï¼Œåˆšå­¦æˆ‘è¿˜æ²¡ææ˜ç™½å‘¢</p>
<p>åºŸè¯ä¸å¤šæ•°ç›´æ¥ä¸Šä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.year21h1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: wnhyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2021-04-16 09:55</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ex2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç®—æœ¯è¡¨è¾¾å¼æ–‡æ³•</span></span><br><span class="line"><span class="comment">     * Eâ†’TE&#x27;</span></span><br><span class="line"><span class="comment">     * E&#x27;â†’+TE&#x27;| -TE&#x27; |Îµ</span></span><br><span class="line"><span class="comment">     * Tâ†’FT&#x27;</span></span><br><span class="line"><span class="comment">     * T&#x27;â†’*FT&#x27;| /FT&#x27; |Îµ</span></span><br><span class="line"><span class="comment">     * Fâ†’(E) | id |num</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> String s;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        s = sc.next();</span><br><span class="line">        E();</span><br><span class="line">        System.out.println(sb);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">E</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        sb.append(<span class="string">&quot;E-&gt;TE&#x27;\t&quot;</span>);</span><br><span class="line">        T();</span><br><span class="line">        Ep();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">Ep</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (!end() &amp;&amp; (sym() == <span class="string">&#x27;+&#x27;</span> || sym() == <span class="string">&#x27;-&#x27;</span>)) &#123;</span><br><span class="line">            sb.append(<span class="string">&quot;E&#x27;-&gt;&quot;</span>).append(sym()).append(<span class="string">&quot;TE&#x27;\t&quot;</span>);</span><br><span class="line">            index++;</span><br><span class="line">            T();</span><br><span class="line">            Ep();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sb.append(<span class="string">&quot;E&#x27;-&gt;Îµ\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">T</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        sb.append(<span class="string">&quot;T-&gt;FT&#x27;\t&quot;</span>);</span><br><span class="line">        F();</span><br><span class="line">        Tp();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">Tp</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (!end() &amp;&amp; (sym() == <span class="string">&#x27;*&#x27;</span> || sym() == <span class="string">&#x27;/&#x27;</span>)) &#123;</span><br><span class="line">            sb.append(<span class="string">&quot;T&#x27;-&gt;&quot;</span>).append(sym()).append(<span class="string">&quot;FT&#x27;\t&quot;</span>);</span><br><span class="line">            index++;</span><br><span class="line">            F();</span><br><span class="line">            Tp();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sb.append(<span class="string">&quot;T&#x27;-&gt;Îµ\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">F</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (!end()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sym() == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                sb.append(<span class="string">&quot;F-&gt;(E)\t&quot;</span>);</span><br><span class="line">                index++;</span><br><span class="line">                E();</span><br><span class="line">                <span class="keyword">if</span> (sym() == <span class="string">&#x27;)&#x27;</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    index++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sym() == <span class="string">&#x27;i&#x27;</span>) &#123;</span><br><span class="line">                index++;</span><br><span class="line">                <span class="keyword">if</span> (sym() == <span class="string">&#x27;d&#x27;</span>) &#123;</span><br><span class="line">                    sb.append(<span class="string">&quot;F-&gt;id\t&quot;</span>);</span><br><span class="line">                    index++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sym() == <span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">                index++;</span><br><span class="line">                <span class="keyword">if</span> (sym() == <span class="string">&#x27;u&#x27;</span>) &#123;</span><br><span class="line">                    index++;</span><br><span class="line">                    <span class="keyword">if</span> (sym() == <span class="string">&#x27;m&#x27;</span>) &#123;</span><br><span class="line">                        sb.append(<span class="string">&quot;F-&gt;num\t&quot;</span>);</span><br><span class="line">                        index++;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸‹æ ‡åˆæ³•ï¼Œå½“å‰ä¸‹æ ‡å­—ç¬¦ï¼Œå¦åˆ™å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  å½“å‰å­—ç¬¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">char</span> <span class="title function_">sym</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= s.length()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.charAt(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ä¸²å°¾</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">end</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> index == s.length();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>(id+num)*num/(num-id)</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>E-&gt;TE' T-&gt;FT' F-&gt;(E) E-&gt;TE' T-&gt;FT' F-&gt;id T'-&gt;Îµ
E'-&gt;+TE' T-&gt;FT' F-&gt;num T'-&gt;Îµ E'-&gt;Îµ T'-&gt;*FT' F-&gt;num
T'-&gt;/FT' F-&gt;(E) E-&gt;TE' T-&gt;FT' F-&gt;num T'-&gt;Îµ E'-&gt;-TE'
T-&gt;FT' F-&gt;id T'-&gt;Îµ E'-&gt;Îµ T'-&gt;Îµ E'-&gt;Îµ</p>
</blockquote>
<p>æœ¬ç¨‹åºèƒ½è¾“å‡ºè¾“å…¥ä¸²çš„æ„é€ è¿‡ç¨‹ï¼ˆå½“ç„¶å¿…é¡»æ˜¯åˆæ³•å¯æ„é€ çš„ï¼‰ï¼Œå¦‚æœé€’å½’æ„é€ å¤±è´¥åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<p>ä¸Šé¢ç¨‹åºåªçœ‹ä»£ç å†ç»“åˆç»™å®šçš„ç®—æœ¯è¡¨è¾¾å¼å°±æ¯”è¾ƒå®¹æ˜“çœ‹æ‡‚äº†ï¼Œä½†å…¶å®è‡ªå·±åŠ¨æ‰‹åšä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼Œé¦–å…ˆè¦ç†æ¸…å…¶é€»è¾‘å…³ç³»ï¼Œç„¶åå†™ä»£ç ï¼Œè¿™æ—¶å¾€å¾€æ€»ä¼šä¼šå¿½ç•¥ä¸€äº›ç»†èŠ‚ï¼Œéœ€è¦è‡ªå·±è°ƒè¯•ï¼Œç›´åˆ°è‡ªå·±æ»¡æ„</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>èƒ½åœ¨ç¹å¿™æˆ–æ˜¯è¯´æ— èŠçš„ç”Ÿæ´»ä¸­æ‰¾åˆ°è‡ªå·±å–œæ¬¢å¹¶èƒ½æŠ•å…¥è¿›å»çš„äº‹å®åœ¨æ˜¯å¤ªå¹¸ç¦äº†</p>
]]></content>
      <tags>
        <tag>JavaSE</tag>
        <tag>ç¼–è¯‘åŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªå·±å†™spring-boot-starter-xxx</title>
    <url>/article/96219520.html</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯boot">ä»€ä¹ˆæ˜¯Boot</h1>
<p>è¿‡å»åªæ˜¯ç”¨äººå®¶çš„<code>xxx-spring-boot-starter</code>ï¼Œç”¨ç€æ˜¯æŒºçˆ½çš„ï¼Œä½†éšç€å­¦ä¹ å’Œå·¥ä½œï¼Œå‘ç°ä¸ç®¡æ˜¯æµè¡Œçš„å¼€æºäº§å“è¿˜æ˜¯å…¬å¸å†…éƒ¨æ€»ä¼šå­˜åœ¨ä¸€äº›è‡ªå·±å°è£…çš„<code>starter</code>ï¼Œåˆšå¼€å§‹æˆ‘ä¹Ÿæ˜¯å¾ˆä¸è§£ï¼Œä¸€ç›´è§‰å¾—åŸæœ¬çš„å°±æ˜¯æœ€å¥½çš„ï¼Œæ ¹æœ¬ä¸éœ€è¦æˆ‘ä»¬æ”¹ä»€ä¹ˆï¼Œç›´åˆ°æˆ‘å­¦ç€å»è‡ªå·±å†™<code>starter</code>ï¼Œæ‰å‘è§‰è„šæ‰‹æ¶çš„æ„ä¹‰å°±åœ¨è¿™å•Šï¼Œè¿™å°±æ˜¯<code>boot</code>å•Šï¼</p>
<p>ä¸å¤šåºŸè¯äº†ï¼Œæ¥ä¸‹æ¥ä»å¼€æºé¡¹ç›®<a
href="https://github.com/YunaiV/yudao-cloud">yudao-cloud</a>è¯´èµ·æ€ä¹ˆåœ¨å¼€æºæ¡†æ¶çš„åŸºç¡€ä¸Šå°è£…è‡ªå·±çš„<code>starter</code>ã€‚</p>
<h1 id="å°è¯•è‡ªå·±å†™starter">å°è¯•è‡ªå·±å†™starter</h1>
<p>æˆ‘ä»¬å°±ä»<code>yudao-spring-boot-starter-job</code>å¼€å§‹åšä¸€ä¸ªå±äºè‡ªå·±çš„starterå§ï¼</p>
<h2 id="å‰æè¯´æ˜">å‰æè¯´æ˜</h2>
<p><code>SpringBoot</code>åŸºç¡€çš„å°±ä¸ç”¨å¤šæäº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒç‰ˆæœ¬ä¼šæœ‰ä¸€äº›å·®å¼‚ï¼Œ<a
href="https://blog.csdn.net/Zhangsama1/article/details/129198456">SpringBoot2.7ä¹‹åè‡ªåŠ¨é…ç½®ç±»å·®å¼‚</a>ã€‚</p>
<span id="more"></span>
<h2 id="ä¾èµ–">ä¾èµ–</h2>
<p>ä¸»è¦å°±æ˜¯<code>spring</code>æ ¸å¿ƒä¾èµ–å’Œ<code>xxl-job</code>çš„ä¾èµ–ï¼Œç¬¬ä¸€ä¸ªä¾èµ–æ˜¯è‡ªå·±å†™çš„å·¥å…·ç±»ï¼Œå¯ä»¥ä¸ç”¨åœ¨æ„ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.wnhyang.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okay-framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okay-spring-boot-starter-job<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.wnhyang.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okay-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Spring æ ¸å¿ƒ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Job ç›¸å…³ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å·¥å…·ç±»ç›¸å…³ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.validation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.validation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®ç±»">é…ç½®ç±»</h2>
<p>ä¸»è¦é…ç½®ä¸¤é¡¹å†…å®¹</p>
<ul>
<li><code>xxl-job</code>é…ç½®</li>
<li><code>spring</code>å¼‚æ­¥çº¿ç¨‹</li>
</ul>
<h3 id="å¼‚æ­¥çº¿ç¨‹é…ç½®">å¼‚æ­¥çº¿ç¨‹é…ç½®</h3>
<p><code>Spring</code>è‡ªå¸¦å…¶è‡ªåŠ¨é…ç½®ï¼Œå¼€å¯ä¾¿å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncAutoConfiguration</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="xxl-jobé…ç½®">XXL-JOBé…ç½®</h3>
<p><code>xxl-job</code>å…·ä½“é…ç½®å¯å‚è€ƒå…¶<a
href="https://www.xuxueli.com/xxl-job/">å®˜ç½‘</a>ï¼Œè¿™é‡Œåšäº†ç®€å•çš„å°è£…ã€‚</p>
<p>é¦–å…ˆæ˜¯å±æ€§é…ç½®ç±»ï¼Œå°†åŸå…ˆ<code>xxl-job</code>çš„é…ç½®é¡¹è¿›è¡Œåˆ†ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(&quot;xxl.job&quot;)</span></span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XxlJobProperties</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦å¼€å¯ï¼Œé»˜è®¤ä¸º true å¼€å¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Boolean</span> <span class="variable">enabled</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¿é—®ä»¤ç‰Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String accessToken;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ§åˆ¶å™¨é…ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;æ§åˆ¶å™¨é…ç½®ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> AdminProperties admin;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œå™¨é…ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;æ‰§è¡Œå™¨é…ç½®ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ExecutorProperties executor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * XXL-Job è°ƒåº¦å™¨é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AdminProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è°ƒåº¦å™¨åœ°å€</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@NotEmpty(message = &quot;è°ƒåº¦å™¨åœ°å€ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> String addresses;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * XXL-Job æ‰§è¡Œå™¨é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ExecutorProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * é»˜è®¤ç«¯å£</span></span><br><span class="line"><span class="comment">         * &lt;p&gt;</span></span><br><span class="line"><span class="comment">         * è¿™é‡Œä½¿ç”¨ -1 è¡¨ç¤ºéšæœº</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">PORT_DEFAULT</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * é»˜è®¤æ—¥å¿—ä¿ç•™å¤©æ•°</span></span><br><span class="line"><span class="comment">         * &lt;p&gt;</span></span><br><span class="line"><span class="comment">         * å¦‚æœæƒ³æ°¸ä¹…ä¿ç•™ï¼Œåˆ™è®¾ç½®ä¸º -1</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">LOG_RETENTION_DAYS_DEFAULT</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * åº”ç”¨å</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@NotEmpty(message = &quot;åº”ç”¨åä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> String appName;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ‰§è¡Œå™¨çš„ IP</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> String ip;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ‰§è¡Œå™¨çš„ Port</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">port</span> <span class="operator">=</span> PORT_DEFAULT;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ—¥å¿—åœ°å€</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@NotEmpty(message = &quot;æ—¥å¿—åœ°å€ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> String logPath;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ—¥å¿—ä¿ç•™å¤©æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">logRetentionDays</span> <span class="operator">=</span> LOG_RETENTION_DAYS_DEFAULT;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…·ä½“é…ç½®åŒäºå®˜ç½‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(XxlJobSpringExecutor.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;xxl.job&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;XxlJobProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XxlJobAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="keyword">public</span> XxlJobExecutor <span class="title function_">xxlJobExecutor</span><span class="params">(XxlJobProperties properties)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;[xxlJobExecutor][åˆå§‹åŒ– XXL-Job æ‰§è¡Œå™¨çš„é…ç½®]&quot;</span>);</span><br><span class="line">        XxlJobProperties.<span class="type">AdminProperties</span> <span class="variable">admin</span> <span class="operator">=</span> properties.getAdmin();</span><br><span class="line">        XxlJobProperties.<span class="type">ExecutorProperties</span> <span class="variable">executor</span> <span class="operator">=</span> properties.getExecutor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ‰§è¡Œå™¨</span></span><br><span class="line">        <span class="type">XxlJobExecutor</span> <span class="variable">xxlJobExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XxlJobSpringExecutor</span>();</span><br><span class="line">        xxlJobExecutor.setIp(executor.getIp());</span><br><span class="line">        xxlJobExecutor.setPort(executor.getPort());</span><br><span class="line">        xxlJobExecutor.setAppname(executor.getAppName());</span><br><span class="line">        xxlJobExecutor.setLogPath(executor.getLogPath());</span><br><span class="line">        xxlJobExecutor.setLogRetentionDays(executor.getLogRetentionDays());</span><br><span class="line">        xxlJobExecutor.setAdminAddresses(admin.getAddresses());</span><br><span class="line">        xxlJobExecutor.setAccessToken(properties.getAccessToken());</span><br><span class="line">        <span class="keyword">return</span> xxlJobExecutor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é’ˆå¯¹å¤šç½‘å¡ã€å®¹å™¨å†…éƒ¨ç½²ç­‰æƒ…å†µï¼Œå¯å€ŸåŠ© &quot;spring-cloud-commons&quot; æä¾›çš„ &quot;InetUtils&quot; ç»„ä»¶çµæ´»å®šåˆ¶æ³¨å†ŒIPï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      1ã€å¼•å…¥ä¾èµ–ï¼š</span></span><br><span class="line"><span class="comment">     *          &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">     *             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">     *             &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">     *             &lt;version&gt;$&#123;version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="comment">     *         &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      2ã€é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…å®¹å™¨å¯åŠ¨å˜é‡</span></span><br><span class="line"><span class="comment">     *          spring.cloud.inetutils.preferred-networks: &#x27;xxx.xxx.xxx.&#x27;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      3ã€è·å–IP</span></span><br><span class="line"><span class="comment">     *          String ip_ = inetUtils.findFirstNonLoopbackHostInfo().getIpAddress();</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¿™é‡Œçš„é…ç½®æ¥çœ‹çœŸçš„å’Œ<code>xxl-job</code>å®˜ç½‘é…ç½®å‡ ä¹ä¸€æ ·ï¼Œç›¸æ¯”æ¥è¯´ï¼Œæˆ‘ç†è§£çš„å¥½å¤„å°±æ˜¯ï¼Œå¯ä»¥é»˜è®¤è®¾ç½®ä¸€äº›é…ç½®å±æ€§ï¼Œå½“ç„¶è¿™ä¸ªä»…ä»…æ˜¯å¯¹äºå¼€æºé¡¹ç›®å°è£…æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­ï¼Œå¦å¤–æœ‰äº›å…¬å¸é‡Œçš„<code>boot</code>æ·±å…¥æºç å°±ä¸æ˜¯è¿™ä¹ˆç®€å•çš„äº†ã€‚</p>
<h2 id="è‡ªåŠ¨åŒ–é…ç½®">è‡ªåŠ¨åŒ–é…ç½®</h2>
<p>é¡¹ç›®<code>resources/META-INF/spring</code>ä¸‹<code>org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶æ·»åŠ ä¸Šé¢çš„<code>Configuration</code>ç±»å°±å¥½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cn.wnhyang.okay.framework.job.config.XxlJobAutoConfiguration</span><br><span class="line">cn.wnhyang.okay.framework.job.config.AsyncAutoConfiguration</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<h3 id="ä¾èµ–-1">ä¾èµ–</h3>
<p>æ·»åŠ è‡ªå·±çš„<code>boot</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.wnhyang.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okay-spring-boot-starter-job<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®">é…ç½®</h3>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">xxl.job.enabled</span>=<span class="string">false</span></span><br><span class="line"><span class="comment">### è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ ¹åœ°å€ [é€‰å¡«]ï¼šå¦‚è°ƒåº¦ä¸­å¿ƒé›†ç¾¤éƒ¨ç½²å­˜åœ¨å¤šä¸ªåœ°å€åˆ™ç”¨é€—å·åˆ†éš”ã€‚æ‰§è¡Œå™¨å°†ä¼šä½¿ç”¨è¯¥åœ°å€è¿›è¡Œ&quot;æ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œ&quot;å’Œ&quot;ä»»åŠ¡ç»“æœå›è°ƒ&quot;ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œï¼›</span></span><br><span class="line"><span class="attr">xxl.job.admin.addresses</span>=<span class="string">http://123.60.165.53:8083/xxl-job-admin</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨é€šè®¯TOKEN [é€‰å¡«]ï¼šéç©ºæ—¶å¯ç”¨ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.accessToken</span>=<span class="string">default_token</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨AppName [é€‰å¡«]ï¼šæ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œåˆ†ç»„ä¾æ®ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œ</span></span><br><span class="line"><span class="attr">xxl.job.executor.appname</span>=<span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨IP [é€‰å¡«]ï¼šé»˜è®¤ä¸ºç©ºè¡¨ç¤ºè‡ªåŠ¨è·å–IPï¼Œå¤šç½‘å¡æ—¶å¯æ‰‹åŠ¨è®¾ç½®æŒ‡å®šIPï¼Œè¯¥IPä¸ä¼šç»‘å®šHostä»…ä½œä¸ºé€šè®¯å®ç”¨ï¼›åœ°å€ä¿¡æ¯ç”¨äº &quot;æ‰§è¡Œå™¨æ³¨å†Œ&quot; å’Œ &quot;è°ƒåº¦ä¸­å¿ƒè¯·æ±‚å¹¶è§¦å‘ä»»åŠ¡&quot;ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.ip</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨ç«¯å£å· [é€‰å¡«]ï¼šå°äºç­‰äº0åˆ™è‡ªåŠ¨è·å–ï¼›é»˜è®¤ç«¯å£ä¸º9999ï¼Œå•æœºéƒ¨ç½²å¤šä¸ªæ‰§è¡Œå™¨æ—¶ï¼Œæ³¨æ„è¦é…ç½®ä¸åŒæ‰§è¡Œå™¨ç«¯å£ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.port</span>=<span class="string">9997</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨è¿è¡Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç£ç›˜è·¯å¾„ [é€‰å¡«] ï¼šéœ€è¦å¯¹è¯¥è·¯å¾„æ‹¥æœ‰è¯»å†™æƒé™ï¼›ä¸ºç©ºåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.logpath</span>=<span class="string">logs/xxl-job/jobhandler</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ—¥å¿—æ–‡ä»¶ä¿å­˜å¤©æ•° [é€‰å¡«] ï¼š è¿‡æœŸæ—¥å¿—è‡ªåŠ¨æ¸…ç†, é™åˆ¶å€¼å¤§äºç­‰äº3æ—¶ç”Ÿæ•ˆ; å¦åˆ™, å¦‚-1, å…³é—­è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="attr">xxl.job.executor.logretentiondays</span>=<span class="string">30</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># çº¿ç¨‹æ± é…ç½®</span></span><br><span class="line"><span class="attr">spring.task.execution.thread-name-prefix</span>=<span class="string">task-</span></span><br><span class="line"><span class="attr">spring.task.execution.pool.core-size</span>=<span class="string">8</span></span><br><span class="line"><span class="attr">spring.task.execution.pool.max-size</span>=<span class="string">20</span></span><br><span class="line"><span class="attr">spring.task.execution.pool.keep-alive</span>=<span class="string">60s</span></span><br><span class="line"><span class="attr">spring.task.execution.pool.queue-capacity</span>=<span class="string">200</span></span><br><span class="line"><span class="attr">spring.task.execution.pool.allow-core-thread-timeout</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.task.execution.shutdown.await-termination</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.task.execution.shutdown.await-termination-period</span>=<span class="string">60</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è™½ç„¶åªæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¿˜æ˜¯å¯ä»¥çœ‹å‡ºæ¥è‡ªå·±å†™<code>starter</code>çš„æ„ä¹‰çš„ï¼Œç›®å‰æˆ‘ä¹Ÿæ˜¯åœ¨å­¦ä¹ å¼€æºé¡¹ç›®çš„åŒæ—¶è‡ªå·±åšä¸€äº›ç®€å•çš„å°é¡¹ç›®ç©ï¼Œè¿˜è§‰å¾—æŒºæœ‰æ„æ€çš„ã€‚</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>èŒä¸šæ•™è‚²ä»€ä¹ˆæ—¶å€™èƒ½è¢«æ¥å—ï¼Ÿ</title>
    <url>/article/d89980ea.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æåˆ°èŒä¸šæ•™è‚²ï¼Œä¸çŸ¥é“ä½ çš„ç¬¬ä¸€æƒ³æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>åæ­£æ€»ä¼šæœ‰è¿™æ ·é‚£æ ·ğŸ˜ğŸ˜ŠğŸ˜’ğŸ¤”ğŸ˜–ğŸ˜‘ğŸ˜¯ğŸ˜”ğŸ˜­ğŸ˜®â€ğŸ’¨ğŸ¥¶ğŸ¤§ğŸ¤­ğŸ¤“ï¼Œä¸åŒçš„ååº”ï¼Œä¸åŒçš„æƒ³æ³•</p>
<p>èŒä¸šæ•™è‚²å¥½åƒå¤©ç”Ÿå°±åœ¨é«˜ç­‰æ•™è‚²ä¹‹ä¸‹ï¼Œä¸å—äººé‡è§†ï¼Œä¸è¢«äººæ¥å—ã€‚ä»–ä»¬å¥½åƒå¤©ç”Ÿå°±è¢«äººæŠ›å¼ƒï¼Œæ˜¯æ²¡æœ‰æœªæ¥çš„ï¼ï¼Ÿ</p>
<p>æˆ‘ä¹Ÿä¸€ç›´å¥½å¥‡ï¼Œä¸ºä»€ä¹ˆå•Šï¼Ÿå‡­ä»€ä¹ˆå•Šï¼Ÿ</p>
<iframe src="//player.bilibili.com/player.html?aid=638375544&amp;bvid=BV1dY4y1a7H7&amp;cid=584483124&amp;page=1&amp;autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<p>ä¸Šé¢çš„è§†é¢‘æ˜¯æˆ‘å®šä¸‹è¿™ç¯‡æ–‡ç« åï¼Œåœ¨æ–°åç¤¾-å¤®è§†æ–°é—»ä¸­çœ‹åˆ°çš„ï¼Œæ°å·§ä¸æˆ‘è¿™ç¯‡æ–‡ç« ä¸è°‹è€Œåˆã€‚</p>
<span id="more"></span>
<h1 id="æ­£é¢˜">æ­£é¢˜</h1>
<p>æ®æˆ‘äº†è§£ï¼Œåœ¨å¾·å›½ï¼ŒèŒä¸šæ•™è‚²å·²ç»å‘å±•çš„éå¸¸æˆç†Ÿã€‚ä»–ä»¬çš„èŒä¸šæ•™è‚²å’Œæ™®é€šé«˜ä¸­ã€å¤§å­¦ä¸€æ ·æ˜¯æ•™è‚²è¡Œä¸šçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚è€Œä¸”æ¥å—èŒä¸šæ•™è‚²å¹¶ä¸”é€‰æ‹©èŒä¸šæ•™è‚²çš„äººæ•°å¾ˆå¤šï¼Œå¯¹äºä»–ä»¬è€Œè¨€ï¼ŒèŒä¸šæ•™è‚²å’Œæ™®é€šé«˜ç­‰æ•™è‚²æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œéƒ½æ˜¯æ¥å—æ•™è‚²ï¼Œä¸ºç¤¾ä¼šè¾“é€äººæ‰ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¦‚ä»Šçš„å‘å±•ç°çŠ¶æ˜¯æ— æ³•ç›´æ¥ä¸è¿™æ ·çš„å‘è¾¾å›½å®¶åšå¯¹æ¯”ã€‚ä»–ä»¬æœ‰ç€æˆç†Ÿä¸”å‘è¾¾çš„æ•™è‚²ä½“ç³»ï¼Œå®Œæ•´çš„ç¤¾ä¼šä¿éšœæœºåˆ¶ï¼Œæ›´é‡è¦çš„æ˜¯ç»æµå‘è¾¾ï¼Œå¯ä»äº‹çš„æ›´å¤šæ˜¯é«˜çº§åŠ³åŠ¨ã€‚ä»–ä»¬å·²ç»å®Œæˆäº†åŠ³åŠ¨åŠ›çš„è½¬æ¢ï¼Œä½çº§åŠ³åŠ¨é€æ¸è¢«æœºå™¨å–ä»£ï¼Œæ›´å¤šçš„æ˜¯é«˜çº§äººæ‰éœ€æ±‚ï¼ŒæœåŠ¡ä¸šéœ€æ±‚ç­‰ç­‰ã€‚å¦‚ä»Šçš„æˆ‘ä»¬ï¼Œä¹Ÿæ˜¯éœ€è¦é«˜çº§äººæ‰çš„ï¼Œä½†æ˜¯è¿™æ–¹é¢çš„ç¼ºå£æ¯”ä¾‹ä¸ä½çº§åŠ³åŠ¨è¿˜æ˜¯å‘ˆç°å¾ˆå¤§çš„å·®åˆ«çš„ã€‚è¯´çš„ç®€å•ç‚¹ï¼Œä¸­å›½å¦‚ä»Šè¿˜æœªèƒ½å®ŒæˆåŠ³åŠ¨åŠ›çš„å‡çº§ï¼Œè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚æˆ‘ä¹Ÿç›¸ä¿¡åœ¨ä¸è¿œçš„å°†æ¥ï¼Œä¸­å›½ä¹Ÿä¼šæˆä¸ºé‚£æ ·â€”â€”ä»äº‹ä½çº§åŠ³åŠ¨çš„äººè¶Šæ¥è¶Šå°‘ï¼Œäººä»¬çš„ç”Ÿæ´»è¿‡çš„è¶Šæ¥è¶Šå¹¸ç¦ã€‚è¿™æ˜¯éœ€è¦æˆ‘ä»¬ä¸€èµ·ä¸æ‡ˆåŠªåŠ›çš„ã€‚</p>
<p>æ—¢ç„¶è¿™æ˜¯å†å²å‘å±•çš„å¿…ç„¶è¶‹åŠ¿ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿˜è¦å®Œæˆè¿™ç¯‡æ–‡ç« å‘¢ï¼Ÿ</p>
<p>å› ä¸ºæˆ‘æ€•å•Šï¼æˆ‘æ€•ç°åœ¨äººéƒ½è¢«æ•™è‚²çš„è¿½æ±‚é«˜çº§äººæ‰ï¼Œä¸è‚¯æ¥å—å¦‚ä»Šçš„ç°å®å¹¶ä¸èƒ½æ”¯æ’‘å¾—èµ·é‚£ä¹ˆå¤šçš„â€œé«˜çº§äººæ‰â€ã€‚æ‰€ä»¥æ‰æœ‰ç°åœ¨çš„å†…å·ï¼Œéœ€è¦çš„å°±é‚£ä¹ˆå¤šï¼Œè‡ªç„¶å¤šå‡ºæ¥çš„å°±æ˜¯æ²¡å¿…è¦çš„ï¼Œå°±è¦è¢«æ·˜æ±°ã€‚å¦å¤–ï¼ŒèŒä¸šæ•™è‚²ä»å‡ºç°å¼€å§‹å°±è¢«è´´ä¸Šæ ‡ç­¾ï¼Œç°åœ¨å°¤å…¶ä¸¥é‡ã€‚æ ‡ç­¾ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯è¢«æ ‡ç­¾åŒ–ã€‚çœ‹çœ‹ç°åœ¨èŒä½JDï¼Œæ€»ä¼šæœ‰äº®çœ¼çš„211/985ï¼Œæ‰€æœ‰å¤§å­¦ç”Ÿéƒ½é€ƒä¸è„±é‚£ä¸ªæ ‡ç­¾ï¼Œé‚£ä¸ªæ ‡ç­¾ä¼šä¼´éšä»–ä¸€ç”Ÿã€‚æ›´å¯æ€•çš„æ˜¯æˆ‘è§åˆ°è¶Šæ¥è¶Šå¤šçš„äººï¼ˆåŒ…æ‹¬æˆ‘ï¼‰ï¼Œå–œæ¬¢ä»¥åŒéã€å››éã€äºŒæœ¬ã€ä¸‰æœ¬ã€èŒæ•™è‡ªé»‘ï¼Œä¹Ÿæ¸æ¸æ¥å—åˆ«äººç»™äºˆè‡ªå·±çš„æ ‡ç­¾ã€‚æˆ‘å¤šä¹ˆå¸Œæœ›ï¼Œä»€ä¹ˆæ—¶å€™å¤§å®¶èƒ½èˆå¼ƒè¿™äº›æ ‡ç­¾ï¼ŒæŠ›å¼ƒåè§ï¼Œæ¥å—æ‰€æœ‰åŠªåŠ›çš„äººå•Šã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å½“ä¸­å›½å…¨ä½“å¼€å§‹æ¥å—èŒä¸šæ•™è‚²çš„æ—¶å€™å°±æ˜¯ä¸­å›½è¿›å…¥æ–°æ—¶ä»£çš„æ—¶å€™ã€‚</p>
]]></content>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>è§„çŸ©</title>
    <url>/article/1e97111a.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ä¿—è¯è¯´çš„å¥½ï¼Œæ²¡æœ‰è§„çŸ©ä¸æˆæ–¹åœ†ã€‚éšç€ä¸€ä¸ªäººçš„æˆé•¿ï¼Œå°±ä¼šå‘ç°ï¼Œè§„çŸ©çš„åˆ¶çº¦æ€§è¶Šæ¥è¶Šå¼ºå¤§ã€‚ç°åœ¨æˆ‘ä¹Ÿæ˜¯æ·±æœ‰ä½“ä¼šå•Šï¼</p>
<span id="more"></span>
<h1 id="å®ˆè§„çŸ©çš„äººæœ€å—æ¬ºè´Ÿ">å®ˆè§„çŸ©çš„äººæœ€å—æ¬ºè´Ÿ</h1>
<p>è¿™æ˜¯Bç«™ä¸Šçš„ä¸€ä¸ªè§†é¢‘ï¼Œè¯´çš„æ˜¯â€œå®ˆè§„çŸ©çš„äººæœ€å—æ¬ºè´Ÿâ€ã€‚æœ¬æ¥è¿™ä¸ªä¸æ˜¯æˆ‘æ‰€è®¡åˆ’è®¨è®ºçš„èŒƒå›´ï¼Œä½†æ˜¯çœ‹äº†è§†é¢‘è¿˜æ˜¯å¾ˆæœ‰æ„Ÿæ‚Ÿçš„ï¼Œä¸‹é¢ç›´æ¥è´´ä¸Šè§†é¢‘ã€‚</p>
<iframe src="//player.bilibili.com/player.html?aid=513157465&amp;bvid=BV173411c754&amp;cid=767193987&amp;page=1&amp;autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<p>çœ‹å®Œè§†é¢‘ï¼Œæˆ‘ç›¸ä¿¡ä¼šæœ‰ä¸€å¤§æ‰¹äººä¼šæ„ŸåŒèº«å—çš„ã€‚å…¶å®æˆ‘è§‰å¾—è¿™æ›´åƒæ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œæ€ä¹ˆè¯´ï¼Ÿæœ€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¢«æ•™è‚²éµå®ˆè§„çŸ©ï¼Œæˆ‘ä»¬å¤©çœŸæ— é‚ªï¼Œéƒ½éå¸¸ä¹æ„å»éµå®ˆè§„çŸ©ï¼Œåšä¸ªå¥½å­©å­ï¼Œä½†æ˜¯å´æ€»æ€»æœ‰ä¸å®ˆè§„çŸ©çš„äººï¼Œæˆ‘ä»¬æ— å¯å¥ˆä½•ä¸”å¾€å¾€å¹¶ä¸ä¼šå› ä¸ºå®‰åˆ†å®ˆçŸ©è¢«ä¼˜å¾…ï¼Œé•¿æ­¤ä»¥å¾€ï¼Œå®ˆè§„çŸ©å¥½åƒå°±æ˜¯ä¸ªâ€œå‚»å­â€ã€‚ä¸€æ—¦æˆ‘ä»¬å°è¯•æ‰“ç ´è§„çŸ©ï¼Œä¸å†æœ‰é‚£æ ·çš„å¿ƒç†éšœç¢ï¼Œè§„çŸ©ç¡®å®ä¸å†æ˜¯é‚£ä¹ˆä¸å¯ä¾µçŠ¯äº†ï¼Œæˆ‘ä»¬ä¹Ÿå°±å˜æˆäº†æ—©å‰è‡ªå·±çœ¼ä¸­ä¸å®ˆè§„çŸ©çš„äººäº†ã€‚</p>
<h1 id="äººç±»ç¤¾ä¼šæ˜¯éœ€è¦è§„çŸ©çš„">äººç±»ç¤¾ä¼šæ˜¯éœ€è¦è§„çŸ©çš„</h1>
<p>å‰é¢çš„éƒ½æ˜¯æˆ‘ä¸´æ—¶å¤–åŠ çš„ï¼Œæˆ‘æ›´æƒ³è¯´çš„æ˜¯ï¼Œéšç€æˆé•¿ï¼Œæ‰€æœ‰äººéƒ½åº”å½“è®¤è¯†åˆ°ä¸–ç•Œæ˜¯éœ€è¦è§„çŸ©çš„åˆ¶çº¦çš„ã€‚</p>
<p>å¤©çœŸæµªæ¼«çš„ç«¥å¹´æ˜¯ä½ æˆ‘éƒ½å›ä¸å»çš„ç¾å¥½æ—¶å…‰ï¼Œç«¥å¹´çš„ç¾å¥½å°±åœ¨æ— æ‹˜æ— æŸä¸Šï¼Œä»€ä¹ˆéƒ½ä¸ç”¨æƒ³ï¼Œä»€ä¹ˆéƒ½å¯ä»¥æƒ³ã€‚æ¸æ¸çš„ï¼Œæˆ‘ä»¬å—åˆ°å®¶é‡Œã€å­¦æ ¡çš„åˆ¶çº¦ï¼Œæˆ‘ä»¬è¦æ€æ ·æ€æ ·ï¼Œä¸èƒ½æ€æ ·æ€æ ·ï¼Œæœ‰ç€ä¸€å †è§„çŸ©è¦æˆ‘ä»¬éµå®ˆã€‚ç¦»å¼€å­¦æ ¡è¿›å…¥ç¤¾ä¼šåæ›´æ˜¯è¿™æ ·ï¼Œè§„çŸ©è¶Šæ¥è¶Šå¤šã€‚äº¤é€šæœ‰äº¤è§„ï¼Œæ³•å¾‹æœ‰æ³•è§„ï¼Œå…¬å¸ä¹Ÿæ˜¯ä¸€å †ç¹ççš„è§„å®šã€‚ã€‚ã€‚</p>
<p>äººéƒ½è¢«å¤§å¤§å°å°çš„è§„çŸ©ç»™æ¡†èµ·æ¥äº†ï¼Œç„¶è€Œï¼Œè¦çŸ¥é“äººç±»ç¤¾ä¼šå»¶ç»­å‘å±•å°±æ˜¯éœ€è¦è¿™äº›è§„çŸ©çš„ã€‚</p>
<h1 id="ç»“">ç»“</h1>
<p>åˆæ˜¯ä¸€ç¯‡å†™åˆ°ä¸€åŠä¸çŸ¥é“æ€ä¹ˆå†™ï¼Œç”šè‡³ä¸çŸ¥é“æˆ‘å†™çš„æ„ä¹‰åœ¨å“ªï¼Œæ˜¯ä¸æ˜¯å…¨éƒ¨åˆ æ‰å½“æ²¡å†™è¿‡ï¼ŒğŸ˜‚</p>
<p>å°±æ­¤å§ï¼Œä¹‹åæ¯å¼€å§‹ä¸€ç¯‡æ–°çš„ï¼Œä¸€å®šè¦åšä¸ªå®Œç¾çš„è§„åˆ’ï¼Œæƒ³åˆ°ä»€ä¹ˆå°±åœ¨å½“æ—¶è®°å½•ä¸‹æ¥ï¼Œçœçš„å†™çš„æ—¶å€™å…¨å¿˜äº†ğŸ¤¡</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³PicGo+GitHubæ­å»ºä¸ªäººå›¾åºŠä¸Šä¼ å¤±è´¥é—®é¢˜</title>
    <url>/article/60f304a0.html</url>
    <content><![CDATA[<p>ä¸ºäº†è§£å†³å†™ä¸ªäººåšå®¢ï¼Œå›¾ç‰‡çš„é—®é¢˜ï¼ŒèŠ±è´¹äº†å¤§æ¦‚ä¸€æ•´å¤©ï¼Œåœ¨ç½‘ä¸Šæœå„ç§æ–¹æ³•ï¼Œä½†è¿‡ç¨‹ä¸æ˜¯é‚£ä¹ˆé¡ºåˆ©ï¼Œç»ˆäºæœ€åæœ‰äº†ä¸€ä¸ªæ¯”è¾ƒå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œåšä¸ªåˆ†äº«ï¼</p>
<span id="more"></span>
<h1 id="è¿‡ç¨‹å¯è·³è¿‡ç›´æ¥çœ‹è§£å†³">è¿‡ç¨‹ï¼ˆå¯è·³è¿‡ç›´æ¥çœ‹è§£å†³ï¼‰</h1>
<p>æœ€å¼€å§‹åœ¨è¿™é‡Œ<a
href="https://blog.csdn.net/Cassie_zkq/article/details/79968598">åˆ©ç”¨githubåˆ†äº«å›¾ç‰‡</a>ï¼Œä½†ç»“æœä¸å¤ªè¡Œï¼Œç„¶åæŸ¥èµ„æ–™æœ‰äººè§£ç­”éœ€è¦ä¿®æ”¹hostæ–‡ä»¶çš„ï¼Œæ„Ÿè§‰æŒ‰é‚£æ ·åšæŒºéº»çƒ¦çš„ï¼Œå°¤å…¶ä¸æƒ³åœ¨ç”µè„‘å†…ä¹±æï¼ˆä¸æ‡‚å˜›ï¼Œæ€•å‡ºé—®é¢˜ï¼‰ï¼Œäºæ˜¯æ”¾å¼ƒè¿™ç§æ–¹æ³•ã€‚</p>
<p>å†ç„¶åçœ‹åˆ°è®¸å¤šäººç”¨äº‘ï¼ˆé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘...ï¼‰å­˜å›¾ç‰‡åˆ†äº«ï¼Œæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œè€Œä¸”è¿™äº›äº‘æ›´å•†ä¸šåŒ–ä¸€äº›ï¼Œå¥½åƒä¸é€‚åˆæˆ‘è¿™ç§åªæ˜¯å­˜æ”¾å›¾ç‰‡å†™åšå®¢çš„äººï¼Œä¸ªåˆ«è¿˜è¦æ”¶è´¹ï¼Œé‚£ç®—äº†ï¼Œæ¢ã€‚</p>
<p>ç»ˆäºå‘ç°äº†<a
href="https://blog.csdn.net/yefcion/article/details/88412025">PicGo +
GitHub
æ­å»ºä¸ªäººå›¾åºŠå·¥å…·</a>ï¼Œå…ˆæ”¶è—äº†ï¼ˆå¤ªæ™šäº†å½“æ—¶ï¼‰ã€‚ç¬¬äºŒå¤©ï¼Œç…§ç€è¿™ç¯‡åšå®¢å‡ ä¹æŠŠæ‰€æœ‰å†…å®¹é…ç½®å¥½äº†ï¼Œå¿ƒæƒ³ç»ˆäºæˆäº†ï¼è¿˜æ²¡æ¥åŠé«˜å…´ï¼Œå™©æ¢¦æ¥äº†</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/PicGo.png"
alt="å¤±è´¥ï¼Œå¤±è´¥ï¼Œè¿˜æ˜¯å¤±è´¥" />
<figcaption aria-hidden="true">å¤±è´¥ï¼Œå¤±è´¥ï¼Œè¿˜æ˜¯å¤±è´¥</figcaption>
</figure>
<p>ä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œæ€»æ˜¯ä¸Šä¼ å¤±è´¥ï¼Œäººéƒ½è¦ç–¯äº†ï¼Œä¹‹ååˆæ‰¾åˆ°<a
href="https://blog.csdn.net/TalesOV/article/details/104450037?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.channel_param">PicGoè¸©å‘è®°ï¼ˆä¸Šä¼ å¤±è´¥ï¼ŒæœåŠ¡ç«¯å‡ºé”™ï¼Œè¯·é‡è¯•ï¼‰</a>ï¼Œæ£€æŸ¥å®Œæ‰€æœ‰é—®é¢˜ï¼Œä¾ç„¶ä¸Šä¼ å¤±è´¥ï¼Œç›´åˆ°é‚£å¤©ä¸‹åˆï¼Œå¿½ç„¶æœ‰äº†çµæ„Ÿï¼Œé‚£å°±è¯•å®ƒä¸€è¯•ã€‚</p>
<h1 id="æœ€ç»ˆè§£å†³">æœ€ç»ˆè§£å†³</h1>
<p>ä¸å°±æ˜¯ä¸Šä¼ é—®é¢˜å˜›ï¼ç›´æ¥ç”¨GitHubä¸Šä¼ å•Š</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/Upload.png"
alt="Upload files" />
<figcaption aria-hidden="true">Upload files</figcaption>
</figure>
<p>å½“æ—¶ä¸Šä¼ åªæˆåŠŸäº†ä¸€å¼ ç…§ç‰‡ï¼Œå°±æ˜¯è¿™å¼ ç…§ç‰‡è®©æˆ‘çœ‹åˆ°äº†å¸Œæœ›</p>
<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/PicGoGitHub.png"
alt="PicGo" />
<figcaption aria-hidden="true">PicGo</figcaption>
</figure>
<p>è®°å¾—å½“æ—¶è‡ªå·±è®¾ç½®çš„è‡ªå®šä¹‰åŸŸåå§ï¼Œé‚£ä¹ˆä½ ä¸Šä¼ åœ¨GitHubçš„å›¾ç‰‡åˆ†äº«åœ°å€å°±æ˜¯</p>
<p>è‡ªå®šä¹‰åŸŸåï¼ˆé€šå¸¸æ˜¯https://......@masterï¼‰+/å›¾ç‰‡.æ ¼å¼(é€šå¸¸æ˜¯pngï¼Œjpg...)</p>
<p>æˆåŠŸï¼å½“æ—¶æˆ‘æ˜¯å¼€å¿ƒæäº†ã€‚</p>
]]></content>
      <tags>
        <tag>Git/GitHub</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¯é£å¤§æ¨¡å‹ä½“éªŒ</title>
    <url>/article/feab7b27.html</url>
    <content><![CDATA[<h1 id="è®¯é£å¤§æ¨¡å‹">è®¯é£å¤§æ¨¡å‹</h1>
<p>ä»Šå¹´<code>AI</code>çš„é£æ½®è¿˜æ²¡æœ‰åœæ­‡ï¼Œå°±åƒæ˜¯å»å¹´çš„ä¿„ä¹Œæˆ˜äº‰ä¸€æ ·ï¼Œå¥½åƒæ˜¯åªæ˜¯å‡ºç°åœ¨å»å¹´çš„å¹´åˆï¼Œç„¶åå°±æ¶ˆå¤±äº†ä¸€æ ·ï¼Œå…¶å®ä¸€ç›´æˆ˜äº‰éƒ½åœ¨æŒç»­ï¼Œåªæ˜¯å› ä¸ºå…¬ä¼—å·²ç»è¢«å…¶ä»–çš„æ–°é—»æ‰€è½¬ç§»äº†è§†çº¿ï¼Œæ˜¯çš„ï¼Œäººä»¬åªä¼šå¯¹å½“ä¸‹æ–°é²œçš„äº‹ç‰©æ‰€å¸å¼•ï¼Œæ€»æ˜¯å¿˜è®°ä¸€äº›å¾ˆé‡è¦çš„äº‹æƒ…ã€‚ä¸åªæ˜¯<code>AI</code>ï¼Œå¾ˆå¤šäº‹æƒ…ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå½“ä»–å‡ºç°åœ¨çƒ­æœæ—¶ï¼Œæˆ‘ä»¬å»å…³æ³¨ï¼Œå»æŒ–æ˜ï¼Œå»æ€è€ƒï¼Œç­‰ä¸€ä¸‹æ›´å…·å¸å¼•åŠ›çš„çƒ­æœå‡ºç°ï¼Œä¹‹å‰çš„å˜å¾—æ— äººé—®æ´¥çš„æ—¶å€™ï¼Œå¥½åƒå®ƒå°±è¿‡å»äº†ä¸€æ ·ï¼Œç„¶è€Œå¾€å¾€ä¸æ˜¯è¿™æ ·çš„ã€‚è®²çš„æœ‰ç‚¹åäº†ï¼Œæ‰¯å›è¯é¢˜ï¼Œå›½å†…<code>AI</code>ï¼Œå‡†ç¡®çš„è¯´æ˜¯ä»Šå¹´å¤§ç«çš„<code>AI</code>å¤§æ¨¡å‹å¾ˆè®©å›½äººå¤±æœ›ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬æˆ‘ï¼Œå…·ä½“çš„å°±ä¸åæ§½äº†ï¼ŒçŸ¥é“çŸ¥é“è®¯é£æ˜Ÿç«ï¼Œä½“éªŒäº†ä¸€ä¸‹è¿˜éå¸¸ä¸é”™ï¼Œæ‰æœ‰äº†ä¸€ç‚¹æ”¹è§‚ï¼Œè™½ç„¶ä¸å›½å¤–çš„å¤§æ¨¡å‹ç›¸æ¯”è¿˜æœ‰å·®è·ï¼Œä½†è¿˜æ˜¯å€¼å¾—æ¬£æ…°çš„ã€‚</p>
<p>æœ€è¿‘è®¯é£å¼€å‘å…¬ä¼—å…è´¹ä½“éªŒè®¯é£å¤§æ¨¡å‹apiçš„æœºä¼šï¼Œæ­£å¥½æˆ‘ä¹Ÿä½“éªŒäº†ä¸€ä¸‹ï¼Œæ¯äººå…è´¹<code>20w``token</code>ï¼Œè¿˜æ˜¯å¯ä»¥ç©ä¸€ç©çš„ï¼Œå€Ÿæ­¤è®°å½•ä½“éªŒæ„Ÿå—ã€‚</p>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a
href="https://mp.weixin.qq.com/s/TkSsBsTRQVqWk8AvueLJ4A">è®¯é£å¤§æ¨¡å‹</a></p>
<p><a href="https://juejin.cn/post/7020964728386093093">ä¸€æ–‡åƒé€
WebSocket åŸç† åˆšé¢è¯•å®Œï¼Œè¶çƒ­èµ¶ç´§æ•´ç†</a></p>
<p><a
href="https://blog.csdn.net/KeepStruggling/article/details/105543449">WebsocketæŠ€æœ¯çš„Javaå®ç°(ä¸Šç¯‡)</a></p>
<p><a
href="https://blog.csdn.net/KeepStruggling/article/details/105923142">WebsocketæŠ€æœ¯çš„Javaå®ç°(ä¸‹ç¯‡)</a></p>
<p><a
href="https://zhuanlan.zhihu.com/p/613527997">springbootæ•´åˆwebSocketï¼ˆçœ‹å®Œå³å…¥é—¨ï¼‰</a></p>
<h1 id="websocket">WebSocket</h1>
<p>æåˆ°<code>WebSocket</code>çš„åŸå› æ˜¯è®¯é£æä¾›çš„<code>Java</code>ç¤ºä¾‹ä½¿ç”¨å°±æ˜¯<code>WebSocket</code>æŠ€æœ¯ï¼Œè¿™ä¸‹ä¸å¾—ä¸äº†è§£ä¸€ä¸‹äº†ã€‚</p>
<p><code>Socket</code>æƒ³å¿…åœ¨å­¦ä¹ è®¡ç®—æœºç½‘ç»œæ—¶éƒ½ä¼šæœ‰äº›äº†è§£ï¼Œè¿™ä¸ª<code>WebSocket</code>è™½ç„¶å¬è¿‡ä½†å®Œå…¨æ²¡æ¦‚å¿µï¼Œæ‰€ä»¥ä¸Šé¢è´´ä¸Šäº†ä¸€äº›<code>WebSocket</code>å…¥é—¨çš„ä¸€äº›åšå®¢ï¼Œçœ‹äº†ä»¿ä½›æ‰“å¼€äº†æ–°ä¸–ç•Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢åªä¼šå†™<code>Controller</code>æä¾›çš„<code>Http</code>æ¥å£ï¼Œè¿™ä¸ª<code>WebSocket</code>è¿˜æ˜¯å¾ˆå€¼å¾—å­¦ä¸€ä¸‹çš„ï¼Œç›¸ä¿¡èƒ½ç©ä¸€äº›å¾ˆæœ‰è¶£çš„äº‹æƒ…ã€‚</p>
<p>ä¸‹é¢æ˜¯ç›´æ¥ä¸‹è½½è®¯é£å®˜ç½‘<code>Java</code>ç¤ºä¾‹è¿è¡Œåï¼Œå¯¹è¯ä¸­äº§ç”Ÿçš„ï¼Œè¿™ä¸€æ¬¡å¯¹è¯ä½¿ç”¨å¤§æ¦‚500å¤š<code>token</code>ï¼Œå…è´¹ä½“éªŒçš„<code>token</code>è¿™æ ·çœ‹èµ·æ¥ä¸ç®—å¤šäº†ï¼Œä½†è¿˜æ˜¯èƒ½å°è¯•ä¸€ä¸‹é›†æˆåœ¨å¾®ä¿¡å…¬ä¼—å·ã€ç¾¤èŠæœºå™¨äººã€ä¸ªäººç½‘ç«™ç­‰ç­‰ã€‚</p>
<blockquote>
<p>æˆ‘ï¼šjavaå®ç°websocketçš„æ–¹æ³•
å¤§æ¨¡å‹ï¼šJavaå®ç°WebSocketçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªä½¿ç”¨Java-WebSocketåº“çš„ç®€å•ç¤ºä¾‹ï¼š</p>
<ol type="1">
<li>é¦–å…ˆï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ Java-WebSocketä¾èµ–ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Mavené¡¹ç›®ï¼Œå¯ä»¥åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.java-websocket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Java-WebSocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>åˆ›å»ºä¸€ä¸ªWebSocketå®¢æˆ·ç«¯ç±»ï¼Œç»§æ‰¿<code>org.java_websocket.client.WebSocketClient</code>ï¼Œå¹¶é‡å†™ç›¸å…³æ–¹æ³•ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&gt;<span class="keyword">import</span> org.java_websocket.client.WebSocketClient;</span><br><span class="line">&gt;<span class="keyword">import</span> org.java_websocket.handshake.ServerHandshake;</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">import</span> java.net.URI;</span><br><span class="line">&gt;<span class="keyword">import</span> java.net.URISyntaxException;</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyWebSocketClient</span> <span class="keyword">extends</span> <span class="title class_">WebSocketClient</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MyWebSocketClient</span><span class="params">(URI serverUri)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>(serverUri);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(ServerHandshake handshakedata)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;è¿æ¥å·²æ‰“å¼€&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š &quot;</span> + message);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">(<span class="type">int</span> code, String reason, <span class="type">boolean</span> remote)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;è¿æ¥å·²å…³é—­&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Exception ex)</span> &#123;</span><br><span class="line">       ex.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="type">MyWebSocketClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyWebSocketClient</span>(<span class="keyword">new</span> <span class="title class_">URI</span>(<span class="string">&quot;ws://localhost:8080/websocket&quot;</span>));</span><br><span class="line">           client.connect();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (URISyntaxException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>MyWebSocketClient</code>çš„ç±»ï¼Œç»§æ‰¿äº†<code>WebSocketClient</code>ï¼Œå¹¶é‡å†™äº†<code>onOpen</code>ã€<code>onMessage</code>ã€<code>onClose</code>å’Œ<code>onError</code>æ–¹æ³•ã€‚ç„¶ååœ¨<code>main</code>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–äº†è¿™ä¸ªç±»ï¼Œå¹¶è¿æ¥åˆ°äº†ä¸€ä¸ªè¿è¡Œåœ¨æœ¬åœ°çš„WebSocketæœåŠ¡å™¨ã€‚
*************************************************************************************
æˆ‘ï¼š</p>
</blockquote>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°ä½ï¼Œé‚£ä¹Ÿæ˜¯ä½ ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†</title>
    <url>/article/74020674.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æœ€è¿‘åˆ·åˆ°ä¸€ä¸ªè§†é¢‘ï¼Œé“¾æ¥å¦‚ä¸‹</p>
<p><a
href="https://www.bilibili.com/video/BV1si4y117Fy">æˆ‘æƒ³è®©æ¯ä¸ªäººéƒ½çœ‹çš„è§†é¢‘å•Šå•Šå•Šå•Šå•Šå•Šï¼_å“”å“©å“”å“©_bilibili</a></p>
<iframe src="//player.bilibili.com/player.html?aid=552045088&amp;bvid=BV1si4y117Fy&amp;cid=541906595&amp;page=1&amp;autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe>
<p>çœ‹å®Œç¡®å®æœ‰æ‰€æ„Ÿè§¦ã€æ”¶è·ï¼Œéå¸¸æ¨èçœ‹ä¸€ä¸‹ğŸ˜</p>
<p>æˆ‘çš„æ€»ç»“å¦‚é¢˜ï¼Œâ€œè®°ä½ï¼Œé‚£ä¹Ÿæ˜¯ä½ ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†â€</p>
<p>å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­ç»å¸¸æ€§çš„æœ‰â€”â€”â€œè¿‡å®Œè¿™æ®µæ—¶é—´æˆ‘å°±xxxäº†â€çš„æƒ³æ³•</p>
<p>å¦‚è¿‡å®Œæœ€åä¸€å‘¨ï¼Œè€ƒå®Œè¯•ï¼Œå°±è½»æ¾äº†</p>
<p>è¿‡å®Œé«˜ä¸­ï¼Œä¸Šäº†å¤§å­¦ï¼Œå°±è‡ªç”±äº†</p>
<p>å¾€å¾€äº§ç”Ÿè¿™æ ·çš„æƒ³æ³•ï¼Œéƒ½æ˜¯å¯¹å½“ä¸‹ç”Ÿæ´»çš„ä¸æ»¡ï¼Œå¿ƒä¸­æœ‰ç§æ¸´æ±‚èµ¶å¿«è¿‡å®Œè¿™æ®µæ—¶é—´çš„ï¼Œä¹Ÿå°±å› æ­¤å¯¹äºè¿™æ®µæ—¶é—´æˆ‘ä»¬ä¸çè§†ï¼Œç”šè‡³è§‰å¾—è¿™æ®µæ—¶é—´ä¸æ˜¯è‡ªå·±æƒ³ç»å†çš„ï¼Œå®ƒä¸å±äºè‡ªå·±ã€‚ä½†æ˜¯æ¸…é†’ä¸€ä¸‹å•Šï¼Œè¿™å°±æ˜¯ä½ çš„ç”Ÿæ´»å•Šï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼-è¡Œä¸ºæ¨¡å¼-æ¨¡æ¿æ¨¡å¼</title>
    <url>/article/2958ee2b.html</url>
    <content><![CDATA[<h1 id="æè¦">æè¦</h1>
<p>å‰å‡ å¤©åšé¡¹ç›®æ—¶ï¼Œé‡åˆ°ä¸€ä¸ªç±»è®¾è®¡çš„é—®é¢˜ï¼Œè¯·æ•™åŒäº‹åï¼Œå‚è€ƒå·²æœ‰ä»£ç å®Œæˆæˆ‘éœ€è¦çš„è®¾è®¡ï¼Œè¿™æ—¶å›æƒ³è®¾è®¡æ¨¡å¼ï¼Œç»ˆäºèƒ½ä½“ä¼šå®ƒçš„æ„ä¹‰äº†ğŸ˜</p>
<span id="more"></span>
<h1 id="é—®é¢˜">é—®é¢˜</h1>
<p>ç®€å•æè¿°é—®é¢˜å°±æ˜¯ï¼š</p>
<p>æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªä»Rediså–ç‰¹å®šStringç¼“å­˜çš„å·¥å…·ï¼Œå¯ä»¥ä¾æ®ä¸åŒå‚æ•°åšä¸åŒå–ç¼“å­˜æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pattern</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStringById</span><span class="params">(String keyPrefix, Long id)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">            </span><br><span class="line">        A</span><br><span class="line">            </span><br><span class="line">		...</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getStringByIdWithRedisLock</span><span class="params">(String keyPrefix, Long id)</span>&#123;</span><br><span class="line">		...</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">        B   </span><br><span class="line">            </span><br><span class="line">		...</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•´ä½“æ¨¡æ¿å°±æ˜¯è¿™æ ·ï¼Œç°åœ¨é—®é¢˜æ˜¯ï¼Œåœ¨è°ƒç”¨<code>private</code>æ—¶Béƒ¨åˆ†ä»£ç ä¼šä¾æ®å‚æ•°ä¸åŒèµ°ä¸åŒçš„è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘éœ€è¦ä¸€ç§èƒ½åˆ©ç”¨è¿™ä¸ªæ¨¡æ¿ï¼Œä»…ä»…æš´éœ²å‡º<code>public</code>æ–¹æ³•ä¾¿å¯å®Œæˆè°ƒç”¨</p>
<p>å¯ä»¥æƒ³ä¸€æƒ³è‡ªå·±ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<h1 id="è§£å†³">è§£å†³</h1>
<p>æœ‰æƒ³æ³•äº†å—ï¼Ÿ</p>
<p>æœ€ç®€å•æœ€å®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯è®¾è®¡æ¥å£ï¼Œä¸åŒå®ç°ï¼Œæ„é€ å™¨ä¼ å…¥è¿™æ ·çš„</p>
<p>åºŸè¯ä¸å¤šè¯´ä¸Šä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RedisService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡idè·å–stringï¼Œæµç¨‹ï¼šredis-db</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨åŒ…æ‹¬ï¼Œé€šè¿‡idè·å–usernameï¼Œé€šè¿‡idè·å–titleï¼Œé€šè¿‡idè·å–categoryNameï¼Œé€šè¿‡idè·å–feedbackTypeNameã€‚ã€‚ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keyPrefix</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">getStringById</span><span class="params">(String keyPrefix, Long id)</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">getStringByIdFromDB</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾è®¡æ¥å£ï¼Œå…¶å®ä¹Ÿä¸æ˜¯å¾ˆå¿…è¦ï¼Œç›´æ¥è®¾è®¡æŠ½è±¡ç±»ä¹Ÿå¯ä»¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractRedisService</span> <span class="keyword">implements</span> <span class="title class_">RedisService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStringById</span><span class="params">(String keyPrefix, Long id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(keyPrefix + id);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(value)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;ç¼“å­˜æœªå‘½ä¸­ã€‚ã€‚ã€‚å°†è¦æŸ¥è¯¢æ•°æ®åº“ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">            value = getStringByIdWithRedisLock(keyPrefix, id);</span><br><span class="line">            stringRedisTemplate.opsForValue().set(keyPrefix + id, value, RedisKeyConstants.DEFAULT_TTL, TimeUnit.SECONDS);</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;ç¼“å­˜å‘½ä¸­ã€‚ã€‚ã€‚ç›´æ¥è¯»å–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getStringByIdWithRedisLock</span><span class="params">(String keyPrefix, Long id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> keyPrefix + id;</span><br><span class="line">        <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> stringRedisTemplate.opsForValue()</span><br><span class="line">                .setIfAbsent(RedisLockUtils.LOCK + key, uuid, RedisLockUtils.EXPIRE, TimeUnit.SECONDS);</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(lock) &amp;&amp; lock) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;è·å–åˆ†å¸ƒå¼é”æˆåŠŸã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                value = <span class="built_in">this</span>.getStringByIdFromDB(id);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                log.error(<span class="string">&quot;æŸ¥è¯¢æ•°æ®åº“å¤±è´¥&quot;</span>, e);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                stringRedisTemplate.execute(<span class="keyword">new</span> <span class="title class_">DefaultRedisScript</span>&lt;&gt;(RedisLockUtils.UNLOCK_LUA, Boolean.class)</span><br><span class="line">                        , Collections.singletonList(RedisLockUtils.LOCK + key), uuid);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;è·å–åˆ†å¸ƒå¼é”å¤±è´¥ã€‚ã€‚ã€‚ç­‰å¾…é‡è¯•ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(RedisLockUtils.RETRY_TIME);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> getStringByIdWithRedisLock(keyPrefix, id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">getStringByIdFromDB</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å·²ç»å¾ˆæ¸…æ™°äº†è‡ªå·±çœ‹å°±èƒ½æ˜ç™½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRedisService</span> <span class="keyword">extends</span> <span class="title class_">AbstractRedisService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStringByIdFromDB</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(RedisKeyConstants.USER_NAME + id);</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(userName)) &#123;</span><br><span class="line">            <span class="keyword">return</span> userName;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;æŸ¥è¯¢äº†æ•°æ®åº“ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectByPrimaryKey(id);</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(user)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        stringRedisTemplate.opsForValue().set(RedisKeyConstants.USER_NAME + id, user.getUserName()</span><br><span class="line">                , RedisKeyConstants.DEFAULT_TTL, TimeUnit.SECONDS);</span><br><span class="line">        <span class="keyword">return</span> user.getUserName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUserName</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        stringRedisTemplate.delete(RedisKeyConstants.USER_NAME + id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠ½è±¡ç±»çš„ä¸€ä¸ªå®ç°</p>
<p>å®Œæˆè¿™ä¸ªè®¾è®¡è¿˜æ˜¯å¾ˆè‡ªè±ªï¼Œè½¬å¤´ä¸€æƒ³ï¼Œè¿™æ˜¯ä¸æ˜¯å“ªç§è®¾è®¡æ¨¡å¼å•Šï¼Ÿ</p>
<p>æœç„¶ï¼ŒæŸ¥åˆ°äº†ï¼Œå®ƒå±äºè®¾è®¡æ¨¡å¼-è¡Œä¸ºæ¨¡å¼-æ¨¡æ¿æ¨¡å¼ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥èµ„æ–™å¥½å¥½çœ‹ä¸€çœ‹</p>
<h1 id="å°ç»“">å°ç»“</h1>
<p>æœç„¶å‘ï¼Œä¸€äº›è®¾è®¡æ¨¡å¼åªæœ‰ä½ åœ¨ç”Ÿäº§å·¥ä½œä¸­æ‰ä¼šæœ‰æ›´æ·±çš„ä½“ä¼šå’Œç†è§£ï¼</p>
]]></content>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§Ÿæˆ¿è®°</title>
    <url>/article/59d8ee3f.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ä»æˆ‘çš„ç§Ÿæˆ¿ç»å†ç»™ç‚¹ç§Ÿæˆ¿å»ºè®®ã€‚</p>
<span id="more"></span>
<h1 id="çœ‹æˆ¿æº">çœ‹æˆ¿æº</h1>
<p>çœ‹æˆ¿æºçš„è¯ï¼Œæœ‰å¾ˆå¤šå¹³å°ï¼Œä»¥ä¸‹åªè¯´äº†ä¸€éƒ¨åˆ†</p>
<ul>
<li>è±†ç“£ç§Ÿæˆ¿å°ç»„ï¼ˆæˆ‘çš„ä¸»è¦é˜µåœ°ï¼Œæœ‰å¾ˆå¤šç§Ÿæˆ¿å¸–å­ï¼ŒåŒ…æ‹¬æ•´ç§Ÿã€åˆç§Ÿã€è½¬ç§Ÿç­‰ç­‰ï¼Œæœ‰äº›æ˜¯ç§Ÿå®¢ï¼Œæœ‰äº›æ˜¯ä¸­ä»‹ï¼Œæˆ¿ä¸œæ¯”è¾ƒå°‘ï¼‰</li>
<li>è‡ªå¦‚ã€æˆ‘çˆ±æˆ‘å®¶ã€è›‹å£³ã€è´å£³ï¼ˆè¿™äº›éƒ½å±äºä¸€äº›å¤§å¹³å°çš„æ”¹è£…æˆ¿ï¼Œæœ¬è´¨æ˜¯äºŒæˆ¿ä¸œï¼Œä¸è¿‡å¤§å¹³å°ä¹Ÿæ”¾å¿ƒç‚¹ï¼‰</li>
<li>å¾®ä¿¡ç¾¤ã€å°ç¨‹åºï¼ˆä¸å±äºç›´æ¥é€”å¾„ï¼Œå¦‚æœèƒ½åŠ å…¥ä¸€äº›å¾®ä¿¡ç¾¤æˆ–æ˜¯å¯é çš„æˆ¿æºå°ç¨‹åºï¼Œé‚£æˆ¿ä¸œçš„æ¦‚ç‡è¿˜æ˜¯å¤§ä¸€äº›çš„ï¼‰</li>
<li>æ¢è®¿å°åŒºï¼ˆéœ€è¦æ¢è®¿ä¸€äº›å°åŒºï¼Œæ‰¾ä¸€æ‰¾æœ‰æ²¡æœ‰ä¸€äº›æˆ¿ä¸œè´´çš„ç§Ÿæˆ¿å…¬å‘Šä¹‹ç±»çš„ï¼Œè¿™ç§é€”å¾„æœ€è€—æ—¶è€—åŠ›ï¼Œä½†ç›´æ¥å’Œæˆ¿ä¸œäº¤æµæ›´å¯é äº›ï¼‰</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<p>å½“ç„¶çœ‹æˆ¿æºçš„é€”å¾„æœ‰å¾ˆå¤šï¼Œéƒ½éœ€è¦è‡ªè¡Œç”„åˆ«</p>
<h1 id="å®åœ°è€ƒå¯Ÿ">å®åœ°è€ƒå¯Ÿ</h1>
<p>å½“ä½ é”å®šä¸€äº›å¤‡é€‰é¡¹åï¼Œéå¸¸éœ€è¦å®åœ°è€ƒå¯Ÿä¸€ä¸‹ï¼Œæ¯•ç«Ÿçœ¼è§ä¸ºå®ï¼Œç…§ç‰‡æœ‰æ—¶å¹¶ä¸èƒ½å±•ç¤ºæœ€çœŸå®çŠ¶å†µã€‚</p>
<h2 id="å…‰ç…§ä¸æˆ¿å‹">å…‰ç…§ä¸æˆ¿å‹</h2>
<p>æˆ¿å­çš„å—åŒ—æœå‘ã€çª—å£æ–¹å‘å†³å®šäº†è¿™ä¸ªå±‹å­é‡‡å…‰çŠ¶å†µã€‚çª—æˆ·å¤§ï¼Œé€šé£å¥½ï¼Œä¸ä»…åœ¨ç™½å¤©èƒ½æä¾›å……è¶³çš„é˜³å…‰æ²æµ´ï¼Œè€Œä¸”åœ¨æ„Ÿå®˜ä¸Šä½¿å±‹å­æ›´å®½æ•ï¼Œå¤šå¤šå‘çª—å¤–çœ‹çœ‹ä¹Ÿèƒ½æ„‰æ‚¦å¿ƒæƒ…ã€å¯¹çœ¼ç›ä¹Ÿå¥½ã€‚</p>
<p>æåˆ°å…‰ç…§ï¼Œè¦æ ¹æ®æ‰€åœ¨åœ°åŒºåšå‡ºç†æƒ³çš„åˆ¤æ–­ã€‚</p>
<p>æ¯”å¦‚åœ¨å¤šé›¨çš„å—æ–¹ï¼Œåˆ°äº†å—æ–¹æ½®æ¹¿çš„å¤©æ°”ï¼Œè¡£æœè¦åœ¨å“ªé‡Œæ™¾æ™’ï¼Ÿæ˜¯å¦é€šé£ï¼Ÿé˜³å…‰ç›´å°„ï¼Ÿé®å…‰éšè”½æ¡ä»¶ï¼Ÿ</p>
<p>æˆ¿å‹åªæœ‰å®åœ°çœ‹äº†æ‰çŸ¥é“ã€‚å¯ä»¥åœ¨çœ‹æˆ¿æ—¶æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœè‡ªå·±æ¬è¿›æ¥äº†ï¼Œå“ªé‡Œå‡†å¤‡æ”¾ä»€ä¹ˆï¼Œè‡ªå·±ä¼šæ€æ ·ç”Ÿæ´»åœ¨è¿™ã€‚</p>
<h2 id="å‘¨è¾¹è®¾æ–½ä¸äº¤é€š">å‘¨è¾¹è®¾æ–½ä¸äº¤é€š</h2>
<p>å‘¨è¾¹è®¾æ–½ä¸äº¤é€šæ˜¯æœ€èƒ½äº§ç”Ÿå·®ä»·çš„äº†ï¼Œé€šå¸¸ç¦»å…¬äº¤ã€åœ°é“è¿‘çš„éƒ½ä¼šè´µä¸€äº›çš„ï¼Œå‘¨è¾¹è®¾æ–½çš„è¯ï¼Œä¸»è¦å…³æ³¨ï¼šåŒ»é™¢ã€è¶…å¸‚ã€å¿«é€’ç‚¹ã€ç†å‘åº—ã€é¥­åº—ã€‚å…³äºè¿™ä¸ªä¸æˆ¿ä»·å±äºæ˜¯é±¼å’Œç†ŠæŒçš„å…³ç³»ï¼Œè¦çœ‹æ€ä¹ˆå–èˆäº†ï¼Œå¦‚æœä½ é¢„ç®—å……è¶³ï¼Œå½“æˆ‘æ²¡è¯´å–½ğŸ¤§</p>
<h1 id="ç¡®å®šç§Ÿæˆ¿å‰">ç¡®å®šç§Ÿæˆ¿å‰</h1>
<p>æˆ¿ç§Ÿæ˜¯æœ€å…³é”®çš„ï¼Œé€šå¸¸å¯ä»¥è¯•ç€å°åˆ€ä¸€ä¸‹ï¼ŒåŒæ—¶é—®æ¸…æ¥šæ°´ã€ç”µã€ç½‘æ˜¯æ€ä¹ˆç®—ï¼Œæ£€æŸ¥ä¸€ä¸‹å„ç§è®¾æ–½æ˜¯å¦å®Œå¥½ï¼Œå¯ä»¥æ‹ç…§è®°å½•ï¼ˆä»¥å…æœ‰äº›æ— èµ–è€æ— èµ–ï¼‰ï¼Œä¸€å®šè¦å¤šé—®ï¼Œæœ‰ä»€ä¹ˆç–‘é—®ç›´æ¥å‘é—®ï¼Œä¸è¦è¢«ä»–ä»¬çš„è¯è¯­ç»™éª—äº†ï¼Œä»€ä¹ˆâ€œæˆ‘ä»¬ä¹Ÿæ˜¯æ‰“å·¥çš„ï¼Œæ²¡é‚£ä¹ˆè®¤çœŸï¼Œä¸ä¼šéª—ä½ çš„â€ï¼Œâ€œè¿™ä¸ªæˆ¿å­å¾ˆæŠ¢æ‰‹çš„ï¼Œä»Šæ™šä¸å®šä¸‹ï¼Œæ˜å¤©å°±æ²¡äº†â€ç­‰ç­‰ï¼Œä»–ä»¬éƒ½æ˜¯è€æ²¹å­ï¼ŒçœŸåˆ«é‚£ä¹ˆè½»æ˜“ç›¸ä¿¡é™Œç”Ÿäººï¼ˆæ›¾ç»æˆ‘ä¹Ÿå¾ˆå¤©çœŸï¼Œç›¸ä¿¡ä»–ä»¬éƒ½æ˜¯å¥½äººï¼Œä¼šä¸ºæˆ‘è€ƒè™‘ã€‚ç°åœ¨ï¼Ÿpï¼Œè°ˆçš„éƒ½æ˜¯ç”Ÿæ„ï¼Œå“ªæ¥çš„æ„Ÿæƒ…ğŸ¤¡ï¼‰ã€‚</p>
<h1 id="ç­¾åˆåŒ">ç­¾åˆåŒ</h1>
<p>ç­¾åˆåŒæ˜¯æœ‰æ³•å¾‹æ•ˆåŠ›ï¼Œå¾ˆé‡è¦ï¼</p>
<p>è®¤çœŸçœ‹åˆåŒï¼ï¼ï¼</p>
<p>è®¤çœŸçœ‹åˆåŒï¼ï¼ï¼</p>
<p>è®¤çœŸçœ‹åˆåŒï¼ï¼ï¼</p>
<p>åˆåŒå†³å®šäº†ä½ æ˜¯å’Œè°ç­¾åˆåŒï¼Œæ˜¯å’Œæˆ¿ä¸œè¿˜æ˜¯å’Œå¹³å°ï¼Œè¿˜æ˜¯ä»€ä¹ˆï¼Œçœ‹æ¸…æ¥šäº†ï¼ï¼ï¼</p>
<p>å¦‚æœæ˜¯ä¸ªäººï¼Œæ£€æŸ¥å¯¹æ–¹çš„ä¸ªäººä¿¡æ¯ï¼Œè¿˜å¯ä»¥è®©å¯¹æ–¹å‡ºç¤ºæˆ¿äº§è¯ç­‰è¯ä»¶ã€‚</p>
<p>ä»¥é˜²ä¸‡ä¸€ï¼Œå¯ä»¥æŠŠäº¤æµçš„èŠå¤©è®°å½•å’Œé€šè¯è®°å½•ä¿å­˜ä¸‹æ¥ã€‚</p>
<h1 id="æˆ‘çš„ç»å†åæ§½">æˆ‘çš„ç»å†åæ§½</h1>
<h2 id="ä¸­ä»‹">ä¸­ä»‹</h2>
<p>å¾ˆä¸å¹¸ï¼Œç¬¬ä¸€æ¬¡ç§Ÿæˆ¿å°±é‡åˆ°ä¸­ä»‹ï¼Œä¸”å¬ä¿¡äº†å¥¹çš„è¯ï¼Œçœ‹å®Œæˆ¿å­å½“æ™šå°±äº¤äº†é’±å®šä¸‹äº†ã€‚ç¬¬äºŒå¤©æ‰äº†è§£åˆ°å¥¹æ˜¯ä¸­ä»‹è¿˜è¦ä¸­ä»‹è´¹çš„ï¼Œæˆ‘ç›´æ¥å‚»äº†ï¼Œå¯æ˜¯æˆ‘å·²ç»äº¤äº†æŠ¼é‡‘äº†ï¼Œåªèƒ½è¿™æ ·äº†ï¼ˆæ€•å¥¹æœ‰å…¶ä»–æ‰‹æ®µï¼Œè¦ä¸å›æŠ¼é‡‘ï¼‰ï¼Œæä¸æƒ…æ„¿çš„ç»™å‡ºäº†åŠä¸ªæœˆæˆ¿ç§Ÿä½œä¸ºä¸­ä»‹è´¹ï¼Œè¿˜éšæ„åœ°å’Œå¥¹ï¼ˆä¸­ä»‹ï¼Œä»£æˆ¿ä¸œï¼‰ç­¾äº†åˆåŒã€‚</p>
<h2 id="æˆ¿ä¸œæ‹–æŠ¼é‡‘">æˆ¿ä¸œæ‹–æŠ¼é‡‘</h2>
<p>æˆ‘æ¬å‡ºå»äº†ï¼Œä¸æ–­åœ°ç»™æˆ¿ä¸œå‘æ¶ˆæ¯è¦æŠ¼é‡‘ï¼Œå¯å¥¹åƒæ˜¯æ¶ˆå¤±äº†ä¸€æ ·ï¼Œä¸€ä¸ªå­—è¹¦ä¸å‡ºæ¥ï¼Œå°±æ˜¯ä¸å›æ¶ˆæ¯ï¼Œé«˜é«˜åœ¨ä¸Šã€‚</p>
<p>åœ¨æ²¡å›æˆ‘æ¶ˆæ¯æœŸé—´ä¸å¦ä¸€ä¸ªç§Ÿå®¢â€œè°ˆç”Ÿæ„â€ï¼Œè¯´ç€â€œæˆ‘æœ‰å¾ˆå¤šæˆ¿ï¼Œä½ çš„é¢„ç®—æ˜¯å¤šå°‘ï¼Ÿâ€ã€‚</p>
<p>åˆç­‰äº†ä¸€å‘¨ï¼Œä¾ç„¶æ²¡æœ‰æ¶ˆæ¯ã€‚ç›´åˆ°10å¤©å·¦å³ï¼Œæˆ‘å®åœ¨åä¸ä½äº†ï¼Œé™¤äº†æ¶ˆæ¯å‘é€ï¼Œå¼€å§‹å°è¯•ç”µè¯æ²Ÿé€šï¼Œå¯æ˜¯ç”µè¯å°±æ²¡æœ‰é€šè¿‡ã€‚å½“å¤©ç¬¬ä¸€æ¬¡å›æˆ‘â€œä»Šæ™šç»“ç®—â€ï¼Œæˆ‘ä»¥ä¸ºæˆ‘çœ‹åˆ°å¸Œæœ›ï¼Œå¯é‚£å¤©è¿‡å»å†æ²¡æ¶ˆæ¯ã€‚</p>
<p>å›æƒ³èµ·ï¼Œæ¯æ¬¡å¥¹é—®æˆ‘è¦æˆ¿ç§Ÿæ—¶ï¼Œå¥¹æ¸…æ·¡çš„ä¸€å¥â€œXæœˆæˆ¿ç§Ÿåˆ°äº†ï¼Œæœ‰ç©ºæ±‡ä¸€ä¸‹â€ï¼Œæˆ‘è¿˜æ¯•æ­æ¯•æ•¬åœ°è½¬è´¦æˆªå›¾ï¼Œè·Ÿç‹—ä¸€æ ·ã€‚</p>
<p>ç¬¬äºŒå¤©ï¼Œæˆ‘å¯ç®—å¿ä¸äº†äº†ï¼Œç”µè¯è½°ç‚¸ï¼Œä¹Ÿä¸çŸ¥é“è¿™ä¹ˆå¤šæˆ¿å­çš„æœ‰é’±äººæ˜¯æœ‰å¤šå¿™ï¼Œç”µè¯æ°¸è¿œæ˜¯åœ¨æ— äººæ¥å¬çš„æœ€åä¸€ç§’æŒ‚æ–­ï¼Œç»ˆäºæˆ‘å‘äº†ä¸€å¥â€œä»Šå¤©ç»“äº†æŠ¼é‡‘å§ï¼Œæ±‚æ±‚äº†â€ï¼Œå¥¹æ„¿æ„è¯´ä¸€å¥â€œå—¯ï¼Œè¿˜æœ‰åŠå°æ—¶åˆ°å®¶â€ã€‚æˆ‘æƒ³çŸ¥é“ä½ æ˜¯å¾ˆå–œæ¬¢è¿™ç§å±…é«˜ä¸´ä¸‹çš„æ„Ÿè§‰å—ï¼Ÿéè¦ç­‰æˆ‘æˆ‘è¯´â€œæ±‚æ±‚â€ï¼Œä»€ä¹ˆæ¯›ç—…ã€‚</p>
<p>å¯ç­‰äº†åŠä¸ªå¤šå°æ—¶ä¾ç„¶æ²¡æœ‰æ¶ˆæ¯ï¼Œæˆ‘åªèƒ½ç»§ç»­ç”µè¯è½°ç‚¸ï¼Œå¥¹æ˜¯çœŸçš„å—ä¸äº†äº†ï¼Ÿç»™ç»“äº†ï¼Œå¯è¿˜æ˜¯å°‘äº†100RMBï¼Œä¸€å¥è¯æ²¡æœ‰ï¼Œé—®å¥¹ç†ç”±æ˜¯ä»€ä¹ˆï¼Œç»§ç»­ä¸€å¥ä¸è¯´ï¼ŒçœŸçš„ç¢°åˆ°è¿™æ ·çš„æˆ¿ä¸œä¹Ÿæ˜¯å€’æ­»éœ‰äº†ã€‚</p>
<p>çœŸæƒ³ä¸é€šè¿™æ ·çš„æœ‰é’±äººè¿™ä¹ˆä¸ç—›å¿«çš„å—ï¼Ÿæˆ‘ç»™æœ‹å‹åæ§½ï¼Œä»–è¯´â€œé‚£ä½ ä»¥ä¸ºå¥¹ä¸ºå•¥è¿™ä¹ˆæœ‰é’±çš„â€ã€‚å…¶å®æˆ‘æ˜¯æƒ³å¥½å¥¹ä¸ç»™æŠ¼é‡‘çš„æ–¹æ¡ˆçš„ï¼šæˆ‘æ˜¯ç•™æœ‰ä¸€äº›è®°å½•ï¼Œæˆ‘ä¼šæŠŠè¿™äº›æ•´ç†èµ·æ¥æ”¾åœ¨å„ç§èƒ½å‘è¨€çš„å¹³å°ä¸Šï¼Œä¸ç®¡æ˜¯è§†é¢‘è¿˜æ˜¯æ–‡ç« éƒ½ä¼šæ§è¯‰è¿™æ ·çš„è¡Œä¸ºã€‚</p>
<p>åˆ°ç°åœ¨ï¼Œè™½ç„¶ç»“äº†æŠ¼é‡‘ï¼ˆä¸è¿‡ä¸å¤Ÿï¼Œä¹Ÿæ²¡è¯´æ˜åŸå› ï¼‰ï¼Œä½†è¿™ä¸ªè¦æŠ¼é‡‘çš„è¿‡ç¨‹å¯çœŸéš¾å•Šï¼Œæˆ‘è¿˜æ˜¯å†³å¿ƒå‘å‡ºæ¥æ§è¯‰ä¸€ä¸‹ã€‚</p>
<h3 id="èŠå¤©è®°å½•">èŠå¤©è®°å½•</h3>
<p><img data-src="https://pic.imgdb.cn/item/62cfe7a0f54cd3f937b4d3f1.png"
alt="1" /> <img data-src="https://pic.imgdb.cn/item/62cfe7a0f54cd3f937b4d3fe.png" alt="2" />
<img data-src="https://pic.imgdb.cn/item/62cfe7a0f54cd3f937b4d404.png"
alt="3" /> <img data-src="https://pic.imgdb.cn/item/62cfe7a0f54cd3f937b4d422.png" alt="4" />
<img data-src="https://pic.imgdb.cn/item/62cfe7a0f54cd3f937b4d42c.png"
alt="5" /> <img data-src="https://pic.imgdb.cn/item/62cfe7cef54cd3f937b53ae0.png"
alt="6" /></p>
<h3 id="åæ§½">åæ§½</h3>
<figure>
<img data-src="https://pic.imgdb.cn/item/62cfe7cef54cd3f937b53af4.png"
alt="åæ§½" />
<figcaption aria-hidden="true">åæ§½</figcaption>
</figure>
<h1 id="ç»“">ç»“</h1>
<p>æˆ‘å‘æ¥ä¸æ„¿æ„ç”¨æœ€å¤§çš„æ¶æ„æ£æµ‹ä»»ä½•äººï¼Œä½†æ˜¯æœ‰çš„äººç¡®å®å¾ˆè¿‡åˆ†</p>
<p>ä¸‰å¥ä½œç»“</p>
<ul>
<li>è¦çŸ¥é“ä¸–ç•Œæœ¬èº«å°±æ˜¯ä¸å…¬å¹³çš„</li>
<li>åˆ«è½»æ˜“ç›¸ä¿¡ä»»ä½•äºº</li>
<li>æ³•å¾‹æ­¦å™¨!?</li>
</ul>
]]></content>
      <tags>
        <tag>è‡ªå·±</tag>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼-è¡Œä¸ºæ¨¡å¼-ç­–ç•¥æ¨¡å¼</title>
    <url>/article/4eb55b31.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>åœ¨ç­–ç•¥æ¨¡å¼ï¼ˆStrategy
Patternï¼‰ä¸­ï¼Œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<p>åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„
context å¯¹è±¡ã€‚ç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚</p>
<p>å¥½å§ï¼Œä¸æŠ„äº†ï¼Œä¸Šé“¾æ¥ï¼Œhttps://www.runoob.com/design-pattern/strategy-pattern.html</p>
<p>1ã€‚ã€‚ã€‚2ã€‚ã€‚ã€‚3ã€‚ã€‚ã€‚</p>
<p>å“ˆå“ˆå“ˆå“ˆå“ˆ</p>
<p>ç­–ç•¥æ¨¡å¼è™½è¯´æ˜¯æ›¿æ¢äº†<code>ifelse</code>ï¼Œä½†çœ‹ä¸Šå»æ›´å¤æ‚äº†å‘€ï¼Ÿ</p>
<p>ä¸æ˜¯è¯´å·¥ç¨‹å°±å¾—å¤æ‚ï¼Œè€Œæ˜¯è¯´å·¥ç¨‹å°±å¾—è€ƒè™‘çš„é•¿è¿œï¼Œå¥½ç»´æŠ¤ï¼Œå¥½æ‰©å±•ğŸ˜</p>
]]></content>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯´å”±æ–°ä¸–ä»£</title>
    <url>/article/e0fcbea0.html</url>
    <content><![CDATA[<figure>
<img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/newgeneration.jpg"
alt="è¯´å”±æ–°ä¸–ä»£" />
<figcaption aria-hidden="true">è¯´å”±æ–°ä¸–ä»£</figcaption>
</figure>
<p>è¯´å”±æ–°ä¸–ä»£é™ªä¼´ç€æˆ‘ä¸€èµ·åº¦è¿‡äº†2020å¹´è¿™ä¸ªå¦‚æ­¤ç¾å¥½çš„å¤å¤©ã€‚å¦‚æœä¸æ˜¯æœ‰ç‰¹åˆ«çš„æ„Ÿæƒ…ï¼Œæˆ‘æ˜¯ä¸ä¼šå†™ä¸‹è¿™ç¯‡æ–‡ç« çš„ã€‚æ„Ÿè°¢è¿™ä¸ª2020èƒ½é‡åˆ°ã€Šè¯´å”±æ–°ä¸–ä»£ã€‹ï¼Œè¿™ä¸ªèŠ‚ç›®å¸¦ç»™äº†æˆ‘è®¸å¤šæ€è€ƒå¯è¿ªã€‚</p>
<span id="more"></span>
<h1 id="è¯´å”±">è¯´å”±</h1>
<p>å¦‚æœä½ æ²¡æœ‰çœ‹è¿‡è¿™ä¸ªèŠ‚ç›®ï¼Œé‚£æˆ‘åªèƒ½è¯´â€œå¯æƒœäº†â€ï¼Œä½ é”™è¿‡äº†å¤ªå¤šæœ‰è¶£ç¾å¥½çš„ä¸œè¥¿äº†ã€‚åªçœ‹èŠ‚ç›®åï¼Œå¾ˆå¤šäººå°±ä¼šè®¤ä¸ºè¿™å°±æ˜¯ä¸€åœºè¯´å”±é€‰æ‹”èŠ‚ç›®å—ï¼Œå†æ€ä¹ˆâ€œæ–°â€åˆèƒ½æ€æ ·ï¼Œæˆ‘åªèƒ½è¯´â€œNOï¼Œä¸â€ï¼Œä½ çœŸçš„å°çœ‹å®ƒäº†ã€‚</p>
<p>å˜»å“ˆï¼ˆhip
hopï¼‰æ˜¯ä¸€ç§æ–°æ–‡åŒ–ï¼Œä¸å¯å¦è®¤ã€‚å®ƒä¸åªæ˜¯è¯´å”±ï¼Œå½“ç„¶è¿˜æœ‰DJï¼ˆæ‰“ç¢Ÿï¼‰ï¼ŒGraffitiï¼ˆæ¶‚é¸¦ï¼‰,Breaking(è¡—èˆï¼‰ï¼Œæ˜¯çš„å®ƒçš„å‘å±•æ—¶é—´ä¸é•¿ï¼Œä½†ç›®å‰æ¥çœ‹è¿˜æ˜¯ä¼šè¢«è®¸å¤šäººå–œæ¬¢çš„ï¼Œå°¤å…¶æ˜¯å¹´è½»äººã€‚å˜»å“ˆåœ¨æˆ‘çœ‹æ¥æ˜¯çœŸå®çš„è¡¨è¾¾ï¼Œèƒ½é‡çš„ä¼ é€’ï¼Œä¸æ˜¯åªæ‹˜æ³¥äºä¸Šé¢æ‰€è¯´çš„é‚£äº›å½¢å¼ã€‚å½“ç„¶æˆ‘ä¸å¤ªä¼šè¯´è¯ï¼Œä¼ è¾¾å‡ºæ¥çš„å¯èƒ½å¾ˆæ¨¡ç³Šï¼Œä½†ä¸é‡è¦ã€‚</p>
<p>ä»å»å¹´å§ï¼Œå—å®¤å‹å½±å“ï¼Œå¼€å§‹æ¥è§¦ä¸€äº›è¯´å”±éŸ³ä¹ï¼Œå¯èƒ½ä¹‹å‰å°±å·²ç»æ¥è§¦è¿‡äº†ï¼Œä½†è¿˜æ²¡æœ‰é‚£æ ·çš„æ¦‚å¿µã€‚å¬äº†ä¸å°‘è¯´å”±éŸ³ä¹ï¼Œçš„ç¡®æœ‰äº†äº›è®¸æ”¹å˜ï¼Œä¸æ˜¯è¯´è‡ªå·±æ‰“æ‰®ã€è¡Œä¸ºæ›´åŠ 
Hip Hip äº†ï¼Œè€Œæ˜¯æ•´ä¸ªäººæ›´åŠ åšå®šäº†ï¼Œæœ‰äº›æ­Œè¯è¿˜èƒ½å¸¦ç»™æˆ‘å…±é¸£ï¼Œäº§ç”Ÿæ€è€ƒã€‚</p>
<h1 id="èŠ‚ç›®æœ¬èº«">èŠ‚ç›®æœ¬èº«</h1>
<p>ä¸Šè¯´çš„æ‰€æœ‰éƒ½æ˜¯ä¸ºäº†è¿™é‡Œï¼Œè¿™ä¸ªèŠ‚ç›®å¤ªç‰›é€¼äº†ï¼</p>
<p>èŠ‚ç›®çš„å®—æ—¨æ˜¯ï¼šä¸‡ç‰©çš†å¯è¯´å”±ï¼Œå¯»æ‰¾æ—¶ä»£è¡¨è¾¾è€…ã€‚</p>
<p>å¦‚æœä½ çœ‹è¿‡èŠ‚ç›®ï¼Œä½ çœŸçš„ä¸ä¼šè§‰å¾—è¿™æ˜¯ä¸€åœºæ¯”èµ›ï¼Œæ˜¯å®Œå…¨å°±æ˜¯ä¸€åœºäº«å—ä¸å¿ƒçµçš„äº¤è°ˆå•Šã€‚</p>
<p>é¦–å…ˆæˆ‘è¦å¤¸ä¸¥æ•ä»£è¡¨çš„åˆ¶ä½œå›¢é˜Ÿï¼Œå¤ªå‰å®³äº†ï¼Œæ‰€æœ‰çš„èµ›åˆ¶è§„åˆ™è®¾è®¡éƒ½æ˜¯éå¸¸æ–°é¢–èƒ½çœŸçœŸåˆ‡åˆ‡åœ°æ„Ÿå—åˆ°æ‰€æœ‰äººçš„ç”¨å¿ƒï¼Œå¦å¤–èˆå°ã€éŸ³ä¹ç­‰æ›´æ˜¯ä¸ç”¨è¯´ï¼Œå¯ä»¥è¯´æ˜¯æŠŠé’±ç”¨åˆ°äº†æœ€å¯¹çš„åœ°æ–¹ã€‚</p>
<p>ç„¶åèŠ‚ç›®ä¸­çš„æ¯ä¸ªå¯¼å¸ˆé€‰æ‰‹ï¼Œå¯¼å¸ˆçœŸçš„éå¸¸ä¸“ä¸šï¼Œå»ºè®®ä¸­è‚¯ï¼Œèƒ½å¾ˆå®¹æ˜“åœ°æŒ‡å‡ºé€‰æ‰‹é—®é¢˜æ‰€åœ¨ã€‚é€‰æ‰‹æ›´ä¸ç”¨è¯´ï¼Œæ¯ä¸ªäººæˆ‘æ˜¯è¯´æ¯ä¸ªäººï¼Œéƒ½ç‰¹åˆ«æœ‰æƒ³æ³•ï¼Œå¯¹éŸ³ä¹å¯¹ç”Ÿæ´»éƒ½æœ‰ä¸ªäººçš„ä½“ä¼šï¼Œå¹¶èƒ½é€šè¿‡è‡ªå·±çš„éŸ³ä¹è¡¨è¾¾å‡ºæ¥ï¼Œå¤ªä¼˜ç§€äº†ï¼</p>
<p>11.1èŠ‚ç›®ç»“æŸäº†ï¼Œä»å¤å¤©åˆ°ç§‹å¤©ï¼Œè¿™ä¸ªèŠ‚ç›®å¸¦ç»™å¯¼å¸ˆé€‰æ‰‹åŒ…æ‹¬è§‚ä¼—çš„ï¼ŒçœŸçš„ä¸åªæ˜¯è¯´å”±éŸ³ä¹æœ¬èº«ï¼Œå¯¹æˆ‘æ¥è¯´æ›´é‡è¦çš„æ˜¯å®ƒè¦ä¼ è¾¾çš„å†…æ¶µä¸ç²¾ç¥åŠ›é‡ã€‚</p>
<h1 id="æœŸå¾…å†è§">æœŸå¾…å†è§</h1>
<p>æœ€åæˆ‘è¦è¯´ä¸€å£°ï¼š</p>
<p>è¯´å”±æ–°æ—¶ä»£çœŸæ¼‚äº®ï¼ï¼ï¼</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼-è¡Œä¸ºæ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼</title>
    <url>/article/8366968a.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p>https://www.runoob.com/design-pattern/observer-pattern.html</p>
<h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver
Patternï¼‰ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨é€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚</p>
<span id="more"></span>
<h1 id="å®ç°">å®ç°</h1>
<h2 id="æ­¥éª¤1">æ­¥éª¤1</h2>
<p><code>Subject</code>ç±»å¯¹åº”ç€å¤šä¸ª<code>Observer</code>ç±»ï¼Œæ¯å½“<code>Subject</code>å‘ç”Ÿå˜åŒ–ï¼Œ<code>Observer</code>ä¼šè§‚å¯Ÿåˆ°å˜åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; observers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(<span class="type">int</span> state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">        notifyAllObservers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attach</span><span class="params">(Observer observer)</span> &#123;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">notifyAllObservers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">            observer.update();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ­¥éª¤2">æ­¥éª¤2</h2>
<p><code>Observer</code>ä½œä¸ºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¯ä»¥æœ‰å¤šä¸ªå®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Subject subject;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ­¥éª¤3">æ­¥éª¤3</h2>
<p><code>Observer</code>å¤šä¸ªå®ç°</p>
<p><code>BinaryObserver</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinaryObserver</span><span class="params">(Subject subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        <span class="built_in">this</span>.subject.attach(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BinaryObserver: &quot;</span> + Integer.toBinaryString(subject.getState()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>OctalObserver</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OctalObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OctalObserver</span><span class="params">(Subject subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        <span class="built_in">this</span>.subject.attach(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Octal String: &quot;</span> + Integer.toOctalString(subject.getState()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>HexObserver</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HexObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HexObserver</span><span class="params">(Subject subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        <span class="built_in">this</span>.subject.attach(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hex String: &quot;</span> + Integer.toHexString(subject.getState()).toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ­¥éª¤4">æ­¥éª¤4</h2>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObserverPatternDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Subject</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HexObserver</span>(subject);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">OctalObserver</span>(subject);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">BinaryObserver</span>(subject);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;First state change: 15&quot;</span>);</span><br><span class="line">        subject.setState(<span class="number">15</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Second state change: 10&quot;</span>);</span><br><span class="line">        subject.setState(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<blockquote>
<p>First state change: 15 Hex String: F Octal String: 17 BinaryObserver:
1111 Second state change: 10 Hex String: A Octal String: 12
BinaryObserver: 1010</p>
</blockquote>
<h1 id="æ‰©å±•">æ‰©å±•</h1>
<p>ä»è§‚å¯Ÿè€…æ¨¡å¼å¾ˆå®¹æ˜“èƒ½è”æƒ³åˆ°å¾®æœåŠ¡æ¶æ„ä¸‹çš„æ³¨å†Œä¸­å¿ƒï¼Œæ³¨å†Œä¸­å¿ƒçš„èŒè´£ä¸å°±æ˜¯ç›‘å¬è€…æ³¨å†Œäº†çš„æœåŠ¡ï¼Œå‘æœåŠ¡æ¶ˆè´¹è€…æä¾›éœ€è¦çš„æœåŠ¡ã€‚è¿™å°±å’Œè§‚å¯Ÿè€…æ¨¡å¼å¾ˆç›¸åƒäº†ï¼Œæ¯å½“æˆ‘ä»¬çš„æœåŠ¡å˜åŒ–ï¼Œæ³¨å†Œä¸­å¿ƒä¹Ÿä¼šè§‚å¯Ÿåˆ°å˜åŒ–ï¼Œè¿›è€Œæ”¹å˜è¯¥æœåŠ¡åœ¨æ³¨å†Œä¸­å¿ƒçš„çŠ¶æ€ä¿¡æ¯ï¼Œä¿è¯èƒ½æä¾›ç¨³å®šå¯é çš„æœåŠ¡ã€‚</p>
<p>æœªæ¥ä¼šå­¦ä¹ å¹¶æ€è€ƒï¼Œæ³¨å†Œä¸­å¿ƒåˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
]]></content>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯»ã€ŠJavaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/article/48f2f4c1.html</url>
    <content><![CDATA[<h1
id="section"><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/javaç¼–è¯‘åŸç†.jpg" width = "" height = "200" alt="ã€ŠJavaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹"/></h1>
<h1 id="å†…å®¹ç®€ä»‹">å†…å®¹ç®€ä»‹ Â· Â· Â· Â· Â· Â·</h1>
<p>æœ¬ä¹¦èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰ï¼Œå³ä½¿æ˜¯æœ€æ™¦æ¶©çš„æ¦‚å¿µï¼Œåœ¨Bruce
Eckelçš„æ–‡å­—äº²å’ŒåŠ›å’Œå°è€Œç›´æ¥çš„ç¼–ç¨‹ç¤ºä¾‹é¢å‰ä¹Ÿä¼šåŒ–è§£äºæ— å½¢ã€‚ä»Javaçš„åŸºç¡€è¯­æ³•åˆ°æœ€é«˜çº§ç‰¹æ€§ï¼ˆæ·±å…¥çš„é¢å‘å¯¹è±¡æ¦‚å¿µã€å¤šçº¿ç¨‹ã€è‡ªåŠ¨é¡¹ç›®æ„å»ºã€å•å…ƒæµ‹è¯•å’Œè°ƒè¯•ç­‰ï¼‰ï¼Œæœ¬ä¹¦éƒ½èƒ½é€æ­¥æŒ‡å¯¼ä½ è½»æ¾æŒæ¡ã€‚</p>
<p>ä»æœ¬ä¹¦è·å¾—çš„å„é¡¹å¤§å¥–ä»¥åŠæ¥è‡ªä¸–ç•Œå„åœ°çš„è¯»è€…è¯„è®ºä¸­ï¼Œä¸éš¾çœ‹å‡ºè¿™æ˜¯ä¸€æœ¬ç»å…¸ä¹‹ä½œã€‚æœ¬ä¹¦çš„ä½œè€…æ‹¥æœ‰å¤šå¹´æ•™å­¦ç»éªŒï¼Œå¯¹Cã€C++ä»¥åŠJavaè¯­è¨€éƒ½æœ‰ç‹¬åˆ°ã€æ·±å…¥çš„è§è§£ï¼Œä»¥é€šä¿—æ˜“æ‡‚åŠå°è€Œç›´æ¥çš„ç¤ºä¾‹è§£é‡Šäº†ä¸€ä¸ªä¸ªæ™¦æ¶©æŠ½è±¡çš„æ¦‚å¿µã€‚æœ¬ä¹¦å…±22ç« ï¼ŒåŒ…æ‹¬æ“ä½œç¬¦ã€æ§åˆ¶æ‰§è¡Œæµç¨‹ã€è®¿é—®æƒé™æ§åˆ¶ã€å¤ç”¨ç±»ã€å¤šæ€ã€æ¥å£ã€é€šè¿‡å¼‚å¸¸å¤„ç†é”™è¯¯ã€å­—ç¬¦ä¸²ã€æ³›å‹ã€æ•°ç»„ã€å®¹å™¨æ·±å…¥ç ”ç©¶ã€Java
I/Oç³»ç»Ÿã€æšä¸¾ç±»å‹ã€å¹¶å‘ä»¥åŠå›¾å½¢åŒ–ç”¨æˆ·ç•Œé¢ç­‰å†…å®¹ã€‚è¿™äº›ä¸°å¯Œçš„å†…å®¹ï¼ŒåŒ…å«äº†Javaè¯­è¨€åŸºç¡€è¯­æ³•ä»¥åŠé«˜çº§ç‰¹æ€§ï¼Œé€‚åˆå„ä¸ªå±‚æ¬¡çš„Javaç¨‹åºå‘˜é˜…è¯»ï¼ŒåŒæ—¶ä¹Ÿæ˜¯é«˜ç­‰é™¢æ ¡è®²æˆé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€ä»¥åŠJavaè¯­è¨€çš„ç»ä½³æ•™æå’Œå‚è€ƒä¹¦ã€‚</p>
<span id="more"></span>
<h1 id="è¯»">è¯»ã€‚ã€‚ã€‚</h1>
<h1 id="ç»“">ç»“</h1>
]]></content>
      <tags>
        <tag>JavaSE</tag>
        <tag>è¯»ä¹¦</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯»ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/article/6ec37244.html</url>
    <content><![CDATA[<h1
id="section"><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/ç®—æ³•.jpg" width = "" height = "200" alt="ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹"/></h1>
<h1 id="å†…å®¹ç®€ä»‹">å†…å®¹ç®€ä»‹ Â· Â· Â· Â· Â· Â·</h1>
<p>æœ¬ä¹¦å…¨é¢è®²è¿°ç®—æ³•å’Œæ•°æ®ç»“æ„çš„å¿…å¤‡çŸ¥è¯†ï¼Œå…·æœ‰ä»¥ä¸‹å‡ å¤§ç‰¹è‰²ã€‚<br />
ïµ ç®—æ³•é¢†åŸŸçš„ç»å…¸å‚è€ƒä¹¦<br />
Sedgewickç•…é”€è‘—ä½œçš„æœ€æ–°ç‰ˆï¼Œåæ˜ äº†ç»è¿‡å‡ åå¹´æ¼”åŒ–è€Œæˆçš„ç®—æ³•æ ¸å¿ƒçŸ¥è¯†ä½“ç³»<br />
ïµ å†…å®¹å…¨é¢<br />
å…¨é¢è®ºè¿°æ’åºã€æœç´¢ã€å›¾å¤„ç†å’Œå­—ç¬¦ä¸²å¤„ç†çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œæ¶µç›–æ¯ä½ç¨‹åºå‘˜åº”çŸ¥åº”ä¼šçš„50ç§ç®—æ³•<br />
ïµ å…¨æ–°ä¿®è®¢çš„ä»£ç <br />
å…¨æ–°çš„Javaå®ç°ä»£ç ï¼Œé‡‡ç”¨æ¨¡å—åŒ–çš„ç¼–ç¨‹é£æ ¼ï¼Œæ‰€æœ‰ä»£ç å‡å¯ä¾›è¯»è€…ä½¿ç”¨<br />
ïµ ä¸å®é™…åº”ç”¨ç›¸ç»“åˆ<br />
åœ¨é‡è¦çš„ç§‘å­¦ã€å·¥ç¨‹å’Œå•†ä¸šåº”ç”¨ç¯å¢ƒä¸‹æ¢è®¨ç®—æ³•ï¼Œç»™å‡ºäº†ç®—æ³•çš„å®é™…ä»£ç ï¼Œè€ŒéåŒç±»è‘—ä½œå¸¸ç”¨çš„ä¼ªä»£ç <br />
ïµ å¯Œäºæ™ºåŠ›è¶£å‘³æ€§<br />
ç®€æ˜æ‰¼è¦çš„å†…å®¹ï¼Œç”¨ä¸°å¯Œçš„è§†è§‰å…ƒç´ å±•ç¤ºçš„ç¤ºä¾‹ï¼Œç²¾å¿ƒè®¾è®¡çš„ä»£ç ï¼Œè¯¦å°½çš„å†å²å’Œç§‘å­¦èƒŒæ™¯çŸ¥è¯†ï¼Œå„ç§éš¾åº¦çš„ç»ƒä¹ ï¼Œè¿™ä¸€åˆ‡éƒ½å°†ä½¿è¯»è€…æ‰‹ä¸é‡Šå·<br />
ïµ ç§‘å­¦çš„æ–¹æ³•<br />
ç”¨åˆé€‚çš„æ•°å­¦æ¨¡å‹ç²¾ç¡®åœ°è®¨è®ºç®—æ³•æ€§èƒ½ï¼Œè¿™äº›æ¨¡å‹æ˜¯åœ¨çœŸå®ç¯å¢ƒä¸­å¾—åˆ°éªŒè¯çš„<br />
ïµ ä¸ç½‘ç»œç›¸ç»“åˆ<br />
é…å¥—ç½‘ç«™<a
href="algs4.cs.princeton.edu">algs4.cs.princeton.edu</a>æä¾›äº†æœ¬ä¹¦å†…å®¹çš„æ‘˜è¦åŠç›¸å…³çš„ä»£ç ã€æµ‹è¯•æ•°æ®ã€ç¼–ç¨‹ç»ƒä¹ ã€æ•™å­¦è¯¾ä»¶ç­‰èµ„æº</p>
<span id="more"></span>
<h1 id="ç¬¬1ç« -åŸºç¡€">ç¬¬1ç«  åŸºç¡€</h1>
<h1 id="ç¬¬2ç« -æ’åº"><a
href="https://wnhyang.github.io/article/a444b428.html">ç¬¬2ç« 
æ’åº</a></h1>
<h1 id="æ›´æ–°ä¸­">æ›´æ–°ä¸­</h1>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>è¯»ä¹¦</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¬æˆ˜Edge</title>
    <url>/article/4e33af7.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>å¦‚é¢˜ï¼Œæˆ‘çœŸçš„è¦è½¬æˆ˜<code>Edge</code>äº†</p>
<p>Chromeåœ¨å…¨çƒçš„å¸‚åœºä»½é¢å¯è°“æ˜¯ä¸€å®¶ç‹¬å¤§ï¼Œä¹Ÿæ˜¯æˆ‘æœ€å¸¸ç”¨çš„æµè§ˆå™¨ï¼Œè™½ç„¶<code>Windows</code>ä¸Šæœ‰<code>Edge</code>å’Œ<code>IE</code>ï¼Œå¾ˆæŠ±æ­‰æˆ‘è¿˜æäº†<code>IE</code>ğŸ˜‚</p>
<p>æˆ‘ä¸€ç›´å¯¹è‡ªå·±çš„ç”µè„‘ä¹Ÿå¥½ã€æ–‡ä»¶ä¹Ÿå¥½ã€è¿˜æœ‰èº«è¾¹çš„ä¸œè¥¿ï¼Œéƒ½æ˜¯ç»å¸¸æ€§çš„æ•´ç†ï¼Œçœ‹åˆ°å®ƒä»¬æ•´æ•´é½é½çš„å¿ƒé‡Œå°±å¾ˆèˆ’æœ</p>
<span id="more"></span>
<h1 id="åŸå› ">åŸå› </h1>
<p>å¿…é¡»è¦è¯´çš„åŸå› è‚¯å®šæ˜¯åŒæ­¥ï¼Œä¹‹å‰æ‰¾ä¸€ä¸ªäº‘æ–‡æ¡£å·¥å…·å·²ç»è¯´äº†ï¼Œç°åœ¨åŒæ­¥çš„è¦æ±‚å¯¹æˆ‘æ¥è¯´å¤ªé‡è¦çš„äº†</p>
<p>å¯ä»¥ä¸Šäº‘çš„ä¸€å®šè¦ä¸Šäº‘ï¼Œå› ä¸ºæˆ‘ç›¸ä¿¡ï¼Œäº‘ä¼šæ˜¯å¤§è¶‹åŠ¿ï¼Œä¸€åˆ‡éƒ½ä¼šåœ¨é«˜é€Ÿç½‘ç»œçš„æ”¯æŒä¸‹ï¼Œå˜å¾—æ›´åŠ ä¾¿æ·</p>
<p>æœªæ¥å¯èƒ½ä¼šå‡ºç°çœŸæ­£çš„äº‘<code>IDE</code>æ¥å¸®åŠ©ç¨‹åºå‘˜å®ŒæˆåŒæ­¥åä½œå·¥ä½œï¼Œæ›´æœ‰çœŸæ­£çš„äº‘æ¸¸æˆï¼Œé‚£ç§æˆ‘ä»¬åªéœ€è¦äº¤äº’è®¾å¤‡ï¼ˆå±å¹•ï¼Œé¼ æ ‡ï¼Œæ¡æŠŠï¼ŒVRå¤´ç›”ç­‰ï¼‰ï¼Œä¸€äº›çš„è®¡ç®—ä»»åŠ¡éƒ½äº¤ç”±äº‘æ¥å®Œæˆï¼Œæˆ‘ä»¬åªéœ€å…³å¿ƒç½‘ç»œé—®é¢˜å°±å¯ä»¥äº†</p>
<p>å›åˆ°æ­£é¢˜</p>
<p><code>Edge</code>æœ€å¤§çš„ä¼˜åŠ¿åº”è¯¥æ˜¯å›½å†…<code>Google</code>æœåŠ¡çš„é™åˆ¶ï¼Œæ— æ³•åŒæ­¥è°·æ­Œè´¦æˆ·ï¼Œæ›´åˆ«è¯´<code>Google</code>æœç´¢äº†ï¼Œå…¶æ¬¡è¿˜æœ‰<code>Googel</code>åº”ç”¨å•†åº—ï¼Œåæ­£<code>Google</code>ç›¸å…³çš„æœåŠ¡ï¼Œæ­£å¸¸æ‰‹æ®µï¼Œä¸å€Ÿç”¨<code>VPN</code>æ˜¯æ— æ³•ä½“éªŒçš„ï¼Œä¸ä¹‹ç›¸åï¼Œå¾®è½¯è¿™ä¸ªåšçš„å¾ˆå¥½ï¼Œä¸ç®¡æ˜¯å¾®è½¯è´¦æˆ·ï¼Œè¿˜æ˜¯å¾®è½¯åº”ç”¨å•†åº—éƒ½å¾ˆå¥½ç”¨ï¼Œè€Œä¸”ç°åœ¨<code>Edge</code>å·²ç»æ¢æˆäº†
<a href="https://www.chromium.org/">Chromium</a>
å†…æ ¸äº†ï¼Œæ‰€ä»¥å¯ä»¥è¯´é™¤äº†<code>Google</code>æœåŠ¡çš„å·®åˆ«ï¼Œå…¶ä»–å‡ ä¹æ²¡æœ‰å·®åˆ«äº†</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Chrome</th>
<th>Edge</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>å†…æ ¸</td>
<td>Chromium</td>
<td>Chromium</td>
</tr>
<tr class="even">
<td>è´¦æˆ·</td>
<td>Googleè´¦æˆ·ï¼ˆå›½å†…é™åˆ¶ï¼‰</td>
<td>å¾®è½¯è´¦æˆ·</td>
</tr>
<tr class="odd">
<td>åŒæ­¥æ€§</td>
<td>é™åˆ¶</td>
<td>å¯</td>
</tr>
<tr class="even">
<td>åº”ç”¨æ’ä»¶</td>
<td>é™åˆ¶ï¼Œæœ‰å…¶ä»–æ‰‹æ®µè·å–</td>
<td>ç›´æ¥è®¿é—®ä¸‹è½½</td>
</tr>
<tr class="odd">
<td>å¯ç©æ€§</td>
<td>ä¸€èˆ¬</td>
<td>å¾ˆä¸é”™</td>
</tr>
</tbody>
</table>
<p>å…³äº<code>Edge</code>æœ‰å¾ˆå¤šä½¿ç”¨æŠ€å·§éƒ½å¯ä»¥é€šè¿‡æ‰¾èµ„æ–™çœ‹è§†é¢‘æ¥å­¦ä¹ ï¼Œç›¸ä¿¡å®ƒä¸ä¼šè®©ä½ å¤±æœ›çš„</p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—è¿ç»­èŒƒå›´å†…å¥‡/å¶æ•°ä¸ªæ•°</title>
    <url>/article/c1ef7922.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>è¿™ç¯‡å°±è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼Œâ€œè®¡ç®—è¿ç»­èŒƒå›´å†…å¥‡/å¶æ•°ä¸ªæ•°â€ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯ç»™å®šä¸€ä¸ªèŒƒå›´[a,b]ï¼Œè®¡ç®—å‡ºè¿™ä¸ªèŒƒå›´å†…çš„å¥‡æ•°ã€å¶æ•°ä¸ªæ•°</p>
<p>å¦‚ï¼š[1,18]</p>
<p>è¿™ä¸ªèŒƒå›´å¥‡æ•°9ä¸ªï¼Œå¶æ•°9ä¸ªï¼Œé—®é¢˜å¾ˆç®€å•</p>
<span id="more"></span>
<h1 id="è¯´æ˜">è¯´æ˜</h1>
<p>å…¶å®è¿™ä¸ªæˆ‘æ¯•è®¾çš„ä¸€ä¸ªè®¡ç®—éœ€è¦ï¼Œå…¶å®æ˜¯æ ¹æ®å‘¨æ¬¡å’Œå•åŒå‘¨è®¡ç®—æœ‰å¤šå°‘å‘¨ï¼Œä¸‹é¢åˆ—ä¸ªè¡¨</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>å•åŒå‘¨</th>
<th>å•å‘¨</th>
<th>åŒå‘¨</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1-18</td>
<td>18</td>
<td>9</td>
<td>9</td>
</tr>
<tr class="even">
<td>1-17</td>
<td>17</td>
<td>9</td>
<td>8</td>
</tr>
<tr class="odd">
<td>2-18</td>
<td>17</td>
<td>8</td>
<td>9</td>
</tr>
<tr class="even">
<td>2-17</td>
<td>16</td>
<td>8</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢çš„ä¾‹å­åŒ…å«äº†æ‰€æœ‰æƒ…å†µï¼Œå³å¯¹äºèŒƒå›´[a,b]</p>
<p>åˆ†åˆ«ä»£è¡¨äº†</p>
<ul>
<li>å¥‡æ•°-å¶æ•°</li>
<li>å¥‡æ•°-å¥‡æ•°</li>
<li>å¶æ•°-å¶æ•°</li>
<li>å¶æ•°-å¥‡æ•°</li>
</ul>
<p>å…ˆè¯´æœ€å®¹æ˜“çš„ï¼Œå•åŒå‘¨è®¡ç®—æœ€ç®€ä¾¿b-a+1</p>
<p>å•å‘¨æˆ–æ˜¯åŒå‘¨è®¡ç®—æ–¹å¼æœ€éšç€a,bçš„ä¸åŒè€Œä¸åŒ</p>
<p>å½“ç„¶æœ‰äººä¼šè¯´äº†ï¼Œè¿™ä¸€ä¸ªéå†ä¸å°±å®Œäº‹äº†ï¼Œä½†æ˜¯æˆ‘ç»ä¸å¯èƒ½é‚£ä¹ˆåšçš„ï¼Œè¿™å¾ˆæ˜æ˜¾æ˜¯æœ‰æ•°å­¦å…³ç³»çš„ï¼Œä¹‹å‰åˆ·é¢˜ä¹Ÿè§è¿‡ä¸å°‘æ˜¯æ•°å­¦å…³ç³»çš„ï¼Œå¯ä»¥ç›´æ¥æ‰¾åˆ°å…¶ä¸­å…³ç³»ï¼Œè®¡ç®—å‡ºæ¥çš„</p>
<p>å†æ¬¡åˆ†æä¸Šé¢çš„è¡¨æ ¼</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>å•åŒå‘¨ï¼ˆy=b-a+1ï¼‰</th>
<th>å•å‘¨</th>
<th>åŒå‘¨</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1-18</td>
<td>18</td>
<td>9ï¼ˆy/2ï¼‰</td>
<td>9ï¼ˆy/2ï¼‰</td>
</tr>
<tr class="even">
<td>1-17</td>
<td>17</td>
<td>9ï¼ˆy/2+1ï¼‰</td>
<td>8ï¼ˆy/2ï¼‰</td>
</tr>
<tr class="odd">
<td>2-18</td>
<td>17</td>
<td>8ï¼ˆy/2ï¼‰</td>
<td>9ï¼ˆy/2+1ï¼‰</td>
</tr>
<tr class="even">
<td>2-17</td>
<td>16</td>
<td>8ï¼ˆy/2ï¼‰</td>
<td>8ï¼ˆy/2ï¼‰</td>
</tr>
</tbody>
</table>
<p>çœ‹å‡ºäº†å—ï¼Ÿ</p>
<p>å…¶ä¸­è‚¯å®šæœ‰æ•°å­¦å…³ç³»çš„ï¼Œè¿™é‡ŒæŠŠaã€bç”¨å¥‡1ï¼Œå¶0æ¥è¡¨ç¤º</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>å•åŒå‘¨ï¼ˆy=b-a+1ï¼‰</th>
<th>å•å‘¨</th>
<th>åŒå‘¨</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1-18ï¼ˆ1-0ï¼‰</td>
<td>18</td>
<td>9ï¼ˆy/2ï¼‰</td>
<td>9ï¼ˆy/2ï¼‰</td>
</tr>
<tr class="even">
<td>1-17ï¼ˆ1-1ï¼‰</td>
<td>17</td>
<td>9ï¼ˆy/2+1ï¼‰</td>
<td>8ï¼ˆy/2ï¼‰</td>
</tr>
<tr class="odd">
<td>2-18ï¼ˆ0-0ï¼‰</td>
<td>17</td>
<td>8ï¼ˆy/2ï¼‰</td>
<td>9ï¼ˆy/2+1ï¼‰</td>
</tr>
<tr class="even">
<td>2-17ï¼ˆ0-1ï¼‰</td>
<td>16</td>
<td>8ï¼ˆy/2ï¼‰</td>
<td>8ï¼ˆy/2ï¼‰</td>
</tr>
</tbody>
</table>
<p>è¿™æ ·å°±å¾ˆæ˜æ˜¾äº†</p>
<ul>
<li>å•å‘¨ï¼Œ1-1æƒ…å†µä¸‹+1</li>
<li>åŒå‘¨ï¼Œ0-0æƒ…å†µä¸‹+1</li>
</ul>
<p>è½¬æ¢ä¸€ä¸‹å°±æ˜¯</p>
<ul>
<li>å•å‘¨ï¼Œaã€bä¸è¿ç®—ä¸º1ï¼Œå¯ä»¥+1</li>
<li>åŒå‘¨ï¼Œaã€bæˆ–è¿ç®—ä¸º0ï¼Œå¯ä»¥+1</li>
</ul>
<p>è¿™é‡Œå•åŒå‘¨0ï¼Œå•å‘¨1ï¼ŒåŒå‘¨2ï¼Œé‚£ä¹ˆä¼ªä»£ç å°±å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compute</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> singleOrDouble)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(singleOrDouble==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> b - a + <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(singleOrDouble == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(((a &amp; b) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">            b++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (b - a + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(singleOrDouble == <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(((a | b) &amp; <span class="number">1</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">            b++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (b - a + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™å…¶ä¸­åˆ©ç”¨äº†ä½è¿ç®—ï¼Œéå¸¸æœ‰è¶£</p>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šåœ°æ–¹å¯ä»¥å¯ä»¥ç”¨è¿™ç§è§£å†³æ–¹æ³•ï¼ŒLeetCodeä¸Šä¹Ÿæœ‰å¾ˆå¤šç±»ä¼¼çš„</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¾ˆå¤šæ—¶å€™æ¢ç´¢çš„è¿‡ç¨‹æ˜¯æœ€çè´µçš„</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¯ä»¶æ¨è</title>
    <url>/article/c92482f1.html</url>
    <content><![CDATA[<h1 id="æ¨èå¥½ç”¨çš„è½¯ä»¶">æ¨èå¥½ç”¨çš„è½¯ä»¶</h1>
<p>å› ä¸ºå¹³å°ä¸åŒæˆ‘ä¼šæ ‡æ³¨<code>PC</code>ï¼š<code>Win/Mac/Linux</code>ï¼Œç§»åŠ¨ï¼š<code>Android/iOS</code></p>
<p>ç›®å‰åˆ†ç±»ï¼ŒåŸºç¡€è½¯ä»¶ã€è®°å½•å†™ä½œã€å­¦ä¹ æå‡ã€ç¼–ç¨‹ã€æµè§ˆå™¨æ’ä»¶ã€å°ç¨‹åºã€‚ã€‚ã€‚</p>
<span id="more"></span>
<h1 id="åŸºç¡€è½¯ä»¶">åŸºç¡€è½¯ä»¶</h1>
<h2 id="geekwin"><a
href="https://geekuninstaller.com/">geek</a>ï¼ˆWinï¼‰</h2>
<p>å¿«é€Ÿå½»åº•çš„ä¸€æ¬¾å¸è½½è½¯ä»¶ï¼Œæè½»é‡ï¼Œç”¨äº†ä¹‹åå†æ²¡ç”¨è¿‡æ§åˆ¶é¢æ¿ã€‚</p>
<h2 id="ç«ç»’å®‰å…¨pc"><a
href="https://www.huorong.cn/">ç«ç»’å®‰å…¨</a>ï¼ˆPCï¼‰</h2>
<p>å¦‚å…¶åï¼Œå®‰å…¨ç›¸å…³çš„ï¼Œæ— å¹¿å‘Šï¼Œæ— å¼ºåˆ¶æ†ç»‘ï¼Œç®€å•æ¸…çˆ½ã€‚</p>
<h2 id="è…¾è®¯æŸ æª¬mac"><a
href="https://lemon.qq.com/">è…¾è®¯æŸ æª¬</a>ï¼ˆMacï¼‰</h2>
<p><code>Mac</code>å¹³å°ä¸‹çš„ä¸€æ¬¾æ¸…ç†è½¯ä»¶ï¼Œå…è´¹å¥½ç”¨ã€‚</p>
<h2 id="bandzipwinmac"><a
href="https://www.bandisoft.com/bandizip/">Bandzip</a>ï¼ˆWin/Macï¼‰</h2>
<p>è½»é‡å…¨èƒ½çš„è§£å‹ç¼©è½¯ä»¶ï¼Œè¶…çº§å¥½ç”¨ã€‚ä¸ç››ä¼ çš„<code>7zip</code>ç›¸æ¯”ç•Œé¢æ›´å¥½çœ‹äº›ï¼Œå°½ç®¡æœ‰å¹¿å‘Šï¼ˆè¯´å®è¯è¿™ä¸ªæˆ‘çœŸçš„æ— æ„Ÿï¼Œæ¨å‡ºå¹¿å‘Šå¥½é•¿æ—¶é—´æˆ‘éƒ½æ²¡å‘ç°ï¼Œæ­£å¸¸ä½¿ç”¨å®Œå…¨ä¸ç”¨åœ¨æ„è¿™ä¸ªï¼‰ã€‚</p>
<h2 id="chromewinmac"><a
href="https://www.google.cn/intl/en_uk/chrome/">Chrome</a>ï¼ˆWin/Macï¼‰</h2>
<p>è¿™ä¸ªæ›´ä¸ç”¨å¤šè¯´ï¼Œå”¯ä¸€é—æ†¾å¯èƒ½æ˜¯å›½å†…æ— æ³•ä½¿ç”¨è°·æ­Œçš„ä¸€äº›æœåŠ¡å§ã€‚</p>
<h2 id="edgewinmac"><a
href="https://www.microsoft.com/zh-cn/edge">Edge</a>ï¼ˆWin/Macï¼‰</h2>
<p><code>Edge</code>ä¸<code>Chrome</code>çš„å·®è·çœŸçš„ä¸å¤§ï¼Œç°åœ¨éƒ½æ˜¯<code>Chromium</code>å†…æ ¸ï¼Œæ’ä»¶ç”Ÿæ€ï¼Œå„ç§å…¼å®¹ã€‚ä¹‹å‰ä¸€ç¯‡å¯¹æ¯”æ–‡ç« ï¼Œ<a
href="https://wnhyang.github.io/article/4e33af7.html">ç‚¹è¿™</a>ã€‚</p>
<h2 id="å¤¸å…‹androidios"><a
href="https://www.myquark.cn/">å¤¸å…‹</a>ï¼ˆAndroid/iOSï¼‰</h2>
<p>è¿˜æ˜¯å¾ˆå¥½ç”¨çš„æ‰‹æœºæµè§ˆå™¨ã€‚</p>
<h2 id="neatdownloadmanagerwinmac"><a
href="https://www.neatdownloadmanager.com/index.php/en/">NeatDownloadManager</a>ï¼ˆWin/Macï¼‰</h2>
<p>è¶…çº§æ¨èçš„ä¸€æ¬¾ä¸‹è½½å™¨ï¼Œç›¸æ¯”äºIDMï¼Œå…è´¹ã€‚é…åˆæµè§ˆå™¨æ’ä»¶å°±å¯ä»¥èµ·é£äº†ã€‚</p>
<h1 id="è®°å½•å†™ä½œ">è®°å½•å†™ä½œ</h1>
<h2 id="è¯­é›€"><a href="https://www.yuque.com/">è¯­é›€</a></h2>
<p>æ¨èï¼š<code>PC</code>ç½‘é¡µ+ç§»åŠ¨<code>APP</code></p>
<p>ä¹‹å‰ç”¨çš„ä¹Ÿæ˜¯<code>Typora</code>ï¼Œæ€»æ‰€å‘¨çŸ¥å®ƒå¼€å§‹æ”¶è´¹äº†ï¼Œæ›´é‡è¦çš„æ˜¯å®ƒæ— æ³•æ»¡è¶³æˆ‘éœ€è¦çš„äº‘ï¼ˆæ•°æ®åŒæ­¥ï¼Œå¤šç«¯ä½¿ç”¨ï¼‰éœ€è¦ï¼Œå°±è½¬å‘è¯­é›€äº†ğŸ˜Šã€‚æ„Ÿå…´è¶£çš„çœ‹è¿™ç¯‡<a
href="https://wnhyang.github.io/article/1ac0b150.html">MDç¼–è¾‘å™¨çš„çƒ¦æ¼</a>ã€‚</p>
<h2 id="å›¾åºŠç´ ææ›´æ–°ing">å›¾åºŠã€ç´ ææ›´æ–°ing</h2>
<h1 id="å­¦ä¹ æå‡">å­¦ä¹ æå‡</h1>
<p>è¿™æ–¹é¢çš„è½¯ä»¶ã€ç½‘ç«™å¤ªå¤šäº†ï¼Œè€³ç†Ÿèƒ½è¯¦çš„å°±ä¸æäº†ã€‚</p>
<h2 id="ç®€è®¯adnroidios"><a
href="https://www.tipsoon.com/?a=download">ç®€è®¯</a>ï¼ˆAdnroid/iOSï¼‰</h2>
<p>è½»é˜…è¯»ï¼Œæ‰“å‘ç©ºé—²æ—¶é—´ï¼ˆ3ã€5åˆ†é’Ÿé‚£æ ·çš„ï¼‰ï¼Œå…¨æ–¹é¢çš„çŸ¥è¯†ã€‚</p>
<h1 id="ç¼–ç¨‹">ç¼–ç¨‹</h1>
<h2 id="vscodepc"><a
href="https://code.visualstudio.com/">VSCode</a>ï¼ˆPCï¼‰</h2>
<p>å…è´¹ï¼Œè€Œä¸”å‡ ä¹æ˜¯å…¨èƒ½çš„ã€‚</p>
<h2 id="ideawinmac"><a
href="https://www.jetbrains.com/idea/">IDEA</a>ï¼ˆWin/Macï¼‰</h2>
<p><code>jetbrains</code>å‡ºå“æ­£åœ¨å…¨æ–¹é¢å é¢†å¸‚åœºï¼Œé çš„å°±æ˜¯ç¡¬ç¡¬çš„çœŸå®åŠ›ã€‚</p>
<h2 id="navicatwinmac"><a
href="https://navicat.com.cn/">Navicat</a>ï¼ˆWin/Macï¼‰</h2>
<p>ä¸ªäººæœ€å–œæ¬¢çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œå°±æ˜¯å¥½ç”¨ã€‚</p>
<h2 id="mobaxtermwin"><a
href="https://mobaxterm.mobatek.net/">MobaXterm</a>ï¼ˆWinï¼‰</h2>
<p><code>SSH</code>å®¢æˆ·ç«¯ã€ç½‘ç»œå·¥å…·ï¼Œå¯æƒœåªæœ‰<code>Win</code>ç‰ˆï¼Œè¦æ˜¯æœ‰<code>Mac</code>ç‰ˆï¼Œæˆ‘ç›¸ä¿¡ä¼šçˆ†ã€‚</p>
<h1 id="æµè§ˆå™¨æ’ä»¶">æµè§ˆå™¨æ’ä»¶</h1>
<p>éƒ½æ˜¯<code>Chrome</code>å’Œ<code>Edge</code>æ‰€æ”¯æŒçš„ï¼Œå¯èƒ½æ‰€æœ‰<code>Chromium</code>éƒ½æ”¯æŒï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ğŸ˜‚</p>
<h2 id="adblock"><a
href="https://chrome.google.com/webstore/detail/gighmmpiobklfepjocnamgkkbiglidom">AdBlock</a></h2>
<p>å¹¿å‘Šæ‹¦æˆªå™¨</p>
<h2 id="tampermonkey"><a
href="https://chrome.google.com/webstore/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo">Tampermonkey</a></h2>
<p>çŸ¥åçš„æ²¹çŒ´ï¼Œæˆ‘ç©çš„ä¸æ˜¯å¾ˆå…­ï¼Œè‡ªå·±å‘æ˜å§ğŸ¤§</p>
<h2 id="neatdownloadmanager-extension"><a
href="https://chrome.google.com/webstore/detail/cpcifbdmkopohnnofedkjghjiclmhdah">NeatDownloadManager
Extension</a></h2>
<p>é…åˆ<code>NeatDownloadManager</code>èµ·é£ï¼Œé£ã€‚</p>
<h2 id="octotree---github-code-tree"><a
href="https://chrome.google.com/webstore/detail/bkhaagjahfmjljalopjnoealnfndnagc">Octotree
- GitHub code tree</a></h2>
<p>å¦‚æœä½ æœ‰ç½‘é¡µæŸ¥çœ‹GitHubä»£ç è·³è½¬çš„å›°æƒ‘ï¼Œé‚£ç”¨å®ƒå°±å®Œäº‹äº†ã€‚</p>
<h2 id="jsonvue"><a
href="https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc">JSONVue</a></h2>
<p>æµè§ˆå™¨<code>JSON</code>æ ¼å¼åŒ–æ˜¾ç¤ºï¼Œå½“ç„¶ç”¨<code>Postman</code>æ›´ä¸“ä¸šğŸ˜’ï¼Œä½†æœ‰æ—¶ç¡®å®æ˜¯éœ€è¦ç”¨ä¸€ä¸‹ğŸ˜ã€‚</p>
<h2 id="åˆ’è¯ç¿»è¯‘"><a
href="https://chrome.google.com/webstore/detail/ikhdkkncnoglghljlkmcimlnlhkeamad">åˆ’è¯ç¿»è¯‘</a></h2>
<p>æœ¬æ¥ä½œä¸ºè°·æ­Œç¿»è¯‘çš„æ›¿ä»£å“ï¼Œä½†è¶Šç”¨è¶Šå–œæ¬¢ã€‚å¤šæºç¿»è¯‘å¯é€‰æ‹©ï¼Œå¤šç§ç¿»è¯‘æ–¹å¼ï¼Œè®¾ç½®è‡ªå®šä¹‰åŒ–ç¨‹åº¦å¾ˆé«˜ã€‚</p>
<h1 id="å°ç¨‹åº">å°ç¨‹åº</h1>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¥½è½¯ä»¶çš„æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Œæˆ‘å¸¸åœ¨æ€è€ƒã€‚</p>
<p>å·®ç”Ÿæ–‡å…·å¤šã€‚åœ¨å¼€å§‹åšä»€ä¹ˆäº‹ä¹‹å‰ï¼Œæˆ‘æ€»æƒ³ç€æ‰¾åˆ°æœ€å¥½çš„å·¥å…·ï¼Œå¸®åŠ©æˆ‘å¿«é€Ÿé«˜æ•ˆåœ°è¾¾æˆç›®æ ‡ï¼Œç„¶è€Œè¿™ä¹Ÿå¯¼è‡´æˆ‘èŠ±äº†å¤§æŠŠæ—¶é—´åœ¨æœå¯»å·¥å…·ä¸Šï¼Œå´å¿˜äº†æˆ‘è¿˜ç«™åœ¨åŸåœ°å‘¢ã€‚æ‰€ä»¥å•Šï¼Œä¸è¦åœ¨æœå¯»å·¥å…·ä¸Šè¿·å¤±äº†ã€‚</p>
<p>è°ˆèµ·å¥½çš„è½¯ä»¶ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºé¦–å…ˆå°±æ˜¯å…è´¹ï¼ˆdogeï¼‰ã€‚å“ˆå“ˆå“ˆå“ˆå“ˆï¼Œä¸æ˜¯ã€‚</p>
<p>å¥½çš„è½¯ä»¶è‚¯å®šæ˜¯ç”¨æˆ·å‹å¥½çš„ï¼Œç¬¦åˆä½¿ç”¨ä¹ æƒ¯çš„ï¼Œå­¦ä¹ æˆæœ¬ä½çš„ï¼Œæ˜“ä¸Šæ‰‹çš„ã€‚</p>
<p>å…³äºè½»é‡å’Œå…¨é¢ï¼Œæœ‰äººå¸Œæœ›å®ƒä»¬å„å¸å…¶èŒï¼Œå„å¹²å„çš„ï¼Œæœ¯ä¸šæœ‰ä¸“æ”»ï¼›æœ‰äººå¸Œæœ›èƒ½å…¨é¢å‘å±•ï¼Œä¸€ä¸ªé¡¶å‡ ä¸ªï¼Œèƒ½å¹²å„ç§æ´»ã€‚å…³äºè¿™ä¸ªå°±ä»è€…è§ä»æ™ºè€…è§æ™ºäº†ã€‚</p>
]]></content>
      <tags>
        <tag>è½¯ä»¶&amp;å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>é‚£äº›å¹´æˆ‘è§è¿‡çš„è·¯äºº</title>
    <url>/article/83b3a899.html</url>
    <content><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>æ ‡é¢˜æµ…æ˜¾æ˜“æ‡‚ï¼Œé‚£äº›å¹´æˆ‘è§è¿‡çš„è·¯äººã€‚<br />
å°½ç®¡æˆ‘å»è¿‡çš„åœ°æ–¹ä¸ç®—å¤šï¼Œä½†æ€»èƒ½é‡åˆ°ä¸€äº›è®©äººå½±å“æ·±åˆ»çš„è·¯äººã€‚æˆ‘ä¸€èˆ¬ä¸ä¼šå½±åƒè®°å½•ï¼Œå› ä¸ºæˆ‘è§‰å¾—ä¸ç»å…è®¸åœ°æ‹ä¸€ä¸ªé™Œç”Ÿäººä¸å¤ªå¥½ã€‚ä¹Ÿå°±å› ä¸ºè¿™æ ·ä»–ä»¬ä¸­çš„æœ‰ä¸€äº›ä¸€ç›´å­˜äºæˆ‘çš„è„‘æµ·ä¸­ã€‚</p>
<span id="more"></span>
<h1 id="èµè¯—">èµè¯—</h1>
<p>å¤§çº¦æ˜¯åœ¨18å¹´æˆ–æ˜¯19å¹´å›½åº†ï¼Œæœ‰ç‚¹è®°ä¸æ¸…äº†ğŸ˜</p>
<p>åœ¨éƒ‘å·çš„ä¸€ä¸ªæ±½è½¦ç«™ï¼Œå¤©æ°”å¾ˆçƒ­ï¼ŒåŠ ä¸Šå‡æœŸäººéå¸¸å¤šï¼Œäººç¾¤æ’é˜Ÿéƒ½æ’åˆ°è½¦ç«™å¤–äº†ã€‚å¤§å¤ªé˜³ç›´å°„ç€ï¼Œæ±—æ°´ç›´æµï¼Œå¿ƒé‡Œåªæƒ³åä¸Šç©ºè°ƒå¤§å·´é©¶å‘å›å®¶è·¯ã€‚ç‡¥çƒ­çš„å¤©æ°”ï¼Œçƒ¦èºçš„æˆ‘ï¼Œåªèƒ½æŠ ä¸€ä¸‹æ‰‹æœºï¼Œæ…¢æ…¢éšé˜Ÿä¼ç§»åŠ¨ã€‚æ­£æ’ç€é˜Ÿï¼Œå¿½ç„¶å‘ç°å‰é¢æœ‰ä¸€ä¸ªç©¿ç€æœ´ç´ ã€çœ‹ä¸Šå»ä¸Šäº†ç‚¹å¹´çºªçš„å¤§å¦ˆï¼ˆæˆ–æ˜¯è¯´é˜¿å§¨ï¼Œä¸çŸ¥é“ğŸ˜‚ï¼‰ã€‚ä»–èº«è¾¹å‘¢æœ‰ä¸ªç¨å¾®å¹´è½»ä¸€ç‚¹çš„ç”·äººï¼Œç§°ä¸ä¸Šä¸­å¹´ï¼Œç©¿ç€ä¹ŸåŒæ ·æœ´ç´ ï¼Œå½“ç„¶èº«è¾¹è¿˜æœ‰ä¸€äº›è¡Œæï¼Œä»–è¦æ¯”èº«è¾¹çš„å¥³äººé«˜å‡ºä¸€å¤´ã€‚ä»–ä»¬å°±åœ¨æˆ‘å‰é¢å‡ ç±³å¤„ã€‚å¸å¼•æˆ‘æ³¨æ„çš„å½“ç„¶ä¸æ˜¯ä»–ä»¬çš„ç»„åˆï¼Œæ¯•ç«Ÿåœ¨æ±½è½¦ç«™ä»€ä¹ˆæ ·çš„äººè§ä¸åˆ°å‘¢ã€‚ä»–ä»¬è¿™æ ·æœ´ç´ æ‰“æ‰®çš„ä¸­è€å¹´äººæ¯”æ¯”çš†æ˜¯ï¼Œé‚£äº›æœ´å®çš„äººä»¬å¾€å¾€ä¸ºäº†çœä¸‹ä¸€ç‚¹è·¯è´¹ï¼Œé€‰æ‹©å¤§å·´å‡ºè¡Œï¼ˆè¿œä¸€ç‚¹å¯èƒ½å°±æ˜¯ç«è½¦äº†ï¼‰ï¼Œä»–ä»¬çš„è¡Œæå¤§å¤šæ•°éƒ½è£…åœ¨ç¼–ç»‡è¢‹é‡Œï¼Œä»€ä¹ˆè¢«å­ã€è¡£æœå’Œç”Ÿæ´»ç”¨å“éƒ½å¯ä»¥è£…ï¼Œçœé’±å˜›ã€‚è¿˜æœ‰ä¸€äº›è¿˜ä¼šå¸¦ä¸Šä¸€äº›é”…ç¢—ç“¢ç›†éšè‡ªå·±å¥”æ³¢ï¼Œéƒ½æ˜¯é’±ä¹°çš„ï¼Œèˆä¸å¾—ä¸¢ä¸‹ã€‚å›åˆ°æ­£é¢˜ï¼Œå…¶å®å¸å¼•æˆ‘çš„æ˜¯å¥³äººæ‰‹é‡Œçš„ä¸€æœ¬ä¹¦â€”â€”ã€Šè¯—ç»ã€‹ã€‚æ²¡é”™ï¼Œå°±æ˜¯è®°å½•ç€â€œçªˆçª•æ·‘å¥³ï¼Œå›å­å¥½é€‘â€çš„ã€Šè¯—ç»ã€‹ã€‚åˆšå‘ç°çš„æ—¶å€™æˆ‘æœ‰ç‚¹è¯´ä¸å‡ºçš„æ„Ÿå—ï¼Œä¸çŸ¥é“æ€ä¹ˆè¡¨è¾¾ã€‚åªè§ç€ï¼Œå¥³äººè®¤çœŸçš„çœ‹ä¹¦æ—¶è€Œè¿˜ä¼šè¯»å‡ºæ¥ï¼ˆå‘¨å›´å¤ªå˜ˆæ‚ï¼Œäººå¤ªå¤šï¼Œå¬ä¸åˆ°ä»€ä¹ˆï¼‰ï¼Œå…´è‡´å‹ƒå‹ƒï¼Œè„¸ä¸Šè¿˜å¸¦ç€å¾®ç¬‘ï¼Œä¼¼ä¹æ˜¯åœ¨æ¬£èµç»ç¾çš„è¯—å¥ã€‚ç”·äººå‘¢ï¼Œä¸€è¾¹å¸®å¿™æ‹¿ç€è¡Œæï¼Œä¸€è¾¹å¯¹äºå¥³äººæ¬£èµè¯—å¥çš„è¡Œä¸ºåšå‡ºå›åº”ã€‚ä»–ä»¬é—²åº­ä¿¡æ­¥ï¼Œèµ¶ç€é˜Ÿä¼ï¼Œä¸å‘¨å›´çƒ¦èºåµé—¹çš„äººç¾¤å½¢æˆé²œæ˜çš„å¯¹æ¯”ã€‚ä»–ä»¬æ­¤åˆ»å°±åƒè£³è¡£é£˜é£˜å¤ä»£ç”·å¥³ï¼Œç›¸ä¾åœ¨ä¸€å—ï¼Œä¸€åŒæ¬£èµç¾å¥½çš„â€œè¯—æƒ…ç”»æ„â€ã€‚æˆ‘è¯•å›¾æ¥è¿‘ä»–ä»¬ï¼Œçœ‹ä¸€çœ‹ä»–ä»¬åˆ°åº•åœ¨çœ‹ä»€ä¹ˆï¼Œå¬ä¸€å¬ä»–ä»¬åœ¨è¯´äº›ä»€ä¹ˆï¼Œä½†ä¹‹åè¿›äº†è½¦ç«™å°±èµ°æ•£äº†ã€‚</p>
<p>å¾ˆå¹¸è¿ï¼Œæˆ‘èƒ½é‡åˆ°ä»–ä»¬ï¼Œè®©æˆ‘çœŸæ­£æ„Ÿå—åˆ°â€”â€”ä»»ä½•äººéƒ½æœ‰ä»°æœ›æ˜Ÿç©ºçš„æƒåŠ›ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ¬£èµç¾å¥½çš„è‰ºæœ¯ã€‚ä¹‹æ‰€ä»¥è®©æˆ‘å°è±¡æ·±åˆ»è‡³ä»Šï¼Œæ˜¯å› ä¸ºè¿™å…¶ä¸­åŒ…å«äº†æ™®é€šäººå¯¹äºç²¾ç¥ä¸–ç•Œçš„ç¾å¥½è¿½æ±‚ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªå†œåå¤§ä¼¯ï¼Œé™¤äº†å’Œå¤©ä¸‹æ‰€æœ‰å†œæ°‘æœ‹å‹ä¸€æ ·åŠ³ä½œï¼Œç‹¬çˆ±åœ¨ç©ºé—²æ—¶çœ‹ã€Šè®ºæ–‡ã€‹ã€ã€Šé“å¾·ç»ã€‹è¿™äº›ä¹¦ç±ï¼Œçœ‹è¿™äº›ä¹¦ä¸ä¼šè®©ä»–çš„åº„ç¨¼æ”¶æˆæ›´é«˜ï¼Œä½†ä»–ä¸åœ¨æ„ï¼Œè¿˜æ˜¯ä¹åœ¨å…¶ä¸­ï¼Œå¿«ä¹è‡ªåœ¨ã€‚æ—äººä¼šå†·å˜²çƒ­è®½ï¼Œè§‰å¾—ä»–è¿™æ˜¯æµªè´¹æ—¶é—´ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œå¯â€œå­éé±¼ï¼Œå®‰çŸ¥é±¼ä¹‹ä¹â€å‘¢ï¼Ÿ</p>
<p>æœ€è¿‘ç½‘ä¸Šè¶Šæ¥è¶Šå¤šä¸€äº›åŸºå±‚å¹³æ˜ç™¾å§“å‡ºåœˆçš„æŠ¥é“ï¼Œæœ‰æ’­éŸ³å‘˜çš„å†œæ°‘å¤§å”ï¼Œæœ‰è¡—èˆå‡ºä¼—çš„å·¥åœ°å°å“¥ï¼Œæœ‰ä¹¦æ³•æœ‰åŠ²çš„å…¬å›­å¤§çˆ·ï¼Œè¿™äº›æ˜¯é€šè¿‡ä¸€äº›è‡ªå·±å–œå¥½å‡ºåœˆçš„ã€‚æˆ‘æƒ³è¯´çš„ä¸æ˜¯â€œåšæŒä¸€ä¸ªçˆ±å¥½è¯´ä¸å®šä»€ä¹ˆæ—¶å€™å°±èƒ½å‡ºåï¼Œæ€æ ·æ€æ ·çš„â€ã€‚æˆ‘æƒ³è¯´çš„æ˜¯æœ‰è‡ªå·±çš„ç²¾ç¥è¿½æ±‚æˆ–æ˜¯ä»€ä¹ˆçƒ­çˆ±çš„äº‹æƒ…ï¼Œåšä¸‹å»ï¼Œå¿«ä¹å°±æ˜¯è‡ªå·±çš„ï¼Œç»“æœæ€ä¹ˆæ ·æœ‰ä½•å¹²ç³»ã€‚</p>
<h1 id="æ— å¥ˆ">æ— å¥ˆ</h1>
<p>7æœˆåˆï¼Œæˆ‘é€ƒç¦»ä¸Šæµ·æ¥åˆ°æ­å·ã€‚è™½ç„¶æˆ‘æ¥ä¹‹å‰æœ‰å’¨è¯¢å’ŒæŠ¥å¤‡ï¼Œæˆ‘æ‰€åœ¨ä¸Šæµ·çš„åœ°åŒºä¹Ÿå±äºä½é£é™©åŒºåŸŸï¼Œä¹Ÿæœ‰24å°æ—¶çš„æ ¸é…¸é˜´æ€§è¯æ˜ï¼Œä½†æ˜¯åˆ°äº†æ­å·ç«™è¿˜æ˜¯å—åˆ°äº†ä¸€äº›é˜»ç¢ã€‚ä¸å¾—ä¸è¯´å„åœ°çš„é˜²ç–«æ”¿ç­–ä¸åŒè¿˜å¯ä»¥ç†è§£ï¼Œä½†æ˜¯å¥åº·ç å’Œæ ¸é…¸æŠ¥å‘Šç«Ÿç„¶ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸Šæµ·å°æ§é‚£æ®µæ—¶é—´æ˜¯ä¸åœçš„åšæŠ—åŸåšæ ¸é…¸ï¼Œè§£å°åå‡ºç°äº†å¾ˆå¤šå¸¸æ€åŒ–æ ¸é…¸æ£€æµ‹ç‚¹ï¼Œå‡ºé—¨ä¹Ÿä¼šè¦æ±‚æ‰«åœºæ‰€ç è¿˜æœ‰48å°æ—¶æˆ–æ˜¯72å°æ—¶çš„æ ¸é…¸é˜´æ€§è¯æ˜ã€‚æœ‰éœ€è¦çš„è¯æ¯å¤©éƒ½å¯ä»¥åšæ ¸é…¸ï¼Œå¾ˆæ–¹ä¾¿ã€‚æˆ‘æ¥çš„å‰ä¸€å¤©å°±åšäº†æ ¸é…¸ï¼Œä¸ä»…ä¸ºäº†æ–¹ä¾¿ç¦»æ²ªä¹Ÿæ–¹ä¾¿åˆ°å…¶ä»–åœ°æ–¹è½è„šã€‚å¯æ˜¯åˆ°äº†æ­å·ï¼Œè¿™è¾¹åˆæ˜¯ä¸åŒäºä¸Šæµ·çš„ç³»ç»Ÿï¼ŒæŸ¥ä¸åˆ°åœ¨ä¸Šæµ·åšçš„æ ¸é…¸ã€‚å¾ˆè‹¦æ¼ğŸ˜’<br />
é‚£å¤©ï¼Œå¤©æ°”ä¹Ÿæ˜¯å±äºç‚çƒ­ä¸€æ¡£ï¼Œåˆ°ç«™æ—¶é—´å¤§æ¦‚æ˜¯11ç‚¹å¤šï¼Œè½¦ç«™äººéå¸¸å¤šï¼Œè¦å‡ºå»è¦é€šè¿‡ä¸¤é“å…³å¡ï¼Œç¬¬ä¸€é“æ‰«ç éªŒè¯å¥åº·ç ï¼Œæˆ‘æ˜¯ç¬¬ä¸€æ¬¡åˆ°æ­å·ï¼Œå¥åº·ç æ˜¾ç¤ºæ˜¯ç»¿è‰²ï¼Œå¾ˆå®¹æ˜“å°±é€šè¿‡ç¬¬ä¸€é“å…³å¡ï¼Œç¬¬äºŒé“æ‰«åœºæ‰€ç ï¼ŒæŸ¥çœ‹æ ¸é…¸æŠ¥å‘Šå’Œè¡Œç¨‹ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘çš„è¡Œç¨‹è¿™é‡Œå‡ºç°é—®é¢˜ï¼ˆå±äºå¤–æ¥äººå‘˜éœ€è¦ç™»è®°ï¼‰ã€‚æŒ‰ç…§å·¥ä½œäººå‘˜çš„æŒ‡ç¤ºï¼Œåˆ°ä¸€ä¸ªæŒ‡å®šé€šé“ç™»è®°é¡ºä¾¿åšæ ¸é…¸ã€‚å°±åœ¨è·Ÿéšå·¥ä½œäººå‘˜å‰å¾€çš„è·¯ä¸Šï¼Œè¿˜æ˜¯åœ¨æ‹¥æŒ¤äººç¾¤çš„è½¦ç«™å†…ï¼Œä¸€ä¸ªå·¥ä½œäººå‘˜å®ˆæŠ¤çš„è·¯å£ï¼Œçœ‹è§ä¸€ä¸ªè„¸è‰²é»é»‘ã€èº«å½¢ç˜¦å¼±ã€å­¤èº«ä¸€äººå¸¦ç€è¡Œæçš„å¤§å¦ˆï¼Œæ— å¥ˆçš„è¦å“­å‡ºæ¥äº†ï¼Œæ‰‹é‡Œæ‹¿ç€æ‰‹æœºæ­£åœ¨ç»™è°æ‰“ç”µè¯ï¼Œæ— å¥ˆçš„ç—›è‹¦èˆ¬çš„å«ç€ï¼ˆå¸¦ç€æ–¹è¨€ï¼‰ï¼Œéšçº¦å¬åˆ°â€œä»–ä»¬ä¸è®©æˆ‘è¿‡ï¼Œè¿™ä¹ˆå¤§ï¼Œæ€ä¹ˆèµ°å•Šã€‚ã€‚ã€‚â€è¿™ç±»çš„è¯è¯­ã€‚æˆ‘è¿˜åœ¨è·Ÿéšç€é˜Ÿä¼ï¼Œæ²¡æœ‰æ³¨æ„å¥¹é‚£æ˜¯ä¸æ˜¯æ™ºèƒ½æœºï¼Œä¹Ÿæ²¡æœ‰ææ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸è¿‡å¤§æ¦‚ä¹Ÿæ˜¯ç–«æƒ…å‡ºè¡Œæ”¿ç­–è§„å®šç›¸å…³çš„å§ã€‚çœ‹ç€å¥¹æˆ‘è¿˜æ˜¯æŒºéš¾å—çš„ï¼Œç–«æƒ…æœŸé—´ï¼Œè€äººå®¶ï¼Œå‡ºé—¨åœ¨å¤–ï¼Œäººç”Ÿåœ°ä¸ç†Ÿï¼Œæˆ‘ä¸€ä¸ªç©é€šå„ç§æ‰‹æœºè½¯ä»¶ã€æŸ¥çœ‹åœ°å›¾ã€åœ°åŒºå…¬å‘Šçš„å¹´è½»äººä¹Ÿéš¾å…ä¼šé‡åˆ°ä¸€äº›éº»çƒ¦ï¼Œæ›´ä½•å†µè¿™ä½å¤§å¦ˆã€‚</p>
<p>æ˜¯è¯¥è®¨è®ºç–«æƒ…å‡ºè¡Œè¿˜æ˜¯è€äººå…³çˆ±è¿˜æ˜¯ã€‚ã€‚ã€‚æˆ‘ä¸çŸ¥é“å•Šï¼ï¼Ÿ</p>
<h1 id="ç»“">ç»“</h1>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šå½¢å½¢è‰²è‰²ä¸åŒçš„è·¯äººä¸æˆ‘ç›¸é‡ï¼Œç„¶åé”™è¿‡ï¼Œè¿™ä¹Ÿä»…ä»…è®°å½•äº†æˆ‘è¿˜æœ‰å°è±¡çš„æä¸ªåˆ«è€Œå·²ã€‚</p>
]]></content>
      <tags>
        <tag>æ€è€ƒ</tag>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>é‡ç½®ç”µè„‘</title>
    <url>/article/9d85b11b.html</url>
    <content><![CDATA[<p>å¤ªéš¾äº†ï¼Œé‡ç½®ä¸€æ¬¡ç”µè„‘å¤ªéš¾äº†ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›åœ¨è‡ªå·±ç”µè„‘ä¸Šæäº†å¾ˆå¤šä¸œè¥¿çš„ï¼Œå°±æ¯”å¦‚æˆ‘</p>
<span id="more"></span>
<h1 id="åŸå› ">åŸå› </h1>
<p>è€ƒå®Œè¯•å½“å¤©ä¸‹åˆå›å®¶ï¼Œæ”¾æ¾äº†ä¸€å¤©ï¼Œæƒ³ç€æ‰“å¼€IDEAçœ‹çœ‹å§ï¼Œæ¯•ç«Ÿå¥½ä¹…æ²¡æœ‰ç©ç”µè„‘äº†ï¼Œå¥½ä¹…æ²¡æœ‰IDEAäº†ï¼Œè¿™ä¸ªæœˆä¸€ç›´å¿™ç€å¤ä¹ å¤‡è€ƒï¼ŒçœŸçš„æ˜¯æ²¡æœ‰æœºä¼šç²¾åŠ›ï¼Œæ‰“å¼€ç©ç”µè„‘äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼ŒåŒå‡»IDEAï¼ŒæœŸç›¼ç€æ‰“å¼€è¿™å­¦æœŸçš„<strong>Java
Web</strong>é¡¹ç›®åœ¨ç…ç…ï¼Œæ²¡æƒ³åˆ°å•Šæ²¡æƒ³åˆ°ï¼Œæ‰“ä¸å¼€äº†ï¼Œæ•´ä¸ªäººä¸€ä¸‹æ…Œäº†ï¼Œå¸è½½å®‰è£…å¸è½½å®‰è£…ï¼Œé‡å¤å¥½å‡ æ¬¡å§‹ç»ˆæ²¡æœ‰è§£å†³é—®é¢˜ï¼Œåœ¨ç½‘ä¸Šä¹Ÿæœäº†ä¸å°‘è§£å†³æ–¹æ¡ˆï¼Œç§ç§éƒ½è¯•äº†è¯•ï¼Œä½†éƒ½æ²¡èƒ½å†æ¬¡æ‰“å¼€IDEAï¼Œè¿™æ—¶é‡ç½®çš„æƒ³æ³•å·²ç»èŒç”Ÿï¼Œä½†éšå³æƒ³æƒ³ï¼Œé‡ç½®åæˆ‘éœ€è¦åšå¤šå°‘å·¥ä½œï¼Œç®€ç›´åæ€•ï¼Œä¸æ•¢ï¼Œçº ç»“çº ç»“ï¼Œè¿‡äº†ä¸€å¤©åœ¨ç»è¿‡ä¸€ä¸Šåˆçš„æŠ‰æ‹©ç»ˆäºå†³å¿ƒé‡ç½®äº†ï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºIDEAï¼Œè¿˜æœ‰æˆ‘å¯¹äºæˆ‘ç”µè„‘é‡Œä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿å®åœ¨æ˜¯çƒ¦ï¼Œè¿™æ¬¡é‡ç½®å¯ä»¥å¥½å¥½æ•´ç†ä¸€ç•ªã€‚</p>
<h1 id="å¤‡ä»½">å¤‡ä»½</h1>
<ul>
<li>æˆ‘çš„ä¸€äº›é‡è¦é…ç½®åŠæ–‡ä»¶ï¼Œå¦‚ï¼šmavenã€geekã€ideaé¡¹ç›®ã€æ›¾ç»çš„C++ã€C#ã€Androidç­‰æ–‡ä»¶</li>
<li>åšå®¢</li>
<li>ä¸€äº›é‡è¦çš„å®‰è£…åŒ…</li>
<li>JDK</li>
<li>ç­‰</li>
</ul>
<h1 id="é‡ç½®">é‡ç½®</h1>
<p>ä¸Šé¢è¯´çš„å¥½åƒå¾ˆè½»æ¾ï¼Œä½†æˆ‘ç®€è¿°ä¸€ä¸‹ï¼Œé‡ç½®åæˆ‘åšäº†å“ªäº›å·¥ä½œå§</p>
<ul>
<li>å…ˆæŠŠç”µè„‘è‡ªå¸¦çš„è½¯ä»¶æ•´ç†æˆ–åˆ é™¤ï¼Œé€šè¿‡æ§åˆ¶é¢æ¿</li>
<li>Officeè½¯ä»¶æ•´ç†ã€è¿ˆå…‹è²è½¯ä»¶å¸è½½ï¼ˆæ‰¾äº†åŠå¤©ç»ˆäºå¸è½½å¹²å‡€äº†ï¼‰</li>
<li>è£…ä¸Šæˆ‘éœ€è¦çš„ç¤¾äº¤å¨±ä¹è½¯ä»¶ï¼šChromeï¼ˆå¹¸å¥½æœ‰åŒæ­¥åŠŸèƒ½ï¼Œå¤ªæƒŠå–œäº†ï¼Œå‰©ä¸‹ç»å¤§éƒ¨å·¥ä½œï¼‰ã€ç«ç»’ã€Timã€å¾®ä¿¡ã€ç½‘æ˜“äº‘éŸ³ä¹ã€ç™¾åº¦ç½‘ç›˜ç­‰</li>
<li>Javaå¼€å‘ç¯å¢ƒå’Œåšå®¢ç¯å¢ƒï¼ŒJDKã€IDEAï¼ˆæ¢ä¸Šäº†æ–°ç‰ˆ2020.3ï¼‰ã€Tomcatã€MySQLã€Navicatã€Gitã€node.js</li>
<li>VS Code å®‰è£…åŠé…ç½®ï¼ŒPythonåŠC++ç¯å¢ƒ</li>
</ul>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ä»é‡ç½®åˆ°åŸºæœ¬å›å¤ï¼Œå¤§æ¦‚ç”¨äº†ä¸€å¤©å¤šï¼Œè¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©çš„ï¼ŒChromeå¤ªæƒŠå–œäº†ï¼Œæ‰€æœ‰ä¹¦ç­¾ã€å¯†ç ã€æ’ä»¶ç­‰éƒ½åŒæ­¥åˆ°è°·æ­Œè´¦æˆ·äº†ï¼Œçœå»äº†å¤ªå¤šå·¥ä½œäº†ï¼Œè¿‡ç¨‹è¿˜æŒºå¥½çš„ï¼Œå¸®åŠ©æˆ‘ç†Ÿæ‚‰äº†ä¸€äº›è½¯ä»¶åŠç¯å¢ƒçš„é…ç½®å®‰è£…ã€‚</p>
]]></content>
      <tags>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>é‡è¯»KMPç®—æ³•</title>
    <url>/article/3d43acee.html</url>
    <content><![CDATA[<p>è¿™å‡ å¤©çœ‹äº†ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ç¬¬äº”ç« -ä¸²ï¼Œé‡æ–°äº†è§£äº†ä¸²è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œå½“ç„¶å…¶ä¸­æœ€é‡è¦çš„æ¨¡å¼åŒ¹é…ç®—æ³•KMPæœ‰äº†æ–°çš„è®¤è¯†ï¼Œæˆ–è€…è¯´æ˜¯ç»ˆäºç†è§£äº†ã€‚<br />
æ¥ä¸‹æ¥ç»“åˆæˆ‘çš„ç†è§£å’Œ<a
href="https://blog.csdn.net/v_JULY_v/article/details/7041827">CSDNä¸­å¤§ä½¬</a>çš„è¯¦è§£ï¼Œè®²ä¸€è®²KMPå§ï¼</p>
<h1
id="æœ´ç´ çš„æ¨¡å¼åŒ¹é…bfç®—æ³•æš´åŠ›ç®—æ³•">æœ´ç´ çš„æ¨¡å¼åŒ¹é…ï¼ˆBFç®—æ³•ã€æš´åŠ›ç®—æ³•ï¼‰</h1>
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>è¿™æ˜¯æœ€æ—©ã€æœ€ç®€å•çš„æ¨¡å¼åŒ¹é…ç®—æ³•ï¼Œå°±æ˜¯ç®€å•çš„æš´åŠ›ç®—æ³•ï¼Œæ€è·¯ï¼š<br />
* ä¸»ä¸²Sï¼Œæ¨¡å¼ä¸²T *
ä»ä¸»ä¸²Sç¬¬ä¸€ä½å¼€å§‹å’Œæ¨¡å¼ä¸²Tç¬¬ä¸€ä½å¼€å§‹åŒ¹é…ï¼ŒæˆåŠŸåŒ¹é…è¿”å›åŒ¹é…æˆåŠŸçš„ç¬¬ä¸€ä½ï¼ŒåŒ¹é…å¤±è´¥ï¼Œä¸»ä¸²Såç§»ä¸€ä½ï¼Œæ¨¡å¼ä¸²é‡æ–°ä»å¤´å¼€å§‹åŒ¹é…</p>
<span id="more"></span>
<h1 id="ä»£ç ">ä»£ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æœ´ç´ çš„åŒ¹é…,ä»posä½ç½®å¼€å§‹åŒ¹é…</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Index</span><span class="params">(string S, string T, <span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i = pos;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; S.<span class="built_in">length</span>() &amp;&amp; j &lt; T.<span class="built_in">length</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (S[i] == T[j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//â‘ å¦‚æœå½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] == T[j]ï¼‰ï¼Œåˆ™i++ï¼Œj++  </span></span><br><span class="line">            ++i;</span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//â‘¡å¦‚æœå¤±é…ï¼ˆå³S[i]! = T[j]ï¼‰ï¼Œä»¤i =ï¼ˆi - jï¼‰ + 1ï¼Œj = 0  </span></span><br><span class="line">            i = i - j + <span class="number">1</span>;</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">if</span> (j == T.<span class="built_in">length</span>())</span><br><span class="line">        <span class="keyword">return</span> i - j;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¾‹">ä¾‹</h1>
<p>S="goodgoogle",T="google"<br />
&gt;1. <del>goo</del>dgoogle<br />
<del>goo</del>gle &gt;2. goodgoogle<br />
Â Â google &gt;3. goodgoogle<br />
Â Â Â Â google &gt;4. goodgoogle<br />
Â Â Â Â Â Â google &gt;5. good<del>google</del><br />
Â Â Â Â Â Â Â Â <del>google</del></p>
<p>æœ´ç´ çš„æ¨¡å¼åŒ¹é…å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥çœ‹å‡ºè¿™ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¾ˆå¤§ï¼Œä¸ºäº†ä¼˜åŒ–æ¨¡å¼åŒ¹é…å°±æœ‰äº†KMPç®—æ³•
# KMPç®—æ³•</p>
<h1 id="ç®€ä»‹-1">ç®€ä»‹</h1>
<p>KMPæ˜¯ç”±ä¸‰ä½å‰è¾ˆç ”ç©¶å‡ºæ¥çš„é¿å…é‡å¤éå†çš„é«˜æ•ˆç‡æ¨¡å¼åŒ¹é…ç®—æ³•ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯D.E.Knuthã€J.H.Morrisã€V.R.Prattã€‚çŸ¥é“äº†å§KMPæ˜¯æ¥è‡ªè¿™ä¸‰ä½å‰è¾ˆçš„åå­—ï¼Œæˆ‘ä»¬åœ¨ç§°ä¹‹ä¸ºå…‹åŠªç‰¹-è«é‡Œæ–¯-æ™®æ‹‰ç‰¹ç®—æ³•ã€‚
# åŸç†</p>
<p>é€šä¿—çš„è®²ï¼ŒKMPç®—æ³•åˆ©ç”¨å·²åŒ¹é…çš„ç°æœ‰ä¿¡æ¯ï¼Œçœå»ä¸å¿…è¦çš„åŒ¹é…è¿‡ç¨‹ï¼Œè¿›è€Œä¼˜åŒ–ç®—æ³•ã€‚<br />
&gt;å…ˆä¸Šä¸€ä¸ªä¾‹å­è§£é‡Šä¸€ä¸‹<br />
S="abcababcax",T="abcabx"<br />
&gt;1. <del>abcab</del>abcax<br />
<del>abcab</del>x<br />
&gt;2. abcababcax<br />
Â Â abcabx<br />
&gt;3. abcababcax<br />
Â Â Â Â abcabx<br />
&gt;4. abc<del>a</del>babcax<br />
Â Â Â Â Â Â <del>a</del>bcabx<br />
&gt;5. abc<del>ab</del>abcax<br />
Â Â Â Â Â Â <del>ab</del>cabx<br />
&gt;6. abc<del>ab</del>abcax<br />
Â Â Â Â Â Â <del>ab</del>cabx</p>
<p>1å‰5ä½â€œabcabâ€åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶Sçš„ç¬¬iä½"a"ä¸Tçš„ç¬¬jä½"x"åŒ¹é…å¤±è´¥ï¼Œi=5ï¼Œj=5ï¼ŒæŒ‰ç…§æœ´ç´ çš„æ¨¡å¼åŒ¹é…ç®—æ³•ï¼Œæ¥ä¸‹æ¥è¦è®©Tä¸²åç§»ä¸€ä½ç»§ç»­ä¸SåŒ¹é…ï¼Œiå˜ä¸º1ï¼Œjå˜æˆ0ï¼Œå°±æ˜¯ä¸Šé¢çš„è¿‡ç¨‹ï¼Œå…¶å®ä»1è·å–çš„åŒ¹é…ä¿¡æ¯å¯ä»¥çŸ¥é“Sçš„å‰ä¸‰ä½"abc"å·²ä¸Tçš„ç›¸åº”ä½åŒ¹é…æˆåŠŸï¼Œä¸”"bc"å¹¶ä¸ç­‰äº"a"ï¼Œæ‰€ä»¥23æ­¥ä¸å¯èƒ½åŒ¹é…æˆåŠŸï¼Œiåœ¨ç¬¬ä¸€æ­¥æ—¶å·²ç»ç­‰äº5äº†ï¼Œä½†ç»è¿‡2345è¿‡ç¨‹5-&gt;1-&gt;2-&gt;3-&gt;4-&gt;5æœ€åSçš„ç¬¬iä½"a"ä¸Tçš„ç¬¬jä½"c"åŒ¹é…å¤±è´¥,i=5ï¼Œj=2ã€‚å¯ä»¥å‘ç°ä¹‹å‰çš„2345å¯ä»¥å»æ‰ï¼Œiåœ¨è¿™å˜åŒ–ä¸­åˆå›åˆ°5ï¼Œè¿™ä¸ªè¿‡ç¨‹å˜åŒ–çš„å¥½åƒåªæ˜¯jçš„å€¼ï¼ŒKMPè¦åšçš„å°±æ˜¯çœå»ä¸å¿…è¦çš„åŒ¹é…è¿‡ç¨‹ï¼Œç›´æ¥è·³åˆ°åˆé€‚çš„ä½ç½®ã€‚
# ä»£ç </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//KMP</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">KmpSearch</span><span class="params">(string S, string T, <span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i = pos;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> Sl = S.<span class="built_in">length</span>();</span><br><span class="line">    <span class="type">int</span> Tl = T.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">while</span> (i &lt; Sl &amp;&amp; j &lt; Tl)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//â‘ å¦‚æœj = -1ï¼Œæˆ–è€…å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ˆå³S[i] == T[j]ï¼‰ï¼Œéƒ½ä»¤i++ï¼Œj++</span></span><br><span class="line">        <span class="keyword">if</span> (j == <span class="number">-1</span> || S[i] == T[j])</span><br><span class="line">        &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//â‘¡å¦‚æœj != -1ï¼Œä¸”å½“å‰å­—ç¬¦åŒ¹é…å¤±è´¥ï¼ˆå³S[i] != T[j]ï¼‰ï¼Œåˆ™ä»¤ i ä¸å˜ï¼Œj = next[j]    </span></span><br><span class="line">            <span class="comment">//next[j]å³ä¸ºjæ‰€å¯¹åº”çš„nextå€¼      </span></span><br><span class="line">            j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j == Tl)</span><br><span class="line">        <span class="keyword">return</span> i - j;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="nextæ•°ç»„">nextæ•°ç»„</h1>
<p>å‰é¢æåˆ°åˆé€‚çš„ä½ç½®ï¼Œä»€ä¹ˆå«åšåˆé€‚çš„ä½ç½®å‘¢ï¼Œå°±æ˜¯ä¸»ä¸²Sä¸æ¨¡å¼ä¸²Tå¤±é…æ—¶ï¼Œiä¸å˜ï¼Œåªç§»åŠ¨æ¨¡å¼ä¸²Tåˆ°åˆé€‚çš„ä½ç½®å†ä¸SåŒ¹é…ï¼Œè¿™ä¸ªåˆé€‚çš„ä½ç½®å°±å­˜åœ¨nextæ•°ç»„ä¸­ã€‚<br />
ä¸Šä¾‹ä¸­ç¬¬ä¸€æ¬¡åœ¨i=5ï¼Œj=5å¤±é…ï¼Œçœå»ä¸å¿…è¦çš„è¿‡ç¨‹åi=5ï¼Œj=2ï¼Œä¹Ÿå°±æ˜¯iä¸å˜ï¼Œjä»5å˜æˆ2ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­çœå»çš„æ˜¯Tå‰ä¸¤ä½"ab"ä¸Sçš„45ä½"ab"åŒ¹é…çš„è¿‡ç¨‹ï¼Œçœå»çš„åŸå› æ˜¯åœ¨ç¬¬ä¸€æ¬¡å·²ç»åŒ¹é…è¿‡äº†ï¼ŒSçš„"abcab"ä¸Tçš„"abcab"åŒ¹é…ï¼Œå¯ä»¥å‘ç°ï¼ŒTçš„å‰ç¼€å’Œåç¼€éƒ½æœ‰"ab"ï¼Œåˆ™ä¸‹æ¬¡åŒ¹é…å¯ä»¥ä»Tçš„ç¬¬2ä½"c"å¼€å§‹ä¸Sä¸Šæ¬¡å¤±é…çš„ç¬¬5ä½å¼€å§‹é‡æ–°åŒ¹é…ã€‚</p>
<h1 id="æœ€å¤§ç›¸åŒå‰åç¼€">æœ€å¤§ç›¸åŒå‰åç¼€</h1>
<p>è¦è®¡ç®—nextæ•°ç»„ä¸€å®šè¦çŸ¥é“æœ€å¤§ç›¸åŒå‰åç¼€ï¼Œä»ä¸Šé¢çš„è§£é‡Šå¯ä»¥çŸ¥é“ï¼Œjçš„å˜åŒ–ä¸æ¨¡å¼ä¸²Tæœ‰å…³ï¼Œåœ¨å¤±é…æ—¶j=next[j]ï¼Œæ‰€ä»¥è¦çŸ¥é“Tæœ€å¤§å‰åç¼€ä¸nextæ•°ç»„çš„å…³ç³»ã€‚</p>
<h1 id="å¯¹äºæ¨¡å¼ä¸²tabcabx">å¯¹äºæ¨¡å¼ä¸²T="abcabx"</h1>
<table>
<thead>
<tr class="header">
<th>æ¨¡å¼ä¸²</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>a</th>
<th>b</th>
<th>x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>æœ€å¤§ç›¸åŒå‰åç¼€</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
<tr class="even">
<td>nextæ•°ç»„</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>ä¸²ä¸º"a"ï¼Œ"ab"ï¼Œ"abc"ï¼Œæ—¶æœ€å¤§ç›¸åŒå‰åç¼€ä¸º0ï¼Œ"abca"ä¸º1åŠå‰åçš„"a"ï¼Œ"abcab"ä¸º2åŠå‰åçš„"ab"ã€‚æŠŠnext
æ•°ç»„è·Ÿæ±‚å¾—çš„æœ€å¤§ç›¸åŒå‰åç¼€å¯¹æ¯”åï¼Œä¸éš¾å‘ç°ï¼Œnext
æ•°ç»„ç›¸å½“äºâ€œæœ€å¤§ç›¸åŒå‰åç¼€â€ æ•´ä½“å‘å³ç§»åŠ¨ä¸€ä½ï¼Œç„¶ååˆå§‹å€¼èµ‹ä¸º-1ã€‚</p>
<h1 id="ä»£ç -1">ä»£ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//nextæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GetNext</span><span class="params">(string T, <span class="type">int</span> next[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> k = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &lt;T.<span class="built_in">length</span>() - <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//T[k]è¡¨ç¤ºå‰ç¼€ï¼ŒT[j]è¡¨ç¤ºåç¼€</span></span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">-1</span> || T[j] == T[k])</span><br><span class="line">        &#123;</span><br><span class="line">            ++k;</span><br><span class="line">            ++j;</span><br><span class="line">            next[j] = k;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            k = next[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç æœ‰ç‚¹éš¾ç†è§£ï¼Œæˆ‘ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œè¿™é‡Œæ¶‰åŠäº†å·²çŸ¥next[0,...,j],æ±‚next[j+1]çš„é—®é¢˜ã€‚<br />
&gt; å¯¹äºTçš„å‰j+1ä¸ªåºåˆ—å­—ç¬¦ï¼š</p>
<ul>
<li>è‹¥T[k] == T[j]ï¼Œåˆ™next[j + 1 ] = next [j] + 1 = k + 1ï¼›<br />
</li>
<li>è‹¥T[k ] â‰  T[j]ï¼Œå¦‚æœæ­¤æ—¶T[Â next[k]Â ] == T[j ]ï¼Œåˆ™next[ j + 1 ] =
Â next[k]Â + 1ï¼Œå¦åˆ™ç»§ç»­é€’å½’å‰ç¼€ç´¢å¼•k =
next[k]ï¼Œè€Œåé‡å¤æ­¤è¿‡ç¨‹ã€‚Â ç›¸å½“äºåœ¨å­—ç¬¦T[j+1]ä¹‹å‰ä¸å­˜åœ¨é•¿åº¦ä¸ºk+1çš„å‰ç¼€"T0
T1, â€¦, Tk-1 Tk"è·Ÿåç¼€â€œTj-k Tj-k+1, â€¦, Tj-1
Tj"ç›¸ç­‰ï¼Œé‚£ä¹ˆæ˜¯å¦å¯èƒ½å­˜åœ¨å¦ä¸€ä¸ªå€¼t+1 &lt; k+1ï¼Œä½¿å¾—é•¿åº¦æ›´å°çš„å‰ç¼€ â€œT0
T1, â€¦, Tt-1 Ttâ€ ç­‰äºé•¿åº¦æ›´å°çš„åç¼€ â€œTj-t Tj-t+1, â€¦, Tj-1 Tjâ€
å‘¢ï¼Ÿå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªt+1 ä¾¿æ˜¯next[ j+1]çš„å€¼ï¼Œæ­¤ç›¸å½“äºåˆ©ç”¨å·²ç»æ±‚å¾—çš„next
æ•°ç»„ï¼ˆnext [0, ..., k, ..., j]ï¼‰è¿›è¡ŒTä¸²å‰ç¼€è·ŸTä¸²åç¼€çš„åŒ¹é…ã€‚</li>
<li>åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/v_JULY_v/article/details/7041827</li>
</ul>
<h1 id="nextæ•°ç»„çš„ä¼˜åŒ–">nextæ•°ç»„çš„ä¼˜åŒ–</h1>
<h1 id="é—®é¢˜çš„å‡ºç°">é—®é¢˜çš„å‡ºç°</h1>
<p>åæ¥æœ‰äººå‘ç°ï¼ŒKMPç®—æ³•è¿˜æ˜¯æœ‰ç¼ºé™·çš„ã€‚<br />
å¦‚æœç”¨ä¹‹å‰çš„next æ•°ç»„æ–¹æ³•æ±‚æ¨¡å¼ä¸²â€œababâ€çš„next æ•°ç»„ï¼Œå¯å¾—å…¶next æ•°ç»„ä¸º-1
0 0 1ï¼ˆ0 0 1
2æ•´ä½“å³ç§»ä¸€ä½ï¼Œåˆå€¼èµ‹ä¸º-1ï¼‰ï¼Œå½“å®ƒè·Ÿä¸‹å›¾ä¸­çš„æ–‡æœ¬ä¸²å»åŒ¹é…çš„æ—¶å€™ï¼Œå‘ç°bè·Ÿcå¤±é…ï¼Œäºæ˜¯æ¨¡å¼ä¸²j
= next[j] =1ã€‚ &gt; <del>aba</del>cabababc<br />
<del>aba</del>b</p>
<p>å³ç§»2ä½åï¼Œbåˆè·Ÿcå¤±é…ã€‚äº‹å®ä¸Šï¼Œå› ä¸ºåœ¨ä¸Šä¸€æ­¥çš„åŒ¹é…ä¸­ï¼Œå·²ç»å¾—çŸ¥p[3] =
bï¼Œä¸s[3] = cå¤±é…ï¼Œè€Œå³ç§»ä¸¤ä½ä¹‹åï¼Œè®©p[ next[3] ] = p[1] = b
å†è·Ÿs[3]åŒ¹é…æ—¶ï¼Œå¿…ç„¶å¤±é…ã€‚<br />
&gt; ab<del>a</del>cabababc Â Â Â Â ab<del>a</del>b</p>
<p>é—®é¢˜å‡ºåœ¨ä¸è¯¥å‡ºç°T[j] = T[ next[j] ]ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç†ç”±æ˜¯ï¼šå½“T[j] != S[i]
æ—¶ï¼Œä¸‹æ¬¡åŒ¹é…å¿…ç„¶æ˜¯T[ next [j]] è·ŸS[i]åŒ¹é…ï¼Œå¦‚æœT[j] = T[ next[j]
]ï¼Œå¿…ç„¶å¯¼è‡´åä¸€æ­¥åŒ¹é…å¤±è´¥ï¼ˆå› ä¸ºT[j]å·²ç»è·ŸS[i]å¤±é…ï¼Œç„¶åä½ è¿˜ç”¨è·ŸT[j]ç­‰åŒçš„å€¼T[next[j]]å»è·ŸS[i]åŒ¹é…ï¼Œå¾ˆæ˜¾ç„¶ï¼Œå¿…ç„¶å¤±é…ï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½å…è®¸T[j]
= T[ next[j ]]ã€‚å¦‚æœå‡ºç°äº†T[j] = T[ next[j]
]å’‹åŠå‘¢ï¼Ÿå¦‚æœå‡ºç°äº†ï¼Œåˆ™éœ€è¦å†æ¬¡é€’å½’ï¼Œå³ä»¤next[j] = next[ next[j]
]ã€‚<br />
åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/v_JULY_v/article/details/7041827</p>
<h1 id="ä»£ç -2">ä»£ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¼˜åŒ–è¿‡åçš„next æ•°ç»„æ±‚æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GetNextval</span><span class="params">(string T, <span class="type">int</span> next[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> k = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; T.<span class="built_in">length</span>()- <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//T[k]è¡¨ç¤ºå‰ç¼€ï¼ŒT[j]è¡¨ç¤ºåç¼€  </span></span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">-1</span> || T[j] == T[k])</span><br><span class="line">        &#123;</span><br><span class="line">            ++j;</span><br><span class="line">            ++k;</span><br><span class="line">            <span class="comment">//è¾ƒä¹‹å‰nextæ•°ç»„æ±‚æ³•ï¼Œæ”¹åŠ¨åœ¨ä¸‹é¢4è¡Œ</span></span><br><span class="line">            <span class="keyword">if</span> (T[j] != T[k])</span><br><span class="line">                next[j] = k;   <span class="comment">//ä¹‹å‰åªæœ‰è¿™ä¸€è¡Œ</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="comment">//å› ä¸ºä¸èƒ½å‡ºç°T[j] = T[ next[j ]]ï¼Œæ‰€ä»¥å½“å‡ºç°æ—¶éœ€è¦ç»§ç»­é€’å½’ï¼Œk = next[k] = next[next[k]]</span></span><br><span class="line">                next[j] = next[k];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            k = next[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="kmpç®—æ³•æ—¶é—´å¤æ‚åº¦åˆ†æ">KMPç®—æ³•æ—¶é—´å¤æ‚åº¦åˆ†æ</h1>
<p>æœ´ç´ çš„æ¨¡å¼åŒ¹é…ç®—æ³•æ—¶é—´å¤æ‚åº¦åˆ†æå¦‚ä¸‹ï¼šï¼ˆnä¸ºä¸»ä¸²é•¿åº¦
ï¼Œmä¸ºæ¨¡å¼ä¸²é•¿åº¦ï¼‰</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>æƒ…å†µ</th>
<th>æ—¶é—´å¤æ‚åº¦</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>æœ€å¥½æƒ…å†µ</td>
<td>O(1)</td>
<td>ä¸€å¼€å§‹å°±åŒ¹é…æˆåŠŸ</td>
</tr>
<tr class="even">
<td>æœ€åæƒ…å†µ</td>
<td>O((n-m+1)*m)</td>
<td>æ¯æ¬¡ä¸æˆåŠŸçš„åŒ¹é…éƒ½å‘ç”Ÿåœ¨æ¨¡å¼ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr class="odd">
<td>å¹³å‡æƒ…å†µ</td>
<td>O(n+m)</td>
<td>æ ¹æ®ç­‰æ¦‚ç‡åŸåˆ™ï¼Œå¹³å‡æ˜¯(n+m)/2æ¬¡æŸ¥æ‰¾</td>
</tr>
</tbody>
</table>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æ•°æ®ç»“æ„æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™æ¬¡çš„KMPç®—æ³•ä¹Ÿæ˜¯èŠ±äº†å¥½ä¹…æ‰ç†è§£çš„ã€‚<br />
æ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚</p>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯»ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/article/19bb1124.html</url>
    <content><![CDATA[<h1
id="section"><img data-src="https://jsd.cdn.zzko.cn/wnhyang/clouding@master/å¤§è¯æ•°æ®ç»“æ„.jpg" width = "" height = "200" alt="ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹"/></h1>
<h1 id="å†…å®¹ç®€ä»‹">å†…å®¹ç®€ä»‹</h1>
<p>æœ¬ä¹¦ä¸ºè¶…çº§ç•…é”€ä¹¦ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹ä½œè€…ç¨‹æ°æ½œå¿ƒä¸‰å¹´æ¨å‡ºçš„æ‰›é¼ä¹‹ä½œï¼ä»¥ä¸€ä¸ªè®¡ç®—æœºæ•™å¸ˆæ•™å­¦ä¸ºåœºæ™¯ï¼Œè®²è§£æ•°æ®ç»“æ„å’Œç›¸å…³ç®—æ³•çš„çŸ¥è¯†ã€‚é€šç¯‡ä»¥ä¸€ç§è¶£å‘³æ–¹å¼æ¥å™è¿°ï¼Œå¤§é‡å¼•ç”¨äº†å„ç§å„æ ·çš„ç”Ÿæ´»çŸ¥è¯†æ¥ç±»æ¯”ï¼Œå¹¶å……åˆ†è¿ç”¨å›¾å½¢è¯­è¨€æ¥ä½“ç°æŠ½è±¡å†…å®¹ï¼Œå¯¹æ•°æ®ç»“æ„æ‰€æ¶‰åŠåˆ°çš„ä¸€äº›ç»å…¸ç®—æ³•åšåˆ°é€è¡Œåˆ†æã€å¤šç®—æ³•æ¯”è¾ƒã€‚ä¸å¸‚åœºä¸Šçš„åŒç±»æ•°æ®ç»“æ„å›¾ä¹¦ç›¸æ¯”ï¼Œæœ¬ä¹¦å†…å®¹è¶£å‘³æ˜“è¯»ï¼Œç®—æ³•è®²è§£ç»†è‡´æ·±åˆ»ï¼Œæ˜¯ä¸€æœ¬éå¸¸é€‚åˆè‡ªå­¦çš„è¯»ç‰©ã€‚</p>
<p>æœ¬ä¹¦ä»¥ä¸€ä¸ªè®¡ç®—æœºæ•™å¸ˆæ•™å­¦ä¸ºåœºæ™¯ï¼Œè®²è§£æ•°æ®ç»“æ„å’Œç›¸å…³ç®—æ³•çš„çŸ¥è¯†ã€‚é€šç¯‡?ä¸€ç§è¶£å‘³æ–¹å¼æ¥å™è¿°ï¼Œå¤§é‡å¼•ç”¨äº†å„ç§å„æ ·çš„ç”Ÿæ´»çŸ¥è¯†æ¥ç±»æ¯”ï¼Œå¹¶å……åˆ†è¿ç”¨å›¾å½¢è¯­è¨€æ¥ä½“ç°æŠ½è±¡å†…å®¹ï¼Œå¯¹æ•°æ®ç»“æ„æ‰€æ¶‰åŠåˆ°çš„ä¸€äº›ç»å…¸ç®—æ³•åšåˆ°é€è¡Œåˆ†æã€å¤šç®—æ³•æ¯”è¾ƒã€‚ä¸å¸‚åœºä¸Šçš„åŒç±»æ•°æ®ç»“æ„å›¾ä¹¦ç›¸æ¯”ï¼Œæœ¬ä¹¦å†…å®¹è¶£å‘³æ˜“è¯»ï¼Œç®—æ³•è®²è§£ç»†è‡´æ·±åˆ»ï¼Œæ˜¯ä¸€æœ¬éå¸¸é€‚åˆè‡ªå­¦çš„è¯»ç‰©ã€‚</p>
<span id="more"></span>
<h1 id="æ•°æ®ç»“æ„ç»ªè®º"><a
href="https://wnhyang.github.io/article/b06cc6ec.html">æ•°æ®ç»“æ„ç»ªè®º</a></h1>
<h1 id="ç®—æ³•"><a
href="https://wnhyang.github.io/article/b7e144d1.html">ç®—æ³•</a></h1>
<h1 id="çº¿æ€§è¡¨"><a
href="https://wnhyang.github.io/article/40f24371.html">çº¿æ€§è¡¨</a></h1>
<h1 id="æ ˆä¸é˜Ÿåˆ—"><a
href="https://wnhyang.github.io/article/6534ce06.html">æ ˆä¸é˜Ÿåˆ—</a></h1>
<h1 id="kmp"><a
href="https://wnhyang.github.io/article/3d43acee.html">KMP</a></h1>
<h1 id="æ ‘"><a
href="https://wnhyang.github.io/article/7b216a3b.html">æ ‘</a></h1>
<h1 id="äºŒå‰æ ‘"><a
href="https://wnhyang.github.io/article/e85d694a.html">äºŒå‰æ ‘</a></h1>
<h1 id="å“ˆå¤«æ›¼æ ‘åŠåº”ç”¨"><a
href="https://wnhyang.github.io/article/29d55788.html">å“ˆå¤«æ›¼æ ‘åŠåº”ç”¨</a></h1>
<h1 id="å›¾"><a href="">å›¾</a></h1>
<h1 id="æŸ¥æ‰¾"><a
href="https://wnhyang.github.io/article/33cb1151.html">æŸ¥æ‰¾</a></h1>
<h1 id="æ’åº"><a
href="https://wnhyang.github.io/article/a444b428.html">æ’åº</a></h1>
]]></content>
      <tags>
        <tag>æ•°æ®ç»“æ„&amp;ç®—æ³•</tag>
        <tag>è¯»ä¹¦</tag>
      </tags>
  </entry>
</search>
